---
title: "TF5200_syntax_check_en"
product: "TF5200"
category: "Motion_Control"
tags: ["NC"]
language: "EN"
document_type: "Manual"
version: "1.04"
source_pdf: "https://download.beckhoff.com/download/Document/automation/twincat3/TF5200_syntax_check_en.pdf"
release_date: "2025-06-10"
---
Functional description | EN TF5200 | Twin CAT 3 CNC Syntax check 6/10/2025 | Version: 1.04
## Page 3

Notes on the documentation Notes on the documentation This description is only intended for the use of trained specialists in control and automation engineering who are familiar with the applicable national standards. It is essential that the documentation and the following notes and explanations are followed when installing and commissioning the components. It is the duty of the technical personnel to use the documentation published at the respective time of each installation and commissioning. The responsible staff must ensure that the application or use of the products described satisfy all the requirements for safety, including all the relevant laws, regulations, guidelines and standards. Disclaimer The documentation has been prepared with care. The products described are, however, constantly under development. We reserve the right to revise and change the documentation at any time and without prior announcement. No claims for the modification of products that have already been supplied may be made on the basis of the data, diagrams and descriptions in this documentation. Trademarks Beckhoff®, Twin CAT®, Twin CAT/BSD®, TC/BSD®, Ether CAT®, Ether CAT G®, Ether CAT G10®, Ether CAT P®, Safety over Ether CAT®, Twin SAFE®, XFC®, XTS® and XPlanar® are registered trademarks of and licensed by Beckhoff Automation Gmb H. Other designations used in this publication may be trademarks whose use by third parties for their own purposes could violate the rights of the owners. Patent Pending The Ether CAT technology is patent protected, in particular by the following applications and patents: EP1590927, EP1789857, EP1456722, EP2137893, DE102015105702 with corresponding applications or registrations in various other countries. Ether CAT® is registered trademark and patented technology, licensed by Beckhoff Automation Gmb H, Germany Copyright © Beckhoff Automation Gmb H & Co. KG, Germany. The reproduction, distribution and utilisation of this document as well as the communication of its contents to others without express authorisation are prohibited. Offenders will be held liable for the payment of damages. All rights reserved in the event of the grant of a patent, utility model or design. TF5200 | Twin CAT 3 CNC Version: 1.04 3 Syntax check
## Page 4

General and safety instructions General and safety instructions Icons used and their meanings This documentation uses the following icons next to the safety instruction and the associated text. Please read the (safety) instructions carefully and comply with them at all times. Icons in explanatory text 1. Indicates an action. ð Indicates an action statement. DANGER Acute danger to life! If you fail to comply with the safety instruction next to this icon, there is immediate danger to human life and health. CAUTION Personal injury and damage to machines! If you fail to comply with the safety instruction next to this icon, it may result in personal injury or damage to machines. NOTICE Restriction or error This icon describes restrictions or warns of errors. Tips and other notes This icon indicates information to assist in general understanding or to provide additional informa- tion. General example Example that clarifies the text. NC programming example Programming example (complete NC program or program sequence) of the described function or NC com- mand. Specific version information Optional or restricted function. The availability of this function depends on the configuration and the scope of the version. 4 Version: 1.04 TF5200 | Twin CAT 3 CNC Syntax check
## Page 5

Table of contents Table of contents Notes on the documentation.................................................................................................................... 3 General and safety instructions.............................................................................................................. 4 1 Overview.................................................................................................................................................... 8 2 Description................................................................................................................................................ 9 3 Interfacing................................................................................................................................................ 12 3.1 Selection via HMI interface............................................................................................................. 12 3.2 Commands and display via PLC interface...................................................................................... 13 3.2.1 HLI parameters up to CNC Build V2.20xx........................................................................ 15 4 Parameter................................................................................................................................................. 17 4.1 Overview......................................................................................................................................... 18 4.2 Description of channel parameters................................................................................................. 18 5 Support and Service............................................................................................................................... 20 Index......................................................................................................................................................... 21 TF5200 | Twin CAT 3 CNC Version: 5 Syntax check
## Page 6

Table of contents 6 Version: TF5200 | Twin CAT 3 CNC Syntax check
## Page 7

List of figures List of figures Fig. 1 Syntax check without drives......................................................................................................... 11 Fig. 2 Implicit handshake during interactive syntax check between decoder and Mcm/PLC ................ 15 TF5200 | Twin CAT 3 CNC Version: 1.04 7 Syntax check
## Page 8

Overview 1 Overview Task With very large, complex or manually created NC programs in particular, it is advisable to check the correctness of the syntax in advance. This is carried out by using the special “Syntax check mode”. The syntax check can be executed • either offline on a separate test system • or directly on the machine controller. Characteristics Syntax errors detected in the NC program are displayed or optionally logged to a file so that the operator can then access them at a later date to correct the program. NC program decoding is not aborted in the event of a syntax error. Instead, the check algorithm attempts to continue working on the next NC line. To permit rapid processing of the NC program under test, • the axes/drives are not moved during the syntax check. • Technology functions (M, H and T functions) are not executed. Since the entire NC channel (except for the position controller) participates in the syntax check, incorrect programming items are displayed, i.e. axis positions containing violations of software limit switches etc.. In these cases the syntax check is aborted and issues an error message. Parametrisation The syntax check can be run in 2 modes: • Single step mode • Automatic mode The associated configuration is carried out in the channel parameter list. After a syntax error message, a defined restart can be executed and largely avoids any follow-up errors. The technology commands used in the NC program (M, H and T functions) must be specified for decoding by setting them in the channel parameter list accordingly. Mandatory note on references to other documents For the sake of clarity, links to other documents and parameters are abbreviated, e.g. [PROG] for the Programming Manual or P-AXIS-00001 for an axis parameter. For technical reasons, these links only function in the Online Help (HTML5, CHM) but not in pdf files since pdfs do not support cross-linking. 8 Version: 1.04 TF5200 | Twin CAT 3 CNC Syntax check
## Page 9

Description 2 Description Operation The syntax check is run via the operating mode interface according to real program execution. The following can be evaluated: • START, STOP, CONTINUE and RESET commands • ERROR and HOLD display states Display In real program execution, the file position (filename and file offset, mc_active_file_offset_r and mc_active_file_name_r) is displayed synchronously with the real axis motion. It no longer has any timing reference to program decoding. When the syntax check is active, the file position is automatically displayed synchronously to decoding. Therefore, the operator need not consider any distinction to display the file. The table below shows the various error scenarios and the possible error responses in syntax check mode: Error type Error category Error response Response to e.g. stack overflow Discard the NC line resource errors Response to syntax Errors in $ and # commands Discard the NC line error Unexpected character/term Use of information pertaining to the current NC after $ and # commands line Unexpected/invalid characters/ Use of information pertaining to the current NC terms line Response to Left-handed error in an Reposition after allocation semantic errors allocation Select NC commands that are Continued decoding without repositioning not permitted simultaneously Overshoot/undershoot a Continued decoding without repositioning limit Programmed value Continued decoding without repositioning impractical Incomplete information Continued decoding without repositioning TF5200 | Twin CAT 3 CNC Version: 1.04 9 Syntax check
## Page 10

Description NC program with syntax errors The example below contains various syntax errors which can be used for continued decoding. The program can be processed in the syntax check and individual errors are signalled. ;Test syntax check of decoder) %check_syntax ;⇨ overflow error N40 G01 X10 F111111111111111 (⇨ syntax error N50 #COMMAND UNKNOWN [...] (⇨ syntax error N60 V. E.not_present = 1 (⇨ syntax error N70 #CALL AX [X2, 11, 0] (-> semantic error N80 G00 G01 X100 F1000 N130 M30 Stop single step mode/decoding • If configured accordingly (P-CHAN-00028) acts during the syntax check, single-step mode acts at decoder level. • The program stops at the end of every NC line and this is indicated by the HOLD mode state. • Decoding continues by one NC line when the START transition is commanded to the active mode. In this way, individual NC commands (parameter allocations, branches, loops, etc.) can be decoded to ensure that the program sequence can be viewed during decoding. • The STOP / RESUME command also acts at the decoder level in the same way as the single step mode. • In other words, decoding is interrupted by commanding the stop transition to the active mode. • Decoding can be resumed with the RESUME command. Automatic mode • If configured accordingly (P-CHAN-00028) acts during the syntax check of theautomatic mode. • The NC program runs without stopping. • Errors detected are displayed. 10 Version: 1.04 TF5200 | Twin CAT 3 CNC Syntax check
## Page 11

Description Syntax check without drives (MACHINE_LOCK) • The syntax check must always be selected in combination with MACHINE_LOCK. The following properties apply here: • The NC program is decoded as normal. • To ensure that the syntax check runs faster, axes and drives are not moved (dry run). Interpolation is limited to the output of the target points of the motion blocks. • Technology information, spindle commands or waiting times are not executed. • Certain real-time influences such as feedhold, override or axis-specific feed enables are not considered. • If MACHINE_LOCK is not set, the message P-ERR-21309 is output. In this case MACHINE_LOCK is set implicitly and syntax check is started. GUI execution mode = syntax check + dry run = 0x48 CNC PLC read display dry run real axes Fig. 1: Syntax check without drives TF5200 | Twin CAT 3 CNC Version: 1.04 11 Syntax check
## Page 12

Interfacing 3 Interfacing 3.1 Selection via HMI interface The operator sets the syntax check as an operating mode before starting the program. This setting is forwarded to the PLC via a control unit which the PLC can permit or reject. The syntax check can be selected using the PLC without any previous request from the HMI. Parameter Description mc_command_executi Selecting syntax check on_mode_r, mc_command_executi on_mode_w mc_active_file_offset_r Displays the current file position during the syntax check at the decoder level. , mc_active_file_name_r mc_command_single_ This parameter selects the decoder single step mode in the syntax check. block_w Syntax check via HMI Description A user interface can select the syntax check via this interface. At the same time, the dry run mode must always be selected together with the syntax check. Type 32 Bit Value range 0x0000 ISG_STANDARD Normal mode 0x0008 SYNCHK Syntax check simulation 0x0040 MACHINE_LOCK Dry run without axis motion HMI elements mc_command_execution_mode_r, mc_command_execution_mode_w Access Read, write Index Offset 0x40, 0x3f (Index Group = 0x000201<ii> where <ii> = channel) 12 Version: 1.04 TF5200 | Twin CAT 3 CNC Syntax check
## Page 13

Interfacing 3.2 Commands and display via PLC interface Channel operation mode Description Selects a special channel operation mode, e.g. syntax check or machining time calculation Data type MC_CONTROL_SGN32_UNIT, see description of Control Unit Access PLC reads request_r + state_r and writes command_w + enable_w ST path gp Ch[channel_idx]^.decoder_mc_control.execution_mode Commanded, requested and return values ST element .command_w .request_r .state_r Data type DINT Value range Value Constant Meaning 0x0000 ISG_STANDARD Normal mode 0x0001 SV Block search 0x0002 SOLLKON Nominal contour visualisation simulation with output of visualisation data 0x0802 SOLLKON_SUPRESS_OUTP Nominal contour visualisation simulation UT & SOLLKON without output of visualisation data 0x0004 ON_LINE Online visualisation simulation 0x0008 SYNCHK Syntax check simulation 0x0010 PROD_TIME Simulation machining time calculation (in Twin CAT without function) 0x0020 ONLINE_PROD_TIME Simulation of online machining time calculation 0x0040 MACHINE_LOCK Dry run without axis motion 0x0080 ADD_MDI_BLOCK Extended manual block mode: the end of a manual block is not evaluated as a program end. It permits the commanding of further manual blocks. 0x0100 KIN_TRAFO_OFF Overwrites automatic enable for kinematic transformations by a characteristic parameter defined in the channel parameters (sda_mds*.lis). 0x1000 BEARB_MODE_SCENE When SCENE mode is enabled, the output of #SCENE commands is activated on the interface (see also [FCT-C17// Scene contour visualisation]). An additional client is linked to this output via Data Factory / CORBA. 0x2000 SUPPRESS_TECHNO_OUT Without output of technology functions (M/ PUT H/T). Set implicitly in connection with syntax check. 0x10000 SUPPRESS_POSITION_REQ Fast program start without position request UEST at program start 0x20000 SUPPRESS_PROG_START_ Suppress program start sequence for INIT machining on the belt Redirection ST element .enable_w Display: Parameter Description TF5200 | Twin CAT 3 CNC Version: 1.04 13 Syntax check
## Page 14

Interfacing X_Syntax Check Display: Syntax check active X_Wait After Error Display: Decoder waits for enable to resume X_Syntax Check Wait Co Display: Decoder waits for cancellation of enable to resume ntinue Cleared Syntax check active Description Decoder is currently in the syntax check Signal flow CNC → PLC ST path p MC[channel_idx]^.addr^. State Decoder_Data. X_Syntax Check Data type BOOL Value range [TRUE = decoder operates in the syntax check, FALSE] Access PLC is reading Special features - Error occurred during syntax check – waiting for external input Description In syntax check mode, the decoder waits after an error for an external input (continue, abort) Signal flow CNC → PLC ST path p MC[channel_idx]^.addr^. State Decoder_Data. X_Wait After Error Data type BOOL Value range [TRUE = error occurred in the syntax check – decoder waits, FALSE] Access PLC is reading Special features - Syntax check active Description Decoder is currently operating in the syntax check and, after an error and enable, waits until enable is cancelled. Signal flow CNC → PLC ST path p MC[channel_idx]^.addr^. State Decoder_Data. X_Syntax Check Release Next Block Cleared Data type BOOL Value range [TRUE = decoder waits for enable to be cancelled, FALSE] Access PLC is reading Special features - 14 Version: 1.04 TF5200 | Twin CAT 3 CNC Syntax check
## Page 15

Interfacing Mcm / PLC Decoder syntax check is on wait for continue = TRUE continue = TRUE wait continue cleared = TRUE continue = FALSE Fig. 2: Implicit handshake during interactive syntax check between decoder and Mcm/PLC Decoding interrupted Description Decoding was interrupted and waits for enable to continue. Signal flow CNC → PLC ST path p MC[channel_idx]^.addr^. State Decoder_Data. X_Wait Continue Data type BOOL Value range [TRUE = decoder interrupted, FALSE] Access PLC is reading Special features - Decoding interrupted Description Decoding was interrupted and the decoder waits until enable is cancelled again resuming. Signal flow CNC → PLC ST path p MC[channel_idx]^.addr^. State Decoder_Data. X_Wait Release Next Block Cleared Data type BOOL Value range [TRUE = decoder waits, FALSE] Access PLC is reading Special features - 3.2.1 HLI parameters up to CNC Build V2.20xx Channel mode TF5200 | Twin CAT 3 CNC Version: 1.04 15 Syntax check
## Page 16

Interfacing Description Selection of a special channel mode such as syntax check or machining time calculation Data type MCControl SGN32Unit, see description of Control Unit Access PLC reads Request + State and writes Command + Enable ST Path p MC[channel_idx]^.addr^. MCControl Decoder_Data. MCControl SGN32Unit_Exe cution Mode Commanded, requested and return values ST Element . D_Command . D_Request . D_State Data type DINT Value range Value Constant Meaning 0x0000 ISG_STANDARD Normal mode 0x0001 SOLLKON Block search 0x0002 SOLLKON Nominal contour visualisation simulation with output of visualisation data 0x0802 SOLLKON_SUPRESS_ Nominal contour visualisation simulation OUTPUT & SOLLKON without output of visualisation data 0x0004 ON_LINE Online visualisation simulation 0x0008 SYNCHK Syntax check simulation 0x0010 PROD_TIME Simulation machining time calculation (No function with Twin CAT) 0x0020 ONLINE_PROD_TIME Simulation online machining time calculation 0x0040 MACHINE_LOCK Dry run without axis motion 0x0080 ADD_MDI_BLOCK Extended manual block mode: the end of a manual block is not evaluated as a program end. It permits the commanding of further manual blocks. 0x0100 KIN_TRAFO_OFF Overwrites automatic enable for kinematic transformations by a characteristic parameter defined in the channel parameters (sda_mds*.lis). 0x1000 BEARB_MODE_SCENE When SCENE mode is enabled, the output of #SCENE commands is activated on the interface (see also [FCT-C17// Scene contour visualisation]). An additional client is linked to this output via Data Factory / CORBA. 0x2000 SUPPRESS_TECHNO_ Without output of technology functions (M/ OUTPUT H/T). Set implicitly in connection with syntax check Redirection ST element . X_Enable Display: 16 Version: 1.04 TF5200 | Twin CAT 3 CNC Syntax check
## Page 17

Parameter 4 Parameter Parametrisation The operator sets the operation mode using P-CHAN-00028: Single step mode: continues step by step over erroneous commands in the NC program and resumes decoding interactively Automatic mode: checks the syntax in one run (without further manual intervention) In addition, abort criteria can be configured for the syntax check using P-CHAN-00019 and P-CHAN-00020 for these two operation modes. Produce a log file as of CNC Build V2.11.2033.08 If P-CHAN-00416 is set, all checked NC blocks and reported errors are logged to a file. The operator can then use the error log to review the NC program and make it executable if required. The file is created in the controller root directory. The filename consists of the 'dec0' string and the NC channel number in which the syntax check was executed. The file extension is '.sc'. Name of log file after a syntax check run in channel 1:dec01.sc NOTICE The settings for Program processing in the syntax check are selected before program run. Changes to the settings during the syntax check do not take immediate effect. This only occurs after a program restart. TF5200 | Twin CAT 3 CNC Version: 1.04 17 Syntax check
## Page 18

Parameter 4.1 Overview ID Parameter Description P-CHAN-00019 errors_total Total number of permissible errors P-CHAN-00020 errors_per_block Errors per NC line P-CHAN-00028 interactive Operating mode P-CHAN-00416 record_result Log detected errors to file 4.2 Description of channel parameters P-CHAN-00019 Number of errors in an NC program on syntax check Description This parameter defines the number of errors after which NC program decoding is aborted. Parameter syn_chk.errors_total Data type UNS16 Data range 0 ... MAX(UNS16) Dimension ---- Default value 0 Remarks syn_chk.fehler_gesamt (old syntax up to V2.11.2012.07) Parameterisation example: After a maximum of 20 errors in the NC program the syntax check is aborted. syn_chk.errors_total 20 P-CHAN-00020 Number of errors per row on syntax check Description This parameter defines the number of errors after which the program skips to the next program row. Parameter syn_chk.errors_per_block Data type UNS16 Data range 0 ... MAX(UNS16) Dimension ---- Default value 0 Remarks syn_chk.fehler_pro_zeile (old syntax up to V2.11.2012.07) Parameterisation example: After a maximum of 2 errors the program skips to the next NC row. syn_chk.errors_per_block 2 P-CHAN-00028 Specify the operation mode on syntax check Description The parameter defines the operation mode of the syntax check. Mode 1 - Automatic operation (0): After an error, decoding continues automatically. Syntax check is only aborted when the corresponding limits described in P-CHAN-00019 and P-CHAN-00020 are reached. Mode 2 - Step (interactive) mode (1): After each error, decoding is stopped. The operator decides whether the syntax check should continue or decoding should be aborted. When the corresponding limits described in P-CHAN-00019 and P-CHAN-00020 are reached, decoding is also aborted automatically. Parameter syn_chk.interactive Data type BOOLEAN Data range 0/1 Dimension ---- Default value 0 18 Version: 1.04 TF5200 | Twin CAT 3 CNC Syntax check
## Page 19

Parameter Remarks interactive (old syntax up to V2.11.2012.07) Parameterisation example: The syntax check runs in automatic mode. syn_chk.interactive 0 P-CHAN-00416 Write results of syntax check to file Description If this parameter is set to 1, all NC blocks and reported errors checked during the syntax check are logged to a file. The file is created in the controller root directory. Parameter syn_chk.record_result Data type BOOLEAN Data range 0/1 Dimension ---- Default value 0 Remarks The filename consists of the 'dec0' string and the NC channel number in which the syntax check was executed. The file extension is '.sc'. Example: Name of log file after a syntax check run in channel 1: dec01.sc TF5200 | Twin CAT 3 CNC Version: 1.04 19 Syntax check
## Page 20

Support and Service 5 Support and Service Beckhoff and their partners around the world offer comprehensive support and service, making available fast and competent assistance with all questions related to Beckhoff products and system solutions. Download finder Our download finder contains all the files that we offer you for downloading. You will find application reports, technical documentation, technical drawings, configuration files and much more. The downloads are available in various formats. Beckhoff's branch offices and representatives Please contact your Beckhoff branch office or representative for local support and service on Beckhoff products! The addresses of Beckhoff's branch offices and representatives round the world can be found on our internet page: www.beckhoff.com You will also find further documentation for Beckhoff components there. Beckhoff Support Support offers you comprehensive technical assistance, helping you not only with the application of individual Beckhoff products, but also with other, wide-ranging services: • support • design, programming and commissioning of complex automation systems • and extensive training program for Beckhoff system components Hotline: +49 5246 963-157 e-mail: support@beckhoff.com Beckhoff Service The Beckhoff Service Center supports you in all matters of after-sales service: • on-site service • repair service • spare parts service • hotline service Hotline: +49 5246 963-460 e-mail: service@beckhoff.com Beckhoff Headquarters Beckhoff Automation Gmb H & Co. KG Huelshorstweg 20 33415 Verl Germany Phone: +49 5246 963-0 e-mail: info@beckhoff.com web: www.beckhoff.com 20 Version: 1.04 TF5200 | Twin CAT 3 CNC Syntax check
## Page 21

Index Index B Bearbeitungsmode Syntaxcheck 12 C Channel Operation mode 13, 15 D decoding wait for enable 15 wait for enable to be cancelled 15 E Error waiting for external input 14 O Operation mode Channel 13, 15 P P-CHAN-00019 18 P-CHAN-00020 18 P-CHAN-00028 18 P-CHAN-00416 19 S Syntax check active 14 wait for enable to be cancelled 14 TF5200 | Twin CAT 3 CNC Version: 1.04 21 Syntax check
## Page 23

More Information: www.beckhoff.com/TF5200 Beckhoff Automation Gmb H & Co. KG Hülshorstweg 20 33415 Verl Germany Phone: +49 5246 9630 info@beckhoff.com www.beckhoff.com
