---
title: "TF5240"
product: "TF5240"
category: "Motion_Control"
tags: ["NC"]
language: "EN"
document_type: "Manual"
version: "1.33"
source_pdf: "https://download.beckhoff.com/download/Document/automation/twincat3/TF5240_kinematic_transformation_en.pdf"
release_date: "2025-06-05"
---
Manual | EN TF5240 | Twin CAT 3 CNC Kinematic transformations 6/5/2025 | Version: 1.33
## Page 3

Notes on the documentation Notes on the documentation This description is only intended for the use of trained specialists in control and automation engineering who are familiar with the applicable national standards. It is essential that the documentation and the following notes and explanations are followed when installing and commissioning the components. It is the duty of the technical personnel to use the documentation published at the respective time of each installation and commissioning. The responsible staff must ensure that the application or use of the products described satisfy all the requirements for safety, including all the relevant laws, regulations, guidelines and standards. Disclaimer The documentation has been prepared with care. The products described are, however, constantly under development. We reserve the right to revise and change the documentation at any time and without prior announcement. No claims for the modification of products that have already been supplied may be made on the basis of the data, diagrams and descriptions in this documentation. Trademarks Beckhoff®, Twin CAT®, Twin CAT/BSD®, TC/BSD®, Ether CAT®, Ether CAT G®, Ether CAT G10®, Ether CAT P®, Safety over Ether CAT®, Twin SAFE®, XFC®, XTS® and XPlanar® are registered trademarks of and licensed by Beckhoff Automation Gmb H. Other designations used in this publication may be trademarks whose use by third parties for their own purposes could violate the rights of the owners. Patent Pending The Ether CAT technology is patent protected, in particular by the following applications and patents: EP1590927, EP1789857, EP1456722, EP2137893, DE102015105702 with corresponding applications or registrations in various other countries. Ether CAT® is registered trademark and patented technology, licensed by Beckhoff Automation Gmb H, Germany Copyright © Beckhoff Automation Gmb H & Co. KG, Germany. The reproduction, distribution and utilisation of this document as well as the communication of its contents to others without express authorisation are prohibited. Offenders will be held liable for the payment of damages. All rights reserved in the event of the grant of a patent, utility model or design. TF5240 | Twin CAT 3 CNC Version: 1.33 3 Kinematic transformations
## Page 4

General and safety instructions General and safety instructions Icons used and their meanings This documentation uses the following icons next to the safety instruction and the associated text. Please read the (safety) instructions carefully and comply with them at all times. Icons in explanatory text 1. Indicates an action. ð Indicates an action statement. DANGER Acute danger to life! If you fail to comply with the safety instruction next to this icon, there is immediate danger to human life and health. CAUTION Personal injury and damage to machines! If you fail to comply with the safety instruction next to this icon, it may result in personal injury or damage to machines. NOTICE Restriction or error This icon describes restrictions or warns of errors. Tips and other notes This icon indicates information to assist in general understanding or to provide additional informa- tion. General example Example that clarifies the text. NC programming example Programming example (complete NC program or program sequence) of the described function or NC com- mand. Specific version information Optional or restricted function. The availability of this function depends on the configuration and the scope of the version. 4 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 5

Table of contents Table of contents Notes on the documentation.................................................................................................................... 3 General and safety instructions.............................................................................................................. 4 1 Introduction............................................................................................................................................. 11 1.1 Specifying the kinematic ID, kinematic type and offset data........................................................... 12 1.1.1 Kinematic ID and offset data - CNC Build <V300............................................................ 13 1.2 Rotary axes and direction of rotation.............................................................................................. 13 1.3 Linear axes and motion direction.................................................................................................... 14 1.4 Kinematic singularities.................................................................................................................... 15 1.5 Further documentation concerning transformations........................................................................ 18 2 Kinematic transformations..................................................................................................................... 19 2.1 KIN_TYP_1 – 5-axis kinematics/single-column bed machine......................................................... 19 2.2 KIN_TYP_2 – 5-axis kinematics with rotary/swivel head................................................................ 23 2.3 KIN_TYP_3 - four-axis kinematics with double spindle head (top spindle)..................................... 25 2.4 KIN_TYP_4 - four-axis kinematics with double spindle head (top spindle)..................................... 27 2.5 KIN_TYP_5 – 4-axis kinematics with crosshead for 4 tools............................................................ 29 2.6 KIN_TYP_6 – 4-axis kinematics with underfloor milling tool........................................................... 33 2.7 KIN_TYP_7 – 5-axis kinematics with man. auxiliary axis (drilling).................................................. 35 2.8 KIN_TYP_8 – 5-axis kinematics with man. auxiliary axis (sawing)................................................. 38 2.9 KIN_TYP_9 – 5-axis kinematics (boring and milling unit)............................................................... 41 2.10 KIN_TYP_10 – 5-axis kinematics (sawing)..................................................................................... 44 2.11 KIN_TYP_11 – 5-axis kinematics with oblique tool head................................................................ 46 2.12 KIN_TYP_12 – Tripod kinematics................................................................................................... 49 2.13 KIN_TYP_13/14 - Face transformation........................................................................................... 54 2.14 KIN_TYP_16 – 5-axis kinematics.................................................................................................... 57 2.15 KIN_TYP_17 – five-axis kinematics with 2 manual auxiliary axes.................................................. 60 2.16 KIN_TYP_18 – five-axis kinematics with 2 manual auxiliary axes (sawing)................................... 63 2.17 KIN_TYP_19 – Tripod kinematics................................................................................................... 65 2.18 KIN_TYP_21 – Lambda kinematics................................................................................................ 68 2.19 KIN_TYP_22 – 5-axis kinematics with X/Y workpiece table........................................................... 72 2.20 KIN_TYP_23 – 5-axis kinematics with X/Y/B workpiece table........................................................ 74 2.21 KIN_TYP_25 – 5-axis kinematics with plasma/laser head.............................................................. 76 2.22 KIN_TYP_28 – 5-axis kinematics.................................................................................................... 80 2.23 KIN_TYP_30 – 4-axis kinematics.................................................................................................... 83 2.24 KIN_TYP_33 – 5-axis kinematics with oblique tool head................................................................ 85 2.25 KIN_TYP_34 – 4-axis kinematics with X/C workpiece table........................................................... 88 2.26 KIN_TYP_52 – 5-axis kinematics with A/B workpiece table........................................................... 90 2.27 KIN_TYP_57 – 5-axis kinematics with B/C workpiece table........................................................... 92 2.28 KIN_TYP_58 – Five-axis kinematics with A/C workpiece table...................................................... 96 2.29 Cardanic kinematics...................................................................................................................... 100 2.29.1 KIN_TYP_59 – Cardanic kinematics with C/A head...................................................... 100 2.29.2 KIN_TYP_60 – Cardanic kinematics with C/B head...................................................... 110 2.30 KIN_TYP_61 – 5-axis kinematics with Y/A workpiece table......................................................... 114 2.31 KIN_TYP_63 – 5-axis kinematics with X/Y/B workpiece table...................................................... 119 TF5240 | Twin CAT 3 CNC Version: 5 Kinematic transformations
## Page 6

Table of contents 2.32 KIN_TYP_64 – 6-axis kinematics with C/A/C workpiece table...................................................... 124 2.33 KIN_TYP_70 – 5-axis kinematics.................................................................................................. 128 2.34 KIN_TYP_76 – 5-axis kinematics with MTCP oblique tool head................................................... 131 2.35 KIN_TYP_80 – 5-axis kinematics with A/B workpiece table......................................................... 135 2.36 KIN_TYP_81 – 5-axis kinematics with B/A workpiece table......................................................... 140 2.37 KIN_TYP_82 – 6-axis kinematics with C workpiece table............................................................. 145 2.38 KIN_TYP_85 – Lever arm kinematics........................................................................................... 149 2.39 KIN_TYP_98- Transformation to monitor the minimum distance.................................................. 151 2.40 KIN_TYP_207- 5-axis kinematics with inclined tool...................................................................... 160 2.41 KIN_TYP_209 - Tripod with rotary/swivel workpiece table........................................................... 163 3 Robot kinematics.................................................................................................................................. 171 3.1 KIN_TYP_36 – SCARA kinematics............................................................................................... 171 3.2 KIN_TYP_37 – Delta robot kinematics.......................................................................................... 175 3.3 KIN_TYP_45 – 6-axis articulated robot kinematics....................................................................... 178 3.3.1 Moved workpiece........................................................................................................... 182 3.3.2 Flange coordinate system.............................................................................................. 184 3.3.3 Status & Turn (IS, IT)..................................................................................................... 185 3.3.4 Singularities with a six-axis articulated robot kinematic................................................. 189 3.3.5 Kinematic poses of six-axis articulated robot................................................................. 189 3.4 KIN_TYP_206 – 5-axis robot on linear unit................................................................................... 195 3.5 KIN_TYP_208 – 4-axis robot on linear unit................................................................................... 198 3.6 KIN_TYP_213- Five-axis palletising robot.................................................................................... 201 4 Classification of transformations........................................................................................................ 206 4.1 Transformation type...................................................................................................................... 206 4.2 Kinematic type............................................................................................................................... 207 4.3 Application..................................................................................................................................... 208 4.4 Tube machining transformations................................................................................................... 210 5 Definition of terms................................................................................................................................. 211 6 Support and Service............................................................................................................................. 212 6 Version: TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 7

List of figures List of figures Fig. 1 Coordinate systems and motion directions.................................................................................. 14 Fig. 2 Singular head position with CA five-axis kinematics, kinematic ID 9........................................... 16 Fig. 3 Example position of a singularity.................................................................................................. 17 Fig. 4 Kinematics of the single-column bed machine............................................................................. 20 Fig. 5 Offsets in tool head...................................................................................................................... 21 Fig. 6 Offsets on workpiece holder......................................................................................................... 22 Fig. 7 Kinematics of the 5-axis milling machine with rotary/swivel head................................................ 23 Fig. 8 Sizes L, TX, HD1, HD2 and HD3 of the rotary/swivel head......................................................... 24 Fig. 9 Front view..................................................................................................................................... 24 Fig. 10 Kinematic structure of the 4-axis milling machine with double spindle head............................... 25 Fig. 11 Side view and front view of the double spindle head (upper spindle).......................................... 26 Fig. 12 Kinematic structure of the 4-axis milling machine with double spindle head............................... 27 Fig. 13 Side view and front view of the double spindle head (bottom spindle)........................................ 28 Fig. 14 4-axis kinematics with crosshead for 4 tools................................................................................ 29 Fig. 15 Tool crosshead............................................................................................................................. 30 Fig. 16 Tool crosshead with zero positions of the tools 1 to 4 ................................................................ 31 Fig. 17 4-axis kinematics with underfloor milling tool............................................................................... 33 Fig. 18 Tool head for underfloor milling (zero position where HD4 = 0)................................................... 34 Fig. 19 5-axis kinematics (boring and milling tool with manual auxiliary axis A)...................................... 35 Fig. 20 5-axis boring and milling tool (zero position where HD3=0, HD4=0, CM=0)................................ 36 Fig. 21 5-axis kinematics (sawing tool with manual auxiliary axis A)....................................................... 38 Fig. 22 5-axis sawing tool (zero position where HD5 = 0, HD4 = +90,CM=0).......................................... 39 Fig. 23 5-axis kinematics (boring and milling unit)................................................................................... 41 Fig. 24 5-axis boring and milling tool (zero position where HD3 = 0, AM=0, HD4=0, CM=0).................. 42 Fig. 25 5-axis kinematics (sawing tool).................................................................................................... 44 Fig. 26 5-axis sawing tool (zero position where HD5 =0, CM=0, HD4 =0, AM =90)................................ 45 Fig. 27 Axis configuration of the 5-axis machine with oblique angle head............................................... 46 Fig. 28 Angles and lengths at the oblique angle head............................................................................. 47 Fig. 29 Tripod kinematics......................................................................................................................... 50 Fig. 30 Vector representation of strut kinematics..................................................................................... 51 Fig. 31 Offset dimensions of strut kinematics.......................................................................................... 52 Fig. 32 Axis configuration of 5-axis machine............................................................................................ 57 Fig. 33 Parameters of rotary/swivel head................................................................................................. 58 Fig. 34 5-axis kinematics (boring and milling tool with manual auxiliary axes C and A).......................... 60 Fig. 35 Boring and milling tool (zero position where HD3 = 0, HD4 = 0).................................................. 61 Fig. 36 5-axis kinematics (sawing tool with manual auxiliary axes C and A)........................................... 63 Fig. 37 Sawing tool (zero position where HD5 = 0, HD4 = +90).............................................................. 64 Fig. 38 Tripod kinematics......................................................................................................................... 65 Fig. 39 Kinematic offsets.......................................................................................................................... 66 Fig. 40 Lambda kinematics...................................................................................................................... 68 Fig. 41 Lambda kinematics, variant 1...................................................................................................... 69 Fig. 42 Lambda kinematics, variant 2...................................................................................................... 70 Fig. 43 Axis configuration of 5-axis machine............................................................................................ 72 Fig. 44 Kinematic offsets.......................................................................................................................... 73 TF5240 | Twin CAT 3 CNC Version: 1.33 7 Kinematic transformations
## Page 8

List of figures Fig. 45 Axis configuration of 5-axis machine............................................................................................ 74 Fig. 46 Kinematic offsets.......................................................................................................................... 75 Fig. 47 5-axis kinematics (plasma/laser head)......................................................................................... 76 Fig. 48 5-axis plasma/laser head (zero position where HD3 = 0, AM=0, HD4=0, CM=0)........................ 77 Fig. 49 When the head is in oblique position, the torch tip is at a constant height above the workpiece, i.e. where A!= 0 is the effective length L2 > L1............................................................................ 78 Fig. 50 5-axis kinematics.......................................................................................................................... 80 Fig. 51 Tool head (zero position where HD3 = 0, A=0, HD4=0, C=0)...................................................... 81 Fig. 52 4-axis kinematics (drilling and milling unit)................................................................................... 83 Fig. 53 Offsets of 4-axis kinematics......................................................................................................... 84 Fig. 54 5-axis oblique tool head............................................................................................................... 85 Fig. 55 Oblique tool head axis in zero position, HD7=0........................................................................... 86 Fig. 56 Oblique tool head with 180 degree head offset in zero position, HD7=1 .................................... 87 Fig. 57 4-axis C axis kinematics .............................................................................................................. 88 Fig. 58 Origin offsets in rotary C axis workpiece holder........................................................................... 89 Fig. 59 Kinematics of 5-axis milling machine........................................................................................... 90 Fig. 60 Definition of offset parameters..................................................................................................... 91 Fig. 61 Definition of offset parameters in front view................................................................................. 91 Fig. 62 Kinematics of 5-axis machine with BC workpiece table............................................................... 92 Fig. 63 Offsets in Y/Z view....................................................................................................................... 93 Fig. 64 Offsets in X/Z view....................................................................................................................... 94 Fig. 65 Kinematics of 5-axis machine with AC workpiece table............................................................... 96 Fig. 66 Offsets in X/Z view....................................................................................................................... 97 Fig. 67 Offsets in Y/Z view....................................................................................................................... 98 Fig. 68 Cardanic kinematic with CA head................................................................................................ 100 Fig. 69 Offsets of cardanic CA 5-axis head.............................................................................................. 101 Fig. 70 Cardanic head with ideal head geometry (intersection of C-A axis is located in tool axis).......... 103 Fig. 71 Cardanic head with offset C axis (C axis not located in tool axis)................................................ 104 Fig. 72 Cardanic head with saw tool and TCP at saw tooth..................................................................... 105 Fig. 73 Angle representations – saw tool and TCP.................................................................................. 106 Fig. 74 Cardanic head with underfloor milling tool................................................................................... 108 Fig. 75 Cardanic head with underfloor milling tool with offset C.............................................................. 109 Fig. 76 Cardanic kinematic with CB head ............................................................................................... 110 Fig. 77 Offsets of cardanic CB 5-axis head.............................................................................................. 111 Fig. 78 Cardanic head with ideal head geometry (intersection of C and B axis located in tool axis)....... 113 Fig. 79 Axis configuration of 5-axis machine............................................................................................ 114 Fig. 80 Offsets of tool head...................................................................................................................... 115 Fig. 81 Offsets of workpiece holder.......................................................................................................... 116 Fig. 82 Ideal and real z zero position....................................................................................................... 117 Fig. 83 Axis configuration of 5-axis machine............................................................................................ 119 Fig. 84 Offsets of tool head...................................................................................................................... 120 Fig. 85 Offsets of workpiece holder.......................................................................................................... 121 Fig. 86 Ideal and real Z zero position....................................................................................................... 122 Fig. 87 Kinematic structure of 6-axis machine with CAC workpiece table............................................... 124 Fig. 88 Parameters of CAC workpiece table in X/Z representation.......................................................... 125 Fig. 89 Parameters of CAC workpiece table in Y/Z representation.......................................................... 126 8 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 9

List of figures Fig. 90 Axis configuration of 5-axis machine............................................................................................ 128 Fig. 91 Tool head parameters.................................................................................................................. 129 Fig. 92 Angular offset of rotary/swivel head............................................................................................. 130 Fig. 93 Axis configuration of 5-axis machine............................................................................................ 132 Fig. 94 Tool head parameters.................................................................................................................. 133 Fig. 95 Angle offset of bevel head with regard to mounting..................................................................... 134 Fig. 96 Axis configuration of 5-axis machine............................................................................................ 135 Fig. 97 Offsets of tool head...................................................................................................................... 136 Fig. 98 Offsets of workpiece holder.......................................................................................................... 137 Fig. 99 Ideal and real Z zero position....................................................................................................... 138 Fig. 100 Axis configuration of 5-axis machine............................................................................................ 140 Fig. 101 Offsets of tool head...................................................................................................................... 141 Fig. 102 Offsets of workpiece holder.......................................................................................................... 142 Fig. 103 Ideal and real Z zero position....................................................................................................... 143 Fig. 104 Axis configuration of 6-axis machine............................................................................................ 145 Fig. 105 Tool head parameters.................................................................................................................. 146 Fig. 106 Offsets on workpiece holder......................................................................................................... 147 Fig. 107 Position of the coordinate system................................................................................................ 149 Fig. 108 Axis configuration for left-handed beam....................................................................................... 150 Fig. 109 Axis configuration for right-handed beam.................................................................................... 150 Fig. 110 Monitoring the minimum distance................................................................................................ 151 Fig. 111 Kinematics in the LEFT variant.................................................................................................... 152 Fig. 112 Offset programming coordinate system in the RIGHT variant..................................................... 153 Fig. 113 Kinematics in the RIGHT variant.................................................................................................. 153 Fig. 114 Eccentric disc kinematic with rotation about Z............................................................................. 157 Fig. 115 Eccentric disc kinematic with rotation about X............................................................................. 157 Fig. 116 5-axis kinematic (metal cutting tool with manual auxiliary axis A)................................................ 160 Fig. 117 5-Axis metal cutting tool with 90 degree angle setting................................................................. 161 Fig. 118 Cutting height .............................................................................................................................. 162 Fig. 119 Trip kinematics with CA rotary/swivel table ................................................................................. 164 Fig. 120 Offset dimensions of strut kinematics.......................................................................................... 165 Fig. 121 Angle offset HD30 of the CA rotary/swivel table.......................................................................... 166 Fig. 122 CA rotary/swivel table offsets....................................................................................................... 167 Fig. 123 Angle offset HD30 of the CB rotary/swivel table.......................................................................... 168 Fig. 124 CB rotary/swivel table offsets....................................................................................................... 169 Fig. 125 SCARA kinematics....................................................................................................................... 172 Fig. 126 SCARA kinematics in zero position (C1=0, C2=0, C3=0, HD8=0)............................................... 173 Fig. 127 Overhead delta robot kinematics................................................................................................. 175 Fig. 128 Offsets of delta robot kinematics.................................................................................................. 176 Fig. 129 6-axis articulated robot................................................................................................................. 178 Fig. 130 HD offset data in side view........................................................................................................... 179 Fig. 131 Zero position for HD145 and HD15.............................................................................................. 180 Fig. 132 Articulated robot, top view............................................................................................................ 180 Fig. 133 Tool offsets of the fixed position tool............................................................................................ 182 Fig. 134 Procedure for defining the orientation with rotation sequence Z Y‘ X‘‘......................................... 183 Fig. 135 The orientation of the robot flange and the world......................................................................... 184 TF5240 | Twin CAT 3 CNC Version: 1.33 9 Kinematic transformations
## Page 10

List of figures Fig. 136 Offset from the flange to the black dot in the workpiece.............................................................. 184 Fig. 137 The intersection of the hand axes (arrowhead) is in the (blue) base area................................... 186 Fig. 138 Status bit 1 for robots with an offset between axis A3 and axis A5.............................................. 187 Fig. 139 Status bit 2 for axis angle position A4=0° and A4=180°.............................................................. 187 Fig. 140 Elbow singularity.......................................................................................................................... 189 Fig. 141 4-axis palletising robot................................................................................................................. 193 Fig. 142 Side view of HD offset data - palletising robot............................................................................. 194 Fig. 143 Top view of HD offset data - palletising robot.............................................................................. 194 Fig. 144 5-axis robot on linear unit............................................................................................................. 195 Fig. 145 Example of a zero position........................................................................................................... 196 Fig. 146 4-axis robot on linear unit............................................................................................................. 198 Fig. 147 Example of a zero position........................................................................................................... 199 Fig. 148 Side view...................................................................................................................................... 202 Fig. 149 Zero position without rotary offsets.............................................................................................. 202 Fig. 150 Flange coordinate system............................................................................................................ 203 10 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 11

Introduction 1 Introduction Mandatory note on references to other documents For the sake of clarity, links to other documents and parameters are abbreviated, e.g. [PROG] for the Programming Manual or P-AXIS-00001 for an axis parameter. For technical reasons, these links only function in the Online Help (HTML5, CHM) but not in pdf files since pdfs do not support cross-linking. Transformation types The transformations listed below are 3, 4, 5 and 6-axis kinematic transformations. They are only required on machines with • non-Cartesian axis arrangement or • with rotary axes to adjust orientation if programming takes place in the WCS (Workpiece Coordinate System). In general, this case results in non-linear equations that reflect the correlation between workpiece coordinates and machine coordinates. Workpiece axes are axes that are located on the workpiece side in the kinematic chain. Tool axes are axes which are on the tool side. A distinction is made between the following transformation types • RTCP Transformation (Rotation Tool Centre Point): In this case, spatial positions are programmed in the WCS. The tool direction is set by programming the rotary machine axes (e.g. B and C are independent of the machine). Auxiliary functions permit automatic tool orientation to rotated coordinate systems in space. Example of NC program line: N10 X100 Y20 Z30 B0 C0 • Complete transformation: In this case, spatial curves and the tool machining orientation are programmed by position and orientation (point-vector sequences) and are always independent of the machine type with 6 coordinates (*). Example of NC program line: N10 X100 Y20 Z30 A0 B0 C1 (*) Depending on the degrees of freedom of a kinematic feature, only the position may be programmed by 3 coordinates (e. g. Tripod). Transformations are additional options and subject to the purchase of a license. NOTICE When kinematic transformation is active, axis-specific tool offsets in ax_versatz[<ax_index>] (P- TOOL-00006) are only taken into consideration if axes are not influenced by the transformation function. Depending on the transformation type, they typically refer to all axes with index > 2 when RTCP is used. The axis-specific tool offsets of the first 3 axes (index 0, 1, 2) are not taken into account when transforma- tion is active. If tool offsets should also be effective for these axes when transformation is active, enter the values in the kinematic offsets of the tool (P-TOOL-00009) mentioned above. The necessary kinematic-specific axis configuration setting must be entered in the channel parameters. It is essential to use the correct axis index sequence for the selected transformation. TF5240 | Twin CAT 3 CNC Version: 1.33 11 Kinematic transformations
## Page 12

Introduction 1.1 Specifying the kinematic ID, kinematic type and offset data In order to use a kinematic, it must be explicitly specified by its kinematic ID (P-CHAN-00262) and kinematic type (P-CHAN-00829). The purpose of the kinematic ID is to explicitly identify a configured kinematic from the list of all kinematics configured. A kinematic may not be configured multiple times. The kinematic type determines the kinematic type and structure as classified in Overview [} 19]. Classification by means of kinematic ID and type is available as of CNC Build V3.1.3080.09. This has the advantage that several identical kinematic types with different offset data can be parameterised in the same configuration list and can be activated as required by using the kinematic ID. If no kinematic type is specified (kinematic type 0), the value of the kinematic ID is automatically assigned to the kinematic type. Kinematic type (as of V3.1.3080.09) The number required to use a specific kinematic results from the specified kinematic type as follows: KIN_TYP_1 1 KIN_TYP_2 2 etc. In CNC Builds < V3.1.3080.09, the specified kinematic ID is identical with the kinematic type to be used. NOTICE As of Version V3.00.3012.00, the structures kin_step[i].trafo[j].* or trafo[j].* replace the definition of kin- ematic data programmed with kinematik[i].*. The previous structure kinematik[i].* is no longer supported. Specifying the kinematic ID, kinematic type and offset parameters As of Build V3.00 the kinematic must be specified as follows: trafo[0].id 9000 trafo[0].type 9 trafo[0].param[0] 5000000 trafo[0].param[1] 0 trafo[0].param[2] 0 trafo[0].param[3] 0 with an additional transformation, e.g. kinematic ID 60 (no type is specified here, so it is automatically assigned with the value 60) trafo[1].id 60 trafo[1].param[0] 2000000 trafo[1].param[1] 0 The same entry of the kinematic with ID 9 to specify a multi-step transformation looks like this: kin_step[0].trafo[0].id 9 kin_step[0].trafo[0].type 9 kin_step[0].trafo[0].param[0] 5000000 kin_step[0].trafo[0].param[1] 0 kin_step[0].trafo[0].param[2] 0 kin_step[0].trafo[0].param[3] 0 with a second transformation step, the kinematic specification would look like this: kin_step[1].trafo[0].id 1 kin_step[1].trafo[0].type 20 kin_step[1].trafo[0].param[0] 3000000 12 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 13

Introduction Configuring two transformations of the same type, e.g. kinematic type 9 and two different data records: trafo[0].id 9000 trafo[0].type 9 trafo[0].param[0] 5000000 trafo[0].param[1] 1000 … trafo[1].id 8000 trafo[1].type 9 trafo[1].param[0] 4550000 trafo[1].param[1] 7500 … The HDi offsets of a kinematic correspond to the kinematic offsets in the channel parameters for trafo[idx].param[i-1]. Alternatively, these offsets can be entered in the corresponding value of the tool parameters (P- TOOL-00009). The offset parameter units are 1.0 E-4 mm for translatory offsets and 1.0 E-4° for rotary offsets. 1.1.1 Kinematic ID and offset data - CNC Build <V300 Kinematic ID The ID required to use a specific kinematic feature results from the specified kinematic type as follows: KIN_TYP_1 1 KIN_TYP_2 2 etc. Specifying the kinematic ID and offset parameters The kinematic ID and the offset parameters (HD offsets) of a kinematic are specified as follows: kinematik[9].param[0] 500000 kinematik[9].param[1] 0 kinematik[9].param[2] 0 kinematik[9].param[3] 0 with an additional transformation, e.g. kinematic ID 60 kinematik[60].param[0] 200000 kinematik[60].param[1] 0 The HDi offsets of a kinematic correspond to the kinematic offsets in the channel parameters for kinematik[ID].param[i-1]. Alternatively, these offsets can be entered in the corresponding value of the tool parameters (P- TOOL-00009). The offset parameter units are 1.0 E-4 mm for translatory offsets and 1.0 E-4° for rotary offsets. 1.2 Rotary axes and direction of rotation The figure below shows the positive rotation directions of rotary axes. The base is a right-handed Cartesian coordinate system. Rotation is referred to as positive if it is counter-clockwise when viewed in the direction of the arrowhead of the coordinate system axis. If the rotary axis rotates around the X axis, it is referred to as the "A axis"; when it rotates around the Y axis, it is referred to as the "B axis" and so on. If not separately stated, these rotation directions are used in kinematic transformations involving rotary axes. TF5240 | Twin CAT 3 CNC Version: 1.33 13 Kinematic transformations
## Page 14

Introduction Fig. 1: Coordinate systems and motion directions 1.3 Linear axes and motion direction The motion directions of linear axes must be adjusted so that the relative motion between tool and workpiece is the same as in 2.5 D mode. This means that when linear axes move the workpiece, the motion direction is opposite to the directions of the exs of the workpiece coordinate system. 14 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 15

Introduction 1.4 Kinematic singularities Kinematic singularities are specific axis positions of a kinematic. In singular positions, the kinematic is unable to execute movements in certain Cartesian directions or rotations about specific spatial axes. A simple example is a fully extended robot arm which cannot move any further outwards (outside the work space). Singularities have no impact on purely axis movements (e.g. with #PTP). Singularities become critical if movements are executed in the vicinity of the programming coordinate system (PCS). Extremely fast axis movements may occur in these zones despite slow TCP movements. However, since axis dynamics are limited, the TCP path velocity can in turn be greatly reduced in the vicinity of a singularity. It should be noted that these effects are a direct result of the physical kinematics. The controller can only minimise these effects or use alternative strategies, but they are not completely avoidable. Robot singularities See Singularities with a six-axis articulated robot kinematic [} 189] Singularity with complete five-axis kinematics In complete kinematics, the tool orientation is mapped in angular notation in a tool direction vector which is then used to map the ACS axis angle. This is dependent on P-CHAN-00247. On the other hand, with RTCP kinematics, the tool orientation is derived directly from the programmed ACS machine angles. With complete kinematics, the controller can no longer map the unambiguous position of the tool direction vector to an unambiguous position of the ACS orientation axes. With a complete five-axis kinematic, there are either two or an infinite number of possible ACS angle pairs for a given tool direction vector. The latter is referred to as the kinematic singularity of the structure. In standard CA kinematics, the singular tool direction vector is ori = (0.0, 0.0, 1.0) and the corresponding ACS angular position is A =0. The C angle can assume any value in the motion range of this axis ACS ACS without any change in tool orientation. TF5240 | Twin CAT 3 CNC Version: 1.33 15 Kinematic transformations
## Page 16

Introduction +Z +C -C +A +Y -Z -A +X -Y -X Z w Y X w w Fig. 2: Singular head position with CA five-axis kinematics, kinematic ID 9 16 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 17

Introduction The singularity at A =0 separates the two ACS angle solutions discussed above. With a CA head, for ACS example, these angles are at orientation vector ori = (0.0, -0.7071, 0.7071) 1. C =0, A =45 ACS ACS 2. or C =180 A =-45. ACS ACS Fig. 3: Example position of a singularity When moving out of the singularity, the controller selects the angular solution using the shortest path strategy. Enormous dynamic stresses can occur depending on the change in orientation in the vicinity of this singular axis position. This can lead to high axis speeds of rotary axes, although the TCP path velocity (relative velocity of the TCP between tool and workpiece) is relatively low at these positions. For certain technologies, such as laser cutting, a sufficient distance to the critical area of the singularity of this structure can be achieved with alternative tool head structures. For example, an AB tool head that has the singularity at tool direction vector ori = (0.0, 1.0, 0.0) and ori = (0.0, -1.0, 0.0). The critical range can be avoided by using the technically required restriction of the chamfer angle of the rotary axes, e.g. B =+-50°. ACS Optimum velocity curves are obtained for positioning movements in the singularity range using special CNC functions (e.g. #PTP). TF5240 | Twin CAT 3 CNC Version: 1.33 17 Kinematic transformations
## Page 18

Introduction 1.5 Further documentation concerning transformations The function description [FCT-M5] describes transformations for tube machining. Transformation ID Description 15 Round tube, lateral surface (3/4-axis) 78 Round tube, projection (3/4-axis) 79 Polygonal tube, profiled tube (3/4-axis) 90 Round tube, lateral surface (5/6-axis) 93 Polygonal tube, profiled tube (5/6-axis) The function description [FCT-C27] describes the Universal Kinematics using ID 91. The function description [FCT-C35] contains the functionality of the couple kinematic with ID 210. The integration of user-defined transformations is described in the description of the transformation interface [Mc COM-TRAFO]. 18 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 19

Kinematic transformations 2 Kinematic transformations The following sections describe predefined kinematics. It is also possible to create kinematics yourself using the Universal Kinematic ID 91 [FCT-C27] or to compile kinematics using the couple kinematic ID 210 [FCT-C35]. 2.1 KIN_TYP_1 – 5-axis kinematics/single-column bed machine Kinematic structure The kinematic structure of this machine consists of 2 translatory axes and 1 rotary axis in the workpiece as well as 1 translatory axis and 1 rotary axis in the tool. Axis configuration in the NC channel Axis identifier X,Y, Z, B, C Axis index 0, 1, 2, 3, 4 Kinematic structure Tool axes Workpiece axes NC axes Z, B X, Y, C TF5240 | Twin CAT 3 CNC Version: 1.33 19 Kinematic transformations
## Page 20

Kinematic transformations +Z +B -Z -B -X -Y +C -C +Y +X Z w Y X w w Fig. 4: Kinematics of the single-column bed machine 20 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 21

Kinematic transformations HD3 HD4 HD2 - + B B - + HD1 TL HD5 HD6 Z Z w w X Y w w Fig. 5: Offsets in tool head TF5240 | Twin CAT 3 CNC Version: 1.33 21 Kinematic transformations
## Page 22

Kinematic transformations HD7 Yw C + - Xw HD8 Zw Xw HD9 Fig. 6: Offsets on workpiece holder Offset data of kinematics HD offset param[i] Description Unit HD1 0 Z offset tool fixing point to rotation point B axis 1.0 E-4 mm HD2 1 Z offset rotation point B axis to reference point tool slide 1.0 E-4 mm HD3 2 X offset reference point tool slide to rotation point B axis 1.0 E-4 mm HD4 3 Y offset reference point tool slide to rotation point B axis 1.0 E-4 mm HD5 4 X offset rotation point B axis to tool fixing point 1.0 E-4 mm HD6 5 Y offset rotation point B axis to tool fixing point 1.0 E-4 mm HD7 6 X offset machine origin MNP to rotary axis C 1.0 E-4 mm HD8 7 Y offset machine origin MNP to rotary axis C 1.0 E-4 mm HD9 8 Z offset machine origin MNP to rotary axis C 1.0 E-4 mm HD10 9 Rotary offset rotary axis B 1.0 E-4° HD11 10 Rotary offset rotary axis C 1.0 E-4° HD13 12 Rotation direction B axis (*), 0: negative, 1positive [ - ] HD14 13 Rotation direction C axis, 0 positive, 1 negative [ - ] (*) The rotation direction of the B axis is mathematically negative. 22 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 23

Kinematic transformations 2.2 KIN_TYP_2 – 5-axis kinematics with rotary/swivel head Kinematic structure The kinematic structure of this machine consists of 3 translatory axes and 2 rotary axes in the tool (rotary/ swivel head). Axis configuration in the NC channel Axis identifier X, Y, Z, A, B Axis index 0, 1, 2, 3, 4 Kinematic structure Tool axes Workpiece axes NC axes X, Y, Z, A, B - +Z +A -B -A +B +X -Z +Y -X -Y Z w Y X w w Fig. 7: Kinematics of the 5-axis milling machine with rotary/swivel head The geometry constants HD1, HD2 and HD3 are required to describe the rotary/swivel head of the machine in the figure above. The figure below shows their application. The rotary/swivel head is shown in top view. TF5240 | Twin CAT 3 CNC Version: 1.33 23 Kinematic transformations
## Page 24

Kinematic transformations HD3 HD1 TL Z X Fig. 8: Sizes L, TX, HD1, HD2 and HD3 of the rotary/swivel head HD2 Z Y Fig. 9: Front view Offset data of kinematics HD offset param[i] Description Unit HD1 0 Offset tool holding device to rotation point B axis 1.0 E-4 mm HD2 1 Y offset from B axis to A axis 1.0 E-4 mm HD3 2 X offset from B axis to A axis 1.0 E-4 mm 24 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 25

Kinematic transformations 2.3 KIN_TYP_3 - four-axis kinematics with double spindle head (top spindle) Kinematic structure The kinematic structure of the machine consists of 3 translatory axes and 1 rotary axis in the tool (double spindle head). The KIN_TYP_4 selects the bottom spindle. Axis configuration in the NC channel Axis identifier X, Y, Z, B Axis index 0, 1, 2, 3 Kinematic structure Tool axes Workpiece axes NC axes X, Y, Z, B - +Z -B +X +Y -Z +B -Y -X Z w Y X w w Fig. 10: Kinematic structure of the 4-axis milling machine with double spindle head TF5240 | Twin CAT 3 CNC Version: 1.33 25 Kinematic transformations
## Page 26

Kinematic transformations The top figure shows the structure of the milling head for the zero position of the B axis. It features 2 spindles (referred to in this document as top and bottom spindle irrespective of the current position of the B axis) so that 2 tools can be clamped rotated by 180° relative to each other. A command in the NC program allows selection of the two spindles or which of the 2 tools is currently active. If the top spindle is active, the programmed value for the B axis must be changed as follows: b =b +180° M M Thus, changing spindles means rotating the B axis through an angle of 180° and translatory shifts of all 3 linear axes. This is due to the geometry constants when RTCP is active. HD3 L HD2 TX B M HD1 B M Fig. 11: Side view and front view of the double spindle head (upper spindle) Offset data of kinematics HD offset param[i] Description Unit HD1 0 Offset tool holding device to rotation point B axis 1.0 E-4 mm HD2 1 Y offset tool head 1.0 E-4 mm HD3 2 X offset from tool holding device to B axis 1.0 E-4 mm 26 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 27

Kinematic transformations 2.4 KIN_TYP_4 - four-axis kinematics with double spindle head (top spindle) Kinematic structure The kinematic structure of the machine consists of 3 translatory axes and 1 rotary axis in the tool (double spindle head). The KIN_TYP_3 selects the top spindle. Axis configuration in the NC channel Axis identifier X, Y, Z, B Axis index 0, 1, 2, 3 Kinematic structure Tool axes Workpiece axes NC axes X, Y, Z, B - +Z -B +X +Y -Z +B -Y -X Z w Y X w w Fig. 12: Kinematic structure of the 4-axis milling machine with double spindle head TF5240 | Twin CAT 3 CNC Version: 1.33 27 Kinematic transformations
## Page 28

Kinematic transformations The top figure shows the structure of the milling head for the zero position of the B axis. It features 2 spindles (referred to in this document as top and bottom spindle irrespective of the current position of the B axis) so that 2 tools can be clamped rotated by 180° relative to each other. A command in the NC program allows selection of the two spindles or which of the 2 tools is currently active. If the top spindle is active, the programmed value for the B axis must be changed as follows: b =b +180° M M Thus, changing spindles means rotating the B axis through an angle of 180° and translatory shifts of all 3 linear axes. This is due to the geometry constants when RTCP is active. B M B M HD1 TX L HD2 HD3 Fig. 13: Side view and front view of the double spindle head (bottom spindle) Offset data of kinematics HD offset param[i] Description Unit HD1 0 Offset tool holding device to rotation point B axis 1.0 E-4 mm HD2 1 Y offset tool head 1.0 E-4 mm HD3 2 X offset from tool holding device to B axis 1.0 E-4 mm 28 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 29

Kinematic transformations 2.5 KIN_TYP_5 – 4-axis kinematics with crosshead for 4 tools Kinematic structure The kinematic structure consists of 3 translatory axes and 1 rotary axis in the tool. Axis configuration in the NC channel Axis identifier X, Y, Z, C Axis index 0, 1, 2, 3 Kinematic structure Tool axes Workpiece axes NC axes X, Y, Z, C - +Z +C -C +Y -Z -X -Y +X Z w Y X w w Fig. 14: 4-axis kinematics with crosshead for 4 tools TF5240 | Twin CAT 3 CNC Version: 1.33 29 Kinematic transformations
## Page 30

Kinematic transformations HD7 3 L HD1 4 C 2 M HD2 HD8 X 1 HD3 Y C M HD4 2 Z 3 1 Y Fig. 15: Tool crosshead The tool that is currently active is specified by assigning tool offset HD5 to the C axis. HD5 is calculated positively from the zero position of the C axis (Y axis) in the direction of the tool position. If the 4 tools are arranged at right angles to each other as shown in the figure above, changing spindles results in a rotation of the C axis through 90° or 180° and translatory shifts of the X axis and Y axis. This is due to the geometry constants when RTCP is active. 30 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 31

Kinematic transformations 3 HD2 HD2 4 4 2 C C M 3 M HD1 HD1 1 HD5=0 HD5=-90 L 1 L 2 1 2 HD5=180 HD5=90 1 3 4 C M C M HD1 HD1 2 4 3 L HD3 L HD3 Fig. 16: Tool crosshead with zero positions of the tools 1 to 4 A data record containing head parameters must be kept for each head tool. The related tool head data record is used to select one of the tools 1 to 4. To measure the head offsets of the individual tools, the related tool is rotated and brought to zero position of tool 1 (positive Y direction). Besides the uniform head parameters HD1, HD4, HD5, head parameter HD2 is used for tools 1 and 2 and head parameter HD3 for tools 3 and 4. Offset data of kinematics HD offset param[i] Description Unit HD1 0 Offset tool holding device to reference point 1.0 E-4 mm HD2 1 Offset reference point rotation centre point C axis tool 1 and 2 1.0 E-4 mm HD3 2 Offset reference point rotation centre point C axis tool 3 and 4 1.0 E-4 mm HD4 3 Z axis offset tool holding device 1.0 E-4 mm TF5240 | Twin CAT 3 CNC Version: 1.33 31 Kinematic transformations
## Page 32

Kinematic transformations HD5 4 Rotary angular offset C axis zero position 1.0 E-4° HD7 6 Static tool offset in X 1.0 E-4 mm HD8 7 Static tool offset in Y 1.0 E-4 mm 32 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 33

Kinematic transformations 2.6 KIN_TYP_6 – 4-axis kinematics with underfloor milling tool Kinematic structure The kinematic structure consists of 3 translatory axes and 1 rotary axis in the tool. A special feature of this kinematic structure is that the tool points in the positive Z direction. Axis configuration in the NC channel Axis identifier X, Y, Z, C Axis index 0, 1, 2, 3 Kinematic structure Tool axes Workpiece axes NC axes X, Y, Z, C - +Z +C -C +Y -Z -X -Y +X Z w Y X w w Fig. 17: 4-axis kinematics with underfloor milling tool TF5240 | Twin CAT 3 CNC Version: 1.33 33 Kinematic transformations
## Page 34

Kinematic transformations HD3 Y HD10 X HD9 C M HD4 HD7 HD8 MZP C M HD2 TX=L Z Y Fig. 18: Tool head for underfloor milling (zero position where HD4 = 0) The axes are arranged as for a right-handed system. The zero position of the C axis is in the positive direction of the Y axis. Offset data of kinematics HD offset param[i] Description Unit HD2 1 Z axis offset tool holding device 1.0 E-4 mm HD3 2 Y axis offset rotary axis C axis to tool rotary axis 1.0 E-4 mm HD4 3 Rotary angular offset C axis zero position 1.0 E-4° HD7 6 Static tool offset in X 1.0 E-4 mm HD8 7 Static tool offset in Y 1.0 E-4 mm HD9 8 X axis offset rotation point A axis to rotation point C axis 1.0 E-4 mm HD10 9 Y axis offset rotation point A axis to rotation point C axis 1.0 E-4 mm 34 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 35

Kinematic transformations 2.7 KIN_TYP_7 – 5-axis kinematics with man. auxiliary axis (drilling) Kinematic structure The kinematic structure consists of 3 translatory NC axes and 1 rotary NC axis in the tool. In addition, a manually adjustable rotary 5th axis is available. This fifth axis cannot be addressed from the NC program. Axis configuration in the NC channel Axis identifier X, Y, Z, C Axis index 0, 1, 2, 3 Kinematic structure Tool axes Workpiece axes NC axes X, Y, Z, A, C - Auxiliary axes A - +Z +C -C +A +Y -Z -A +X -Y -X Z w Y X w w Fig. 19: 5-axis kinematics (boring and milling tool with manual auxiliary axis A) TF5240 | Twin CAT 3 CNC Version: 1.33 35 Kinematic transformations
## Page 36

Kinematic transformations Fig. 20: 5-axis boring and milling tool (zero position where HD3=0, HD4=0, CM=0) The axes are arranged as for a right-handed system. The zero position of the A axis is in the negative direction of the Z axis. The automatic orientation setting of the 5-axis tool head with manually adjustable A axis depends on the position of the A axis. If the physical machine axis position and the value in the HD parameter of the A axis do not match, no correct automatic alignment is possible. 36 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 37

Kinematic transformations Offset data of kinematics HD offset param[i] Description Unit HD1 0 Z axis offset tool holding device to rotation point of A axis 1.0 E-4 mm (swivel axis) HD2 1 Z axis offset rotation point A axis to tool head reference point 1.0 E-4 mm HD3 2 Fixed angle setting of rotary A axis (swivel axis) 1.0 E-4° HD4 3 Angular offset tool to C axis zero position 1.0 E-4° HD5 4 Y axis offset rotation point A axis to rotation point C axis (offset) 1.0 E-4 mm HD6 5 X axis offset tool head reference point to rotation point C axis 1.0 E-4 mm (offset) HD7 6 Static tool offset in X 1.0 E-4 mm HD8 7 Static tool offset in Y 1.0 E-4 mm TF5240 | Twin CAT 3 CNC Version: 1.33 37 Kinematic transformations
## Page 38

Kinematic transformations 2.8 KIN_TYP_8 – 5-axis kinematics with man. auxiliary axis (sawing) Kinematic structure The kinematic structure consists of 3 translatory NC axes and 1 rotary NC axis in the tool. A manually adjustable rotary 5th axis continues to be available. This axis cannot be addressed from the NC program. Axis configuration in the NC channel Axis identifier X, Y, Z, C Axis index 0, 1, 2, 3 Kinematic structure Tool axes Workpiece axes NC axes X, Y, Z, A, C - Auxiliary axes A - +Z +C -C +A +Y -Z -A +X -Y -X Z w Y X w w Fig. 21: 5-axis kinematics (sawing tool with manual auxiliary axis A) 38 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 39

Kinematic transformations HD10 Top View Y C M X HD9 HD5 HD7 HD8 MZP C M Side view Z HD3 A M Y HD4 TX=L HD2 TCP Fig. 22: 5-axis sawing tool (zero position where HD5 = 0, HD4 = +90,CM=0) The automatic orientation setting of the 5-axis tool head with manually adjustable A axis depends on the position of the A axis. If the physical machine axis position and the value in the HD parameter of the A axis do not match, no correct automatic alignment is possible. TF5240 | Twin CAT 3 CNC Version: 1.33 39 Kinematic transformations
## Page 40

Kinematic transformations Offset data of kinematics HD offset param[i] Description Unit HD2 1 Y axis offset from tool holding device to rotation point A axis 1.0 E-4 mm (swivel axis) HD3 2 Z axis offset from rotation point A axis to tool reference point 1.0 E-4 mm HD4 3 Fixed angle setting of rotary A axis (swivel axis) 1.0 E-4° HD5 4 Rotary angular offset C axis 1.0 E-4° HD7 6 Static tool offset in X 1.0 E-4 mm HD8 7 Static tool offset in Y 1.0 E-4 mm HD9 8 X axis offset rotation point A axis to rotation point C axis 1.0 E-4 mm HD10 9 Y axis offset rotation point A axis to rotation point C axis 1.0 E-4 mm 40 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 41

Kinematic transformations 2.9 KIN_TYP_9 – 5-axis kinematics (boring and milling unit) Kinematic structure The kinematic structure consists of 3 translatory NC axes and 2 rotary NC axes in the tool. Axis configuration in the NC channel Axis identifier X, Y, Z, C, A Axis index 0, 1, 2, 3, 4 Kinematic structure Tool axes Workpiece axes NC axes X, Y, Z, C, A - +Z +C -C +A +Y -Z -A +X -Y -X Z w Y X w w Fig. 23: 5-axis kinematics (boring and milling unit) TF5240 | Twin CAT 3 CNC Version: 1.33 41 Kinematic transformations
## Page 42

Kinematic transformations C-Axis HD6 HD5 K M K M HD2 A-Axis HD1 Z Z HD9 HD8 L TCP Z prog X Y X Y prog prog HD8 M Y HD7 X K Fig. 24: 5-axis boring and milling tool (zero position where HD3 = 0, AM=0, HD4=0, CM=0) The M and K points in the figure above are two reference points (M)achine reference point and (K)inematic reference point The ACS offset between the points M and K is a static offset, i.e. it is independent of the angular position of the rotary axes C, A. Offset data of kinematics HD offset param[i] Description Unit 42 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 43

Kinematic transformations HD1 0 Z axis offset from tool holding device to rotation point A axis 1.0 E-4 mm (swivel axis) HD2 1 Z axis offset rotary axis A to tool head reference point 1.0 E-4 mm HD3 2 Rotary angular offset A axis (default 0) 1.0 E-4° HD4 3 Rotary angular offset C axis (default 0) 1.0 E-4° HD5 4 Y axis offset rotation point C axis 1.0 E-4 mm HD6 5 X axis offset rotation point C axis 1.0 E-4 mm HD7 6 Static head offset in X (default 0) 1.0 E-4 mm HD8 7 Static head offset in Y (default 0) 1.0 E-4 mm HD9 8 Y axis offset milling tool axis to rotation point A axis 1.0 E-4 mm TF5240 | Twin CAT 3 CNC Version: 1.33 43 Kinematic transformations
## Page 44

Kinematic transformations 2.10 KIN_TYP_10 – 5-axis kinematics (sawing) Kinematic structure The kinematic structure consists of 3 translatory NC axes and 2 rotary NC axes in the tool. Axis configuration in the NC channel Axis identifier X, Y, Z, C, A Axis index 0, 1, 2, 3, 4 Kinematic structure Tool axes Workpiece axes NC axes X, Y, Z, C, A - +Z +C -C +A +Y -Z -A +X -Y -X Z w Y X w w Fig. 25: 5-axis kinematics (sawing tool) 44 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 45

Kinematic transformations HD10 Top View Y C M X HD9 HD5 HD7 HD8 MZP C M Side view Z HD3 A M Y HD4 TX=L HD2 TCP Fig. 26: 5-axis sawing tool (zero position where HD5 =0, CM=0, HD4 =0, AM =90) Offset data of kinematics HD offset param[i] Description Unit HD2 1 Y axis offset from tool holding device to rotation point A axis 1.0 E-4 mm (swivel axis) HD3 2 Z axis offset from rotation point A axis (swivel axis) to tool 1.0 E-4 mm reference point HD4 3 Rotary angular offset A axis 1.0 E-4° HD5 4 Rotary angular offset C axis 1.0 E-4° HD7 6 Static tool offset in X 1.0 E-4 mm HD8 7 Static tool offset in Y 1.0 E-4 mm HD9 8 X axis offset rotation point A axis to rotation point C axis 1.0 E-4 mm HD10 9 Y axis offset rotation point A axis to rotation point C axis 1.0 E-4 mm TF5240 | Twin CAT 3 CNC Version: 1.33 45 Kinematic transformations
## Page 46

Kinematic transformations 2.11 KIN_TYP_11 – 5-axis kinematics with oblique tool head Kinematic structure The kinematic structure consists of 3 translatory Cartesian axes and 2 rotary axes. As a special feature the machine has an oblique B axis. Axis configuration in the NC channel Axis identifier X, Y, Z, A, B Axis index 0, 1, 2, 3, 4 Kinematic structure Tool axes Workpiece axes NC axes X, Y, B Z, A -B +B +Y -Y +X +Z -X +A -A -Z Z w Y X w w Fig. 27: Axis configuration of the 5-axis machine with oblique angle head 46 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 47

Kinematic transformations Z β α= HD3 HD1 HDZ =HD2 L Δ I Y Fig. 28: Angles and lengths at the oblique angle head The design of the oblique B axis is the most striking feature of the kinematic structure. If the tool length is selected such that the TCP (tool centre point) lies exactly on the extension of the B axis (tool offset HDZ), no compensation motions are required in the translatory axes when the tool orientation via the B axis changes (compensation motions due to changes in A axis orientation are always present). If the selected tool length is not ideal (i.e. if the TCP is not exactly on the extension of the B axis), there are minor additional compensation motions on the linear axes depending on the deviation from the ideal length. Due to the particular design of the B axis, there can be no singular points in the backward transformation of the orientation axes. On the other hand, not all tool orientations can be selected (see below). The zero positions of machine axes XM, YM, ZM are selected such that the fictitious extensions of AM and BM intersect. The zero position of BM is selected such that the tool is in a vertical position and, consequently, parallel to Z0 if BM=0 (The figure “Axis configuration of the 5-axis machine with oblique angle head” shows the zero position of BM). Expediently, the zero position of AM should be selected such that the Y0, Z0 workpiece axes run parallel to the directions of the machine axes. HDZ represents the ideal tool length as geometry parameter of the machine kinematics; HD1 represents the first tool head parameter; L is the actual tool length (milling cutter length). Please note that l is a signed value and may also be negative. TF5240 | Twin CAT 3 CNC Version: 1.33 47 Kinematic transformations
## Page 48

Kinematic transformations Offset data of kinematics HD offset param[i] Description Unit HD1 0 Z axis offset tool holding device to tool head reference point 1.0 E-4 mm HD2 1 Ideal tool length 1.0 E-4 mm HD3 2 Angle between B axis and Z axis (oblique angle) 1.0 E-4° 48 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 49

Kinematic transformations 2.12 KIN_TYP_12 – Tripod kinematics Kinematic structure The strut kinematic structure (referred to as “tripod”) consists of 3 translatory axes in a non-Cartesian arrangement. Strut pairs parallel to each other carry the tool holder platform. Tool orientation is constant. Axis configuration in the NC channel Axis identifier X, Y, Z (Z1, Z2, Z3) Axis index 0, 1, 2 Kinematic structure Tool axes Workpiece axes NC axes X, Y, Z - TF5240 | Twin CAT 3 CNC Version: 1.33 49 Kinematic transformations
## Page 50

Kinematic transformations +Z3 -Z3 +Z2 +Z1 -Z2 -Z1 Z w Y w X w Fig. 29: Tripod kinematics 50 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 51

Kinematic transformations B 3 I 3 B B 1 2 I 2 I r 1 3 Z´ Y´ r 1 X´ P r r 2 1 B B 1 2 e 3 R 3 Z Y e 1 R 1 e 2 X R R 2 1 Fig. 30: Vector representation of strut kinematics TF5240 | Twin CAT 3 CNC Version: 1.33 51 Kinematic transformations
## Page 52

Kinematic transformations Fig. 31: Offset dimensions of strut kinematics The parameter HD8 is used to toggle between an ideal (1) and non-ideal (0) tripod. An ideal tripod has an angle of 120° between all columns. A non-ideal tripod must be defined by the angles HD9 and HD10. The third angle between columns is calculated as follows: W_Z1Z2 = 360° - HD9 – HD10 = 360° - W_Z2Z3 – W_Z1Z3 Offset data of kinematics HD offset param[i] Description Unit 52 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 53

Kinematic transformations HD1 0 Tool offset Z 1.0 E-4 mm HD2 1 Tool offset Y 1.0 E-4 mm HD3 2 Tool offset X 1.0 E-4 mm HD4 3 Z axis offset machine origin 1.0 E-4 mm HD5 4 Radius to connecting line of the joint centre points on the drive 1.0 E-4 mm columns (large circle) HD6 5 Radius to connecting line of the joint centre points on the holder 1.0 E-4 mm platform (small circle) HD7 6 Strut length to each joint centre point 1.0 E-4 mm HD8 7 Switch to switch over to non-ideal tripod [ - ] 0 : ideal tripod 1 : non-ideal tripod and enable HD9 / HD 10 HD9 8 Angle of column / joint 3 to column / joint 1 1.0 E-4° HD10 9 Angle of column / joint 3 to column / joint 2 1.0 E-4° TF5240 | Twin CAT 3 CNC Version: 1.33 53 Kinematic transformations
## Page 54

Kinematic transformations 2.13 KIN_TYP_13/14 - Face transformation An ideal machine structure is assumed for face machining (#FACE) with kinematic IDs 13 or 14. Mechanical offset corrections in Y direction The effect of mechanical offset corrections depends on the machine ID for C axis face machining (P- CHAN-00008). Characteristics of a Y offset: • With face transformation 2, i.e. P-CHAN-00008=2 and therefore kinematic ID 14, it is impossible to pass through the rotation centre. • The Y offset results in an enlargement of the critical zone about the rotation centre. With an ideal kinematic, however, this is only one point. • The Y offset results in a critical zone (circle in the rotation centre) that cannot be approached. • The dynamics in the vicinity of the critical zone are asymmetrical due to the Y offset. The direction of rotation can be set using the HD parameter HD5. HD5 = 0 (default) HD5 = 1 Offset data of the kinematics HD offset param[i] Description Unit HD1 0 Z offset up to tool fixing point 1.0 E-4 mm HD2 1 Not assigned HD3 2 Not assigned 54 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 55

Kinematic transformations HD4 3 Y offset 1.0 E-4 mm HD5 4 Direction of rotation [-] Change in direction of rotation in face machining %L sub_face_mach N10 #FACE[X, C] N20 X1 C0 N30 $FOR P1=1, 2, 1 N40 P2 = P1*0.1 N50 G01 XP2 F2000 N[60+P1] G02 I-P2 N70 $ENDFOR N80 #FACE OFF M29 %main V. G. KIN[13]. PARAM[0]=1000000 V. G. KIN[13]. PARAM[1]=0 V. G. KIN[13]. PARAM[2]=0 V. G. KIN[13]. PARAM[3]=P10*10000 V. G. KIN[13]. PARAM[4]=1 N100 #SET AX[X,1,0][Y,2,1][Z,3,2][C,5,3] N200 G00 X10 Y0 Z100 C0 N300 V. G. KIN[13]. PARAM[4] = 0.0 N400 LL SUB_FACE_MACH N500 V. G. KIN[13]. PARAM[4] = 1.0 (Switch direction of rotation) N600 LL SUB_FACE_MACH N700 V. G. KIN[13]. PARAM[4] = 0.0 N800 LL SUB_FACE_MACH M30 TF5240 | Twin CAT 3 CNC Version: 1.33 55 Kinematic transformations
## Page 56

Kinematic transformations TCP position left of rotation centre The X position and hence also the X position have no offsets on the right of the rotation centre of the TCP ACS workpiece rotation axis (for face_id 1 and face_id 2). Machining takes place on the right-hand side. The TCP can also machine on the left-hand side if P-CHAN-00008=2 (face_id 2) is used. The switch-over from left to right can occur when the kinematic is inactive. Before selecting the kinematic, the X axis must be positioned at the negative position on the left of the rotation centre. TCP machining on the right of rotation centre TCP machining on the left of rotation centre 56 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 57

Kinematic transformations 2.14 KIN_TYP_16 – 5-axis kinematics Kinematic structure The kinematic structure consists of 3 translatory and 2 rotary NC axes in the tool. Axis configuration in the NC channel Axis identifier X, Y, Z, B, A Axis index 0, 1, 2, 3, 4 Kinematic structure Tool axes Workpiece axes NC axes X, Y, Z, B, A - +Z +A -B +B -A +Y -Z +X -Y -X Z w Y X w w Fig. 32: Axis configuration of 5-axis machine TF5240 | Twin CAT 3 CNC Version: 1.33 57 Kinematic transformations
## Page 58

Kinematic transformations Side view + B HD3 HD4 M A M + HD1 HD6 TX Z Y Top view A M + + B M HD5 HD2 X Y Fig. 33: Parameters of rotary/swivel head Offset data of kinematics HD offset param[i] Description Unit HD1 0 Z offset from rotary axis A to tool fixing point 1.0 E-4 mm HD2 1 X offset from rotary axis B to slide reference point 1.0 E-4 mm HD3 2 Y offset from rotary axis A to slide reference point 1.0 E-4 mm HD4 3 Z offset from rotary axis B to rotary axis A 1.0 E-4 mm HD5 4 X offset 1.0 E-4 mm 58 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 59

Kinematic transformations HD6 5 Y axis offset from rotary axis A to tool 1.0 E-4 mm HD7 6 Rotary offset A axis 1.0 E-4° HD8 7 Rotary offset B axis 1.0 E-4° HD9 8 Sign for direction of rotation A axis [ - ] HD10 9 Sign for direction of rotation B axis [ - ] TF5240 | Twin CAT 3 CNC Version: 1.33 59 Kinematic transformations
## Page 60

Kinematic transformations 2.15 KIN_TYP_17 – five-axis kinematics with 2 manual auxiliary axes Kinematic structure The kinematic structure consists of 3 translatory NC axes. In addition, 2 manually adjustable rotary axes are available. These axes cannot be addressed from the NC program. Axis configuration in the NC channel Axis identifier X, Y, Z Axis index 0, 1, 2 Kinematic structure Tool axes Workpiece axes NC axes X, Y, Z - Auxiliary axes C, A - +Z +C -C +A +Y -Z -A +X -Y -X Z w Y X w w Fig. 34: 5-axis kinematics (boring and milling tool with manual auxiliary axes C and A) 60 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 61

Kinematic transformations Fig. 35: Boring and milling tool (zero position where HD3 = 0, HD4 = 0) The axes are arranged as for a right-handed system. The zero position of the A axis is in the negative direction of the Z axis. No automatic orientation setting is possible for the 2-axis tool head with manually adjustable C and A axes. Offset data of kinematics HD offset param[i] Description Unit HD1 0 Z axis offset tool holding device to rotation point of A axis 1.0 E-4 mm (swivel axis) HD2 1 Z axis offset rotation point A axis to tool head reference point 1.0 E-4 mm HD3 2 Fixed angle setting of rotary A axis (swivel axis) 1.0 E-4° TF5240 | Twin CAT 3 CNC Version: 1.33 61 Kinematic transformations
## Page 62

Kinematic transformations HD4 3 Fixed angle setting of rotary C axis 1.0 E-4° HD5 4 Y axis offset rotation point A axis to rotation point C axis (offset) 1.0 E-4 mm HD6 5 X axis offset tool head reference point to rotation point C axis 1.0 E-4 mm (offset) HD7 6 Static tool offset in X 1.0 E-4 mm HD8 7 Static tool offset in Y 1.0 E-4 mm 62 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 63

Kinematic transformations 2.16 KIN_TYP_18 – five-axis kinematics with 2 manual auxiliary axes (sawing) Kinematic structure The kinematic structure consists of 3 translatory NC axes. In addition, 2 manually adjustable rotary axes are available. These axes cannot be addressed from the NC program. Axis configuration in the NC channel Axis identifier X, Y, Z Axis index 0, 1, 2 Kinematic structure Tool axes Workpiece axes NC axes X, Y, Z - Auxiliary axes C, A - +Z +C -C -A +Y -Z +A -X -Y +X Z w Y X w w Fig. 36: 5-axis kinematics (sawing tool with manual auxiliary axes C and A) TF5240 | Twin CAT 3 CNC Version: 1.33 63 Kinematic transformations
## Page 64

Kinematic transformations HD10 Top View Y C M X HD9 HD5 HD7 HD8 MZP C M Side view Z HD3 A M Y HD4 TX=L HD2 TCP Fig. 37: Sawing tool (zero position where HD5 = 0, HD4 = +90) Offset data of kinematics HD offset param[i] Description Unit HD2 1 Y axis offset from tool holding device to rotation point A axis 1.0 E-4 mm (swivel axis) HD3 2 Z axis offset from rotation point A axis to tool reference point 1.0 E-4 mm HD4 3 Fixed angle setting of rotary A axis (swivel axis) 1.0 E-4° HD5 4 Fixed angle setting of rotary C axis 1.0 E-4° HD7 6 Static tool offset in X 1.0 E-4 mm HD8 7 Static tool offset in Y 1.0 E-4 mm HD9 8 X axis offset rotation point A axis to rotation point C axis 1.0 E-4 mm HD10 9 Y axis offset rotation point A axis to rotation point C axis 1.0 E-4 mm 64 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 65

Kinematic transformations 2.17 KIN_TYP_19 – Tripod kinematics Kinematic structure The strut kinematics consists of 3 translatory axes in a non-Cartesian arrangement and 2 Cartesian axes. 3 struts with ball joints support the workpiece platform. This may affect the Z height and orientation of the workpiece. Axis configuration in the NC channel Axis identifier X, Y, Z, U, V, W ( X, Y, Z1, Z2, Z3, W) Axis index 0, 1, 2, 3, 4, 5 Kinematic structure Tool axes Workpiece axes NC axes X, Y Z1, Z2, Z3 -X +Y -Y +X +Z1 +Z3 +Z2 -Z1 Z w -Z3 -Z2 Y w X w Fig. 38: Tripod kinematics TF5240 | Twin CAT 3 CNC Version: 1.33 65 Kinematic transformations
## Page 66

Kinematic transformations Fig. 39: Kinematic offsets 66 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 67

Kinematic transformations Offset data of kinematics HD offset param[i] Description Unit HD1 0 Tool offset in Z 1.0 E-4 mm HD2 1 Strut length to joint centre point 1.0 E-4 mm HD3 2 Radius to connecting line of joint centre points of holder 1.0 E-4 mm platform (small circle) HD4 3 Radius to connecting line joint centre points of drive columns 1.0 E-4 mm (large circle) HD5 4 Distance between workpiece holder platform and joint centre 1.0 E-4 mm points on the holder platform TF5240 | Twin CAT 3 CNC Version: 1.33 67 Kinematic transformations
## Page 68

Kinematic transformations 2.18 KIN_TYP_21 – Lambda kinematics Kinematic structure The kinematic structure consists of 3 translatory NC axes and 1 rotary NC axis in the tool. Axis configuration in the NC channel Axis identifier X, Y, Z, C (X1, X2, Z, C) Axis index 0, 1, 2, 3 Kinematic structure Tool axes Workpiece axes NC axes X,Y, Z, C - +X2 -X2 +X1 -X1 +C -C +Z -Z Z w Y w X w Fig. 40: Lambda kinematics The XY plane kinematics are known as a variant of shear kinematics. The struts (lengths l2, l1) that are connected to each other at point D and are also rotatable are located on 2 linear slides XM1 and XM2 at rotary joints C and B. Strut CA (length I3) is attached to strut CD via the fixed angle ß. The C axis is located at the top of this strut. The actual tool holding strut (length l4) starts at the rotation point of the C axis and ends in the TCP. Related to the Cartesian axes the C axis is not mechanically guided, i.e. it must be compensated depending on the joint position. 68 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 69

Kinematic transformations Y Y W M d1 d2 XM1 XM2 g_s C B Φ β I1 I2 A m1_off I3 D I4 CM TCP XP, YP X W X M Fig. 41: Lambda kinematics, variant 1 TF5240 | Twin CAT 3 CNC Version: 1.33 69 Kinematic transformations
## Page 70

Kinematic transformations Y Y W M TCP XP, YP A I4 D I3 CM I2 β I1 Φ C g_s XM1 XM2 B m1_off d1 d2 X W X M Fig. 42: Lambda kinematics, variant 2 70 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 71

Kinematic transformations Offset data of kinematics HD offset param[i] Description Unit HD1 0 Z offset to tool holding point 1.0 E-4 mm HD2 1 l1: Strut length 1 1.0 E-4 mm HD3 2 l2: Strut length 2 1.0 E-4 mm HD4 3 l3: Strut length 3 1.0 E-4 mm HD5 4 g_s : Offset joint points C to B 1.0 E-4 mm HD6 5 ß= fixed angle between strut CD and strut CA 1.0 E-4° HD7 6 m1_off: Y position of drive 1 referred to Y origin WCS 1.0 E-4 mm HD8 7 phi_min: Minimum value for angle j (0°) 1.0 E-4° HD9 8 phi_max: Maximum value for angle j (90°) 1.0 E-4° HD10 9 X-Offset 1.0 E-4 mm HD11 10 L4= gripper offset 1.0 E-4 mm HD12 11 Kinematic variant [ - ] TF5240 | Twin CAT 3 CNC Version: 1.33 71 Kinematic transformations
## Page 72

Kinematic transformations 2.19 KIN_TYP_22 – 5-axis kinematics with X/Y workpiece table Kinematic structure The kinematic structure consists of 2 translatory NC axes in the workpiece, 2 rotary NC axes and 1 translatory axis in the tool. Axis configuration in the NC channel Axis identifier X, Y, Z, A, B Axis index 0, 1, 2, 3, 4 Kinematic structure Tool axes Workpiece axes NC axes Z, A, B X, Y +Z +A +B -A -B -Z +X +Y -X -Y Z w Y X w w Fig. 43: Axis configuration of 5-axis machine 72 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 73

Kinematic transformations Z Z w w - + A B - + HD1 TL Y X w w Fig. 44: Kinematic offsets Offset data of kinematics HD offset param[i] Description Unit HD1 0 Z axis offset tool holding device to rotation point A / B axis 1.0 E-4 mm HD4 3 Motion direction rotary axis A [ - ] HD5 4 Motion direction rotary axis B [ - ] TF5240 | Twin CAT 3 CNC Version: 1.33 73 Kinematic transformations
## Page 74

Kinematic transformations 2.20 KIN_TYP_23 – 5-axis kinematics with X/Y/B workpiece table Kinematic structure The kinematic structure consists of 2 translatory NC axes in the workpiece, 1 translatory axis in the tool and 1 rotary NC axis in both the workpiece and the tool. Axis configuration in the NC channel Axis identifier X, Y, Z, A, B Axis index 0, 1, 2, 3, 4 Kinematic structure Tool axes Workpiece axes NC axes Z, A X, Y, B +Z -A +A -Z +X +Y +B -B -X -Y Z w Y X w w Fig. 45: Axis configuration of 5-axis machine 74 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 75

Kinematic transformations Z w - A + HD1 TL X w HD2 B + - Fig. 46: Kinematic offsets Offset data of kinematics HD offset param[i] Description Unit HD1 0 Z axis offset tool holding device to rotation point A axis 1.0 E-4 mm HD2 1 Distance rotation point B axis to workpiece platform 1.0 E-4 mm HD4 3 Motion direction rotary axis A [ - ] HD5 4 Motion direction rotary axis B [ - ] TF5240 | Twin CAT 3 CNC Version: 1.33 75 Kinematic transformations
## Page 76

Kinematic transformations 2.21 KIN_TYP_25 – 5-axis kinematics with plasma/laser head Kinematic structure The kinematic structure consists of 3 translatory NC axes and 2 rotary NC axes in the tool. As a special feature, the effective tool length with these kinematics changes depending on the A angle. Axis configuration in the NC channel Axis identifier X, Y, Z, C, A Axis index 0, 1, 2, 3, 4 Kinematic structure Tool axes Workpiece axes NC axes X, Y, Z, C, A - +Z +C -C +A +Y -Z -A +X -Y -X Z w Y X w w Fig. 47: 5-axis kinematics (plasma/laser head) 76 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 77

Kinematic transformations Fig. 48: 5-axis plasma/laser head (zero position where HD3 = 0, AM=0, HD4=0, CM=0) The M and K points in the figure above are two reference points (M)achine reference point and (K)inematic reference point The ACS offset between the points M and K is a static offset, i.e. it is independent of the angular position of the rotary axes C, A. TF5240 | Twin CAT 3 CNC Version: 1.33 77 Kinematic transformations
## Page 78

Kinematic transformations L1 TCP L2 Fig. 49: When the head is in oblique position, the torch tip is at a constant height above the workpiece, i.e. where A!= 0 is the effective length L2 > L1. To limit the active length L2 and therefore keep the required machine compensation movements as small as possible, select a small head inclination. (Maximum recommended: +/-45 degrees) The inclined position is limited by configuring the software limit switches (P-AXIS-00177/ P-AXIS-00178) of the A axis. Offset data of kinematics HD offset param[i] Description Unit HD1 0 Z axis offset from torch tip to rotation point A axis (swivel axis) 1.0 E-4 mm HD2 1 Z axis offset rotary axis A to tool head reference point 1.0 E-4 mm HD3 2 Rotary angular offset A axis (default 0) 1.0 E-4° HD4 3 Rotary angular offset C axis (default 0) 1.0 E-4° HD5 4 Y axis offset rotation point C axis 1.0 E-4 mm HD6 5 X axis offset rotation point C axis 1.0 E-4 mm HD7 6 Static head offset in X (default 0) 1.0 E-4 mm 78 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 79

Kinematic transformations HD8 7 Static head offset in Y (default 0) 1.0 E-4 mm HD9 8 Y axis offset torch axis to rotation point A axis 1.0 E-4 mm TF5240 | Twin CAT 3 CNC Version: 1.33 79 Kinematic transformations
## Page 80

Kinematic transformations 2.22 KIN_TYP_28 – 5-axis kinematics Kinematic structure The kinematic structure consists of 3 translatory NC axes and 2 rotary NC axes in the tool. The physical angle position of the head C, A is adjusted by 2 gear-linked axes. Axis configuration in the NC channel Axis identifier X, Y, Z, C, A ( X, Y, Z, C1, C2) Axis index 0, 1, 2, 3, 4 Kinematic structure Tool axes Workpiece axes NC axes X, Y, Z, C(C1), A(C2) - +Z +C -C -A +Y -Z +A +X -Y -X Z w Y X w w Fig. 50: 5-axis kinematics 80 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 81

Kinematic transformations C-Axis HD6 HD5 K M K M HD2 A-Axis HD1 Z Z HD9 HD8 L TCP Z prog X Y X Y prog prog HD8 M Y HD7 X K Fig. 51: Tool head (zero position where HD3 = 0, A=0, HD4=0, C=0) TF5240 | Twin CAT 3 CNC Version: 1.33 81 Kinematic transformations
## Page 82

Kinematic transformations Offset data of kinematics HD offset param[i] Description Unit HD1 0 Z axis offset from tool holding device to rotation point A axis 1.0 E-4 mm (swivel axis) HD2 1 Z axis offset rotary axis A to tool head reference point 1.0 E-4 mm HD3 2 Rotary angular offset A axis (default 0) HD4 3 Rotary angular offset C axis (default 0) HD5 4 Y axis offset rotation point C axis 1.0 E-4 mm HD6 5 X axis offset rotation point C axis 1.0 E-4 mm HD7 6 Static head offset in X (default 0) 1.0 E-4 mm HD8 7 Static head offset in Y (default 0) 1.0 E-4 mm HD9 8 Y axis offset milling tool axis to rotation point A axis 1.0 E-4 mm HD10 9 n.a. [ - ] HD11 10 Origin offset CA gear link 1.0 E-4° HD12 11 Gear link factor numerator [ - ] HD13 12 Gear link factor denominator [ - ] HD14 13 Sign rotary axis C [ - ] HD15 14 Sign rotary axis A [ - ] HD16 15 A factor numerator [ - ] HD17 16 A factor denominator [ - ] The gear link between C and A is absolute and is executed as shown in the following equations: CM = CW AM = AW*k + NP0 + k *CW a ca where : C -> A gear link factor : A resolution factor NP0 = HD11 : Origin offset gear link The head rotary axes must be adjusted either as linear axes or as rotary axes with a sufficiently large modulo range. The SLS monitor in the channel acts on the drive positions depending on the limits in set in the MDS. 82 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 83

Kinematic transformations 2.23 KIN_TYP_30 – 4-axis kinematics Kinematic structure The kinematic structure consists of 3 translatory NC axes and 1 rotary NC axis in the tool. Axis configuration in the NC channel Axis identifier X, Y, Z, A Axis index 0, 1, 2, 3 Kinematic structure Tool axes Workpiece axes NC axes X, Y, Z, A - +Z +A -A +X -Z +Y -X -Y Z w Y X w w Fig. 52: 4-axis kinematics (drilling and milling unit) TF5240 | Twin CAT 3 CNC Version: 1.33 83 Kinematic transformations
## Page 84

Kinematic transformations HD7 HD6 HD8 - + A A - + HD1 TL HD3 HD2 Z Z w w Y X w w Fig. 53: Offsets of 4-axis kinematics Offset data of kinematics HD offset param[i] Description Unit HD1 0 Z axis offset tool holding device to rotation point A axis 1.0 E-4 mm HD2 1 X axis offset tool holding device to rotation point A axis 1.0 E-4 mm HD3 2 Y axis offset tool holding device to rotation point A axis 1.0 E-4 mm HD4 3 Rotation direction sign A axis: 1 (default), -1 [ - ] HD5 4 Rotary offset A axis 1.0 E-4° HD6 5 X offset rotation point A axis to reference point tool slide 1.0 E-4 mm HD7 6 Y offset rotation point A axis to reference point tool slide 1.0 E-4 mm HD8 7 Z offset rotation point A axis to reference point tool slide 1.0 E-4 mm 84 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 85

Kinematic transformations 2.24 KIN_TYP_33 – 5-axis kinematics with oblique tool head Kinematic structure The kinematic structure consists of 3 translatory NC axes and 2 rotary NC axes in the tool. As a special feature this kinematic structure requires no compensation motions of translatory axes due to the mechanical construction when the rotary axes rotate. Axis configuration in the NC channel Axis identifier X, Y, Z, C, A Axis index 0, 1, 2, 3, 4 Kinematic structure Tool axes Workpiece axes NC axes X, Y, Z, C, A - +Z +C -C +A -A +Y -Z +X -Y -X Z w Y X w w Fig. 54: 5-axis oblique tool head TF5240 | Twin CAT 3 CNC Version: 1.33 85 Kinematic transformations
## Page 86

Kinematic transformations C A α =HD3 Z X Fig. 55: Oblique tool head axis in zero position, HD7=0 86 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 87

Kinematic transformations C A α =HD3 Z X Fig. 56: Oblique tool head with 180 degree head offset in zero position, HD7=1 Offset data of kinematic structure HD offset param[i] Description Unit HD3 2 Head angle 1.0 E-4° HD4 3 Static X offset 1.0 E-4 mm HD5 4 Static Y offset 1.0 E-4 mm HD6 5 Static Z offset 1.0 E-4 mm HD7 6 Orientation C axis head; required if head has a 180° offset in [ - ] zero position TF5240 | Twin CAT 3 CNC Version: 1.33 87 Kinematic transformations
## Page 88

Kinematic transformations 2.25 KIN_TYP_34 – 4-axis kinematics with X/C workpiece table Kinematic structure The kinematic structure consists of 2 translatory NC axes in the tool, 1 translatory and 1 rotary NC axis in the workpiece. Axis configuration in the NC channel Axis identifier X, Y, Z, C Axis index 0, 1, 2, 3 Kinematic structure Tool axes Workpiece axes NC axes Y, Z X, C +Z +Y -Z -X Z w -Y +C -C Y w X w +X Fig. 57: 4-axis C axis kinematics 88 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 89

Kinematic transformations Y M Z M HD2 X M Y w + C HD3 Z w X w Fig. 58: Origin offsets in rotary C axis workpiece holder Offset data of kinematics HD offset param[i] Description Unit HD2 1 MCS offset X 1.0 E-4 mm HD3 2 MCS offset Y 1.0 E-4 mm TF5240 | Twin CAT 3 CNC Version: 1.33 89 Kinematic transformations
## Page 90

Kinematic transformations 2.26 KIN_TYP_52 – 5-axis kinematics with A/B workpiece table Kinematic structure The kinematic structure consists of 3 translatory axes and 2 rotary axis in the workpiece. Axis configuration in the NC channel Axis identifier X, Y, Z, A, B Axis index 0, 1, 2, 3, 4 Kinematic structure Tool axes Workpiece axes NC axes X, Y Z, A, B -X +X +Y +B -B -Y -Z Y w -A Z w +Z +A X w Fig. 59: Kinematics of 5-axis milling machine 90 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 91

Kinematic transformations Y HD1 Z Fig. 60: Definition of offset parameters Y HD2 X HD3 Fig. 61: Definition of offset parameters in front view The figure above shows the kinematics for the machine axis positions Z = 0, Y = 0 and A = 0. Offset data of kinematics HD offset param[i] Description Unit HD1 0 Z offset up to tool clamping point. 1.0 E-4 mm HD2 1 Y offset tool 1.0 E-4 mm HD3 2 Y offset of workpiece coordinate system origin to rotary axis A 1.0 E-4 mm axis HD4 3 Sign for direction of rotation A axis [ - ] HD5 4 Sign for direction of rotation B axis [ - ] TF5240 | Twin CAT 3 CNC Version: 1.33 91 Kinematic transformations
## Page 92

Kinematic transformations 2.27 KIN_TYP_57 – 5-axis kinematics with B/C workpiece table Kinematic structure The kinematic structure consists of 3 translatory axes in the tool and 2 rotary axes in the workpiece. Axis configuration in the NC channel Axis identifier X, Y, Z, B, C Axis index 0, 1, 2, 3, 4 Kinematic structure Tool axes Workpiece axes NC axes X, Y, Z B, C +Z +Y +X -Z +C -C -X -Y -B +B Z w Y X w w Fig. 62: Kinematics of 5-axis machine with BC workpiece table 92 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 93

Kinematic transformations Fig. 63: Offsets in Y/Z view TF5240 | Twin CAT 3 CNC Version: 1.33 93 Kinematic transformations
## Page 94

Kinematic transformations Fig. 64: Offsets in X/Z view The machine origin can be shifted by the parameters HD7 to HD9. Differing zero positions of the rotary axes B and C can be set by the parameters HD10, HD11 so that the internal kinematic model matches the real machine kinematics. In the same way, differing rotation directions of the B and C axes can be set by the parameters HD12, HD13. In general, the signs of command and actual parameters must also be modified accordingly in the axis parameters. The origin of the WCS on the turning table can be defined by the parameters HD14 to HD16. 94 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 95

Kinematic transformations Offset data of kinematics HD offset param[i] Description Unit HD1 0 Z tool offset holding device to reference point tool slide SRP 1.0 E-4 mm HD2 1 X axis offset holding device to reference point tool slide SRP 1.0 E-4 mm HD3 2 Y axis offset holding device to reference point tool slide SRP 1.0 E-4 mm HD4 3 X axis offset rotary axis B to rotary axis C, origin WCS 1.0 E-4 mm HD5 4 Y axis offset rotary axis B to rotary axis C, origin WCS 1.0 E-4 mm HD6 5 Z axis offset rotary axis B to rotary axis C, origin WCS 1.0 E-4 mm HD7 6 X offset machine origin MZP to rotary axis B 1.0 E-4 mm HD8 7 Y offset machine origin MZP to rotary axis B 1.0 E-4 mm HD9 8 Z offset machine origin MZP to rotary axis B 1.0 E-4 mm HD10 9 Rotary offset B axis 1.0 E-4° HD11 10 Rotary offset C axis 1.0 E-4° HD12 11 Rotation direction flag B axis [ - ] HD13 12 Rotation direction flag C axis [ - ] HD14 13 X offset origin WCS 1.0 E-4 mm HD15 14 Y offset origin WCS 1.0 E-4 mm HD16 15 Z offset origin WCS 1.0 E-4 mm TF5240 | Twin CAT 3 CNC Version: 1.33 95 Kinematic transformations
## Page 96

Kinematic transformations 2.28 KIN_TYP_58 – Five-axis kinematics with A/C workpiece table Kinematic structure The kinematic structure consists of 3 translatory axes in the tool and 2 rotary axes in the workpiece. Axis configuration in the NC channel Axis identifier X, Y, Z, A, C Axis index 0, 1, 2, 3, 4 Kinematic structure Tool axes Workpiece axes NC axes X, Y, Z A, C +Z +X +Y -Z +C -C -Y -X +A -A Z w Y X w w Fig. 65: Kinematics of 5-axis machine with AC workpiece table 96 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 97

Kinematic transformations Fig. 66: Offsets in X/Z view TF5240 | Twin CAT 3 CNC Version: 1.33 97 Kinematic transformations
## Page 98

Kinematic transformations Fig. 67: Offsets in Y/Z view Typically the machine origin is located in the rotary axis A. As required, it can be shifted using parameters HD7 to HD9. Differing zero positions of the rotary axes A and C can be set by the parameters HD10 and HD11 so that the internal kinematic model matches the real machine kinematics. In the same way differing rotation directions of the A and C axes can be set by the parameters HD12, HD13. In general, the signs of command and actual parameters must also be modified accordingly in the axis parameters. The origin of the WCS on the turning table can be shifted by the parameters HD14 to HD16. 98 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 99

Kinematic transformations Offset data of kinematics HD offset param[i] Description Unit HD1 0 Z tool offset holding device to reference point tool slide SRP 1.0 E-4 mm HD2 1 X axis offset holding device to reference point tool slide SRP 1.0 E-4 mm HD3 2 Y axis offset holding device to reference point tool slide SRP 1.0 E-4 mm HD4 3 X axis offset rotary axis A to rotary axis C, origin WCS 1.0 E-4 mm HD5 4 Y axis offset from rotary axis A to rotary axis C, origin WCS 1.0 E-4 mm HD6 5 Z axis offset from rotary axis A to rotary axis C, origin WCS 1.0 E-4 mm HD7 6 X offset from machine origin MZP to rotary axis A 1.0 E-4 mm HD8 7 Y offset from machine origin MZP to rotary axis A 1.0 E-4 mm HD9 8 Z offset from machine origin MZP to rotary axis A 1.0 E-4 mm HD10 9 Rotary offset A axis 1.0 E-4° HD11 10 Rotary offset C axis 1.0 E-4° HD12 11 Rotation direction flag A axis [ - ] HD13 12 Rotation direction flag C axis [ - ] HD14 13 X offset origin WCS 1.0 E-4 mm HD15 14 Y offset origin WCS 1.0 E-4 mm HD16 15 Z offset origin WCS 1.0 E-4 mm TF5240 | Twin CAT 3 CNC Version: 1.33 99 Kinematic transformations
## Page 100

Kinematic transformations 2.29 Cardanic kinematics 2.29.1 KIN_TYP_59 – Cardanic kinematics with C/A head The kinematic structure consists of 3 translatory and 3 rotary NC axes in the tool. The A axis is rotated about the Y axis by an angle!= 90 degrees; typically the angle is between 30 and 60 degrees. Axis configuration in the NC channel Axis identifier X, Y, Z, C, A Axis index 0, 1, 2, 3, 4 Kinematic structure Tool axes Workpiece axes NC axes X, Y, Z,C,A - +Z +C -C +A -A +Y -Z +X -Y -X Z w Y X w w Fig. 68: Cardanic kinematic with CA head 100 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 101

Kinematic transformations HD11 HD3 Y HD5 HD9 X C HD14 V1 HD12 HD8 HD2 M C HD13 HD15 A V2 HD10 β=HD7 ARP Z HD6 V3 SP X HD4 HD1 L TCP Fig. 69: Offsets of cardanic CA 5-axis head TF5240 | Twin CAT 3 CNC Version: 1.33 101 Kinematic transformations
## Page 102

Kinematic transformations Offset data of kinematics HD offset param[i] Description Unit HD1 0 Z offset to tool holding device 1.0 E-4 mm HD2 1 X offset to tool holding device 1.0 E-4 mm HD3 2 Y offset to tool holding device 1.0 E-4 mm HD4 3 X offset compensation point (SP) to A axis 1.0 E-4 mm HD5 4 Y offset compensation point (SP) to A axis 1.0 E-4 mm HD6 5 Z offset compensation point (SP) to A axis 1.0 E-4 mm HD7 6 Angle between A axis and Z axis 1.0 E-4° HD8 7 X offset A axis to C axis 1.0 E-4 mm HD9 8 Y offset A axis to C axis 1.0 E-4 mm HD10 9 Z offset A axis to C axis 1.0 E-4 mm HD11 10 X offset C axis to machine point M 1.0 E-4 mm HD12 11 Y offset C axis to machine point M 1.0 E-4 mm HD13 12 Z offset C axis to machine point M 1.0 E-4 mm HD14 13 Rotary internal offset C axis (*) 1.0 E-4° HD15 14 Rotary internal offset A axis (*) 1.0 E-4° HD16 15 Rotary offset C axis (*) 1.0 E-4° HD17 16 Rotary offset A axis (*) 1.0 E-4° HD21 20 Control flag: [ - ] 0: Transformation of rotary axes C and A, default. 1: The rotary axes C and A are machine angles. In general the reference point referred to as ARP (rotation point of A axis) wanders to reference point SP, i.e. the vector V3 is 0 and the point SP is located in the tool axis which has the same rotary axis as the C axis. In this case only the parameters L, HD1, HD7 and HD10 are required. The kinematics can transform an A spatial angle of maximum 2*HD7. (*) The rotary offsets HD14 and HD15 only act on the internal kinematic model, i.e. these offsets are not transferred to the rotary axes. By contrast, the offsets HD16 and HD17 act like a zero offset when kinematic transformation is active. They also lead to a re-positioning of the cardanic head with rotary offset when an angular position is programmed. 102 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 103

Kinematic transformations C Y X C A α=HD7 HD10 HD1 Z L X TCP Fig. 70: Cardanic head with ideal head geometry (intersection of C-A axis is located in tool axis) TF5240 | Twin CAT 3 CNC Version: 1.33 103 Kinematic transformations
## Page 104

Kinematic transformations C Y β= X HD7 C A HD10 HD1 Z HD2 L X TCP Fig. 71: Cardanic head with offset C axis (C axis not located in tool axis) 2.29.1.1 Saw blade with TCP function When parameter HD20 is activated, kinematic transformation can be used to calculate TCP offsets dependent on the target angle A of the cardanic head. This is required to program the correct cutting depth of the saw blade when A != 0. The TCP is then located at the lowest point of the saw blade. Set the target angle A in parameter HD19. After target angle A != 0 is approached, the TCP is located at the bottom of the point at minimum distance to the workpiece surface as shown in the figure (when A is in zero position, the TCP is located on the right of the saw blade in X direction) HD offset param[i] Description HD19 18 Target angle A of head for saw machining 104 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 105

Kinematic transformations HD20 19 Control flag: 0: Default, cardanic transformation for milling 2: Cardanic transformation with TCP on saw blade When the kinematic is activated, the required tool offsets are calculated depending on the saw blade radius and target angle A. In the target angle position A != 0, the TCP is located at the lowest point on the saw blade (generally at minimum distance to the workpiece). C C2 Y X β= HD7 C A HD10 Z HD1 X TCP HD2 Fig. 72: Cardanic head with saw tool and TCP at saw tooth TF5240 | Twin CAT 3 CNC Version: 1.33 105 Kinematic transformations
## Page 106

Kinematic transformations A=0 TCP A=-45 A=-90 TCP TCP A=45 A=90 TCP TCP Fig. 73: Angle representations – saw tool and TCP 106 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 107

Kinematic transformations 2.29.1.2 Special function: Flange-mounted underfloor milling tool Additional offset data: HD offset param[i] Description HD19 18 C2 angle HD20 19 Control flag: 0: Default cardanic transformation 1: Utility function for the calculation of the C2 angle with underfloor milling tool flange-mounted to spindle with manually adjustable C2 angle. TF5240 | Twin CAT 3 CNC Version: 1.33 107 Kinematic transformations
## Page 108

Kinematic transformations C C2 Y X β= HD7 C A HD10 TCP HD1 Z X HD2 Fig. 74: Cardanic head with underfloor milling tool 108 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 109

Kinematic transformations C2 C Y X β= HD7 C A HD10 TCP HD1 Z X HD8 HD2 Fig. 75: Cardanic head with underfloor milling tool with offset C TF5240 | Twin CAT 3 CNC Version: 1.33 109 Kinematic transformations
## Page 110

Kinematic transformations 2.29.2 KIN_TYP_60 – Cardanic kinematics with C/B head The kinematic structure consists of 3 translatory and 3 rotary NC axes in the tool. The B axis is arranged about the X axis rotated by an angle!= 90 degrees; the angle is typically between 30 and 60 degrees. Axis configuration in the NC channel Axis identifier X, Y, Z, C, B Axis index 0, 1, 2, 3, 4 Kinematic structure Tool axes Workpiece axes NC axes X, Y, Z,C,B - Fig. 76: Cardanic kinematic with CB head 110 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 111

Kinematic transformations Fig. 77: Offsets of cardanic CB 5-axis head TF5240 | Twin CAT 3 CNC Version: 1.33 111 Kinematic transformations
## Page 112

Kinematic transformations Offset data of kinematics HD offset param[i] Description Unit HD1 0 Z offset to tool holding device 1.0 E-4 mm HD2 1 X offset to tool holding device 1.0 E-4 mm HD3 2 Y offset to tool holding device 1.0 E-4 mm HD4 3 X offset compensation point (SP) to B axis 1.0 E-4 mm HD5 4 Y offset compensation point (SP) to B axis 1.0 E-4 mm HD6 5 Z offset compensation point (SP) to B axis 1.0 E-4 mm HD7 6 Angle between B axis and Z axis 1.0 E-4° HD8 7 X offset B axis to C axis 1.0 E-4 mm HD9 8 Y offset B axis to C axis 1.0 E-4 mm HD10 9 Z offset B axis to C axis 1.0 E-4 mm HD11 10 X offset C axis to machine point M 1.0 E-4 mm HD12 11 Y offset C axis to machine point M 1.0 E-4 mm HD13 12 Z offset C axis to machine point M 1.0 E-4 mm HD14 13 Rotary offset C axis 1.0 E-4° HD15 14 Rotary offset B axis 1.0 E-4° HD21 20 Control flag for rotary axes C and B [ - ] 0: Transformation of C and B, default. 1: C and B are machine angles. In general the reference point referred to as BRP (rotation point of B axis) wanders to reference point SP, i.e. the vector V3 is 0 and the point SP is located in the tool axis which has the same rotary axis as the C axis. In this case only the parameters L, HD1, HD7 and HD10 are required. The kinematics can transform a B spatial angle of maximum 2*HD7. (*) The rotary offsets HS14 and HD 15 only act on the internal kinematic model, i.e. these offsets do not lead to a re-positioning of the cardanic head as for a rotary zero offset and programming of an angle position. 112 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 113

Kinematic transformations Fig. 78: Cardanic head with ideal head geometry (intersection of C and B axis located in tool axis) TF5240 | Twin CAT 3 CNC Version: 1.33 113 Kinematic transformations
## Page 114

Kinematic transformations 2.30 KIN_TYP_61 – 5-axis kinematics with Y/A workpiece table Kinematic structure The kinematic structure consists of one translatory and one rotary NC axis in the workpiece and 2 translatory and one rotary NC axis in the tool. Axis configuration in the NC channel Axis identifier X, Y, Z, A, B Axis index 0, 1, 2, 3, 4 Kinematic structure Tool axes Workpiece axes NC axes X, Z, B Y, A +Z -B +B +X -Z -Y -X +A +Y -A Z w Y X w w Fig. 79: Axis configuration of 5-axis machine 114 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 115

Kinematic transformations HD4 HD5 HD6 + - B B + - HD1 TL HD2 HD3 Z Z w w X Y w w Fig. 80: Offsets of tool head TF5240 | Twin CAT 3 CNC Version: 1.33 115 Kinematic transformations
## Page 116

Kinematic transformations Z Z w w Y X w w + A HD12 - - A + HD11 HD10 Fig. 81: Offsets of workpiece holder 116 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 117

Kinematic transformations Z w B - X w -- + AA 0 MCS ++ B - + 0 MCS Z w HD9 X w - A + Fig. 82: Ideal and real z zero position In the ideal zero position of the kinematic structure, the rotary axis A in the workpiece and the rotary axis B in the tool intersect at one point. The machine axis positions of the tool slide are then 0 in this position. Normally these axis positions cannot be approached with a real machine structure. The offsets at tool slide position 0 to this position can be set with parameters HD7, HD8, HD9. TF5240 | Twin CAT 3 CNC Version: 1.33 117 Kinematic transformations
## Page 118

Kinematic transformations Offset data of kinematics HD offset param[i] Description Unit HD1 0 Z offset tool rotation point B axis to tool holder point 1.0 E-4 mm HD2 1 X offset tool rotation point B axis to tool holder point 1.0 E-4 mm HD3 2 Y offset tool rotation point B axis to tool holder point 1.0 E-4 mm HD4 3 X offset rotation point B axis to reference point tool slide 1.0 E-4 mm HD5 4 Y offset rotation point B axis to reference point tool slide 1.0 E-4 mm HD6 5 Z offset rotation point B axis to reference point tool slide 1.0 E-4 mm HD7 6 X offset to machine origin 1.0 E-4 mm HD8 7 Y offset to machine origin 1.0 E-4 mm HD9 8 Z offset to machine origin 1.0 E-4 mm HD10 9 X offset A rotary axis to origin WKS 1.0 E-4 mm HD11 10 Y offset A rotary axis to origin WKS 1.0 E-4 mm HD12 11 Z offset A rotary axis to origin WKS 1.0 E-4 mm HD13 12 Rotary offset A axis 1.0 E-4° HD14 13 Rotary offset B axis 1.0 E-4° HD15 14 Rotation direction flag A axis [ - ] HD16 15 Rotation direction flag B axis [ - ] HD17 16 X zero offset in the WCS 1.0 E-4 mm HD18 17 Y zero offset in the WCS 1.0 E-4 mm HD19 18 Z zero offset in the WCS 1.0 E-4 mm 118 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 119

Kinematic transformations 2.31 KIN_TYP_63 – 5-axis kinematics with X/Y/B workpiece table Kinematic structure The kinematic structure consists of one translatory and one rotary NC axis in the workpiece and 2 translatory and one rotary NC axis in the tool. The transformation supports additional offset parameters for a non- symmetric construction and substitutes the existing kinematic structure KIN_TYP_23. Axis configuration in the NC channel Axis identifier X, Y, Z, A, B Axis index 0, 1, 2, 3, 4 Kinematic structure Tool axes Workpiece axes NC axes Z, A X,Y, B Fig. 83: Axis configuration of 5-axis machine TF5240 | Twin CAT 3 CNC Version: 1.33 119 Kinematic transformations
## Page 120

Kinematic transformations HD5 HD4 HD6 - + A A - + HD1 TL HD3 HD2 Z Z w w Y X w w Fig. 84: Offsets of tool head 120 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 121

Kinematic transformations Z Z w w X Y w w - B HD12 + B - + HD10 HD11 Fig. 85: Offsets of workpiece holder TF5240 | Twin CAT 3 CNC Version: 1.33 121 Kinematic transformations
## Page 122

Kinematic transformations Z w A + Y w -- - AB 0 MCS ++ A + - 0 MCS Z w HD9 Y w - B + Fig. 86: Ideal and real Z zero position In the ideal zero position of kinematic structure, the rotary axis B in the workpiece and the rotary axis A in the tool intersect at one point. The machine axis positions of the tool slide are then 0 in this position. Normally these axis positions cannot be approached with a real machine structure. The offsets at tool slide position 0 to this position can be set with parameters HD7, HD8, HD9. 122 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 123

Kinematic transformations Offset data of kinematics HD offset param[i] Description Unit HD1 0 Z offset tool rotation point A axis to tool holder device 1.0 E-4 mm HD2 1 X offset tool rotation point A axis to tool holder device 1.0 E-4 mm HD3 2 Y offset tool rotation point A axis to tool holder device 1.0 E-4 mm HD4 3 X offset rotation point A axis to reference point tool slide 1.0 E-4 mm HD5 4 Y offset rotation point A axis to reference point tool slide 1.0 E-4 mm HD6 5 Z offset rotation point A axis to reference point tool slide 1.0 E-4 mm HD7 6 X offset to machine origin 1.0 E-4 mm HD8 7 Y offset to machine origin 1.0 E-4 mm HD9 8 Z offset to machine origin 1.0 E-4 mm HD10 9 X offset B rotary axis to origin WKS 1.0 E-4 mm HD11 10 Y offset B rotary axis to origin WKS 1.0 E-4 mm HD12 11 Z offset B rotary axis to origin WKS 1.0 E-4 mm HD13 12 Rotary offset A axis 1.0 E-4° HD14 13 Rotary offset B axis 1.0 E-4° HD15 14 Rotation direction flag A axis [ - ] HD16 15 Rotation direction flag B axis [ - ] HD17 16 X zero offset in the WCS 1.0 E-4 mm HD18 17 Y zero offset in the WCS 1.0 E-4 mm HD19 18 Z zero offset in the WCS 1.0 E-4 mm TF5240 | Twin CAT 3 CNC Version: 1.33 123 Kinematic transformations
## Page 124

Kinematic transformations 2.32 KIN_TYP_64 – 6-axis kinematics with C/A/C workpiece table Kinematic structure The kinematic structure consists of 3 translatory axes in the tool and 3 rotary axes in the workpiece. Axis configuration in the NC channel Axis identifier X, Y, Z, C1, A, C2 Axis index 0, 1, 2, 3, 4, 5 Kinematic structure Tool axes Workpiece axes NC axes X, Y, Z C1, A, C2 +Z +C -C 1 1 +X +Y -Z +C -C 2 2 -Y -X +A -A Z w Y X w w Fig. 87: Kinematic structure of 6-axis machine with CAC workpiece table. 124 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 125

Kinematic transformations Z WCS C2 X WCS HD13 HD15 HD9 HD7 A HD4 HD6 C1 HD12 Z w HD10 X w Fig. 88: Parameters of CAC workpiece table in X/Z representation TF5240 | Twin CAT 3 CNC Version: 1.33 125 Kinematic transformations
## Page 126

Kinematic transformations C2 Z WCS Y WCS HD14 HD15 HD9 HD8 A HD5 HD6 C1 HD12 Z w HD11 Y w Fig. 89: Parameters of CAC workpiece table in Y/Z representation Typically, the machine origin is located in the rotary axis C1. If required, it can be shifted using parameters HD10 to HD12. Differing origin positions of rotary axes C1 and A or A and C2 can be set using parameters HD4 to HD9 so that the internal kinematic model matches the real machine kinematics. In the same way, differing directions of rotation of the axes C1, A and C2 can be set using the parameters HD16 to HD18. In general, the signs of command and actual parameters must also be modified accordingly in the axis parameters. 126 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 127

Kinematic transformations Offset data of kinematics HD offset param[i] Description Unit HD1 0 Z tool offset holding device to reference point tool slide SRP 1.0 E-4 mm HD2 1 X axis offset holding device to reference point tool slide SRP 1.0 E-4 mm HD3 2 Y axis offset holding device to reference point tool slide SRP 1.0 E-4 mm HD4 3 X axis offset rotary axis C1 to rotary axis A, origin WCS 1.0 E-4 mm HD5 4 Y axis offset rotary axis C1 to rotary axis A, origin WCS 1.0 E-4 mm HD6 5 Z axis offset rotary axis C1 to rotary axis A, origin WCS 1.0 E-4 mm HD7 6 X axis offset rotary axis A to rotary axis C2, origin WCS 1.0 E-4 mm HD8 7 Y axis offset rotary axis A to rotary axis C2, origin WCS 1.0 E-4 mm HD9 8 Z axis offset rotary axis A to rotary axis C2, origin WCS 1.0 E-4 mm HD10 9 X offset machine origin MZP to rotary axis C1 1.0 E-4 mm HD11 10 Y offset machine origin MZP to rotary axis C1 1.0 E-4 mm HD12 11 Z offset machine origin MZP to rotary axis C1 1.0 E-4 mm HD13 12 X offset origin CS 1.0 E-4 mm HD14 13 Y offset origin CS 1.0 E-4 mm HD15 14 Z offset origin CS 1.0 E-4 mm HD16 15 Rotary offset C1 axis 1.0 E-4° HD17 16 Rotary offset A axis 1.0 E-4° HD18 17 Rotary offset C2 axis 1.0 E-4° HD19 18 Rotation direction flag C1 axis [ - ] HD20 19 Rotation direction flag A axis [ - ] HD21 20 Rotation direction flag C2 axis [ - ] TF5240 | Twin CAT 3 CNC Version: 1.33 127 Kinematic transformations
## Page 128

Kinematic transformations 2.33 KIN_TYP_70 – 5-axis kinematics Kinematic structure The kinematic structure consists of 3 translatory and 2 rotary NC axes in the tool. With these kinematics, tool head rotation about Z can be set in the case of non-axis-parallel orientation of the BA rotary head. A virtual axis CV can be used to affect tool orientation. Axis configuration in the NC channel Axis identifier X, Y, Z, B, A, CV Axis index 0, 1, 2, 3, 4, 5 Kinematic structure Tool axes Workpiece axes NC axes X, Y, Z, B, A, CV - +Z +A -B +B -A +Y -Z +X -Y -X Z w Y X w w Fig. 90: Axis configuration of 5-axis machine 128 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 129

Kinematic transformations HD3 HD14 HD13 B - A + + + - A - HD1 HD4 HD2 TL HD6 HD5 Z Z w w Y X w w Fig. 91: Tool head parameters Offset data of kinematics HD offset param[i] Description Unit HD1 0 Z offset up to tool fixing point 1.0 E-4 mm HD2 1 X offset 1.0 E-4 mm HD3 2 Y offset 1.0 E-4 mm HD4 3 Z offset 1.0 E-4 mm HD5 4 X offset 1.0 E-4 mm HD6 5 Y axis offset to tool 1.0 E-4 mm HD7 6 Rotary offset A axis 1.0 E-4° HD8 7 Rotary offset B axis 1.0 E-4° HD9 8 Sign for direction of rotation A axis [ - ] HD10 9 Sign for direction of rotation B axis [ - ] HD14 13 Rotary offset about Z (head position) 1.0 E-4° TF5240 | Twin CAT 3 CNC Version: 1.33 129 Kinematic transformations
## Page 130

Kinematic transformations Top view A B HD14 Y X Fig. 92: Angular offset of rotary/swivel head The CV axis is not a physical real axis existing in the kinematic structure. The CV axis executes a rotation of the tool direction vector about Z, i.e. the angles A and B are calculated depending on CV. One application can be the perpendicular alignment of one component of the XY tool direction to the programmed contour. This axis must therefore be configured as a simulation axis and can then be addressed in the NC program as usual. The permitted angle range of the A and B axes is in the range of +- 90 degrees. 130 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 131

Kinematic transformations 2.34 KIN_TYP_76 – 5-axis kinematics with MTCP oblique tool head Kinematic structure The kinematic structure consists of 3 translatory and 2 rotary NC axes in the tool. The A and B axes are arranged about the Y axis at an angle!= 90 degrees. Due to the design structure the TCP is mechanically compensated (MTCP). As required, a tool length can also be set but this leads to compensation motions in the Cartesian axes. Axis configuration in the NC channel Axis identifier X, Y, Z, C, A Axis index 0, 1, 2, 3, 4 Kinematic structure Tool axes Workpiece axes NC axes X, Y, Z,A,B - TF5240 | Twin CAT 3 CNC Version: 1.33 131 Kinematic transformations
## Page 132

Kinematic transformations Fig. 93: Axis configuration of 5-axis machine 132 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 133

Kinematic transformations Fig. 94: Tool head parameters Offset data of kinematics HD offset param[i] Description Unit HD1 0 Z offset to tool holding device 1.0 E-4 mm HD6 5 Angle offset between Cartesian MCS and cutting head CS 1.0 E-4° HD7 6 Angle between A axis and Z axis 1.0 E-4° HD8 7 X offset MTCP to machine origin 1.0 E-4 mm HD9 8 Y offset MTCP to machine origin 1.0 E-4 mm HD10 9 Z offset MTCP to machine origin 1.0 E-4 mm Tool orientation is programmed using rotation angles C and A with a rotation sequence in the listed sequence. With HD6 = 65 degrees the maximum angle position is in range of +-60 degrees. TF5240 | Twin CAT 3 CNC Version: 1.33 133 Kinematic transformations
## Page 134

Kinematic transformations Yw TCP HD6=0° HD6=-90° TCP TCP HD6=180° TCP HD6=90° Xw Fig. 95: Angle offset of bevel head with regard to mounting The orientation of the bevel head with regard to the Cartesian machine coordinate system can be set with parameter HD6. 134 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 135

Kinematic transformations 2.35 KIN_TYP_80 – 5-axis kinematics with A/B workpiece table Kinematic structure The kinematic structure consists of 3 translatory NC axes in the tool and two rotary NC axes in the workpiece. Axis configuration in the NC channel Axis identifier X, Y, Z, A, B Axis index 0, 1, 2, 3, 4 Kinematic structure Tool axes Workpiece axes NC axes X, Y, Z A, B +Z +X +Y -Z -X -Y +A -B -A +B Z w Y X w w Fig. 96: Axis configuration of 5-axis machine TF5240 | Twin CAT 3 CNC Version: 1.33 135 Kinematic transformations
## Page 136

Kinematic transformations HD3 HD2 HD1 TL Z Z w w X Y w w Fig. 97: Offsets of tool head 136 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 137

Kinematic transformations Z Z w w X Y w w HD9 A - HD12 - HD6 + - + + B + B - A HD7 HD4 HD10 HD8 HD5 HD11 Fig. 98: Offsets of workpiece holder TF5240 | Twin CAT 3 CNC Version: 1.33 137 Kinematic transformations
## Page 138

Kinematic transformations Z w X w - A 0 MCS - + + B Z w 0 MCS X w HD12 - A - + + B Fig. 99: Ideal and real Z zero position When the kinematic structure is in ideal zero position, the rotary axis A in the workpiece and the reference point on the tool slide (here tool holding device) intersect at one point. The machine axis positions of the tool slide are then 0 in this position. In general these axis positions cannot be approached with a machine. The offsets to this position at tool slide position 0 can be set with parameters HD10, HD11, HD12. 138 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 139

Kinematic transformations Offset data of kinematics HD offset param[i] Description Unit HD1 0 Z offset reference point tool slide to tool holding device 1.0 E-4 mm HD2 1 X offset reference point tool slide to tool holding device 1.0 E-4 mm HD3 2 Y offset reference point tool slide to tool holding device 1.0 E-4 mm HD4 3 X axis offset rotary axis A to rotary axis B 1.0 E-4 mm HD5 4 Y axis offset rotary axis A to rotary axis B 1.0 E-4 mm HD6 5 Z axis offset rotary axis A to rotary axis B 1.0 E-4 mm HD7 6 X axis offset rotary axis B to origin WCS 1.0 E-4 mm HD8 7 Y axis offset rotary axis B to origin WCS 1.0 E-4 mm HD9 8 Z axis offset rotary axis B to origin WCS 1.0 E-4 mm HD10 9 X offset to machine origin MZP 1.0 E-4 mm HD11 10 Y offset to machine origin MZP 1.0 E-4 mm HD12 11 Z offset to machine origin MZP 1.0 E-4 mm HD13 12 Rotary offset A axis 1.0 E-4° HD14 13 Rotary offset B axis 1.0 E-4° HD15 14 Rotation direction flag A axis [ - ] HD16 15 Rotation direction flag B axis [ - ] TF5240 | Twin CAT 3 CNC Version: 1.33 139 Kinematic transformations
## Page 140

Kinematic transformations 2.36 KIN_TYP_81 – 5-axis kinematics with B/A workpiece table Kinematic structure The kinematic structure consists of 3 translatory NC axes in the tool and 2 rotary NC axes in the workpiece. Axis configuration in the NC channel Axis identifier X, Y, Z, B, A Axis index 0, 1, 2, 3, 4 Kinematic structure Tool axes Workpiece axes NC axes X, Y, Z B, A +Z +Y +X -Z -X -Y -B +A +B -A Z w Y X w w Fig. 100: Axis configuration of 5-axis machine 140 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 141

Kinematic transformations HD2 HD3 HD1 TL Z Z w w Y X w w Fig. 101: Offsets of tool head TF5240 | Twin CAT 3 CNC Version: 1.33 141 Kinematic transformations
## Page 142

Kinematic transformations Z Z w w Y X w w HD9 B + HD12 - HD6 - + + + A - - A B HD8 HD5 HD11 HD7 HD4 HD10 Fig. 102: Offsets of workpiece holder 142 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 143

Kinematic transformations Z w Y w - B 0 MCS + + - A Z w 0 MCS Y w HD12 - B + + - A Fig. 103: Ideal and real Z zero position In the ideal zero position of the kinematic structure, the rotary axis B in the workpiece and the reference point on the tool slide (here tool holding device) intersect at one point. The machine axis positions of the tool slide are then 0 in this position. In general these axis positions cannot be approached with a machine. The offsets to this position at tool slide position 0 can be set with parameters HD10, HD11, HD12. TF5240 | Twin CAT 3 CNC Version: 1.33 143 Kinematic transformations
## Page 144

Kinematic transformations Offset data of kinematics HD offset param[i] Description Unit HD1 0 Z axis offset reference point tool slide to tool fixing point 1.0 E-4 mm HD2 1 X axis offset reference point tool slide to tool fixing point 1.0 E-4 mm HD3 2 Y axis offset reference point tool slide to tool fixing point 1.0 E-4 mm HD4 3 X axis offset rotary axis B to rotary axis A 1.0 E-4 mm HD5 4 Y axis offset rotary axis B to rotary axis A 1.0 E-4 mm HD6 5 Z axis offset rotary axis B to rotary axis A 1.0 E-4 mm HD7 6 X axis offset rotary axis A to origin WCS 1.0 E-4 mm HD8 7 Y axis offset rotary axis A to origin WCS 1.0 E-4 mm HD9 8 Z axis offset rotary axis A to origin WCS 1.0 E-4 mm HD10 9 X offset to machine origin MNP 1.0 E-4 mm HD11 10 Y offset to machine origin MNP 1.0 E-4 mm HD12 11 Z offset to machine origin MNP 1.0 E-4 mm HD13 12 Rotary offset B axis 1.0 E-4° HD14 13 Rotary offset A axis 1.0 E-4° HD15 14 Rotation direction flag B axis [ - ] HD16 15 Rotation direction flag A axis [ - ] 144 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 145

Kinematic transformations 2.37 KIN_TYP_82 – 6-axis kinematics with C workpiece table Kinematic structure The kinematic structure consists of 3 translatory axes in the tool, 2 rotary NC axes in the tool and 1 rotary axis in the workpiece. Axis configuration in the NC channel Axis identifier X, Y, Z, B, C, A Axis index 0, 1, 2, 3, 4, 5 Kinematic structure Tool axes Workpiece axes NC axes X, Y, Z, B, A C +Z +A -B +B -A +Y -Z +X +C -C -Y -X Z w Y X w w Fig. 104: Axis configuration of 6-axis machine TF5240 | Twin CAT 3 CNC Version: 1.33 145 Kinematic transformations
## Page 146

Kinematic transformations HD7 HD8 HD5 HD9 + A - - - HD1 HD6 + + A B TL HD3 HD2 HD4 Z Z w w X Y w w Fig. 105: Tool head parameters 146 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 147

Kinematic transformations HD13 HD10 Yw Xw HD11 - + C HD14 HD12 Zw Xw HD15 Fig. 106: Offsets on workpiece holder TF5240 | Twin CAT 3 CNC Version: 1.33 147 Kinematic transformations
## Page 148

Kinematic transformations Offset data of kinematics HD offset param[i] Description Unit HD1 0 Z offset tool to rotation point A axis 1.0 E-4 mm HD2 1 X offset tool to rotation point A axis 1.0 E-4 mm HD3 2 Y offset tool to rotation point A axis 1.0 E-4 mm HD4 3 X offset rotation point A axis to B axis 1.0 E-4 mm HD5 4 Y offset rotation point A axis to B axis 1.0 E-4 mm HD6 5 Z offset rotation point A axis to B axis 1.0 E-4 mm HD7 6 X offset B axis to reference point tool slide 1.0 E-4 mm HD8 7 Y offset B axis to reference point tool slide 1.0 E-4 mm HD9 8 Z offset B axis to reference point tool slide 1.0 E-4 mm HD10 9 X offset C rotary axis to origin WCS 1.0 E-4 mm HD11 10 Y offset C rotary axis to origin WCS 1.0 E-4 mm HD12 11 Z offset C rotary axis to origin WCS 1.0 E-4 mm HD13 12 X offset to machine origin 1.0 E-4 mm HD14 13 Y offset to machine origin 1.0 E-4 mm HD15 14 Z offset to machine origin 1.0 E-4 mm HD16 15 Rotary offset B axis 1.0 E-4° HD17 16 Rotary offset C axis 1.0 E-4° HD18 17 Rotation direction flag B axis [ - ] HD19 18 Rotation direction flag C axis [ - ] 148 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 149

Kinematic transformations 2.38 KIN_TYP_85 – Lever arm kinematics Kinematic structure The kinematic structure consists of 1 translatory axis and 1 rotary NC axis. The transformation can be selected for any X axis position (ACS). In this case a corresponding machine X position (MCS) is determined. Depending on the angle position when the transformation is selected, the programmed contour is moved in the left-handed or right-handed pattern. When the transformation is active, the selection side is retained, i.e. there is no swapping between right-handed/left-handed beam. To swap the selection side, the transformation must be switched off. In the motion range of the transformation used, the rotary axis may not have a modulo transition. Axis configuration in the NC channel Axis identifier X, Z Axis index 0, 1 Kinematic structure Tool axes Workpiece axes NC axes X, C - Z w HD1: Z 0 HD2: L Z max HD3: C 0 L C 0 Z 0 Z min X w Fig. 107: Position of the coordinate system Offset data of kinematics HD offset param[i] Description Unit HD1 0 Z offset of rotation centre point 1.0 E-4 mm HD2 1 Arm length of lever arm 1.0 E-4 mm HD3 2 Angle offset of C axis to the horizontal 1.0 E-4° TF5240 | Twin CAT 3 CNC Version: 1.33 149 Kinematic transformations
## Page 150

Kinematic transformations Fig. 108: Axis configuration for left-handed beam Fig. 109: Axis configuration for right-handed beam 150 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 151

Kinematic transformations 2.39 KIN_TYP_98- Transformation to monitor the minimum distance This function is available as of V3.1.3080.12 or V3.1.3107.44 This transformation can monitor and maintain a defined minimum distance to the workpiece surface at the tool inclination. Fig. 110: Monitoring the minimum distance The laser length L1 must be programmed as the tool length, e.g. programmed via V. G. WZ_AKT. L. Tool length L2 is the tool length that is extended by the kinematic due to the avoidance motion. Offset data of kinematics HD offset param[i] Description Unit HD1 0 Tool clamping point offset up to tool head reference point 1.0 E-4 mm HD2 1 Inclination angle starting at which the distance of the tool head 1.0 E-4° to the surface is kept constant. HD3 2 Maximum inclination angle starting at which the distance of the 1.0 E-4° tool head to the surface is kept constant. HD4 3 Maximum inclination angle. When exceeded, an error message 1.0 E-4° is output with process abort. TF5240 | Twin CAT 3 CNC Version: 1.33 151 Kinematic transformations
## Page 152

Kinematic transformations KIN_TYP_202 - CYL 2ROT kinematics Kinematic structure Turning work in the Cartesian system. The tool is supported by the translatory axes XQ, ZQ and the rotary axis YQ. The workpiece is aligned by the rotary axis CS. Transformation can be switched by the command #CYL 2ROT. The user programs X, Y, Z in the Cartesian system. In addition, the dimension C of the tool angle is programmed in the X-Y plane. When C=0, the tool is parallel to X and vertical on Y. The kinematics are available in 2 variants. 1. In the LEFT variant (HD10 = 0) the CS axis is located to the left of the YQ axis. The YQ axis points to the left in zero position. When transformation is selected, the X axis must be located to the right of the CS axis. 2. In the RIGHT variant (HD10 = 1) the CS axis is located to the right of the YQ axis. The YQ axis points to the right in zero position. When transformation is selected, the X axis must be located to the left of the CS axis. The CS axis must have a modulo range of 0° to 360°, see P-AXIS-00126 and P-AXIS-00127. Axis configuration in the NC channel Axis identifier XQ, YQ, ZQ, CS Axis index 0, 1, 2, 3 Kinematic structure Tool axes Workpiece axes NC axes XQ, YQ, ZQ CS Fig. 111: Kinematics in the LEFT variant 152 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 153

Kinematic transformations Fig. 112: Offset programming coordinate system in the RIGHT variant Fig. 113: Kinematics in the RIGHT variant HD offset param[i] Meaning Unit HD1 0 Tool length offset 1.0 E-4 mm HD2 1 X offset from machine origin MNP to rotation centre XQ 1.0 E-4 mm HD3 2 Y offset from machine origin MNP to rotation centre XQ 1.0 E-4 mm HD4 3 Z offset from machine origin MNP to rotation centre XQ 1.0 E-4 mm HD5 4 Angular offset for YQ 1.0 E-4° HD6 5 X offset from machine origin MNP to rotation centre CS 1.0 E-4 mm TF5240 | Twin CAT 3 CNC Version: 1.33 153 Kinematic transformations
## Page 154

Kinematic transformations HD7 6 Y offset from machine origin MNP to rotation centre CS 1.0 E-4 mm HD8 7 Z offset from machine origin MNP to rotation centre CS 1.0 E-4 mm HD9 8 Angular offset for CS 1.0 E-4° HD10 9 Kinematics variant [ - ] 0: LEFT, CS axis is located to the left of the tool axis YQ 1: RIGHT, CS axis is located to the right of the tool axis YQ 154 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 155

Kinematic transformations KIN_TYP_203 - FACE 2ROT kinematics Kinematic structure Face machining with 2 rotary axes. The tool is supported by the rotary axis YL and the translatory axis ZL. The workpiece is aligned by the rotary axis C. The transformation can be switched by the command #FACE 2ROT. The user programs X, Y, Z on the tool face in the Cartesian system. The CS axis must have a modulo range of 0° to 360°, see P-AXIS-00126 and P-AXIS-00127. Axis configuration in the NC channel Axis identifier C, YL, ZL Axis index 0, 1, 2 Kinematic structure Tool axes Workpiece axes NC axes YL, ZL C HD offset param[i] Meaning Unit HD1 0 Tool length offset 1.0 E-4 mm TF5240 | Twin CAT 3 CNC Version: 1.33 155 Kinematic transformations
## Page 156

Kinematic transformations HD2 1 X offset from machine origin to rotation centre of YL 1.0 E-4 mm HD3 2 Y offset from machine origin to rotation centre of YL 1.0 E-4 mm HD4 3 Z offset from machine origin to rotation centre of YL 1.0 E-4 mm HD5 4 Angular offset for YL 1.0 E-4° HD6 5 X offset from machine origin to rotation centre of C 1.0 E-4 mm HD7 6 Y offset from machine origin to rotation centre of C 1.0 E-4 mm HD8 7 Z offset from machine origin to rotation centre of C 1.0 E-4 mm HD9 8 Angle offset for C 1.0 E-4° HD10 9 Length of tool arm 1.0 E-4 mm 156 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 157

Kinematic transformations KIN_TYP_205 - Eccentric disc kinematics Kinematic structure The tool is attached to an eccentric disc that rotates about Z. The eccentric disc is also moved by 2 Cartesian axes in the X or Z direction. HD parameters HD16 and HD17 to determine the axis about which the eccenter disc rotates with the tool. The following combinations are permitted: • HD16 = 0, HD17 = 1 : rotation about X • HD16 = 1, HD17 = 0 : Rotation about Z • HD16 = 0, HD17 = 0 : Discontinued status, still available for reasons of downward compatibility. No longer recommended. Any other combination of parameters HD16 and HD17 is not permitted. Fig. 114: Eccentric disc kinematic with rotation about Z Fig. 115: Eccentric disc kinematic with rotation about X The tool position relative to the rotation centre can be configured in the following 2 methods. TF5240 | Twin CAT 3 CNC Version: 1.33 157 Kinematic transformations
## Page 158

Kinematic transformations Cartesian determination Polar determination Configuring the two methods has an additive effect on the tool position. The kinematics are programmed in XYZ coordinates. Axis configuration in the NC channel Axis identifier X, Y(C), Z Axis index 0, 1, 2 Kinematic structure Tool axes Workpiece axes NC axes X, Y(C), Z - The axes can be sorted in the channel, e.g. with # SET AX [X, 1, 0] [Y, 2, 1] [Z, 3, 2]. HD offset param[i] Meaning Unit HD1 0 Tool length offset 1.0 E-4 mm HD2 1 polar: Tool distance from rotary axis C 1.0 E-4 mm HD3 2 polar: Tool zero position angle 1.0 E-4 mm HD4 3 Cartesian: X offset between tool and C axis 1.0 E-4 mm HD5 4 Cartesian: Y offset between tool and C axis 1.0 E-4 mm HD6 5 X offset from machine origin to zero position of X 1.0 E-4 mm HD7 6 Y offset from machine origin to zero position of X 1.0 E-4 mm HD8 7 Z offset from machine origin to zero position of X 1.0 E-4 mm HD9 8 X offset from machine origin to zero position of Z 1.0 E-4 mm HD10 9 Y offset from machine origin to zero position of Z 1.0 E-4 mm HD11 10 Z offset from machine origin to zero position of Z 1.0 E-4 mm HD12 11 Angle offset of C axis 1.0 E-4° HD13 12 Direction flag for C axis: [ - ] >= 0: positive rotation direction < 0: negative rotation direction HD14 13 Direction flag for X axis (as of V3.1.3080.19 or v3.1.3107.53) [ - ] >= 0 positive < 0 negative HD15 14 Direction flag for Z axis (as of V3.1.3080.19 or v3.1.3107.53) [ - ] 158 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 159

Kinematic transformations >= 0 positive < 0 negative HD16 15 Parameter to determine the axis about which the eccenter disc [ - ] rotates with the tool. (as of V3.1.3080.19 or v3.1.3107.53). HD17 16 Parameter to determine the axis about which the eccenter disc [ - ] rotates with the tool. (as of V3.1.3080.19 or v3.1.3107.53). TF5240 | Twin CAT 3 CNC Version: 1.33 159 Kinematic transformations
## Page 160

Kinematic transformations 2.40 KIN_TYP_207- 5-axis kinematics with inclined tool Kinematic structure The kinematic structure consists of 3 translatory NC axes and 1 rotary NC axis in the tool. A manually adjustable rotary 5th axis continues to be available. This kinematic allows inclined machining edges at a fixed with manually preset angle (A). This A axis cannot be addressed by the NC program. Axis configuration in the NC channel Axis identifier X, Y, Z, C Axis index 0, 1, 2, 3 Kinematic structure Tool axes Workpiece axes NC axes X, Y, Z, A, C - Auxiliary axes A - +Z +C -C +A +Y -Z -A +X -Y 0° 45° -X ZZww YYww XXww Fig. 116: 5-axis kinematic (metal cutting tool with manual auxiliary axis A) 160 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 161

Kinematic transformations Fig. 117: 5-Axis metal cutting tool with 90 degree angle setting Additional information to parameter HD11 HD11 specifies the machining depth or the tool thickness used at cutting height Z0. Reference plan for programming the contour is Z0. It is not possible to move deeper than the specified cutting height. When moving to cutting height Z0, this kinematic executes an inclined plunge or withdrawal of the tool at manually set tool angle A (HD4). TF5240 | Twin CAT 3 CNC Version: 1.33 161 Kinematic transformations
## Page 162

Kinematic transformations Fig. 118: Cutting height Offset data of kinematics HD offset param[i] Description Unit HD2 1 Y axis offset from tool holding device to rotation point A axis 1.0 E-4 mm (swivel axis) HD3 2 Z axis offset from rotation point A axis to tool reference point 1.0 E-4 mm HD4 3 Fixed angle setting of rotary A axis (tool angle) 1.0 E-4° HD5 4 Rotary angular offset C axis 1.0 E-4° HD7 6 Static tool offset in X 1.0 E-4 mm HD8 7 Static tool offset in Y 1.0 E-4 mm HD9 8 X axis offset rotation point A axis to rotation point C axis 1.0 E-4 mm HD10 9 Y axis offset rotation point A axis to rotation point C axis 1.0 E-4 mm HD11 10 Define the cutting height Z0 1.0 E-4 mm 162 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 163

Kinematic transformations 2.41 KIN_TYP_209 - Tripod with rotary/swivel workpiece table This kinematic is based on the strut kinematic (KIN_TYP_12) and additionally contains a rotary/swivel workpiece table to carry out conventional 5-axis machining. This kinematic is available as of CNC Build V3.01.3078. Axis configuration in NC channel Axis identifier X, Y, Z (Z1, Z2, Z3), A(B), C Axis index 0, 1, 2, 3, 4 Kinematic structure Tool axes Workpiece axes NC axes X, Y, Z A(B), C TF5240 | Twin CAT 3 CNC Version: 1.33 163 Kinematic transformations
## Page 164

Kinematic transformations +Z3 -Z3 +Z1 +Z2 -Z1 -Z2 +C -C +A -A Z w Y X w w Fig. 119: Trip kinematics with CA rotary/swivel table 164 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 165

Kinematic transformations Fig. 120: Offset dimensions of strut kinematics The parameter HD8 is used to toggle between an ideal (1) and non-ideal (0) tripod. An ideal tripod has an angle of 120° between all columns. A non-ideal tripod must be defined by the angles HD9 and HD10. The third angle between columns is calculated as follows: W_Z1Z2 = 360° - HD9 – HD10 = 360° - W_Z2Z3 – W_Z1Z3 An angle offset of the rotary/swivel table due to mounting constraints can be compensated by HD30. TF5240 | Twin CAT 3 CNC Version: 1.33 165 Kinematic transformations
## Page 166

Kinematic transformations Rotary/swivel table – CA variant HD31 defines the rotary/swivel table variant. By default the parameter is assigned the value 0 defining the CA variant. Z3 YW YB TRI XW HD30 - XB TRI C + Z1 Z2 Fig. 121: Angle offset HD30 of the CA rotary/swivel table 166 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 167

Kinematic transformations CA rotary/swivel table offsets X w Y w + - Y X w w - C C + Z Z w w Y X w w HD34 - A - A + + HD37 HD36 HD33 HD32 HD35 Fig. 122: CA rotary/swivel table offsets TF5240 | Twin CAT 3 CNC Version: 1.33 167 Kinematic transformations
## Page 168

Kinematic transformations Rotary/swivel table – CB variant If HD31 is assigned the value 1, the CB variant is defined. Z3 YW YB TRI XW HD30 + XB TRI - C Z1 Z2 Fig. 123: Angle offset HD30 of the CB rotary/swivel table 168 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 169

Kinematic transformations CB rotary/swivel table offsets Y w - - C X C Y w w + + X w Z Z w w X Y w w HD34 - B - B + + HD37 HD32 HD35 HD33 HD36 Fig. 124: CB rotary/swivel table offsets TF5240 | Twin CAT 3 CNC Version: 1.33 169 Kinematic transformations
## Page 170

Kinematic transformations Tripod kinematics offset data HD offset param[i] Description Unit HD1 0 Tool offset Z 1.0 E-4 mm HD2 1 Tool offset Y 1.0 E-4 mm HD3 2 Tool offset X 1.0 E-4 mm HD4 3 Z axis offset machine origin 1.0 E-4 mm HD5 4 Radius to connecting line of the joint centre points on the drive 1.0 E-4 mm columns (large circle) HD6 5 Radius to connecting line of the joint centre points on the holder 1.0 E-4 mm platform (small circle) HD7 6 Strut length to each joint centre point 1.0 E-4 mm HD8 7 Switch to switch over to non-ideal tripod [ - ] 0 : ideal tripod 1 : non-ideal tripod and enable HD9 / HD 10 HD9 8 Angle of column / joint 3 to column / joint 1 1.0 E-4° HD10 9 Angle of column / joint 3 to column / joint 2 1.0 E-4° Offset data of the rotary/swivel table HD offset param[i] Description Unit HD30 29 Angle offset about Z of Cartesian basic system to tripod column 1.0 E-4° Z3 HD31 30 Type of rotary workpiece holder 0: CA, 1:CB [ - ] Default value = 0 HD32 31 X axis offset rotary axis A, (B) to rotary axis C, origin WCS 1.0 E-4 mm HD33 32 Y axis offset rotary axis A, (B) to rotary axis C, origin WCS 1.0 E-4 mm HD34 33 Z axis offset rotary axis A, (B) to rotary axis C, origin WCS 1.0 E-4 mm HD35 34 X offset machine origin MZP to rotary axis A, (B) 1.0 E-4 mm HD36 35 Y offset from machine origin MZP to rotary axis A, (B) 1.0 E-4 mm HD37 36 Z offset machine origin MZP to rotary axis A, (B) 1.0 E-4 mm HD38 37 Rotary offset A (B) axis 1.0 E-4° HD39 38 Rotary offset C axis 1.0 E-4° HD40 39 Rotation direction flag A (B) axis [ - ] HD41 40 Rotation direction flag C axis [ - ] 170 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 171

Robot kinematics 3 Robot kinematics The following sections describe predefined kinematics. It is also possible to create kinematics yourself using the Universal Kinematic ID 91 [FCT-C27] or to compile kinematics using the couple kinematic ID 210 [FCT-C35]. 3.1 KIN_TYP_36 – SCARA kinematics Kinematic structure The robot kinematics consist of 3 rotary and 1 translatory NC axes in the tool. Tool length compensation takes place in the Z axis. All rotary axes are C axes. Axis configuration in the NC channel Axis identifier X, Y, Z, C (C1, C2, Z, C3) Axis index 0, 1, 2, 3 Kinematic structure Tool axes Workpiece axes NC axes X,Y, Z, C - TF5240 | Twin CAT 3 CNC Version: 1.33 171 Kinematic transformations
## Page 172

Robot kinematics +C 2 +C 1 +Z -Z +C 3 Z w Y X w w Fig. 125: SCARA kinematics 172 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 173

Robot kinematics Y W HD2 HD3 C1 C2 C3 X W Z W Fig. 126: SCARA kinematics in zero position (C1=0, C2=0, C3=0, HD8=0) SCARA works as a left-handed or right-handed robot depending on the angular position of robot joint 2 (C2). The machine axis position before selecting the transformation therefore decides whether SCARA is positioned as a left-handed or right-handed robot. A change can be made from left-handed to right-handed robot when the kinematic transformation is inactive. HD7 can be used to define the reference of the robot joint (C2). In the default case of HD7 = 0 C2 refers to the angle between the extension of the first arm and the second arm. In the case of HD7 = 1 C2 refers to the angle between the X axis and the second arm. HD8 is a rotary offset of C2. This permits the description of a zero position of the kinematics where the SCARA is not completely stretched out but is angled in the second joint. HD8=0 is the default. HD7 = 0 (default) HD7 = 1 Right-handed robot Right-handed robot +C3 YW YW +C3 +C2 +C2 HD3 HD3 HD2 HD2 HD5 HD5 +C1 +C1 HD4 HD4 ZW XW ZW XW TF5240 | Twin CAT 3 CNC Version: 1.33 173 Kinematic transformations
## Page 174

Robot kinematics Left-handed robot Left-handed robot YW YW HD3 HD3 +C3 +C3 +C2 +C2 HD2 HD2 HD5 HD5 +C1 +C1 HD4 HD4 XW ZW XW ZW Offset data of kinematics HD offset param[i] Description Unit HD1 0 Tool length offset in Z direction 1.0 E-4 mm HD2 1 Length offset from joint 1 to joint 2 1.0 E-4 mm HD3 2 Length offset joint 2 to rotary axis C3 1.0 E-4 mm HD4 3 X offset origin C1 axis 1.0 E-4 mm HD5 4 Y offset origin C1 axis 1.0 E-4 mm HD6 5 Rotary offset C1 axis 1.0 E-4° HD7 6 Calculate reference of the robot joint for C2 [ - ] 0 = C2 as an offset of C1 (default) Calculate 1 = C2 as an angle to the X axis HD8 7 Rotary offset C2 axis 1.0 E-4° 174 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 175

Robot kinematics 3.2 KIN_TYP_37 – Delta robot kinematics The strut kinematics referred to as delta robot consists of 3 rotary axes arranged at an offset of 120 degrees guiding 2 parallel struts via connecting levers. In turn, these struts guide the tool platform. Tool orientation is constant. Axis configuration in the NC channel Axis identifier X, Y, Z (J1, J2, J3) Axis index 0, 1, 2 Kinematic structure Tool axes Workpiece axes NC axes X, Y, Z - Fig. 127: Overhead delta robot kinematics TF5240 | Twin CAT 3 CNC Version: 1.33 175 Kinematic transformations
## Page 176

Robot kinematics Fig. 128: Offsets of delta robot kinematics Offset data of kinematics HD offset param[i] Description Unit HD1 0 Tool offset Z 1.0 E-4 mm HD2 1 n.a. [ - ] HD3 2 n.a. [ - ] HD4 3 Radius of connecting line of bottom joint fixed points 1.0 E-4 mm HD5 4 Radius of connecting line of top joint fixed points 1.0 E-4 mm 176 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 177

Robot kinematics HD6 5 Bottom strut/arm length 1.0 E-4 mm HD7 6 Top strut/arm length (connecting lever) 1.0 E-4 mm HD8 7 Angular offset zero position J1 (ideal zero position of top arm 1.0 E-4° horizontal) HD9 8 Angular offset zero position J2 (ideal zero position of top arm 1.0 E-4° horizontal) HD10 9 Angular offset zero position J3 (ideal zero position of top arm 1.0 E-4° horizontal) HD11 10 Limit of minimum joint angle J1 to J3 1.0 E-4° HD12 11 Limit of maximum joint angle J1 to J3 1.0 E-4° HD13 12 Z zero offset Cart. Workpiece coordinate system 1.0 E-4 mm The Cartesian coordinate system lies in the origin of the motor mount. The parameter HD11 can shift the system origin so that it is located below the motor mount and the tool holder platform. By default, the strut connecting levers must be horizontal in the drive zero position. If this is not the case, the angle zero position can be corrected for the internal kinematic model by the parameters HD8, HD9 and HD10. When all rotary axes move in positive rotation, the TCP moves in negative Z direction. Example: Connecting lever in horizontal position, drive position: 900000 [ 1.0 E-4° ] HD8, HD9, HD10: 900000 [ 1.0 E-4° ] This kinematic transformation was developed in collaboration with Esslingen Uni- versity (www.hs-esslingen.de). TF5240 | Twin CAT 3 CNC Version: 1.33 177 Kinematic transformations
## Page 178

Robot kinematics 3.3 KIN_TYP_45 – 6-axis articulated robot kinematics Kinematic structure Articulated robot with 6 machine axes. All articulated axes of the robot except for the manual axes A1 and A2 are linear axes. The axes A1 and A2 are modulo axes with ranges of 0 to 180, 0 to -180 degrees. The joint axis C1 can also be configured as a modulo axis if no trailing cable must be considered. Axis configuration in the NC channel Axis identifier X, Y, Z, A, B, C (C1, B1, B2, A1, B3, A2) Axis index 0, 1, 2, 3, 4, 5 Kinematic structure Tool axes Workpiece axes NC axes X, Y, Z, A, B, C - Fig. 129: 6-axis articulated robot 178 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 179

Robot kinematics HD9 A3 A5 A6 HD12 HD10 HD8 A2 HD7 Z X HD11 A1 Fig. 130: HD offset data in side view TF5240 | Twin CAT 3 CNC Version: 1.33 179 Kinematic transformations
## Page 180

Robot kinematics A3 A2 A5 A6 Z X Fig. 131: Zero position for HD145 and HD15 A4 A1 HD32 Y X Fig. 132: Articulated robot, top view Offset data of kinematics HD offset param[i] Description Unit HD1 0 Tool Z offset in the Flange Coordinate System [} 184] (variant 1) 1.0 E-4 mm HD2 1 Tool X offset in the Flange Coordinate System [} 184] (variant 1) 1.0 E-4 mm HD3 2 Tool Y offset in the Flange Coordinate System [} 184] (variant 1) 1.0 E-4 mm HD4 3 Angle of tool rotation about the X'' axis 1.0 E-4° HD5 4 Angle of tool rotation about the Y'' axis 1.0 E-4° HD6 5 Angle of tool rotation about the Z axis 1.0 E-4° HD7 6 Z offset from origin of Cartesian spatial coordinate system to 1.0 E-4 mm rotation point of joint axis 2 HD8 7 Z offset from rotary axis joint 2 to rotary axis joint 3 1.0 E-4 mm HD9 8 X offset from rotary axis joint 3 to rotary axis joint 5 1.0 E-4 mm HD10 9 X offset from manual axis joint 5 to flange surface on joint 6 1.0 E-4 mm HD11 10 X offset from origin of Cartesian spatial coordinate system to 1.0 E-4 mm rotation point of joint axis 2 HD12 11 Z offset from rotary axis joint 5 to rotary axis joint 3. Please refer 1.0 E-4 mm to note under the table. HD14 13 Rotary offset for zero position of robot joint axis 2 (see Angle 1.0 E-4° offset) HD15 14 Rotary offset for zero position of robot joint axis 3 (see Angle 1.0 E-4° offset) 180 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 181

Robot kinematics HD21 20 Rotation direction of joint axis 1: 0 (positive), 1 (negative) [ - ] HD22 21 Rotation direction of joint axis 2: 0 (positive), 1 (negative) [ - ] HD23 22 Rotation direction of joint axis 3: 0 (positive), 1 (negative) [ - ] HD24 23 Rotation direction of joint axis 4: 0 (positive), 1 (negative) [ - ] HD25 24 Rotation direction of joint axis 5: 0 (positive), 1 (negative) [ - ] HD26 25 Rotation direction of joint axis 6: 0 (positive), 1 (negative) [ - ] HD31 30 Flange Coordinate System [} 184]: [ - ] 0 (variant 1) 1 (variant 2) HD32 31 Y offset from rotary axis joint 4 to rotary axis joint 1. Please 1.0 E-4 mm refer to note under the table. HD33 32 Control flag for machining type [ - ] 0: Default 1: Moved workpiece Once you set the parameter HD33, the machining mode switches to the mode of the moved workpiece. We therefore advise you to set this parameter first by selecting the fixed tool and positioning the robot in readiness or to set this parameter in the tool management system. HD34 33 Tool length compensation direction [ - ] 0: none (default) 1: -Z 2: -X 3: -Y 4: Z 5: X 6: Y By default, the entered tool length is not included when you select a tool with Kinematic 45 enabled. If this parameter is unequal to 0, the tool length is included in the set direction. HD35 34 Rotation sequence of tool orientation HD4-6 [ - ] 0: Z Y’ X‘‘ (default) 1: X Y‘ Z‘‘ HD36 35 Rotary offset for zero position of robot joint axis 1 1.0 E-4° HD37 36 Rotary offset for zero position of robot joint axis 4 1.0 E-4° HD38 37 Rotary offset for zero position of robot joint axis 5 1.0 E-4° HD39 38 Rotary offset for zero position of robot joint axis 6 1.0 E-4° Set the correct sign for parameters HD12 and HD32. HD12: Positive sign; the rotary axis of joint 3 is located in the positive Z direction above the rotary axis of joint 5 HD32: Positive sign; the rotary axis of joint 1 is located in the positive Y direction above the rotary axis of joint 4 Robot poses can also be specified as an alternative to axis-specific positioning, see [PROG// Status & Turn (IS, IT) [} 185]]. For more information on kinematic offset data, see [CMS-A2]. TF5240 | Twin CAT 3 CNC Version: 1.33 181 Kinematic transformations
## Page 182

Robot kinematics 3.3.1 Moved workpiece The moved workpiece is a subfunction of kinematic 45. It allows the control of an industrial robot where the workpiece is attached to the flange by a standard processing program, whereas the (milling) tool has a fixed position in space. The further the robot is away from the fixed tool, the greater the movement of the robot when chan- ging the orientation ABC. This function is activated by the kinematic parameter HD33 of kinematic 45. Tool set-up The tool parameters for kinematic 45 can be directly entered in the parameters HD1-6 or they can be activated by a suitable tool by means of tool-head offsets when the tool is selected. Tool-head offsets are added to the kinematic parameters (no concatenation takes place). If this function is used, it is recommended to set the parameters HD1-6 in the channel parameter list to “0”. Parameterisation example of HD1-3 for a fixed tool: Fig. 133: Tool offsets of the fixed position tool. 182 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 183

Robot kinematics Example: Parameterisation of HD4-6 for a fixed tool: Fig. 134: Procedure for defining the orientation with rotation sequence Z Y‘ X‘‘ Tool set-up Offsets of the coordinate system into the workpiece now have the robot flange system as the lowest reference point for the moved workpiece. Every further offset/rotation haves as usual. Only one tool can be active at any one time. This is the machining tool of the moved workpiece. A gripper on the flange can be defined by an offset (e.g. #CS). The parameterisation example below refers to the standard flange orientation (HD 31 = 0). TF5240 | Twin CAT 3 CNC Version: 1.33 183 Kinematic transformations
## Page 184

Robot kinematics Flange system Fig. 135: The orientation of the robot flange and the world Flange system offset Fig. 136: Offset from the flange to the black dot in the workpiece. 3.3.2 Flange coordinate system For compatibility reasons, the orientation of the flange coordinate system can be changed back from variant 1 (standard) to variant 2. List parameters Meaning kinematik[45].param[30] 0: Variant 1, default (KUKA, Stäubli) 1: Variant 2 184 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 185

Robot kinematics 3.3.3 Status & Turn (IS, IT) An option exists to specify the robot pose for the corresponding Cartesian position as an alternative to axis- specific positioning and to obtain a more precise specified position of a #PTP movement for industrial robots. The robot pose is therefore described using Status (IS). In addition, the signs of the axis positions are described using Turn (ÍT) It is not permitted to program Turn without Status. Robot positioning with Status & Turn is currently only available for kinematic type 45 [} 178]. Status bit An overview of robot poses is contained in Kinematic poses of six-axis articulated robot [} 189]. The robot pose is divided into 3 criteria. If a criterion applies, a corresponding numerical value is added to the status. 1st criterion If the wrist is behind axis A1, decimal 1 or binary 1 is added (yellow area in the figure on the left). TF5240 | Twin CAT 3 CNC Version: 1.33 185 Kinematic transformations
## Page 186

Robot kinematics Fig. 137: The intersection of the hand axes (arrowhead) is in the (blue) base area. 186 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 187

Robot kinematics 2nd criterion If the wrist is in front of the straight line through axes A2 and A3, decimal 2 or binary 10 is added (centre and right image). Fig. 138: Status bit 1 for robots with an offset between axis A3 and axis A5 3rd criterion Indicates the position of axis A5. If A5 < 0, decimal 4 or binary 100 is added. Fig. 139: Status bit 2 for axis angle position A4=0° and A4=180°. TF5240 | Twin CAT 3 CNC Version: 1.33 187 Kinematic transformations
## Page 188

Robot kinematics Turn bit (optional) The optional turn value lists the negative signs of the axis angles. When the turn value is considered in a binary representation, the sign of each axis angle is assigned to a bit. These are then added to a number, i.e. the turn. If the axis angle of an axis is < 0°, the value is 1. A6 < 0° A5 < 0° A4 < 0° A3 < 0° A2 < 0° A1 < 0° Binary 100000 010000 001000 000100 000010 000001 Decimal 32 16 8 4 2 1 If all 6 axis angles are in the negative range, this results in a turn value of decimal 63 or binary 111111; accordingly, this results in decimal 0 and binary 000000 for 6 positive axis angles. The turn value must be consistent with the status value. For example, a 1 in status bit 2 describes a negative A5 angle. In addition, if the A4 turn bit is set to 0 (positive A5 angle), the status and turn values are in contradiction. In this case, an error message is output. Description The additional parameters Status & Turn are available for unambiguous programming of the robot poses (Kin_Typ_45 [} 178]) with Cartesian target coordinates of a PTP movement. Syntax of Programming Status & Turn with the prefixes “IS” and “IT” (optional): #PTP ON G.. X.. Y.. … IS.. IT.. #PTP OFF Binary numbers can be programmed with the following syntax: 'B<0…1>', or '2#<0…1>', or '02#<0…1>'. When binary numbers are used, the syntax is as follows: Status: IS'Bxxx' Turn: IT'Bxxxxxx' When decimal numbers are used, the syntax is as follows: Status: IS<expr> Turn: IT<expr> Display values The following CNC objects are provided for this function: • mc_st_valid_r: Validity of the status & turn value (Task COM index group 0x12010<C > Index offset 0x B1) ID • mc_st_status_r: Status value of kinematic 45 (Task COM index group 0x12010<C > Index offset 0x B2) ID • mc_st_turn_r: Turn value of kinematic 45 (Task COM index group 0x12010<C > Index offset 0x B3) ID 188 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 189

Robot kinematics If Status & Turn are not programmed, the target point is determined on the axis angle level using the shortest way strategy. Status & Turn programmed with binary numbers N010 #PTP ON N020 G01 X1100 Y0 Z1400 A0 B90 C0 IS'B010' IT'B000010' F5000 N030 G01 X1200 ;target point is determined by shortest way N040 #PTP OFF Status & Turn programmed with decimal numbers N010 #PTP ON N020 G01 X1000 Y0 Z1400 A0 B90 C0 IS2 IT2 F5000 N030 #PTP OFF N040 G01 X1500 N050 G01 Y1000 N060 G01 X-1000 N070 #PTP ON N080 G01 X-1000 Y-1000 ;target point is determined by shortest way N090 #PTP OFF 3.3.4 Singularities with a six-axis articulated robot kinematic A distinction is made between three types of singularity: 1. Wrist singularity 2. Elbow singularity 3. Shoulder singularity Wrist singularity This occurs when angle A5 (axis B3) is equal to zero. Elbow singularity An elbow singularity occurs when the wrist lo located on a straight line running through the axes B1 and B2. When HD12 = 0, this corresponds to an angle A3 (axis B2) equal to zero. Fig. 140: Elbow singularity Shoulder singularity A shoulder singularity occurs when HD32 = 0 if the wrist is located on the extended C1 axis. When HD32 ≠ 0, the shoulder singularity occurs if the wrist is located on the cylindrical sleeve of radius HD32 about the C1 axis. 3.3.5 Kinematic poses of six-axis articulated robot Pose denotes the position and orientation of the TCP, The six-axis articulated robot kinematic described here (KIN_TYP_45) can achieve a pose with up to eight different joint configurations. TF5240 | Twin CAT 3 CNC Version: 1.33 189 Kinematic transformations
## Page 190

Robot kinematics Pose 1- Status B000 Pose 2- Status B001 Pose 3- Status B010 Pose 4- Status B011 190 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 191

Robot kinematics Pose 5- Status B100 Pose 6- Status B101 Pose 7- Status B110 Pose 8- Status B111 The possible joint configurations are identified by the pose status. When a transformation is active, the robot cannot change its pose status. TF5240 | Twin CAT 3 CNC Version: 1.33 191 Kinematic transformations
## Page 192

Robot kinematics KIN_TYP_96 - Palletising kinematic Kinematic structure The articulated axes are numbered from 1 to 4. Axis 1 rotates about the z axis of the Cartesian coordinate system. The robot is represented with all articulated axes in zero position. Rotation in positive direction corresponds to the mathematically positive direction of rotation in the Cartesian coordinate system. Articulated axes G1, G2, G3 must be configured as linear axes (with limited motion range). Articulated axis G4 must be configured as a modulo axis with a range of -180° to +180°. The transformation may only be used when software limit switches are correctly set. In particular, the movements of axis 2 are dependent on the limit switch of axis 3. NB: Without limit switches, this transformation can damage the robot. Axis configuration in the NC channel Axis identifier X, Y, Z, C (G1, G2, G3, G4) Axis index 0, 1, 2, 3 Kinematic structure Tool axes Workpiece axes NC axes X, Y, Z, C - 192 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 193

Robot kinematics + A1 A3 + A4 + + A2 Z Y X Fig. 141: 4-axis palletising robot Offset data of kinematics HD offset param[i] Description Unit HD1 0 X offset articulated axis G2 1.0 E-4 mm HD2 1 Z offset articulated axis G2 1.0 E-4 mm HD3 2 Length of the first arm (distance between G3 and G2) 1.0 E-4 mm HD4 3 Y offset between G2 and G1. 1.0 E-4 mm HD5 4 Length of second arm (distance between the right-hand joint of 1.0 E-4 mm the second arm and G3) HD6 5 Length of head (distance between G4 and the right-hand joint of 1.0 E-4 mm the second arm) HD7 6 Y offset of tool to G4 1.0 E-4 mm HD8 7 X offset of tool to G4 1.0 E-4 mm HD9 8 Z offset of tool to G4 1.0 E-4 mm TF5240 | Twin CAT 3 CNC Version: 1.33 193 Kinematic transformations
## Page 194

Robot kinematics HD10 9 Z offset between G4 and G3 1.0 E-4 mm Fig. 142: Side view of HD offset data - palletising robot Fig. 143: Top view of HD offset data - palletising robot 194 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 195

Robot kinematics 3.4 KIN_TYP_206 – 5-axis robot on linear unit Kinematic structure The Kinematic Structure consists of a linear unit that carries a five-axis robot. Axis configuration in the NC channel Axis identifier X, Y, Z, A, B, C (A1, A2, A3, A4, A5, A6) Axis index 0, 1, 2, 3, 4, 5 Kinematic structure Tool axes Workpiece axes NC axes X, Y, Z, A, B, C - - A3 + - - + + A4 + A4 A5 - - + - A5 A2 + + - A6 Z + - A1 X Y A6 Fig. 144: 5-axis robot on linear unit Axis configuration The axis configuration below is recommended. Axis name Axis type (P-AXIS-00018) Axis mode (P-AXIS-00015) A1 Linear Linear A2 Rotation Linear A3 Rotation Linear A4 Rotation Modulo, 0° to 360° or Linear A5 Rotation Modulo, 0° to 360° A6 Rotation Modulo, 0° to 360° Software limit switches can be configured for axes with linear axis mode to reduce the risk of collisions, The position of the axes in space is described in the zero position of the machine. A mount point is specified in the Machine Coordinate System for each rotary axis. There is a length and angle offset for each axis. TF5240 | Twin CAT 3 CNC Version: 1.33 195 Kinematic transformations
## Page 196

Robot kinematics Z Y Fig. 145: Example of a zero position Offset data of kinematics HD offset param[i] Description Unit HD1 0 Tool offset in X direction 1.0 E-4 mm HD2 1 Tool offset in Y direction 1.0 E-4 mm HD3 2 Tool offset in Z direction 1.0 E-4 mm HD4 3 Tool rotation about the Z’ axis 1.0 E-4° HD5 4 Tool rotation about the Y’ axis 1.0 E-4° HD6 5 Tool rotation about the X’ axis 1.0 E-4° HD7-HD9 6-8 - HD10 9 Deviation of A1 in XZ plane 1.0 E-4° HD11 10 Deviation of A1 in XY plane 1.0 E-4° HD12 11 Length offset for A1 1.0 E-4 mm HD13 12 X coordinate of mount point of A2 1.0 E-4 mm HD14 13 Y coordinate of reference point of A2 1.0 E-4 mm HD15 14 Z coordinate of reference point of A2 1.0 E-4 mm HD16 15 Deviation of A2 in XZ plane 1.0 E-4° HD17 16 Deviation of A2 in XY plane 1.0 E-4° HD18 17 Angle offset for A2 1.0 E-4° HD19 18 X coordinate of mount point of A3 1.0 E-4 mm HD20 19 Y coordinate of reference point of A3 1.0 E-4 mm 196 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 197

Robot kinematics HD21 20 Z coordinate of reference point of A3 1.0 E-4 mm HD22 21 Deviation of A3 in XZ plane 1.0 E-4° HD23 22 Deviation of A3 in XY plane 1.0 E-4° HD24 23 Angle offset for A3 1.0 E-4° HD25 24 X coordinate of mount point of A4 1.0 E-4 mm HD26 25 Y coordinate of reference point of A4 1.0 E-4 mm HD27 26 Z coordinate of reference point of A4 1.0 E-4 mm HD28 27 Deviation of A4 in XZ plane 1.0 E-4° HD29 28 Deviation of A4 in XY plane 1.0 E-4° HD30 29 Angle offset for A4 1.0 E-4° HD31 30 X coordinate of mount point of A5 1.0 E-4 mm HD32 31 Y coordinate of mount point of A5 1.0 E-4 mm HD33 32 Z coordinate of mount point of A5 1.0 E-4 mm HD34 33 Deviation of A5 in YZ plane 1.0 E-4° HD35 34 Deviation of A5 in XY plane 1.0 E-4° HD36 35 Angle offset for A5 1.0 E-4° HD37 36 X coordinate of mount point of A6 1.0 E-4 mm HD38 37 Y coordinate of mount point of A6 1.0 E-4 mm HD39 38 Z coordinate of mount point of A6 1.0 E-4 mm HD40 39 Deviation of A6 in XZ plane 1.0 E-4° HD41 40 Deviation of A6 in XY plane 1.0 E-4° HD42 41 Angle offset for A6 1.0 E-4° HD43 42 Cardanic angle alpha of A6 axis 1.0 E-4° Tool offset data of the kinematic The parameters HD1 to HD6 are available for a tool flanged onto axis A6. If a tool length is active (`V. G. WZ_AKT. L`.), it is added to `HD2`. TF5240 | Twin CAT 3 CNC Version: 1.33 197 Kinematic transformations
## Page 198

Robot kinematics 3.5 KIN_TYP_208 – 4-axis robot on linear unit Kinematic structure The Kinematic Structure consists of a linear unit that carries a four-axis robot. Axis configuration in the NC channel Axis identifier X, Y, Z, C, A, (A1, A2, A3, A4, A5) Axis index 0, 1, 2, 3, 4 Kinematic structure Tool axes Workpiece axes NC axes X, Y, Z, C, A - - A3 + - - A4 + + + A4 - + - A5 - A2 + A5 Z A1 X Y Fig. 146: 4-axis robot on linear unit Axis configuration The axis configuration below is recommended. Axis name Axis type (P-AXIS-00018) Axis mode (P-AXIS-00015) A1 Linear Linear A2 Rotation Linear A3 Rotation Linear A4 Rotation Linear, modulo range -180° to 180° A5 Rotation Linear, modulo range -180° to 180° Software limit switches can be configured for axes with linear axis mode to reduce the risk of collisions, The position of the axes in space is described in the zero position of the machine. A mount point is specified in the Machine Coordinate System for each rotary axis. There is a length and angle offset for each axis. 198 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 199

Robot kinematics Z Y Fig. 147: Example of a zero position Offset data of kinematics HD offset param[i] Description Unit HD1 0 Tool offset in X direction 1.0 E-4 mm HD2 1 Tool offset in Y direction 1.0 E-4 mm HD3 2 Tool offset in Z direction 1.0 E-4 mm HD4 3 Tool rotation about the Z’ axis 1.0 E-4° HD5 4 Tool rotation about the Y’ axis 1.0 E-4° HD6 5 Tool rotation about the X’ axis 1.0 E-4° HD7-HD9 6-8 - HD10 9 Deviation of A1 in XZ plane 1.0 E-4° HD11 10 Deviation of A1 in XY plane 1.0 E-4° HD12 11 Length offset for A1 1.0 E-4 mm HD13 12 X coordinate of mount point of A2 1.0 E-4 mm HD14 13 Y coordinate of mount point of A2 1.0 E-4 mm HD15 14 Z coordinate of mount point of A2 1.0 E-4 mm HD16 15 Deviation of A2 in XZ plane 1.0 E-4° HD17 16 Deviation of A2 in XY plane 1.0 E-4° HD18 17 Angle offset for A2 1.0 E-4° HD19 18 X coordinate of mount point of A3 1.0 E-4 mm HD20 19 Y coordinate of mount point of A3 1.0 E-4 mm TF5240 | Twin CAT 3 CNC Version: 1.33 199 Kinematic transformations
## Page 200

Robot kinematics HD21 20 Z coordinate of mount point of A3 1.0 E-4 mm HD22 21 Deviation of A3 in XZ plane 1.0 E-4° HD23 22 Deviation of A3 in XY plane 1.0 E-4° HD24 23 Angle offset for A3 1.0 E-4° HD25 24 X coordinate of mount point of A4 1.0 E-4 mm HD26 25 Y coordinate of mount point of A4 1.0 E-4 mm HD27 26 Z coordinate of mount point of A4 1.0 E-4 mm HD28 27 Deviation of A4 in XZ plane 1.0 E-4° HD29 28 Deviation of A4 in XY plane 1.0 E-4° HD30 29 Angle offset for A4 1.0 E-4° HD31 30 X coordinate of mount point of A5 1.0 E-4 mm HD32 31 Y coordinate of mount point of A5 1.0 E-4 mm HD33 32 Z coordinate of mount point of A5 1.0 E-4 mm HD34 33 Deviation of A5 in YZ plane 1.0 E-4° HD35 34 Deviation of A5 in XY plane 1.0 E-4° HD36 35 Angle offset for A5 1.0 E-4° Tool offset data of the kinematic The parameters HD1 to HD6 are available for a tool flanged onto axis A5. If a tool length is active (`V. G. WZ_AKT. L`.), it is added to `HD3`. Use of coordinate systems (#CS command) If a coordinate system (#CS command) is used, the channel parameter P-CHAN-00247 must be set to 1. If P-CHAN-00247 is not set, the #CS command has no effect. 200 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 201

Robot kinematics 3.6 KIN_TYP_213- Five-axis palletising robot The articulated axes are 1,2,3,4,5. Axis 1 rotates about the z axis of the Cartesian coordinate system. The robot is represented in Figure 2 with all articulated axes in zero position. Functionality available as of CNC Build V3.1.3081 or V3.1.3108. Rotation in positive direction corresponds to the mathematically positive direction of rotation in the Cartesian coordinate system. Articulated axes G2, G3, G4 must be configured as linear axes (with a limited range of motion). Articulated axis G5 must be configured as a modulo axis within the range of -180° to +180°. Optionally, articulated axis G1 can be configured as a linear or a modulo axis, provided no limitations need to be considered, e.g. trailing cables. When programming in Cartesian coordinates, the flange must first be aligned paral- lel to the X/Y plane of the base coordinate system (B=0). Only then will programming the C angle result in the expected alignment of the flange/tool. However, if the robot is operated with B ≠ 0, the resulting motion may not correspond to the expec- ted orientation. In this kinematic model, the programmed tool orientation normally relates to the Cartesian base coordinate system of the machine. If coordinate systems (#CS) are used, it may be necessary to configure channel parameter P-CHAN-00247 accordingly, depending on the required response. Axis configuration in the NC channel Axis identifier X, Y, Z, B, C (G1, G2, G3, G4, G5) Axis index 0, 1, 2, 3, 4 Kinematic structure Tool axes Workpiece axes NC axes X, Y, Z, B, C - TF5240 | Twin CAT 3 CNC Version: 1.33 201 Kinematic transformations
## Page 202

Robot kinematics Fig. 148: Side view Fig. 149: Zero position without rotary offsets 202 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 203

Robot kinematics Fig. 150: Flange coordinate system TF5240 | Twin CAT 3 CNC Version: 1.33 203 Kinematic transformations
## Page 204

Robot kinematics Offset data of kinematics HD offset param[i] Description Unit HD1 0 Tool Z offset in flange coordinate system 1.0 E-4 mm HD2 1 Tool X offset in flange coordinate system 1.0 E-4 mm HD3 2 Tool Y offset in flange coordinate system 1.0 E-4 mm HD6 5 Angle of tool rotation about the Z axis 1.0 E-4° HD7 6 Z offset base to G2 1.0 E-4 mm HD8 7 Offset G2 to G3 1.0 E-4 mm HD9 8 X offset G3 to G4 1.0 E-4 mm HD10 9 X offset G4 to G5 1.0 E-4 mm HD11 10 X offset base to G2 1.0 E-4 mm HD12 11 Z offset G4 to G3 1.0 E-4 mm Note: Positive sign; the rotary axis of joint 3 is located in the positive Z direction above the rotary axis of joint 4. HD14 13 Rotary offset for zero position of robot joint axis 2 1.0 E-4° HD15 14 Rotary offset for zero position of robot joint axis 3 1.0 E-4° HD21 20 Rotation direction of joint axis 1: 0 (positive), 1 (negative) [ - ] HD22 21 Rotation direction of joint axis 2: 0 (positive), 1 (negative) [ - ] HD23 22 Rotation direction of joint axis 3: 0 (positive), 1 (negative) [ - ] HD24 23 Rotation direction of joint axis 4: 0 (positive), 1 (negative) [ - ] HD25 24 Rotation direction of joint axis 5: 0 (positive), 1 (negative) [ - ] HD36 35 Rotary offset for zero position of robot joint axis 1 1.0 E-4° HD37 36 Rotary offset for zero position of robot joint axis 4 1.0 E-4° HD38 37 Rotary offset for zero position of robot joint axis 5 1.0 E-4° HD48 47 Z offset G4 to G5. 1.0 E-4 mm Note: Positive sign: Flange is in positive Z direction below G4 204 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 205

Robot kinematics Five-axis palletising robot N010 #KIN ID[213] ; move robot to arbitrary position N020 A1=23 A2=[-90] A3=90 A4=[-11] A5=47 N030 #TRAFO ON ; first move flange parallel to "floor" N040 G00 B0 ; then i.e. do some pick and place ; -> flange stays parallel to "floor" if B does NOT get explicitly programmed N050 F2000 N060 G01 X1000 Y1300 Z700 C0 N070 G01 Z500 N080 G01 X1500 Y1300 Z700 C90 N090 #TRAFO OFF N100 M30 TF5240 | Twin CAT 3 CNC Version: 1.33 205 Kinematic transformations
## Page 206

Classification of transformations 4 Classification of transformations Depending on their characteristics the transformations in the first two chapters can be classified in the following way: 4.1 Transformation type Transforma- Type Number of Number of Special features tion type axes workpiece axes 1 [} 19] RTCP 5 2 [} 23] RTCP 5 3 [} 25] RTCP 4 4 [} 27] RTCP 4 5 [} 29] RTCP 4 6 [} 33] RTCP 4 7 [} 35] RTCP 5 8 [} 38] RTCP 5 9 [} 41] RTCP 5 10 [} 44] RTCP 5 11 [} 46] RTCP 5 12 [} 49] Complete 3 3-axis parallel kinematics with constant orientation 13/14 [} 54] RTCP 3 Face machining (#FACE) 16 [} 57] RTCP 5 17 [} 60] RTCP 5 3 machine axes, 2 auxiliary axes 18 [} 63] RTCP 5 3 machine axes, 2 auxiliary axes 19 [} 65] Complete 5 3-column parallel kinematics, 5 machine axes 21 [} 68] Complete 4 LAMBDA shear kinematics with compensation of rot. C axis, constant orientation, 4 machine axes 22 [} 72] RTCP 5 2 2 axes in workpiece, 3 machine axes 23 [} 74] RTCP 5 25 [} 76] RTCP 5 28 [} 80] RTCP 5 30 [} 83] RTCP 4 33 [} 85] RTCP 5 34 [} 88] RTCP 4 36 [} 171] RTCP 4 SCARA Transforma- Type Number of Number of Special features tion type axes workpiece axes 37 [} 175] Complete 3 Delta robot 45 [} 178] Complete 6 6-axis articulated robot 52 [} 90] RTCP 5 57 [} 92] RTCP 5 Rotary/swivel table 58 [} 96] RTCP 5 Rotary/swivel table 59 [} 100] RTCP 5 Cardanic head 206 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 207

Classification of transformations Transforma- Type Number of Number of Special features tion type axes workpiece axes 60 [} 110] RTCP 5 Cardanic head 61 [} 114] RTCP 5 63 [} 119] RTCP 5 64 [} 124] RTCP 6 70 [} 128] RTCP 5 76 [} 131] Complete 5 Mechanical TCP 80 [} 135] RTCP 5 81 [} 140] RTCP 5 82 [} 145] RTCP 6 85 [} 149] RTCP 2 96 [} 192] Complete 4 4-axis palletising robot 206 [} 195] Complete 5 5-axis robot on linear unit 207 [} 160] RTCP 5 208 [} 198] Complete 4 4-axis robot on linear unit 209 [} 163] RTCP 5 Tripod with rotary/swivel table 213 [} 201] Complete 5 Five-axis palletising robot 4.2 Kinematic type Transformation With Robot Parallel Shear With manual ID rotary table kinematics kinematics kinematics axis 1 [} 19] 1 2 [} 23] 3 [} 25] 4 [} 27] 5 [} 29] 6 [} 33] 7 [} 35] 1 8 [} 38] 1 9 [} 41] 10 [} 44] 11 [} 46] 1 12 [} 49] 1 13/14 [} 54] 16 [} 57] 17 [} 60] 1 18 [} 63] 1 19 [} 65] 1 21 [} 68] 1 22 [} 72] 23 [} 74] 1 25 [} 76] TF5240 | Twin CAT 3 CNC Version: 1.33 207 Kinematic transformations
## Page 208

Classification of transformations Transformation With Robot Parallel Shear With manual ID rotary table kinematics kinematics kinematics axis 28 [} 80] 30 [} 83] 33 [} 85] 34 [} 88] 1 36 [} 171] 1 37 [} 175] 1 45 [} 178] 1 52 [} 90] 1 57 [} 92] 1 58 [} 96] 1 59 [} 100] Transformation With Robot Parallel Shear With manual ID rotary table kinematics kinematics kinematics axis 60 [} 110] 61 [} 114] 1 63 [} 119] 1 64 [} 124] 1 70 [} 128] 76 [} 131] 80 [} 135] 1 81 [} 140] 1 82 [} 145] 1 85 [} 149] 1 96 [} 192] 1 206 [} 195] 1 207 [} 160] 1 208 [} 198] 1 209 [} 163] 1 213 [} 201] 1 4.3 Application Transforma- 5-axis Milling Drilling Sawing Plasma cut- Laser tion ID machining ting cutting 1 [} 19] 1 1 1 2 [} 23] 1 1 1 3 [} 25] 1 1 4 [} 27] 1 1 5 [} 29] 1 1 6 [} 33] 1 1 7 [} 35] 1 1 8 [} 38] 1 208 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 209

Classification of transformations Transforma- 5-axis Milling Drilling Sawing Plasma cut- Laser tion ID machining ting cutting 9 [} 41] 1 1 1 10 [} 44] 1 11 [} 46] 1 1 12 [} 49] 1 1 16 [} 57] 1 1 1 17 [} 60] 1 1 18 [} 63] 1 19 [} 65] 1 1 21 [} 68] 1 22 [} 72] 1 1 1 1 23 [} 74] 1 1 1 25 [} 76] 1 1 1 1 1 28 [} 80] 1 1 1 30 [} 83] 1 1 33 [} 85] 1 1 34 [} 88] 1 1 36 [} 171] 1 1 37 [} 175] 1 1 45 [} 178] 1 1 1 52 [} 90] 1 1 1 57 [} 92] 1 1 1 58 [} 96] 1 1 1 59 [} 100] 1 1 1 Transforma- 5-axis Milling Drilling Sawing Plasma cut- Laser tion ID machining ting cutting 60 [} 110] 1 1 1 61 [} 114] 1 1 1 63 [} 119] 1 1 1 64 [} 124] 1 1 1 70 [} 128] 1 1 1 76 [} 131] 1 80 [} 135] 1 1 1 81 [} 140] 1 1 1 82 [} 145] 1 1 1 85 [} 149] 96 [} 192] 98 [} 151] 1 206 [} 195] 1 1 1 207 [} 160] 1 1 1 208 [} 198] 1 1 1 209 [} 163] 1 1 1 213 [} 201] TF5240 | Twin CAT 3 CNC Version: 1.33 209 Kinematic transformations
## Page 210

Classification of transformations 4.4 Tube machining transformations Transformation ID Description 15 Round tube, lateral surface (3/4-axis) 78 Round tube, projection (3/4-axis) 79 Polygonal tube, profiled tube (3/4-axis) 90 Round tube, lateral surface (5/6-axis) 93 Polygonal tube, profiled tube (5/6-axis) For more information on tube machining, go to the section TF5290 | TC3 CNC Cutting Plus on our product page https://www.beckhoff.de/tf5290 You will find function descriptions on these transformations in the Beckhoff Information System Twin CAT 3 > TFxxxx | TC3 Functions > TF5xxx - Motion > TF52xx - TC3 CNC > Tube machining https://infosys.beckhoff.de/content/1031/tf5290_tube_processing/index.html 210 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 211

Definition of terms 5 Definition of terms General: ID Identifier; general identifier MCS Machine coordinate system MZP Machine zero point BT Backward transformation SRP Slide reference point (tool slide reference point) TCP Tool centre point; centre point of milling cutter Type Kinematic structure with specific features FT Forward transformation WCS Workpiece coordinate system Other abbreviations: HD Kinematic offset value (head distance) TF5240 | Twin CAT 3 CNC Version: 1.33 211 Kinematic transformations
## Page 212

Support and Service 6 Support and Service Beckhoff and their partners around the world offer comprehensive support and service, making available fast and competent assistance with all questions related to Beckhoff products and system solutions. Download finder Our download finder contains all the files that we offer you for downloading. You will find application reports, technical documentation, technical drawings, configuration files and much more. The downloads are available in various formats. Beckhoff's branch offices and representatives Please contact your Beckhoff branch office or representative for local support and service on Beckhoff products! The addresses of Beckhoff's branch offices and representatives round the world can be found on our internet page: www.beckhoff.com You will also find further documentation for Beckhoff components there. Beckhoff Support Support offers you comprehensive technical assistance, helping you not only with the application of individual Beckhoff products, but also with other, wide-ranging services: • support • design, programming and commissioning of complex automation systems • and extensive training program for Beckhoff system components Hotline: +49 5246 963-157 e-mail: support@beckhoff.com Beckhoff Service The Beckhoff Service Center supports you in all matters of after-sales service: • on-site service • repair service • spare parts service • hotline service Hotline: +49 5246 963-460 e-mail: service@beckhoff.com Beckhoff Headquarters Beckhoff Automation Gmb H & Co. KG Huelshorstweg 20 33415 Verl Germany Phone: +49 5246 963-0 e-mail: info@beckhoff.com web: www.beckhoff.com 212 Version: 1.33 TF5240 | Twin CAT 3 CNC Kinematic transformations
## Page 214

More Information: www.beckhoff.com/TF5240 Beckhoff Automation Gmb H & Co. KG Hülshorstweg 20 33415 Verl Germany Phone: +49 5246 9630 info@beckhoff.com www.beckhoff.com
