---
title: "PLC_Lib_PJLink_EN"
product: "PLC"
category: "PLC"
tags: ["LIB", "PJL", "PLC"]
language: "EN"
document_type: "Library"
version: "1.3.3"
source_pdf: "https://download.beckhoff.com/download/Document/automation/twincat3/PLC_Lib_PJLink_EN.pdf"
release_date: "2025-04-24"
---
AS2000 Manual | EN Twin CAT 3 Blindtext Blindtext Blindtext PLC Library: PJLink 2025-04-24 | Version: 1.3.3

## Page 3

Table of contents Table of contents 1 Foreword.................................................................................................................................................... 5 1.1 Notes on the documentation............................................................................................................. 5 1.2 For your safety.................................................................................................................................. 6 1.3 Notes on information security............................................................................................................ 7 2 Overview.................................................................................................................................................... 8 3 Programming........................................................................................................................................... 10 3.1 FB_PJLink....................................................................................................................................... 10 3.1.1 Methods........................................................................................................................... 11 3.2 Structs, Enumerations..................................................................................................................... 13 3.2.1 ST_PJLink_Projector_Status........................................................................................... 13 3.2.2 ST_PJLink_AVMT_Status................................................................................................ 14 3.2.3 ST_PJLink_CLSS_Status................................................................................................ 14 3.2.4 ST_PJLink_ERST_Errors................................................................................................ 14 3.2.5 ST_PJLink_ERST_Status................................................................................................ 14 3.2.6 ST_PJLink_FILT_Status.................................................................................................. 14 3.2.7 ST_PJLink_FREZ_Status................................................................................................ 14 3.2.8 ST_PJLink_INF1_Status.................................................................................................. 15 3.2.9 ST_PJLink_INF2_Status.................................................................................................. 15 3.2.10 ST_PJLink_INFO_Status................................................................................................. 15 3.2.11 ST_PJLink_INNM_Status................................................................................................ 15 3.2.12 ST_PJLink_INPT_Status................................................................................................. 15 3.2.13 ST_PJLink_INST_Status................................................................................................. 15 3.2.14 ST_PJLink_IRES_Status................................................................................................. 16 3.2.15 ST_PJLink_MVOL_Status............................................................................................... 16 3.2.16 ST_PJLink_LAMP_Status................................................................................................ 16 3.2.17 ST_PJLink_Lamp_int....................................................................................................... 16 3.2.18 ST_PJLink_NAME_Status............................................................................................... 16 3.2.19 ST_PJLink_POWR_Status.............................................................................................. 16 3.2.20 ST_PJLink_RFIL_Status.................................................................................................. 17 3.2.21 ST_PJLink_RLMP_Status................................................................................................ 17 3.2.22 ST_PJLink_RRES_Status................................................................................................ 17 3.2.23 ST_PJLink_SNUM_Status............................................................................................... 17 3.2.24 ST_PJLink_SVER_Status................................................................................................ 17 3.2.25 ST_PJLink_SVOL_Status................................................................................................ 17 3.2.26 E_PJLink_Input Type........................................................................................................ 18 3.2.27 E_PJLink_Mute Type........................................................................................................ 18 3.2.28 E_PJLink_Steps............................................................................................................... 18 3.2.29 E_PJLink_Update Type.................................................................................................... 18 3.2.30 PJLink Error Codes............................................................................................................ 19 4 Example................................................................................................................................................... 20 Twin CAT 3 Version: 1.3.3 3

## Page 4

Table of contents 4 Version: 1.3.3 Twin CAT 3

## Page 5

Foreword 1 Foreword 1.1 Notes on the documentation This description is intended exclusively for trained specialists in control and automation technology who are familiar with the applicable national standards. The documentation and the following notes and explanations must be complied with when installing and commissioning the components. The trained specialists must always use the current valid documentation. The trained specialists must ensure that the application and use of the products described is in line with all safety requirements, including all relevant laws, regulations, guidelines, and standards. Disclaimer The documentation has been compiled with care. The products described are, however, constantly under development. We reserve the right to revise and change the documentation at any time and without notice. Claims to modify products that have already been supplied may not be made on the basis of the data, diagrams, and descriptions in this documentation. Trademarks Beckhoff®, Twin CAT®, Twin CAT/BSD®, TC/BSD®, Ether CAT®, Ether CAT G®, Ether CAT G10®, Ether CAT P®, Safety over Ether CAT®, Twin SAFE®, XFC®, XTS®, and XPlanar® are registered and licensed trademarks of Beckhoff Automation Gmb H. If third parties make use of the designations or trademarks contained in this publication for their own purposes, this could infringe upon the rights of the owners of the said designations. Ether CAT® is a registered trademark and patented technology, licensed by Beckhoff Automation Gmb H, Germany Copyright © Beckhoff Automation Gmb H & Co. KG, Germany. The distribution and reproduction of this document, as well as the use and communication of its contents without express authorization, are prohibited. Offenders will be held liable for the payment of damages. All rights reserved in the event that a patent, utility model, or design are registered. Third-party trademarks Trademarks of third parties may be used in this documentation. You can find the trademark notices here: https://www.beckhoff.com/trademarks. Twin CAT 3 Version: 1.3.3 5

## Page 6

Foreword 1.2 For your safety Safety regulations Read the following explanations for your safety. Always observe and follow product-specific safety instructions, which you may find at the appropriate places in this document. Exclusion of liability All the components are supplied in particular hardware and software configurations which are appropriate for the application. Modifications to hardware or software configurations other than those described in the documentation are not permitted, and nullify the liability of Beckhoff Automation Gmb H & Co. KG. Personnel qualification This description is only intended for trained specialists in control, automation, and drive technology who are familiar with the applicable national standards. Signal words The signal words used in the documentation are classified below. In order to prevent injury and damage to persons and property, read and follow the safety and warning notices. Personal injury warnings DANGER Hazard with high risk of death or serious injury. WARNING Hazard with medium risk of death or serious injury. CAUTION There is a low-risk hazard that could result in medium or minor injury. Warning of damage to property or environment NOTICE The environment, equipment, or data may be damaged. Information on handling the product This information includes, for example: recommendations for action, assistance or further information on the product. 6 Version: 1.3.3 Twin CAT 3

## Page 7

Foreword 1.3 Notes on information security The products of Beckhoff Automation Gmb H & Co. KG (Beckhoff), insofar as they can be accessed online, are equipped with security functions that support the secure operation of plants, systems, machines and networks. Despite the security functions, the creation, implementation and constant updating of a holistic security concept for the operation are necessary to protect the respective plant, system, machine and networks against cyber threats. The products sold by Beckhoff are only part of the overall security concept. The customer is responsible for preventing unauthorized access by third parties to its equipment, systems, machines and networks. The latter should be connected to the corporate network or the Internet only if appropriate protective measures have been set up. In addition, the recommendations from Beckhoff regarding appropriate protective measures should be observed. Further information regarding information security and industrial security can be found in our https://www.beckhoff.com/secguide. Beckhoff products and solutions undergo continuous further development. This also applies to security functions. In light of this continuous further development, Beckhoff expressly recommends that the products are kept up to date at all times and that updates are installed for the products once they have been made available. Using outdated or unsupported product versions can increase the risk of cyber threats. To stay informed about information security for Beckhoff products, subscribe to the RSS feed at https:// www.beckhoff.com/secinfo. Twin CAT 3 Version: 1.3.3 7

## Page 8

Overview 2 Overview PJLink is a communication protocol, based on TCP/IP communication, which is used to enable monitoring and control of projectors over the network. It was created by the JBMIA (Japan Business Machine and Information System Industries Association). PJLink is a standard that is not limited to a projector manufacturer or a specific projector model. Thus, PJLink enables central control of projectors from different manufacturers. It includes basic commands and status queries that are important for control and monitoring. The implementation of PJLink covers the command scope of PJLink classes 1 and 2 of the Control Protocol. The Security Authorization function is also supported. The "Search Protocol" and the "Status Notification Protocol" (both based on UDP communication and part of the Class 2 specification) are not included in the implementation. Commands: • Power control, • input changeover, • audio mute and blanking control. • freeze control,* • speaker volume control,* • microphone volume control.* Inquiries: • Power state, • available media input types, • input changeover state, • audio mute and blanking state, • error state • lamp operation hours, • projector name, model name, vendor name, PJLink class, • serial number, software version, name media input,* • current resolution, recommended resolution,* • filter operation hours, serial number filter, serial number lamp(s),* • freeze state.* *Commands and inquiries are only supported by PJLink class 2 projectors. Every PJLink-message will be responded by the addressed projector. 8 Version: 1.3.3 Twin CAT 3

## Page 9

Overview You can find further information on our website following: PC-based Control for Stage- and Show Technology The PJLink-specifications and information on PJLink are located at the website: http://pjlink.jbmia.or.jp/english/. PJLink trademark and logo are trademarks applied for registration or are already registered in Japan, the United States of America and other countries and areas. Requirements: Technical data Request Twin CAT version Twin CAT 3.1 Build 4022.20 or higher Visual Studio version Visual Studio 2013 or higher Required Twin CAT licenses TF6310 license Twin CAT 3 Version: 1.3.3 9

## Page 10

Programming 3 Programming 3.1 FB_PJLink This function block enables communication to a projector via TCP/IP and can be used for control and monitoring. Communication to a projector is established automatically by the function block. Any information received from the controller is evaluated and displayed in the structure ST_PJLink_Projector_Status (output parameter st Proj Status). In addition, there is an automatic status update function that is executed periodically. Information, warnings and errors are displayed using the TC3 Event Logger. Requirements for FB_PJLink: • TF6310 „Twin CAT TCP/IP“, • Tc2_Tcp Ip (Communication) library to be linked in, • Twin CAT v3.1.0 engineering environment or higher. Important: Obey Projector Settings Following settings for the projector need to be set up: • Activate the PJLink function, • deactivate the PJLink-Security function (optional), • activate network functionality, • deactivate the ECO function (disabling of network functionality in standby mode). Sending of commands and inquiries to the projector is controlled by calling methods and setting corresponding input parameters: • Power (change the power status of the projector (Switch on/off)), • Mute (change mute status of the projector (Switch video, audio, video/audio mute on/off)), • Input (change media input channel of the projector (RGB, video, digital, storage, network, internal)), • Update (send specific status inquiries), • Freeze (change the freeze status of the projector (activate/deactivate freeze)), • Volume (change the volume of the projectors speakers), • Mic Volume (change the volume of the projectors microphone). Licence For using FB_PJLink a TC1200 “TC3 PLC” licence and a TF6310 “Twin CAT TCP/IP” licence are required. VAR_INPUT b Enable : BOOL; s Projector : T_IPv4Addr; s Server Net ID : T_Ams Net Id; s Security PW : STRING(32); b Keep Alive Socket : BOOL := FALSE; t Status Update Time : TIME := T#5S; e Trace Level : Tc Event Severity; b Enable: Setting this parameter TRUE activates the function module. Communication to a projector is established. If FALSE is set, communication is terminated and the function block is deactivated. 10 Version: 1.3.3 Twin CAT 3

## Page 11

Programming s Projector: The local IP address (IPv4) of the TCP/IP client/server socket as a string (e.g. '192.168.0.5'). An empty string can also be specified for the default network adapter. s Server Net ID: String containing the AMS network address of the Twin CAT TCP/IP Connection Server. An empty string can also be specified for the local computer (default). s Security PW: Password for the Security Authorization function (optional). The identical (case sensitive) password must be entered in the projector settings. b Keep Alive Socket: When TRUE, activates a Keep Alive mode for communication with the projector. Only one socket is opened, which is kept permanently open. In the event of an error, the function block remains in an error mode. FALSE (recommended) opens a new socket before sending a command and then closes it again. In the event of an error, a new connection process is automatically triggered. t Status Update Time: Update interval of the status information request from the projector. (Default=5s; higher update time t Status Update Time reduces data traffic.) e Trace Level: Determines the event types that are sent via the Event Logger. Events of greater or equal importance than the value at the input parameter are sent. (Example: Value = Warning → Sending warnings, errors and criticals; value=Warning → Among other things, PJLink messages are logged.) Type of variable: Tc Event Severity VAR_OUTPUT b Busy : BOOL; e Step : E_PJLink_step; b Error : BOOL; ip Result Message : I_Tc Message; n Err ID : UDINT; s Err Block : STRING(20); st Proj Status : ST_PJLink_Projector_Status; b Busy: This output is set as long as the connection to the socket is established. e Step: This output parameter specifies the current step in the FB_PJLink State machine. b Error: If an error occurs, this output is set. (e.g.: connection to the socket is not possible). ip Result Message: This interface is used to send events via the TC3 Event Logger. n Err ID: This parameter returns the Twin CAT TCP/IP Connection Server error number when the b Error output is set. s Err Block: Provides further information on the error that occurred. (Causing function block) st Proj Status: Structure with the projector status information. (After sending a command, the response of the projector is evaluated and output in st Proj Status.) Example: Command = "%1POWR 1$R" → Projector response = "%1POWR=ERR3" → Proj Status. POWR. Err_Unavailable Time = TRUE. 3.1.1 Methods Power Use this method to send power commands to a projector. METHOD Power :hresult VAR_INPUT b On : BOOL; b Execute : BOOL; END_VAR b On: If the method is called and this parameter is TRUE, a rising edge at b Execute will evoke sending a power-on command. If the method is called and this parameter is FALSE, a rising edge at b Execute will evoke sending a power-off command. b Execute: Rising edge evokes sending a command at method call. Twin CAT 3 Version: 1.3.3 11

## Page 12

Programming The projector sends a confirmation if the command can be successfully executed. The confirmation sets the output parameter st Proj Status.st POWR.b Successful to TRUE for the duration of one cycle. Mute Mit dieser Methode können einem Projektor Mute-Befehle gesendet werden. METHOD Mute: hresult VAR_INPUT e Mute Type : E_PJLINK_Mute Type; b Mute On : BOOL; b Execute : BOOL; END_VAR e Mute Type: Select the required mute type (audio, video or audio/video). b Mute On: Setting this parameter to TRUE causes a mute switch-on command. If the parameter is FALSE, the command becomes a mute switch-off command. b Execute: Rising edge evokes sending a command at method call. The projector sends a confirmation if the command can be successfully executed. The confirmation sets the output parameter st Proj Status.st AVMT.b Successful to TRUE for the duration of one cycle. Input Use this method to send a media input switching command to a projector. METHOD Input :hresult VAR_INPUT e Input Type : E_PJLINK_Input Type; n Input Channel : STRING(1); b Execute : BOOL; END_VAR e Input Type: Select the required input type (RGB, video, digital, storage, network, internal). s Input Channel: Selection of the respective channel. (Value: 1-9, A-Z. See device manual.) b Execute: Rising edge evokes sending a command at method call. The projector sends a confirmation if the command can be successfully executed. The confirmation sets the output parameter st Proj Status.st INPT.b Successful to TRUE for the duration of one cycle.. Update Use this method to send status requests to a projector. METHOD Update :hresult VAR_INPUT e Update Type : E_PJLINK_Update Type; b Execute : BOOL; END_VAR e Update Type: Select the required status request. b Execute: Rising edge evokes sending of a command at method call. Responses of the projector will be displayed in the output parameter st Proj Status. Freeze Use this method to send a projector the command to switch the freezing status. METHOD Freeze :hresult VAR_INPUT b Freeze : BOOL; b Execute : BOOL; END_VAR b Freeze: If this parameter is TRUE when calling the method, the freeze function is activated on the projector. Sending the command with the parameter value FALSE deactivates the freeze function. 12 Version: 1.3.3 Twin CAT 3

## Page 13

Programming b Execute: Rising edge evokes sending a command at method call. The projector sends a confirmation if the command can be successfully executed. The confirmation sets the output parameter st Proj Status.st FREZ.b Successful to TRUE for the duration of one cycle. Volume Use this method to change the volume of the projector's speakers. METHOD Volume :hresult VAR_INPUT b Increase :BOOL; b Execute :BOOL; END_VAR b Increase: If this parameter is TRUE when calling the method, a command to increase the volume will be sent. Sending the command with the parameter value FALSE will decrease the volume. b Execute: Rising edge evokes sending a command at method call. The projector sends a confirmation if the command can be successfully executed. The confirmation sets the output parameter st Proj Status.st SVOL.b Successful to TRUE for the duration of one cycle. This also happens if the maximum/minimum volume value has already been reached and another command is sent. Mic Volume Use this method to change the volume of the projector's microphone. METHOD Mic Volume :hresult VAR_INPUT b Increase : BOOL; b Execute : BOOL; END_VAR b Increase: If this parameter is TRUE when calling the method, a command to increase the volume will be sent. Sending the command with the parameter value FALSE will decrease the volume. b Execute: Rising edge evokes sending a command at method call. The projector sends a confirmation if the command can be successfully executed. The confirmation sets the output parameter st Proj Status.st MVOL.b Successful to TRUE for the duration of one cycle. This also happens if the maximum/minimum volume value has already been reached and another command is sent. 3.2 Structs, Enumerations 3.2.1 ST_PJLink_Projector_Status TYPE ST_PJLink_Projector_Status STRUCT st AVMT : ST_PJLink_AVMT_Status; //Struct with information about the AV-mute status. st CLSS : ST_PJLink_CLSS_Status; //Struct with information about the PJLink-class status. st ERST : ST_PJLink_ERST_Status; //Struct with information about the error status. st INF1 : ST_PJLink_INF1_Status; //Struct with information about the manufacturer. st INF2 : ST_PJLink_INF2_Status; //Struct with information about the product. st INFO : ST_PJLink_INFO_Status; //Struct with further information about the projector. st INPT : ST_PJLink_INPT_Status; //Struct with information about the current media input. st INST : ST_PJLink_INST_Status; //Struct with information about all available media inputs. st LAMP : ST_PJLink_LAMP_Status; //Struct with information about the lamp status. st NAME : ST_PJLink_NAME_Status; //Struct with information about the projector name. st POWR : ST_PJLink_POWR_Status; //Struct with information about the Power status. st SNUM : ST_PJLink2_SNUM_Status; //Struct with information about the Serialnumber. st SVER : ST_PJLink2_SVER_Status; //Struct with information about the Software Version. st INNM : ST_PJLink2_INNM_Status; //Struct with information about the name of Input Terminal. st IRES : ST_PJLink2_IRES_Status; //Struct with information about the Input Resolution. st RRES : ST_PJLink2_RRES_Status; //Struct with information about the recommended resolution. st FILT : ST_PJLink2_FILT_Status; //Struct with information about the Filter usage time. st RLMP : ST_PJLink2_RLMP_Status; //Struct with information about the lamp part number. st RFIL : ST_PJLink2_RFIL_Status; //Struct with information about the filter part number. st SVOL : ST_PJLink2_SVOL_Status; //Struct with information about the Speaker Volume. st MVOL : ST_PJLink2_MVOL_Status; //Struct with information about the Mic Volume. Twin CAT 3 Version: 1.3.3 13

## Page 14

Programming st FREZ : ST_PJLink2_FREZ_Status; //Struct with information about the freeze status. END_STRUCT END_TYPE This structure is used to bundle all the information that are received from the projector (output parameter: st Proj Status). 3.2.2 ST_PJLink_AVMT_Status TYPE ST_PJLink_AVMT_Status STRUCT b Successful : BOOL; (* TRUE for 1 Cycle if command is successful. *) b Video Muted : BOOL; (* Current state of Videomute. *) b Audio Muted : BOOL; (* Current state of Audiomute. *) b Err_Out Of Parameter : BOOL; (* Error invalid parameter value. *) b Err_Unavailable Time : BOOL; (* Wrong time for projector to handle command. *) b Err_Proj Failure : BOOL; (* Projector/Display failure. *) END_STRUCT END_TYPE 3.2.3 ST_PJLink_CLSS_Status TYPE ST_PJLink_CLSS_Status STRUCT n Class : BYTE; (* PJLink Class 1/2 *) b Class Higher2 : BOOL; (* PJLink Class higher than 2 *) b Err_Unavailable Time : BOOL; (* Wrong time for projector to handle command. *) b Err_Proj Failure : BOOL; (* Projector/Display failure. *) END_STRUCT END_TYPE 3.2.4 ST_PJLink_ERST_Errors TYPE ST_PJLink_ERST_Errors STRUCT b No Error : BOOL; b Warning : BOOL; b Error : BOOL; END_STRUCT END_TYPE 3.2.5 ST_PJLink_ERST_Status TYPE ST_PJLink_ERST_Status STRUCT st Fan : ST_PJLink_ERST_Errors; st Lamp : ST_PJLink_ERST_Errors; st Temperature : ST_PJLink_ERST_Errors; st Cover : ST_PJLink_ERST_Errors; st Filter : ST_PJLink_ERST_Errors; st Other : ST_PJLink_ERST_Errors; b Err_Unavailable Time : BOOL; (* Wrong time for projector to handle command. *) b Err_Proj Failure : BOOL; (* Projector/Display failure. *) END_STRUCT END_TYPE 3.2.6 ST_PJLink_FILT_Status TYPE ST_PJLink2_FILT_Status STRUCT n Filter Usage Time : UDINT; (* Filter usage Time in Hours. *) b Err_No Filter : BOOL; (* No Filter. *) b Err_Unavailable Time : BOOL; (* Wrong time for projector to handle command. *) b Err_Proj Failure : BOOL; (* Projector/Display failure. *) END_STRUCT END_TYPE 3.2.7 ST_PJLink_FREZ_Status TYPE ST_PJLink2_FREZ_Status STRUCT b Successful : BOOL; (* TRUE for 1 Cycle if command is successful. *) 14 Version: 1.3.3 Twin CAT 3

## Page 15

Programming b Freeze Status : BOOL; (* Freeze status 1--> Freeze ON 0 --> Freeze OFF. *) b Err_Not Supported : BOOL; (* Freeze is not supported by projector. *) b Err_Out Of Parameter : BOOL; (* Invalid Parameter. *) b Err_Unavailable Time : BOOL; (* Wrong time for projector to handle command. *) b Err_Proj Failure : BOOL; (* Projector/Display failure. *) END_STRUCT END_TYPE 3.2.8 ST_PJLink_INF1_Status TYPE ST_PJLink_INF1_Status STRUCT s Manuf Name : String; (* Manufacturer Name. *) b Err_Unavailable Time : BOOL; (* Wrong time for projector to handle command. *) b Err_Proj Failure : BOOL; (* Projector/Display failure. *) END_STRUCT END_TYPE 3.2.9 ST_PJLink_INF2_Status TYPE ST_PJLink_INF2_Status STRUCT s Prod Name : STRING; (* Product Name. *) b Err_Unavailable Time : BOOL; (* Wrong time for projector to handle command. *) b Err_Proj Failure : BOOL; (* Projector/Display failure. *) END_STRUCT END_TYPE 3.2.10 ST_PJLink_INFO_Status TYPE ST_PJLink_INFO_Status STRUCT s Additional Info : String; (* Additional Info. *) b Err_Unavailable Time : BOOL; (* Wrong time for projector to handle command. *) b Err_Proj Failure : BOOL; (* Projector/Display failure. *) END_STRUCT END_TYPE 3.2.11 ST_PJLink_INNM_Status TYPE ST_PJLink2_INNM_Status STRUCT s Input Terminal Name : STRING(128); (* Name of Input Terminal. *) b Err_Out Of Parameter : BOOL; (* Invalid Parameter. *) b Err_Unavailable Time : BOOL; (* Wrong time for projector to handle command. *) b Err_Proj Failure : BOOL; (* Projector/Display failure. *) END_STRUCT END_TYPE 3.2.12 ST_PJLink_INPT_Status TYPE ST_PJLink_INPT_Status STRUCT b Successful : BOOL; (* TRUE for 1 Cycle if command is successful. *) s Video_Channel : STRING(1); (* Number of current Video Channel. *) s Digital_Channel : STRING(1); (* Number of current Digital Channel. *) s Storage_Channel : STRING(1); (* Number of current Storage Channel. *) s Network_Channel : STRING(1); (* Number of current Network Channel. *) s Internal_Channel : STRING(1); (* Number of current Internal Channel. *) b Err_Non Exist Inpt Src : BOOL; (* Input does not Exist. *) b Err_Unavailable Time : BOOL; (* Wrong time for projector to handle command. *) b Err_Proj Failure : BOOL; (* Projector/Display failure. *) END_STRUCT END_TYPE 3.2.13 ST_PJLink_INST_Status TYPE ST_PJLink_INST_Status STRUCT n RGB_Channel : BYTE; (* Number of available RGB Channels. *) n Video_Channel : BYTE; (* Number of available Video Channels. *) Twin CAT 3 Version: 1.3.3 15

## Page 16

Programming n Digital_Channel : BYTE; (* Number of available Digital Channels. *) n Storage_Channel : BYTE; (* Number of available Storage Channels. *) n Network_Channel : BYTE; (* Number of available Network Channels. *) n Internal_Channel : BYTE; (* Number of available Internal Channels. *) b Err_Unavailable Time : BOOL; (* Wrong time for projector to handle command. *) b Err_Proj Failure : BOOL; (* Projector/Display failure. *) END_STRUCT END_TYPE 3.2.14 ST_PJLink_IRES_Status TYPE ST_PJLink2_IRES_Status STRUCT n Horizontal Res : UINT; (* Current Horizontal Resolution. *) n Vertical Res : UINT; (* Current Vertical Resolution. *) b Err_Unavailable Time : BOOL; (* Wrong time for projector to handle command. *) b Err_Proj Failure : BOOL; (* Projector/Display failure. *) END_STRUCT END_TYPE 3.2.15 ST_PJLink_MVOL_Status TYPE ST_PJLink2_MVOL_Status STRUCT b Successful : BOOL; (* True for 1 Cycle if command is successful. *) b Err_Mic Not Installed : BOOL; (* No Mic Installed. *) b Err_Out Of Parameter : BOOL; (* Invalid Parameter. *) b Err_Unavailable Time : BOOL; (* Wrong time for projector to handle command. *) b Err_Proj Failure : BOOL; (* Projector/Display failure. *) END_STRUCT END_TYPE 3.2.16 ST_PJLink_LAMP_Status TYPE ST_PJLink_LAMP_Status STRUCT ast Lamps : ARRAY [0.. GVL_PJLink.by Max Lamps-1] OF ST_PJLink_Lamp_int; b Err_Unavailable Time : BOOL; //wrong time for projector to handle command b Err_Proj Failure : BOOL; //Projector/Display failure END_STRUCT END_TYPE 3.2.17 ST_PJLink_Lamp_int TYPE ST_PJLink_LAMP_int STRUCT n Lamp_Lighting Time : UDINT;//Hours of Lamp Lighting Time b Lamp_On : BOOL; //Lamp Status on/off END_STRUCT END_TYPE 3.2.18 ST_PJLink_NAME_Status TYPE ST_PJLink_NAME_Status STRUCT s Proj Name : String;(* Projector name. *) b Err_Unavailable Time : BOOL; (* Wrong time for projector to handle command. *) b Err_Proj Failure : BOOL; (* Projector/Display failure. *) END_STRUCT END_TYPE 3.2.19 ST_PJLink_POWR_Status TYPE ST_PJLink_POWR_Status STRUCT b Successful : BOOL; (* TRUE for 1 Cycle if command is successful. *) b On : BOOL; (* Projector is on. *) b Off : BOOL; (* Projector is off. *) b Cooling : BOOL; (* Projector is cooling. *) b Warmup : BOOL; (* Projector is starting. *) b Err_Unavailable Time : BOOL; (* Wrong time for projector to handle command. *) 16 Version: 1.3.3 Twin CAT 3

## Page 17

Programming b Err_Proj Failure : BOOL; (* Projector/Display failure. *) END_STRUCT END_TYPE 3.2.20 ST_PJLink_RFIL_Status TYPE ST_PJLink2_RFIL_Status STRUCT s Filter Model Number : STRING(128); (* Filter replacement model number. *) b Err_Unavailable Time : BOOL; (* Wrong time for projector to handle command. *) b Err_Proj Failure : BOOL; (* Projector/Display failure. *) END_STRUCT END_TYPE 3.2.21 ST_PJLink_RLMP_Status TYPE ST_PJLink2_RLMP_Status STRUCT s Lamp Model Number : STRING(128); (* Lamp Replacement model number. *) b Err_Unavailable Time : BOOL; (* Wrong time for projector to handle command. *) b Err_Proj Failure : BOOL; (* Projector/Display failure. *) END_STRUCT END_TYPE 3.2.22 ST_PJLink_RRES_Status TYPE ST_PJLink2_RRES_Status STRUCT n Horizontal Res : UINT; (* Recommended Horizontal Resolution. *) n Vertical Res : UINT; (* Recommended Vertical Resolution. *) b Err_Unavailable Time : BOOL; (* Wrong time for projector to handle command. *) b Err_Proj Failure : BOOL; (* Projector/Display failure. *) END_STRUCT END_TYPE 3.2.23 ST_PJLink_SNUM_Status TYPE ST_PJLink2_SNUM_Status STRUCT s Serial Number : STRING (32); (* Serial Number of Projector. *) b Err_Unavailable Time : BOOL; (* Wrong time for projector to handle command. *) b Err_Proj Failure : BOOL; (* Projector/Display failure. *) END_STRUCT END_TYPE 3.2.24 ST_PJLink_SVER_Status TYPE ST_PJLink2_SVER_Status STRUCT s Software Version : STRING (32); (* Serial Number of Projectors Prod Name. *) b Err_Unavailable Time : BOOL; (* Wrong time for projector to handle command. *) b Err_Proj Failure : BOOL; (* Projector/Display failure. *) END_STRUCT END_TYPE 3.2.25 ST_PJLink_SVOL_Status TYPE ST_PJLink2_SVOL_Status STRUCT b Successful : BOOL; (* True for 1 Cycle if command is successful. *) b Err_Speaker Not Installed : BOOL; (* No Speaker Installed. *) b Err_Out Of Parameter : BOOL; (* Invalid Parameter. *) b Err_Unavailable Time : BOOL; (* Wrong time for projector to handle command. *) b Err_Proj Failure : BOOL; (* Projector/Display failure. *) END_STRUCT END_TYPE Twin CAT 3 Version: 1.3.3 17

## Page 18

Programming 3.2.26 E_PJLink_Input Type TYPE E_PJLink_Input Type : ( RGB, (* RGB Input *) Video, (* Video Input *) Digital, (* Digital Input *) Storage, (* Storage Input *) Network, (* Network Input *) _Internal (* Internal Input, only Class 2 *) ); END_TYPE 3.2.27 E_PJLink_Mute Type TYPE E_PJLink_Mute Type : ( Audio, (* Audio Mute *) Video, (* Video Mute *) Audio Video (* Audio/Video Mute *) ); END_TYPE 3.2.28 E_PJLink_Steps TYPE E_PJLink_Step : ( Init , //init-step Socket Connect , //Connect to Socket - init Socket Connecting , //Connect to Socket - connecting Listen For Start , //PJLink communication - Listen init Listening For Start , //PJLink communication - Listening PJLink Send For Authorization , //PJLink communication - Start Sending Authorization Message to Projector PJLink Sending For Authorization , //PJLink communication - Sending Authorization Message to Projector PJLink Receive For Authorization , //PJLink communication - Listen for Authorization-Response of Projector PJLink Receiving For Authorization, //PJLink communication - Receiving Authorization-Response of Projector PJLink Connected Idle , //PJLink communication - Idle Mode (wait for commands to Send) PJLink Send , //PJLink communication - Send Command PJLink Sending , //PJLink communication - Sending Command PJLink Receive , //PJLink communication - Listen for Response of Projector PJLink Receiving , //PJLink communication - Receiving Response of Projector PJLink Received , //PJLink communication - Response Received --> Analyse Response Socket Close , //Socket close - init Socket Closing , //Socket close - closing Socket Closed , //Socket close - Closed Socket Connect Err , //Connect to Socket - Error Socket Send Err , //PJLink communication - Send Error Socket Close Err //Socket close - Error ); END_TYPE 3.2.29 E_PJLink_Update Type TYPE E_PJLink_Update Type : ( Status Update , (* Update all status. *) Power , (* Update Power status. *) Input , (* Update Input status. *) Muting , (* Update Muting status. *) Lamp , (* Update Lamp status. *) Error States , (* Update Error States. *) Input List , (* Update the Input List. *) Name , (* Update projector name. *) Manufacturer , (* Update manufacturer. *) Product , (* Update Product information. *) Info , (* Update further information. *) Class Information , (* Update PJLink-Class information. *) //Class 2 Serial Number , (* Update Serialnumber. *) Software Version , (* Update Software version. *) Input Terminal , (* Update Name of Input Terminal. *) 18 Version: 1.3.3 Twin CAT 3

## Page 19

Programming Input Resolution , (* Update Input Resolution. *) Recommended Resolution , (* Update recommended Resolution. *) Filter , (* Update Filter usage time. *) Lamp Part Number , (* Update Lamp part number. *) Filter Part Number , (* Update Filter part number. *) Freeze (* Update Freeze status. *) ); END_TYPE 3.2.30 PJLink Error Codes PJLink Error Codes Value (hex) Value (dec) Description 0x8006 32774 PJLink-Session-Timeout (30 secs in Idle Mode) 0x8007 32775 Timeout Statemachine 0x8008 32776 Authorization Error Twin CAT 3 Version: 1.3.3 19

## Page 20

Example 4 Example The https://infosys.beckhoff.com/content/1033/TF6310_pjlink/Resources/9947745163.zip contains a PLC program to illustrate the use of FB_PJLink. Different commands can be sent to a projector once communication has been successfully established. Commissioning procedure: • The input parameter s Projector must be adjusted to the IP address of the projector that is to be controlled. • The input parameter s Security PW must match the PJLink password in the projector settings. (Optional: only when PJLink security authorization is enabled.) • Set the input parameter b Enable to TRUE to establish communication with the projector. Comments regarding the program code: • Calling FB_PJLink in the pjlink method in the MAIN program: • Once the connection to a projector has been successfully established, methods can be called in the MAIN program to send commands to the projector: Example of the power-on command. The command is triggered by setting b Power Execute. • If the following error message is logged, the parameter s Security PW does not match the security password set for the projector. Additional notes: • The example can also be tested in conjunction with the PJLink test software ("TEST4CNT"), which is used to simulate a projector. The software is available for download from http://pjlink.jbmia.or.jp/ english/. • The Twin CAT Function TF6310 "Twin CAT TCP/IP" is required for this example. The download contains a Twin CAT project and the compiled library "Tc3_PJLink". This library must first be installed via the library repository. (See PLC > Using libraries) The integrated libraries "Tc2_Tcp Ip", "Tc3_Module" and "Tc2_Utilities" are required for using the PJLink implementation. 20 Version: 1.3.3 Twin CAT 3

## Page 21

Trademark statements Beckhoff®, Twin CAT®, Twin CAT/BSD®, TC/BSD®, Ether CAT®, Ether CAT G®, Ether CAT G10®, Ether CAT P®, Safety over Ether CAT®, Twin SAFE®, XFC®, XTS® and XPlanar® are registered trademarks of and licensed by Beckhoff Automation Gmb H. Third-party trademark statements Microsoft, Microsoft Azure, Microsoft Edge, Power Shell, Visual Studio, Windows and Xbox are trademarks of the Microsoft group of companies.

## Page 22

More Information: www.beckhoff.com/entertainment-industrie Beckhoff Automation Gmb H & Co. KG Hülshorstweg 20 33415 Verl Germany Phone: +49 5246 9630 info@beckhoff.com www.beckhoff.com
