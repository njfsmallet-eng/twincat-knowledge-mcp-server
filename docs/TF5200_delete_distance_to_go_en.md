---
title: "TF5200_delete_distance_to_go_en"
product: "TF5200"
category: "Motion_Control"
tags: ["NC"]
language: "EN"
document_type: "Manual"
version: "1.07"
source_pdf: "https://download.beckhoff.com/download/Document/automation/twincat3/TF5200_delete_distance_to_go_en.pdf"
release_date: "2025-06-10"
---
Functional description | EN TF5200 | Twin CAT 3 CNC Delete distance to go 6/10/2025 | Version: 1.07
## Page 3

Notes on the documentation Notes on the documentation This description is only intended for the use of trained specialists in control and automation engineering who are familiar with the applicable national standards. It is essential that the documentation and the following notes and explanations are followed when installing and commissioning the components. It is the duty of the technical personnel to use the documentation published at the respective time of each installation and commissioning. The responsible staff must ensure that the application or use of the products described satisfy all the requirements for safety, including all the relevant laws, regulations, guidelines and standards. Disclaimer The documentation has been prepared with care. The products described are, however, constantly under development. We reserve the right to revise and change the documentation at any time and without prior announcement. No claims for the modification of products that have already been supplied may be made on the basis of the data, diagrams and descriptions in this documentation. Trademarks Beckhoff®, Twin CAT®, Twin CAT/BSD®, TC/BSD®, Ether CAT®, Ether CAT G®, Ether CAT G10®, Ether CAT P®, Safety over Ether CAT®, Twin SAFE®, XFC®, XTS® and XPlanar® are registered trademarks of and licensed by Beckhoff Automation Gmb H. Other designations used in this publication may be trademarks whose use by third parties for their own purposes could violate the rights of the owners. Patent Pending The Ether CAT technology is patent protected, in particular by the following applications and patents: EP1590927, EP1789857, EP1456722, EP2137893, DE102015105702 with corresponding applications or registrations in various other countries. Ether CAT® is registered trademark and patented technology, licensed by Beckhoff Automation Gmb H, Germany Copyright © Beckhoff Automation Gmb H & Co. KG, Germany. The reproduction, distribution and utilisation of this document as well as the communication of its contents to others without express authorisation are prohibited. Offenders will be held liable for the payment of damages. All rights reserved in the event of the grant of a patent, utility model or design. TF5200 | Twin CAT 3 CNC Version: 1.07 3 Delete distance to go
## Page 4

General and safety instructions General and safety instructions Icons used and their meanings This documentation uses the following icons next to the safety instruction and the associated text. Please read the (safety) instructions carefully and comply with them at all times. Icons in explanatory text 1. Indicates an action. ð Indicates an action statement. DANGER Acute danger to life! If you fail to comply with the safety instruction next to this icon, there is immediate danger to human life and health. CAUTION Personal injury and damage to machines! If you fail to comply with the safety instruction next to this icon, it may result in personal injury or damage to machines. NOTICE Restriction or error This icon describes restrictions or warns of errors. Tips and other notes This icon indicates information to assist in general understanding or to provide additional informa- tion. General example Example that clarifies the text. NC programming example Programming example (complete NC program or program sequence) of the described function or NC com- mand. Specific version information Optional or restricted function. The availability of this function depends on the configuration and the scope of the version. 4 Version: 1.07 TF5200 | Twin CAT 3 CNC Delete distance to go
## Page 5

Table of contents Table of contents Notes on the documentation.................................................................................................................... 3 General and safety instructions.............................................................................................................. 4 1 Overview.................................................................................................................................................... 8 2 Delete distance to go ............................................................................................................................... 9 2.1 Delete single distance to go.............................................................................................................. 9 2.2 Delete distance to go up to an explicit end marker......................................................................... 14 2.3 Interface signals.............................................................................................................................. 18 2.4 Commands in the deleted contour.................................................................................................. 22 2.5 Restrictions..................................................................................................................................... 24 2.6 Relative programming (G91)........................................................................................................... 26 2.7 Combination with backward motion................................................................................................ 27 2.8 Abort a measuring block with Delete distance to go....................................................................... 29 3 PLC interface........................................................................................................................................... 30 3.1 PLC interface with CNC Version < V2.11.28xx............................................................................... 31 4 Programming examples......................................................................................................................... 34 4.1 Request at different times............................................................................................................... 34 4.2 Delete multiple distances to go with rapid motion G00................................................................... 35 4.3 Delete single distance to go applied multiple times, G01 motion.................................................... 36 4.4 Delete distance to go with intermediate signal reset....................................................................... 37 4.5 Delete distance to go with command within deleted contour.......................................................... 38 4.6 Delete distance to go with backward motion................................................................................... 39 4.7 Delete distance to go for backward motion..................................................................................... 40 5 Parameter................................................................................................................................................. 41 6 Support and Service............................................................................................................................... 42 Index......................................................................................................................................................... 43 TF5200 | Twin CAT 3 CNC Version: 5 Delete distance to go
## Page 6

Table of contents 6 Version: TF5200 | Twin CAT 3 CNC Delete distance to go
## Page 7

List of figures List of figures Fig. 1 Delete interfaces of single distance to go.................................................................................... 9 Fig. 2 Simple example - Delete distance to go in block N10.................................................................. 11 Fig. 3 Delete distance to go with circles ................................................................................................ 12 Fig. 4 Delete distance to go with polynomials........................................................................................ 13 Fig. 5 Delete distance to go up to a marker........................................................................................... 14 Fig. 6 Extended interfaces of “Delete distance to go”............................................................................ 15 Fig. 7 Delete distance to go without end marker up to M30................................................................... 16 Fig. 8 Representation of an explicit marker............................................................................................ 17 Fig. 9 Delete contour path of single distance to go................................................................................ 18 Fig. 10 Delete PLC signal on the HLI for single distance to go................................................................ 19 Fig. 11 Delete contour path with multiple distances to go........................................................................ 20 Fig. 12 Delete PLC signal on the HLI with multiple distances to go......................................................... 21 Fig. 13 Additional command within a deleted distance to go................................................................... 23 Fig. 14 Interruption of "Delete distance to go” by measurement block.................................................... 25 Fig. 15 Delete distance to go with active relative programming (G91)..................................................... 26 Fig. 16 Delete distance to go with backward motion................................................................................ 27 Fig. 17 Delete distance to go during backward motion............................................................................ 28 Fig. 18 Delete distance to go at different times........................................................................................ 34 Fig. 19 Delete distance to go with rapid traverse G00............................................................................. 35 Fig. 20 Delete distance to go with linear motion G01............................................................................... 36 Fig. 21 Delete distance to go with signal reset......................................................................................... 37 Fig. 22 Reset Delete distance to go signal............................................................................................... 39 Fig. 23 Repeated forward motion in case of a backward short cut.......................................................... 40 TF5200 | Twin CAT 3 CNC Version: 1.07 7 Delete distance to go
## Page 8

Overview 1 Overview Task The “Delete distance to go” function interrupts the actual path motion and starts a short cut by straight line to the target position of next block. The distance to go of the current (interrupted) block is then deleted. The operator commands motion interruption via the PLC. Properties If the interrupted block was executed in rapid traverse(G00), the short cut is also executed in rapid traverse. Otherwise, the short cut is executed with G01 at the programmed feed rate of the next block. The interruption can also be started during a circular motion (G02/G03). In general, a short cut is always executed as a linear motion. Path-influencing functions (G61, spline, #HSC, etc.) are not considered in the short cut. Programming If the delete distance to go only contains one block, a command from the PLC is sufficient. There is no need for an explicit NC command. Deleting distance to go can contain multiple blocks. Therefore the marker denoting the end of distance to go can be set beforehand in the NC program using the NC command #DEL DIST2GO [...] [} 14]. Parameterisation The P-STUP-00033 [} 41] function must be parameterised in order to use it. Mandatory note on references to other documents For the sake of clarity, links to other documents and parameters are abbreviated, e.g. [PROG] for the Programming Manual or P-AXIS-00001 for an axis parameter. For technical reasons, these links only function in the Online Help (HTML5, CHM) but not in pdf files since pdfs do not support cross-linking. 8 Version: 1.07 TF5200 | Twin CAT 3 CNC Delete distance to go
## Page 9

Delete distance to go 2 Delete distance to go 2.1 Delete single distance to go The Delete single distance to go function interrupted the current movement and starts a short cut on a straight line to the target position of the next block. • You can interrupt the path motion vis the PLC (Delete distance to go control unit [} 30]). The distance to go in the current block is then deleted. • The block and position of the interrupt is not known in advance and not marked in the ISO program. • Continue with linear motion to target position of next block (short cut). • Path velocity is decelerated to 0 after interrupt at the end of the next block. %prog HMI N10 X100 N20 Y20 M30 start / stop CNC HLI delete distance to go PLC CU interpolation status Fig. 1: Delete interfaces of single distance to go TF5200 | Twin CAT 3 CNC Version: 1.07 9 Delete distance to go
## Page 10

Delete distance to go Properties • The short cut is executed as a linear movement. • If the interrupted block was executed in rapid motion (G00), the short cut is also executed in rapid motion. Otherwise, the short cut is executed with G01 at the programmed feed rate of the next block. • The interrupt can be started within a circular motion (G02/G03) but it is not executed as a circular motion itself. • The short cut itself can also be interrupted again. The function then moves to the target position of the next block. Restrictions Path-influencing functions (G61, spline, #HSC, etc.) are not considered in the short cut. DANGER The user is responsible for preventing any machine collision when a modified contour is executed. A “Delete distance to go” Deletes the remaining distance after stopping within an NC block. The stopping position is only known precisely after velocity v = 0 is reached. This position depends on the actual path velocity and the braking distance. For short blocks or near block end, the position can be in the current or in the next block. In this case the result of “delete distance to go” depends on the NC block in which the stop position oc- curs. To avoid this effect, the user can first stop the current motion using a FEEDHOLD and then request “delete distance to go”. 10 Version: 1.07 TF5200 | Twin CAT 3 CNC Delete distance to go
## Page 11

Delete distance to go Deleting distance to go %dist.nc N05 G0 X0 Y0 N10 G1 X80 F500 ;interrupt and delete distance to go N20 G1 Y60 N30 G1 X60 Y80 N40 M30 Fig. 2: Simple example - Delete distance to go in block N10 TF5200 | Twin CAT 3 CNC Version: 1.07 11 Delete distance to go
## Page 12

Delete distance to go Presentation of additional processes N30 Y next v=0 end linear start N20 v=0 G02/G03 circular N10 end interrupt X Fig. 3: Delete distance to go with circles 12 Version: 1.07 TF5200 | Twin CAT 3 CNC Delete distance to go
## Page 13

Delete distance to go N30 Y next v=0 end N20 v=0 interrupt start end N10 X Fig. 4: Delete distance to go with polynomials TF5200 | Twin CAT 3 CNC Version: 1.07 13 Delete distance to go
## Page 14

Delete distance to go 2.2 Delete distance to go up to an explicit end marker Deleting distance to go can contain multiple blocks. In addition, the distance to go marker can be predefined in the NC program. #DEL DIST2GO [ [ END <32bit> ] ] If the end marker is set without an activation bit, END = 1 is set by default. #DEL DIST2GO (corresponds to #DEL DIST2GO [ END = 1 ]) Afterwards, the jump marks can be individually activated by the PLC during runtime (ACTIVATION). This can be executed via the control unit “Delete distance to go, end marker [} 30]”. Individual jump markers can also be compiled in groups using the same activation markers. Fig. 5: Delete distance to go up to a marker 14 Version: 1.07 TF5200 | Twin CAT 3 CNC Delete distance to go
## Page 15

Delete distance to go %prog HMI N10 X100 N20 Y20 N30 #DEL DIST2GO[] M30 start / stop CNC HLI delete CU distance to go PLC end mark CU activation interpolation status Fig. 6: Extended interfaces of “Delete distance to go”. Downwards compatibility If no end marker is set valid by the PLC interface (control unit activation = 0), the NC moves to end of the next motion block as before. No valid end marker If no valid end marker is found up to the end of the program or the function “Delete distance to go” is commanded in the last motion block of the program, the motion is terminated prematurely at the stop position and a warning ID 50810 is output. All other non motion-related NC commands are still executed at this position (e.g. technology functions, M functions, etc.). TF5200 | Twin CAT 3 CNC Version: 1.07 15 Delete distance to go
## Page 16

Delete distance to go NC cmd Y v=0 deleted M30 distance interrupt & finish X Fig. 7: Delete distance to go without end marker up to M30 A valid end marker is only valid if the command (see section PLC interface (control unit and the HLI)) is executed. Delete distance to go up to an explicit marker %deldisttogo_end_mark … N029 G02 Y200 J100 N031 G01 Y220 N032 G00 X110 Y220 N033 Y230 N034 X120 N035 Y240 N040 X130 N041 #DEL DIST2GO ;Default ACTIVATION = '16#01' N050 Y250 N051 #DEL DIST2GO [END='16#01'] ; short cut target N060 X150 N061 #DEL DIST2GO [END=2] ; short cut target N070 Y300 N071 #DEL DIST2GO [END='16#0105'] ; short cut target N080 X200 N081 #DEL DIST2GO [END=8] ; short-cut target N090 Y350 N100 X250 … M30 16 Version: 1.07 TF5200 | Twin CAT 3 CNC Delete distance to go
## Page 17

Delete distance to go Fig. 8: Representation of an explicit marker TF5200 | Twin CAT 3 CNC Version: 1.07 17 Delete distance to go
## Page 18

Delete distance to go 2.3 Interface signals Signals and status “Delete distance to go” is started by the rising edge of the signal at the PLC interface (commanded value in the control unit on the HLI). Signal detection (rising edge) is output in the control unit. If the signal is cleared before the short cut is started, the original programmed contour is continued. As long as the changed contour is executed, “delete distance to go active” = TRUE is displayed on the PLC interface. Y v=0 next N30 : overnext end block N20' : short cut N20 v=0 start N10 : interrupted block end X Fig. 9: Delete contour path of single distance to go 18 Version: 1.07 TF5200 | Twin CAT 3 CNC Delete distance to go
## Page 19

Delete distance to go path velocity interrupted short overnext block cut block t command_w t state_r t active * t * delete_distance_to_go_active_r Fig. 10: Delete PLC signal on the HLI for single distance to go TF5200 | Twin CAT 3 CNC Version: 1.07 19 Delete distance to go
## Page 20

Delete distance to go Delete multiple distances to go If “delete distance to go” is cleared and reset during execution of a “delete distance to go” block, this block is also interrupted and a short cut is executed to the target position of the next block. The starting point of the second short cut can be defined by the block change (block number, block count). end N30 N40 Y 2nd short end cut N30' N20 1st short cut N20' start N10 interrupt end X Fig. 11: Delete contour path with multiple distances to go 20 Version: 1.07 TF5200 | Twin CAT 3 CNC Delete distance to go
## Page 21

Delete distance to go path velocity N10 N20' N30' N40 t command_w t state_r t active * N20' N30' block block i i+1 t * delete_distance_to_go_active_r Fig. 12: Delete PLC signal on the HLI with multiple distances to go TF5200 | Twin CAT 3 CNC Version: 1.07 21 Delete distance to go
## Page 22

Delete distance to go 2.4 Commands in the deleted contour If additional NC commands are programmed in the deleted contour, they are executed at the point of interrupt. Output of M functions M functions programmed in the same NC line as the end of the short cut (Case A) are output at the interruption point just like M functions within the omitted range (Case B). If the M function is moved into the range to be omitted by presetting it, it is also output at the interruption point (Case C). (Case A: Excerpt from the NC program) N200 X100 (Delete single distance to go) N210 Y70 M7 (Case B:Excerpt from the NC program) N200 X100 (Delete single distance to go) N210 M7 N220 Y70 (Case C: Excerpt from the NC program) N200 X100 (Delete single distance to go) (M7 should be output before Y70 is output) N210 Y70 N220 M7 (With M function preset) Additional command within a short cut. %ddtg8 N00 … N10 X100 ;interrupt and delete distance to go N15 M48 N16 P1=1 N17 #TIME 10 N20 Y100 N30 X90 Y110 M30 22 Version: 1.07 TF5200 | Twin CAT 3 CNC Delete distance to go
## Page 23

Delete distance to go N30 Y next end t u c t r o h N20 s M48´ M48 N10 interrupt start end X Fig. 13: Additional command within a deleted distance to go TF5200 | Twin CAT 3 CNC Version: 1.07 23 Delete distance to go
## Page 24

Delete distance to go 2.5 Restrictions Not all NC commands with an end marker can be skipped. It is not permitted to skip the following commands. Error ID 51016 is output. • Axis couplings, e.g. #AX LINK • Axis exchange commands, e.g. #PUT AX • #OTC ON/ OFF • Special commands for turning, e.g. G96, G95, G33 • #SYNC IN/OUT • General multipath programming • Oscillating motions, e.g. Z [OSC_ON] • Selecting and deselecting coordinate systems, e.g. #CS ON/OFF • Lift commands, e.g. Z[LIFT_START] or Z[LIFT_END] • Selecting and deselecting transformations, e.g. #TRAFO ON/OFF With NC commands that require channel initialisation, the search for the end market is aborted. The short cut continues up to the position where the corresponding command is located. The warning with ID 51036 is output. The programmed sequence is continued from this position. For example, channel initialisation is required with: • #CHANNEL INIT • #TRACK CHAN OFF • Homing G74 • Measuring functions G100, G310 • Edge banding G108 • #PTP ON 24 Version: 1.07 TF5200 | Twin CAT 3 CNC Delete distance to go
## Page 25

Delete distance to go Interruption of “Delete distance to go” by measuring travel The figure below represents the position sequence with a commanded short cut. The NC program contains a measurement block. The commanded short cut is interrupted by the measurement block. After the measuring travel, the programmed sequence is continued. Fig. 14: Interruption of "Delete distance to go” by measurement block TF5200 | Twin CAT 3 CNC Version: 1.07 25 Delete distance to go
## Page 26

Delete distance to go 2.6 Relative programming (G91) Even if next block after delete distance to go is defined relative by G91, the end position of the next block is not recalculated relatively to the stop position at the interrupt. The end of the next block is calculated as if no interrupt had taken place. A “Delete distance to go” does not result in an offset of the further relative programmed contour. Effects on relatively programmed positions %prog N00 … G1 G91 X100 ;interrupt and delete distance to go N20 G91 Y100 N30 G91 X-10 Y10 M30 N30 Y continue continue relative to v=0 relative interrupt no shift original end N20 v=0 delete distance N10 start interrupt end X Fig. 15: Delete distance to go with active relative programming (G91) There is no contour offset if the next block (N20) is programmed relative (G91). 26 Version: 1.07 TF5200 | Twin CAT 3 CNC Delete distance to go
## Page 27

Delete distance to go 2.7 Combination with backward motion Backward motion on the path during delete distance to go The short cut motion is calculated online by the PLC signal and not saved in the ISO program. For this reason, the short cut path can not move backwards. If the user (PLC) requests backward motion while travelling on a short cut (N20'), the motion is interrupted (same as for FEEDHOLD) and a warning is output. As soon as the backward motion signal is reset, motion on the short cut is resumed. If the backward signal is set after reaching the target position of the short cut, the backward motion is executed on the original contour (N20) which was programmed in the ISO program and not on the short cut. N30 Y delete distance to N20 go N20´ forward N10 interrupt backward X Fig. 16: Delete distance to go with backward motion The short cut executed with "delete distance to go" in not considered for backward motion. The ori- ginal contour from the ISO program is always considered for backward motion. TF5200 | Twin CAT 3 CNC Version: 1.07 27 Delete distance to go
## Page 28

Delete distance to go Delete distance to go during backward motion If the motion is already in a backward direction, the request for "delete distance to go" is only executed in the backward direction. Fig. 17: Delete distance to go during backward motion It is not possible to reverse the motion direction on a short cut with "delete distance to go". FEED- HOLD is set and the warning is output. The short cut must continue in the same path direction. 28 Version: 1.07 TF5200 | Twin CAT 3 CNC Delete distance to go
## Page 29

Delete distance to go 2.8 Abort a measuring block with Delete distance to go If a measurement run is aborted with Delete distance to go, the behaviour depends on the measurement type used (P-CHAN-00057). Measurement types 1 to 7 If the measuring block is aborted with Delete distance to go, the NC program continues from the point of interruption. The measuring process is aborted. If the parameter ERR_NO_SIGNAL is set in the NC command #MEAS, warning ID 51058 is output. This signals that the parameter was overwritten. Measurement type 8 (measurement via several movement sets in connection with edge banding) If a motion block is aborted in the measuring process and is not the last motion block, NC program processing is continued from the point of interruption. The behaviour is identical to the normal process of Delete distance to go. The measuring process remains active. If the last measuring block is aborted, error ID 50057 is output. With this measurement type, there must always be a measured value at the end of the measurement. TF5200 | Twin CAT 3 CNC Version: 1.07 29 Delete distance to go
## Page 30

PLC interface 3 PLC interface Delete distance to go, command Description The rising edge of the commanded value has the effect that the CNC channel is decelerated to feed velocity 0. Then a linear motion is executed to the target position of the next motion block (short cut). The command only affects motion blocks. The functional description [FCT-C28 [} 8]] deals with the topic of “Delete distance to go” in detail. Data type MC_CONTROL_BOOL_UNIT, see description of Control unit Special features See state data delete_distance_to_go_active_r. P-STUP-00033 must be configured for the channel. Access PLC reads request_r + state_r and writes command_w + enable_w ST path gp Ch[channel_idx]^.bahn_mc_control.delete_distance_to_go Commanded, requested and return values ST element .command_w .request_r .state_r (TRUE indicates that the command was detected by the CNC) Data type BOOL Value range [TRUE = distance to go to be deleted, FALSE = no impacts on motion blocks] Redirection ST element .enable_w Delete distance to go, end marker Description This control unit sets the end marker defined in the NC program online to valid. A bit mask is defined for this in the NC program. If at least one single bit in the end marker is set on the NC interface, this marker is valid as a jump target. Example: N10 #DEL DIST2GO [END = '16#0014'] The end marker can be set to valid by bit3 (hexadecimal 4) or by bit5 (hexadecimal 0x10). Data type MC_CONTROL_UNS32_UNIT, see description of Control unit Access PLC reads request_r + state_r and writes command_w + enable_w ST path gp Ch[channel_idx]^.bahn_mc_control.delete_distance_to_go_activation Commanded, requested and return values ST element .command_w .request_r .state_r Data type UDINT Value range 32-bit Redirection ST element .enable_w Delete distance to go, state Description If a command is sent via the delete_distance_to_go control unit [} 30], this value is TRUE as long as the NC block which exerts a linear motion to the target position of the next motion block is executed (short cut). It also remains TRUE if the active short cut is itself shortened by a new command. 30 Version: 1.07 TF5200 | Twin CAT 3 CNC Delete distance to go
## Page 31

PLC interface The signal is again reset when the active NC block is no longer related to the command of the delete_distance_to_go control unit [} 30]. See functional description [FCT-C28 [} 8]]. Signal flow CNC → PLC ST path gp Ch[channel_idx]^.bahn_state.delete_distance_to_go_active_r Data type BOOL Value range [TRUE = linear motion is executed to the target position of the next motion block (short cut), FALSE] Access PLC is reading Additional status information of current block Line counter, NC program Description The datum indicates the NC program line which is the source of the command just processed by the interpolator. The value is derived from the number of NC program lines which the decoder has read since the NC program started. All the lines read the decoder are counted, i.e. repeatedly read lines, empty and comment lines. All commands to the interpolator resulting from decoding a NC program line are assigned to the associated line counter. Signal flow CNC → PLC ST path gp Ch[channel_idx]^.bahn_state.block_count_r Data type UDINT Access PLC is reading Block number, current path motion Description If the N function [PROG//N function] is used in the active NC program to program NC block numbers, this datum indicates the NC block number of the NC block currently processed in the interpolator in this datum. Signal flow CNC → PLC ST path gp Ch[channel_idx]^.bahn_state.block_nr_r Data type UDINT Value range [0, MAX_UNS32] Access PLC is reading 3.1 PLC interface with CNC Version < V2.11.28xx Delete distance to go, command Description The rising edge of the commanded value has the effect that the CNC channel is decelerated to feed velocity 0. Then a linear motion is executed to the target position of the next motion block (short cut). The command only affects motion blocks. The functional description [FCT-C28 [} 9]] deals with the topic of "Delete distance to go" in detail. Data type MCControl Bool Unit, see description of Control Unit Peculiarities See state data X_Delete Distance To Go Active Access PLC reads Request + State and writes Command + Enable ST Path p MC[channel_idx]^.addr^. MCControl Bahn_Data. MCControl Bool Unit_Delete Distance To Go Commanded, requested and return values ST Element . X_Command . X_Request TF5200 | Twin CAT 3 CNC Version: 1.07 31 Delete distance to go
## Page 32

PLC interface . X_State (TRUE indicates that the command was detected by the CNC) Data type BOOL Value range [TRUE = distance to go to be deleted, FALSE = no impacts on motion blocks] Redirection ST Element . X_Enable Delete distance to go, end marker Description This control unit sets the end marker defined in the NC program online to valid. A bit mask is defined for this in the NC program. If at least one single bit in the end marker is set on the NC interface, this marker is valid as a jump target. Example: N10 #DEL DIST2GO [END = '16#0014'] The end marker can be set to valid by bit3 (hexadecimal 4) or by bit5 (hexadecimal 0x10). Data type MC_CONTROL_UNS32_UNIT, see description of control unit Access PLC reads Request + State and writes Command + Enable ST Path p MC[channel_idx]^.addr^. MCControl Bahn_Data. MCControl UNS32Unit_Delete Distance To Go Activation Commanded, requested and return values ST Element . X_Command . X_Request . X_State Data type UDINT Value range 32-bit Redirection ST Element . X_Enable Delete distance to go, state Description If a command is sent via the Delete Distance To Go control unit, this value is TRUE as long as the NC block which exerts a linear motion to the target position of the next motion block is executed (short cut). It also remains TRUE if the active short cut is itself shortened by a new command. The signal is again reset when the active NC block is no longer related to the command of the Delete Distance To Go control unit. See functional description [FCT-C28 [} 8]]. Signal flow CNC → PLC ST path p MC[channel_idx]^.addr^. State Bahn_Data. X_Delete Distance To Go Active Data type BOOL Value range [TRUE = linear motion is executed to the target position of the next motion block (short cut), FALSE] Access PLC reads Additional status information of current block Line counter, NC program Description The datum indicates the NC program line which is the source of the command just processed by the interpolator. 32 Version: 1.07 TF5200 | Twin CAT 3 CNC Delete distance to go
## Page 33

PLC interface The value is derived from the number of NC program lines which the decoder has read since the NC program started. All the lines read the decoder are counted, i.e. repeatedly read lines, empty and comment lines. All commands to the interpolator resulting from decoding a NC program line are assigned to the associated line counter. Signal flow CNC → PLC ST path p MC[channel_idx]^.addr^. State Bahn_Data. D_Block Count Data type UDINT Access PLC is reading Block number, current path motion Description If the N function [PROG//N function] is used in the active NC program to program NC block numbers, this datum indicates the NC block number of the NC block currently processed in the interpolator in this datum. Signal flow CNC → PLC ST path p MC[channel_idx]^.addr^. State Bahn_Data. D_Block Number Data type UDINT Value range [0, MAX_UNS32] Access PLC reads TF5200 | Twin CAT 3 CNC Version: 1.07 33 Delete distance to go
## Page 34

Programming examples 4 Programming examples 4.1 Request at different times Vary the "delete distance to go” HLI signal In the test program below, the "delete distance to go" HLI signal is triggered at different times in the NC blocks N50, N80 and N100. %deldisttogo.nc N010 G90 G165 G162 N020 G00 X0 Y0 Z0 F1000 N030 G01 X10 Y10 N040 $FOR P1 = 1,4,1 N050 G01 Y110 (1st “delete distance to go” signal) N060 G01 Z30 N070 G01 X50 N080 G01 Y60 (2nd “delete distance to go” signal) N090 G01 X100 N100 G02 X150 Y10 J-50 (3rd “delete distance to go” signal) N110 G01 Y10 N120 G00 X10 Y10 N130 $ENDFOR N140 M30 Fig. 18: Delete distance to go at different times 34 Version: 1.07 TF5200 | Twin CAT 3 CNC Delete distance to go
## Page 35

Programming examples 4.2 Delete multiple distances to go with rapid motion G00 Delete multiple distances to go with rapid traverse Simulated HLI signal "delete distance to go" before end of the first “delete distance to go” is reached %deldisttogo4 N010 X0 Y0 Z0 N020 X100 F1000 N025 G1 Z30 N029 G02 Y200 J100 N032 G00 Y220 N033 X111 N034 Y50 N035 X80 N040 X0 Y0 M30 Fig. 19: Delete distance to go with rapid traverse G00 TF5200 | Twin CAT 3 CNC Version: 1.07 35 Delete distance to go
## Page 36

Programming examples 4.3 Delete single distance to go applied multiple times, G01 motion Delete single distance to go applied multiple times with G01 Simulated HLI signal "delete distance to go" before end of the first “delete distance to go” is reached %deldisttogo5 N010 X0 Y0 Z0 N020 X100 F1000 N025 G1 Z30 N029 G02 Y200 J100 N032 G01 Y220 N033 X111 N034 Y50 N035 X80 N040 X0 Y0 M30 Fig. 20: Delete distance to go with linear motion G01 36 Version: 1.07 TF5200 | Twin CAT 3 CNC Delete distance to go
## Page 37

Programming examples 4.4 Delete distance to go with intermediate signal reset Multiple signal reset, only the last short cut is executed. %deldisttogo6 N010 X0 Y0 Z0 N020 X100 F1000 N025 G1 Z30 N029 G02 Y200 J100 N032 G01 Y220 N033 X111 N034 Y50 N035 X80 N040 X0 Y0 M30 Fig. 21: Delete distance to go with signal reset TF5200 | Twin CAT 3 CNC Version: 1.07 37 Delete distance to go
## Page 38

Programming examples 4.5 Delete distance to go with command within deleted contour Intermediate NC commands within the deleted contour are executed before the short cut. %deldisttogo8 N005 X0 Y0 Z0 F1000 N010 X100 ;interrupt and delete distance to go N015 M48 N016 P1=1 N017 #TIME 10 N020 Y100 N030 X90 Y110 N040 M30 38 Version: 1.07 TF5200 | Twin CAT 3 CNC Delete distance to go
## Page 39

Programming examples 4.6 Delete distance to go with backward motion Delete distance to go with backward motion Delete distance to go in block N34 and short cut after block N35. Backward motion is not possible on the short cut. It is not possible to execute backward motion before block N35. The CNC stops with FEEDHOLD until the ‘backward motion’ command is reset. Warning P-ERR-50729 is output. %deldisttogo9 N010 X0 Y0 Z0 N020 X100 F1000 N025 G1 Z30 N029 G02 Y200 J100 N032 G00 Y220 N033 X111 N034 Y50 ;interrupt and delete distance to go N035 X80 ; target DIST2GO N040 X0 Y0 N050 M30 Extract from diagnostic data: Error 800123 00000002 DELDTG raised 800149 00000004 FBC-resume : N34 dist=764000, forward=1, simu=0, del_dist=1 800149 00000001 DELDTG stopped in N34: (1110000,1436000,300000) 800149 00000001 DELDTG short cut to N35: (800000,500000,300000) 800243 00000002 DELDTG cleared 800334 00000004 BACKWARD raised 800359 00000002 DELDTG fwd=0/bwd=1 impossible in block N35 811354 00000004 BACKWARD rollback 811465 00000001 DELDTG finished N35 Fig. 22: Reset Delete distance to go signal TF5200 | Twin CAT 3 CNC Version: 1.07 39 Delete distance to go
## Page 40

Programming examples 4.7 Delete distance to go for backward motion Delete distance to go for backward motion. Switch to short cut in forward motion. Warning output. P-ERR-50729 If “Delete distance to go” is set during backward motion and a reversal is made back to forward motion on the short cut, FEEDHOLD is set and the warning P-ERR-50729 is output. The short cut must continue in backward direction to the end. It is not possible to switch the motion direction on the short cut. In the example, motion in N34 is backward. %deldisttogo10 N010 X0 Y0 Z0 N020 X100 F1000 N025 G1 Z30 N029 G02 Y200 J100 N032 G00 Y220 N033 X111 N034 Y50 N035 X80 N040 X0 Y0 N050 M30 Fig. 23: Repeated forward motion in case of a backward short cut 40 Version: 1.07 TF5200 | Twin CAT 3 CNC Delete distance to go
## Page 41

Parameter 5 Parameter P-STUP-00033 Memory size for backward motion Description This parameter defines the memory size in bytes used for backward motion on the path. During start-up, the NC checks whether the required minimum size is available. If this is not the case, a warning is output and the memory size is set to the required minimum value. If the size is set to 0, the “forward/ backward motion on the path” function is not available. The maximum size is only limited by the resources available on the PC. Parameter fb_storage_size[i] where i = 0 to 11 (maximum number of channels: 12, application-specific) Data type UNS32 Data range 0 ... MAX(UNS32) Dimension ---- Default value 0 Remarks TF5200 | Twin CAT 3 CNC Version: 1.07 41 Delete distance to go
## Page 42

Support and Service 6 Support and Service Beckhoff and their partners around the world offer comprehensive support and service, making available fast and competent assistance with all questions related to Beckhoff products and system solutions. Download finder Our download finder contains all the files that we offer you for downloading. You will find application reports, technical documentation, technical drawings, configuration files and much more. The downloads are available in various formats. Beckhoff's branch offices and representatives Please contact your Beckhoff branch office or representative for local support and service on Beckhoff products! The addresses of Beckhoff's branch offices and representatives round the world can be found on our internet page: www.beckhoff.com You will also find further documentation for Beckhoff components there. Beckhoff Support Support offers you comprehensive technical assistance, helping you not only with the application of individual Beckhoff products, but also with other, wide-ranging services: • support • design, programming and commissioning of complex automation systems • and extensive training program for Beckhoff system components Hotline: +49 5246 963-157 e-mail: support@beckhoff.com Beckhoff Service The Beckhoff Service Center supports you in all matters of after-sales service: • on-site service • repair service • spare parts service • hotline service Hotline: +49 5246 963-460 e-mail: service@beckhoff.com Beckhoff Headquarters Beckhoff Automation Gmb H & Co. KG Huelshorstweg 20 33415 Verl Germany Phone: +49 5246 963-0 e-mail: info@beckhoff.com web: www.beckhoff.com 42 Version: 1.07 TF5200 | Twin CAT 3 CNC Delete distance to go
## Page 43

Index Index B verwerfen:Ende-Marke 32 verwerfen:Kommando 31 Bewegung Bahn:Satznummer 33 S Block number path:motion, current 31 Satznummer Bahn:Bewegung, aktuell 33 C Z counter line:NC program 31 Zähler Zeile:NC-Programm 32 D Zeile Zähler:NC-Programm 32 distance distance to go:delete:state 30 distance to go delete:command 30 delete:end marker 30 delete:state 30 F Fahrweg Rest:verwerfen:Ende-Marke 32 Rest:verwerfen:Kommando 31 Rest:verwerfen:Zustand 32 L line counter:NC program 31 M motion path:block number 31 motion path distance to go:delete:command 30 distance to go:delete:end marker 30 N NC program line:counter 31 NC-Programm Zeile:Zähler 32 P P-STUP-00033 41 R Restfahrweg verwerfen:Zustand 32 Restweg TF5200 | Twin CAT 3 CNC Version: 1.07 43 Delete distance to go
## Page 45

More Information: www.beckhoff.com/TF5200 Beckhoff Automation Gmb H & Co. KG Hülshorstweg 20 33415 Verl Germany Phone: +49 5246 9630 info@beckhoff.com www.beckhoff.com
