---
title: "TF5200"
product: "TF5200"
category: "Motion_Control"
tags: ["NC"]
language: "EN"
document_type: "Manual"
version: "1.25"
source_pdf: "https://download.beckhoff.com/download/Document/automation/twincat3/TF5200_axis_compensation_parameters_en.pdf"
release_date: "2025-06-05"
---
Manual | EN TF5200 | Twin CAT 3 CNC Axis compensation 6/5/2025 | Version: 1.25
## Page 3

Notes on the documentation Notes on the documentation This description is only intended for the use of trained specialists in control and automation engineering who are familiar with the applicable national standards. It is essential that the documentation and the following notes and explanations are followed when installing and commissioning the components. It is the duty of the technical personnel to use the documentation published at the respective time of each installation and commissioning. The responsible staff must ensure that the application or use of the products described satisfy all the requirements for safety, including all the relevant laws, regulations, guidelines and standards. Disclaimer The documentation has been prepared with care. The products described are, however, constantly under development. We reserve the right to revise and change the documentation at any time and without prior announcement. No claims for the modification of products that have already been supplied may be made on the basis of the data, diagrams and descriptions in this documentation. Trademarks Beckhoff®, Twin CAT®, Twin CAT/BSD®, TC/BSD®, Ether CAT®, Ether CAT G®, Ether CAT G10®, Ether CAT P®, Safety over Ether CAT®, Twin SAFE®, XFC®, XTS® and XPlanar® are registered trademarks of and licensed by Beckhoff Automation Gmb H. Other designations used in this publication may be trademarks whose use by third parties for their own purposes could violate the rights of the owners. Patent Pending The Ether CAT technology is patent protected, in particular by the following applications and patents: EP1590927, EP1789857, EP1456722, EP2137893, DE102015105702 with corresponding applications or registrations in various other countries. Ether CAT® is registered trademark and patented technology, licensed by Beckhoff Automation Gmb H, Germany Copyright © Beckhoff Automation Gmb H & Co. KG, Germany. The reproduction, distribution and utilisation of this document as well as the communication of its contents to others without express authorisation are prohibited. Offenders will be held liable for the payment of damages. All rights reserved in the event of the grant of a patent, utility model or design. TF5200 | Twin CAT 3 CNC Version: 1.25 3 Axis compensation
## Page 4

General and safety instructions General and safety instructions Icons used and their meanings This documentation uses the following icons next to the safety instruction and the associated text. Please read the (safety) instructions carefully and comply with them at all times. Icons in explanatory text 1. Indicates an action. ð Indicates an action statement. DANGER Acute danger to life! If you fail to comply with the safety instruction next to this icon, there is immediate danger to human life and health. CAUTION Personal injury and damage to machines! If you fail to comply with the safety instruction next to this icon, it may result in personal injury or damage to machines. NOTICE Restriction or error This icon describes restrictions or warns of errors. Tips and other notes This icon indicates information to assist in general understanding or to provide additional informa- tion. General example Example that clarifies the text. NC programming example Programming example (complete NC program or program sequence) of the described function or NC com- mand. Specific version information Optional or restricted function. The availability of this function depends on the configuration and the scope of the version. 4 Version: 1.25 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 5

Table of contents Table of contents Notes on the documentation.................................................................................................................... 3 General and safety instructions.............................................................................................................. 4 Overview of compensation parameters.................................................................................................. 7 1 General description................................................................................................................................ 11 1.1 Links to other documents................................................................................................................ 11 1.2 Classification of compensation data................................................................................................ 11 1.3 Syntax and interpretation of ASCII list file....................................................................................... 12 1.4 Comments in the ASCII list file........................................................................................................ 13 2 The compensation list header (kopf.*).................................................................................................. 14 2.1 Logical axis number (P-COMP-00001)........................................................................................... 14 2.2 Axis name (P-COMP-00002).......................................................................................................... 14 3 General compensation value data (kw.*).............................................................................................. 15 3.1 Cross compensation (kw.crosscomp.*)........................................................................................... 15 3.1.1 Maximum number of table entries for cross compensation (P-COMP-00060)................. 15 3.1.2 Last index of compensation value table (P-COMP-00004).............................................. 15 3.1.3 Logical axis number of the master axis (P-COMP-00005)............................................... 16 3.1.4 Number of cycles for ‘smooth switching’ (P-COMP-00026)............................................. 16 3.1.5 Manual activation (P-COMP-00029)................................................................................ 16 3.1.6 Table of compensation values (kw.crosscomp.table[i].*)................................................. 17 3.1.7 Example of a compensation value list.............................................................................. 18 3.2 Plane compensation (kw.crosscomp2.*)......................................................................................... 19 3.2.1 Maximum number of table entries for plane compensation (P-COMP-00061)................ 19 3.2.2 Type of interpolation point grid (P-COMP-00031)............................................................ 19 3.2.3 Distance between interpolation points (P-COMP-00009)................................................ 20 3.2.4 Distance between the interpolation points of the first master axis (P-COMP-00032)...... 20 3.2.5 Distance between interpolation points on the second master axis (P-COMP-00033)..... 20 3.2.6 Last index of master axis 1 (P-COMP-00010)................................................................. 21 3.2.7 Last index of master axis 2 (P-COMP-00011)................................................................. 21 3.2.8 Start position of master axis 1 (P-COMP-00012)............................................................. 21 3.2.9 Start position of master axis 2 (P-COMP-00013)............................................................. 22 3.2.10 Logical axis number of the master axis 1 (P-COMP-00014)............................................ 22 3.2.11 Logical axis number of the master axis 2 (P-COMP-00015)............................................ 22 3.2.12 Number of cycles for ‘smooth switching’ (P-COMP-00027)............................................. 22 3.2.13 Manual activation (P-COMP-00030)................................................................................ 23 3.2.14 Table of compensation values (kw.crosscomp2.table[j][i].*)............................................ 24 3.2.15 Example of a compensation value list.............................................................................. 25 3.3 Leadscrew error compensation (kw.ssfk.*)..................................................................................... 25 3.3.1 Maximum number of table entries for leadscrew error compensation (P-COMP-00059) ......................................................................................................................................... 25 3.3.2 Unit of the length entries (P-COMP-00017)..................................................................... 26 3.3.3 Distance between interpolation points (P-COMP-00018)................................................ 26 3.3.4 Start position of compensation values (P-COMP-00019)................................................ 26 3.3.5 Number of compensation values (P-COMP-00020)......................................................... 27 TF5200 | Twin CAT 3 CNC Version: 5 Axis compensation
## Page 6

Table of contents 3.3.6 Operation mode of compensation (P-COMP-00021)....................................................... 27 3.3.7 Compensation of a modulo axis (P-COMP-00022).......................................................... 27 3.3.8 Manual activation (P-COMP-00028)................................................................................ 27 3.3.9 Consideration of other axis compensations (P-COMP-00057)........................................ 28 3.3.10 Table of compensation values (kw.ssfk.table[i].*)............................................................ 29 3.3.11 Example of a compensation value list.............................................................................. 30 3.4 Friction compensation (frict_comp.*)............................................................................................... 31 3.4.1 Maximum number of table entries for friction compensation (P-COMP-00062)............... 31 3.4.2 Friction interpolation mode (P-COMP-00041).................................................................. 31 3.4.3 Number of elements in the compensation value table (P-COMP-00042)........................ 32 3.4.4 Delay value for current build-up (P-COMP-00043).......................................................... 32 3.4.5 Reversal look ahead (P-COMP-00044)........................................................................... 32 3.4.6 Scaling factor for the compensation values (P-COMP-00045)........................................ 32 3.4.7 Velocity input variable (P-COMP-00046)......................................................................... 33 3.4.8 Measured friction (motor current) – output variable (P-COMP-00047)............................ 33 3.4.9 Delay time for the compensation values (P-COMP-00058)............................................. 33 3.5 Crosstalk compensation (kw.crosstalk.*)........................................................................................ 33 3.5.1 Logical axis number of the master axis (P-COMP-00063)............................................... 34 3.5.2 Number of cycles for ‘smooth switching’ (P-COMP-00064)............................................. 34 3.5.3 Manual activation of crosstalk compensation (P-COMP-00065)...................................... 34 3.5.4 Accelerations of the master axis (P-COMP-00066)......................................................... 34 3.5.5 Negative acceleration of the master axis (P-COMP-00067)............................................ 35 3.5.6 Logical axis number of first adaptation axis (P-COMP-00080)........................................ 35 3.5.7 Logical axis number of second adaptation axis (P-COMP-00081).................................. 35 3.5.8 Crosstalk compensation mode (P-COMP-00082)............................................................ 36 3.5.9 Number of measurement tests in the compensation value list (P-COMP-00083)............ 36 3.5.10 Different compensation values for different motion directions (P-COMP-00084)............ 36 3.5.11 Position of the first adaptation axis with acceleration test (P-COMP-00085)................... 36 3.5.12 Position of the second adaptation axis with acceleration test (P-COMP-00086)............. 37 3.5.13 Compensation value for acceleration in positive motion direction (P-COMP-00087)...... 37 3.5.14 Compensation value for acceleration in negative motion direction (P-COMP-00088)..... 37 3.5.15 Compensation value for deceleration in positive motion direction (P-COMP-00089)...... 38 3.5.16 Compensation value for deceleration in negative motion direction (P-COMP-00090)..... 38 4 Appendix.................................................................................................................................................. 39 4.1 Discontinued parameters................................................................................................................ 39 4.1.1 Unit of the length entries (P-COMP-00003)..................................................................... 39 4.1.2 Unit of the length entries (P-COMP-00008)..................................................................... 39 5 Support and Service............................................................................................................................... 40 Index......................................................................................................................................................... 41 6 Version: TF5200 | Twin CAT 3 CNC Axis compensation
## Page 7

Overview of compensation parameters Overview of compensation parameters The overview of compensation parameters is sorted into a 4-column table. • Column 1 contains the unambiguous identifier of the compensation parameter called the “ID” which consists of the prefix “P-COMP” and a unique 5-digit number, e.g. P-COMP-00001. • Column 2 represents the data structure which defines the parameter, e.g. kopf. The structure is a categorisation aid and is described in the following section. • Column 3 contains the “parameter” with its exact description, e.g. achs_nr. The important thing is that “structure”+”parameter” always belong together and must therefore be configured in exactly the same way in the compensation parameter list, e.g. kopf.achs_nr • Column 4 contains the “functionality” in a summarised term/short description, e.g. logical axis number. ID Structure Parameter Functionality/ Short de- scription P-COMP-00001 [} 14] kopf. achs_nr Logical axis number P-COMP-00002 [} 14] kopf. log_achs_name Axis name P-COMP-00004 [} 15] kw.crosscomp. last_index Last index of compensation value list (cross compensation) P-COMP-00005 [} 16] kw.crosscomp. slave_ax_nr Logical axis number of the master axis (cross compensation) P-COMP-00006 [} 17] kw.crosscomp.table[i]. setpoint Interpolation point of the master axis (cross compensation) P-COMP-00007 [} 17] kw.crosscomp.table[i]. correction Compensation values for the slave axis (cross compensation) P-COMP-00009 [} 20] kw.crosscomp2. interval Distance between interpolation points (plane compensation) P-COMP-00010 [} 21] kw.crosscomp2. last_index_master1 Last index of master axis 1 (plane compensation) P-COMP-00011 [} 21] kw.crosscomp2. last_index_master2 Last index of master axis 2 (plane compensation) P-COMP-00012 [} 21] kw.crosscomp2. start_position_master1 Start position of master axis 1 (plane compensation) P-COMP-00013 [} 22] kw.crosscomp2. start_position_master2 Start position of master axis 2 (plane compensation) P-COMP-00014 [} 22] kw.crosscomp2. master1_ax_nr Logical axis number of the master axis 1 (plane compensation) P-COMP-00015 [} 22] kw.crosscomp2. master2_ax_nr Logical axis number of the master axis 2 (plane compensation) P-COMP-00016 [} 24] kw.crosscomp2.table[i][j]. correction Compensation values for the slave axis (plane compensation) P-COMP-00017 [} 26] kw.ssfk. unit Unit of the length/position entries (leadscrew error compens.) TF5200 | Twin CAT 3 CNC Version: 1.25 7 Axis compensation
## Page 8

Overview of compensation parameters ID Structure Parameter Functionality/ Short de- scription P-COMP-00018 [} 26] kw.ssfk. interval Distance between interpolation points (leadscrew error compens.) P-COMP-00019 [} 26] kw.ssfk. kw_startpos Start position of compensation values (leadscrew error compens.) P-COMP-00020 [} 27] kw.ssfk. kw_nr_max Number of compensation values (leadscrew error compens.) P-COMP-00021 [} 27] kw.ssfk. bilateral Operation mode of compensation (leadscrew error compens.) P-COMP-00022 [} 27] kw.ssfk. modulo Compensation of a modulo axis (leadscrew error compens.) P-COMP-00023 [} 29] kw.ssfk.table[i]. pos Compensation value in positive direction (leadscrew error compens.) P-COMP-00024 [} 29] kw.ssfk.table[i]. neg Compensation value in negative direction (leadscrew error compens.) P-COMP-00025 [} 29] kw.ssfk.table[i]. setpoint Interpolation points of the axis (leadscrew error compens.) P-COMP-00026 [} 16] kw.crosscomp. n_cycles Number of cycles for ‘smooth switching’ (cross compensation) P-COMP-00027 [} 22] kw.crosscomp2. n_cycles Number of cycles for ‘smooth switching’ (cross compensation) P-COMP-00028 [} 27] kw.ssfk. manual_activation Manual activation (leadscrew error compens.) P-COMP-00029 [} 16] kw.crosscomp. manual_activation Manual activation (cross compensation) P-COMP-00030 [} 23] kw.crosscomp2. manual_activation Manual activation (plane compensation) P-COMP-00031 [} 19] kw.crosscomp2. grid Type of interpolation point grid (plane compensation) P-COMP-00032 [} 20] kw.crosscomp2. interval1 Distance between the interpolation points of the first master axis (plane compensation) P-COMP-00033 [} 20] kw.crosscomp2. interval2 Distance between the interpolation points on the second master axis (plane compensation) P-COMP-00041 [} 31] frict_comp. mode Friction compensation mode P-COMP-00042 [} 32] frict_comp. table_entries Number of elements in the compensation value list (friction compensation) P-COMP-00043 [} 32] frict_comp. position_delay Delay value for current build- up (friction compensation) P-COMP-00044 [} 32] frict_comp. reversal_lookahead Reversal look ahead (friction compensation) 8 Version: 1.25 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 9

Overview of compensation parameters ID Structure Parameter Functionality/ Short de- scription P-COMP-00045 [} 32] frict_comp. scaling_factor Scaling factor for the compensation values friction compensation) P-COMP-00046 [} 33] frict_comp.table[i]. in Velocity input variable (friction compensation) P-COMP-00047 [} 33] frict_comp.table[i]. out Measured friction (motor current) – output variable (friction compensation) P-COMP-00057 [} 28] kw.ssfk. set_pos_without_comp Consideration of other axis compensations P-COMP-00058 [} 33] frict_comp. delay_cycles Delay time for the compensation values (friction compensation) P-COMP-00059 [} 25] kw.ssfk. max_points Max. table entries (leadscrew error compens.) P-COMP-00060 [} 15] kw.crosscomp. max_points Max. table entries (cross compensation) P-COMP-00061 [} 19] kw.crosscomp2. max_points Max. table entries (plane compensation) P-COMP-00062 [} 31] frict_comp. max_points Max. table entries (friction compensation) P-COMP-00063 [} 34] kw.crosstalk. master_ax_nr Log. Axis number of the master axis P-COMP-00064 [} 34] kw.crosstalk. n_cycles Number of cycles for ‘smooth switching’ P-COMP-00065 [} 34] kw.crosstalk. manual_activation Manual activation of crosstalk compensation P-COMP-00066 [} 34] kw.crosstalk. acceleration Acceleration of the master axis P-COMP-00067 [} 35] kw.crosstalk. deceleration Negative acceleration of the master axis P-COMP-00080 [} 35] kw.crosstalk. master_pos1_ax_nr Log. Axis number of the first adaptation axis P-COMP-00081 [} 35] kw.crosstalk. master_pos2_ax_nr Log. Axis number of second adaptation axis P-COMP-00082 [} 36] kw.crosstalk. mode Crosstalk compensation mode P-COMP-00083 [} 36] kw.crosstalk. max_points Number of measurement tests in the compensation value list P-COMP-00084 [} 36] kw.crosstalk. velocity_dependent Different compensation values for different motion directions P-COMP-00085 [} 36] kw.crosstalk.position[i]. ax_1 Position of the first adaptation axis with acceleration test P-COMP-00086 [} 37] kw.crosstalk.position[i]. ax_2 Position of the second adaptation axis with acceleration test P-COMP-00087 [} 37] kw.crosstalk.position[i]. correction_accelerate_d Compensation value for ir_pos acceleration in positive motion direction P-COMP-00088 [} 37] kw.crosstalk.position[i]. correction_accelerate_d Compensation value for ir_neg acceleration in negative motion direction P-COMP-00089 [} 38] kw.crosstalk.position[i]. correction_decelerate_d Compensation value for ir_pos deceleration in positive motion direction TF5200 | Twin CAT 3 CNC Version: 1.25 9 Axis compensation
## Page 10

Overview of compensation parameters ID Structure Parameter Functionality/ Short de- scription P-COMP-00090 [} 38] kw.crosstalk.position[i]. correction_decelerate_d Compensation value for ir_neg deceleration in negative motion direction 10 Version: 1.25 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 11

General description 1 General description 1.1 Links to other documents For the sake of clarity, links to other documents and parameters are abbreviated, e.g. [PROG] for the Programming Manual or P-AXIS-00001 for an axis parameter. For technical reasons these links only function in the Online Help (HTML5, CHM) but not in pdf files since pdfs do not support cross-linking. 1.2 Classification of compensation data Compensation data for the compensation process is filed for each axis in compensation value lists (achskw*.lis). The following compensation processes are available: • Cross compensation • Plane compensation • Leadscrew error compensation • Friction compensation • Crosstalk compensation These compensation value lists are read in during controller start-up or they can be updated at a later time. Some specific entries must be made in the start-up description in order to notify the compensation table to the control system[STUP]. The compensation value list consists of a list header in which general data is entered and the list body in which the compensation algorithm is parameterised and which contains the actual compensation table. Compensation is activated in the associated axis machine record: Compensation procedure Activation parameters Cross compensation P-AXIS-00047 Plane compensation P-AXIS-00174 Leadscrew error compensation P-AXIS-00175 Friction compensation P-AXIS-00522 Crosstalk compensation P-AXIS-00789 TF5200 | Twin CAT 3 CNC Version: 1.25 11 Axis compensation
## Page 12

General description 1.3 Syntax and interpretation of ASCII list file An interpreter copies the entries in the ASCII list file into identical internal structures which are then checked for plausibility. To ensure reliable controller start-up every time, any defective entries found by the plausibility check are replaced by default values. Unknown entries are not taken over. These irregularities are displayed by warning messages. We advise you to investigate the cause for these warning messages and remove defective entries from the ASCII list file. The following agreement applies to BOOLEAN data: Value Meaning 0 Definition of FALSE 1 Definition of TRUE The following agreement applies to STRING data: If a character string containing characters with a special meaning in ASCII lists (e.g. comment characters, spaces [} 13]) is assigned to a STRING type list parameter, this character string must be defined in inverted commas ″..″ (available as of V3.1.3081.0, V3.1.3108.0). example[0].name ″STRING_WITH_COMMENT( # /*)_CHARACTERS″ Trailing spaces are discarded on import. The entry.. example[0].name ″STRING_WITH_POST_SPACES ″ ..has the same meaning as example[0].name ″STRING_WITH_POST_SPACES″ If the character string only contains characters without any special meaning, no inverted commas are required. example[0].name STRING_WITH_STANDARD_CHARACTERS! 12 Version: 1.25 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 13

General description 1.4 Comments in the ASCII list file Comments can be in an entire line or can be added at the end of a line. With a comment spanning an entire line, the comment character "'#" must be placed at the start of the line and followed by a blank. If a comment is to be inserted at the end of a line, only a blank is required before the comment. Blank lines are also possible. Comments in the ASCII list file # ************************************************************************ # Data # ************************************************************************ # # List comments after numerical values dummy[1] 1 Comment dummy[2] 1 # Comment dummy[3] 1 ( Comment dummy[4] 1 /* Comment ... ... However, if a character string was assigned to the list parameter as a value in the line, any following comment must be opened by a bracket '('. The comment characters space, # and /* are not permitted. If a '(' itself is part of the character string, the character string must be defined in inverted commas ″..″ (available as of V3.1.3081.0, V3.1.3108.0). # List comments after strings beispiel[0].bezeichnung STRING_1 (comment requires a '(‘ bracket!) beispiel[1].bezeichnung″ STRING_(2)″ (comment requires a '(‘ bracket!) TF5200 | Twin CAT 3 CNC Version: 1.25 13 Axis compensation
## Page 14

The compensation list header (kopf.*) 2 The compensation list header (kopf.*) The list header is identified in the list by the variable name 'kopf'. It includes the following elements. NOTICE If the compensation value list is configured by the Twin CAT System Manager, these entries are made auto- matically in the compensation value list. 2.1 Logical axis number (P-COMP-00001) P-COMP-00001 Logical axis number Description The logical axis number is a system-wide unique identifier for each axis. The compensation value list is assigned to the corresponding logical axis using this parameter. Parameter kopf.achs_nr Data type UNS16 Data range 0 < achs_nr < MAX(UNS16) Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0 Remarks It is not allowed to use the same logical axis number more than once. The logical axis number "0" is not allowed. 2.2 Axis name (P-COMP-00002) P-COMP-00002 Axis name Description This axis name of the axis is used only for diagnostic purposes and has otherwise no meaning. Parameter kopf.log_achs_name Data type STRING Data range Maximum 16 characters (length of axis name, application-specific) Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0 Remarks 14 Version: 1.25 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 15

General compensation value data (kw.*) 3 General compensation value data (kw.*) The list body contains general data and the compensation tables. The entries in the list body are identified by the structure variable kw . For the specific compensation processes it contains the following substructures. 3.1 Cross compensation (kw.crosscomp.*) Cross compensation (also called sag compensation) permits the correction of an axis position depending on the command position of another axis. Cross compensation data is defined in the correction value list of the master axis. General data of the list body is entered in the structure kw.crosscomp*. It contains the following elements. 3.1.1 Maximum number of table entries for cross compensation (P- COMP-00060) P-COMP-00060 Maximum number of table entries for cross compensation Description This cross compensation parameter (FCT-C5) saves the memory space required for a particular number of table entries. The size of the actually used compensation table is defined by `last_index` (P- COMP-00004 [} 15]) and `last_index` must be smaller than `max_points`. Parameter kw.crosscomp.max_points Data type UNS32 Data range 0 <= P-COMP-00060 Axis types T, R, S Dimension T: ---- R,S: ---- Default value 1001 Remarks The parameter value can no longer be changed after start-up or after lists are reloaded. Otherwise error ID 110639 is output. If P-COMP-00060 is not specified (or assigned the value 0), the default value is assigned to P-COMP-00060 for downward compatibility reasons. To avoid the default assignment, memory can be saved for an axis that does not use cross compensation by assigning the value 1 to P-COMP-00060. This parameter is available as of CNC Build V3.3079.06 3.1.2 Last index of compensation value table (P-COMP-00004) P-COMP-00004 Last index of compensation value table Description This parameter determines the last valid index in the table of the master axis. The table always starts with index 0 Parameter kw.crosscomp.last_index Data type SGN32 Data range 0 ≤ last_index < P-COMP-00060 [} 15] Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0 Remarks P-COMP-00060 [} 15] is available as of Build V3.1.3079.06. The upper limit in previous CNC versions is 1000. TF5200 | Twin CAT 3 CNC Version: 1.25 15 Axis compensation
## Page 16

General compensation value data (kw.*) 3.1.3 Logical axis number of the master axis (P-COMP-00005) P-COMP-00005 Logical axis number of the master axis Description This parameter determines the logical number of the master axis whose command position is used to calculate the input variable of the compensation value table of the slave axis. Parameter kw.crosscomp.master_ax_nr Data type UNS16 Data range 1 ≤ master_ax_nr ≤ MAX (UNS16) Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0 Remarks 3.1.4 Number of cycles for ‘smooth switching’ (P-COMP-00026) P-COMP-00026 Number of cycles for ‘smooth switching’ Description This parameter determines the number of cycles for which cross compensation is activated/deactivated smoothly. Parameter kw.crosscomp.n_cycles Data type UNS16 Data range 0 ≤ n_cycles ≤ 20 (maximum number of cycles for which cross compensation is activated/deactivated, application-specific) Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0 Remarks 3.1.5 Manual activation (P-COMP-00029) P-COMP-00029 Manual activation Description Cross compensation is automatically activated by the CNC if it selected in the axis parameters (P-AXIS-00047) and the required conditions are met (e.g. axis is homed). If the parameter is set to the value 1, cross compensation must be activated explicitly by an NC command (see [PROG//Selecting/deselecting axis compensations in the NC program]. In addition, compensation is deselected at the end of the NC program, at CNC reset and on axis release. Parameter kw.crosscomp.manual_activation Data type BOOLEAN Data range 0: Automatic activation 1: Manual activation in NC program Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0 Remarks 16 Version: 1.25 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 17

General compensation value data (kw.*) 3.1.6 Table of compensation values (kw.crosscomp.table[i].*) For each interpolation point (maximum 1000 values) in the table kw.crosscomp.table[i].* the corresponding compensation value of the slave axis is entered. The compensation table is valid for positive and negative directions of motion. It contains the following elements. Structure name Index table[i] 0 ≤ i ≤ 999 (maximum 1000 values) 3.1.6.1 Interpolation point of the master axis (P-COMP-00006) P-COMP-00006 Interpolation point of the master axis Description This parameter determines the interpolation points of the master axis on which the slave axis has to be corrected. Parameter kw.crosscomp.table[i].setpoint Data type SGN32 Data range MIN(SGN32) ≤ setpoint < MAX(SGN32) Axis types T, R, S Dimension T: 0.1 µm or increments R,S: 0.0001° or increments Default value 0 Remarks 3.1.6.2 Compensation values for the slave axis (P-COMP-00007) P-COMP-00007 Compensation values for the slave axis Description This parameter determines the relative compensation values for the slave axis at interpolation points 'i'. Parameter kw.crosscomp.table[i].correction Data type SGN32 Data range MIN(SGN32) ≤ correction < MAX(SGN32) Axis types T, R, S Dimension T: 0.1 µm or increments R,S: 0.0001° or increments Default value 0 Remarks TF5200 | Twin CAT 3 CNC Version: 1.25 17 Axis compensation
## Page 18

General compensation value data (kw.*) 3.1.7 Example of a compensation value list # **************************************** # Axis compensation data for Z-axis # **************************************** kopf.achs_nr 3 kopf.log_achs_name Z kw.crosscomp.last_index 99 /*Last valid index of the table*/ kw.crosscomp.master_ax_nr 1 /*Log. ax. number of the master axis*/ kw.crosscomp.unit 1 /*0:Incr. 1:Metric in 0.1 µm*/ kw.crosscomp.n_cycles 10 # kw.crosscomp.table[0].setpoint 10735 kw.crosscomp.table[0].correction 3 kw.crosscomp.table[1].setpoint 11523 kw.crosscomp.table[1].correction 5 : : kw.crosscomp.table[99].setpoint 10000000 /*at 1000 mm of axis 3*/ kw.crosscomp.table[99].correction 1000 /*corr. of 0.1 mm for axis 1*/ 18 Version: 1.25 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 19

General compensation value data (kw.*) 3.2 Plane compensation (kw.crosscomp2.*) Plane compensation allows the correction of an axis position depending on the actual positions of two axes. The axis for which correction is active is called the slave axis. The two axes whose command positions influence the compensation value are called master axes. The data for plane compensation is defined in the compensation value list of the slave axis. General data of the list body is entered in the structure kw.cross comp2.*. It contains the following elements. 3.2.1 Maximum number of table entries for plane compensation (P- COMP-00061) P-COMP-00061 Maximum number of table entries for plane compensation Description This plane compensation parameter (FCT-C5) saves the memory space required for a particular number of table entries. The size of the actually used compensation table is defined by `last_index:master1` (P-COMP-00010 [} 21]) and `last_index_master2` (P-COMP-00011 [} 21]) and the following must apply: (`last_index_master1` + 1) * (`last_index_master2` + 1) <= `max_points` If `max_points` is not specified (or assigned the value 0), the previous restrictions apply to `last_index_master1` and `last_index_master2`. • 0 <= `last_index_master1 [} 21]` <= 100 • 0 <= `last_index_master2 [} 21]` <= 100 Parameter kw.crosscomp2.max_points Data type UNS32 Data range 0 <= P-COMP-00061 Axis types T, R, S Dimension T: ---- R,S: ---- Default value 10201 (*) Remarks The parameter value can no longer be changed after start-up or after lists are reloaded. Otherwise error ID 110640 is output. If P-COMP-00061 is not specified (or assigned the value 0), the default value is assigned to P-COMP-00061 for downward compatibility reasons. To avoid the default assignment, memory can be saved for an axis that does not use plane compensation by assigning the value 1 to P-COMP-00061. * composition of the default value: 101*101 =10201 This parameter is available as of CNC Build V3.3079.06 3.2.2 Type of interpolation point grid (P-COMP-00031) P-COMP-00031 Type of interpolation point grid Description This parameter defines whether the identical interpolation point distance is used for the two master axes or whether the distances for the two master axes are defined individually. Parameter kw.crosscomp2.grid TF5200 | Twin CAT 3 CNC Version: 1.25 19 Axis compensation
## Page 20

General compensation value data (kw.*) Data type STRING Data range QUADRATIC: The identical interpolation point distance interval (P-COMP-00009) [} 20] is used for the two master axes. RECTANGULAR: Different interpolation point distances interval1 (P-COMP-00032) [} 20] and interval2 (P-COMP-00033) [} 20] can be set for the two master axes. Axis types T, R, S Dimension T: ---- R,S: ---- Default value QUADRATIC Remarks 3.2.3 Distance between interpolation points (P-COMP-00009) P-COMP-00009 Distance between interpolation points Description This parameter defines the distance between two interpolation points if both axes use an identical grid (P-COMP-000031 [} 19](grid) = QUADRATIC). Parameter kw.crosscomp2.interval Data type UNS32 Data range 0 < interval < MAX(UNS32) Axis types T, R, S Dimension T: 0.1 µm or increments R,S: 0.0001° or increments Default value 0 Remarks 3.2.4 Distance between the interpolation points of the first master axis (P-COMP-00032) P-COMP-00032 Distance between the interpolation points of the first master axis Description The parameter defines the interval between two interpolation points for the first master axis if both master axes use a different grid (P-COMP-00031 [} 19](grid) = RECTANGULAR). Parameter kw.crosscomp2.interval1 Data type UNS32 Data range 0 < interval1 < MAX(UNS32) Axis types T, R, S Dimension T: 0.1 µm or increments R,S: 0.0001° or increments Default value 0 Remarks 3.2.5 Distance between interpolation points on the second master axis (P-COMP-00033) P-COMP-00033 Distance between the interpolation points on the second master axis Description The parameter defines the interval between two interpolation points for the first master axis if both master axes use a different grid (P-COMP-00031 [} 19](grid) = RECTANGULAR). Parameter kw.crosscomp2.interval2 Data type UNS32 Data range 0 < interval2 < MAX(UNS32) Axis types T, R, S 20 Version: 1.25 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 21

General compensation value data (kw.*) Dimension T: 0.1 µm or increments R,S: 0.0001° or increments Default value 0 Remarks 3.2.6 Last index of master axis 1 (P-COMP-00010) P-COMP-00010 Last index of master axis 1 Description This parameter determines the last valid index in the table of master axis 1 (maximum value is 100). The table always starts with index 0. Parameter kw.crosscomp2.last_index_master1 Data type SGN32 Data range 0 ≤ P-COMP-00010 <= 100 Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0 Remarks As of Build V3.1.3079.06, P-COMP-00010 is freely assignable. There is no upper limit. However, the condition of P-COMP-00061 [} 19] must be complied with. P-COMP-00010 * P-COMP-00011 [} 21] <= P-COMP-00061 [} 19] Attention: If this parameter is re-interpreted, all the values in the compensation value table [} 24] (P-COMP-00016 [} 24]) must be read in again. 3.2.7 Last index of master axis 2 (P-COMP-00011) P-COMP-00011 Last index of master axis 2 Description This parameter determines the last valid index in the table of the two master axes (maximum 100 values). The table always starts with index 0. Parameter kw.crosscomp2.last_index_master2 Data type SGN32 Data range 0 ≤ P-COMP-00011 <= 100 Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0 Remarks As of Build V3.1.3079.06, P-COMP-00011 is freely assignable. There is no upper limit. However, the condition of P-COMP-00061 [} 19] must be complied with. P-COMP-00010 [} 21] * P-COMP-00011 <= P-COMP-00061 [} 19] Attention: If this parameter is re-interpreted, all the values in the compensation value table [} 24] (P-COMP-00016 [} 24]) must be read in again. 3.2.8 Start position of master axis 1 (P-COMP-00012) P-COMP-00012 Start position of master axis 1 Description This parameter determines the start position of master axis 1 in the compensation table. Parameter kw.crosscomp2.start_position_master1 Data type SGN32 Data range MIN(SGN32) ≤ start_position_master1 < MAX(SGN32) Axis types T, R, S TF5200 | Twin CAT 3 CNC Version: 1.25 21 Axis compensation
## Page 22

General compensation value data (kw.*) Dimension T: 0.1 µm or increments R,S: 0.0001° or increments Default value 0 Remarks 3.2.9 Start position of master axis 2 (P-COMP-00013) P-COMP-00013 Start position of master axis 2 Description This parameter determines the start position of master axis 2 in the compensation table. Parameter kw.crosscomp2.start_position_master2 Data type SGN32 Data range MIN(SGN32) ≤ start_position_master2 < MAX(SGN32) Axis types T, R, S Dimension T: 0.1 µm or increments R,S: 0.0001° or increments Default value 0 Remarks 3.2.10 Logical axis number of the master axis 1 (P-COMP-00014) P-COMP-00014 Logical axis number of the master axis 1 Description This parameter defines the logical axis number of the first master axis. Parameter kw.crosscomp2.master1_ax_nr Data type UNS16 Data range 1 ≤ master1_ax_nr ≤ MAX (UNS16) Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0 Remarks 3.2.11 Logical axis number of the master axis 2 (P-COMP-00015) P-COMP-00015 Logical axis number of the master axis 2 Description This parameter defines the logical axis number of the second master axis. Parameter kw.crosscomp2.master2_ax_nr Data type UNS16 Data range 1 ≤ master2_ax_nr ≤ MAX (UNS16) Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0 Remarks 3.2.12 Number of cycles for ‘smooth switching’ (P-COMP-00027) P-COMP-00027 Number of cycles for ‘smooth switching’ Description This parameter determines the number of cycles for which plane compensation is activated/deactivated smoothly. Parameter kw.crosscomp2.n_cycles Data type UNS16 22 Version: 1.25 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 23

General compensation value data (kw.*) Data range 0 ≤ n_cycles ≤ 20 (maximum number of cycles for which cross compensation is activated/deactivated, application-specific) Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0 Remarks 3.2.13 Manual activation (P-COMP-00030) P-COMP-00030 Manual activation Description Plane compensation is automatically activated by the CNC if it selected in the axis parameters (P-AXIS-00174) and the required conditions are met (e.g. axis is homed). If the parameter is set to value 1, plane compensation must be activated explicitly by an NC command (see [PROG//Selecting/deselecting axis compensations in the NC program]. In addition, compensation is deselected at the end of the NC program, at CNC reset and on axis release. Parameter kw.crosscomp2.manual_activation Data type BOOLEAN Data range 0: Automatic activation 1: Manual activation in NC program Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0 Remarks TF5200 | Twin CAT 3 CNC Version: 1.25 23 Axis compensation
## Page 24

General compensation value data (kw.*) 3.2.14 Table of compensation values (kw.crosscomp2.table[j][i].*) The corresponding compensation value of the slave axis is entered for each interpolation point in the table kw.crosscomp2.table[j][i].*. Structure name Index table[j][i] 0 ≤ j ≤ last_index_master2 (P-COMP-00011 [} 21]) 0 ≤ i ≤ last_index_master1 (P-COMP-00010 [} 21]) 3.2.14.1 Compensation values for the slave axis (P-COMP-00016) P-COMP-00016 Compensation values for the slave axis Description This parameter defines the relative compensation values of the slave axis at interpolation points [j][i]. When indexing the interpolation points in the compensation list, the first index j refers to the second master axis. Parameter kw.crosscomp2.table[j][i].correction Data type SGN32 Data range MIN(SGN32) ≤ correction < MAX(SGN32) Axis types T, R, S Dimension T: 0.1 µm or increments R,S: 0.0001° or increments Default value 0 Remarks 24 Version: 1.25 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 25

General compensation value data (kw.*) 3.2.15 Example of a compensation value list # **************************************** # Axis compensation data for Z-axis # **************************************** kopf.achs_nr 1 kopf.log_achs_name X kw.crosscomp2.interval 100000 /* 10 mm */ kw.crosscomp2.last_index_master1 100 kw.crosscomp2.last_index_master2 100 kw.crosscomp2.start_position_master1 -400000 /* -40 mm */ kw.crosscomp2.start_position_master2 -700000 /* -70 mm */ kw.crosscomp2.unit 1 /* 0.1 my */ kw.crosscomp2.n_cycles 10 kw.crosscomp2.master1_ax_nr 2 kw.crosscomp2.master2_ax_nr 3 kw.crosscomp2.table[ 0][ 0].correction -3 kw.crosscomp2.table[ 0][ 1].correction -1 kw.crosscomp2.table[ 0][ 2].correction 4 kw.crosscomp2.table[ 0][ 3].correction 9 kw.crosscomp2.table[ 0][ 4].correction 13 kw.crosscomp2.table[ 0][ 5].correction 17 kw.crosscomp2.table[ 0][ 6].correction 42 kw.crosscomp2.table[ 0][ 7].correction 53 ... kw.crosscomp2.table[100][ 90].correction 82 kw.crosscomp2.table[100][ 91].correction 77 kw.crosscomp2.table[100][ 92].correction 68 kw.crosscomp2.table[100][ 93].correction 63 kw.crosscomp2.table[100][ 94].correction 61 kw.crosscomp2.table[100][ 95].correction 59 kw.crosscomp2.table[100][ 96].correction 57 kw.crosscomp2.table[100][ 97].correction 52 kw.crosscomp2.table[100][ 98].correction 56 kw.crosscomp2.table[100][ 99].correction 58 kw.crosscomp2.table[100][100].correction 49 End 3.3 Leadscrew error compensation (kw.ssfk.*) Leadscrew error compensation (referred to below as SSFK) is an axial correction. The position setpoint of the compensated axis is changed by a compensation value in the position controller timing, in order to compensate for leadscrew errors, for instance. This correction is cancelled by computation for the measured actual position values so that the correction performed does not appear in the display data of the controller. SSFK data is stored in the corresponding compensation value list for each axis. General data of the list body is entered in the structure kw.ssfk.*. It contains the following elements. 3.3.1 Maximum number of table entries for leadscrew error compensation (P-COMP-00059) P-COMP-00059 Maximum number of table entries for leadscrew error compensation Description This leadscrew error compensation parameter (FCT-C5) sets the memory space required for a particular number of table entries. The size of the actually used compensation table is defined by `kw_nr_max` (P- COMP-00020 [} 27]) and `kw_nr_max` must be smaller than `max_points`. Parameter kw.ssfk.max_points Data type UNS32 Data range 0 <= P-COMP-00059 Axis types T, R, S Dimension T: ---- R,S: ---- Default value 1500 TF5200 | Twin CAT 3 CNC Version: 1.25 25 Axis compensation
## Page 26

General compensation value data (kw.*) Remarks The parameter value can no longer be changed after start-up or after lists are reloaded. Otherwise error ID 110638 is output. If P-COMP-00059 is not specified (or assigned the value 0), the default value is assigned to P-COMP-00059 for downward compatibility reasons. To avoid the default assignment, memory can be saved for an axis that does not use leadscrew error compensation by assigning the value 1 to P-COMP-00059. This parameter is available as of CNC Build V3.3079.06 3.3.2 Unit of the length entries (P-COMP-00017) P-COMP-00017 Unit of the length entries Description This parameter defines the unit of the length / position entries. Parameter kw.ssfk.unit Data type BOOLEAN Data range 0: Encoder increments 1: Metric (in 0.1 µm) Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0 Remarks 3.3.3 Distance between interpolation points (P-COMP-00018) P-COMP-00018 Distance between interpolation points Description The parameter defines the distance between interpolation points of the compensation table when equidistant interpolation points are used. If this parameter is = 0, the position of each interpolation point must be specified separately. Parameter kw.ssfk.interval Data type SGN32 Data range 0 ≤ interval < MAX(SGN32) Axis types T, R, S Dimension T: 0.1 µm or increments R,S: 0.0001° or increments Default value 0 Remarks 3.3.4 Start position of compensation values (P-COMP-00019) P-COMP-00019 Start position of compensation values Description This parameter determines the position of the axis at which the compensation table starts. Parameter kw.ssfk.kw_startpos Data type SGN32 Data range MIN(SGN32) ≤ kw_startpos < MAX(SGN32) Axis types T, R, S Dimension T: 0.1 µm or increments R,S: 0.0001° or increments Default value 0 Remarks 26 Version: 1.25 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 27

General compensation value data (kw.*) 3.3.5 Number of compensation values (P-COMP-00020) P-COMP-00020 Number of compensation values Description This parameter defines the number of entries in the compensation table. Parameter kw.ssfk.kw_nr_max Data type SGN32 Data range 0 ≤ kw_nr_max < P-COMP-00059 [} 25] Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0 Remarks P-COMP-00059 [} 25] is available as of Build V3.1.3079.06. 3.3.6 Operation mode of compensation (P-COMP-00021) P-COMP-00021 Operation mode of compensation Description This parameter defines whether compensation is unilateral or bilateral. Parameter kw.ssfk.bilateral Data type BOOLEAN Data range 0: Unilateral compensation 1: Bilateral compensation Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0 Remarks 3.3.7 Compensation of a modulo axis (P-COMP-00022) P-COMP-00022 Compensation of a modulo axis Description This parameter defines the compensation table for a modulo axis. A modulo transition also takes place in the compensation table on the modulo transition of the axis position. The number of compensation values must then be equal to the number of entries in the compensation value table. Parameter kw.ssfk.modulo Data type BOOLEAN Data range 0: Compensation without modulo handling 1: Compensation for a modulo axis Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0 Remarks 3.3.8 Manual activation (P-COMP-00028) P-COMP-00028 Manual activation TF5200 | Twin CAT 3 CNC Version: 1.25 27 Axis compensation
## Page 28

General compensation value data (kw.*) Description Leadscrew error compensation is automatically activated by the CNC if it selected in the axis parameters (P-AXIS-00175) and the required conditions are met (e.g. axis is homed). If the parameter is set to value 1, leadscrew error compensation must be explicitly activated by an NC command (see [PROG//Selecting/deselecting axis compensations in the NC program]. In addition, compensation is deselected at the end of the NC program, at CNC reset and on axis release. Parameter kw.ssfk.manual_activation Data type BOOLEAN Data range 0: Automatic activation 1: Manual activation in NC program Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0 Remarks 3.3.9 Consideration of other axis compensations (P-COMP-00057) P-COMP-00057 Consideration of other axis compensations Description By default, leadscrew error compensation also considers the compensation values generated from other axis compensations, e.g. cross and plane compensation. With direction-dependent spindle leadscrew error compensation (see P-COMP-00021 [} 27]) this may result in the undesirable occurrence of backlash under certain circumstances. The parameter set_pos_without_comp can disable the inclusion of other compensation values in the calculation. Parameter kw.ssfk.set_pos_without_comp Data type BOOLEAN Data range 0: Compensation values of other compensations are considered in the leadscrew error compensation. 1: Compensation values of other compensations are not considered. Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0 Remarks 28 Version: 1.25 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 29

General compensation value data (kw.*) 3.3.10 Table of compensation values (kw.ssfk.table[i].*) Compensation values are specified in the table 'kw.ssfk.table[i].*' The array index i may assume a number of values determined by P-COMP-00020 [} 27] . Compensation values are specified as absolute position errors in the unit specified in P-COMP-00017 [} 26] . Structure name Index table[i] 0 ≤ i ≤ kw_nr_max (P-COMP-00020 [} 27]) The table of compensation values contains the following elements. 3.3.10.1 Compensation value in positive direction (P-COMP-00023) P-COMP-00023 Compensation value in positive direction Description This parameter defines a compensation value in case of movement in positive direction at interpolation point 'i'. Parameter kw.ssfk.table[i].pos Data type SGN32 Data range MIN(SGN32) ≤ pos < MAX(SGN32) Axis types T, R, S Dimension T: 0.1 µm or increments R,S: 0.0001° or increments Default value 0 Remarks 3.3.10.2 Compensation value in negative direction (P-COMP-00024) P-COMP-00024 Compensation value in negative direction Description This parameter defines a compensation value in case of movement in negative direction at interpolation point 'i'. Parameter kw.ssfk.table[i].neg Data type SGN32 Data range MIN(SGN32) ≤ neg < MAX(SGN32) Axis types T, R, S Dimension T: 0.1 µm or increments R,S: 0.0001° or increments Default value 0 Remarks 3.3.10.3 Interpolation points of the axis (P-COMP-00025) P-COMP-00025 Interpolation points of the axis Description This parameter determines the interpolation points of the axis for which the axis must be corrected. Parameter kw.ssfk.table[i].setpoint Data type SGN64 Data range MIN(SGN64) ≤ setpoint < MAX(SGN64) Axis types T, R, S Dimension T: 0.1 µm or increments R,S: 0.0001° or increments Default value 0 Remarks In CNC Builds V2.11.20xx and higher, the data type is SGN32 and so is the related data range. TF5200 | Twin CAT 3 CNC Version: 1.25 29 Axis compensation
## Page 30

General compensation value data (kw.*) 3.3.11 Example of a compensation value list The diagram below shows a compensation value table with the properties: • Non-equidistant interpolation points (kw.ssfk.interval = 0) • Bilateral compensation table (kw.ssfk.bilateral = 1) • Position specifications in metric system (kw.ssfk.unit = 1) • Compensation value table with 140 entries (kw.ssfk.kw_nr_max = 140). The index of the position and setpoint entries goes from 0 to 139. • The following values were measured at the third gauged position (table[2]): Programmed Measured value Measured value pos calculated neg calculated position pos neg compensation value compensation value ith setpoint ith actual ith actual value value (pos direction) (neg direction) 19866.7 μm 19856.5 μm 19874.7 μm -102 x 0.1 μm 80 x 0.1 μm Example of a compensation value list kopf.log_achs_nr 2 kopf.log_achs_name Y-ACHSE kw.ssfk.interval 0 kw.ssfk.kw_startpos -200000 kw.ssfk.kw_nr_max 140 kw.ssfk.unit 1 kw.ssfk.bilateral 1 kw.ssfk.table[0].setpoint -200000 kw.ssfk.table[1].setpoint -199306 kw.ssfk.table[2].setpoint -198667 kw.ssfk.table[3].setpoint -198001 ... kw.ssfk.table[138].setpoint 334488 kw.ssfk.table[139].setpoint 335591 kw.ssfk.table[0].pos 0 kw.ssfk.table[1].pos 24 kw.ssfk.table[2].pos -102 ... kw.ssfk.table[139].pos -55 kw.ssfk.table[0].neg 0 kw.ssfk.table[1].neg 67 kw.ssfk.table[2].neg 80 ... kw.ssfk.table[139].neg 114 30 Version: 1.25 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 31

General compensation value data (kw.*) 3.4 Friction compensation (frict_comp.*) The purpose of friction compensation is to compensate actually existing friction torque by way of an additional torque. Therefore, it works like speed-dependent feed forward control of motor current. Friction compensation reduces following error and backlash. For more information see [FCT-C25]. Friction compensation parameters are defined in the compensation value list and is currently available for drive types CANopen and SERCOS. It includes the following elements. 3.4.1 Maximum number of table entries for friction compensation (P-COMP-00062) P-COMP-00062 Maximum number of table entries for friction compensation Description This friction compensation parameter (FCT-C25) saves the memory space required for a particular number of table entries. The size of the actually used compensation table is defined by `table_entries` (P- COMP-00042 [} 32]) and `table_entries` must be smaller than `max_points`. Parameter frict_comp.max_points Data type UNS32 Data range 0 <= P-COMP-00062 Axis types T, R, S Dimension T: ---- R,S: ---- Default value 20 Remarks The parameter value can no longer be changed after start-up or after lists are reloaded. Otherwise error ID 110641 is output. If P-COMP-00062 is not specified (or assigned the value 0), the default value is assigned to P-COMP-00062 for downward compatibility reasons. To avoid the default assignment, memory can be saved for an axis that does not use friction compensation by assigning the value 1 to P-COMP-00062. This parameter is available as of CNC Build V3.3079.06 3.4.2 Friction interpolation mode (P-COMP-00041) P-COMP-00041 Friction compensation mode Description The parameter defines the operation mode for friction compensation. If the parameter is assigned the value 0, friction compensation is deactivated. Parameter frict_comp.mode Data type UNS16 Data range 0: Deactivate friction compensation 3: Compensation with additive current taking into account the commanded speed Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0 Remarks To activate friction compensation, the mode must and P-AXIS-00522 must be set. TF5200 | Twin CAT 3 CNC Version: 1.25 31 Axis compensation
## Page 32

General compensation value data (kw.*) 3.4.3 Number of elements in the compensation value table (P- COMP-00042) P-COMP-00042 Number of elements in the compensation value table Description This parameter defines the number of entries in the compensation table. Parameter frict_comp.table_entries Data type UNS16 Data range 0 ≤ table_entries ≤ P-COMP-00062 [} 31] Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0 Remarks P-COMP-00062 [} 31] is available as of Build V3.1.3079.06. The default upper limit is 20. 3.4.4 Delay value for current build-up (P-COMP-00043) P-COMP-00043 Delay value for current build-up Description This parameter defines the delay value for current built-up at start-up. Its purpose is to prevent abrupt changes. Current build-up is linear. Parameter frict_comp.position_delay Data type SGN32 Data range 0 ≤ position_delay ≤ 10 Axis types T, R, S Dimension T: 0.1µm R,S: 0.0001° Default value 0 Remarks 3.4.5 Reversal look ahead (P-COMP-00044) P-COMP-00044 Reversal look ahead Description This parameter defines the number of cycles over which the motor current decays before motion reversal. Parameter frict_comp.reversal_lookahead Data type UNS16 Data range 0 ≤ reversal_lookahead ≤ 4 Axis types T, R, S Dimension T: Cycles R,S: Cycles Default value 0 Remarks 3.4.6 Scaling factor for the compensation values (P-COMP-00045) P-COMP-00045 Scaling factor for compensation values Description This parameter defines the scaling of all compensation values in the list. Parameter frict_comp.scaling_factor Data type SGN16 Data range MIN(SGN16) < scaling_factor < MAX(SGN16) Axis types T, R, S Dimension T: 0.1% R,S: 0.1% 32 Version: 1.25 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 33

General compensation value data (kw.*) Default value 1000 Remarks 3.4.7 Velocity input variable (P-COMP-00046) P-COMP-00046 Velocity input variable Description This parameter defines the velocities for which the additional motor currents specified in P-COMP-00047 [} 33] are to be output to the additive current interface. The values must be entered in ascending order. Parameter frict_comp.table[i].in where i= P-COMP-00042 [} 32] Data type SGN32 Data range 0 < table[i].in < MAX(SGN32) Axis types T, R, S Dimension T: [µm/s] R,S: [0.001°/s] Default value 0 Remarks 3.4.8 Measured friction (motor current) – output variable (P- COMP-00047) P-COMP-00047 Measured friction (motor current) – output variable Description This parameter defines the current which is to be additionally output at the additive current interface. Parameter frict_comp.table[i].out where i= P-COMP-00042 [} 32] Data type SGN32 Data range MIN(SGN32) < table[i].out < MAX(SGN32) Axis types T, R, S Dimension T: * R,S: * Default value 0 Remarks * The dimension of the motor current depends on the internal data of the related drive. In CANopen and SERCOS, this value corresponds to the contents of the CNC object dig_drv.act_torque. 3.4.9 Delay time for the compensation values (P-COMP-00058) P-COMP-00058 Delay time for compensation values Description This parameter defines the delay time of all compensation values. Parameter frict_comp.delay_cycles Data type SGN16 Data range 0 ≤ delay_cycles < 249 Axis types T, R, S Dimension T: Cycles R,S: Cycles Default value 0 Remarks 3.5 Crosstalk compensation (kw.crosstalk.*) The crosstalk compensation function is activated by P-AXIS-00789. TF5200 | Twin CAT 3 CNC Version: 1.25 33 Axis compensation
## Page 34

General compensation value data (kw.*) 3.5.1 Logical axis number of the master axis (P-COMP-00063) P-COMP-00063 Logical axis number of the master axis Description This parameter determines the logical number of the master axis whose acceleration is used as the input variable of the compensation value list of the slave axis. Parameter kw.crosstalk.master_dyn_ax_nr Data type UNS16 Data range 1 ≤ P-COMP-00063 ≤ MAX (UNS16) Axis types T Dimension T: ---- R,S: - Default value 0 Remarks Parameter available as of CNC Build V3.1.3081.2 or V3.1.3108.4. 3.5.2 Number of cycles for ‘smooth switching’ (P-COMP-00064) P-COMP-00064 Number of cycles for ‘smooth switching’ Description This parameter determines the number of cycles for which crosstalk compensation is coupled/decoupled softly. Parameter kw.crosstalk.n_cycles Data type UNS16 Data range 0 ≤ P-COMP-00064 ≤ 20 (maximum number of cycles above which coupling or decoupling is to occur) Axis types T, R, S Dimension T: ---- R, S: - Default value 0 Remarks Parameter available as of CNC Build V3.1.3079.32 3.5.3 Manual activation of crosstalk compensation (P-COMP-00065) P-COMP-00065 Manual activation of crosstalk compensation Description The CNC activates crosstalk compensation automatically if it is selected in the axis parameters (P-AXIS-00789) and the required preconditions are met. If the parameter P-COMP-00065 is set to 1, crosstalk compensation must be explicitly activated by an NC command. [PROG// Selecting/deselecting axis compensations in the NC program (COMP)] Compensation is deactivated at the end of the NC program, when the CNC is reset or when the compensating axis is released. Parameter kw.crosstalk.manual_activation Data type BOOLEAN Data range 0: Automatic activation 1: Explicit activation in NC program Axis types T Dimension T: ---- R, S: - Default value 0 Remarks Parameter available as of CNC Build V3.1.3081.2 or V3.1.3108.4. 3.5.4 Accelerations of the master axis (P-COMP-00066) P-COMP-00066 Accelerations of the master axis 34 Version: 1.25 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 35

General compensation value data (kw.*) Description This parameter defines the acceleration of the master axis requiring a compensation of the slave axis. Parameter kw.crosstalk.acceleration Data type SGN32 Data range 0 < P-COMP-00066 < MAX(SGN32) Axis types T Dimension T: [mm/s²] R,S: - Default value 0 Remarks Parameter available as of V3.1.3081.2 and V3.1.3108.4 3.5.5 Negative acceleration of the master axis (P-COMP-00067) P-COMP-00067 Negative acceleration of the master axis Description This parameter defines the negative acceleration of the master axis which must be used to compensate the slave axis. Parameter kw.crosstalk.deceleration Data type SGN32 Data range MIN(SGN32) ≤ P-COMP-00067 < 0 Axis types T Dimension T: [mm/s²] R,S: - Default value 0 Remarks Parameter available as of V3.1.3081.2 and V3.1.3108.4 3.5.6 Logical axis number of first adaptation axis (P-COMP-00080) P-COMP-00080 Logical axis number of the first adaptation axis Description This parameter defines the logical axis number of the first adaptation axis. The position of the adaptation axis influences compensation in Modes 2 and 3 (P- COMP-00082 [} 36]). Parameter kw.crosstalk.master_pos1_ax_nr Data type UNS16 Data range 0 < P-COMP-00080 < MAX(UNS16) Axis types T Dimension T: ---- R, S: - Default value 0 Remarks Parameter available as of V3.1.3081.2 and V3.1.3108.4 3.5.7 Logical axis number of second adaptation axis (P- COMP-00081) P-COMP-00081 Logical axis number of the second adaptation axis Description This parameter defines the logical axis number of the second adaptation axis. The position of the adaptation axis influences compensation in Mode 3 (P-COMP-00082 [} 36]). Parameter kw.crosstalk.master_pos2_ax_nr Data type UNS16 Data range 0 < P-COMP-00081 < MAX(UNS16) Axis types T Dimension T: ---- R, S: - TF5200 | Twin CAT 3 CNC Version: 1.25 35 Axis compensation
## Page 36

General compensation value data (kw.*) Default value 0 Remarks Parameter available as of V3.1.3081.2 and V3.1.3108.4 3.5.8 Crosstalk compensation mode (P-COMP-00082) P-COMP-00082 Crosstalk compensation mode Description This parameter specifies the compensation mode. Parameter kw.crosstalk.mode Data type UNS08 Data range 1 …3 Axis types T Dimension T: ---- R, S: - Default value 1 Remarks Parameter available as of V3.1.3081.2 and V3.1.3108.4 3.5.9 Number of measurement tests in the compensation value list (P-COMP-00083) P-COMP-00083 Number of measurement tests in the compensation value list Description This parameter sets the number of measurement tests specified in the compensation value list. Parameter kw.crosstalk.max_points Data type UNS32 Data range 0 ≤ P-COMP-00083 < 15 Axis types T Dimension T: ---- R, S: - Default value 0 Remarks Parameter available as of V3.1.3081.2 and V3.1.3108.4 3.5.10 Different compensation values for different motion directions (P-COMP-00084) P-COMP-00084 Different compensation values for different motion directions Description This parameter sets whether a compensation should use different compensation values for different motion directions. Parameter kw.crosstalk.velocity_dependent Data type BOOLEAN Data range 0 / 1 Axis types T Dimension T: ---- R, S: - Default value 0 Remarks Parameter available as of V3.1.3081.2 and V3.1.3108.4 3.5.11 Position of the first adaptation axis with acceleration test (P- COMP-00085) P-COMP-00085 Position of the first adaptation axis with acceleration test Description This parameter specifies the position of the first adaptation axis for the ith acceleration test. 36 Version: 1.25 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 37

General compensation value data (kw.*) Parameter kw.crosstalk.position[i].ax_1 Data type SGN64 Data range MIN(SGN64) ≤ P-COMP-00085 < MAX(SGN64) Axis types T Dimension T: [0.1 µm] R, S: - Default value 0 Remarks Parameter available as of V3.1.3081.2 and V3.1.3108.4 3.5.12 Position of the second adaptation axis with acceleration test (P-COMP-00086) P-COMP-00086 Position of the second adaptation axis with acceleration test Description This parameter specifies the position of the second adaptation axis for the ith acceleration test. Parameter kw.crosstalk.position[i].ax_2 Data type SGN64 Data range MIN(SGN64) ≤ P-COMP-00086 < MAX(SGN64) Axis types T Dimension T: [0.1 µm] R, S: - Default value 0 Remarks Parameter available as of V3.1.3081.2 and V3.1.3108.4 3.5.13 Compensation value for acceleration in positive motion direction (P-COMP-00087) P-COMP-00087 Compensation value for acceleration in positive motion direction Description Compensation value at position i for acceleration in positive motion direction. Parameter kw.crosstalk.position[i].correction_accelerate_dir_pos Data type SGN64 Data range MIN(SGN64) ≤ P-COMP-00087 < MAX(SGN64) Axis types T Dimension T: [0.1 µm] R, S: - Default value 0 Remarks Parameter available as of V3.1.3081.2 and V3.1.3108.4 3.5.14 Compensation value for acceleration in negative motion direction (P-COMP-00088) P-COMP-00088 Compensation value for acceleration in negative motion direction Description Compensation value at position i for acceleration in negative motion direction. Parameter kw.crosstalk.position[i].correction_accelerate_dir_neg Data type SGN64 Data range MIN(SGN64) ≤ P-COMP-00088 < MAX(SGN64) Axis types T Dimension T: [0.1 µm] R, S: - Default value 0 Remarks Parameter available as of V3.1.3081.2 and V3.1.3108.4 This parameter is only active if P-COMP-00084 [} 36] is activated. TF5200 | Twin CAT 3 CNC Version: 1.25 37 Axis compensation
## Page 38

General compensation value data (kw.*) 3.5.15 Compensation value for deceleration in positive motion direction (P-COMP-00089) P-COMP-00089 Compensation value for deceleration in positive motion direction Description Compensation value at position i for deceleration in positive motion direction. Parameter kw.crosstalk.position[i].correction_decelerate_dir_pos Data type This parameter is only active if P-COMP-00084 is activated. Data range MIN(SGN64) ≤ P-COMP-00089 < MAX(SGN64) Axis types T Dimension T: [0.1 µm] R, S: - Default value 0 Remarks Parameter available as of V3.1.3081.2 and V3.1.3108.4 3.5.16 Compensation value for deceleration in negative motion direction (P-COMP-00090) P-COMP-00090 Compensation value for deceleration in negative motion direction Description Compensation value at position i for deceleration in negative motion direction. Parameter kw.crosstalk.position[i].correction_decelerate_dir_neg Data type SGN64 Data range MIN(SGN64) ≤ P-COMP-00090 < MAX(SGN64) Axis types T Dimension T: [0.1 µm] R, S: - Default value 0 Remarks Parameter available as of V3.1.3081.2 and V3.1.3108.4 This parameter is only active if P-COMP-00084 [} 36] is activated. 38 Version: 1.25 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 39

Appendix 4 Appendix 4.1 Discontinued parameters 4.1.1 Unit of the length entries (P-COMP-00003) P-COMP-00003 Unit of the length entries Description The parameter defines the unit to be used for the length entries of compensation values. Parameter kw.crosscomp.unit Data type BOOLEAN Data range 0: Encoder increments 1: Metric (in 0.1 µm) Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0 Remarks 4.1.2 Unit of the length entries (P-COMP-00008) P-COMP-00008 Unit of the length entries Description This parameter defines the unit of the length / position entries. Parameter kw.crosscomp2.unit Data type BOOLEAN Data range 0: Encoder increments 1: Metric (in 0.1 µm) Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0 Remarks TF5200 | Twin CAT 3 CNC Version: 1.25 39 Axis compensation
## Page 40

Support and Service 5 Support and Service Beckhoff and their partners around the world offer comprehensive support and service, making available fast and competent assistance with all questions related to Beckhoff products and system solutions. Download finder Our download finder contains all the files that we offer you for downloading. You will find application reports, technical documentation, technical drawings, configuration files and much more. The downloads are available in various formats. Beckhoff's branch offices and representatives Please contact your Beckhoff branch office or representative for local support and service on Beckhoff products! The addresses of Beckhoff's branch offices and representatives round the world can be found on our internet page: www.beckhoff.com You will also find further documentation for Beckhoff components there. Beckhoff Support Support offers you comprehensive technical assistance, helping you not only with the application of individual Beckhoff products, but also with other, wide-ranging services: • support • design, programming and commissioning of complex automation systems • and extensive training program for Beckhoff system components Hotline: +49 5246 963-157 e-mail: support@beckhoff.com Beckhoff Service The Beckhoff Service Center supports you in all matters of after-sales service: • on-site service • repair service • spare parts service • hotline service Hotline: +49 5246 963-460 e-mail: service@beckhoff.com Beckhoff Headquarters Beckhoff Automation Gmb H & Co. KG Huelshorstweg 20 33415 Verl Germany Phone: +49 5246 963-0 e-mail: info@beckhoff.com web: www.beckhoff.com 40 Version: 1.25 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 41

Index Index P P-COMP-00087 37 P-COMP-00088 37 P-COMP-00001 14 P-COMP-00089 38 P-COMP-00002 14 P-COMP-00090 38 P-COMP-00003 39 P-COMP-00004 15 P-COMP-00005 16 P-COMP-00006 17 P-COMP-00007 17 P-COMP-00008 39 P-COMP-00009 20 P-COMP-00010 21 P-COMP-00011 21 P-COMP-00012 21 P-COMP-00013 22 P-COMP-00014 22 P-COMP-00015 22 P-COMP-00016 24 P-COMP-00017 26 P-COMP-00018 26 P-COMP-00019 26 P-COMP-00020 27 P-COMP-00021 27 P-COMP-00022 27 P-COMP-00023 29 P-COMP-00024 29 P-COMP-00025 29 P-COMP-00026 16 P-COMP-00027 22 P-COMP-00028 27 P-COMP-00029 16 P-COMP-00030 23 P-COMP-00031 19 P-COMP-00032 20 P-COMP-00033 20 P-COMP-00041 31 P-COMP-00042 32 P-COMP-00043 32 P-COMP-00044 32 P-COMP-00045 32 P-COMP-00046 33 P-COMP-00047 33 P-COMP-00057 28 P-COMP-00058 33 P-COMP-00059 25 P-COMP-00060 15 P-COMP-00061 19 P-COMP-00062 31 P-COMP-00063 34 P-COMP-00064 34 P-COMP-00065 34 P-COMP-00066 34 P-COMP-00067 35 P-COMP-00080 35 P-COMP-00081 35 P-COMP-00082 36 P-COMP-00083 36 P-COMP-00084 36 P-COMP-00085 36 P-COMP-00086 37 TF5200 | Twin CAT 3 CNC Version: 1.25 41 Axis compensation
## Page 43

More Information: www.beckhoff.com/TF5200 Beckhoff Automation Gmb H & Co. KG Hülshorstweg 20 33415 Verl Germany Phone: +49 5246 9630 info@beckhoff.com www.beckhoff.com
