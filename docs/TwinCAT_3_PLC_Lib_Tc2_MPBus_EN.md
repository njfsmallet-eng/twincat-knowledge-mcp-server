---
title: "TE1000 Twin CAT 3"
product: "TwinCAT"
category: "PLC"
tags: ["CAT", "PLC", "TWIN"]
language: "EN"
document_type: "Library"
version: "1.12.0"
source_pdf: "https://download.beckhoff.com/download/Document/automation/twincat3/TwinCAT_3_PLC_Lib_Tc2_MPBus_EN.pdf"
release_date: "2025-05-19"
---
Manual | EN TE1000 Twin CAT 3 | PLC Library: Tc2_MPBus 2025-05-19 | Version: 1.12.0
## Page 3

Table of contents Table of contents 1 Foreword.................................................................................................................................................... 5 1.1 Notes on the documentation............................................................................................................. 5 1.2 For your safety.................................................................................................................................. 5 1.3 Notes on information security............................................................................................................ 7 2 Introduction............................................................................................................................................... 8 3 MP-Bus....................................................................................................................................................... 9 3.1 Topology........................................................................................................................................... 9 3.2 Actuator solutions............................................................................................................................ 10 4 Programming........................................................................................................................................... 15 4.1 POUs............................................................................................................................................... 21 4.1.1 Function blocks................................................................................................................ 24 4.1.2 Functions.......................................................................................................................... 99 4.1.3 Error codes..................................................................................................................... 101 4.2 DUTs............................................................................................................................................. 104 4.2.1 Enums............................................................................................................................ 104 4.2.2 Structures....................................................................................................................... 120 4.3 Integration into Twin CAT............................................................................................................... 125 4.3.1 KL6771 with CX5120..................................................................................................... 125 5 Appendix................................................................................................................................................ 129 5.1 Support and Service...................................................................................................................... 129 TE1000 Version: 1.12.0 3
## Page 4

Table of contents 4 Version: 1.12.0 TE1000
## Page 5

Foreword 1 Foreword 1.1 Notes on the documentation This description is intended exclusively for trained specialists in control and automation technology who are familiar with the applicable national standards. The documentation and the following notes and explanations must be complied with when installing and commissioning the components. The trained specialists must always use the current valid documentation. The trained specialists must ensure that the application and use of the products described is in line with all safety requirements, including all relevant laws, regulations, guidelines, and standards. Disclaimer The documentation has been compiled with care. The products described are, however, constantly under development. We reserve the right to revise and change the documentation at any time and without notice. Claims to modify products that have already been supplied may not be made on the basis of the data, diagrams, and descriptions in this documentation. Trademarks Beckhoff®, ATRO® , Ether CAT®, Ether CAT G®, Ether CAT G10®, Ether CAT P®, MX-System®, Safety over Ether CAT®, TC/BSD®, Twin CAT®, Twin CAT/BSD®, Twin SAFE®, XFC®, XPlanar®, and XTS® are registered and licensed trademarks of Beckhoff Automation Gmb H. If third parties make use of the designations or trademarks contained in this publication for their own purposes, this could infringe upon the rights of the owners of the said designations. Ether CAT® is a registered trademark and patented technology, licensed by Beckhoff Automation Gmb H, Germany. Copyright © Beckhoff Automation Gmb H & Co. KG, Germany. The distribution and reproduction of this document, as well as the use and communication of its contents without express authorization, are prohibited. Offenders will be held liable for the payment of damages. All rights reserved in the event that a patent, utility model, or design are registered. Third-party trademarks Trademarks of third parties may be used in this documentation. You can find the trademark notices here: https://www.beckhoff.com/trademarks. 1.2 For your safety Safety regulations Read the following explanations for your safety. Always observe and follow product-specific safety instructions, which you may find at the appropriate places in this document. Exclusion of liability All the components are supplied in particular hardware and software configurations which are appropriate for the application. Modifications to hardware or software configurations other than those described in the documentation are not permitted, and nullify the liability of Beckhoff Automation Gmb H & Co. KG. TE1000 Version: 1.12.0 5
## Page 6

Foreword Personnel qualification This description is only intended for trained specialists in control, automation, and drive technology who are familiar with the applicable national standards. Signal words The signal words used in the documentation are classified below. In order to prevent injury and damage to persons and property, read and follow the safety and warning notices. Personal injury warnings DANGER Hazard with high risk of death or serious injury. WARNING Hazard with medium risk of death or serious injury. CAUTION There is a low-risk hazard that could result in medium or minor injury. Warning of damage to property or environment NOTICE The environment, equipment, or data may be damaged. Information on handling the product This information includes, for example: recommendations for action, assistance or further information on the product. 6 Version: 1.12.0 TE1000
## Page 7

Foreword 1.3 Notes on information security The products of Beckhoff Automation Gmb H & Co. KG (Beckhoff), insofar as they can be accessed online, are equipped with security functions that support the secure operation of plants, systems, machines and networks. Despite the security functions, the creation, implementation and constant updating of a holistic security concept for the operation are necessary to protect the respective plant, system, machine and networks against cyber threats. The products sold by Beckhoff are only part of the overall security concept. The customer is responsible for preventing unauthorized access by third parties to its equipment, systems, machines and networks. The latter should be connected to the corporate network or the Internet only if appropriate protective measures have been set up. In addition, the recommendations from Beckhoff regarding appropriate protective measures should be observed. Further information regarding information security and industrial security can be found in our https://www.beckhoff.com/secguide. Beckhoff products and solutions undergo continuous further development. This also applies to security functions. In light of this continuous further development, Beckhoff expressly recommends that the products are kept up to date at all times and that updates are installed for the products once they have been made available. Using outdated or unsupported product versions can increase the risk of cyber threats. To stay informed about information security for Beckhoff products, subscribe to the RSS feed at https:// www.beckhoff.com/secinfo. TE1000 Version: 1.12.0 7
## Page 8

Introduction 2 Introduction The Tc2_MPBus library is a Twin CAT PLC library for data exchange with MP-Bus devices. This library should only be used in conjunction with a KL6771 (MP-Bus master terminal). The user of this library requires basic knowledge of the following: • Twin CAT XAE • PC and network knowledge • Structure and properties of the Beckhoff Embedded PC and its Bus Terminal system • Technology of MP-Bus devices • Relevant safety regulations for building technical equipment This software library is intended for building automation system partners of Beckhoff Automation Gmb H & Co. KG. The system partners operate in the field of building automation and are concerned with the installation, commissioning, expansion, maintenance and service of measurement, control and regulating systems for the technical equipment of buildings. The Tc2_MPBus library is usable on all hardware platforms that support Twin CAT 3.1 or higher. Hardware documentation in the Beckhoff information system: KL6771 8 Version: 1.12.0 TE1000
## Page 9

MP-Bus 3 MP-Bus MP-bus = multi-point bus The MP-Bus (Multi-Point) is a simple sensor/actuator bus, which is used for certain technical systems of the building automation system. The MP-Bus serves to control HVAC actuators for dampers, control valves and volume flow controllers from the Belimo product range. Up to eight different devices from HVAC systems can be connected to an MP-Bus master using 3-wire technology. Additionally, a sensor can be connected to each of these eight devices; the sensor is addressed by the MP-Bus. An additional range of products with an MP-Bus connection is the FLS window ventilation system by Belimo (see Belimo documentation for the connection of the Belimo actuators). The MP-Bus was developed by Belimo for connecting valves, throttle valves, air valves, fire dampers, and for window ventilation systems. 3.1 Topology There are no restrictions whatsoever with regard to the topological structure of MP-Bus strands: star, ring, tree or mixed topologies are possible. The length of the entire bus strand depends on the selected cable cross-section and the type as well as the number of connected drives! The documentation from the Belimo company contains further information. TE1000 Version: 1.12.0 9
## Page 10

MP-Bus 3.2 Actuator solutions 10 Version: 1.12.0 TE1000
## Page 11

MP-Bus Types ¹ Unit ready for Beckhoff function block extended MP-Bus® ² General air solutions Rotary actuators CM24-MPL-L 2 Nm • MPL_Damper Linear Actuator CM24-MPL-R 2 Nm • LM24A-MP 5 Nm MP_Damper Linear Actuator NM24A-MP 10 Nm SM24A-MP 20 Nm GM24A-MP 40 Nm Rotary actuators with emergency control function TF24-MFT 2 Nm MP_Damper Linear Actuator LF24-MFT2 4 Nm NF24A-MP 10 Nm SF24A-MP 20 Nm EF24A-MP 30 Nm GK24A-MP 40 Nm Linear actuators LH24A-MP... 60/100/200/300 150 Nm MP_Damper Linear Actuator SH24A-MP... 100/200/300 450 Nm Linear actuators with emergency control function LHK24A-MP100 150 Nm MP_Damper Linear Actuator SHK24A-MP100 450 Nm Rotary actuators LU24A-MP 3 Nm MP_Damper Linear Actuator Fast running rotary actuators NMC24A-MP 10 Nm MP_Damper Linear Actuator SMC24A-MP 20 Nm Rotary actuators for special applications NM24P-MP 10 Nm MP_Damper Linear Actuator SM24P-MP 20 Nm GM24G-MP-T 40 Nm Rotary actuators with emergency control function for special applications NF24G-MP-L 10 Nm MP_Damper Linear Actuator SF24G-MP-L 20 Nm GK24G-MP 40 Nm Water solutions Actuators for control ball valves / open-close control ball valves CQ24A-MPL 1 Nm • MPL_Damper Linear Actuator LR24A-MP 5 Nm MP_Damper Linear Actuator NR24A-MP 10 Nm SR24A-MP 20 Nm Actuators with emergency control function for control ball valves / open-close control ball valves TRF24-MFT 2 Nm MP_Damper Linear Actuator LRF24-MP 4 Nm NRF24A-MP 10 Nm Actuators for globe valves TE1000 Version: 1.12.0 11
## Page 12

MP-Bus Types ¹ Unit ready for Beckhoff function block extended MP-Bus® ² LV24A-MP-TPC 500 N MP_Damper Linear Actuator NV24A-MP-TPC 1000 N SV24A-MP-TPC 1500 N EV24A-MP-TPC 2500 N Actuators with emergency control function for globe valves NVK24A-MP-TPC 1000 N MP_Damper Linear Actuator AVK24A-MP-TPC 2000 N Fast running actuators for globe valves LVC24A-MP-TPC 500 N MP_Damper Linear Actuator NVC24A-MP-TPC 1000 N SVC24A-MP-TPC 1500 N Fast running actuators with emergency control function for globe valves NVKC24A-MP-TPC 1000 N MP_Damper Linear Actuator Actuators for dampers SR24A-MP-5 20 Nm MP_Damper Linear Actuator GR24A-MP-5/7 40 Nm DR24A-MP-...5/7 90 Nm PRCA-BAC-S2-T 160 Nm PRKCA-BAC-S2-T 160 Nm SY2-24-MP-T 90 Nm SY2-230-MP-T 90 Nm SY3-24-MP-T 150 Nm SY3-230-MP-T 150 Nm SY4-24-MP-T 400 Nm SY4-230-MP-T 400 Nm SY5-24-MP-T 500 Nm Flow measurement / heating or cooling circuit 22PF-… • MP_Flow Meter_Process MP_Flow Meter_Configuration Safety solutions "BF-Top Line" actuators for fire dampers BKN230-24MP for connection of BF(G)24TL-T-ST 11 / 18 Nm MP_Smoker Standard actuator for fire dampers BKN230-24-C-MP for connection of BF..24-.. ST 4 / 9 / 11 / MP_Smoker 18 Nm Room and system solutions VAV compact rotary actuators LMV-D3-MP 5 Nm MP_VAV NMV-D3-MP 10 Nm SMV-D3-MP 20 Nm VAV compact linear actuators LHV-D3-MP 150 N MP_VAV VAV Universal VRP-M MP_VAV VRU-D3-BAC MP_VRU_Process VRU-M1-BAC MP_VRU_Configuration VRU-M1R-BAC 12 Version: 1.12.0 TE1000
## Page 13

MP-Bus Types ¹ Unit ready for Beckhoff function block extended MP-Bus® ² VAV indoor climate control system CMV-100-MP DN 100 • MP_CMV CMV-125-MP DN 125 • CMV-150-MP DN 150 • CMV-160-MP DN 160 • HVAC performance devices EPIV EP.. R-R6+BAC DN 15-20 • MP_EPIV_R6 MP_EPIV_R6_Parameter EP.. R+MP DN 15-20 MP_EPIV P.. W.. E-MP DN 65-150 EPIV V4 EP.. R2+(K)BAC DN 15-50 • MP_EPIV_V4_Process MP_EPIV_V4_Configuration Energy Valve™ EV.. R+BAC DN 15-50 • MP_EV P.. W.. EV-BAC DN 65-150 • MP_EV_Parameter Energy Valve™ V4 EV.. R2+.. DN 15-50 • MP_Energy Valve V4_Process MP_Energy Valve V4_Configur ation Energy Valve™ V4.2 EV.. R2+.. DN 15-50 • MP_Energy Valve V4_2_Proce ss MP_Energy Valve V4_2_Confi guration Thermal Energy Meter 22PE- .. • MP_TEM_Process 22PEM-.. • MP_TEM_Configuration Flow Meter 22PF-.. • MP_Flow Meter_Process MP_Flow Meter_Configuration Sensors Room sensors in the comfort zone 22RT-19-1 (temp.) • MP_Room Sensor 22RTH-19-1 (temp., rh) • MP_Room Sensor_Parameter 22RTM-19-1 (temp., CO₂, rh) • MS24A-R02-MPX (temp., CO₂) • MP_MPX MS24A-R08-MPX (temp., VOC, CO₂, r H) • Room control units TE1000 Version: 1.12.0 13
## Page 14

MP-Bus Types ¹ Unit ready for Beckhoff function block extended MP-Bus® ² P-22Rxx-1900x-1 • MP_Operating Unit MP_Operating Unit_Configurat ion CO2 MP_Operating Unit_Configurat ion Temp MP_Operating Unit_Configurat ion Display MP_Operating Unit_Configurat ion Ventilation MP_Operating Unit_Configurat ion Status Icons MP_Operating Unit_Configurat ion Offset Values ¹ The currently available product range can be found online at www.belimo.com. ² The marked devices support the extended address range. Up to 16 MP devices (addressed MP1 ... MP16) can be connected to a data line. If unmarked devices are connected to the same data line, the common address range should be limited to 8 MP devices. 14 Version: 1.12.0 TE1000
## Page 15

Programming 4 Programming Function blocks TE1000 Version: 1.12.0 15
## Page 16

Programming Function blocks Description KL6771 [} 26] Communication with a KL6771 MP-Bus master terminal. MP_Addressing [} 27] This function block allows an MP-Bus slave to be addressed. MP_CMV [} 29] This function block is used to control and monitor a volume flow controller. MP_Damper Linear Actuator [} 31] This function block is used to control and monitor an actuator of a damper and of a globe valve. MP_Energy Valve V4_2_Configurati This function block is used to configure the Energy Valve actuators EV.. R2+.. with firmware 4.2.0 or higher. on [} 33] MP_Energy Valve V4_2_Process This function block is suitable for Energy Valve actuators EV.. R2+.. with firmware 4.2.0 or higher. [} 37] MP_Energy Valve V4_Configuration This function block is used to configure the Energy Valve actuators EV... R2+... with firmware 4.0.0 or higher. [} 40] MP_Energy Valve V4_Process This function block is suitable for Energy Valve actuators EV... R2+.. with firmware 4.0.0 or higher. [} 44] MP_EPIV [} 47] This function block is used to control a pressure-independent control ball valve. MP_EPIV_R6 [} 49] This function block is used to control a control ball valve of series EP... R- R6+BAC. MP_EPIV_R6_Parameter [} 51] This function block is used to parameterize actuators of series EP... R- R6+BAC. MP_EPIV_V4_Configuration This function block is used to configure the 2-way EPIV V4 DN 15...50 EP... R2+(K)BAC. [} 52] MP_EPIV_V4_Process [} 54] This function block is suitable for 2-way EPIV V4 DN 15...50 EP... R2+ (K)BAC. MP_EV [} 57] This function block is used to control a control ball valve of series P6... W.. EV-BAC. MP_EV_Parameter [} 59] This function block is used to parameterize actuators. MP_Flow Meter_Configuration This function block is used to configure the flow meters (FM). [} 60] MP_Flow Meter_Process [} 61] This function block is suitable for the flow meters (FM). MP_MPX [} 66] For BELIMO room sensor MS24A-R...-MPX. MP_Operating Unit [} 67] This function block is used to read room sensors of types P-22Rxx-1900x-1. MP_Operating Unit_Configuration This function block is used to configure room sensors of types P-22Rxx-1900x-1. CO2 [} 69] MP_Operating Unit_Configuration This function block is used to configure room sensors of types P-22Rxx-1900x-1. Display [} 71] MP_Operating Unit_Configuration This function block is used to configure room sensors of types P-22Rxx-1900x-1. Offset Values [} 73] MP_Operating Unit_Configuration This function block is used to configure room sensors of types P-22Rxx-1900x-1. Status Icons [} 74] MP_Operating Unit_Configuration T This function block is used to configure room sensors of types P-22Rxx-1900x-1. emp [} 75] MP_Operating Unit_Configuration This function block is used to configure room sensors of types P-22Rxx-1900x-1. Ventilation [} 77] MP_PTH [} 78] This function block is used to control and monitor a PTH sensor. MP_Room Sensor [} 79] This function block is used to read room sensors. MP_Room Sensor_Parameter This function block is used for the parameterization of room sensors. [} 81] 16 Version: 1.12.0 TE1000
## Page 17

Programming Function blocks Description MP_Smoker [} 83] This function block is used to control and monitor a fire damper. MP_TEM_Configuration [} 84] This function block is used to configure the Thermal Energy Meter type 22PE-... and 22PEM-... . MP_TEM_Process [} 86] This function block is suitable for the Thermal Energy Meter type 22PE-... and 22PEM-... . MP_UST_3 [} 87] This function block is used to control and monitor a multi-I/O module UST3. MP_VAV [} 90] This function block is used to control and monitor a volume flow controller. MP_VRU_Configuration [} 92] This function block is used to configure the VAV actuators VRU-D3-BAC, VRU-M1-BAC and VRU-M1R-BAC. MP_VRU_Process [} 94] This function block is suitable for VAV actuators VRU-D3-BAC, VRU-M1- BAC and VRU-M1R-BAC. MP_Window [} 96] This function block is used to control and monitor a window ventilation system (FLS). MPL_Damper Linear Actuator This function block is used to control and monitor an actuator of a damper and of a globe valve. [} 98] Functions Function blocks Description NI1000_Lu S_TO_INT [} 99] This function calculates a temperature from the value of an NI1000 L&S resistor. NI1000_TO_INT [} 99] This function calculates a temperature from the value of an NI1000 resistor. NTC_TO_INT [} 100] This function calculates a temperature from the value of an NTC resistor. PT1000_TO_INT [} 100] This function calculates a temperature from the value of a PT1000 resistor. TE1000 Version: 1.12.0 17
## Page 18

Programming Enums 18 Version: 1.12.0 TE1000
## Page 19

Programming Data types Description Data_Window [} 106] Ventilation type. E_MP_Air Quality Status [} 106] Status of the measured air quality. E_MP_Display Background [} 107] Background color of the display. E_MP_Display Mode Button [} 107] Display mode of the buttons. E_MP_Display Mode Heating Cooling Display mode of heating or cooling icons. [} 107] E_MP_Display Mode Icon Warning Display mode of the warning icon. [} 107] E_MP_Display Mode Icon Window Display mode of the window icon. [} 108] E_MP_Display Mode Temp [} 108] Display mode temperature. E_MP_Display Mode Temp Unit Display mode of the unit for the temperature. [} 108] E_MP_Display Mode Ventilation Stage Number of adjustable ventilation stages shown on the display. [} 108] E_MP_Display Visibility [} 109] Visibility on the display. E_MP_Enabled Status [} 109] Enabled status. E_MP_EP_R_R6_Unit Sel [} 109] Scaling. E_MP_EV_V4_Bus Fail Action [} 110] Bus failure action. E_MP_EV_V4_Command [} 110] Command for service and test functions of the actuator. E_MP_EV_V4_Control Mode [} 110] Control mode. E_MP_EV_V4_Delta TLimitation Response to a low delta T. [} 111] E_MP_EV_V4_Delta TManager Status Status from Delta T Manager. [} 111] E_MP_EV_V4_Override Control Setpoint override. [} 111] E_MP_EV_V4_Sensor1Passive Type Passive sensor. [} 112] E_MP_EV_V4_Sensor1Type [} 112] External sensor at input S1. E_MP_System Operation Mode Operation mode of the system. [} 113] E_MP_VRU_Application [} 114] Visualization of the application selected by the manufacturer. E_MP_VRU_Command [} 114] Commands for service and test functions of the actuator. E_MP_VRU_Override Control [} 114] Setpoint override. E_MP_VRU_Room Pressure Cascade Room pressure cascade control. [} 115] E_MP_VRU_Sensor1Type [} 115] External sensor at input S1. E_MPBus_Control Mode [} 116] Control mode. E_MPBus_Delta TLimitation [} 116] Delta T (d T) limitation. E_MPBus_Override [} 116] Override mode. E_MPBus_Override_6way MPIV Override control mode. [} 117] MP_ERROR [} 117] Error messages. UST3_EX [} 119] Voltage scaling. TE1000 Version: 1.12.0 19
## Page 20

Programming Data types Description UST3_R_SET [} 119] Resistance scaling. Structures Data types Description Data KL6771 [} 120] Links the send and receive blocks with the function block KL6771. MP_BUS_MPX_ERROR [} 120] Error messages of the "MPX" sensors. MP_Serial_Number [} 121] Serial number of the device. ST_MP_EV_V4_2_Malfunction Ser Malfunction and service information. vice Info [} 121] ST_MP_EV_V4_Malfunction Servi Malfunction and service information. ce Info [} 122] ST_MP_JR_Malfunction Service Inf Malfunction and service information. o [} 123] ST_MP_VRU_Service Info [} 123] Malfunction and service information. ST_State EV [} 124] Information on the state of the EV. UST3_SET [} 125] Data structure for setting the scaling and the resistance measurement. 20 Version: 1.12.0 TE1000
## Page 21

Programming 4.1 POUs Function blocks TE1000 Version: 1.12.0 21
## Page 22

Programming Function blocks Description KL6771 [} 26] Communication with a KL6771 MP-Bus master terminal. MP_Addressing [} 27] This function block allows an MP-Bus slave to be addressed. MP_CMV [} 29] This function block is used to control and monitor a volume flow controller. MP_Damper Linear Actuator [} 31] This function block is used to control and monitor an actuator of a damper and of a globe valve. MP_Energy Valve V4_2_Configurati This function block is used to configure the Energy Valve actuators EV.. R2+.. with firmware 4.2.0 or higher. on [} 33] MP_Energy Valve V4_2_Process This function block is suitable for Energy Valve actuators EV.. R2+.. with firmware 4.2.0 or higher. [} 37] MP_Energy Valve V4_Configuration This function block is used to configure the Energy Valve actuators EV... R2+... with firmware 4.0.0 or higher. [} 40] MP_Energy Valve V4_Process This function block is suitable for Energy Valve actuators EV... R2+.. with firmware 4.0.0 or higher. [} 44] MP_EPIV [} 47] This function block is used to control a pressure-independent control ball valve. MP_EPIV_R6 [} 49] This function block is used to control a control ball valve of series EP... R- R6+BAC. MP_EPIV_R6_Parameter [} 51] This function block is used to parameterize actuators of series EP... R- R6+BAC. MP_EPIV_V4_Configuration This function block is used to configure the 2-way EPIV V4 DN 15...50 EP... R2+(K)BAC. [} 52] MP_EPIV_V4_Process [} 54] This function block is suitable for 2-way EPIV V4 DN 15...50 EP... R2+ (K)BAC. MP_EV [} 57] This function block is used to control a control ball valve of series P6... W.. EV-BAC. MP_EV_Parameter [} 59] This function block is used to parameterize actuators. MP_Flow Meter_Configuration This function block is used to configure the flow meters (FM). [} 60] MP_Flow Meter_Process [} 61] This function block is suitable for the flow meters (FM). MP_MPX [} 66] For BELIMO room sensor MS24A-R...-MPX. MP_Operating Unit [} 67] This function block is used to read room sensors of types P-22Rxx-1900x-1. MP_Operating Unit_Configuration This function block is used to configure room sensors of types P-22Rxx-1900x-1. CO2 [} 69] MP_Operating Unit_Configuration This function block is used to configure room sensors of types P-22Rxx-1900x-1. Display [} 71] MP_Operating Unit_Configuration This function block is used to configure room sensors of types P-22Rxx-1900x-1. Offset Values [} 73] MP_Operating Unit_Configuration This function block is used to configure room sensors of types P-22Rxx-1900x-1. Status Icons [} 74] MP_Operating Unit_Configuration T This function block is used to configure room sensors of types P-22Rxx-1900x-1. emp [} 75] MP_Operating Unit_Configuration This function block is used to configure room sensors of types P-22Rxx-1900x-1. Ventilation [} 77] MP_PTH [} 78] This function block is used to control and monitor a PTH sensor. MP_Room Sensor [} 79] This function block is used to read room sensors. MP_Room Sensor_Parameter This function block is used for the parameterization of room sensors. [} 81] 22 Version: 1.12.0 TE1000
## Page 23

Programming Function blocks Description MP_Smoker [} 83] This function block is used to control and monitor a fire damper. MP_TEM_Configuration [} 84] This function block is used to configure the Thermal Energy Meter type 22PE-... and 22PEM-... . MP_TEM_Process [} 86] This function block is suitable for the Thermal Energy Meter type 22PE-... and 22PEM-... . MP_UST_3 [} 87] This function block is used to control and monitor a multi-I/O module UST3. MP_VAV [} 90] This function block is used to control and monitor a volume flow controller. MP_VRU_Configuration [} 92] This function block is used to configure the VAV actuators VRU-D3-BAC, VRU-M1-BAC and VRU-M1R-BAC. MP_VRU_Process [} 94] This function block is suitable for VAV actuators VRU-D3-BAC, VRU-M1- BAC and VRU-M1R-BAC. MP_Window [} 96] This function block is used to control and monitor a window ventilation system (FLS). MPL_Damper Linear Actuator This function block is used to control and monitor an actuator of a damper and of a globe valve. [} 98] Functions Function blocks Description NI1000_Lu S_TO_INT [} 99] This function calculates a temperature from the value of an NI1000 L&S resistor. NI1000_TO_INT [} 99] This function calculates a temperature from the value of an NI1000 resistor. NTC_TO_INT [} 100] This function calculates a temperature from the value of an NTC resistor. PT1000_TO_INT [} 100] This function calculates a temperature from the value of a PT1000 resistor. TE1000 Version: 1.12.0 23
## Page 24

Programming 4.1.1 Function blocks 24 Version: 1.12.0 TE1000
## Page 25

Programming Function blocks Description KL6771 [} 26] Communication with a KL6771 MP-Bus master terminal. MP_Addressing [} 27] This function block allows an MP-Bus slave to be addressed. MP_CMV [} 29] This function block is used to control and monitor a volume flow controller. MP_Damper Linear Actuator [} 31] This function block is used to control and monitor an actuator of a damper and of a globe valve. MP_Energy Valve V4_2_Configurati This function block is used to configure the Energy Valve actuators EV.. R2+.. with firmware 4.2.0 or higher. on [} 33] MP_Energy Valve V4_2_Process This function block is suitable for Energy Valve actuators EV.. R2+.. with firmware 4.2.0 or higher. [} 37] MP_Energy Valve V4_Configuration This function block is used to configure the Energy Valve actuators EV... R2+... with firmware 4.0.0 or higher. [} 40] MP_Energy Valve V4_Process This function block is suitable for Energy Valve actuators EV... R2+.. with firmware 4.0.0 or higher. [} 44] MP_EPIV [} 47] This function block is used to control a pressure-independent control ball valve. MP_EPIV_R6 [} 49] This function block is used to control a control ball valve of series EP... R- R6+BAC. MP_EPIV_R6_Parameter [} 51] This function block is used to parameterize actuators of series EP... R- R6+BAC. MP_EPIV_V4_Configuration This function block is used to configure the 2-way EPIV V4 DN 15...50 EP... R2+(K)BAC. [} 52] MP_EPIV_V4_Process [} 54] This function block is suitable for 2-way EPIV V4 DN 15...50 EP... R2+ (K)BAC. MP_EV [} 57] This function block is used to control a control ball valve of series P6... W.. EV-BAC. MP_EV_Parameter [} 59] This function block is used to parameterize actuators. MP_Flow Meter_Configuration This function block is used to configure the flow meters (FM). [} 60] MP_Flow Meter_Process [} 61] This function block is suitable for the flow meters (FM). MP_MPX [} 66] For BELIMO room sensor MS24A-R...-MPX. MP_Operating Unit [} 67] This function block is used to read room sensors of types P-22Rxx-1900x-1. MP_Operating Unit_Configuration This function block is used to configure room sensors of types P-22Rxx-1900x-1. CO2 [} 69] MP_Operating Unit_Configuration This function block is used to configure room sensors of types P-22Rxx-1900x-1. Display [} 71] MP_Operating Unit_Configuration This function block is used to configure room sensors of types P-22Rxx-1900x-1. Offset Values [} 73] MP_Operating Unit_Configuration This function block is used to configure room sensors of types P-22Rxx-1900x-1. Status Icons [} 74] MP_Operating Unit_Configuration T This function block is used to configure room sensors of types P-22Rxx-1900x-1. emp [} 75] MP_Operating Unit_Configuration This function block is used to configure room sensors of types P-22Rxx-1900x-1. Ventilation [} 77] MP_PTH [} 78] This function block is used to control and monitor a PTH sensor. MP_Room Sensor [} 79] This function block is used to read room sensors. MP_Room Sensor_Parameter This function block is used for the parameterization of room sensors. [} 81] TE1000 Version: 1.12.0 25
## Page 26

Programming Function blocks Description MP_Smoker [} 83] This function block is used to control and monitor a fire damper. MP_TEM_Configuration [} 84] This function block is used to configure the Thermal Energy Meter type 22PE-... and 22PEM-... . MP_TEM_Process [} 86] This function block is suitable for the Thermal Energy Meter type 22PE-... and 22PEM-... . MP_UST_3 [} 87] This function block is used to control and monitor a multi-I/O module UST3. MP_VAV [} 90] This function block is used to control and monitor a volume flow controller. MP_VRU_Configuration [} 92] This function block is used to configure the VAV actuators VRU-D3-BAC, VRU-M1-BAC and VRU-M1R-BAC. MP_VRU_Process [} 94] This function block is suitable for VAV actuators VRU-D3-BAC, VRU-M1- BAC and VRU-M1R-BAC. MP_Window [} 96] This function block is used to control and monitor a window ventilation system (FLS). MPL_Damper Linear Actuator This function block is used to control and monitor an actuator of a damper and of a globe valve. [} 98] 4.1.1.1 KL6771 This function block takes care of communication with the KL6771 MP-Bus master terminal. The KL6771 is configured with this function block, and data exchange with the MP network is started. Restrictions • Only one call per instance • Call must be made once per PLC cycle • Instance must be called in the same PLC task as the send and receive blocks assigned to it Inputs VAR_INPUT KL6771_IN : ARRAY [0..11] OF BYTE; END_VAR Name Type Description KL6771_IN ARRAY OF BYTE Is linked with the MP-Bus master terminal's input process image. Outputs VAR_OUTPUT KL6771_OUT : ARRAY [0..11] OF BYTE; str Data KL6771 : Data KL6771; b Error : BOOL; Error Code : MP_Error; Bus Load : INT := -1; END_VAR 26 Version: 1.12.0 TE1000
## Page 27

Programming Name Type Description KL6771_OUT ARRAY OF BYTE Is linked with the MP-Bus master terminal's output process image. str Data KL6771 Data KL6771 [} 120] A data structure that is linked with the various MP-Bus function blocks, and which contains communication with the KL6771 function block. b Error BOOL This output goes TRUE as soon as an error occurs. This error is described via the i Error Id variable. Error Code MP_ERROR [} 117] This output outputs an error code in the event of an error. b Error goes TRUE at the same time Bus Load INT MP-Bus load in percent. Requirements Development environment PLC library to include Twin CAT from v3.1.4020.14 Tc2_MPBus from 3.3.5.0 4.1.1.2 MP_Addressing This function block allows an MP-Bus slave to be addressed. It is also possible to use this function block to read the serial number of the slave. MP_Address is used to transfer the address of the slave that is addressed or whose serial number is to be read. The serial number is read out on a rising edge of b Read Addr. It is output through MP_Serial_Numer_Out. A rising edge of b Addr Auto addresses a slave whose address is MP_Address. The function block waits for the time set in TMOUT for the transmission of the slave with its serial number. Transmission of the serial number is initiated differently from one slave to another. Please see the documentation for the MP-Bus device for how the serial number can be sent (in most cases there is a switch on the drive which will trigger this action when pressed). No telegrams are sent to the slaves during the time specified by TMOUT. A rising edge at b Addr Manual initiates manual addressing. This requires the serial number of the drive to be stored in MP_Serial_Number_In. The serial number of the slave can be found on a sticker on the drive. Sample: 00234-00016-002-031. Enter the following in the variable MP_Serial_Number_IN: Year And Week = 234 Day And Number = 16 Device Family = 2 Test Station = 31 Family Suffix = is not evaluated, and should therefore be ignored. b Busy is set for as long as the function block is active. An error is indicated through b Error, while the error number can be read with i Error Id. TE1000 Version: 1.12.0 27
## Page 28

Programming Inputs VAR_INPUT MP_Address : USINT := 1; b Addr Auto : BOOL; b Read Addr : BOOL; b Addr Manual : BOOL; MP_Serial_Number_IN : MP_Serial_Number; TMOUT : TIME := t#30s; str Data KL6771 : Data KL6771; END_VAR Name Type Description MP_Address USINT The MP address that is to be used for the addressing or for reading the serial number. Valid values (1...8). b Addr Auto BOOL A positive edge starts the function block. The function block halts other MP-Bus communication, and waits until the time set through TMOUT has elapsed for an MP-Bus slave has transmitted its serial number, for instance in response to pressing a switch. The MP-Bus address that has been configured in the MP_Address variable is then transmitted to the slave. b Read Addr BOOL A positive edge starts the function block. The function block reads the serial number of the MP-Bus slave whose address is MP_Address. b Addr Manual BOOL A positive edge starts the function block. The function block addresses the slave that has serial number MP_Serial_Number_IN. The slave's addresses configured with MP_Address. MP_Serial_Number_ MP_Serial_Number [} 121] Serial number of the device IN TMOUT TIME Automatic addressing is interrupted after the time specified by TMOUT. str Data KL6771 Data KL6771 [} 120] The data structure with which the KL6771() [} 26] function block must be linked. Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; i Error Id : MP_Error; MP_Serial_Number_OUT : MP_Serial_Number; END_VAR Name Type Description b Busy BOOL This bit is set for as long as the function block is active. b Error BOOL This output goes TRUE as soon as an error occurs. This error is described via the i Error Id variable. i Error Id MP_ERROR [} 117] This output outputs an error code in the event of an error. b Error goes TRUE at the same time. MP_Serial_Number_ MP_Serial_Number [} 121] The serial number of the addressed or requested slave. OUT Requirements Development environment PLC library to include Twin CAT from v3.1.4020.14 Tc2_MPBus from 3.3.5.0 28 Version: 1.12.0 TE1000
## Page 29

Programming 4.1.1.3 MP_CMV This function block is used to control and monitor a volume flow regulator. MP_Address is used to specify the MP-Bus device with which the function block is to communicate. b Start activates communication with the MP-Bus device. b Busy indicates that the function block is active. If b Start remains TRUE, the device is addressed cyclically with a period specified by the time in TMPolling. The time should be set longer than 1 second. b Error is used to indicate an error in communication with the drive. The type of the error can be read with i Error ID. Inputs VAR_INPUT MP_Address : USINT := 1; b Start : BOOL; b Set : BOOL; b Open : BOOL; b Close : BOOL; b Reset : BOOL; i Sensor Typ : INT; Setpoint : USINT; Max Vol : WORD; Min Vol : WORD; str Data KL6771 : Data KL6771; TMpolling : TIME := t#10s; END_VAR TE1000 Version: 1.12.0 29
## Page 30

Programming Name Type Description MP_Address USINT MP-Bus address of the slave. b Start BOOL A positive edge starts the function block. If this remains continuously TRUE, the function block will be activated cyclically with a period specified by the time in TMPolling. b Set BOOL A positive edge writes the data Max Vol and Min Vol to the actuator. b Open BOOL A positive edge opens the dampers of the actuator, while a negative edge cancels the forced ventilation. b Close BOOL A positive edge closes the dampers of the actuator, while a negative edge cancels the forced closure. b Reset BOOL A positive edge resets the actuator's error messages. i Sensor Typ INT 0: no sensor connected, 1: digital sensor connected, 2: analog sensor connected (0...35 V), 3...6: output of a resistance in ohms (3..5 applies to PT1000, NI1000 and NI1000Lu S; 6 applies to NTC). To convert to a temperature, use the corresponding conversion functions. Setpoint USINT Set volume flow rate in % (0..100). Max Vol WORD Maximum volume flow rate in % (30..100). Min Vol WORD 0…100 % Minimum volume flow rate str Data KL6771 Data KL6771 [} 120] The data structure with which the KL6771() [} 26] function block must be linked. TMpolling TIME The time for which the function block should address the actuator. Default 10 s, minimum time 1 s. Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; i Error Id : MP_Error; Act Value : WORD; b MP_Sensor_Digi : BOOL; i MP_Sensor_Analog : INT; Air Volume_m3h : WORD; i Vnom_m3h : INT; act_Max Vol : INT; act_Min Vol : INT; b Err_Act Hunt : BOOL; b Err_Mec Trv : BOOL; b Err_Mec Ovld : BOOL; r Temperature : LREAL END_VAR 30 Version: 1.12.0 TE1000
## Page 31

Programming Name Type Description b Busy BOOL This bit is set for as long as the function block is active. b Error BOOL This output goes TRUE as soon as an error occurs. This error is described via the i Error Id variable. i Error Id MP_ERROR [} 117] This output outputs an error code in the event of an error. b Error goes TRUE at the same time. Act Value WORD Contains the current position of the actuator (0...100 %). b MP_Sensor_Digi BOOL If a digital sensor is connected, its state is indicated through this variable. i Sensor Typ must be "1". i MP_Sensor_Analog INT If an analog sensor is connected, its value is indicated through this variable. i Sensor Typ must be "2...6". Air Volume_m3h WORD Output of the volume flow rate in m³/h. i Vnom_m3h INT Nominal air volume flow in m³/h. This output is available from version 1.12.0. VAV is read and must be > 0. If 0, then the calculation of Air Volume_m3h is not correct. act_Max Vol INT Maximum set volume flow rate in %. act_Min Vol INT Minimum set volume flow rate in %. b Err_Act Hunt BOOL Actuator error, "Regulating oscillation"; the actuator is swinging backwards and forwards. b Err_Mec Trv BOOL Actuator error, "Positioning angle exceeded"; the actuator has passed more than 10° beyond the adaptation position. b Err_Mec Ovld BOOL Actuator error, "Overload"; the set position could not be reached. r Temperature LREAL Temperature in the duct in °C. Requirements Development environment PLC library to include Twin CAT from v3.1.4022.14 Tc2_MPBus from 3.4.8.0 4.1.1.4 MP_Damper Linear Actuator This function block is used to control and monitor a drive of a damper and of a globe valve. MP_Address is used to specify the MP-Bus device with which the function block is to communicate. b Start activates communication with the MP-Bus device. b Busy indicates that the function block is active. If b Start remains TRUE, the device is addressed cyclically with a period specified by the time in TMPolling. The time should be set longer than 1 second. b Error is used to indicate an error in communication with the drive. The type of the error can be read with i Error ID. A rising edge at b Reset clears any pending error messages from the drive. This resets errors that affect the output variables b Err_Mec Ocld, b Err_Act Hunt and b Err Mec Trv. If the error itself is still present, the drive will set these error bits again. TE1000 Version: 1.12.0 31
## Page 32

Programming Set Point is used to adjust the position of the damper from 0…100%. The current position of the drive can be read through Act Value. If a sensor is connected to the drive, i Sensor Typ should be used to specify the sensor type. If no sensor is connected, the value "0" should be entered, or the variable should be left blank. A digital sensor should be parameterized with "1". The state of the sensor can be interrogated through b MP_Sensor_Digi. Analog sensors "2...6" are output in variable i MP_Sensor_Analog. Inputs VAR_INPUT MP_Address : USINT := 1; b Start : BOOL := TRUE; b Reset : BOOL; i Sensor Typ : INT; Setpoint : USINT; str Data KL6771 : Data KL6771; TMpolling : TIME := t#10s; END_VAR Name Type Description MP_Address USINT MP-Bus address of the slave. b Start BOOL A positive edge starts the function block. If this remains continuously TRUE, the function block will be activated cyclically with a period specified by the time in TMPolling. b Reset BOOL A positive edge resets the actuator's error messages. i Sensor Typ INT 0: no sensor connected, 1: digital sensor connected, 2: analog sensor connected (0..35 V), 3..6: output of a resistance in ohms (3..5 applies to PT1000, NI1000 and NI1000Lu S; 6 applies to NTC). To convert to a temperature, use the corresponding conversion functions. Setpoint USINT 0..100 % set damper position of the actuator. str Data KL6771 Data KL6771 [} 120] The data structure with which the KL6771() [} 26] function block must be linked. TMpolling TIME The time for which the function block should address the actuator. Default 10 s, minimum time 1 s. Outputs VAR_OUTPUT b Busy : BOOL; Act Value : WORD; b MP_Sensor_Digi : BOOL; i MP_Sensor_Analog : INT; i Error ID : MP_Error; b Error : BOOL; b Err_Mec Ovld : BOOL; b Err_Act Hunt : BOOL; b Err_Mec Trv : BOOL; b Position Set By Hand : BOOL; b Synchronisation Active : BOOL; END_VAR 32 Version: 1.12.0 TE1000
## Page 33

Programming Name Type Description b Busy BOOL This bit is set for as long as the function block is active. Act Value WORD Contains the current position of the actuator (0...100 %). b MP_Sensor_Digi BOOL If a digital sensor is connected, its state is indicated through this variable. i Sensor Typ must be "1". i MP_Sensor_Analog INT If an analog sensor is connected, its value is indicated through this variable. i Sensor Typ must be "2...6". i Error Id MP_ERROR [} 117] This output outputs an error code in the event of an error. b Error goes TRUE at the same time. b Error BOOL This output goes TRUE as soon as an error occurs. This error is described via the i Error Id variable. b Err_Mec Ovld BOOL Actuator error, "Overload"; the set position could not be reached. b Err_Act Hunt BOOL Actuator error, "Regulating oscillation"; the actuator is swinging backwards and forwards. b Err_Mec Trv BOOL Actuator error, "Positioning angle exceeded"; the actuator has passed more than 10° beyond the adaptation position. b Position Set By Hand BOOL For drives with production date 0741 or higher. b Synchronisation Act BOOL For drives with production date 0741 or higher. ive Requirements Development environment PLC library to include Twin CAT from v3.1.4020.14 Tc2_MPBus from 3.3.5.0 4.1.1.5 MP_Energy Valve V4_2_Configuration This function block is used to configure the Energy Valve actuators EV.. R2+.. with firmware 4.2.0 or higher. For more information please visit www.belimo.com. TE1000 Version: 1.12.0 33
## Page 34

Programming MP_Address is used to specify the MP-Bus device with which the function block is to communicate. b Start activates communication with the MP-Bus device. b Busy indicates that the function block is active. b Error is used to indicate an error in communication with the actuator. The type of the error can be read with i Error Id. Inputs VAR_INPUT MP_Address : USINT := 1; b Start : BOOL; b Read_Write : BOOL; str Data KL6771 : Data KL6771; n Control Mode_Write : E_MP_EV_V4_Control Mode := 1; n Bus Fail Action_Write : E_MP_EV_V4_Bus Fail Action; n Communication Watchdog_Write : UINT := 120; b Setpoint Source_Write : BOOL := TRUE; n Sensor1Type_Write : E_MP_EV_V4_Sensor1Type; n Sensor1Passive Type_Write : E_MP_EV_V4_Sensor1Passive Type; r Vmin_Write : LREAL; r Vmax_Write : LREAL := 100; r Pmax_Write : LREAL := 100; n Delta TLimitation_Write : E_MP_EV_V4_Delta TLimitation; n Unit Selection_Write : E_MP_EP_R_R6_Unit Sel := E_MP_l_h; r Setpoint Delta T_Write : LREAL := 0; r Setpoint Abs Flow Delta T_Write : LREAL; b Select Meter Register_Write : BOOL; END_VAR 34 Version: 1.12.0 TE1000
## Page 35

Programming Name Type Description MP_Address USINT MP-Bus address of the slave. b Start BOOL A positive edge starts the function block. b Read_Write BOOL If FALSE then READ only; if TRUE then READ and WRITE. str Data KL6771 Data KL6771 [} 120] The data structure with which the KL6771() [} 26] function block must be linked. n Control Mode_Write E_MP_EV_V4_Control Mod Control mode. e [} 116] n Bus Fail Action_Writ E_MP_EV_V4_Bus Fail Actio Bus failure action. e n [} 110] n Communication Wat UINT Communication monitoring in s (5...3600). chdog_Write b Setpoint Source_Wr BOOL TRUE = bus; FALSE = analog ite n Sensor1Type_Writ E_MP_EV_V4_Sensor1Type Sensor 1 Type e [} 112] n Sensor1Passive Ty E_MP_EV_V4_Sensor1Passi Only available if n Sensor1Type_Write <> pe_Write MPBus_EV_Sensor Passive_None. ve Type [} 112] r Vmin_Write LREAL Min. setpoint in % (0... Vmax). Vmin must be smaller than Vmax. r Vmax_Write LREAL Max. setpoint in % (25...100). Refers to Vnom and is taken into account when control mode = flow control. r Pmax_Write LREAL Max. setpoint in % (5...100). Refers to Pnom and is taken into account if control mode = power control. n Delta TLimitation_W E_MP_EV_V4_Delta TLimita Determines whether the device responds to a low delta T. rite tion [} 111] n Unit Selection_Writ E_MP_EP_R_R6_Unit Sel Scaling for r Absolute Flow_Unit Sel. e [} 109] r Setpoint Delta T_Writ LREAL Setpoint Delta T in K (0...55). Is taken into account if the e delta T limitation is active (not disabled). r Setpoint Abs Flow De LREAL Setpoint Abs flow Delta T in l/s (0...100,000). Considered lta T_Write when Delta T limitation is set to "Delta T Manager scaled". b Select Meter Registe BOOL FALSE = certified meter; TRUE = lifetime meter. r_Write Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; i Error Id : MP_Error; n Control Mode : E_MP_EV_V4_Control Mode; n Bus Fail Action : E_MP_EV_V4_Bus Fail Action; n Communication Watchdog : UINT; b Setpoint Source : BOOL; n Sensor1Type : E_MP_EV_V4_Sensor1Type; n Sensor1Passive Type : E_MP_EV_V4_Sensor1Passive Type; r Vmin : LREAL; r Vmax : LREAL; r Vnom : LREAL; r Pnom : LREAL; r Pmax : LREAL; n Delta TLimitation : E_MP_EV_V4_Delta TLimitation; n Delta TManager Status : E_MP_EV_V4_Delta TManager Status; r Setpoint Delta T : LREAL; r Setpoint Abs Flow Delta T : LREAL; ar Serial Number : ARRAY[0..1] OF DWORD; TE1000 Version: 1.12.0 35
## Page 36

Programming b Select Meter Register : BOOL; n Unit Selection : E_MP_EP_R_R6_Unit Sel; END_VAR Name Type Description b Busy BOOL This bit is set for as long as the function block is active. b Error BOOL This output goes TRUE as soon as an error occurs. This error is described via the i Error Id variable. i Error Id MP_ERROR [} 117] This output outputs an error code in the event of an error. b Error goes TRUE at the same time. n Control Mode E_MP_EV_V4_Control Mod Control mode. e [} 116] n Bus Fail Action E_MP_EV_V4_Bus Fail Actio Bus failure action. n [} 110] n Communication Wat UINT Communication monitoring in sec (5...3600). Not functional chdog (reserved for future extensions). b Setpoint Source BOOL TRUE = bus; FALSE = analog n Sensor1Type E_MP_EV_V4_Sensor1Type Sensor 1 Type [} 112] n Sensor1Passive Ty E_MP_EV_V4_Sensor1Passi Only available if n Sensor1Type_Write <> pe MPBus_EV_Sensor Passive_None. ve Type [} 112] r Vmin LREAL Min. setpoint in % (0... Vmax). Refers to Vnom and is taken into account when control mode = flow control. r Vmax LREAL Max. setpoint in % (25...100). Refers to Vnom and is taken into account when control mode = flow control. r Vnom LREAL Nominal volume flow in l/s (0...100) r Pnom LREAL Nominal output in k W (0...21.5). r Pmax LREAL Max. setpoint in % (5...100). Refers to Pnom and is taken into account if control mode = power control. n Delta TLimitation Indicates whether the device responds to a low delta T. E_MP_EV_V4_Delta TLimita tion [} 116] n Delta TManager Stat Indicates the status of the Delta T Manager. us E_MP_EV_V4_Delta TMana ger Status [} 111] r Setpoint Delta T LREAL Setpoint Delta T in K (0...60). Is taken into account if delta T limitation is active (not disabled). r Setpoint Abs Flow De LREAL Setpoint Abs flow Delta T in l/s (0...100.000). Considered lta T when Delta T limitation is set to "Delta T Manager scaled". ar Serial Number ARRAY OF DWORD Serial number of the device. b Select Meter Registe BOOL FALSE = certified meter; TRUE = lifetime meter. r n Unit Selection E_MP_EP_R_R6_Unit Sel Unit selection flow rate. [} 109] Prerequisites Development Environment PLC library to include Twin CAT from v3.1.4024.66 Tc2_MPBus from 3.7.1.0 36 Version: 1.12.0 TE1000
## Page 37

Programming 4.1.1.6 MP_Energy Valve V4_2_Process This function block is suitable for Energy Valve actuators EV.. R2+.. with firmware 4.2.0 or higher. For more information please visit www.belimo.com. MP_Address is used to specify the MP-Bus device with which the function block is to communicate. b Start activates communication with the MP-Bus device. b Busy indicates that the function block is active. b Error is used to indicate an error in communication with the actuator. The type of the error can be read with i Error Id. Inputs VAR_INPUT MP_Address : USINT := 1; b Start : BOOL; str Data KL6771 : Data KL6771; TMpolling : TIME := t#10s; r Setpoint : LREAL; r Absolute Diff Water Pressure Setpoint_Write : LREAL; n Override Control : E_MP_EV_V4_Override Control n Command : E_MP_EV_V4_Command; n Data Read : DWORD := 16#000F_FFFF; END_VAR TE1000 Version: 1.12.0 37
## Page 38

Programming Name Type Description MP_Address USINT MP-Bus address of the slave. b Start BOOL A positive edge starts the function block. If this remains continuously TRUE, the function block will be activated cyclically with a period specified by the time in TMPolling. str Data KL6771 Data KL6771 [} 120] The data structure with which the KL6771() [} 26] function block must be linked. TMpolling TIME The time for which the function block should address the actuator. Default 10 s, minimum time 1 s. r Setpoint LREAL Setpoint in % (0...100). r Absolute Diff Water P LREAL Absolute difference water pressure setpoint in k Pa ressure Setpoint_Wri (10..400). te n Override Control E_MP_EV_V4_Override Con Override the setpoint with defined values. trol [} 111] n Command E_MP_EV_V4_Command Command for service and test functions of the actuator. [} 110] n Data Read DWORD 0x000F_FFFF - Read all data; Bit 0 - Read relative position; Bit 1 - Read absolute position; Bit 2 - Read value sensor 1; Bit 3 - Read analog setpoint; Bit 4 - Read relative volume flow rate; Bit 5 - Read absolute volume flow rate; Bit 6 - Read glycol concentration; Bit 7 - Read temperature1 remote; Bit 8 - Read temperature2 integrated; Bit 9 - Read temperature delta; Bit 10 - Read relative power; Bit 11 - Read absolute cooling power; Bit 12 - Read absolute heating power; Bit 13 - Total volume; Bit 14 - Read cooling energy; Bit 15 - Read heating energy; Bit 16 - Read nominal water differential pressure; Bit 17 - Read absolute water differential pressure; Bit 18 - Read relative water differential pressure Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; i Error Id : MP_Error; str MP_Serial_Number : MP_Serial_Number; r Setpoint_Read : LREAL; n Override Control_Read : E_MP_EV_V4_Override Control; n Command_Read : E_MP_EV_V4_Command; r Absolute Diff Water Pressure Setpoint_Read : LREAL; r Absolute Volumetric Flow Sel Unit : LREAL; st_Malfunction Service : ST_MP_EV_V4_2_Malfunction Service Info; r Relative Position : LREAL; r Absolute Position : LREAL; n Sensor1Value : DINT; r Setpoint Analog : LREAL; r Relative Volumetric Flow : LREAL; r Absolute Volumetric Flow : LREAL; r Glycol Concentration : LREAL; r Temperature1_Remote : LREAL; r Temperature2_Integrated : LREAL; r Delta Temperature : LREAL; r Relative Power : LREAL; r Absolute Cooling Power : LREAL; r Absolute Heating Power : LREAL; r Total Volume : LREAL; n Cooling Energy : DINT; n Heating Energy : DINT; r Nominal Diff Water Pressure : LREAL; r Absolute Diff Water Pressure : LREAL; r Relative Diff Water Pressure : LREAL; END_VAR 38 Version: 1.12.0 TE1000
## Page 39

Programming Name Type Description b Busy BOOL This bit is set for as long as the function block is active. b Error BOOL This output goes TRUE as soon as an error occurs. This error is described via the i Error Id variable. i Error Id MP_ERROR [} 117] This output outputs an error code in the event of an error. b Error goes TRUE at the same time. str MP_Serial_Numb MP_Serial_Number [} 121] Structure for the serial number. er r Setpoint_Read LREAL Setpoint in % (0...100). n Override Control_R E_MP_EV_V4_Override Con Overridden setpoint. ead trol [} 111] n Command_Read E_MP_EV_V4_Command Command. [} 110] r Absolute Diff Water P LREAL Absolute difference water pressure setpoint in k Pa ressure Setpoint_Re (10..400). ad r Absolute Volumetric LREAL Absolute volumetric flow in selected unit. Flow Sel Unit st_Malfunction Servic ST_MP_EV_V4_2_Malfun Error state. e ction Service Info r Relative Position LREAL Relative position in % (0...100). A value of -1 means that the data is disabled (see VAR_INPUT n Data Read.0 = TRUE). r Absolute Position LREAL Absolute position in ° (0...96). A value of -1 means that the data is disabled (see VAR_INPUT n Data Read.1 = TRUE). n Sensor1Value DINT Sensor 1 Value in m V/ohm (0...65535). A value of -1 means that the data is disabled (see VAR_INPUT n Data Read.2 = TRUE). r Setpoint Analog LREAL Analog setpoint in % (0...100). A value of -1 means that the data is disabled (see VAR_INPUT n Data Read.3 = TRUE). r Relative Volumetric F LREAL Relative volume flow rate in % (0...100). A value of -1 low means that the data is disabled (see VAR_INPUT n Data Read.4 = TRUE). r Absolute Volumetric LREAL Absolute volume flow rate in l/s (0...100). A value of -1 Flow means that the data is disabled (see VAR_INPUT n Data Read.5 = TRUE). r Glycol Concentratio LREAL Glycol concentration in % (0...100). A value of -1 means n that the data is disabled (see VAR_INPUT n Data Read.6 = TRUE). r Temperature1_Rem LREAL Temperatur1 remote in °C (-20...12). A value of -1 means ote that the data is disabled (see VAR_INPUT n Data Read.7 = TRUE). r Temperature2_Inte LREAL Temperature2 integrated in °C (-20...12). A value of -1 grated means that the data is disabled (see VAR_INPUT n Data Read.8 = TRUE). r Delta Temperature LREAL Temperature Delta in K (0...14). A value of -1 means that the data is disabled (see VAR_INPUT n Data Read.9 = TRUE). r Relative Power LREAL Relative power in % (0...100). A value of -1 means that the data is disabled (see VAR_INPUT n Data Read.10 = TRUE). r Absolute Cooling Po LREAL Absolute cooling power in k W (0...21.5). A value of -1 wer means that the data is disabled (see VAR_INPUT n Data Read.11 = TRUE). TE1000 Version: 1.12.0 39
## Page 40

Programming Name Type Description r Absolute Heating Po LREAL Absolute heating power in k W (0...21.5). A value of -1 wer means that the data is disabled (see VAR_INPUT n Data Read.12 = TRUE). r Total Volume LREAL Total volume in m³ (0...214748.36). A value of -1 means that the data is disabled (see VAR_INPUT n Data Read.13 = TRUE). n Cooling Energy DINT Cooling energy in k Wh (0...21474836). A value of -1 means that the data is disabled (see VAR_INPUT n Data Read.14 = TRUE). n Heating Energy DINT Heating energy in k Wh (0...21474836). A value of -1 means that the data is disabled (see VAR_INPUT n Data Read.15 = TRUE). r Nominal Diff Water Pr LREAL Nominal water differential pressure in k Pa (0..600). A value essure of -1 means that the data is disabled (see VAR_INPUT n Data Read.16 = TRUE). r Absolute Diff Water P LREAL Absolute water differential pressure in k Pa (0..600). A ressure value of -1 means that the data is disabled (see VAR_INPUT n Data Read.17 = TRUE). r Relative Diff Water Pr LREAL Relative water differential pressure in k Pa (0..100). A value essure of -1 means that the data is disabled (see VAR_INPUT n Data Read.18 = TRUE). Prerequisites Development Environment PLC library to include Twin CAT from v3.1.4024.66 Tc2_MPBus from 3.7.1.0 4.1.1.7 MP_Energy Valve V4_Configuration This function block is used to configure the Energy Valve actuators EV.. R2+.. with firmware 4.0.0 or higher. For more information please visit www.belimo.com. 40 Version: 1.12.0 TE1000
## Page 41

Programming MP_Address is used to specify the MP-Bus device with which the function block is to communicate. b Start activates communication with the MP-Bus device. b Busy indicates that the function block is active. b Error is used to indicate an error in communication with the actuator. The type of the error can be read with i Error Id. Inputs VAR_INPUT MP_Address : USINT := 1; b Start : BOOL; b Read_Write : BOOL; str Data KL6771 : Data KL6771; r Vmax_Write : LREAL := 100; r Vmin_Write : LREAL; b Setpoint Source_Write : BOOL := TRUE; n Sensor1Type_Write : E_MP_EV_V4_Sensor1Type; n Control Mode_Write : E_MP_EV_V4_Control Mode := 1; r Bus Fail Position_Write : LREAL; n Communication Watchdog_Write : UINT; r Pmax_Write : LREAL := 100; n Delta TLimitation_Write : E_MP_EV_V4_Delta TLimitation; r Setpoint Delta T_Write : LREAL := 1.0; r Setpoint Abs Flow Delta T_Write : LREAL; b Select Meter Register_Write : BOOL; END_VAR Name Type Description MP_Address USINT MP-Bus address of the slave. b Start BOOL A positive edge starts the function block. b Read_Write BOOL If FALSE then READ only; if TRUE then READ and WRITE. str Data KL6771 Data KL6771 [} 120] The data structure with which the KL6771() [} 26] function block must be linked. r Vmax_Write LREAL Max. setpoint in % (25...100). Standard 100 %. Refers to Vnom and is taken into account when control mode = flow control. r Vmin_Write LREAL Min. setpoint in % (0... Vmax). Vmin must be smaller than Vmax. b Setpoint Source_Wr BOOL TRUE = bus; FALSE = analog. ite n Sensor1Type_Writ E_MP_EV_V4_Sensor1Type Sensor 1 Type e [} 112] n Control Mode_Write E_MP_EV_V4_Control Mod Control mode e [} 116] r Bus Fail Position_Wri LREAL Not functional. te n Communication Wat UINT Communication monitoring in s (0...3600). Not functional chdog_Write (reserved for future extensions). r Pmax_Write LREAL Max. setpoint in % (5...100). Standard 100 %. Refers to Pnom and is taken into account if control mode = power control. n Delta TLimitation_W E_MP_EV_V4_Delta TLimita Determines whether the device responds to a low delta T. rite tion [} 116] r Setpoint Delta T_Writ LREAL Setpoint Delta T in K (0...60). Standard 1.0K. Is taken into e account if the delta T limitation is active (not disabled). r Setpoint Abs Flow De LREAL Setpoint Abs flow Delta T in l/s (0...100,000). Considered lta T_Write when Delta T limitation is set to "Delta T Manager scaled". b Select Meter Registe BOOL FALSE = certified meter; TRUE = lifetime meter. r_Write TE1000 Version: 1.12.0 41
## Page 42

Programming Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; i Error Id : MP_Error; st_Malfunction Service : St_MP_EV_V4_Malfunction Service Info; n Control Mode : E_MP_EV_V4_Control Mode; r Bus Fail Position : LREAL; n Communication Watchdog : UINT; b Setpoint Source : BOOL; n Sensor1Type : E_MP_EV_V4_Sensor1Type; r Vmin : LREAL; r Vmax : LREAL; r Vnom : LREAL; r Pnom : LREAL; r Pmax : LREAL; n Delta TLimitation : E_MP_EV_V4_Delta TLimitation; n Delta TManager Status : E_MP_EV_V4_Delta TManager Status; r Setpoint Delta T : LREAL; r Setpoint Abs Flow Delta T : LREAL; ar Serial Number : ARRAY[0..1] OF DWORD; b Select Meter Register : BOOL; END_VAR 42 Version: 1.12.0 TE1000
## Page 43

Programming Name Type Description b Busy BOOL This bit is set for as long as the function block is active. b Error BOOL This output goes TRUE as soon as an error occurs. This error is described via the i Error Id variable. i Error Id MP_ERROR [} 117] This output outputs an error code in the event of an error. b Error goes TRUE at the same time. st_Malfunction Servic ST_MP_EV_V4_Malfunctio Malfunction and service information e n Service Info [} 122] n Control Mode E_MP_EV_V4_Control Mod Control mode e [} 116] r Bus Fail Position LREAL Not functional. n Communication Wat UINT Communication monitoring in sec (0...3600). Not functional chdog (reserved for future extensions). b Setpoint Source BOOL TRUE = bus; FALSE = analog n Sensor1Type E_MP_EV_V4_Sensor1Type Sensor 1 Type [} 112] r Vmin LREAL Min. setpoint in % (0... Vmax). Refers to Vnom and is taken into account when control mode = flow control. r Vmax LREAL Max. setpoint in % (25...100). Refers to Vnom and is taken into account when control mode = flow control. r Vnom LREAL Nominal volume flow in l/s (0...100) r Pnom LREAL Nominal output in k W (0...21.5). r Pmax LREAL Max. setpoint in % (5...100). Refers to Pnom and is taken into account if control mode = power control. n Delta TLimitation Indicates whether the device responds to a low delta T. E_MP_EV_V4_Delta TLimita tion [} 116] n Delta TManager Stat Indicates the status of the Delta T Manager. us E_MP_EV_V4_Delta TMana ger Status [} 111] r Setpoint Delta T LREAL Setpoint Delta T in K (0...60). Is taken into account if delta T limitation is active (not disabled). r Setpoint Abs Flow De LREAL Setpoint Abs flow Delta T in l/s (0...100.000). Considered lta T when Delta T limitation is set to "Delta T Manager scaled". ar Serial Number ARRAY OF DWORD Serial number of the device. b Select Meter Registe BOOL FALSE = certified meter; TRUE = lifetime meter. r Requirements Development environment PLC library to include Twin CAT from v3.1.4024.26 Tc2_MPBus from 3.4.14.0 TE1000 Version: 1.12.0 43
## Page 44

Programming 4.1.1.8 MP_Energy Valve V4_Process This function block is suitable for Energy Valve actuators EV.. R2+.. with firmware 4.0.0 or higher. For more information please visit www.belimo.com. MP_Address is used to specify the MP-Bus device with which the function block is to communicate. b Start activates communication with the MP-Bus device. b Busy indicates that the function block is active. If b Start remains TRUE, the device is addressed cyclically with a period specified by the time in TMPolling. The time should be set longer than 1 second. b Error is used to indicate an error in communication with the actuator. The type of the error can be read with i Error Id. Inputs VAR_INPUT MP_Address : USINT := 1; b Start : BOOL; str Data KL6771 : Data KL6771; TMpolling : TIME := t#10s; r Setpoint : LREAL; n Override Control : E_MP_EV_V4_Override Control n Command : E_MP_EV_V4_Command; n Data Read : WORD := 16#FFFF; END_VAR 44 Version: 1.12.0 TE1000
## Page 45

Programming Name Type Description MP_Address USINT MP-Bus address of the slave. b Start BOOL A positive edge starts the function block. If this remains continuously TRUE, the function block will be activated cyclically with a period specified by the time in TMPolling. str Data KL6771 Data KL6771 [} 120] The data structure with which the KL6771() [} 26] function block must be linked. TMpolling TIME The time for which the function block should address the actuator. Default 10 s, minimum time 1 s. r Setpoint LREAL Setpoint in % (0...100). n Override Control E_MP_EV_V4_Override Con Override the setpoint with defined values. trol [} 111] n Command E_MP_EV_V4_Command Command for service and test functions of the actuator. [} 110] n Data Read WORD 0x FFFF - Read all data; Bit 0 - Read relative position; Bit 1 - Read absolute position; Bit 2 - Read value sensor 1; Bit 3 - Read analog setpoint; Bit 4 - Read relative volume flow rate; Bit 5 - Read absolute volume flow rate; Bit 6 - Read glycol concentration; Bit 7 - Read temperature1 remote; Bit 8 - Read temperature2 integrated; Bit 9 - Read temperature delta; Bit 10 - Read relative power; Bit 11 - Read absolute cooling power; Bit 12 - Read absolute heating power; Bit 13 - Total volume; Bit 14 - Read cooling energy; Bit 15 - Read heating energy Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; i Error Id : MP_Error; str MP_Serial_Number : MP_Serial_Number; r Setpoint_Read : LREAL; n Override Control_Read : E_MP_EV_V4_Override Control; n Command_Read : E_MP_EV_V4_Command; r Relative Position : LREAL; r Absolute Position : LREAL; n Sensor1Value : DINT; r Setpoint Analog : LREAL; r Relative Volumetric Flow : LREAL; r Absolute Volumetric Flow : LREAL; r Glycol Concentration : LREAL; r Temperature1_Remote : LREAL; r Temperature2_Integrated : LREAL; r Delta Temperature : LREAL; r Relative Power : LREAL; r Absolute Cooling Power : LREAL; r Absolute Heating Power : LREAL; r Total Volume : LREAL; n Cooling Energy : DINT; n Heating Energy : DINT; END_VAR TE1000 Version: 1.12.0 45
## Page 46

Programming Name Type Description b Busy BOOL This bit is set for as long as the function block is active. b Error BOOL This output goes TRUE as soon as an error occurs. This error is described via the i Error Id variable. i Error Id MP_ERROR [} 117] This output outputs an error code in the event of an error. b Error goes TRUE at the same time. str MP_Serial_Numb MP_Serial_Number [} 121] Structure for the serial number. er r Setpoint_Read LREAL Setpoint in % (0...100) n Override Control_R E_MP_EV_V4_Override Con Overridden setpoint ead trol [} 111] n Command_Read E_MP_EV_V4_Command Command [} 110] r Relative Position LREAL Relative position in % (0...100). A value of -1 means that the data is disabled (see VAR_INPUT n Data Read.0 = TRUE). r Absolute Position LREAL Absolute position in ° (0...96). A value of -1 means that the data is disabled (see VAR_INPUT n Data Read.1 = TRUE). n Sensor1Value DINT Sensor 1 Value in m V/ohm (0...65535). A value of -1 means that the data is disabled (see VAR_INPUT n Data Read.2 = TRUE). r Setpoint Analog LREAL Analog setpoint in % (0...100). A value of -1 means that the data is disabled (see VAR_INPUT n Data Read.3 = TRUE). r Relative Volumetric F LREAL Relative volume flow rate in % (0...100). A value of -1 low means that the data is disabled (see VAR_INPUT n Data Read.4 = TRUE). r Absolute Volumetric LREAL Absolute volume flow rate in l/s (0...100). A value of -1 Flow means that the data is disabled (see VAR_INPUT n Data Read.5 = TRUE). r Glycol Concentratio LREAL Glycol concentration in % (0...100). A value of -1 means n that the data is disabled (see VAR_INPUT n Data Read.6 = TRUE). r Temperature1_Rem LREAL Temperatur1 remote in °C (-20...12). A value of -1 means ote that the data is disabled (see VAR_INPUT n Data Read.7 = TRUE). r Temperature2_Inte LREAL Temperature2 integrated in °C (-20...12). A value of -1 grated means that the data is disabled (see VAR_INPUT n Data Read.8 = TRUE). r Delta Temperature LREAL Temperature Delta in K (0...14). A value of -1 means that the data is disabled (see VAR_INPUT n Data Read.9 = TRUE). r Relative Power LREAL Relative power in % (0...100). A value of -1 means that the data is disabled (see VAR_INPUT n Data Read.10 = TRUE). r Absolute Cooling Po LREAL Absolute cooling power in k W (0...21.5). A value of -1 wer means that the data is disabled (see VAR_INPUT n Data Read.11 = TRUE). r Absolute Heating Po LREAL Absolute heating power in k W (0...21.5). A value of -1 wer means that the data is disabled (see VAR_INPUT n Data Read.12 = TRUE). r Total Volume LREAL Total volume in m³ (0...214748.36). A value of -1 means that the data is disabled (see VAR_INPUT n Data Read.13 = TRUE). n Cooling Energy DINT Cooling energy in k Wh (0...21474836). A value of -1 means that the data is disabled (see VAR_INPUT n Data Read.14 = TRUE). 46 Version: 1.12.0 TE1000
## Page 47

Programming Name Type Description n Heating Energy DINT Heating energy in k Wh (0...21474836). A value of -1 means that the data is disabled (see VAR_INPUT n Data Read.15 = TRUE). Requirements Development environment PLC library to include Twin CAT from v3.1.4024.26 Tc2_MPBus from 3.4.14.0 4.1.1.9 MP_EPIV This function block is used to control a pressure-independent control ball valve. For more information please visit www.belimo.com. MP_Address is used to specify the MP-Bus device with which the function block is to communicate. b Start activates communication with the MP-Bus device. b Busy indicates that the function block is active. If b Start remains TRUE, the device is addressed cyclically with a period specified by the time in TMPolling. The time should be set longer than 1 s. b Error is used to indicate an error in communication with the actuator. The type of the error can be read with i Error Id. Inputs VAR_INPUT MP_Address : USINT := 1; b Start : BOOL; b Set : BOOL; b Open : BOOL; b Close : BOOL; b Reset : BOOL; i Sensor Typ : INT; Setpoint : USINT; Max Vol : WORD; str Data KL6771 : Data KL6771; TMpolling : TIME := t#10s; END_VAR TE1000 Version: 1.12.0 47
## Page 48

Programming Name Type Description MP_Address USINT MP-Bus address of the slave. b Start BOOL A positive edge starts the function block. If this remains continuously TRUE, the function block will be activated cyclically with a period specified by the time in TMPolling. b Set BOOL A positive edge writes the data Max Vol and Min Vol to the actuator. b Open BOOL A positive edge opens the dampers of the actuator, while a negative edge cancels the forced ventilation. b Close BOOL A positive edge closes the dampers of the actuator, while a negative edge cancels the forced closure. b Reset BOOL A positive edge resets the actuator's error messages. i Sensor Typ INT 0: no sensor connected, 1: digital sensor connected, 2: analog sensor connected (0...35 V), 3...6: output of a resistance in ohms (3..5 applies to PT1000, NI1000 and NI1000Lu S; 6 applies to NTC). To convert to a temperature, use the corresponding conversion functions. Setpoint USINT Set volume flow rate in % (0..100). Max Vol WORD Maximum volume flow rate in % (30..100). str Data KL6771 Data KL6771 [} 120] The data structure with which the KL6771() [} 26] function block must be linked. TMpolling TIME The time for which the function block should address the actuator. Default 10 s, minimum time 1 s. Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; i Error Id : MP_Error; Act Value : WORD; b MP_Sensor_Digi : BOOL; i MP_Sensor_Analog : INT; Volume_lmin : WORD; i Vnom_lmin : INT; act_Max Vol : INT; act_Min Vol : INT; b Err_Act Hunt : BOOL; b Err_Mec Trv : BOOL; b Err_Mec Ovld : BOOL; b Position Set By Hand : BOOL; b Synchronisation Active : BOOL; END_VAR 48 Version: 1.12.0 TE1000
## Page 49

Programming Name Type Description b Busy BOOL This bit is set for as long as the function block is active. b Error BOOL This output goes TRUE as soon as an error occurs. This error is described via the i Error Id variable. i Error Id MP_ERROR [} 117] This output outputs an error code in the event of an error. b Error goes TRUE at the same time. Act Value WORD Contains the current position of the actuator (0..100 %). b MP_Sensor_Digi BOOL If a digital sensor is connected, its state is indicated through this variable. i Sensor Typ must be "1". i MP_Sensor_Analog INT If an analog sensor is connected, its value is indicated through this variable. i Sensor Typ must be "2...6". Volume_lmin WORD Output of volume flow rate in l/min. i Vnom_lmin INT Nominal air volume flow in l/min. act_Max Vol INT Maximum set volume flow rate in %. act_Min Vol INT Minimum set volume flow rate in %. b Err_Act Hunt BOOL Actuator error, "Regulating oscillation"; the actuator is swinging backwards and forwards. b Err_Mec Trv. BOOL Actuator error, "Positioning angle exceeded": the actuator has passed more than 10° beyond the adaptation position. b Err_Mec Ovld. BOOL Actuator error, "Overload"; the set position could not be reached. b Position Set By Hand BOOL The actuator position was changed manually. b Synchronisation Act BOOL The actuator is synchronizing. ive Requirements Development environment PLC library to include Twin CAT from v3.1.4020.32 Tc2_MPBus from 3.4.6.0 4.1.1.10 MP_EPIV_R6 This function block is used to control a control ball valve of series EP.. R-R6+BAC. MP_Address is used to specify the MP-Bus device with which the function block is to communicate. b Start activates communication with the MP-Bus device. b Busy indicates that the function block is active. If b Start remains TRUE, the device is addressed cyclically with a period specified by the time in TMPolling. The time should be set longer than 1 second. b Error is used to indicate an error in communication with the drive. The type of the error can be read with i Error ID. TE1000 Version: 1.12.0 49
## Page 50

Programming Inputs VAR_INPUT MP_Address : USINT := 1; b Start : BOOL := TRUE; str Data KL6771 : Data KL6771; TMpolling : TIME := t#10s; n Override Control_Write : E_MPBus_Override_6way MPIV := MPBus_6way MPIV_None; r Setpoint_Write : LREAL; END_VAR Name Type Description MP_Address USINT MP-Bus address of the slave. b Start BOOL A positive edge starts the function block. If this remains continuously TRUE, the function block will be activated cyclically with a period specified by the time in TMPolling. str Data KL6771 Data KL6771 [} 120] The data structure with which the KL6771() [} 26] function block must be linked. TMpolling TIME The time for which the function block should address the actuator. Default 10 s, minimum time 1 s. n Override Control_W E_MPBus_Override_6way M The relative setpoint is ignored in override control mode. rite Overriding is disabled if the command is not repeated PIV [} 117] within 120 minutes. r Setpoint_Write LREAL Setpoint in % (0...100). Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; i Error Id : MP_Error; n Override Control_Read : E_MPBus_Override_6way MPIV; r Setpoint_Read : LREAL; r Relative Pos_Read : LREAL; r Absolute Pos_Read : LREAL; r Relative Flow_Read : LREAL; b Error State Flow Sensor Err : BOOL; b Error State Actuator_can_not_move : BOOL; st_State EV : st_State EV; r Absolute Flow_Unit Sel : LREAL; END_VAR Name Type Description b Busy BOOL This bit is set for as long as the function block is active. b Error BOOL This output goes TRUE as soon as an error occurs. This error is described via the i Error Id variable. i Error Id MP_ERROR [} 117] This output outputs an error code in the event of an error. b Error goes TRUE at the same time. n Override Control_R E_MPBus_Override_6way M Override mode. ead PIV [} 117] r Setpoint_Read LREAL Setpoint in % (0...100 %).. r Relative Pos_Read LREAL Relative position in % (0...100 %). r Absolute Pos_Read LREAL Absolute position in °. r Relative Flow_Read LREAL Relative flow rate in % (0...100 %). b Error State Flow Sen BOOL Flow sensor is faulty. sor Err b Error State Actuator BOOL Actuator cannot move. _can_not_move st_State EV St_State EV [} 124] Only devices from 27 March 2014. r Absolute Flow_Unit LREAL Absolute flow rate in Unit Sel (0...4294967295). Sel 50 Version: 1.12.0 TE1000
## Page 51

Programming Requirements Development environment PLC library to include Twin CAT from v3.1.4022.14 Tc2_MPBus from 3.4.8.0 4.1.1.11 MP_EPIV_R6_Parameter This function block is used to parameterize drives of series EP.. R-R6+BAC. MP_Address is used to specify the MP-Bus device with which the function block is to communicate. b Start activates communication with the MP-Bus device. b Busy indicates that the function block is active. b Error is used to indicate an error in communication with the drive. The type of the error can be read with i Error ID. Inputs VAR_INPUT MP_Address : USINT := 1; b Start : BOOL := TRUE; b Read_Write : BOOL; str Data KL6771 : Data KL6771; n Unit Selection_Write : E_MP_EP_R_R6_Unit Sel := E_MP_l_h; b Control Mode_Write : BOOL; r Vmax Seq1_Write : LREAL; r Vmax Seq2_Write : LREAL; END_VAR Name Type Description MP_Address USINT MP-Bus address of the slave. b Start BOOL A positive edge starts the function block. If this remains continuously TRUE, the function block will be activated cyclically with a period specified by the time in TMPolling. b Read_Write BOOL If FALSE then READ only; if TRUE then READ and WRITE. str Data KL6771 Data KL6771 [} 120] The data structure with which the KL6771() [} 26] function block must be linked. n Unit Selection_Writ E_MP_EP_R_R6_Unit Sel Scaling for r Absolute Flow_Unit Sel e [} 109] b Control Mode_Write BOOL FALSE: position-controlled, TRUE: flow-controlled. r Vmax Seq1_Write LREAL Maximum sequence speed 1 in % (0..100). r Vmax Seq2_Write LREAL Maximum sequence speed 2 in % (0..100). Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; i Error Id : MP_Error; str MP_Serial_Number : MP_Serial_Number; TE1000 Version: 1.12.0 51
## Page 52

Programming n Unit Selection_Read : E_MP_EP_R_R6_Unit Sel; b Control Mode_Read : BOOL; r Vmax Seq1_Read : LREAL; r Vmax Seq2_Read : LREAL; r Abs Vnom_Init Sel : LREAL; r Abs Vnom_l_h : LREAL; r Abs Vnom_gpm : LREAL; END_VAR Name Type Description b Busy BOOL This bit is set for as long as the function block is active. b Error BOOL This output goes TRUE as soon as an error occurs. This error is described via the i Error Id variable. i Error Id MP_ERROR [} 117] This output outputs an error code in the event of an error. b Error goes TRUE at the same time. str MP_Serial_Numb MP_Serial_Number [} 121] Structure for the serial number. er n Unit Selection_Rea E_MP_EP_R_R6_Unit Sel Setting the scaling d [} 109] b Control Mode_Read BOOL FALSE: position-controlled, TRUE: flow-controlled. r Vmax Seq1_Read LREAL Maximum sequence speed 1 in % (0...100 %). r Vmax Seq2_Read LREAL Maximum sequence speed 2 in % (0...100 %). r Abs Vnom_Init Sel LREAL Nominal volume (see r Absolute Flow_Unit Sel). r Abs Vnom_l_h LREAL Nominal volume in l/h (0...4294967295). r Abs Vnom_gpm LREAL Nominal volume in gpm (0...4294967295). Requirements Development environment PLC library to include Twin CAT from v3.1.4022.14 Tc2_MPBus from 3.4.8.0 4.1.1.12 MP_EPIV_V4_Configuration This function block is used to configure the 2-way EPIV V4 DN 15..50 EP.. R2+(K)BAC. For more information please visit www.belimo.com. MP_Address is used to specify the MP-Bus device with which the function block is to communicate. b Start activates communication with the MP-Bus device. b Busy indicates that the function block is active. b Error is used to indicate an error in communication with the actuator. The type of the error can be read with i Error Id. 52 Version: 1.12.0 TE1000
## Page 53

Programming Inputs VAR_INPUT MP_Address : USINT := 1; b Start : BOOL; b Read_Write : BOOL; str Data KL6771 : Data KL6771; n Control Mode_Write : E_MP_EV_V4_Control Mode := 1; n Bus Fail Action_Write : E_MP_EV_V4_Bus Fail Action; n Communication Watchdog_Write : UINT := 120; b Setpoint Source_Write : BOOL := TRUE; n Sensor1Type_Write : E_MP_EV_V4_Sensor1Type; r Vmin_Write : LREAL; r Vmax_Write : LREAL := 100; END_VAR Name Type Description MP_Address USINT MP-Bus address of the slave. b Start BOOL A positive edge starts the function block. If this remains continuously TRUE, the function block will be activated cyclically with a period specified by the time in TMPolling. b Read_Write BOOL If FALSE then READ only; if TRUE then READ and WRITE. str Data KL6771 Data KL6771 [} 120] The data structure with which the KL6771() [} 26] function block must be linked. n Control Mode_Write E_MP_EV_V4_Control Mod Control mode e [} 116] n Bus Fail Action_Writ E_MP_EV_V4_Bus Fail Actio Bus failure action e n [} 110] n Communication Wat UINT Communication monitoring in s (0..3600). chdog_Write b Setpoint Source_Wr BOOL TRUE = bus; FALSE = analog. ite n Sensor1Type_Writ E_MP_EV_V4_Sensor1Type Sensor 1 type e [} 112] r Vmin_Write LREAL Min. setpoint in % (0... Vmax). Vmin must be smaller than Vmax. r Vmax_Write LREAL Max. setpoint in % (25...100). Standard 100 %. Refers to Vnom and is taken into account when control mode = flow control. Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; i Error Id : MP_Error; st_Malfunction Service : St_MP_EV_V4_Malfunction Service Info; n Control Mode : E_MP_EV_V4_Control Mode; n Bus Fail Action : E_MP_EV_V4_Bus Fail Action; n Communication Watchdog : UINT; b Setpoint Source : BOOL; n Sensor1Type : E_MP_EV_V4_Sensor1Type; r Vmin : LREAL; r Vmax : LREAL; r Vnom : LREAL; ar Serial Number : ARRAY[0..1] OF DWORD; END_VAR TE1000 Version: 1.12.0 53
## Page 54

Programming Name Type Description b Busy BOOL This bit is set for as long as the function block is active. b Error BOOL This output goes TRUE as soon as an error occurs. This error is described via the i Error Id variable. i Error Id MP_ERROR [} 117] This output outputs an error code in the event of an error. b Error goes TRUE at the same time. st_Malfunction Servic ST_MP_EV_V4_Malfunctio Malfunction and service information e n Service Info [} 122] n Control Mode E_MP_EV_V4_Control Mod Control mode e [} 116] n Bus Fail Action E_MP_EV_V4_Bus Fail Actio Bus failure action n [} 110] n Communication Wat UINT Communication monitoring in sec (0...3600). Not functional chdog (reserved for future extensions). b Setpoint Source BOOL TRUE = bus; FALSE = analog n Sensor1Type E_MP_EV_V4_Sensor1Type Sensor 1 Type [} 112] r Vmin LREAL Min. setpoint in % (0... Vmax). Refers to Vnom and is taken into account when control mode = flow control. r Vmax LREAL Max. setpoint in % (25...100). Refers to Vnom and is taken into account when control mode = flow control. r Vnom LREAL Nominal volume flow in l/s (0...100) ar Serial Number ARRAY OF DWORD Serial number of the device. Requirements Development environment PLC library to include Twin CAT from v3.1.4024.46 Tc2_MPBus from 3.6.1.0 4.1.1.13 MP_EPIV_V4_Process This function block is suitable for 2-way EPIV V4 DN 15..50 EP.. R2+(K)BAC. For more information please visit www.belimo.com. 54 Version: 1.12.0 TE1000
## Page 55

Programming MP_Address is used to specify the MP-Bus device with which the function block is to communicate. b Start activates communication with the MP-Bus device. b Busy indicates that the function block is active. If b Start remains TRUE, the device is addressed cyclically with a period specified by the time in TMPolling. The time should be set longer than 1 second. b Error is used to indicate an error in communication with the actuator. The type of the error can be read with i Error Id. Inputs VAR_INPUT MP_Address : USINT := 1; b Start : BOOL; str Data KL6771 : Data KL6771; TMpolling : TIME := t#10s; r Setpoint : LREAL; n Command : E_MP_EV_V4_Command; n Override Control : E_MP_EV_V4_Override Control; n Data Read : WORD := 16#FFFF; END_VAR Name Type Description MP_Address USINT MP-Bus address of the slave. b Start BOOL A positive edge starts the function block. If this remains continuously TRUE, the function block will be activated cyclically with a period specified by the time in TMPolling. str Data KL6771 Data KL6771 [} 120] The data structure with which the KL6771() [} 26] function block must be linked. TMpolling TIME The time for which the function block should address the actuator. Default 10 s, minimum time 1 s. r Setpoint LREAL Setpoint in % (0...100) n Command E_MP_EV_V4_Command Command for service and test functions of the actuator. n Override Control E_MP_EV_V4_Override C Override the setpoint with defined values. ontrol n Data Read WORD 0x FFFF - read all data; bit 0 - read relative position; bit 1 - read absolute position; bit 2 - read value sensor 1; bit 3 - read analog setpoint; bit 4 - read relative volume flow rate; bit 5 - read absolute volume flow rate; bit 6 - read glycol concentration; bit 7 - read temperature1 remote; bit 8 - read temperature2 integrated; bit 9 - read temperature delta; bit 10 - read relative power; bit 11 - read absolute cooling power; bit 12 - read absolute heating power; bit 13 - total volume; bit 14 - cooling energy; bit 15 - heating energy Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; i Error Id : MP_Error; str MP_Serial_Number : MP_Serial_Number; r Setpoint_Read : LREAL; n Command_Read : E_MP_EV_V4_Command; r Relative Position : LREAL; r Absolute Position : LREAL; n Override Control_Read : E_MP_EV_V4_Override Control; n Sensor1Value : DINT; r Setpoint Analog : LREAL; r Relative Volumetric Flow : LREAL; r Absolute Volumetric Flow : LREAL; r Glycol Concentration : LREAL; r Temperature : LREAL; r Total Volume : LREAL; END_VAR TE1000 Version: 1.12.0 55
## Page 56

Programming Name Type Description b Busy BOOL This bit is set for as long as the function block is active. b Error BOOL This output goes TRUE as soon as an error occurs. This error is described via the i Error Id variable. i Error Id MP_ERROR [} 117] This output outputs an error code in the event of an error. b Error goes TRUE at the same time. str MP_Serial_Numb MP_Serial_Number [} 121] Structure for the serial number. er r Setpoint_Read LREAL Setpoint in % (0...100). n Command_Read E_MP_EV_V4_Command Command [} 110] r Relative Position LREAL Relative position in % (0...100). A value of -1 means that the data is disabled (see VAR_INPUT n Data Read.0 = TRUE). r Absolute Position LREAL Absolute position in ° (0...96). A value of -1 means that the data is disabled (see VAR_INPUT n Data Read.1 = TRUE). n Override Control_R E_MP_EV_V4_Override Con Overridden setpoint ead trol [} 111] n Sensor1Value DINT Sensor 1 Value in m V/ohm (0...65535). A value of -1 means that the data is disabled (see VAR_INPUT n Data Read.2 = TRUE). r Setpoint Analog LREAL Analog setpoint in % (0...100). A value of -1 means that the data is disabled (see VAR_INPUT n Data Read.3 = TRUE). r Relative Volumetric F LREAL Relative volume flow rate in % (0...150). A value of -1 low means that the data is disabled (see VAR_INPUT n Data Read.4 = TRUE). r Absolute Volumetric LREAL Absolute volume flow rate in l/s (0...100). A value of -1 Flow means that the data is disabled (see VAR_INPUT n Data Read.5 = TRUE). r Glycol Concentratio LREAL Glycol concentration in % (0...100). A value of -1 means n that the data is disabled (see VAR_INPUT n Data Read.6 = TRUE). r Temperature LREAL Temperature in °C (-20...120). A value of -1 means that the data is disabled (see VAR_INPUT n Data Read.8 = TRUE). r Total Volume LREAL Total volume in m³ (0...214748.36). A value of -1 means that the data is disabled (see VAR_INPUT n Data Read.13 = TRUE). Requirements Development environment PLC library to include Twin CAT from v3.1.4024.46 Tc2_MPBus from 3.6.1.0 56 Version: 1.12.0 TE1000
## Page 57

Programming 4.1.1.14 MP_EV This function block is used to control a control ball valve of series P6.. W.. EV-BAC. For more information please visit www.belimo.com. MP_Address is used to specify the MP-Bus device with which the function block is to communicate. b Start activates communication with the MP-Bus device. b Busy indicates that the function block is active. If b Start remains TRUE, the device is addressed cyclically with a period specified by the time in TMPolling. The time should be set longer than 1 s. b Error is used to indicate an error in communication with the actuator. The type of the error can be read with i Error Id. Inputs VAR_INPUT MP_Address : USINT := 1; b Start : BOOL := TRUE; str Data KL6771 : Data KL6771; TMpolling : TIME := t#10s; n Override Control : E_MPBus_Override := MPBus_Override_Auto; n Rel Setpoint : INT; END_VAR Name Type Description MP_Address USINT MP-Bus address of the slave. b Start BOOL A positive edge starts the function block. If this remains continuously TRUE, the function block will be activated cyclically with a period specified by the time in TMPolling. str Data KL6771 Data KL6771 [} 120] The data structure with which the KL6771() [} 26] function block must be linked. TMpolling TIME The time for which the function block should address the actuator. Default 10 s, minimum time 1 s. n Override Control E_MPBus_Override [} 116] n Override Control: The relative setpoint n Rel Setpoint is ignored in override mode. Overriding is disabled if the command is not repeated within 120 minutes. n Rel Setpoint INT The setpoint is interpreted either as position setpoint or as advance setpoint. TE1000 Version: 1.12.0 57
## Page 58

Programming Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; i Error Id : MP_Error; n Abs Pos : INT; r T1_SI : REAL; r T2_SI : REAL; r DELTA_T : REAL; r P_SI : REAL; n E_COOLING_SI : DINT; n E_HEATING_SI : DINT; n Rel Flow : INT; r Abs Flow_SI : REAL; n Rel Pos : INT; n Rel Setpoint Read : INT; b Error State T1 : BOOL; b Error State T2 : BOOL; b Error State Flow Sensor Err : BOOL; b Error State Mechanical Overload : BOOL; st_State EV : St_State EV; b Position Set By Hand : BOOL; END_VAR Name Type Description b Busy BOOL This bit is set for as long as the function block is active. b Error BOOL This output goes TRUE as soon as an error occurs. This error is described via the i Error Id variable. i Error Id MP_ERROR [} 117] This output outputs an error code in the event of an error. b Error goes TRUE at the same time. n Abs Pos INT Absolute position in ° r T1_SI REAL Temperature 1 (remote) in °C r T2_SI REAL Temperature 2 (embedded) in °C r DELTA_T REAL Delta temperature in °C r P_SI REAL Energy in k W n E_COOLING_SI DINT Cooling energy in k Wh n E_HEATING_SI DINT Heating energy in k Wh n Rel Flow INT Relative flow rate in % r Abs Flow_SI REAL Absolute flow rate in l/min n Rel Pos INT Relative position in % n Rel Setpoint Read INT The setpoint is interpreted either as position setpoint or as advance setpoint (relative to Vmax) in %. b Error State T1 BOOL Error temperature sensor T1 b Error State T2 BOOL Error temperature sensor T2. b Error State Flow Sen BOOL Flow sensor is faulty. sor Err b Error State Mechani BOOL Mechanical overload detected. cal Overload st_State EV St_State EV [} 124] Only devices from 27 March 2014 b Position Set By Hand BOOL The actuator position was changed manually. Requirements Development environment PLC library to include Twin CAT from v3.1.4020.14 Tc2_MPBus from 3.3.5.0 58 Version: 1.12.0 TE1000
## Page 59

Programming 4.1.1.15 MP_EV_Parameter This function block is used to parameterize drives. MP_Address is used to specify the MP-Bus device with which the function block is to communicate. b Start activates communication with the MP-Bus device. b Busy indicates that the function block is active. b Error is used to indicate an error in communication with the drive. The type of the error can be read with i Error ID. Inputs VAR_INPUT MP_Address : USINT := 1; b Start : BOOL; str Data KL6771 : Data KL6771; dw Password : DWORD; n Control Mode : E_MPBus_Control Mode := MPBus_Control Mode_Disable; n Deta TLimitation : E_MPBus_Delta TLimitation := MPBus_Delta TLimitation_Disable; r Setpoint : REAL := 0.0; r Sp Flow_Delta T_Si: REAL := 0.0; END_VAR Name Type Description MP_Address USINT MP-Bus address of the slave. b Start BOOL A positive edge starts the function block. If this remains continuously TRUE, the function block will be activated cyclically with a period specified by the time in TMPolling. str Data KL6771 Data KL6771 [} 120] The data structure with which the KL6771() [} 26] function block must be linked. dw Password DWORD The actuator password is usually 0x0000. n Control Mode E_MPBus_Control Mode Defines the control mode. [} 116] n Deta TLimitation E_MPBus_Delta TLimitation d T limitation. [} 116] r Setpoint REAL d T limit value. r Sp Flow_Delta T_Si REAL Flow rate at saturation. Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; i Error Id : MP_Error; END_VAR Name Type Description b Busy BOOL This bit is set for as long as the function block is active. b Error BOOL This output goes TRUE as soon as an error occurs. This error is described via the i Error Id variable. i Error Id MP_ERROR [} 117] This output outputs an error code in the event of an error. b Error goes TRUE at the same time. TE1000 Version: 1.12.0 59
## Page 60

Programming Requirements Development environment PLC library to include Twin CAT from v3.1.4020.32 Tc2_MPBus from 3.4.6.0 4.1.1.16 MP_Flow Meter_Configuration This function block is used to configure the flow meters (FM). For more information please visit www.belimo.com. MP_Address is used to specify the MP-Bus device with which the function block is to communicate. b Start activates communication with the MP-Bus device. b Busy indicates that the function block is active. b Error is used to indicate an error in communication with the actuator. The type of the error can be read with i Error Id. Inputs VAR_INPUT MP_Address : USINT := 1; b Start : BOOL; b Read_Write : BOOL; str Data KL6771 : Data KL6771; n Sensor1Type_Write : E_MP_EV_V4_Sensor1Type; END_VAR Name Type Description MP_Address USINT MP-Bus address of the slave. b Start BOOL A positive edge starts the function block. If this remains continuously TRUE, the function block will be activated cyclically with a period specified by the time in TMPolling. b Read_Write BOOL If FALSE then READ only; if TRUE then READ and WRITE. str Data KL6771 Data KL6771 [} 120] The data structure with which the KL6771() [} 26] function block must be linked. n Sensor1Type_Writ E_MP_EV_V4_Sensor1Type Sensor 1 Type e [} 112] Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; i Error Id : MP_Error; st_Malfunction Service : St_MP_EV_V4_Malfunction Service Info; n Sensor1Type : E_MP_EV_V4_Sensor1Type; r Vnom : LREAL; ar Serial Number : ARRAY[0..1] OF DWORD; END_VAR 60 Version: 1.12.0 TE1000
## Page 61

Programming Name Type Description b Busy BOOL This bit is set for as long as the function block is active. b Error BOOL This output goes TRUE as soon as an error occurs. This error is described via the i Error Id variable. i Error Id MP_ERROR [} 117] This output outputs an error code in the event of an error. b Error goes TRUE at the same time. st_Malfunction Servic ST_MP_EV_V4_Malfunctio Malfunction and service information e n Service Info [} 122] n Sensor1Type E_MP_EV_V4_Sensor1Type Sensor 1 Type [} 112] r Vnom LREAL Nominal volume flow in l/s (0...100) ar Serial Number ARRAY OF DWORD Serial number of the device. Requirements Development environment PLC library to include Twin CAT from v3.1.4024.46 Tc2_MPBus from 3.6.1.0 4.1.1.17 MP_Flow Meter_Process This function block is suitable for the flow meters (FM). For more information please visit www.belimo.com. MP_Address is used to specify the MP-Bus device with which the function block is to communicate. b Start activates communication with the MP-Bus device. b Busy indicates that the function block is active. If b Start remains TRUE, the device is addressed cyclically with a period specified by the time in TMPolling. The time should be set longer than 1 second. b Error is used to indicate an error in communication with the actuator. The type of the error can be read with i Error Id. Inputs VAR_INPUT MP_Address : USINT := 1; b Start : BOOL; str Data KL6771 : Data KL6771; TMpolling : TIME := t#10s; END_VAR Name Type Description MP_Address USINT MP-Bus address of the slave. b Start BOOL A positive edge starts the function block. If this remains continuously TRUE, the function block will be activated cyclically with a period specified by the time in TMPolling. str Data KL6771 Data KL6771 [} 120] The data structure with which the KL6771() [} 26] function block must be linked. TMpolling TIME The time for which the function block should address the actuator. Default 10 s, minimum time 1 s. TE1000 Version: 1.12.0 61
## Page 62

Programming Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; i Error Id : MP_Error; str MP_Serial_Number : MP_Serial_Number; n Sensor1Value : DINT; r Relative Volumetric Flow : LREAL; r Absolute Volumetric Flow : LREAL; r Glycol Concentration : LREAL; r Temperature : LREAL; r Total Volume : LREAL; END_VAR Name Type Description b Busy BOOL This bit is set for as long as the function block is active. b Error BOOL This output goes TRUE as soon as an error occurs. This error is described via the i Error Id variable. i Error Id MP_ERROR [} 117] This output outputs an error code in the event of an error. b Error goes TRUE at the same time. str MP_Serial_Numb MP_Serial_Number [} 121] Structure for the serial number. er n Sensor1Value DINT Sensor 1 Value in m V/ohm (0...65535). r Relative Volumetric F LREAL Relative volume flow rate in % (0...150). low r Absolute Volumetric LREAL Absolute volume flow rate in l/s (0...100). Flow r Glycol Concentratio LREAL Glycol concentration in % (0...100). n r Temperature LREAL Temperature in °C (-20...120). r Total Volume LREAL Total volume in m³ (0...214748.36). Requirements Development environment PLC library to include Twin CAT from v3.1.4024.46 Tc2_MPBus from 3.6.1.0 4.1.1.18 MP_JR_Actuator_Configuration This function block is used to configure the rotary actuators for butterfly valves JR. Further information can be found at www.belimo.com. MP_Address is used to specify the MP-Bus device with which the function block is to communicate. b Start activates communication with the MP-Bus device. b Busy indicates that the function block is active. b Error is used to indicate an error in communication with the actuator. The type of the error can be read with i Error Id. 62 Version: 1.12.0 TE1000
## Page 63

Programming Inputs VAR_INPUT MP_Address : USINT := 1; b Start : BOOL; b Read_Write : BOOL; str Data KL6771 : Data KL6771; n Sensor1Type_Write : E_MP_EV_V4_Sensor1Type; n Sensor2Type_Write : E_MP_EV_V4_Sensor1Type; n Sensor1Passive Type_Write : E_MP_EV_V4_Sensor1Passive Type; n Sensor2Passive Type_Write : E_MP_EV_V4_Sensor1Passive Type; n Bus Fail Action_Write : E_MP_EV_V4_Bus Fail Action; b Setpoint Source_Write : BOOL; n Communication Watchdog_Write : UINT := 120; r Maximum Limit_Write : LREAL; END_VAR Name Type Description MP_Address USINT MP-Bus address of the slave. b Start BOOL A positive edge starts the function block. b Read_Write BOOL If FALSE then READ only; if TRUE then READ and WRITE. str Data KL6771 Data KL6771 [} 120] The data structure with which the KL6771() [} 26] function block must be linked. n Sensor1Type_Writ E_MP_EV_V4_Sensor1Type Sensor 1 Type e [} 112] n Sensor2Type_Writ E_MP_EV_V4_Sensor1Type Sensor 2 Type e [} 112] n Sensor1Passive Ty E_MP_EV_V4_Sensor1Passi Only available if n Sensor1Type_Write <> pe_Write MPBus_EV_Sensor Passive_None. ve Type [} 112] n Sensor2Passive Ty E_MP_EV_V4_Sensor1Passi Only available if n Sensor2Type_Write <> pe_Write MPBus_EV_Sensor Passive_None. ve Type [} 112] n Bus Fail Action_Writ E_MP_EV_V4_Bus Fail Actio Bus failure action. e n [} 110] b Setpoint Source_Wr BOOL TRUE = bus; FALSE = analog ite n Communication Wat UINT Communication monitoring in s (5...3600). chdog_Write r Maximum Limit_Writ LREAL Maximum limit in % (30..100). e Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; i Error Id : MP_Error; n Bus Fail Action : E_MP_EV_V4_Bus Fail Action; n Communication Watchdog : UINT; b Setpoint Source : BOOL; r Maximum Limit : LREAL; n Sensor1Type : E_MP_EV_V4_Sensor1Type; n Sensor2Type : E_MP_EV_V4_Sensor1Type; n Sensor1Passive Type : E_MP_EV_V4_Sensor1Passive Type; n Sensor2Passive Type : E_MP_EV_V4_Sensor1Passive Type; END_VAR TE1000 Version: 1.12.0 63
## Page 64

Programming Name Type Description b Busy BOOL This bit is set for as long as the function block is active. b Error BOOL This output goes TRUE as soon as an error occurs. This error is described via the i Error Id variable. i Error Id MP_ERROR [} 117] This output outputs an error code in the event of an error. b Error goes TRUE at the same time. n Bus Fail Action E_MP_EV_V4_Bus Fail Actio Bus failure action. n [} 110] n Communication Wat UINT Communication monitoring in sec (5...3600). chdog b Setpoint Source BOOL TRUE = bus; FALSE = analog r Maximum Limit LREAL Maximum limit in s (30..100). n Sensor1Type E_MP_EV_V4_Sensor1Type Sensor 1 Type [} 112] n Sensor2Type E_MP_EV_V4_Sensor1Type Sensor 2 Type [} 112] n Sensor1Passive Ty E_MP_EV_V4_Sensor1Passi Only available if n Sensor1Type_Write <> pe MPBus_EV_Sensor Passive_None. ve Type [} 112] n Sensor2Passive Ty E_MP_EV_V4_Sensor1Type Only available if n Sensor2Type_Write <> pe MPBus_EV_Sensor Passive_None. [} 112] Prerequisites Development Environment PLC library to include Twin CAT from v3.1.4024.66 Tc2_MPBus from 3.7.1.0 4.1.1.19 MP_JR_Actuator_Process This function block is suitable for the rotary actuators for butterfly valves JR. Further information can be found at www.belimo.com. MP_Address is used to specify the MP-Bus device with which the function block is to communicate. b Start activates communication with the MP-Bus device. b Busy indicates that the function block is active. b Error is used to indicate an error in communication with the actuator. The type of the error can be read with i Error Id. Inputs VAR_INPUT MP_Address : USINT := 1; b Start : BOOL; str Data KL6771 : Data KL6771; 64 Version: 1.12.0 TE1000
## Page 65

Programming TMpolling : TIME := t#10s; r Setpoint : LREAL; n Override Control : E_MP_JR_V4_Override Control; END_VAR Name Type Description MP_Address USINT MP-Bus address of the slave. b Start BOOL A positive edge starts the function block. If this remains continuously TRUE, the function block will be activated cyclically with a period specified by the time in TMPolling. str Data KL6771 Data KL6771 [} 120] The data structure with which the KL6771() [} 26] function block must be linked. TMpolling TIME The time for which the function block should address the actuator. Default 10 s, minimum time 1 s. r Setpoint LREAL Setpoint in % (0...100). n Override Control E_MP_JR_V4_Override Cont Override the setpoint with defined values. rol [} 113] Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; i Error Id : MP_Error; str MP_Serial_Number : MP_Serial_Number; r Setpoint_Read : LREAL; n Override Control_Read : E_MP_JR_V4_Override Control; r Relative Position : LREAL; r Absolute Position : LREAL; n Sensor1Value : DINT; n Sensor2Value : DINT; r Sensor1Temp : LREAL; r Sensor2Temp : LREAL; st_Malfunction Service : ST_MP_JR_Malfunction Service Info; END_VAR Name Type Description b Busy BOOL This bit is set for as long as the function block is active. b Error BOOL This output goes TRUE as soon as an error occurs. This error is described via the i Error Id variable. i Error Id MP_ERROR [} 117] This output outputs an error code in the event of an error. b Error goes TRUE at the same time. str MP_Serial_Numb MP_Serial_Number [} 121] Structure for the serial number. er r Setpoint_Read LREAL Setpoint in % (0...100). n Override Control_R E_MP_JR_V4_Override Cont Overridden setpoint. ead rol [} 113] r Relative Position LREAL Relative position in % (0...100). r Absolute Position LREAL Absolute position in ° (0...96). n Sensor1Value DINT Sensor 1 Value in m V/ohm (0...5500000). n Sensor2Value DINT Sensor 2 Value in m V/ohm (0...5500000). r Sensor1Temp LREAL Sensor 1 Temperature in °C. r Sensor2Temp LREAL Sensor 2 Temperature in °C. st_Malfunction Servic ST_MP_JR_Malfunction Ser Malfunction and service information. e vice Info [} 123] Prerequisites Development Environment PLC library to include Twin CAT from v3.1.4024.66 Tc2_MPBus from 3.7.1.0 TE1000 Version: 1.12.0 65
## Page 66

Programming 4.1.1.20 MP_MPX For BELIMO room sensor MS24A-R..-MPX MS24A-R01-MPX temperature MS24A-R02-MPX temperature, CO2 MS24A-R03-MPX temperature, VOC MS24A-R04-MPX temperature, CO2, VOC MS24A-R05-MPX temperature, air humidity MS24A-R06-MPX temperature, air humidity, CO2 MS24A-R07-MPX temperature, air humidity, VOC MS24A-R08-MPX temperature, air humidity, CO2, VOC Inputs VAR_INPUT MP_Address : USINT := 1; b Start : BOOL; str Data KL6771 : Data KL6771; TMpolling : TIME := t#10s; b Temp_C_F : BOOL; END_VAR Name Type Description MP_Address USINT MP-Bus address of the slave. b Start BOOL A positive edge starts the function block. If this remains continuously TRUE, the function block will be activated cyclically with a period specified by the time in TMPolling. str Data KL6771 Data KL6771 [} 120] The data structure with which the KL6771() [} 26] function block must be linked. TMpolling TIME The time for which the function block should address the actuator. Default 10 s, minimum time 1 s. b Temp_C_F BOOL FALSE = °C / TRUE = F Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; i Error Id : MP_Error; str MPX_ERR : MP_BUS_MPX_ERROR; i U : INT; b Digital : BOOL; 66 Version: 1.12.0 TE1000
## Page 67

Programming i Temp : INT; i CO2 : INT; i VOC : INT; i Humidity : INT; b Flush Status : BOOL; END_VAR Name Type Description b Busy BOOL This bit is set for as long as the function block is active. b Error BOOL This output goes TRUE as soon as an error occurs. This error is described via the i Error Id variable. i Error Id MP_ERROR [} 117] This output outputs an error code in the event of an error. b Error goes TRUE at the same time. str MPX_ERR MP_BUS_MPX_ERROR Error messages of the sensors [} 120] i U INT 0…10 V UNIT 1 m V b Digital BOOL DI 24 V i Temp INT 0...50 °C Unit:0.01 °C i CO2 INT 0...2000 ppm Unit:1 ppm i VOC INT 0...2000 ppm Unit:1 ppm (pseudo) i Humidity INT 10...90 % Unit: 0.01 % b Flush Status BOOL VOC gradient threshold exceeded, FALSE = air quality OK, 1 TRUE = air quality not OK, flush Requirements Development environment PLC library to include Twin CAT from v3.1.4020.14 Tc2_MPBus from 3.3.5.0 4.1.1.21 MP_Operating Unit This function block is used to read room sensors of types P-22Rxx-1900x-1. It is compatible with 22Rxx-19-1 room sensors produced as of May 2022 (before May 2022, see MP_Room Sensor [} 79]). For more information, see www.belimo.com. TE1000 Version: 1.12.0 67
## Page 68

Programming MP_Address is used to specify the MP-Bus device with which the function block is to communicate. b Start activates communication with the MP-Bus device. b Busy indicates that the function block is active. If b Start remains TRUE, the device is addressed cyclically with a period specified by the time in TMPolling. The time should be set longer than 1 second. b Error is used to indicate an error in communication with the actuator. The type of the error can be read with i Error Id. Inputs VAR_INPUT MP_Address : USINT := 1; b Start : BOOL; str Data KL6771 : Data KL6771; TMpolling : TIME := t#10s; END_VAR Name Type Description MP_Address USINT MP-Bus address of the slave. b Start BOOL A positive edge starts the function block. If this remains continuously TRUE, the function block will be activated cyclically with a period specified by the time in TMPolling. str Data KL6771 Data KL6771 [} 120] The data structure with which the KL6771() [} 26] function block must be linked. TMpolling TIME The time for which the function block should address the actuator. Default 10 s, minimum time 1 s. Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; i Error Id : MP_Error; b Sensor Fault Temp : BOOL; b Sensor Fault Humidity : BOOL; b Sensor Fault CO2 : BOOL; f Sens Temp : LREAL; f Humid : LREAL; ui CO2 : UINT; n Air Quality Status : E_MP_Air Quality Status; b Sensor Error : BOOL; f Dew Point : LREAL; f Ventilation Stage : LREAL; n System Operation Mode : E_MP_System Operation Mode; b Ventilation Stage Control Mode : BOOL; b Temp Setpoint Type : BOOL; f Set Temp : LREAL; st Sensor Type : STRING; END_VAR 68 Version: 1.12.0 TE1000
## Page 69

Programming Name Type Description b Busy BOOL This bit is set for as long as the function block is active. b Error BOOL This output goes TRUE as soon as an error occurs. This error is described via the i Error Id variable. i Error Id MP_ERROR [} 117] This output outputs an error code in the event of an error. b Error goes TRUE at the same time. b Sensor Fault Temp BOOL Temperature sensor has a fault b Sensor Fault Humidi BOOL Humidity sensor has a fault. ty b Sensor Fault CO2 BOOL CO2 sensor has a fault. f Sens Temp LREAL Room temperature in °C or °F (0..50 or 32..122). f Humid LREAL Relative air humidity in % (0..100). ui CO2 UINT CO2 value in ppm (0..2000). n Air Quality Status E_MP_Air Quality Status Air quality status [} 106] b Sensor Error BOOL One of the sensors has an error. f Dew Point LREAL Dew point temperature in °C (-50...50). f Ventilation Stage LREAL Ventilation stage in % (0..100). n System Operation M E_MP_System Operation M Operation mode of the system ode ode [} 113] b Ventilation Stage Co BOOL FALSE = Manual; TRUE = Automatic. ntrol Mode b Temp Setpoint Type BOOL FALSE = Absolute; TRUE = Relative f Set Temp LREAL b Temp Setpoint Type FALSE = setpoint room temperature in °C; b Temp Setpoint Type TRUE = setpoint relative room temperature in °C. st Sensor Type STRING DSensor type. '?' = not read; 'unknown' = number unknown. Requirements Development environment PLC library to include Twin CAT from v3.1.4024.46 Tc2_MPBus from 3.6.1.0 4.1.1.22 MP_Operating Unit_Configuration CO2 This function block is used to configure room sensors of types P-22Rxx-1900x-1. It is compatible with 22Rxx-19-1 room sensors produced as of May 2022 (before May 2022, see MP_Room Sensor_Parameter [} 81]). For more information, see www.belimo.com. MP_Address is used to specify the MP-Bus device with which the function block is to communicate. b Start activates communication with the MP-Bus device. b Busy indicates that the function block is active. b Error is used to indicate an error in communication with the actuator. The type of the error can be read with i Error Id. TE1000 Version: 1.12.0 69
## Page 70

Programming Inputs VAR_INPUT MP_Address : USINT := 1; b Start : BOOL; str Data KL6771 : Data KL6771; i CO2Limit For Good : UINT := 1000; i CO2Limit For Moderate : UINT := 1500; n Enabled Status Air Quality : E_MP_Enabled Status; n Visibility CO2 : E_MP_Display Visibility; END_VAR Name Type Description MP_Address USINT MP-Bus address of the slave. b Start BOOL A positive edge starts the function block. If this remains continuously TRUE, the function block will be activated cyclically with a period specified by the time in TMPolling. str Data KL6771 Data KL6771 [} 120] The data structure with which the KL6771() [} 26] function block must be linked. i CO2Limit For Good UINT CO2 limit for "Good" air quality in ppm (600..1249). i CO2Limit For Modera UINT CO2 limit for "Moderate" air quality in ppm (1250..2000). te n Enabled Status Air Q E_MP_Enabled Status Status of the air quality display uality [} 109] n Visibility CO2 E_MP_Display Visibility Visibility of the CO2 value [} 109] Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; i Error Id : MP_Error; END_VAR Name Type Description b Busy BOOL This bit is set for as long as the function block is active. b Error BOOL This output goes TRUE as soon as an error occurs. This error is described via the i Error Id variable. i Error Id MP_ERROR [} 117] This output outputs an error code in the event of an error. b Error goes TRUE at the same time. Requirements Development environment PLC library to include Twin CAT from v3.1.4024.46 Tc2_MPBus from 3.6.1.0 70 Version: 1.12.0 TE1000
## Page 71

Programming 4.1.1.23 MP_Operating Unit_Configuration Display This function block is used to configure room sensors of types P-22Rxx-1900x-1. It is compatible with 22Rxx-19-1 room sensors produced as of May 2022 (before May 2022, see MP_Room Sensor_Parameter [} 81]). For more information, see www.belimo.com. MP_Address is used to specify the MP-Bus device with which the function block is to communicate. b Start activates communication with the MP-Bus device. b Busy indicates that the function block is active. b Error is used to indicate an error in communication with the actuator. The type of the error can be read with i Error Id. Inputs VAR_INPUT MP_Address : USINT := 1; b Start : BOOL; str Data KL6771 : Data KL6771; n Enabled Status Local Adjustment : E_MP_Enabled Status; n Display Mode Temp Unit : E_MP_Display Mode Temp Unit; n Display Background : E_MP_Display Background; n Visibility Temp Room : E_MP_Display Visibility; n Visibility Relative Humidity : E_MP_Display Visibility; n Display Mode Temp : E_MP_Display Mode Temp; n Visibility Ventilation Stage : E_MP_Display Visibility; n Display Mode Button Eco : E_MP_Display Mode Button; n Visibility Button Boost : E_MP_Display Visibility; n Display Mode Button On Off : E_MP_Display Mode Button; END_VAR TE1000 Version: 1.12.0 71
## Page 72

Programming Name Type Description MP_Address USINT MP-Bus address of the slave. b Start BOOL A positive edge starts the function block. If this remains continuously TRUE, the function block will be activated cyclically with a period specified by the time in TMPolling. str Data KL6771 Data KL6771 [} 120] The data structure with which the KL6771() [} 26] function block must be linked. n Enabled Status Loca E_MP_Enabled Status Status of access permission for local adjustments l Adjustment [} 109] n Display Mode Temp E_MP_Display Mode Temp Status of access permission for local adjustments Unit Unit [} 108] n Display Background E_MP_Display Background Background color of the display [} 107] n Visibility Temp Roo E_MP_Display Visibility Visibility of the room temperature m [} 109] n Visibility Relative Hu E_MP_Display Visibility Visibility of the relative humidity midity [} 109] n Display Mode Temp E_MP_Display Mode Temp Display mode of the temperature [} 107] n Visibility Ventilation E_MP_Display Visibility Visibility of the ventilation stage Stage [} 109] n Display Mode Button E_MP_Display Mode Button Display mode of the Eco button Eco [} 107] n Visibility Button Boo E_MP_Display Visibility Display mode of the Boost button st [} 109] n Display Mode Button E_MP_Display Mode Button Display mode of the On Off button On Off [} 107] Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; i Error Id : MP_Error; END_VAR Name Type Description b Busy BOOL This bit is set for as long as the function block is active. b Error BOOL This output goes TRUE as soon as an error occurs. This error is described via the i Error Id variable. i Error Id MP_ERROR [} 117] This output outputs an error code in the event of an error. b Error goes TRUE at the same time. Requirements Development environment PLC library to include Twin CAT from v3.1.4024.46 Tc2_MPBus from 3.6.1.0 72 Version: 1.12.0 TE1000
## Page 73

Programming 4.1.1.24 MP_Operating Unit_Configuration Offset Values This function block is used to configure room sensors of types P-22Rxx-1900x-1. It is compatible with 22Rxx-19-1 room sensors produced as of May 2022 (before May 2022, see MP_Room Sensor_Parameter [} 81]). For more information, see www.belimo.com. MP_Address is used to specify the MP-Bus device with which the function block is to communicate. b Start activates communication with the MP-Bus device. b Busy indicates that the function block is active. b Error is used to indicate an error in communication with the actuator. The type of the error can be read with i Error Id. Inputs VAR_INPUT MP_Address : USINT := 1; b Start : BOOL; str Data KL6771 : Data KL6771; f Offset Temp : LREAL := 0; f Offset Humidity : LREAL := 0; i Offset CO2 : INT := 0; END_VAR Name Type Description MP_Address USINT MP-Bus address of the slave. b Start BOOL A positive edge starts the function block. If this remains continuously TRUE, the function block will be activated cyclically with a period specified by the time in TMPolling. str Data KL6771 Data KL6771 [} 120] The data structure with which the KL6771() [} 26] function block must be linked. f Offset Temp LREAL Offset applied to the measured temperature in °C or °F (-15...15 or -27...27). f Offset Humidity LREAL Offset applied to the measured relative humidity in % (-20...20). i Offset CO2 INT Offset applied to the measured CO2 content in ppm (-500...500). Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; i Error Id : MP_Error; END_VAR Name Type Description b Busy BOOL This bit is set for as long as the function block is active. b Error BOOL This output goes TRUE as soon as an error occurs. This error is described via the i Error Id variable. i Error Id MP_ERROR [} 117] This output outputs an error code in the event of an error. b Error goes TRUE at the same time. TE1000 Version: 1.12.0 73
## Page 74

Programming Requirements Development environment PLC library to include Twin CAT from v3.1.4024.46 Tc2_MPBus from 3.6.1.0 4.1.1.25 MP_Operating Unit_Configuration Status Icons This function block is used to configure room sensors of types P-22Rxx-1900x-1. It is compatible with 22Rxx-19-1 room sensors produced as of May 2022 (before May 2022, see MP_Room Sensor_Parameter [} 81]). For more information, see www.belimo.com. MP_Address is used to specify the MP-Bus device with which the function block is to communicate. b Start activates communication with the MP-Bus device. b Busy indicates that the function block is active. b Error is used to indicate an error in communication with the actuator. The type of the error can be read with i Error Id. Inputs VAR_INPUT MP_Address : USINT := 1; b Start : BOOL; str Data KL6771 : Data KL6771; n Visibility Icon Warning : E_MP_Display Visibility; n Visibility Icon Window : E_MP_Display Visibility; n Display Mode Heating Cooling : E_MP_Display Mode Heating Cooling; n Visibility Icon Heating Cooling : E_MP_Display Visibility; n Display Mode Icon Warning : E_MP_Display Mode Icon Warning; n Display Mode Icon Window : E_MP_Display Mode Icon Window; END_VAR 74 Version: 1.12.0 TE1000
## Page 75

Programming Name Type Description MP_Address USINT MP-Bus address of the slave. b Start BOOL A positive edge starts the function block. If this remains continuously TRUE, the function block will be activated cyclically with a period specified by the time in TMPolling. str Data KL6771 Data KL6771 [} 120] The data structure with which the KL6771() [} 26] function block must be linked. n Visibility Icon Warnin E_MP_Display Visibility Visibility of the warning symbol. Applies if g n Display Mode Icon Warning is set to 1 [} 109] n Visibility Icon Windo E_MP_Display Visibility Visibility of the window icon. Applies if w n Display Mode Icon Window is set to 1 [} 109] n Display Mode Heatin E_MP_Display Mode Heatin Display mode of heating or cooling icons g Cooling g Cooling [} 107] n Visibility Icon Heatin E_MP_Display Visibility Visibility of heating or cooling icons g Cooling [} 109] n Display Mode Icon W E_MP_Display Mode Icon W Display mode of the warning icon arning arning [} 107] n Display Mode Icon W E_MP_Display Mode Icon Wi Display mode of the window icon indow ndow [} 108] Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; i Error Id : MP_Error; END_VAR Name Type Description b Busy BOOL This bit is set for as long as the function block is active. b Error BOOL This output goes TRUE as soon as an error occurs. This error is described via the i Error Id variable. i Error Id MP_ERROR [} 117] This output outputs an error code in the event of an error. b Error goes TRUE at the same time. Requirements Development environment PLC library to include Twin CAT from v3.1.4024.46 Tc2_MPBus from 3.6.1.0 4.1.1.26 MP_Operating Unit_Configuration Temp This function block is used to configure room sensors of types P-22Rxx-1900x-1. It is compatible with 22Rxx-19-1 room sensors produced as of May 2022 (before May 2022, see MP_Room Sensor_Parameter [} 81]). For more information, see www.belimo.com. TE1000 Version: 1.12.0 75
## Page 76

Programming MP_Address is used to specify the MP-Bus device with which the function block is to communicate. b Start activates communication with the MP-Bus device. b Busy indicates that the function block is active. b Error is used to indicate an error in communication with the actuator. The type of the error can be read with i Error Id. Inputs VAR_INPUT MP_Address : USINT := 1; b Start : BOOL; str Data KL6771 : Data KL6771; f Setpoint Temp : LREAL := 20; f Setpoint Temp Relative : LREAL := 0; b Setpoint Type Temp : BOOL; f Setpoint Temp Default : LREAL := 20; n Setpoint Temp Range : USINT := 10; END_VAR Name Type Description MP_Address USINT MP-Bus address of the slave. b Start BOOL A positive edge starts the function block. If this remains continuously TRUE, the function block will be activated cyclically with a period specified by the time in TMPolling. str Data KL6771 Data KL6771 [} 120] The data structure with which the KL6771() [} 26] function block must be linked. f Setpoint Temp LREAL Setpoint for the room temperature in °C (5...45). f Setpoint Temp Relati LREAL Setpoint for the relative room temperature in °C (5.6...5.6). ve b Setpoint Type Temp. BOOL FALSE = Absolute; TRUE = Relative. f Setpoint Temp Defau LREAL Default setpoint for the room temperature in °C (15...35). lt n Setpoint Temp Rang USINT Setpoint range for the temperature in °C (0...10). e Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; i Error Id : MP_Error; END_VAR Name Type Description b Busy BOOL This bit is set for as long as the function block is active. b Error BOOL This output goes TRUE as soon as an error occurs. This error is described via the i Error Id variable. i Error Id MP_ERROR [} 117] This output outputs an error code in the event of an error. b Error goes TRUE at the same time. Requirements Development environment PLC library to include Twin CAT from v3.1.4024.46 Tc2_MPBus from 3.6.1.0 76 Version: 1.12.0 TE1000
## Page 77

Programming 4.1.1.27 MP_Operating Unit_Configuration Ventilation This function block is used to configure room sensors of types P-22Rxx-1900x-1. It is compatible with 22Rxx-19-1 room sensors produced as of May 2022 (before May 2022, see MP_Room Sensor_Parameter [} 81]). For more information, see www.belimo.com. MP_Address is used to specify the MP-Bus device with which the function block is to communicate. b Start activates communication with the MP-Bus device. b Busy indicates that the function block is active. b Error is used to indicate an error in communication with the actuator. The type of the error can be read with i Error Id. Inputs VAR_INPUT MP_Address : USINT := 1; b Start : BOOL; str Data KL6771 : Data KL6771; f Ventilation Stage : LREAL; n System Operation Mode : E_MP_System Operation Mode; b Ventilation Stage Control Mode : BOOL; n Display Mode Ventilation Stage : E_MP_Display Mode Ventilation Stage := MPBus_Display Mode Ventilation Sta ge_7; b Ventilation Control Mode : BOOL; END_VAR Name Type Description MP_Address USINT MP-Bus address of the slave. b Start BOOL A positive edge starts the function block. If this remains continuously TRUE, the function block will be activated cyclically with a period specified by the time in TMPolling. str Data KL6771 Data KL6771 [} 120] The data structure with which the KL6771() [} 26] function block must be linked. f Ventilation Stage LREAL Ventilation stage in the room/zone in % (0...100). n System Operation M E_MP_System Operation M Operation mode of the system ode ode [} 113] b Ventilation Stage Co BOOL Mode of ventilation stage control. Applies if ntrol Mode b Ventilation Control Mode is set to TRUE. n Display Mode Ventil E_MP_Display Mode Ventila Display mode of the ventilation stage. ation Stage tion Stage [} 108] b Ventilation Control M BOOL FALSE = manual mode only; TRUE = hybrid control mode ode (setpoint invisible in auto mode). Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; i Error Id : MP_Error; END_VAR TE1000 Version: 1.12.0 77
## Page 78

Programming Name Type Description b Busy BOOL This bit is set for as long as the function block is active. b Error BOOL This output goes TRUE as soon as an error occurs. This error is described via the i Error Id variable. i Error Id MP_ERROR [} 117] This output outputs an error code in the event of an error. b Error goes TRUE at the same time. Requirements Development environment PLC library to include Twin CAT from v3.1.4024.46 Tc2_MPBus from 3.6.1.0 4.1.1.28 MP_PTH This function block is used to control and monitor a PTH sensor. MP_Address is used to specify the MP-Bus device with which the function block is to communicate. b Start activates communication with the MP-Bus device. b Busy indicates that the function block is active. If b Start remains TRUE, the device is addressed cyclically with a period specified by the time in TMPolling. The time should be set longer than 1 second. b Error is used to indicate an error in communication with the sensor. The type of the error can be read with i Error ID. If an external sensor is connected to the sensor, i Sensor Typ should be used to specify the sensor type. If no sensor is connected, the value "0" should be entered, or the variable should be left blank. A digital sensor should be parameterized with "3". The state of the sensor is output through the variable i YSensor. Inputs VAR_INPUT MP_Address : USINT := 1; b Start : BOOL := TRUE; i Sensor Typ : INT; str Data KL6771 : Data KL6771; TMpolling : TIME := t#10s; END_VAR Name Type Description MP_Address USINT MP-Bus address of the slave. b Start BOOL A positive edge starts the function block. If this remains continuously TRUE, the function block will be activated cyclically with a period specified by the time in TMPolling. i Sensor Typ INT "0" or blank: no sensor is connected; "1": an analog sensor is connected with voltage output in m V; "2": an output of a resistance in ohms - 1.0 ohm; "3": an output of a resistance in ohms - 0.1 ohm; "4": digital sensor. str Data KL6771 Data KL6771 [} 120] The data structure with which the KL6771() [} 26] function block must be linked. TMpolling TIME The time for which the function block should address the actuator. Default 10 s, minimum time 1 s. 78 Version: 1.12.0 TE1000
## Page 79

Programming Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; i Error Id : MP_Error; i Dampness : INT; i Pressure : INT; i Temperature : INT; i YSensor : INT; by PTH_Error : BYTE;; END_VAR Name Type Description b Busy BOOL This bit is set for as long as the function block is active. b Error BOOL This output goes TRUE as soon as an error occurs. This error is described via the i Error Id variable. i Error Id MP_ERROR [} 117] This output outputs an error code in the event of an error. b Error goes TRUE at the same time. i Dampness INT Relative humidity in 0.01 % i Pressure INT Differential pressure, output in 0.1 Pa. i Temperature INT Temperature in 0.01 °C i YSensor INT Y-input, i Sensor Typ = "1": voltage 0...10 V output in m V; i Sensor Typ = "2": resistance output in 1.0 ohm; i Sensor Typ = "3": resistance output in 0.1 ohm; i Sensor Typ = "3": digital switch 0 or 1 by PTH_Error BYTE Sensor error - 0 - no error. by PTH_Error Description Bit 0 Servicing error Bit 1 Error message, sensor faulty Bit 2 - Bit 3 - Bit 4 Sensor (temperature/humidity) faulty Bit 5 A/D converter (pressure) faulty Bit 6 A/D converter (Y-input) faulty Bit 7 - Requirements Development environment PLC library to include Twin CAT from v3.1.4020.14 Tc2_MPBus from 3.3.5.0 4.1.1.29 MP_Room Sensor TE1000 Version: 1.12.0 79
## Page 80

Programming This function block is used to read out room sensors of types 22Rxx-19-1 that were produced before May 2022 (as of May 2022, see MP_Operating Unit [} 67]). For more information, see www.belimo.com. MP_Address is used to specify the MP-Bus device with which the function block is to communicate. b Start activates communication with the MP-Bus device. b Busy indicates that the function block is active. If b Start remains TRUE, the device is addressed cyclically with a period specified by the time in TMPolling. The time should be set longer than 1 s. b Error is used to indicate an error in communication with the actuator. The type of the error can be read with i Error Id. Inputs VAR_INPUT MP_Address : USINT := 1; b Start : BOOL; b Read DISensor : BOOL; str Data KL6771 : Data KL6771; TMpolling : TIME := t#10s; END_VAR Name Type Description MP_Address USINT MP-Bus address of the slave. b Start BOOL A positive edge starts the function block. If this remains continuously TRUE, the function block will be activated cyclically with a period specified by the time in TMPolling. b Read DISensor BOOL If TRUE, the DI sensor is read and the result is available in b Digital Input. str Data KL6771 Data KL6771 [} 120] The data structure with which the KL6771() [} 26] function block must be linked. TMpolling TIME The time for which the function block should address the actuator. Default 10 s, minimum time 1 s. Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; i Error Id : MP_Error; r Sens Temp : LREAL; r Dew Point Temp : LREAL; r Humid : LREAL; ui Co2 : UINT; st Unit : STRING; b Digital Input : BOOL; b Sensor Error : BOOL; st_Sensor Type : STRING; END_VAR 80 Version: 1.12.0 TE1000
## Page 81

Programming Name Type Description b Busy BOOL This bit is set for as long as the function block is active. b Error BOOL This output goes TRUE as soon as an error occurs. This error is described via the i Error Id variable. i Error Id MP_ERROR [} 117] This output outputs an error code in the event of an error. b Error goes TRUE at the same time. r Sens Temp LREAL Sensor temperature in °C or °F. r Dew Point Temp LREAL Temperature of the calculated dew point in °C or °F. r Humid LREAL Humidity in percent (% 0.01). ui Co2 UINT CO2 content in ppm. st Unit STRING C = °C or F = °F, ? = not read. b Digital Input BOOL DI sensor read if b Read DISensor is TRUE. b Sensor Error BOOL One of the sensors has an error. st_Sensor Type STRING Sensor type. '?' = not read / type / 'unknown' = number unknown. Requirements Development environment PLC library to include Twin CAT from v3.1.4024.10 Tc2_MPBus from 3.4.12.0 4.1.1.30 MP_Room Sensor_Parameter This function block is used to parameterize room sensors of types 22Rxx-19-1 that were produced before May 2022 (as of May 2022, see MP_Operating Unit_Configuration). For more information, see www.belimo.com. MP_Address is used to specify the MP-Bus device with which the function block is to communicate. b Read reads the parameters, b Write writes them to the room sensor. b Busy indicates that the function block is active. b Error is used to indicate an error in communication with the actuator. The type of the error can be read with i Error Id. Inputs VAR_INPUT MP_Address : USINT := 1; b Write : BOOL; b Read : BOOL; str Data KL6771 : Data KL6771; b Unit Sel Temp : BOOL; i Offset Co2_Write : INT; r Offset Temp_Write : LREAL; r Offset Humidity_Write : LREAL; r Offset Dew Point Temp_Write : LREAL;; END_VAR TE1000 Version: 1.12.0 81
## Page 82

Programming Name Type Description MP_Address USINT MP-Bus address of the slave. b Write BOOL A positive edge starts the function block and writes the parameter. b Read BOOL A positive edge starts the function block and reads the parameter. str Data KL6771 Data KL6771 [} 120] The data structure with which the KL6771() [} 26] function block must be linked. b Unit Sel Temp BOOL FALSE = °C, TRUE = °F. i Offset Co2_Write INT Offset CO2 [ppm] -500...500. r Offset Temp_Write LREAL Offset Temp [Unit Sel] -15...15 °C (-27...27 °F) r Offset Humidity_Writ LREAL Offset Humidity [%] -20...+20. e r Offset Dew Point Tem LREAL Offset Dew Point Temp [Unit Sel] -15...15 °C (-27...27 °F). p_Write Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; i Error Id : MP_Error; st Unit : STRING; i Offset CO2 : INT; r Offset Humidity : LREAL; r Offset Temp : LREAL; r Offset Dew Point Temp : LREAL; END_VAR Name Type Description b Busy BOOL This bit is set for as long as the function block is active. b Error BOOL This output goes TRUE as soon as an error occurs. This error is described via the i Error Id variable. i Error Id MP_ERROR [} 117] This output outputs an error code in the event of an error. b Error goes TRUE at the same time. st Unit STRING C = °C or F = °F, ? = not read. i Offset CO2 INT Offset CO2 [ppm]. r Offset Humidity LREAL Offset Humidity [%] 0.01. r Offset Temp LREAL Offset Temp [°C or °F] 0.01. r Offset Dew Point Tem LREAL Dew Offset Temp [°C or °F] 0.01. p Requirements Development environment PLC library to include Twin CAT from v3.1.4024.10 Tc2_MPBus from 3.4.12.0 82 Version: 1.12.0 TE1000
## Page 83

Programming 4.1.1.31 MP_Smoker This function block is used to control and monitor a fire damper. MP_Address is used to specify the MP-Bus device with which the function block is to communicate. b Start activates communication with the MP-Bus device. b Busy indicates that the function block is active. If b Start remains TRUE, the device is addressed cyclically with a period specified by the time in TMPolling. The time should be set longer than 1 s, maximum 30 s. b Error is used to indicate an error in communication with the drive. The type of the error can be read with i Error ID. A rising edge at b Reset clears any pending error messages from the drive. A telegram is thus sent to the drive that acknowledges the errors in the drive. If they persist, they remain set. This applies to all b Err_* error bits. b Open_Close is used to open or close the fire damper. TRUE causes the fire damper to open, while FALSE closes it. b Open indicates that the damper is open, b Closed indicates that it is closed. If both bits are FALSE, the drive is currently opening or closing. A rising edge at b Test initiates a test run on the fire damper. Errors that have been set can be cleared with this if they are no longer present. Inputs VAR_INPUT MP_Address : USINT := 1; b Start : BOOL := TRUE; b Test : BOOL; b Open_Close : BOOL; b Reset : BOOL; str Data KL6771 : Data KL6771; TMpolling : TIME := t#10s; END_VAR Name Type Description MP_Address USINT MP-Bus address of the slave. b Start BOOL A positive edge starts the function block. If this remains continuously TRUE, the function block will be activated cyclically with a period specified by the time in TMPolling. b Test BOOL A positive edge starts the test run at a fire damper. b Open_Close BOOL TRUE opens a damper, while FALSE closes a damper. b Reset BOOL A positive edge resets the actuator's error messages. str Data KL6771 Data KL6771 [} 120] The data structure with which the KL6771() [} 26] function block must be linked. TMpolling TIME The time for which the function block should address the actuator. Default 10 s, minimum time 1 s. TE1000 Version: 1.12.0 83
## Page 84

Programming Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; i Error Id : MP_Error; b Open : BOOL; b Closed : BOOL; b Err_Mec Trv : BOOL; b Err_Mec Ovld : BOOL; b Err_Em Flt : BOOL; b Err_Dmp Trv : BOOL; b Err_Dct Alm : BOOL; b Err_Sm Alm : BOOL; END_VAR Name Type Description b Busy BOOL This bit is set for as long as the function block is active. b Error BOOL This output goes TRUE as soon as an error occurs. This error is described via the i Error Id variable. i Error Id MP_ERROR [} 117] This output outputs an error code in the event of an error. b Error goes TRUE at the same time. b Open BOOL Fire damper is open. b Closed BOOL Fire damper is closed. b Err_Mec Trv BOOL Actuator error, "Positioning angle exceeded"; the actuator has passed more than 10° beyond the adaptation position. b Err_Mec Ovld BOOL Actuator error, "Overload"; the set position could not be reached. b Err_Em Flt BOOL Actuator error, "Safety-relevant error"; ambient temperature above 72 °C or motor temperature above 85 °C. Error can only be reset at the factory. b Err_Dmp Trv BOOL Actuator error "Damper test error" is canceled if the test run is OK. b Err_Dct Alm BOOL Actuator error, "Channel temperature too high"; the actuator is swinging backwards and forwards. b Err_Sm Alm BOOL Actuator error, "Smoke alarm" Requirements Development environment PLC library to include Twin CAT from v3.1.4020.14 Tc2_MPBus from 3.3.5.0 4.1.1.32 MP_TEM_Configuration This function block is used to configure the Thermal Energy Meter type 22PE-.. and 22PEM-.. . For more information please visit www.belimo.com. MP_Address is used to specify the MP-Bus device with which the function block is to communicate. b Start activates communication with the MP-Bus device. b Busy indicates that the function block is active. b Error is used to indicate an error in communication with the actuator. The type of the error can be read with i Error Id. 84 Version: 1.12.0 TE1000
## Page 85

Programming Inputs VAR_INPUT MP_Address : USINT := 1; b Start : BOOL; b Read_Write : BOOL; str Data KL6771 : Data KL6771; n Sensor1Type_Write : E_MP_EV_V4_Sensor1Type; b Select Meter Register_Write : BOOL; END_VAR Name Type Description MP_Address USINT MP-Bus address of the slave. b Start BOOL A positive edge starts the function block. If this remains continuously TRUE, the function block will be activated cyclically with a period specified by the time in TMPolling. b Read_Write BOOL If FALSE then READ only; if TRUE then READ and WRITE. str Data KL6771 Data KL6771 [} 120] The data structure with which the KL6771() [} 26] function block must be linked. n Sensor1Type_Writ E_MP_EV_V4_Sensor1Type Sensor 1 Type e [} 112] b Select Meter Registe BOOL FALSE = certified meter; TRUE = lifetime meter. r_Write Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; i Error Id : MP_Error; st_Malfunction Service : St_MP_EV_V4_Malfunction Service Info; n Sensor1Type : E_MP_EV_V4_Sensor1Type; r Vnom : LREAL; ar Serial Number : ARRAY[0..1] OF DWORD; b Select Meter Register : BOOL; END_VAR Name Type Description b Busy BOOL This bit is set for as long as the function block is active. b Error BOOL This output goes TRUE as soon as an error occurs. This error is described via the i Error Id variable. i Error Id MP_ERROR [} 117] This output outputs an error code in the event of an error. b Error goes TRUE at the same time. st_Malfunction Servic ST_MP_EV_V4_Malfunctio Malfunction and service information e n Service Info [} 122] n Sensor1Type E_MP_EV_V4_Sensor1Type Sensor 1 Type [} 112] r Vnom LREAL Nominal volume flow in l/s (0...100). ar Serial Number ARRAY OF DWORD Serial number of the device. b Select Meter Registe BOOL FALSE = certified meter; TRUE = lifetime meter. r Requirements Development environment PLC library to include Twin CAT from v3.1.4024.26 Tc2_MPBus from 3.4.14.0 TE1000 Version: 1.12.0 85
## Page 86

Programming 4.1.1.33 MP_TEM_Process This function block is suitable for the Thermal Energy Meter type 22PE-.. and 22PEM-.. . For more information please visit www.belimo.com. MP_Address is used to specify the MP-Bus device with which the function block is to communicate. b Start activates communication with the MP-Bus device. b Busy indicates that the function block is active. If b Start remains TRUE, the device is addressed cyclically with a period specified by the time in TMPolling. The time should be set longer than 1 second. b Error is used to indicate an error in communication with the actuator. The type of the error can be read with i Error Id. Inputs VAR_INPUT MP_Address : USINT := 1; b Start : BOOL; str Data KL6771 : Data KL6771; TMpolling : TIME := t#10s; END_VAR Name Type Description MP_Address USINT MP-Bus address of the slave. b Start BOOL A positive edge starts the function block. If this remains continuously TRUE, the function block will be activated cyclically with a period specified by the time in TMPolling. str Data KL6771 Data KL6771 [} 120] The data structure with which the KL6771() [} 26] function block must be linked. TMpolling TIME The time for which the function block should address the actuator. Default 10 s, minimum time 1 s. Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; i Error Id : MP_Error; str MP_Serial_Number : MP_Serial_Number; r Sensor1Value : LREAL; r Relative Volumetric Flow : LREAL; r Absolute Volumetric Flow : LREAL; r Glycol Concentration : LREAL; r Temperature1_Remote : LREAL; r Temperature2_Integrated : LREAL; r Delta Temperature : LREAL; r Absolute Cooling Power : LREAL; 86 Version: 1.12.0 TE1000
## Page 87

Programming r Absolute Heating Power : LREAL; r Total Volume : LREAL; n Cooling Energy : DINT; n Heating Energy : DINT; END_VAR Name Type Description b Busy BOOL This bit is set for as long as the function block is active. b Error BOOL This output goes TRUE as soon as an error occurs. This error is described via the i Error Id variable. i Error Id MP_ERROR [} 117] This output outputs an error code in the event of an error. b Error goes TRUE at the same time. str MP_Serial_Numb MP_Serial_Number [} 121] Structure for the serial number. er r Sensor1Value LREAL Sensor 1 Value in m V/ohm (0...65535). r Relative Volumetric F LREAL Relative volume flow rate in % (0...100). low r Absolute Volumetric LREAL Absolute volume flow rate in l/s (0...100). Flow r Glycol Concentratio LREAL Glycol concentration in % (0...100). n r Temperature1_Rem LREAL Temperatur1 remote in °C (-20...12). ote r Temperature2_Inte LREAL Temperature2 integrated in °C (-20...12). grated r Delta Temperature LREAL Temperature delta in K (0...14). r Absolute Cooling Po LREAL Absolute cooling power in k W (0...21.5). wer r Absolute Heating Po LREAL Absolute heating power in k W (0...21.5). wer r Total Volume LREAL Total volume in m³ (0...214748.36). n Cooling Energy DINT Cooling energy in k Wh (0...21474836). n Heating Energy DINT Heating energy in k Wh (0...21474836). Requirements Development environment PLC library to include Twin CAT from v3.1.4024.26 Tc2_MPBus from 3.4.14.0 4.1.1.34 MP_UST_3 This function block is used to control and monitor a multi-IO module UST3. TE1000 Version: 1.12.0 87
## Page 88

Programming MP_Address is used to specify the MP-Bus device with which the function block is to communicate. b Start activates communication with the MP-Bus device. b Busy indicates that the function block is active. If b Start remains TRUE, the device is addressed cyclically with a period specified by the time in TMPolling. The time should be set to greater than one second. b Error indicates an error in the communication with the drive. The type of the error can be read with i Error ID. The input data b Relay_R1 to b Relay_R3 switch the relays R1 to R3 (PIN 15 to PIN 17). The variable i Ua switches the analog output 0...10 V to PIN 5. One digit corresponds to 1 m V. The data structure SETTINGS is used for parameterization of the UST3. The scaling of the analog input data can be set, and the resistance measurement can be enabled on PIN4. The scaling of the measured resistance value can be changed for the resistance measurement. This can be done during operation. i U1 is the analog input on PIN 3. One digit corresponds to 1 m V, or 250 µV if the scaling in the data structure SETTINGS was changed. The same applies to the analog inputs i U2_YSensor (PIN 4) and i U3 (PIN 7).i U2_YSensor can also be used for resistance measurement. This must be set via the data structure SETTINGS. b Digital_S1 to b Digital_S3 correspond to the digital inputs of UST3, PIN 7 to PIN 9. 88 Version: 1.12.0 TE1000
## Page 89

Programming All data is automatically polled by the KL6771. The polling speed depends on the number of connected MP- Bus devices and the set polling time. The digital inputs are unsuitable for connecting buttons or sensors, which only issue short pulses. In order to be able to register a change in signal level reliably, it must be present for at least one second. Inputs VAR_INPUT MP_Address : USINT := 1; b Start : BOOL; str Data KL6771 : Data KL6771; TMpolling : TIME := t#10s; b Relay_R1 : BOOL; b Relay_R2 : BOOL; b Relay_R3 : BOOL; i Ua : UINT; SETTINGS : UST3_SET; END_VAR Name Type Description MP_Address USINT MP-Bus address of the slave. b Start BOOL A positive edge starts the function block. If this remains continuously TRUE, the function block will be activated cyclically with a period specified by the time in TMPolling. str Data KL6771 Data KL6771 [} 120] The data structure with which the KL6771() [} 26] function block must be linked. TMpolling TIME The time for which the function block should address the actuator. Default 10 s, minimum time 1 s. b Relay_R1 BOOL Relay PIN 15 b Relay_R2 BOOL Relay PIN 16 b Relay_R3 BOOL Relay PIN 17 i Ua UINT Analog output PIN 5 (1 m V = 1 digit) SETTINGS UST3_SET [} 125] Data structure for setting the scaling and the resistance measurement. Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; i Error Id : MP_Error; i U1 : INT; i U2_YSensor : INT; i U3 : INT; b Digital_S1 : BOOL; b Digital_S2 : BOOL; b Digital_S3 : BOOL; i Resistor : INT; END_VAR TE1000 Version: 1.12.0 89
## Page 90

Programming Name Type Description b Busy BOOL This bit is set for as long as the function block is active. b Error BOOL This output goes TRUE as soon as an error occurs. This error is described via the i Error Id variable. i Error Id MP_ERROR [} 117] This output outputs an error code in the event of an error. b Error goes TRUE at the same time. i U1 INT analog input PIN 3 (1 digit = 1 m V or 1 digit = 250 µV) i U2_YSensor INT analog input PIN 4 (1 digit = 1 m V or 1 digit = 250 µV) i U3 INT analog input PIN 7 (1 digit = 1 m V or 1 digit = 250 µV) b Digital_S1 BOOL digital input PIN 8 b Digital_S2 BOOL digital input PIN 9 b Digital_S3 BOOL digital input PIN 7 i Resistor INT Resistance value PIN 4 Requirements Development environment PLC library to include Twin CAT from v3.1.4020.14 Tc2_MPBus from 3.3.5.0 4.1.1.35 MP_VAV This function block is used to control and monitor a volume flow regulator. MP_Address is used to specify the MP-Bus device with which the function block is to communicate. b Start activates communication with the MP-Bus device. b Busy indicates that the function block is active. If b Start remains TRUE, the device is addressed cyclically with a period specified by the time in TMPolling. The time should be set longer than 1 second. b Error is used to indicate an error in communication with the drive. The type of the error can be read with i Error ID. A rising edge at b Reset clears any pending error messages from the drive. This resets errors that affect the output variables b Err_Mec Ocld, b Err_Act Hunt and b Err Mec Trv. If the error itself is still present, the drive will set these error bits again. Set Point is used to adjust the volume flow rate from 0..100%. The current position of the damper can be read through Act Value. If a sensor is connected to the drive, i Sensor Typ should be used to specify the sensor type. If no sensor is connected, the value "0" should be entered, or the variable should be left blank. A digital sensor should be parameterized with "1". The state of the sensor can be interrogated through b MP_Sensor_Digi. Analog sensors "2...6" are output in variable i MP_Sensor_Analog. 90 Version: 1.12.0 TE1000
## Page 91

Programming A rising edge at the b Open or b Close inputs opens or closes the damper of the drive. A falling edge at these two inputs clears the command again. Max Vol and Min Vol can be used to store a maximum and minimum flow rate in the drive. A rising edge at b Set writes the data to the drive. You can obtain the current value from the output data act_Max Vol and act_Min Vol. The current volume flow rate is output in the Air Volume_m3h variable. Inputs VAR_INPUT MP_Address : USINT := 1; b Start : BOOL; b Set : BOOL; b Open : BOOL; b Close : BOOL; b Reset : BOOL; i Sensor Typ : INT; Setpoint : USINT; Max Vol : WORD; Min Vol : WORD; str Data KL6771 : Data KL6771; TMpolling : TIME := t#10s; END_VAR Name Type Description MP_Address USINT MP-Bus address of the slave. b Start BOOL A positive edge starts the function block. If this remains continuously TRUE, the function block will be activated cyclically with a period specified by the time in TMPolling. b Set BOOL A positive edge writes the data Max Vol and Min Vol to the actuator. b Open BOOL A positive edge opens the dampers of the actuator, while a negative edge cancels the forced ventilation. b Close BOOL A positive edge closes the dampers of the actuator, while a negative edge cancels the forced closure. b Reset BOOL A positive edge resets the actuator's error messages. i Sensor Typ INT 0: no sensor connected, 1: digital sensor connected, 2: analog sensor connected (0...35 V), 3...6: output of a resistance in ohms (3..5 applies to PT1000, NI1000 and NI1000Lu S; 6 applies to NTC). To convert to a temperature, use the corresponding conversion functions. Setpoint USINT Set volume flow rate in % (0..100). Max Vol WORD Maximum volume flow rate in % (30..100). Min Vol WORD 0…100 % Minimum volume flow rate str Data KL6771 Data KL6771 [} 120] The data structure with which the KL6771() [} 26] function block must be linked. TMpolling TIME The time for which the function block should address the actuator. Default 10 s, minimum time 1 s. Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; i Error Id : MP_Error; Act Value : WORD; b MP_Sensor_Digi : BOOL; i MP_Sensor_Analog : INT; Air Volume_m3h : WORD; act_Max Vol : INT; act_Min Vol : INT; b Err_Act Hunt : BOOL; b Err_Mec Trv : BOOL; b Err_Mec Ovld : BOOL; END_VAR TE1000 Version: 1.12.0 91
## Page 92

Programming Name Type Description b Busy BOOL This bit is set for as long as the function block is active. b Error BOOL This output goes TRUE as soon as an error occurs. This error is described via the i Error Id variable. i Error Id MP_ERROR [} 117] This output outputs an error code in the event of an error. b Error goes TRUE at the same time. Act Value WORD Contains the current position of the actuator (0...100 %). b MP_Sensor_Digi BOOL If a digital sensor is connected, its state is indicated through this variable. i Sensor Typ must be "1". i MP_Sensor_Analog INT If an analog sensor is connected, its value is indicated through this variable. i Sensor Typ must be "2...6". Air Volume_m3h WORD Output of the volume flow rate in m³/h. act_Max Vol INT Maximum set volume flow rate in %. act_Min Vol INT Minimum set volume flow rate in %. b Err_Act Hunt BOOL Actuator error, "Regulating oscillation"; the actuator is swinging backwards and forwards. b Err_Mec Trv BOOL Actuator error, "Positioning angle exceeded"; the actuator has passed more than 10° beyond the adaptation position. b Err_Mec Ovld BOOL Actuator error, "Overload"; the set position could not be reached. Requirements Development environment PLC library to include Twin CAT from v3.1.4020.14 Tc2_MPBus from 3.3.5.0 4.1.1.36 MP_VRU_Configuration This function block is used to configure the VAV actuators VRU-D3-BAC, VRU-M1-BAC and VRU-M1R-BAC (max. 8 slaves). For more information please visit www.belimo.com. MP_Address is used to specify the MP-Bus device with which the function block is to communicate. b Start activates communication with the MP-Bus device. b Busy indicates that the function block is active. b Error is used to indicate an error in communication with the actuator. The type of the error can be read with i Error Id. Inputs VAR_INPUT MP_Address : USINT := 1; b Start : BOOL; b Read_Write : BOOL; dw Password : DWORD; str Data KL6771 : Data KL6771; 92 Version: 1.12.0 TE1000
## Page 93

Programming r Max : LREAL := 100; r Min : LREAL; b Setpoint Source : BOOL; b Operation Mode : BOOL := TRUE; n Sensor1Type : E_MP_VRU_Sensor1Type := MPBus_VRU_Sensor_Active; END_VAR Name Type Description MP_Address USINT MP-Bus address of the slave. b Start BOOL A positive edge starts the function block. If this remains continuously TRUE, the function block will be activated cyclically with a period specified by the time in TMPolling. b Read_Write BOOL If FALSE then READ only; if TRUE then READ and WRITE. dw Password DWORD The password for the actuators. Usually 0x0000. str Data KL6771 Data KL6771 [} 120] The data structure with which the KL6771() [} 26] function block must be linked. r Max LREAL Max in % (20...100 %). r Min LREAL Min in % (0...r Max). r Min must be smaller than r Max. b Setpoint Source BOOL TRUE = bus; FALSE = analog b Operation Mode BOOL TRUE = overpressure; FALSE = underpressure n Sensor1Type E_MP_VRU_Sensor1Type Sensor 1 type [} 115] Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; i Error Id : MP_Error; r Nominal Volumetic Flow : LREAL; r Nominal Delta Pressure : LREAL; r Min Read : LREAL; r Max Read : LREAL; b Setpoint Sources Read : BOOL; b Operation Mode Read : BOOL; n Sensor1Type Read : E_MP_VRU_Sensor1Type; n Application : E_MP_VRU_Application; b Control Mode : BOOL; n Room Pressure Cascade : E_MP_VRU_Room Pressure Cascade; END_VAR TE1000 Version: 1.12.0 93
## Page 94

Programming Name Type Description b Busy BOOL This bit is set for as long as the function block is active. b Error BOOL This output goes TRUE as soon as an error occurs. This error is described via the i Error Id variable. i Error Id MP_ERROR [} 117] This output outputs an error code in the event of an error. b Error goes TRUE at the same time. r Nominal Volumetic Fl LREAL Nominal volume flow in m³/h (0...60,000). ow r Nominal Delta Press LREAL Nominal differential pressure in Pa (0...10,000). ure r Min Read LREAL Min in % (0...r Max). r Min must be smaller than r Max. r Max Read LREAL Max in % (20...100 %). b Setpoint Sources Re BOOL TRUE = bus; FALSE = analog ad b Operation Mode Rea BOOL TRUE = overpressure; FALSE = underpressure d n Sensor1Type Read E_MP_VRU_Sensor1Type Sensor 1 type [} 115] n Application E_MP_VRU_Application Visualization of the application selected by the manufacturer. [} 114] b Control Mode BOOL Visualization of the control function selected by the manufacturer. TRUE = volume flow rate control; FALSE = position control. n Room Pressure Cas E_MP_VRU_Room Pressure Room pressure cascade control cade Cascade [} 115] Requirements Development environment PLC library to include Twin CAT from v3.1.4024.22 Tc2_MPBus from 3.4.13.0 4.1.1.37 MP_VRU_Process This function block is suitable for VAV actuators VRU-D3-BAC, VRU-M1-BAC and VRU-M1R-BAC (max. 8 slaves). For more information please visit www.belimo.com. 94 Version: 1.12.0 TE1000
## Page 95

Programming MP_Address is used to specify the MP-Bus device with which the function block is to communicate. b Start activates communication with the MP-Bus device. b Busy indicates that the function block is active. If b Start remains TRUE, the device is addressed cyclically with a period specified by the time in TMPolling. The time should be set longer than 1 s. b Error is used to indicate an error in communication with the actuator. The type of the error can be read with i Error Id. Inputs VAR_INPUT MP_Address : USINT := 1; b Start : BOOL; str Data KL6771 : Data KL6771; TMpolling : TIME := t#10s; r Setpoint : LREAL; n Override Control : E_MP_VRU_Override Control; n Command : E_MP_VRU_Command; n Data Read : BYTE; END_VAR Name Type Description MP_Address USINT MP-Bus address of the slave. b Start BOOL A positive edge starts the function block. If this remains continuously TRUE, the function block will be activated cyclically with a period specified by the time in TMPolling. str Data KL6771 Data KL6771 [} 120] The data structure with which the KL6771() [} 26] function block must be linked. TMpolling TIME The time for which the function block should address the actuator. Default 10 s, minimum time 1 s. r Setpoint LREAL Value in % (0.. 100 %). n Override Control E_MP_VRU_Override Contr Setpoint override ol [} 114] n Command E_MP_VRU_Command Command for service and test functions of the actuator. [} 114] n Data Read BYTE 0x FF - read all data; bit 0 - read relative position; bit 1 - read absolute position; bit 2 - read relative volume flow rate; bit 3 - read absolute volume flow rate; bit 4 - read value sensor 1; bit 5 - read analog setpoint; bit 6 - read relative differential pressure; bit 7 - read absolute differential pressure Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; i Error Id : MP_Error; str MP_Serial_Number : MP_Serial_Number; st_MP_VRU_Service Info : St_MP_VRU_Service Info; r Setpoint_Read : LREAL; n Override Control_Read : E_MP_VRU_Override Control; n Command_Read : E_MP_VRU_Command; r Relative Position : LREAL; r Absolute Position : LREAL; r Relative Volumetic Flow : LREAL; r Absloute Volumetic Flow : LREAL; r Sensor1Value : LREAL; r Setpoint Analog : LREAL; r Relative Delta Pressure : LREAL; r Absolute Delta Pressure : LREAL; END_VAR TE1000 Version: 1.12.0 95
## Page 96

Programming Name Type Description b Busy BOOL This bit is set for as long as the function block is active. b Error BOOL This output goes TRUE as soon as an error occurs. This error is described via the i Error Id variable. i Error Id MP_ERROR [} 117] This output outputs an error code in the event of an error. b Error goes TRUE at the same time. str MP_Serial_Numb MP_Serial_Number [} 121] Structure for the serial number. er st_MP_VRU_Servic ST_MP_VRU_Service Info Malfunction and service information e Info [} 123] r Setpoint_Read LREAL Setpoint n Override Control_R E_MP_VRU_Override Contr Override ead ol [} 114] n Command_Read E_MP_VRU_Command Command [} 114] r Relative Position LREAL Relative position in %. Value -1 means data disabled (see VAR_INPUT n Data Read). r Absolute Position LREAL Absolute position in °. Value -1 means data disabled (see VAR_INPUT n Data Read). r Relative Volumetic Fl LREAL Relative volume flow rate in %. Value -1 means data ow disabled (see VAR_INPUT n Data Read). r Absloute Volumetic F LREAL Absolute volume flow rate in m³/h. Value of -1 means data low disabled (see VAR_INPUT n Data Read). r Sensor1Value LREAL Value of sensor 1 in m V/Ohm. Value -1 means data disabled (see VAR_INPUT n Data Read). r Setpoint Analog LREAL Analog setpoint in %. Value -1 means data disabled (see VAR_INPUT n Data Read). r Relative Delta Press LREAL Relative differential pressure %. Value -1 means data ure disabled (see VAR_INPUT n Data Read). r Absolute Delta Press LREAL Absolute differential pressure in Pa. Value -1 means data ure disabled (see VAR_INPUT n Data Read). Requirements Development environment PLC library to include Twin CAT from v3.1.4024.22 Tc2_MPBus from 3.4.13.0 4.1.1.38 MP_Window This function block is used to control and monitor a window ventilation system (FLS). MP_Address is used to specify the MP-Bus device with which the function block is to communicate. b Start activates communication with the MP-Bus device. b Busy indicates that the function block is active. If b Start remains TRUE, the device is addressed cyclically with a period specified by the time in TMPolling. The time should be set longer than 1 second. b Error is used to indicate an error in communication with the FLS. The type of the error can be read with i Error ID. 96 Version: 1.12.0 TE1000
## Page 97

Programming Manual Mode can be used to enable or disable manual operation. The type of ventilation can be specified through Window Settings. Inputs VAR_INPUT MP_Address : USINT := 1; b Start : BOOL; Window Settings : Data_Window; Manuel Mode : BOOL; str Data KL6771 : Data KL6771; TMpolling : TIME := t#10s; END_VAR Name Type Description MP_Address USINT MP-Bus address of the slave. b Start BOOL A positive edge starts the function block. If this remains continuously TRUE, the function block will be activated cyclically with a period specified by the time in TMPolling. Window Settings Data_Window [} 106] Nominal ventilation settings. Manuel Mode BOOL FALSE = manual operation permitted, TRUE = manual operation disabled. str Data KL6771 Data KL6771 [} 120] The data structure with which the KL6771() [} 26] function block must be linked. TMpolling TIME The time for which the function block should address the actuator. Default 10 s, minimum time 1 s. Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; i Error Id : MP_Error; Window State : Data_Window; Window_Mech_Error : BOOL; Memory_Error : BOOL; END_VAR Name Type Description b Busy BOOL This bit is set for as long as the function block is active. b Error BOOL This output goes TRUE as soon as an error occurs. This error is described via the i Error Id variable. i Error Id MP_ERROR [} 117] This output outputs an error code in the event of an error. b Error goes TRUE at the same time. Window State Data_Window [} 106] Current ventilation settings. Window_Mech_Erro BOOL The window or actuator is blocked r Memory_Error BOOL The actuator has a memory error. Reprogram or replace. Requirements Development environment PLC library to include Twin CAT from v3.1.4020.14 Tc2_MPBus from 3.3.5.0 TE1000 Version: 1.12.0 97
## Page 98

Programming 4.1.1.39 MPL_Damper Linear Actuator This function block is used to control and monitor a drive of a damper and of a globe valve. MP_Address is used to specify the MP-Bus device with which the function block is to communicate. b Start activates communication with the MP-Bus device. b Busy indicates that the function block is active. If b Start remains TRUE, the device is addressed cyclically with a period specified by the time in TMPolling. The time should be set longer than 1 second. b Error is used to indicate an error in communication with the drive. The type of the error can be read with i Error ID. Set Point is used to adjust the position of the damper from 0..100%. The current position of the drive can be read through Act Value. Inputs VAR_INPUT MP_Address : USINT := 1; b Start : BOOL; Setpoint : USINT; str Data KL6771 : Data KL6771; TMpolling : TIME := t#10s; END_VAR Name Type Description MP_Address USINT MP-Bus address of the slave. b Start BOOL A positive edge starts the function block. If this remains continuously TRUE, the function block will be activated cyclically with a period specified by the time in TMPolling. Setpoint USINT 0...100 % set damper position of the actuator. str Data KL6771 Data KL6771 [} 120] The data structure with which the KL6771() [} 26] function block must be linked. TMpolling TIME The time for which the function block should address the actuator. Default 10 s, minimum time 1 s. Outputs VAR_OUTPUT b Busy : BOOL; Act Value : WORD; i Error ID : MP_ERROR; b Error : BOOL; END_VAR Name Type Description b Busy BOOL This bit is set for as long as the function block is active. Act Value WORD Contains the current position (0...100 %) of the actuator. i Error ID MP_ERROR [} 117] This output outputs an error code in the event of an error. b Error goes TRUE at the same time. b Error BOOL This output goes TRUE as soon as an error occurs. This error is described via the i Error ID variable. Requirements Development environment PLC library to include Twin CAT from v3.1.4020.14 Tc2_MPBus from 3.3.5.0 98 Version: 1.12.0 TE1000
## Page 99

Programming 4.1.2 Functions Function blocks Description NI1000_Lu S_TO_INT [} 99] This function calculates a temperature from the value of an NI1000 L&S resistor. NI1000_TO_INT [} 99] This function calculates a temperature from the value of an NI1000 resistor. NTC_TO_INT [} 100] This function calculates a temperature from the value of an NTC resistor. PT1000_TO_INT [} 100] This function calculates a temperature from the value of a PT1000 resistor. 4.1.2.1 NI1000_Lu S_TO_INT: INT This function calculates a temperature from the value of an NI1000 L&S resistor. Connect this function to i MP_Sensor_Analog. As output, you receive an INT variable that represents the temperature with a resolution of 0.01°C (20.5°C, for example, is represented as 2050). The lowest valid value of 872 ohms corresponds to -30°C. If the value is smaller than this, 16#7FFD is output. The largest valid value of 1586 ohms corresponds to 115°C. If the value is greater than this, 16#7FFE is output. VAR_INPUT MP_Value : WORD; MP_Value: Input for an ohmic NI1000 L&S sensor Requirements Development environment PLC library to include Twin CAT from v3.1.4020.14 Tc2_MPBus from 3.3.5.0 4.1.2.2 NI1000_TO_INT: INT This function calculates a temperature from the value of an NI1000 resistor. Connect this function to i MP_Sensor_Analog. As output, you receive an INT variable that represents the temperature with a resolution of 0.01°C (20.5°C, for example, is represented as 2050). The lowest valid value of 867 ohms corresponds to -25°C. If the value is smaller than this, 16#7FFD is output. The largest valid value of 1583 ohms corresponds to 95°C. If the value is greater than this, 16#7FFE is output. VAR_INPUT MP_Value : WORD; MP_Value: Input for an ohmic NI1000 sensor TE1000 Version: 1.12.0 99
## Page 100

Programming Requirements Development environment PLC library to include Twin CAT from v3.1.4020.14 Tc2_MPBus from 3.3.5.0 4.1.2.3 NTC_TO_INT: INT This function calculates a temperature from the value of an NTC resistor. Connect this function to i MP_Sensor_Analog. As output, you receive an INT variable that represents the temperature with a resolution of 0.01°C (20.5°C, for example, is represented as 2050). The lowest valid value of 104 ohms corresponds to 145°C. If the value is smaller than this, 16#7FFD is output. The largest valid value of 48555 ohms corresponds to -20°C. If the value is greater than this, 16#7FFE is output. VAR_INPUT MP_Value : WORD; MP_Value: Input for an ohmic NTC sensor Requirements Development environment PLC library to include Twin CAT from v3.1.4020.14 Tc2_MPBus from 3.3.5.0 4.1.2.4 PT1000_TO_INT: INT This function calculates a temperature from the value of a PT1000 resistor. Connect this function to i MP_Sensor_Analog. As output, you receive an INT variable that represents the temperature with a resolution of 0.01°C (20.5°C, for example, is represented as 2050). The lowest valid value of 862 ohms corresponds to -35°C. If the value is smaller than this, 16#7FFD is output. The largest valid value of 1592 ohms corresponds to 155°C. If the value is greater than this, 16#7FFE is output. VAR_INPUT MP_Value : WORD; MP_Value: Input for an ohmic PT1000 sensor Requirements Development environment PLC library to include Twin CAT from v3.1.4020.14 Tc2_MPBus from 3.3.5.0 100 Version: 1.12.0 TE1000
## Page 101

Programming 4.1.3 Error codes TE1000 Version: 1.12.0 101
## Page 102

Programming Value Value Value (enum) Description (hex) (dec) 0x0000 0 NO_MP_ERROR No error. 0x0001 1 WRONG_TERMINAL Incorrect terminal connected. 0x0002 2 NO_ANSWER_FROM_KL6771 No answer from the KL6771 MP-Bus master terminal. This message usually means that there is no connection to the terminal. Terminal linked to the variables in the System Manager? Terminal plugged in incorrectly? Clean all, rebuild all and read again in the System Manager? 0x0003 3 NO_LINK_TO_STRUCTURE_str Data K Check the link to the structure Data KL6771 L6771 [} 120]. 0x000A 10 WRONG_MP_ADDRESS_IS_0 MP-Bus address is 0. Only addresses between 1 and 8 are allowed. 0x000B 11 WRONG_MP_ADDRESS MP-Bus address is >8. Only addresses between 1 and 8 are allowed. 0x0015 21 WRONG_SET_POINT Incorrect set point. 0x0019 25 MP_BUS_TIMEOUT_NO_ANSWER_F MP-Bus timeout, no answer from slave. ROM_SLAVE 0x0020 26 MP_BUS_SETPOINT_DIFF_TOO_HIG Difference from setpoint too high. H 0x001F 31 KL6771_TIME_OUT KL6771 timeout. 0x0020 32 MP_ADDRESS_IS_IN_USE MP-Bus address is in use. 0x0021 33 MP_DISABLED MP-Bus disabled. 0x0057 87 MP_BUS_ERROR MP-Bus error. 0x0058 88 MP_NO_ANSWER_ON_EVENT MP-Bus no answer to an event. 0x0059 89 MP_NO_ANSWER MP-Bus no answer. 0x005A 90 MP_COM_BREAK MP-Bus abort communication. 0x0062 98 MP_LENGTH_PARITY_ERROR MP-Bus length parity error. 0x0063 99 MP_CROSS_PARITY_ERROR MP-Bus cross parity error. 0x0065 101 MP_MASTER_CONFLICT_ERROR MP-Bus MASTER_CONFLICT_ERROR. 0x0066 102 MP_GAP_TIMEOUT_ERROR MP-Bus GAP Timeout. 0x0067 103 MP_NO_ANSWER_SLAVE MP-Bus no answer from slave. 0x006E 110 MP_ANSWER_ERROR_FLAG MP-Bus error bit in answer telegram is set. 0x006F 111 MP_ANSWER_WRONG_LEN MP-Bus wrong telegram length. 0x0070 112 MP_ANSWER_WRONG_TELEG MP-Bus wrong telegram received. 0x0073 115 MP_ANSWER_WITH_ERROR Answer contains an error. 0x00C8 200 MP_ERROR_Wrong Device Family Wrong device family. 0x012C 300 MP_CONF_ERROR_CO2Limit Good Configuration error for CO2 limitation "Good". 0x012D 301 MP_CONF_ERROR_CO2Limit Moderat Configuration error for CO2 limitation e "Moderate". 0x012E 302 MP_CONF_ERROR_CO2Limit Configuration error for CO2 limitation. 0x012F 303 MP_CONF_ERROR_WRONG_TEMP_ Configuration error for temperature offset. OFFSET 0x0130 304 MP_CONF_ERROR_WRONG_HUMID Configuration error for humidity offset. ITY_OFFSET 0x0131 305 MP_CONF_ERROR_WRONG_CO2_O Configuration error for CO2 offset. FFSET 0x0132 306 MP_CONF_ERROR_WRONG_Temp S Configuration error for temperature setpoint. etpoint 102 Version: 1.12.0 TE1000
## Page 103

Programming Value Value Value (enum) Description (hex) (dec) 0x0133 307 MP_CONF_ERROR_WRONG_Relativ Configuration error for relative temperature e Temp Setpoint setpoint. 0x0134 308 MP_CONF_ERROR_WRONG_Default Configuration error for preset temperature Temp Setpoint setpoint. 0x0135 309 MP_CONF_ERROR_WRONG_Temp S Configuration error for temperature setpoint etpoint Range range. 0x800A 32778 MP_ANSWER_Reserve Reserve. 0x800B 32779 MP_ANSWER_Unknow Command Unknown command. 0x800C 32780 MP_ANSWER_Wrong Or No Password Wrong or no password. 0x800D 32781 MP_ANSWER_Command Execution Command execution. 0x800E 32782 MP_ANSWER_Parameter Error Parameter error. 0x800F 32783 MP_ANSWER_Unknow Id Unknown ID. 0x8010 32784 MP_ANSWER_Size Mismatch Wrong size. 0x8011 32785 MP_ANSWER_Illegal Block Nr Invalid block number. 0x8012 32786 MP_ANSWER_Internal Bus Busy Internal bus is busy. 0x80FF 33023 MP_ANSWER_Reserved For Future Reserve. TE1000 Version: 1.12.0 103
## Page 104

Programming 4.2 DUTs 4.2.1 Enums 104 Version: 1.12.0 TE1000
## Page 105

Programming Data types Description Data_Window [} 106] Ventilation type. E_MP_Air Quality Status [} 106] Status of the measured air quality. E_MP_Display Background [} 107] Background color of the display. E_MP_Display Mode Button [} 107] Display mode of the buttons. E_MP_Display Mode Heating Cooling Display mode of heating or cooling icons. [} 107] E_MP_Display Mode Icon Warning Display mode of the warning icon. [} 107] E_MP_Display Mode Icon Window Display mode of the window icon. [} 108] E_MP_Display Mode Temp [} 108] Display mode temperature. E_MP_Display Mode Temp Unit Display mode of the unit for the temperature. [} 108] E_MP_Display Mode Ventilation Stage Number of adjustable ventilation stages shown on the display. [} 108] E_MP_Display Visibility [} 109] Visibility on the display. E_MP_Enabled Status [} 109] Enabled status. E_MP_EP_R_R6_Unit Sel [} 109] Scaling. E_MP_EV_V4_Bus Fail Action [} 110] Bus failure action. E_MP_EV_V4_Command [} 110] Command for service and test functions of the actuator. E_MP_EV_V4_Control Mode [} 110] Control mode. E_MP_EV_V4_Delta TLimitation Response to a low delta T. [} 111] E_MP_EV_V4_Delta TManager Status Status from Delta T Manager. [} 111] E_MP_EV_V4_Override Control Setpoint override. [} 111] E_MP_EV_V4_Sensor1Passive Type Passive sensor. [} 112] E_MP_EV_V4_Sensor1Type [} 112] External sensor at input S1. E_MP_System Operation Mode Operation mode of the system. [} 113] E_MP_VRU_Application [} 114] Visualization of the application selected by the manufacturer. E_MP_VRU_Command [} 114] Commands for service and test functions of the actuator. E_MP_VRU_Override Control [} 114] Setpoint override. E_MP_VRU_Room Pressure Cascade Room pressure cascade control. [} 115] E_MP_VRU_Sensor1Type [} 115] External sensor at input S1. E_MPBus_Control Mode [} 116] Control mode. E_MPBus_Delta TLimitation [} 116] Delta T (d T) limitation. E_MPBus_Override [} 116] Override mode. E_MPBus_Override_6way MPIV Override control mode. [} 117] MP_ERROR [} 117] Error messages. UST3_EX [} 119] Voltage scaling. TE1000 Version: 1.12.0 105
## Page 106

Programming Data types Description UST3_R_SET [} 119] Resistance scaling. 4.2.1.1 Data_Window This ENUM can be used to specify the ventilation method. TYPE Data_Window : ( Window_Close := 8, Window_Unlock := 9, Window_Open := 10, Window_20 := 11, Window_40 := 12, Window_60 := 13, Window_80 := 14, Window_100 := 15, Auto_Close := 1, Auto_5_15min := 2, Auto_8_30min := 3, Auto_10_50min := 4, Auto_open := 5, Auto := 0 ) END_TYPE Window_Close: Closes the window Window_Unlock: If you use "Unlock", use the switch in the window to restart the MP-Bus communication Window_Open: Opens the window Window_20: Opens the window by 20 % Window_40: Opens the window by 40 % Window_60: Opens the window by 60 % Window_80: Opens the window by 80 % Window_100: Opens the window by 100 % Auto_Close: Automatic closing Auto_5_15min: Automatic ventilation every 5...15 minutes Auto_8_30min: Automatic ventilation every 8...30 minutes Auto_10_50min: Automatic ventilation every 10...50 minutes Auto_open: Automatic ventilation open Auto: Automatic mode Requirements Development environment PLC library to include Twin CAT from v3.1.4020.14 Tc2_MPBus from 3.3.5.0 4.2.1.2 E_MP_Air Quality Status Status of the measured air quality. TYPE E_MP_Air Quality Status : ( MPBus_Air Quality Status_Deactivated := 0, MPBus_Air Quality Status_OK := 1, MPBus_Air Quality Status_Warning := 2, MPBus_Air Quality Status_Alarm := 3 ); END_TYPE 106 Version: 1.12.0 TE1000
## Page 107

Programming MPBus_Air Quality Status_Deactivated: Deactivated. MPBus_Air Quality Status_OK: OK. MPBus_Air Quality Status_Warning: Warning. MPBus_Air Quality Status_Alarm: Alarm. 4.2.1.3 E_MP_Display Background Background color of the display. TYPE E_MP_Display Background : ( MPBus_Display Background_White On Black := 0, MPBus_Display Background_Black On White := 1 ); END_TYPE MPBus_Display Background_White On Black: White on black. MPBus_Display Background_Black On White: Black on white. 4.2.1.4 E_MP_Display Mode Button Display mode of the buttons. TYPE E_MP_Display Mode Button : ( MPBus_Display Mode Button_Invisible := 0, MPBus_Display Mode Button_Status := 1, MPBus_Display Mode Button_Setpoint := 2 ); END_TYPE MPBus_Display Mode Button_Invisible: Invisible. MPBus_Display Mode Button_Status: Status. MPBus_Display Mode Button_Setpoint: Setpoint. 4.2.1.5 E_MP_Display Mode Heating Cooling Display mode of heating or cooling icons. TYPE E_MP_Display Mode Heating Cooling : ( MPBus_Display Mode Heating Cooling_None := 0, MPBus_Display Mode Heating Cooling_Heating := 1, MPBus_Display Mode Heating Cooling_Cooling := 2 ); END_TYPE MPBus_Display Mode Heating Cooling_None: None. MPBus_Display Mode Heating Cooling_Heating: Heating. MPBus_Display Mode Heating Cooling_Cooling: Cooling. 4.2.1.6 E_MP_Display Mode Icon Warning Display mode of the warning icon. TYPE E_MP_Display Mode Icon Warning : ( MPBus_Display Mode Icon Warning_Invisible := 0, MPBus_Display Mode Icon Warning_Icon := 1, MPBus_Display Mode Icon Warning_Device Error State := 2 ); END_TYPE MPBus_Display Mode Icon Warning_Invisible: Invisible. TE1000 Version: 1.12.0 107
## Page 108

Programming MPBus_Display Mode Icon Warning_Icon: Icon. MPBus_Display Mode Icon Warning_Device Error State: Error state of the device. 4.2.1.7 E_MP_Display Mode Icon Window Display mode of the window icon. TYPE E_MP_Display Mode Icon Window : ( MPBus_Display Mode Icon Window_Invisible := 0, MPBus_Display Mode Icon Window_Icon := 1, MPBus_Display Mode Icon Window_Reserve := 2 ); END_TYPE MPBus_Display Mode Icon Window_Invisible: Invisible. MPBus_Display Mode Icon Window_Icon: Icon. MPBus_Display Mode Icon Window_Reserve: Reserve. 4.2.1.8 E_MP_Display Mode Temp Display mode temperature. TYPE E_MP_Display Mode Temp : ( MPBus_Display Mode Temp_Invisible := 0, MPBus_Display Mode Temp_Actual Room Temp := 1, MPBus_Display Mode Temp_Room Temp Setpoint := 2 ); END_TYPE MPBus_Display Mode Temp_Invisible: Invisible. MPBus_Display Mode Temp_Actual Room Temp: Actual room temperature. MPBus_Display Mode Temp_Room Temp Setpoint: Setpoint of the room temperature. 4.2.1.9 E_MP_Display Mode Temp Unit Display mode of the unit for the temperature. TYPE E_MP_Display Mode Temp Unit : ( MPBus_Display Mode Temp Unit_C := 0, MPBus_Display Mode Temp Unit_K := 1, MPBus_Display Mode Temp Unit_F := 2 ); END_TYPE MPBus_Display Mode Temp Unit_C: °C. MPBus_Display Mode Temp Unit_Reserve: K. MPBus_Display Mode Temp Unit_F: °F. 4.2.1.10 E_MP_Display Mode Ventilation Stage Number of adjustable ventilation stages shown on the display. TYPE E_MP_Display Mode Ventilation Stage : ( MPBus_Display Mode Ventilation Stage_Reserve1 := 0, MPBus_Display Mode Ventilation Stage_Reserve2 := 1, MPBus_Display Mode Ventilation Stage_3 := 2, MPBus_Display Mode Ventilation Stage_4 := 3, MPBus_Display Mode Ventilation Stage_7 := 4 ); END_TYPE 108 Version: 1.12.0 TE1000
## Page 109

Programming MPBus_Display Mode Ventilation Stage_Reserve1: Reserve 1. MPBus_Display Mode Ventilation Stage_Reserve2: Reserve 2. MPBus_Display Mode Ventilation Stage_3: 3 ventilation stages. MPBus_Display Mode Ventilation Stage_4: 4 ventilation stages. MPBus_Display Mode Ventilation Stage_7: 7 ventilation stages. 4.2.1.11 E_MP_Display Visibility Visibility on the display. TYPE E_MP_Display Visibility : ( MPBus_Display Visibility_Invisible := 0, MPBus_Display Visibility_Visible := 1 ); END_TYPE MPBus_Display Visibility_Invisible: Invisible. MPBus_Display Visibility_Visible: Visible. 4.2.1.12 E_MP_Enabled Status Enabled status. TYPE E_MP_Enabled Status : ( MPBus_Enabled Status_Disabled := 0, MPBus_Enabled Status_Enabled := 1 ); END_TYPE MPBus_Enabled Status_Disabled: Disabled. MPBus_Enabled Status_Enabled: Enabled. 4.2.1.13 E_MP_EP_R_R6_Unit Sel Scaling. TYPE E_MP_ER_R_R6_Unit Sel : ( E_MP_m3_s := 0, E_MP_m3_h := 1, E_MP_l_s := 2, E_MP_l_min := 3, E_MP_l_h := 4, E_MP_gpm := 5, E_MP_cfm := 6 ); END_TYPE E_MP_m3_s: Sets scaling to m3/s. E_MP_m3_h: Sets scaling to m3/h. E_MP_l_s: Sets scaling to l/s. E_MP_l_min: Sets scaling to l/min. E_MP_l_h: Sets scaling to l/h. E_MP_gpm: Sets scaling to gpm. E_MP_cfm: Sets scaling to cfm. TE1000 Version: 1.12.0 109
## Page 110

Programming Requirements Development environment PLC library to include Twin CAT from v3.1.4022.14 Tc2_MPBus from 3.4.8.0 4.2.1.14 E_MP_EV_V4_Bus Fail Action Bus failure action. TYPE E_MP_EV_V4_Bus Fail Action : ( MPBus_EV_Bus Fail Action_None := 0, MPBus_EV_Bus Fail Action_Open Valve := 1, MPBus_EV_Bus Fail Action_Close Valve := 2, MPBus_EV_Bus Fail Action_Max Flow := 3, MPBus_EV_Bus Fail Action_Min Flow := 4, MPBus_EV_Bus Fail Action_Mid Flow := 5, MPBus_EV_Bus Fail Action_Stop := 6 ); END_TYPE MPBus_EV_Bus Fail Action_None: None. MPBus_EV_Bus Fail Action_Open Valve: Open valve. MPBus_EV_Bus Fail Action_Close Valve: Close valve. MPBus_EV_Bus Fail Action_Max Flow: Maximum flow. MPBus_EV_Bus Fail Action_Min Flow: Minimum flow. MPBus_EV_Bus Fail Action_Mid Flow: Medium flow rate. MPBus_EV_Bus Fail Action_Stop: Stop. Requirements Development environment PLC library to include Twin CAT from v3.1.4024.46 Tc2_MPBus from 3.6.1.0 4.2.1.15 E_MP_EV_V4_Command Command for service and test functions of the actuator. TYPE E_MP_EV_V4_Command : ( MPBus_EV_Command_None := 0, MPBus_EV_Command_Sync := 2 ); END_TYPE MPBus_EV_Command_None: none. MPBus_EV_Command_Sync: sync. Requirements Development environment PLC library to include Twin CAT from v3.1.4024.26 Tc2_MPBus from 3.4.14.0 4.2.1.16 E_MP_EV_V4_Control Mode Control mode. TYPE E_MP_EV_V4_Control Mode : ( MPBus_EV_Position Control := 0, MPBus_EV_Flow Control := 1, 110 Version: 1.12.0 TE1000
## Page 111

Programming MPBus_EV_Power Control := 2, MPBus_EV_Differential Pressure Control := 3 ); END_TYPE MPBus_EV_Position Control: Position control. MPBus_EV_Flow Control: Flow control. MPBus_EV_Power Control: Power control. MPBus_EV_Differential Pressure Control: Differential pressure control. Requirements Development environment PLC library to include Twin CAT from v3.1.4024.26 Tc2_MPBus from 3.4.14.0 4.2.1.17 E_MP_EV_V4_Delta TLimitation Response to a low delta T. TYPE E_MP_EV_V4_Delta TLimitation : ( MPBus_EV_Disabled := 0, MPBus_EV_Delta T_Manager := 1, MPBus_EV_Delta T_Manager_Scaled := 2 ); END_TYPE MPBus_EV_Disabled: disabled. MPBus_EV_Delta T_Manager: Delta T Manager. MPBus_EV_Delta T_Manager_Scaled: Delta T Manager scaled. Requirements Development environment PLC library to include Twin CAT from v3.1.4024.26 Tc2_MPBus from 3.4.14.0 4.2.1.18 E_MP_EV_V4_Delta TManager Status Status from Delta T Manager. TYPE E_MP_EV_V4_Delta TManager Status : ( MPBus_EV_Not Select := 0, MPBus_EV_Standby := 1, MPBus_EV_Active := 2 ); END_TYPE MPBus_EV_Not Select: not selected. MPBus_EV_Standby: standby. MPBus_EV_Active: active. Requirements Development environment PLC library to include Twin CAT from v3.1.4024.26 Tc2_MPBus from 3.4.14.0 4.2.1.19 E_MP_EV_V4_Override Control Setpoint override. TE1000 Version: 1.12.0 111
## Page 112

Programming TYPE E_MP_EV_V4_Override Control : ( MPBus_EV_Override_None := 0, MPBus_EV_Override_Open := 1, MPBus_EV_Override_Close := 2, MPBus_EV_Override_Min Flow := 3, MPBus_EV_Override_Mid Flow := 4, MPBus_EV_Override_Max Flow := 5, MPBus_EV_Override_Nom Flow := 6, MPBus_EV_Override_Motor_Stop := 10 ); END_TYPE MPBus_EV_Override_None: None. MPBus_EV_Override_Open: Open. MPBus_EV_Override_Close: Close. MPBus_EV_Override_Min Flow: Minimum flow. MPBus_EV_Override_Mid Flow: Medium flow rate. MPBus_EV_Override_Max Flow: Maximum flow. MPBus_EV_Override_Nom Flow: Nominal flow. MPBus_EV_Override_Motor_Stop: Motor stop. Requirements Development environment PLC library to include Twin CAT from v3.1.4024.26 Tc2_MPBus from 3.4.14.0 4.2.1.20 E_MP_EV_V4_Sensor1Passive Type Type of passive sensor 1. TYPE E_MP_EV_V4_Sensor1Passive Type : ( MPBus_EV_Sensor Passive_None := 0, MPBus_EV_Sensor Passive_PT1000 := 1, MPBus_EV_Sensor Passive_NI1000 := 2, MPBus_EV_Sensor Passive_NTC10k2 := 7, MPBus_EV_Sensor Passive_NTC10k3 := 8 ); END_TYPE MPBus_EV_Sensor Passive_None: None. MPBus_EV_Sensor Passive_PT1000: PT1000. MPBus_EV_Sensor Passive_NI1000: NI1000. MPBus_EV_Sensor Passive_NTC10k2: NTC10k2. MPBus_EV_Sensor Passive_NTC10k3: NTC10k3. Prerequisites Development Environment PLC library to include Twin CAT from v3.1.4024.66 Tc2_MPBus from 3.7.1.0 4.2.1.21 E_MP_EV_V4_Sensor1Type External sensor at input S1. TYPE E_MP_EV_V4_Sensor1Type : ( MPBus_EV_Sensor_None := 0, 112 Version: 1.12.0 TE1000
## Page 113

Programming MPBus_EV_Sensor_Active := 1, MPBus_EV_Sensor_Passive := 3, MPBus_EV_Sensor_Switch := 4 ); END_TYPE MPBus_EV_Sensor_None: none. MPBus_EV_Sensor_Active: active. MPBus_EV_Sensor_Passive: passive. MPBus_EV_Sensor_Switch: switch. Prerequisites Development Environment PLC library to include Twin CAT from v3.1.4024.28 Tc2_MPBus from 3.4.15.0 4.2.1.22 E_MP_JR_V4_Override Control Setpoint override. TYPE E_MP_JR_V4_Override Control : ( MPBus_JR_Override_None := 0, MPBus_JR_Override_Open := 1, MPBus_JR_Override_Close := 2, MPBus_JR_Override_Mid := 4, MPBus_JR_Override_Max := 5 ); END_TYPE MPBus_JR_Override_None: None. MPBus_JR_Override_Open: Open. MPBus_JR_Override_Close: Close. MPBus_JR_Override_Mid: Middle. MPBus_JR_Override_Max: Maximum. Prerequisites Development Environment PLC library to include Twin CAT from v3.1.4024.66 Tc2_MPBus from 3.7.1.0 4.2.1.23 E_MP_System Operation Mode Operation mode of the system. TYPE E_MP_System Operation Mode : ( MPBus_System Operation Mode_Off Protection := 0, MPBus_System Operation Mode_On Comfort := 1, MPBus_System Operation Mode_Eco := 2, MPBus_System Operation Mode_Boost := 3 ); END_TYPE MPBus_System Operation Mode_Off Protection: Off/protection. MPBus_System Operation Mode_On Comfort: On/comfort. MPBus_System Operation Mode_Eco: Eco mode. MPBus_System Operation Mode_Boost: Boost mode. TE1000 Version: 1.12.0 113
## Page 114

Programming 4.2.1.24 E_MP_VRU_Application Visualization of the application selected by the manufacturer. TYPE E_MP_VRU_Application : ( MPBus_VRU_Application_Flow Control := 0, MPBus_VRU_Application_Pressure Control := 1, MPBus_VRU_Application_Room Pressure Control := 2, MPBus_VRU_Application_Flow Measurement := 3 ); END_TYPE MPBus_VRU_Application_Flow Control: Flow control. MPBus_VRU_Application_Pressure Control: Pressure control. MPBus_VRU_Application_Room Pressure Control: Room pressure control. MPBus_VRU_Application_Flow Measurement: Flow measurement. Requirements Development environment PLC library to include Twin CAT from v3.1.4024.22 Tc2_MPBus from 3.4.13.0 4.2.1.25 E_MP_VRU_Command Commands for service and test functions of the drive. TYPE E_MP_VRU_Command : ( MPBus_VRU_Command_None := 0, MPBus_VRU_Command_Adaption := 1, MPBus_VRU_Command_Test := 2, MPBus_VRU_Command_Sync := 3 ); END_TYPE MPBus_VRU_Command_None: None. MPBus_VRU_Command_Adaption: Adaptation. MPBus_VRU_Command_Test: Test. MPBus_VRU_Command_Sync: Sync. Requirements Development environment PLC library to include Twin CAT from v3.1.4024.22 Tc2_MPBus from 3.4.13.0 4.2.1.26 E_MP_VRU_Override Control Setpoint override. TYPE E_MP_VRU_Override Control : ( MPBus_VRU_Override_None := 0, MPBus_VRU_Override_Open := 1, MPBus_VRU_Override_Close := 2, MPBus_VRU_Override_Max := 3, MPBus_VRU_Override_Min := 4, MPBus_VRU_Override_Reserve := 5, MPBus_VRU_Override_Motor_Stop := 6, MPBus_VRU_Override_Vnom_Pnom := 7 ); END_TYPE MPBus_VRU_Override_None: None. 114 Version: 1.12.0 TE1000
## Page 115

Programming MPBus_VRU_Override_Open: Open. MPBus_VRU_Override_Close: Close. MPBus_VRU_Override_Max: Maximum. MPBus_VRU_Override_Min: Minimum. MPBus_VRU_Override_Reserve: Reserve. MPBus_VRU_Override_Motor_Stop: Motor stop. MPBus_VRU_Override_Vnom_Pnom: Vnom / Pnom. Requirements Development environment PLC library to include Twin CAT from v3.1.4024.22 Tc2_MPBus from 3.4.13.0 4.2.1.27 E_MP_VRU_Room Pressure Cascade Room pressure cascade control. TYPE E_MP_VRU_Room Pressure Cascade : ( MPBus_VRU_Room Pressure Cascade_Disabled := 0, MPBus_VRU_Room Pressure Cascade_Enabled := 1, MPBus_VRU_Room Pressure Cascade_Enabled Fast := 2 ); END_TYPE MPBus_VRU_Room Pressure Cascade_Disabled: Room pressure cascade control disabled. MPBus_VRU_Room Pressure Cascade_Enabled: Room pressure cascade control enabled. MPBus_VRU_Room Pressure Cascade_Enabled Fast: Room pressure cascade control enabled (fast). Requirements Development environment PLC library to include Twin CAT from v3.1.4024.22 Tc2_MPBus from 3.4.13.0 4.2.1.28 E_MP_VRU_Sensor1Type External sensor at input S1. TYPE E_MP_VRU_Sensor1Type : ( MPBus_VRU_Sensor_None := 0, MPBus_VRU_Sensor_Active := 1, MPBus_VRU_Sensor_Passive := 2, MPBus_VRU_Sensor_Switch := 4 ); END_TYPE MPBus_VRU_Sensor_None: None. MPBus_VRU_Sensor_Active: Active. MPBus_VRU_Sensor_Passive: Passive. MPBus_VRU_Sensor_Switch: Switch. Requirements Development environment PLC library to include Twin CAT from v3.1.4024.22 Tc2_MPBus from 3.4.13.0 TE1000 Version: 1.12.0 115
## Page 116

Programming 4.2.1.29 E_MPBus_Control Mode Control mode. TYPE E_MPBus_Control Mode : ( MPBus_Control Mode_Pos Ctrl := 0, MPBus_Control Mode_Flow Ctrl := 1, MPBus_Control Mode_Power Ctrl := 2, MPBus_Control Mode_Disable := 255 ); END_TYPE MPBus_Control Mode_Pos Ctrl: Controls according to position. MPBus_Control Mode_Flow Ctrl: Controls according to flow rate. MPBus_Control Mode_Power Ctrl: Controls according to the amount of energy. MPBus_Control Mode_Disable: Disabled. Requirements Development environment PLC library to include Twin CAT from v3.1.4020.14 Tc2_MPBus from 3.3.5.0 4.2.1.30 E_MPBus_Delta TLimitation Delta T (d T) limitation. Details can be found in the Belimo Energy Valve documentation. TYPE E_MPBus_Delta TLimitation : ( MPBus_Delta TLimitation_Disable := 0, MPBus_Delta TLimitation_d T_Manager := 1, MPBus_Delta TLimitation_d T_Manager Scal := 2 ); END_TYPE MPBus_Delta TLimitation_Disable: d T disabled. MPBus_Delta TLimitation_d T_Manager: Simple d T limitation. MPBus_Delta TLimitation_d T_Manager Scal: Extended d T limitation. Requirements Development environment PLC library to include Twin CAT from v3.1.4020.32 Tc2_MPBus from 3.4.6.0 4.2.1.31 E_MPBus_Override Override mode. TYPE E_MPBus_Override : ( MPBus_Override_None := 0, MPBus_Override_Auto := 1, MPBus_Override_Close := 2, MPBus_Override_Open := 3, MPBus_Override_Vnom := 4, MPBus_Override_Vmax := 5, MPBus_Override_Stop := 6, MPBus_Override_Pnom := 7, MPBus_Override_Pmax := 8 ); END_TYPE 116 Version: 1.12.0 TE1000
## Page 117

Programming Requirements Development environment PLC library to include Twin CAT from v3.1.4020.14 Tc2_MPBus from 3.3.5.0 4.2.1.32 E_MPBus_Override_6way MPIV Override mode. TYPE E_MPBus_Override_6way MPIV : ( MPBus_6way MPIV_None := 0, MPBus_6way MPIV_Seq1Open := 1, MPBus_6way MPIV_Seq2Open := 2, MPBus_6way MPIV_Close := 3, MPBus_6way MPIV_Seq1Vmax := 4, MPBus_6way MPIV_Seq2Vmax := 5 ); END_TYPE Requirements Development environment PLC library to include Twin CAT from v3.1.4022.14 Tc2_MPBus from 3.4.8.0 4.2.1.33 MP_ERROR Library error messages. TYPE MP_ERROR : ( NO_MP_ERROR := 0, WRONG_TERMINAL := 1, NO_ANSWER_FROM_KL6771 := 2, NO_LINK_TO_STRUCTURE_str Data KL6771 := 3, WRONG_MP_ADDRESS_IS_0 := 10, WRONG_MP_ADDRESS := 11, WRONG_SET_POINT := 21, MP_BUS_TIMEOUT_NO_ANSWER_FROM_SLAVE := 25, MP_BUS_SETPOINT_DIFF_TOO_HIGH := 26, KL6771_TIME_OUT := 31, MP_ADDRESS_IS_IN_USE := 32, MP_DISABLED := 33, MP_BUS_ERROR := 87, MP_NO_ANSWER_ON_EVENT := 88, MP_NO_ANSWER := 89, MP_COM_BREAK := 90, MP_LENGTH_PARITY_ERROR := 98, MP_CROSS_PARITY_ERROR := 99, MP_MASTER_CONFLICT_ERROR := 101, MP_GAP_TIMEOUT_ERROR := 102, MP_NO_ANSWER_SLAVE := 103, MP_ANSWER_ERROR_FLAG := 110, MP_ANSWER_WRONG_LEN := 111, MP_ANSWER_WRONG_TELEG := 112, MP_ANSWER_WITH_ERROR := 115, MP_ERROR_Wrong Device Family := 200, MP_CONF_ERROR_CO2Limit Good := 300, MP_CONF_ERROR_CO2Limit Moderate := 301, MP_CONF_ERROR_CO2Limit := 302 MP_CONF_ERROR_WRONG_TEMP_OFFSET := 303, MP_CONF_ERROR_WRONG_HUMIDITY_OFFSET := 304, MP_CONF_ERROR_WRONG_CO2_OFFSET := 305, MP_CONF_ERROR_WRONG_Temp Setpoint := 306, MP_CONF_ERROR_WRONG_Relative Temp Setpoint := 307, MP_CONF_ERROR_WRONG_Default Temp Setpoint := 308, MP_CONF_ERROR_WRONG_Temp Setpoint Range := 309, MP_ANSWER_Reserve := -32758, MP_ANSWER_Unknow Command := -32757, MP_ANSWER_Wrong Or No Password := -32756, MP_ANSWER_Command Execution := -32755, MP_ANSWER_Parameter Error := -32754, MP_ANSWER_Unknow Id := -32753, MP_ANSWER_Size Mismatch := -32752, TE1000 Version: 1.12.0 117
## Page 118

Programming MP_ANSWER_Illegal Block Nr := -32751, MP_ANSWER_Internal Bus Busy := -32750, MP_ANSWER_Reserved For Future := -32513 ) END_TYPE NO_MP_ERROR: No error. WRONG_TERMINAL: Wrong terminal connected. NO_ANSWER_FROM_KL6771: No answer from KL6771. This message usually means that there is no connection to the terminal. Are the I/O variables of the terminal linked? Terminal plugged in incorrectly? Everything revised, compiled and read again? NO_LINK_TO_STRUCTURE_str Data KL6771: Check link to structure Data KL6771. WRONG_MP_ADDRESS_IS_0: MP-Bus address is 0. Only addresses between 1 and 8 are allowed. WRONG_MP_ADDRESS: MP-Bus address is >8. Only addresses between 1 and 8 are allowed. WRONG_SET_POINT: Wrong setpoint. MP_BUS_TIMEOUT_NO_ANSWER_FROM_SLAVE: MP-Bus timeout, no answer from slave. MP_BUS_SETPOINT_DIFF_TOO_HIGH: Difference from setpoint too high. KL6771_TIME_OUT: KL6771 timeout. MP_ADDRESS_IS_IN_USE: MP-Bus address is in use. MP_DISABLED: MP-Bus disabled. MP_BUS_ERROR: MP-Bus error. MP_NO_ANSWER_ON_EVENT: MP-Bus no answer on event. MP_NO_ANSWER: MP-Bus no answer. MP_COM_BREAK: MP-Bus communication break. MP_LENGTH_PARITY_ERROR: MP-Bus length parity error. MP_CROSS_PARITY_ERROR: MP-Bus cross parity error. MP_MASTER_CONFLICT_ERROR: MP-Bus MASTER_CONFLICT_ERROR. MP_GAP_TIMEOUT_ERROR: MP-Bus GAP timeout. MP_NO_ANSWER_SLAVE: MP-Bus no answer from slave. MP_ANSWER_ERROR_FLAG: MP-Bus error bit in the answer telegram is set. MP_ANSWER_WRONG_LEN: MP-Bus wrong telegram length. MP_ANSWER_WRONG_TELEG: MP-Bus wrong telegram received. MP_ANSWER_WITH_ERROR: MP-Bus answer contains an error. MP_ERROR_Wrong Device Family: Wrong device family. MP_CONF_ERROR_CO2Limit Good: Configuration error for CO2 limit "Good". MP_CONF_ERROR_CO2Limit Moderate: Configuration error for CO2 limit "Moderate". MP_CONF_ERROR_CO2Limit: Configuration error for CO2 limit. MP_CONF_ERROR_WRONG_TEMP_OFFSET: Configuration error for temperature offset. MP_CONF_ERROR_WRONG_HUMIDITY_OFFSET: Configuration error for humidity offset. MP_CONF_ERROR_WRONG_CO2_OFFSET: Configuration error for CO2 offset. MP_CONF_ERROR_WRONG_Temp Setpoint: Configuration error for temperature setpoint. 118 Version: 1.12.0 TE1000
## Page 119

Programming MP_CONF_ERROR_WRONG_Relative Temp Setpoint: Configuration error for relative temperature setpoint. MP_CONF_ERROR_WRONG_Default Temp Setpoint: Configuration error for default temperature setpoint. MP_CONF_ERROR_WRONG_Temp Setpoint Range: Configuration error for temperature setpoint range. MP_ANSWER_Reserve: Reserve. MP_ANSWER_Unknow Command: Unknown command. MP_ANSWER_Wrong Or No Password: Wrong or no password. MP_ANSWER_Command Execution: Execution of the command. MP_ANSWER_Parameter Error: Parameter error. MP_ANSWER_Unknow Id: Unknown Id. MP_ANSWER_Size Mismatch: Size does not match. MP_ANSWER_Illegal Block Nr: Invalid block number. MP_ANSWER_Internal Bus Busy: Internal bus is busy. MP_ANSWER_Reserved For Future: Reserve. Requirements Development environment PLC library to include Twin CAT from v3.1.4020.14 Tc2_MPBus from 3.3.5.0 4.2.1.34 UST3_EX Voltage scaling TYPE UST3_EX : ( Ex_1m V := 0, Ex_250u V := 1 ) END_TYPE Ex_1m V: Scaling 0..11 V Ex_250u V: Scaling 0..3 V Requirements Development environment PLC library to include Twin CAT from v3.1.4020.14 Tc2_MPBus from 3.3.5.0 4.2.1.35 UST3_R_SET Resistance scaling TYPE UST3_R_SET : ( R_1Ohm := 0, R_250m Ohm := 1, R_4Ohm := 2 ) END_TYPE R_1Ohm: Scaling 0..20 k Ohm R_250m Ohm: Scaling 0..5 k Ohm R_4Ohm: Scaling 0..262 k Ohm TE1000 Version: 1.12.0 119
## Page 120

Programming Requirements Development environment PLC library to include Twin CAT from v3.1.4020.14 Tc2_MPBus from 3.3.5.0 4.2.2 Structures Data types Description Data KL6771 [} 120] Links the send and receive blocks with the function block KL6771. MP_BUS_MPX_ERROR [} 120] Error messages of the "MPX" sensors. MP_Serial_Number [} 121] Serial number of the device. ST_MP_EV_V4_2_Malfunction Ser Malfunction and service information. vice Info [} 121] ST_MP_EV_V4_Malfunction Servi Malfunction and service information. ce Info [} 122] ST_MP_JR_Malfunction Service Inf Malfunction and service information. o [} 123] ST_MP_VRU_Service Info [} 123] Malfunction and service information. ST_State EV [} 124] Information on the state of the EV. UST3_SET [} 125] Data structure for setting the scaling and the resistance measurement. 4.2.2.1 Data KL6771 Links the send and receive blocks with the function block KL6771 TYPE Data KL6771 : STRUCT Order Number : BYTE; Recive Data : BOOL; Send Data : BOOL; Error : BOOL; Error ID : MP_Error; p Number : DWORD; END_STRUCT END_TYPE Order Number: Internal byte Receive Data: Data is being received. Send Data: Data is being sent. Error: This output goes TRUE as soon as an error occurs. This error is described via the Error ID variable. Error ID: This output outputs an error code in the event of an error (see MP_Error [} 117]). Error goes TRUE at the same time. p Number: Internal pointer Requirements Development environment PLC library to include Twin CAT from v3.1.4020.14 Tc2_MPBus from 3.3.5.0 4.2.2.2 MP_BUS_MPX_ERROR Error messages of the "MPX" sensors (function block MP_MPX [} 66]). TYPE MP_BUS_MPX_ERROR : STRUCT MP_BUS_MPX_Temp Sensor Err : BOOL; 120 Version: 1.12.0 TE1000
## Page 121

Programming MP_BUS_MPX_Humidity Sensor Err : BOOL; MP_BUS_MPX_CO2Sensor Err : BOOL; MP_BUS_MPX_Voc Sensor Err : BOOL; END_STRUCT END_TYPE MP_BUS_MPX_Temp Sensor Err: The temperature sensor is faulty MP_BUS_MPX_Humidity Sensor Err: The humidity sensor is faulty MP_BUS_MPX_CO2Sensor Err: The CO2 sensor is faulty MP_BUS_MPX_Voc Sensor Err: The VOC sensor is faulty Requirements Development environment PLC library to include Twin CAT from v3.1.4020.14 Tc2_MPBus from 3.3.5.0 4.2.2.3 MP_Serial_Number Serial number of the device TYPE MP_Serial_Number : STRUCT Year And Week : WORD; Day And Number : WORD; Device Family : BYTE; Test Station : BYTE; Family Suffix : BYTE; END_STRUCT END_TYPE Year And Week: Year and week Day And Number: Day and number Device Family: Device family Test Station: Test station Family Suffix: Device family suffix Requirements Development environment PLC library to include Twin CAT from v3.1.4020.14 Tc2_MPBus from 3.3.5.0 4.2.2.4 ST_MP_EV_V4_2_Malfunction Service Info Malfunction and service information. TYPE ST_MP_EV_V4_2_Malfunction Service Info : STRUCT b No Communication To Actuator : BOOL; b Gear Disengaged : BOOL; b Actuator Cannot Move : BOOL; b Reverse Flow : BOOL; b Flow Setpoint Not Reached : BOOL; b Flow With Closed Valve : BOOL; b Actual Exccds Flow Nominal : BOOL; b Flow Measurement Error : BOOL; b Remote Temp Error : BOOL; b Flowbody Temp Error : BOOL; b Comm To Sensor Interrupted : BOOL; b Freeze Warning : BOOL; b Glycol Detected : BOOL; b Power Setpoint Not Reached : BOOL; b Device End Of Live Reached : BOOL; b Bus Watchdog Triggered : BOOL; b No Differential Pressure Detected : BOOL; TE1000 Version: 1.12.0 121
## Page 122

Programming b Differential Pressure Setpoint Not Reached : BOOL; b Minimum Position Applied : BOOL; END_STRUCT END_TYPE b No Communication To Actuator: No communication to the actuator. b Gear Disengaged: Gear disengaged. b Actuator Cannot Move: Actuator cannot move. b Reverse Flow: Reverse flow. b Flow Setpoint Not Reached: Setpoint for flow not reached. b Flow With Closed Valve: Flow with closed valve. b Actual Exccds Flow Nominal: Exceeds nominal flow rate. b Flow Measurement Error: Error during flow measurement. b Remote Temp Error: Remote temperature error. b Flowbody Temp Error: Error in the temperature of the flow body. b Comm To Sensor Interrupted: Communication to the sensor is interrupted. b Freeze Warning: Freeze warning. b Glycol Detected: Glycol detected. b Power Setpoint Not Reached: Setpoint for power not reached. b Device End Of Live Reached: Device has reached the end of its life cycle. b Bus Watchdog Triggered: Watchdog from the bus has triggered. b No Differential Pressure Detected: No differential pressure detected. b Differential Pressure Setpoint Not Reached: Setpoint for differential pressure not reached. b Minimum Position Applied: Minimum position applied. Prerequisites Development Environment PLC library to include Twin CAT from v3.1.4024.66 Tc2_MPBus from 3.7.1.0 4.2.2.5 ST_MP_EV_V4_Malfunction Service Info Malfunction and service information. TYPE ST_MP_EV_V4_Malfunction Service Info : STRUCT b No Communication To Actuator : BOOL; b Gear Disengaged : BOOL; b Actuator Cannot Move : BOOL; b Reverse Flow : BOOL; b Flow Setpoint Not Reached : BOOL; b Flow With Closed Valve : BOOL; b Actual Flow Vnom : BOOL; b Flow Measurement Error : BOOL; b Remote Temp Error : BOOL; b Integrated Temp Error : BOOL; b Comm To Sensor Interrupted : BOOL; b Freeze Warning : BOOL; b Glycol Detected : BOOL; b Power Setpoint Not Reached : BOOL; b Bus Watchdog Triggered : BOOL; END_STRUCT END_TYPE 122 Version: 1.12.0 TE1000
## Page 123

Programming b No Communication To Actuator: No communication to the actuator. b Gear Disengaged: Gear disengaged. b Actuator Cannot Move: Actuator cannot move. b Reverse Flow: Reverse flow. b Flow Setpoint Not Reached: Setpoint for flow not reached. b Flow With Closed Valve: Flow with closed valve. b Actual Flow Vnom: Actual flow > nominal flow. b Flow Measurement Error: Error during flow measurement. b Remote Temp Error: Remote temperature error. b Integrated Temp Error: Integrated temperature error. b Comm To Sensor Interrupted: Communication to the sensor is interrupted. b Freeze Warning: Freeze warning. b Glycol Detected: Glycol detected. b Power Setpoint Not Reached: Power setpoint not reached. b Bus Watchdog Triggered: Watchdog from the bus has triggered. Requirements Development environment PLC library to include Twin CAT from v3.1.4024.26 Tc2_MPBus from 3.4.14.0 4.2.2.6 ST_MP_JR_Malfunction Service Info Malfunction and service information. TYPE ST_MP_JR_Malfunction Service Info : STRUCT b Power Fail : BOOL; b Gear Train Disengaged : BOOL; b Actuator Cannot Move : BOOL; b Watchdog Triggered : BOOL; END_STRUCT END_TYPE b Power Fail: Power failure. b Gear Train Disengaged: Gear disengaged. b Actuator Cannot Move: Actuator cannot move. b Watchdog Triggered: Watchdog triggered. Prerequisites Development Environment PLC library to include Twin CAT from v3.1.4024.66 Tc2_MPBus from 3.7.1.0 4.2.2.7 ST_MP_VRU_Service Info Malfunction and service information. TYPE ST_MP_VRU_Service Info : STRUCT b Error_d P_Sensor : BOOL; b Reverse Airflow Detected : BOOL; TE1000 Version: 1.12.0 123
## Page 124

Programming b Airflow Not Reached : BOOL; b Flow In Closed Position : BOOL; b Internal Activity : BOOL; b Gear Disengaged : BOOL; b Bus Watchdog Triggered : BOOL; b Actuator Dose Not Fit To Application : BOOL; b Press Sensor Wrong Connected : BOOL; b Pressure Sensor Not Reached : BOOL; b Error_d P_Sensor Out Of Range : BOOL; END_STRUCT END_TYPE b Error_d P_Sensor: Error dp sensor. b Reverse Airflow Detected: Reverse airflow detected. b Airflow Not Reached: Airflow not reached. b Flow In Closed Position: Flow in closed position. b Internal Activity: Internal activity. b Gear Disengaged: Gear disengaged. b Bus Watchdog Triggered: Bus watchdog triggered. b Actuator Dose Not Fit To Application: Actuator does not fit the application. b Press Sensor Wrong Connected: Pressure sensor connected incorrectly. b Pressure Sensor Not Reached: Pressure sensor not reached. b Error_d P_Sensor Out Of Range: d P sensor out of range. Requirements Development environment PLC library to include Twin CAT from v3.1.4024.22 Tc2_MPBus from 3.4.13.0 4.2.2.8 ST_State EV Information on the state of the EV. TYPE ST_State EV : STRUCT b Flow_with_closed_valve : BOOL; b Air_bubbles : BOOL; b Flow_not_reached : BOOL; b Power_not_realized : BOOL; b Gear_disengaged : BOOL; END_STRUCT END_TYPE b Flow_with_closed_valve: Flow rate when the valve is closed. Check valve. b Air_bubbles: Too many air bubbles (system venting inadequate). Flow measurement no longer exact. EV switches from volume flow control to position control. b Flow_not_reached: Flow rate not reached, despite the fact that the ball valve is fully open. Check hydraulics, switch on pump or increase pump pressure. b Power_not_realized: Power not achieved. In addition to position control and volume flow control, the EV can be used to supply power. Primary side provides too little flow or d T. b Gear_disengaged: Gear disengagement active. Manual adjustment possible on site. For other MP drives this information can be read with MP_Get_State. 124 Version: 1.12.0 TE1000
## Page 125

Programming Requirements Development environment PLC library to include Twin CAT from v3.1.4020.32 Tc2_MPBus from 3.4.6.0 4.2.2.9 UST3_SET Data structure for setting the scaling and the resistance measurement TYPE UST3_SET : STRUCT E1 : UST3_Ex; E2 : UST3_Ex; E3 : UST3_Ex; R_SET : UST3_R_set; R_ON_OFF : BOOL; END_STRUCT END_TYPE E1: parameter U1 (see UST3_Ex [} 119]) E2: parameter U2 (see UST3_Ex [} 119]) E3: parameter U3 (see UST3_Ex [} 119]) R_SET: parameter Y (see UST3_R_set [} 119]) R_ON_OFF: Measurement R or U Requirements Development environment PLC library to include Twin CAT from v3.1.4020.14 Tc2_MPBus from 3.3.5.0 4.3 Integration into Twin CAT 4.3.1 KL6771 with CX5120 This sample describes how to write a simple PLC program for MP-Bus in Twin CAT and how to link it with the hardware. The task is to control an individual damper drive and change it with a button. Sample: https://infosys.beckhoff.com/content/1033/tcplclib_tc2_mpbus/Resources/6222419595.zip The Twin CAT project is available for download as *.zip file. This must first be unpacked locally so that the archive (*.tnzip file) is available for import into the Twin CAT project. Hardware Setting up the components The following hardware is required: • 1x CX5120 Embedded PC • 1x digital 4-channel input terminal KL1104 (for the Open and Close functions) • 1x KL6771 MP-Bus master terminal • 1x KL9010 end terminal Set up the hardware and the MP-Bus components as described in the associated documentation. This sample assumes that the address of the damper drive is known. TE1000 Version: 1.12.0 125
## Page 126

Programming Software Creation of the PLC program Create a new "Twin CAT XAE project" and a "Standard PLC project". Add the library Tc2_MPBus under "References" in the PLC project. Generate a Global Variable List with the name GVL_MPBus and create the following variables: VAR_GLOBAL b Open AT %I* : BOOL; b Close AT %I* : BOOL; arr KL6771_IN AT %I* : ARRAY [0..11] OF BYTE; arr KL6771_OUT AT %Q* : ARRAY [0..11] OF BYTE; st Data KL6771 : Data KL6771; END_VAR b Open: Input variable for the Open button. b Close: Input variable for the Close button. arr KL6771_IN: Input variable for the MP-Bus terminal. arr KL6771_OUT: Output variable for the MP-Bus terminal. st Data Kl6771: Required for communication with MP-Bus (see Data KL6771 [} 120]). All MP-Bus function blocks must be called in the same task. Therefore, create a MAIN program (CFC) in which the KL6771 [} 26] and MP_Damper Linear Actuator [} 31] function blocks are called. Make sure to link arr KL6771_IN, arr KL6771_OUT and st Data KL6771 in the communication block. The input Set Point is set depending on the selected function. Link the global variables b Open and b Close with an auxiliary variable. Go to the task configuration and give the task a lower interval time. Further conditions can be found in the description of the function block KL6771 [} 26]. 126 Version: 1.12.0 TE1000
## Page 127

Programming I/O configuration Select the CX as target system and initiate a search for its hardware. In the project instance within the PLC section, you can see that the input and output variables are assigned to the task. Now link the global variables with the inputs and outputs of the Bus Terminals. The linking of MP-Bus variables is described in detail below. Right-click the array arr KL6771_IN and select "Change Link". Under "I/O Configuration" select the terminal, select "All Types" and "Continuous", then select "Parameter Status", "Input Data1" to "Input Data10" with the left mouse button and the >SHIFT< key. Then click "OK". TE1000 Version: 1.12.0 127
## Page 128

Programming You can now check the connection. To do this, go to the KL6771 and open it. All terminal data should now show a small arrow. If that is the case, then proceed in exactly the same way with the outputs. 128 Version: 1.12.0 TE1000
## Page 129

Appendix 5 Appendix 5.1 Support and Service Beckhoff and their partners around the world offer comprehensive support and service, making available fast and competent assistance with all questions related to Beckhoff products and system solutions. Download finder Our download finder contains all the files that we offer you for downloading. You will find application reports, technical documentation, technical drawings, configuration files and much more. The downloads are available in various formats. Beckhoff's branch offices and representatives Please contact your Beckhoff branch office or representative for local support and service on Beckhoff products! The addresses of Beckhoff's branch offices and representatives round the world can be found on our internet page: www.beckhoff.com You will also find further documentation for Beckhoff components there. Beckhoff Support Support offers you comprehensive technical assistance, helping you not only with the application of individual Beckhoff products, but also with other, wide-ranging services: • support • design, programming and commissioning of complex automation systems • and extensive training program for Beckhoff system components Hotline: +49 5246 963-157 e-mail: support@beckhoff.com Beckhoff Service The Beckhoff Service Center supports you in all matters of after-sales service: • on-site service • repair service • spare parts service • hotline service Hotline: +49 5246 963-460 e-mail: service@beckhoff.com Beckhoff Headquarters Beckhoff Automation Gmb H & Co. KG Huelshorstweg 20 33415 Verl Germany Phone: +49 5246 963-0 e-mail: info@beckhoff.com web: www.beckhoff.com TE1000 Version: 1.12.0 129
## Page 130

Trademark statements Beckhoff®, Twin CAT®, Twin CAT/BSD®, TC/BSD®, Ether CAT®, Ether CAT G®, Ether CAT G10®, Ether CAT P®, Safety over Ether CAT®, Twin SAFE®, XFC®, XTS® and XPlanar® are registered trademarks of and licensed by Beckhoff Automation Gmb H.
## Page 131

More Information: www.beckhoff.com/te1000 Beckhoff Automation Gmb H & Co. KG Hülshorstweg 20 33415 Verl Germany Phone: +49 5246 9630 info@beckhoff.com www.beckhoff.com
