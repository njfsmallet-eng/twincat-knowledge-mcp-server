---
title: "TF5200_axis_coupling_hli_en"
product: "TF5200"
category: "Motion_Control"
tags: ["NC"]
language: "EN"
document_type: "Manual"
version: "1.03"
source_pdf: "https://download.beckhoff.com/download/Document/automation/twincat3/TF5200_axis_coupling_hli_en.pdf"
release_date: "2025-06-06"
---
Functional description | EN TF5200 | Twin CAT 3 CNC Axis coupling via HLI 6/6/2025 | Version: 1.03
## Page 3

Notes on the documentation Notes on the documentation This description is only intended for the use of trained specialists in control and automation engineering who are familiar with the applicable national standards. It is essential that the documentation and the following notes and explanations are followed when installing and commissioning the components. It is the duty of the technical personnel to use the documentation published at the respective time of each installation and commissioning. The responsible staff must ensure that the application or use of the products described satisfy all the requirements for safety, including all the relevant laws, regulations, guidelines and standards. Disclaimer The documentation has been prepared with care. The products described are, however, constantly under development. We reserve the right to revise and change the documentation at any time and without prior announcement. No claims for the modification of products that have already been supplied may be made on the basis of the data, diagrams and descriptions in this documentation. Trademarks Beckhoff®, Twin CAT®, Twin CAT/BSD®, TC/BSD®, Ether CAT®, Ether CAT G®, Ether CAT G10®, Ether CAT P®, Safety over Ether CAT®, Twin SAFE®, XFC®, XTS® and XPlanar® are registered trademarks of and licensed by Beckhoff Automation Gmb H. Other designations used in this publication may be trademarks whose use by third parties for their own purposes could violate the rights of the owners. Patent Pending The Ether CAT technology is patent protected, in particular by the following applications and patents: EP1590927, EP1789857, EP1456722, EP2137893, DE102015105702 with corresponding applications or registrations in various other countries. Ether CAT® is registered trademark and patented technology, licensed by Beckhoff Automation Gmb H, Germany Copyright © Beckhoff Automation Gmb H & Co. KG, Germany. The reproduction, distribution and utilisation of this document as well as the communication of its contents to others without express authorisation are prohibited. Offenders will be held liable for the payment of damages. All rights reserved in the event of the grant of a patent, utility model or design. TF5200 | Twin CAT 3 CNC Version: 1.03 3 Axis coupling via HLI
## Page 4

General and safety instructions General and safety instructions Icons used and their meanings This documentation uses the following icons next to the safety instruction and the associated text. Please read the (safety) instructions carefully and comply with them at all times. Icons in explanatory text 1. Indicates an action. ð Indicates an action statement. DANGER Acute danger to life! If you fail to comply with the safety instruction next to this icon, there is immediate danger to human life and health. CAUTION Personal injury and damage to machines! If you fail to comply with the safety instruction next to this icon, it may result in personal injury or damage to machines. NOTICE Restriction or error This icon describes restrictions or warns of errors. Tips and other notes This icon indicates information to assist in general understanding or to provide additional informa- tion. General example Example that clarifies the text. NC programming example Programming example (complete NC program or program sequence) of the described function or NC com- mand. Specific version information Optional or restricted function. The availability of this function depends on the configuration and the scope of the version. 4 Version: 1.03 TF5200 | Twin CAT 3 CNC Axis coupling via HLI
## Page 5

Table of contents Table of contents Notes on the documentation.................................................................................................................... 3 General and safety instructions.............................................................................................................. 4 1 Overview.................................................................................................................................................... 8 2 Description................................................................................................................................................ 9 3 Examples................................................................................................................................................. 15 4 Parameter................................................................................................................................................. 17 4.1 Overview......................................................................................................................................... 17 4.2 Description...................................................................................................................................... 17 5 Support and Service............................................................................................................................... 20 Index......................................................................................................................................................... 21 TF5200 | Twin CAT 3 CNC Version: 5 Axis coupling via HLI
## Page 6

Table of contents 6 Version: TF5200 | Twin CAT 3 CNC Axis coupling via HLI
## Page 7

List of figures List of figures Fig. 1 View of the difference between source and target axis................................................................ 9 Fig. 2 Schematic of coupling specification............................................................................................. 10 TF5200 | Twin CAT 3 CNC Version: 1.03 7 Axis coupling via HLI
## Page 8

Overview 1 Overview This description of functions is valid as of CNC Build V2.2800. Task Axis couplings are used to couple the movement of an axis to the movements of one or several other axis/ axes. Coupling is relative to the position of the axis when the coupling is activated. The dynamic limits of the target axis are not monitored. Properties The axis couplings are active after the functionality has been activated via the HLI interface. Parametrisation The coupling specifications are defined exclusively via the HLI interface. See the section Parameters [} 17]. Mandatory note on references to other documents For the sake of clarity, links to other documents and parameters are abbreviated, e.g. [PROG] for the Programming Manual or P-AXIS-00001 for an axis parameter. For technical reasons, these links only function in the Online Help (HTML5, CHM) but not in pdf files since pdfs do not support cross-linking. 8 Version: 1.03 TF5200 | Twin CAT 3 CNC Axis coupling via HLI
## Page 9

Description 2 Description Definitions The definition of how movement of an axis influences another axis is referred to as a coupling specification. Below, the axis whose position is influenced by other axes on the basis of the coupling specification is referred to as the target axis. Axes that influence other axes via coupling specifications are referred to as source axes. IPO-axis n physical axis + (source axis) ±m (targetaxis) IPO-axis n (source axis) ±m IPO-axis n (source axis) ±m IPO-axis n (source axis) ±m Fig. 1: View of the difference between source and target axis In this example several source axes act on a physical target axis. The interpolator axis that normally moves the target axis need not necessarily belong to the source axes. A change in axis coupling must take place when all the axes involved are at stand- still. If this is not the case, the axis is stopped with error message ID 70200. Standstill of all axes involved means that axis velocity must be 0. This affects both the target axis and all coupled source axes. If a coupled axis is also programmed in the NC program, the target axis must be coupled to itself as source axis. The coupling specification stipulates: source axis = target axis with coupling factor 1 As an alternative to axis coupling via the HLI, the coupling can also be parameterised and enabled using the NC command #GEAR LINK in the NC program. Behaviour with command value request Corresponding to the coupling instructions on drive level, an active gear coupling leads to an offset of the axis positions to the programmed command positions in NC channel. The axis positions and program coordinates are newly initialised at restart of program or by an explicitly programmed position request (#CHANNEL INIT [CMDPOS]). The ACS position (position on drive plane) is returned by default. TF5200 | Twin CAT 3 CNC Version: 1.03 9 Axis coupling via HLI
## Page 10

Description If the command value of the target axis is requested directly after activating an axis coupling, the returned value corresponds to the mechanical axis position. The axis parameter P-AXIS-00436 defines the setting that the input coordinates of the gear coupling are recalculated by forward mapping when a command value request occurs. If forward mapping of drive positions is activated with parameter P-AXIS-00436 the mapping is calculated by default relative to the activation position of the axis coupling.. The parameter P-AXIS-00460 can define the setting that the axis positions are regarded as absolute coordinates when a command value request occurs. In other words, it is assumed that the axis coupling is activated both for the master and for the slave axis at axis position 0. Restrictions when using P-AXIS-00436 If the axis parameter P-AXIS-00436 is set, the target axis may not be coupled to itself as source axis either directly or indirectly. When the coupling is activated, a check is made for coupling loops such as these. If one is discovered, the error message ID 70410 is output and the coupling is not executed. When the parameters P-AXIS-00436 and P-AXIS-00460 are used, the channel must always be initialised. Schematic of a coupling IPO axis 1 phys. axis 1 + (source axis) (target axis) IPO position ACS position IPO axis 2 phys. axis 2 + (source axis) (target axis) IPO position ACS position Fig. 2: Schematic of coupling specification To calculate the IPO position of axis 2, the IPO position of axis 1 must already be known. The deadlock cannot be resolved and results in the output of error message ID 70410. General The coupling specifications of a target axis are defined via an axis-specific control unit of the HLI. In this control unit of the target axis, the coupling specifications are defined by specifying the logical axis number of the source axis and the coupling mode. If coupling mode HLI_AXIS_COUPLING_FRACT is used, the coupling factor must also be specified as a fraction. Several coupling specifications can be commanded. They are defined as an array in the commanded value of of the control unit. The indices of the array elements are within the interval [0 -HLI_AX_COUPLING_MAXIDX] The entered coupling specifications are activated by setting an HLI signal. After evaluating the coupling specifications and checking for errors, the NC kernel resets the trigger signal. 10 Version: 1.03 TF5200 | Twin CAT 3 CNC Axis coupling via HLI
## Page 11

Description Activation Mit axis_idx = [0.. HLI_SYS_AX_MAXIDX] coupl_idx = [0.. HLI_AX_COUPLING_MAXIDX] Axis-specific control unit of HLI: gp Ax[axis_idx]^.lr_mc_control.axis_coupling Defining the logical axis number of the source axis: gp Ax[axis_idx]^.lr_mc_control.axis_coupling.command_w.desc[coupl_idx].ax_nr Defining the coupling mode for this source axis: gp Ax[axis_idx]^.lr_mc_control.axis_coupling.command_w.desc[coupl_idx].mode Definition of coupling factor: gp Ax[axis_idx]^.lr_mc_control.axis_coupling.command_w.desc[coupl_idx].fract_num gp Ax[axis_idx]^.lr_mc_control.axis_coupling.command_w.desc[coupl_idx].fract_denom Activating trigger signal gp Ax[axis_idx]^.lr_mc_control.axis_coupling.command_w.semaphor_rw := TRUE TF5200 | Twin CAT 3 CNC Version: 1.03 11 Axis coupling via HLI
## Page 12

Description Programming of target axis When axis couplings are used, all source axes acting on a target axis must be specified. If a target axis is also to be programmed in an NC program, a coupling specification must be defined for the logical axis number of the target axis on the HLI. For the programmed axis a coupling specification must be defined between its own source axis and its own target axis. (See example 2 [} 15]) Coupling modes The following coupling modes can be specified for a coupling specification: Coupling identifier Value Meaning HLI_AXIS_COUPLING_INACTIVE 0 The coupling specification is not active. All the following coupling specifications are also inactive. If the 1st coupling specification is defined as inactive, all coupling specifications are deactivated. HLI_AXIS_COUPLING_ZERO 1 Coupling factor 0 This mode can be used to shut down an axis. A shut-down axis can nevertheless be used as a source axis for other axes. HLI_AXIS_COUPLING_DIRECT 2 The coupling factor between the source and target axis is 1. HLI_AXIS_COUPLING_MIRROR 3 The coupling factor between the source and target axis is -1. HLI_AXIS_COUPLING_FRACT 4 The coupling factor [} 9] K is a fraction and is defined by a nominator and a denominator. Coupling factor The coupling factor K is defined as Defining the coupling factor: Nominator: desc[coupl_idx [} 11]].fract_num Denominator: desc[coupl_idx [} 11]].fract_denom the permissible value range for the coupling factor nominator is: [-32768 ... 32767]. A value of 0 has the same effect as using coupling mode HLI_AXIS_COUPLING_ZERO. The permissible value range for the coupling factor denominator is [-32768 to 32767] excluding 0. A value of 0 causes the output of error message P-ERR-70396. The absolute value of the coupling factor is limited to the value of HLI_AXIS_COUPLING_FACT_MAX. If the configured value for the coupling factor is greater than this value, the error message P-ERR-70397 is output. 12 Version: 1.03 TF5200 | Twin CAT 3 CNC Axis coupling via HLI
## Page 13

Description Software limit switches When the coupling mode HLI_AXIS_COUPLING_FRACT is used, the target axis command position resulting from the active couplings is monitored to the configured software limit switches (P-AXIS-00177/P- AXIS-00178) provided the axis is referenced. Here, a check is made whether the axis can be stopped from the current velocity using the emergency stop deceleration (P-AXIS-00003) in front of the configured software limit switches. If the software limit switch is exceeded, the error message P-ERR-70195 is output and the axis is stopped. Deactivation The axis couplings of an axis can be deactivated by setting the coupling mode of the first coupling entry in HLI_AXIS_COUPLING_INACTIVE. Deactivating a coupling with several couplings on an axis Coupling no. Source axis Target axis Coupling mode Coupling active 1 X2 X2 2 yes 2 X X2 2 yes 3 Y X2 0 No 4 Z X2 2 No In the example the third coupling is deactivated. The consequence is that all subsequent couplings are deactivated. Status display In the control unit the status of the axis with regard to axis couplings is indicated in the gp Ax[axis_idx [} 11]]^.lr_mc_control.axis_coupling.state_r structure. The active_r structure element indicates whether an axis coupling is active for the axis. If a coupling is active, the element has the value TRUE. When axis coupling is active, the couplings defined for this axis are indicated in the desc[] field. An element of the desc[] field represents a coupling specification and consists of the following subelements. • ax_nr: logical axis number of the source axis • mode: the coupling mode defined for the source axis TF5200 | Twin CAT 3 CNC Version: 1.03 13 Axis coupling via HLI
## Page 14

Description Changing the axis coupling Since it is only permitted to change an axis coupling if the target axis and all coupled source axes are at standstill, the PLC must first verify this when the coupling is changed. In this case, for example, the current command velocity [10-3 mm/s or 10-3 degree/s] of the axis can be checked before the coupling is activated. gp Ax[axis_idx [} 11]]^.lr_state.active_rev_r 14 Version: 1.03 TF5200 | Twin CAT 3 CNC Axis coupling via HLI
## Page 15

Examples 3 Examples Precondition for all examples below: Coupling specifications are to be defined for the axis with logical axis number 8 and axis designator Y2: Example 1: Axis Y2 cannot be moved by the NC program. desc[0].ax_nr:= 1 desc[0].mode:= HLI_AXIS_COUPLING_DIRECT desc[1].ax_nr:= 0 desc[1].mode:= HLI_AXIS_COUPLING_INACTIVE The axis moves in synchronicity with the axis with logical axis number 1. Since no coupling specification is defined for logical axis number 8, axis Y2 cannot be moved by the NC program. Since coupling mode HLI_AXIS_COUPLING_FRACT is not used, the elements fract_num and fract_denom need not be defined in the coupling specification desc[0] . The coupling specification desc[1] indicates the end of the list of coupling specifications. Example 2: Axis Y2 is moved by the NC program. desc[0].ax_nr:= 1 desc[0].mode:= HLI_AXIS_COUPLING_DIRECT desc[1].ax_nr:= 8 desc[1].mode:= HLI_AXIS_COUPLING_DIRECT desc[2].ax_nr:= 0 desc[2].mode:= HLI_AXIS_COUPLING_INACTIVE The axis Y2 can now also be moved by the NC program when the coupling specification desc[1] is added. Since coupling mode HLI_AXIS_COUPLING_FRACT is not used here, the elements fract_num and fract_denom need not be defined in the coupling specifications desc[0] and desc[1]. The coupling specification desc[2] indicates the end of the list of coupling specifications. TF5200 | Twin CAT 3 CNC Version: 1.03 15 Axis coupling via HLI
## Page 16

Examples Example 3: Axis Y2 with coupling factor A coupling specification with coupling factor –5/9 is to be defined for the axis with logical axis number 8 and axis designator Y2. Axis Y2 is also to be programmable in the NC program: desc[0].ax_nr:= 8 desc[0].mode:= HLI_AXIS_COUPLING_DIRECT desc[1].ax_nr:= 1 desc[1].mode:= HLI_AXIS_COUPLING_FRACT desc[1].fract_num:= -5 desc[1].fract_denom:= 9 desc[2].ax_nr:= 0 desc[2].mode:= HLI_AXIS_COUPLING_INACTIVE Since coupling mode HLI_AXIS_COUPLING_FRACT is not used, the elements fract_num and fract_denom need not be defined in the coupling specification desc[0] . The coupling specification desc[2] indicates the end of the list of coupling specifications. 16 Version: 1.03 TF5200 | Twin CAT 3 CNC Axis coupling via HLI
## Page 17

Parameter 4 Parameter 4.1 Overview ID Parameter Description P-AXIS-00003 getriebe[i].dynamik.a_e Deceleration for an emergency stop mergency P-AXIS-00177 kenngr.swe_neg Negative software limit switch P-AXIS-00178 kenngr.swe_pos Positive software limit switch P-AXIS-00436 kenngr.recalc_link_mai Forward mapping of drive position n_input_position P-AXIS-00460 kenngr.recalc_input_po Forward mapping of drive position with absolute coordinates sition_absolute 4.2 Description P-AXIS-00003 Deceleration for an emergency stop Description The parameter defines the used deceleration for an emergency stop. If errors of error reaction class 4 occur, the NC decelerates at the rate for specific axes. The path then leaves the trajectory. Parameter getriebe[i].dynamik.a_emergency Data type UNS32 Data range 1 ≤ a_emergency ≤ 2*P-AXIS-00008 Axis types T, R, S Dimension T: mm/s² R,S: °/s² Default value 0 drive types. ---- Remarks When the parameter has the value 0, the value of P-AXIS-00008 (a_max) is used. P-AXIS-00177 Negative software limit switch Description The parameter defines the possible traverse range in the negative direction (negative software limit switch position). The programmed command positions are always checked on 'kenngr.swe_neg', the actual positions on 'kenngr.swe_neg - kenngr.swe_toleranz'. Parameter kenngr.swe_neg Data type SGN32 Data range MIN(SGN32) < swe_neg < P-AXIS-00178 Axis types T, R Dimension T: 0.1µm R: 0.0001 ° Default value -100000000 drive types. ---- Remarks The value of the parameter is adopted on reset, mode change and axis replacement from the axis record. P-AXIS-00178 Positive software limit switch Description The parameter defines the possible traverse range in the positive direction (positive software limit switch position). The programmed command positions are always checked on 'kenngr.swe_pos', the actual positions on 'kenngr.swe_pos + kenngr.swe_toleranz'. Parameter kenngr.swe_pos Data type SGN32 Data range P-AXIS-00177 < swe_pos < MAX(SGN32) TF5200 | Twin CAT 3 CNC Version: 1.03 17 Axis coupling via HLI
## Page 18

Parameter Axis types T, R Dimension T: 0.1µm R,S: 0.0001 ° Default value 100000000 drive types. ---- Remarks The value of the parameter is adopted on reset, mode change and axis replacement from the axis record. P-AXIS-00436 Forward mapping of drive position Description Corresponding to the coupling instructions at drive level, an active gear coupling leads to an offset of the axis positions compared to the programmed command positions in NC channel. The gear coupling can be activated either by configuration in the axis parameters (see multi_link[i]) or via the HLI interface of the axis (see [FCT-A9 [} 8]]). In the event of a program restart or an explicitly programmed request of axis positions (#CHANNEL INIT [CMDPOS]), the axis positions and the channel program coordinates are re-initialised. The parameter must be set to 1 if the input coordinates of the gear coupling (e.g. absolute program coordinates) are to be recalculated by forward mapping. See also P-AXIS-00460. Parameter kenngr.recalc_link_main_input_position Data type BOOLEAN Data range 0: No forward mapping of drive position (default). 1: Forward mapping is executed. Axis types T, R Dimension T: ---- R: ---- Default value 0 Drive types ---- Remarks Configuration example: Forward mapping is active during gear coupling kenngr.multi_link[0].lead_axis 4 kenngr.multi_link[0].factor_numerator 1 kenngr.multi_link[0].factor_denominator 2 kenngr.recalc_link_main_input_position 1 Configuration example: Forward mapping with active gear coupling via the HLI kenngr.recalc_link_main_input_position 1 P-AXIS-00460 Forward mapping of drive position with absolute coordinates Description If forward mapping of drive positions is activated with parameter P-AXIS-00436 , the mapping is calculated by default relative to the activation position of the axis coupling.. This means that if immediately after the activation of an axis coupling the command positions are requested, the command position according to the mechanical axis position is returned. With parameter P-AXIS-00460 the axis positions are considered as absolute coordinates. This means the mapping is calculated as if the axes were coupled at position 0 for the master as well as for the slave axes. Example: At position X=40 mm and X1=50 mm the X1 axis is coupled each with a coupling factor of 1:1 to the X-axis and to itself. When P-AXIS-00460 is not set, the returned position for axis X1 is X1 = 50 mm on receipt of a command position request directly after activation of a coupling When P-AXIS-00460 is set, the returned axis position for the X1 axis is X1 = 10 mm. Parameter kenngr.recalc_input_position_absolute Data type BOOLEAN 18 Version: 1.03 TF5200 | Twin CAT 3 CNC Axis coupling via HLI
## Page 19

Parameter Data range 0: Forward mapping relative to activation position (default). 1: Forward mapping with absolute positions. Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0 Drive types ---- Remarks This parameter is only effective for axis couplings that are activated via the HLI. This parameter is only practical for use with axes that deliver an absolute position. TF5200 | Twin CAT 3 CNC Version: 1.03 19 Axis coupling via HLI
## Page 20

Support and Service 5 Support and Service Beckhoff and their partners around the world offer comprehensive support and service, making available fast and competent assistance with all questions related to Beckhoff products and system solutions. Download finder Our download finder contains all the files that we offer you for downloading. You will find application reports, technical documentation, technical drawings, configuration files and much more. The downloads are available in various formats. Beckhoff's branch offices and representatives Please contact your Beckhoff branch office or representative for local support and service on Beckhoff products! The addresses of Beckhoff's branch offices and representatives round the world can be found on our internet page: www.beckhoff.com You will also find further documentation for Beckhoff components there. Beckhoff Support Support offers you comprehensive technical assistance, helping you not only with the application of individual Beckhoff products, but also with other, wide-ranging services: • support • design, programming and commissioning of complex automation systems • and extensive training program for Beckhoff system components Hotline: +49 5246 963-157 e-mail: support@beckhoff.com Beckhoff Service The Beckhoff Service Center supports you in all matters of after-sales service: • on-site service • repair service • spare parts service • hotline service Hotline: +49 5246 963-460 e-mail: service@beckhoff.com Beckhoff Headquarters Beckhoff Automation Gmb H & Co. KG Huelshorstweg 20 33415 Verl Germany Phone: +49 5246 963-0 e-mail: info@beckhoff.com web: www.beckhoff.com 20 Version: 1.03 TF5200 | Twin CAT 3 CNC Axis coupling via HLI
## Page 21

Index Index P P-AXIS-00003 17 P-AXIS-00177 17 P-AXIS-00178 17 P-AXIS-00436 18 P-AXIS-00460 18 TF5200 | Twin CAT 3 CNC Version: 1.03 21 Axis coupling via HLI
## Page 23

More Information: www.beckhoff.com/TF5200 Beckhoff Automation Gmb H & Co. KG Hülshorstweg 20 33415 Verl Germany Phone: +49 5246 9630 info@beckhoff.com www.beckhoff.com
