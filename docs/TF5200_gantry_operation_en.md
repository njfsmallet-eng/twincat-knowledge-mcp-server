---
title: "TF5200_gantry_operation_en"
product: "TF5200"
category: "Motion_Control"
tags: ["NC"]
language: "EN"
document_type: "Manual"
version: "1.051"
source_pdf: "https://download.beckhoff.com/download/Document/automation/twincat3/TF5200_gantry_operation_en.pdf"
release_date: "2025-06-10"
---
Functional description | EN TF5200 | Twin CAT 3 CNC Gantry operation 6/10/2025 | Version: 1.051
## Page 3

Notes on the documentation Notes on the documentation This description is only intended for the use of trained specialists in control and automation engineering who are familiar with the applicable national standards. It is essential that the documentation and the following notes and explanations are followed when installing and commissioning the components. It is the duty of the technical personnel to use the documentation published at the respective time of each installation and commissioning. The responsible staff must ensure that the application or use of the products described satisfy all the requirements for safety, including all the relevant laws, regulations, guidelines and standards. Disclaimer The documentation has been prepared with care. The products described are, however, constantly under development. We reserve the right to revise and change the documentation at any time and without prior announcement. No claims for the modification of products that have already been supplied may be made on the basis of the data, diagrams and descriptions in this documentation. Trademarks Beckhoff®, Twin CAT®, Twin CAT/BSD®, TC/BSD®, Ether CAT®, Ether CAT G®, Ether CAT G10®, Ether CAT P®, Safety over Ether CAT®, Twin SAFE®, XFC®, XTS® and XPlanar® are registered trademarks of and licensed by Beckhoff Automation Gmb H. Other designations used in this publication may be trademarks whose use by third parties for their own purposes could violate the rights of the owners. Patent Pending The Ether CAT technology is patent protected, in particular by the following applications and patents: EP1590927, EP1789857, EP1456722, EP2137893, DE102015105702 with corresponding applications or registrations in various other countries. Ether CAT® is registered trademark and patented technology, licensed by Beckhoff Automation Gmb H, Germany Copyright © Beckhoff Automation Gmb H & Co. KG, Germany. The reproduction, distribution and utilisation of this document as well as the communication of its contents to others without express authorisation are prohibited. Offenders will be held liable for the payment of damages. All rights reserved in the event of the grant of a patent, utility model or design. TF5200 | Twin CAT 3 CNC Version: 1.051 3 Gantry operation
## Page 4

General and safety instructions General and safety instructions Icons used and their meanings This documentation uses the following icons next to the safety instruction and the associated text. Please read the (safety) instructions carefully and comply with them at all times. Icons in explanatory text 1. Indicates an action. ð Indicates an action statement. DANGER Acute danger to life! If you fail to comply with the safety instruction next to this icon, there is immediate danger to human life and health. CAUTION Personal injury and damage to machines! If you fail to comply with the safety instruction next to this icon, it may result in personal injury or damage to machines. NOTICE Restriction or error This icon describes restrictions or warns of errors. Tips and other notes This icon indicates information to assist in general understanding or to provide additional informa- tion. General example Example that clarifies the text. NC programming example Programming example (complete NC program or program sequence) of the described function or NC com- mand. Specific version information Optional or restricted function. The availability of this function depends on the configuration and the scope of the version. 4 Version: 1.051 TF5200 | Twin CAT 3 CNC Gantry operation
## Page 5

Table of contents Table of contents Notes on the documentation.................................................................................................................... 3 General and safety instructions.............................................................................................................. 4 1 Overview.................................................................................................................................................... 8 2 Description................................................................................................................................................ 9 3 Soft gantry............................................................................................................................................... 11 3.1 Configuration................................................................................................................................... 11 3.2 Programming................................................................................................................................... 12 3.3 Programming examples.................................................................................................................. 13 4 Hard gantry.............................................................................................................................................. 17 4.1 configuration.................................................................................................................................... 17 4.1.1 Master axis....................................................................................................................... 17 4.1.2 Slave axis......................................................................................................................... 17 4.2 Programming................................................................................................................................... 19 4.2.1 Gantry start-up................................................................................................................. 19 4.3 Referencing..................................................................................................................................... 21 4.4 Error handling.................................................................................................................................. 22 5 Parameter................................................................................................................................................. 23 5.1 Overview......................................................................................................................................... 23 5.1.1 Channel parameters for dynamic gantry mode................................................................ 23 5.1.2 General axis parameters.................................................................................................. 23 5.1.3 Axis parameters for dynamic gantry mode....................................................................... 23 5.1.4 Axis parameters for static gantry mode............................................................................ 23 5.2 Description...................................................................................................................................... 24 5.2.1 Channel parameters......................................................................................................... 24 5.2.2 Axis parameters............................................................................................................... 25 6 Support and Service............................................................................................................................... 29 Index......................................................................................................................................................... 30 TF5200 | Twin CAT 3 CNC Version: 5 Gantry operation
## Page 6

Table of contents 6 Version: TF5200 | Twin CAT 3 CNC Gantry operation
## Page 7

List of figures List of figures Fig. 1 Mechanical gantry mode.............................................................................................................. 9 Fig. 2 Programmable gantry ("soft gantry”) ........................................................................................... 9 TF5200 | Twin CAT 3 CNC Version: 1.051 7 Gantry operation
## Page 8

Overview 1 Overview Description In addition to default path programming, axes can also be operated in coupled state. This is referred to as gantry mode. Contrary to normal synchronous mode, additional position deviation monitoring mechanisms are active and specific error reactions apply. Properties The following conditions apply to gantry mode with several axes • identical drive types • identical axis dynamic and control parameters • identical error response (or no internal drive error response) A distinction is made between: • Soft gantry (programmable) Machines that do not require any mechanical gantry mode due to their basic structure can be operated by programming them in gantry mode • Hard gantry (mechanical): Static gantry mode is defined by configuration since the axis are firmly coupled to one another due to the machine structure. Parameterisation Extensive settings are required in the channel and axis parameter lists to configure soft and hard gantry modes. Programming Soft gantry: The #SET AX LINK and #AX LINK NC commands are provided in extended syntax for the programmable gantry mode: The coupled axes are defined by programming. Hard gantry: Only the master axis in the channel is known for a hard gantry coupling. This can be programmed in the NC program. The coupled axes are defined by configuration. Mandatory note on references to other documents For the sake of clarity, links to other documents and parameters are abbreviated, e.g. [PROG] for the Programming Manual or P-AXIS-00001 for an axis parameter. For technical reasons, these links only function in the Online Help (HTML5, CHM) but not in pdf files since pdfs do not support cross-linking. 8 Version: 1.051 TF5200 | Twin CAT 3 CNC Gantry operation
## Page 9

Description 2 Description Hard gantry (mechanical) In the case of mechanical (also static) gantry, the axes are firmly coupled to one another due to the machine structure and are defined by the machine configuration (see figure). In the case of a mechanical gantry, a dynamic change to gantry coupling is not possible after con- troller start-up. Workpiece Slide X1 X2 X1 X2 Workpiece Master Slave Master Slave Fig. 1: Mechanical gantry mode Soft gantry (programmable) Machines that require no mechanical gantry mode due to their basic structure, for example milling machines with two independent slides, can be run by programming them in gantry mode. For example, this is necessary when slides must be linked to one another for clamping and machining large workpieces (see figure below). Workpiece Slide X1 X2 Master Slave Fig. 2: Programmable gantry ("soft gantry”) TF5200 | Twin CAT 3 CNC Version: 1.051 9 Gantry operation
## Page 10

Description Monitoring functions • The axes specified in the gantry combination are coupled by setpoints. Coupling is monitored by actual values. • A coupling offset can be specified between individual gantry axes. • Two limits can be specified for monitoring. • Monitoring is absolute after axis referencing or relative before referencing. 10 Version: 1.051 TF5200 | Twin CAT 3 CNC Gantry operation
## Page 11

Soft gantry 3 Soft gantry 3.1 Configuration Dynamic gantry mode Additional monitoring mechanisms to monitor the deviation of axis positions and special strategies to compensate for these deviations apply to gantry axes. Dynamic gantry mode can be defined in the NC program. In addition, the axis and channel parameters listed in the table below must be assigned: Parameter Required for dynamic Gantry mode P-AXIS-00070 gantry_ax_nr P-AXIS-00072 gantry_max_diff_resetable X P-AXIS-00071 gantry_max_diff_reset_locked X P-AXIS-00073 gantry_offset P-AXIS-00074 gantry_slave_no_homing P-AXIS-00075 gantry_vb_korr X P-AXIS-00249 gantry_diff_check_without_homing P-AXIS-00253 gantry_synchronous_slave_homing ** P-AXIS-00254 cnc_controlled_stop_after_error ** **only for SERCOS-drives P-CHAN-00104 restore_coupling_after_reset Restore coupling after reset P-CHAN-00105 preserve_coupling_after_prog_end Restore coupling at program end TF5200 | Twin CAT 3 CNC Version: 1.051 11 Gantry operation
## Page 12

Soft gantry 3.2 Programming Syntax, definition of a gantry coupling The #SET AX LINK and #AX LINK NC commands are provided in extended syntax for the programmable gantry mode: #SET AX LINK [ <coupling_group>, [ <slave>=<master>,G [,<limit_1>, limit_2>] ] {, [ <slave>=<master>,G [,<limit_1>, limit_2>] ] } ] or alternatively #AX LINK [NBR] [ <coupling_group>, [ <slave>=<master>,G [,<limit_1>, limit_2>] ] {, [ <slave>=<master>,G [,<limit_1>, limit_2>] ] } ] <coupling_group> Number of the coupling group 1 ... [Max. number of coupling groups(1) -1] , positive integer. <Slave> Designation or logical axis number of the slave axis of the coupling pair i <Master> Designation or logical axis number of the master axis of the coupling pair i Max. number of coupling pairs (2) NBR Evaluation can be changed from logical axes names to axes numbers with the logic switch NBR. The axis couplings must then be defined with logical axis numbers. The axes need not be present in NC channel. Their availability in NC channel is checked only at activation of the coupling group! G Keyword for gantry coupling With a gantry coupling the position difference is checked between the actual positions of the coupled axes and the <limit_1> and <limit_2> positions in the specified limits. Any existing position offset is taken into account when gantry coupling is activated. With a gantry coupling the following values are used for two-stage monitoring of the permitted position difference between the gantry axes. Specified in [mm]. Positive real number: <limit_1> 1st monitoring limit: If this limit is exceeded, the motion is aborted and the control system assumes the error state. In the default case, the position difference is cancelled during RESET. Depending on the specific application, deviating motion can still be realised. <limit_2> 2nd monitoring limit: An error that cannot be RESET is output if this limit is exceeded. The controller must be switched off and the position difference must be eliminated manually. If the monitoring limits are not programmed, the defaults apply from the axis parameter data records P-AXIS-00072 and P-AXIS-00071 of the slave axis. 12 Version: 1.051 TF5200 | Twin CAT 3 CNC Gantry operation
## Page 13

Soft gantry Handling and operating principle • Gantry coupling takes place at precisely the positions where the axes are located at the time when coupling is selected. There is no need to specify an offset in the NC command because the offset is calculated internally in the position controller via the nominal positions. • The dynamic data of the slave axis is taken into account in the contouring motion. • If programmed accordingly (P-CHAN-00104/P-CHAN-00105), a coupling that is still active on RESET or at program end is implicitly restored for safety reasons the next time the program is started. 3.3 Programming examples Soft gantry coupling : N10 #SET AX LINK[1, [Y2 = Y1,G,0.01,0.25]] # Gantry coupling of Y1 as master axis and Y2 as slave # axis. 1st limit is 10µm, 2. Limit is 250 µm. N20 #SET AX LINK[2, [Y2 = Y1,G]] # Gantry coupling of Y1 (master) and Y2 (slave). The # monitoring limits of the axis parameter data record of Y2 apply. N30 #SET AX LINK [3,[Y2 = Y1]] # Default coupling of Y2 with Y1. No gantry mode. # or alternative N10 #AX LINK[1, [Y2 = Y1,G,0.01,0.25]] N20 #AX LINK NBR[2, [8 = 2,G]] # Gantry coupling via logical axis numbers Parallel machining of workpieces with a symmetrical or scaled contour can also be programmed by an extended syntax of the #SET AX LINK command. Position differences are not monitored in these modes (mirroring or scaling). #SET AX LINK [ <coupling_group>, [ <slave>=<master>,<nominator>, <denominator> ] {, [ <slave>=<master>,<numerator>, <denominator> ] } ] or alternatively #AX LINK [NBR] [ <coupling_group>, [ <slave>=<master>,<numerator>, <denominator>] {, [<slave>=<master>,<numerator>, <denominator> ] } ] <coupling_group> Number of the coupling group 1 ... [Max. number of coupling groups(1) -1] , positive integer. <Slave> Designation or logical axis number of the slave axis of the coupling pair i <Master> Designation or logical axis number of the master axis of the coupling pair i Max. number of coupling pairs (2) NBR Evaluation can be changed from logical axes names to axes numbers with the logic switch NBR. The axis couplings must then be defined with logical axis numbers. The axes need not be present in NC channel. Their availability in NC channel is checked only at activation of the coupling group! <numerator>, Integers are used to calculate a coupling factor between: <denominator> • -1 : Mirror coupling • 1 : Default coupling; equivalent to the previous syntax • 0 : Output of an error message NOTICE coupling factors unequal to -1 or 1 that have a scaling effect are not permitted. A warning is output and the coupling factor is assigned the value 1 (default coupling). TF5200 | Twin CAT 3 CNC Version: 1.051 13 Gantry operation
## Page 14

Soft gantry Soft gantry: Mirror and default coupling : N10 #SET AX LINK[1, [Y2 = Y1,1,-1]] Mirror coupling (factor -1) N20 #SET AX LINK[1, [Y2 = Y1,-1,1]] Mirror coupling (factor -1) N30 #SET AX LINK[1, [Y2 = Y1,-2,2]] Mirror coupling (factor -1) N40 #SET AX LINK[1, [Y2 = Y1,1,1]] Default coupling N50 #SET AX LINK[1, [Y2 = Y1,2,2]] Default coupling N60 #SET AX LINK[1, [Y2 = Y1,0,1]] Error message, program is aborted N70 #SET AX LINK[1, [Y2 = Y1,1,0]] Error message, program is aborted N80 #SET AX LINK[1, [Y2 = Y1,1,2]] Warning (factor 0.5), default cpl. N90 #SET AX LINK[1, [Y2 = Y1,2,3]] Warning (factor 0.666), default cpl. N100 #SET AX LINK[1, [Y2 = Y1,3,2]] Warning (factor 1.5), default cpl. N110 #SET AX LINK[1, [Y2 = Y1,-1,2]] Warning (factor -0.5), default cpl. N120 #SET AX LINK[1, [Y2 = Y1,-3,2]] Warning (factor -1.5), default cpl. or alternatively N40 #AX LINK[1, [Y2 = Y1,1,1]] Default coupling N50 #AX LINK NBR[1, [8 = 2,2,2]] Standard coupling via log. axis numbers 14 Version: 1.051 TF5200 | Twin CAT 3 CNC Gantry operation
## Page 15

Soft gantry Syntax, selecting and deselecting a gantry coupling A (gantry) coupling group can be activated and deactivated with the following NC commands: #ENABLE AX LINK [ <coupling_group> ] or #ENABLE AX LINK (Coupling group 0, defined in the channel parameter list) or alternatively #AX LINK ON [ <coupling_group> ] or #AX LINK ON (Coupling group 0, defined in the channel parameter list) #DISABLE AX LINK [ <cooupling_group> ] or #DISABLE AX LINK (Deselect the last activated coupling group) or alternatively #AX LINK OFF [ <coupling_group> ] or #AX LINK OFF (Deselect the last activated coupling group) #AX LINK OFF ALL (Deselect all active coupling groups) Handling and operating principle • No coupling group is active after start-up in the initial position of the NC kernel. Activation of axis coupling begins with programming in the NC program and ends, if not cancelled, when the program ends (M30, M02). If active axis couplings are to remain effective for the next program (program global), a specific channel parameter P-CHAN-00105 must be set. • Several coupling groups can be activated simultaneously. • Unassigned coupling groups cannot be activated. A coupling group is considered assigned if at least one valid master-slave coupling pair was defined. • The NC command must be a single instruction in the NC block. • The number of the coupling group can also be programmed via mathematical expressions. • WRK must not be selected when synchronous operation is selected or cancelled. • Manual mode with parallel interpolation (G201) may not be active for the slave axes when synchronous mode is selected • Positions of slave axes may not be addressed in the NC program when synchronous mode is active. TF5200 | Twin CAT 3 CNC Version: 1.051 15 Gantry operation
## Page 16

Soft gantry Tool change and subroutine for contour machining Axis designations Master axis system X, Y, Z, C used: Slave axis system Y_S, Z_S, C_S (Initialisation program) %L UP_INIT_ACHS_KOPPL (initialise axis coupling 1) N10 #SET AX LINK[1, Y_S=Y, Z_S=Z, C_S=C] (or #AX LINK[1, Y_S=Y, Z_S=Z, C_S=C] N20 M17 (tool changing program) %L UP_WZ N30 #DISABLE AX LINK (oder #AX LINK OFF) (Approach tool change position) N40 G01 G90 Y1000 Z100 C0 Y_S=1000 Z_S=100 C_S=0 (Tool change; T10 contains all tool axis offsets and the tool lengths of master and slave tools; or these values are explicitly included in the calculation.) ) N50 T10 D10 : (Further commands for physical tool change) : (Approach old coupling position. The coupling position may also be defined by parameter programming and then be used by the subroutine.) N80 G01 G90 X20 Y20 Z40 C50 Y_S=20 Z_S=40 C_S=50 N90 #ENABLE AX LINK[1] (or #AX LINK ON[1]) N110 M17 (Subroutine for contour machining) %L UP1 N150 G01 G91 X10 Y10 Z-20 C90 N160 G02 X20 Y20 I10 J10 N170 LL UP_WZ N180 G01 G91 X10 Y10 Z-20 C90 N190 G02 X20 Y20 I10 J10 N200 M17 (Main program; initial condition: Both tools were changed.) (Move both axis systems to coupling position first.) N300 G01 G91 X20 Y20 Z40 C50 Y_S=20 Z_S=40 C_S=50 F300 (Start synchronous operation) N310 #ENABLE AX LINK[1] (or #AX LINK ON[1]) N320 LL UP1 : N400 #DISABLE AX LINK (or #AX LINK OFF) N410 M30 16 Version: 1.051 TF5200 | Twin CAT 3 CNC Gantry operation
## Page 17

Hard gantry 4 Hard gantry 4.1 configuration Static gantry mode Additional monitoring mechanisms to monitor the deviation of axis positions and special strategies to compensate for these deviations apply to gantry axes. Static (mechanical) gantry mode is defined by configuration since the axes are always firmly coupled to one another due to the machine structure. It is possible to define gantry groups that assign a master axis to several slave axes. 4.1.1 Master axis Master axis configuration For gantry master axes bit 0x00010000 must be set in axis mode (P-AXIS-00015). If required, the axis can be assigned by default to an NC channel (P-CHAN-00006, P-CHAN-00035). Make sure that the following parameters for master and slave axes are identical: • Modulo mode (P-AXIS-00018, P-AXIS-00015 bit 0x00000004) • Modulo range (P-AXIS-00126, P-AXIS-00127) • Maximum acceleration (P-AXIS-00008) • Emergency stop delay (P-AXIS-00003) • CNC-controlled error reaction (P-AXIS-00254) • Homing type (P-AXIS-00299) • Delay after PLC watchdog error (P-AXIS-00367) If these parameters are different, a warning is output at controller start-up and the master axis values are adopted. 4.1.2 Slave axis Configuration of salve axis For gantry slave axes, bit 0x00020000 must be set in axis mode (P-AXIS-00015). The following must also be configured for the slave axis: • Axis number of master axis (P-AXIS-00070) • Offset to master axis (P-AXIS-00073) • Permitted resettable gantry error (P-AXIS-00072) • Permitted non-resettable gantry error (P-AXIS-00071) • Velocity to clear the position difference to the master axis (P-AXIS-00075) A gantry slave axis may not be assigned to any NC channel (P-CHAN-00006, P-CHAN-00035). Make sure that the following parameters for master and slave axes are identical: • Modulo mode (P-AXIS-00018, P-AXIS-00015 Bit 0x00000004) • Modulo range (P-AXIS-00126, P-AXIS-00127) • Maximum acceleration (P-AXIS-00008) TF5200 | Twin CAT 3 CNC Version: 1.051 17 Gantry operation
## Page 18

Hard gantry • Emergency stop delay (P-AXIS-00003) • CNC-controlled error reaction (P-AXIS-00254) • Homing type (P-AXIS-00299) • Delay after PLC watchdog error (P-AXIS-00367) If these parameters are different, a warning is output at controller start-up and the master axis values are adopted. Other axis parameters can be set in the slave axis as required. Parameter Required for Required for Gantry mode Gantry mode Master axis slave axis P-AXIS-00015 achs_mode X X P-AXIS-00070 gantry_ax_nr X P-AXIS-00072 gantry_max_diff_resetable X P-AXIS-00071 gantry_max_diff_reset_locked X P-AXIS-00073 gantry_offset X P-AXIS-00074 gantry_slave_no_homing X P-AXIS-00075 gantry_vb_korr X 18 Version: 1.051 TF5200 | Twin CAT 3 CNC Gantry operation
## Page 19

Hard gantry 4.2 Programming Only the master axis in the channel is known for a hard gantry coupling. This can be programmed in the NC program. Gantry slave axes have no axis identifier and therefore cannot be programmed in the NC program. 4.2.1 Gantry start-up NOTICE Only use the #GANTRY command for start-up Possible machine damage if command used incorrectly. To start up a machine, it may be helpful to disable the gantry combination of one or even several axes. This is done by assigning the axis parameter P-AXIS-00704 kenngr.gantry_on_mode CONFIG and this must be set for all gantry slave axes. The following gantry combination is defined for the programming examples below: Combination 1: • X (Master) with logical axis number 1 ◦ Axis_X1 (Slave 1), logical axis number 5 ◦ Axis_X2 (Slave 2), logical axis number 6 4.2.1.1 Disable gantry combination (#GANTRY OFF, #GANTRY OFF ALL) Syntax of Disable gantry combination: #GANTRY OFF [ { AXNR=.. | AX=<axis_name> } ] AXNR=.. Logical axis number (P-AXIS-00016) of master axis AX=<axis_name> Name of the master axis of a gantry combination Syntax of Disable all gantry combinations: #GANTRY OFF ALL To start up, the gantry combination of a gantry master axis located in the channel can be disabled by the command #GANTRY OFF [AX=<master_axis_name>] . Gantry slave axes are then free and cannot be assigned to any master axis. They are then treated as independent CNC axes. The gantry master axis can continue to move as an independent CNC channel axis. The previous slave axes are no longer influenced by movements of the previous gantry master axis. However, in this state they cannot be programmed or moved since they do not belong to any channel. If the master axis is not in the channel, the combination can be disabled in the same way by the logical axis number. #GANTRY OFF [AXNR=..] If all existing gantry combinations need to be disabled, this is done by using #GANTRY OFF ALL . TF5200 | Twin CAT 3 CNC Version: 1.051 19 Gantry operation
## Page 20

Hard gantry Disabling gantry couplings using #GANTRY OFF is modal beyond program end and reset. The gantry combination is only re-enabled after a controller restart or if #GANTRY ON[ ] is pro- grammed explicitly. The #GANTRY OFF command adopts no slave axes in the channel. Use of gantry slave axes. If free gantry slave axes are to remain programmable even after the combination is disabled, they must be previously requested by the NC channel. After a request is successful, free slave axes respond in the same way as normal CNC axes. Requesting and releasing slave axes is executed using Axis exchange commands For example, the following command requests an axis: #CALL AX[Axis_X1, 5, 4] Similarly, the following command releases a CNC axis as usual: #PUT AX[Axis_X1] All other NC commands applicable to an axis can also be released for slave axes. Request free gantry slave axes #GANTRY OFF [AX=X] ; Request free slave axes #CALL AX [Axis_X1, 5, 4] ; log. axis no.4 at Index 3 #CALL AX [Axis_X2, 6, 5] ; log. axis no.4 at Index 4 ; Move axes as independent CNC axes G0 X=47;X previous master axis of gantry combination 1 G0 Axis_X1=11 ; Axis_X1 previous slave axis 1 of X G0 Axis_X2=12 ; Axis_X2 previous slave axis 2 of X M30 4.2.1.2 Restore gantry combination (#GANTRY ON, #GANTRY ON ALL) Syntax for Restore a gantry combination: #GANTRY ON [ { AXNR=.. | AX=<axis_name> } ] AXNR=.. Logical axis number (P-AXIS-00016) of master axis AX=<axis_name> Name of the master axis of a gantry combination Syntax for Restore a gantry combination: #GANTRY ON ALL The command #GANTRY ON [AX=<master_axis_name>] restores the gantry combination of the master axis <master_axis_name> based on the original machine data. All previous slave axes in the NC channel are implicitly released. Similarly, the gantry combination can also be restored by the logical axis number. #GANTRY ON [ AXNR=..] The gantry difference is not cleared as long as parameter (P-AXIS-00704) kenngr.gantry_on_mode = CONFIG is set. 20 Version: 1.051 TF5200 | Twin CAT 3 CNC Gantry operation
## Page 21

Hard gantry Restore a gantry combination #GANTRY OFF [AX=X] ; Request free slave axes #CALL AX [Axis_X1, 5, 4] #CALL AX [Axis_X2, 6, 5] ; Move axes as independent CNC axes G0 X=47;X previous master axis of gantry combination 1 G0 Axis_X1=11 ; Axis_X1 previous slave axis 1 of X G0 Axis_X2=12 ; Axis_X2 previous slave axis 2 of X ;… #GANTRY ON [AX=X] ; Restore gantry combination 1 G0 X=65 ; Assigned slave axes 1 and 2 also move with M30 In analogy to #GANTRY OFF ALL the command #GANTRY ON ALL all gantry combinations are restored. 4.3 Referencing CNC-controlled All gantry axes are referenced sequentially if homing is performed by the CNC. The homing logic is always executed for one axis and the remaining axes in the gantry combination are also interpolated uniformly. This is then repeated for the next axis in the gantry combination until all gantry axes are referenced. During the homing motion, no relative motion of the gantry axes to one another occurs. Drive-controlled Intelligent drives (e.g. SERCOS) execute homing independently. In a gantry system, it must also be ensured that the gantry combination always moves uniformly. In other words, • the parameter definitions must ensure that the drive covers an identical path during homing motion (RPF). • The homing motion is started simultaneously for all gantry axes. This behaviour is set by the parameter P-AXIS-00253. Drive-controlled reference point travel must run identically in the case of both drives (e.g. without cam and distance-coded measurement system). This must be initiated by respective parameters. NOTICE For security reasons the torque can be reduced during homing procedure. Only on the master side The parameter P-AXIS-00074 (gantry_slave_no_homing) can suppress homing for gantry slave axes. When master axis homing is completed, the reference positions entered in the axis parameter list of slaves axes are adopted. Monitoring is started for the gantry difference between master and slave axes. Monitoring before referencing The parameter P-AXIS-00249 (gantry_diff_check_without_homing) is used to activate monitoring of the gantry difference between master and slave axes before homing is executed. The offset between the master and slave axes at the time of controller start-up is used as the position offset. TF5200 | Twin CAT 3 CNC Version: 1.051 21 Gantry operation
## Page 22

Hard gantry 4.4 Error handling Error handling for gantry systems In case of an error an intelligent drive executes an error reaction by itself in most cases and reports this to the CNC. Then the CNC can stop the other related axis. With gantry axes, it is not permitted for one axis in the gantry combination to stop independently. This is why the CNC can stop the entire gantry combination in a controlled operation if an error occurs in one axis. The functions for master and slave axes are set using the parameter P-AXIS-00254 (cnc_controlled_stop_after_error). A check is made whether the settings for master and slave axes are identical and this is corrected in the slave axes if necessary. NOTICE The parameter P-AXIS-00254 is currently used for SERCOS axes only. In addition, the drive must be parameterised so that no or possibly a delayed error response is executed (see Eco Drive P-0-0117). In a CNC-controlled error reaction the system is stopped at the defined emergency deceleration P- AXIS-00003 (a_emergency). 22 Version: 1.051 TF5200 | Twin CAT 3 CNC Gantry operation
## Page 23

Parameter 5 Parameter 5.1 Overview 5.1.1 Channel parameters for dynamic gantry mode ID Parameter Description P-CHAN-00104 restore_coupling_after Restore coupling after reset _reset P-CHAN-00105 preserve_coupling_afte Restore coupling at program end r_prog_end 5.1.2 General axis parameters ID Parameter Description P-AXIS-00003 a_emergency Emergency axis acceleration 5.1.3 Axis parameters for dynamic gantry mode ID Parameter Description P-AXIS-00071 gantry_max_diff_reset Maximum path difference _locked P-AXIS-00072 gantry_max_diff_reset Resettable path difference able P-AXIS-00075 gantry_vb_korr Compensation velocity 5.1.4 Axis parameters for static gantry mode ID Parameter Description P-AXIS-00015 achs_mode Axis mode P-AXIS-00070 gantry_ax_nr Axis number of the master axis P-AXIS-00071 gantry_max_diff_reset Maximum path difference _locked P-AXIS-00072 gantry_max_diff_reset Resettable path difference able P-AXIS-00073 gantry_offset Static offset P-AXIS-00074 gantry_slave_no_homi Suppress homing for gantry slave axis ng P-AXIS-00075 gantry_vb_korr Compensation velocity P-AXIS-00249 gantry_diff_check_with Monitor gantry difference before homing out_homing P-AXIS-00253 gantry_synchronous_sl Drive-controlled referencing of gantry combination ave_homing P-AXIS-00254 cnc_controlled_stop_af CNC-controlled error reaction ter_error P-AXIS-00297 kopf.log_achs_name Default axis name P-AXIS-00704 kenngr.gantry_on_mod Conditions for clearing the gantry difference e TF5200 | Twin CAT 3 CNC Version: 1.051 23 Gantry operation
## Page 24

Parameter 5.2 Description 5.2.1 Channel parameters P-CHAN-00104 Restore coupling after reset (synchronous operation) Description An active axis coupling (synchronous operation) is deselected by NC reset. Set this parameter to 1 if the axis coupling is to be reactivated automatically in the following NC program. Parameter synchro_data.restore_coupling_after_reset Data type BOOLEAN Data range 0/1 Dimension ---- Default value 0 Remarks This parameter may only be used if all axes participating in the coupling exist in the basic configuration of the NC channel. P-CHAN-00105 Restore coupling after program end (synchronous operation) Description An active axis coupling (synchronous operation) is deselected at NC program end (#DISABLE AXLINK) if it is not ended explicitly in the NC program. Set this parameter to 1 if the axis coupling is to be reactivated automatically in the following NC program. Parameter synchro_data.preserve_coupling_after_prog_end Data type BOOLEAN Data range 0/1 Dimension ---- Default value 0 Remarks This parameter may only be used if all axes participating in the coupling exist in the basic configuration of the NC channel. 24 Version: 1.051 TF5200 | Twin CAT 3 CNC Gantry operation
## Page 25

Parameter 5.2.2 Axis parameters P-AXIS-00003 Deceleration for an emergency stop Description The parameter defines the used deceleration for an emergency stop. If errors of error reaction class 4 occur, the NC decelerates at the rate for specific axes. The path then leaves the trajectory. Parameter getriebe[i].dynamik.a_emergency Data type UNS32 Data range 1 ≤ a_emergency ≤ 2*P-AXIS-00008 Axis types T, R, S Dimension T: mm/s² R,S: °/s² Default value 0 drive types. ---- Remarks When the parameter has the value 0, the value of P-AXIS-00008 (a_max) is used. P-AXIS-00015 Axis mode Description Axes can be traversed in different operating modes. Parameter kenngr.achs_mode Data type UNS32 Data range 0x00000001 - 0x10000000 Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0x00000001 Drive types ---- Remarks P-AXIS-00070 Axis number of master axis Description In the axis parameter list of the slave axis the logical number of its master axis is entered. If this parameter is assigned, the master and slave axes are assigned to one another during start-up. This so-called static gantry coupling exists at the position controller level. The slave axis is not known in the channel. A movement is only executed by programming their master axis. Parameter kenngr.gantry_ax_nr Data type UNS16 Data range 1 ≤ gantry_ax_nr ≤ MAX (UNS16) Axis types T, R Dimension T: ---- R: ---- Default value 0 Drive types ---- Remarks This entry is not adopted when the axis parameter list is updated. Updates only become effective when the controller is rebooted. P-AXIS-00071 Non resettable path distance between master and slave axes Description Maximum permissible path distance between master and slave gantry axes. Error that cannot be remedied by NC reset. Parameter kenngr.gantry_max_diff_reset_locked Data type UNS32 Data range 0 < gantry_max_diff_resetable < gantry_ max_diff_reset_locked < MAX(UNS32) Axis types T, R Dimension T: 0.1 µm R: 0.0001° Default value 0 Drive types ---- TF5200 | Twin CAT 3 CNC Version: 1.051 25 Gantry operation
## Page 26

Parameter Remarks P-AXIS-00072 Resettable path distance Description Maximum permissible path distance between master and slave gantry axes. Error that can be remedied by NC reset. Parameter kenngr.gantry_max_diff_resetable Data type UNS32 Data range 0 < gantry_max_diff_resetable < MAX(UNS32) Axis types T, R Dimension T: 0.1 µm R,S: 0.0001° Default value 0 Drive types ---- Remarks P-AXIS-00073 Static offset between master and slave axes Description Static difference between the master and slave axes in the event of differences between the master and slave axes. The offset sign results from the calculation instruction: OFFSET = SLAVE - MASTER Parameter kenngr.gantry_offset Data type SGN32 Data range MIN(SGN32) < gantry_offset < MAX(UNS3 Axis types T, R Dimension T: 0.1 µm R: 0.0001° Default value 0 Drive types ---- Remarks P-AXIS-00074 Suppress homing for gantry slave axis Description This parameter can suppress the homing of gantry slave axes. When homing of the master axis is completed, the reference positions entered in the axis parameter lists of the slave axes are also adopted and monitoring of the gantry difference is started. Parameter kenngr.gantry_slave_no_homing Data type BOOLEAN Data range 0/1 Axis types T, R Dimension T: ---- R: ---- Default value 0 drive types. ---- Remarks This parameter is not supported in the case of spindle axes. P-AXIS-00075 Velocity of correction for compensation of gantry difference Description The parameter defines the velocity at which the axis position of the slave axis is corrected until the distance between master and slave is less than P-AXIS-00073 . Parameter kenngr.gantry_vb_korr Data type UNS32 Data range 0 < gantry_vb_korr < P-AXIS-00212 Axis types T, R Dimension T: 1µm/s R: 0.001°/s Default value 0 Drive types ---- Remarks 26 Version: 1.051 TF5200 | Twin CAT 3 CNC Gantry operation
## Page 27

Parameter P-AXIS-00249 Gantry difference monitoring before homing Description By default, the position difference between the gantry master and the slave axis is not monitored until both the master and the slave axes have been homed. This parameter activates gantry difference monitoring before homing (gantry_diff_check_without_homing = 1). The parameters P-AXIS-00072 and P- AXIS-00071 are used as limits during monitoring. The offset between master and slave axis at the time of controller start-up is used for position offset instead of P- AXIS-00073 . On completion of homing, the parameter P-AXIS-00073 is used as position offset. Parameter kenngr.gantry_diff_check_without_homing Data type BOOLEAN Data range 0/1 Axis types T, R Dimension T: ---- R: ---- Default value 0 Drive types ---- Remarks P-AXIS-00253 Drive-controlled homing of gantry axis (SERCOS) Description With drive-controlled homing (digital drives, SERCOS) the homing procedure is started synchronously for all gantry axes. The user must also ensure that the homing parameter settings are the same for all drives. Parameter kenngr.gantry_synchronous_slave_homing Data type BOOLEAN Data range 0/1 Axis types T, R Dimension T: ---- R: ---- Default value 0 Drive types SERCOS Remarks Drive-controlled homing must run identically for both drives (e.g. without cam and distance-coded measurement system). This must be initiated by corresponding parameters. For safety reasons, torque can be reduced during the homing procedure. P-AXIS-00254 CNC-controlled error reaction for gantry axes Description In case of an error, an intelligent drive executes an error reaction independently in most cases and reports this to the CNC. The CNC can then stop other axes in the gantry system running with an incorrect axis. With gantry axes it is not allowed for one axis in the gantry system to stop independently. For this reason the CNC can execute a controlled stop of the complete gantry system in the event of an axis error. The function must be set for the master and the slave axes. A check is made whether the settings for master and slave axes are identical and as required, they are corrected in the slave axes. Parameter kenngr.cnc_controlled_stop_after_error Data type BOOLEAN Data range 0: Drive-internal error reaction 1: CNC-controlled error reaction Axis types T, R Dimension T: ---- R: ---- Default value 0 Drive types SERCOS, CANopen TF5200 | Twin CAT 3 CNC Version: 1.051 27 Gantry operation
## Page 28

Parameter Remarks In the case of a CNC-controlled error response, the axis is stopped at the specified emergency stop acceleration P-AXIS-00003 (a_emergency). This parameter can be used with SERCOS and CANopen drives. In addition a SERCOS drive must be parameterised so that it does not execute any independent (or only delayed) error response (see Eco Drive P-0-0117). P-AXIS-00297 Default name of an axis Description The parameter defines the default name of the axis in the system and should therefore be unique system-wide in the same way as the logical axis number. It is used for: • Name conflicts in connection with extended axis exchange operations [PROG// Section - Axis exchange commands]. • In robotics in connection with the programming of axis-specific movements (P- CHAN-00253). Besides this, the default name has no meaning because the axis name is defined in the channel configuration (P-CHAN-00006). Parameter kopf.log_achs_name Data type STRING Data range Maximum 16 characters (length of axis designation, application-specific) Axis types T, R, S Dimension T: ---- R,S: ---- Default value X_Achse Drive types ---- Remarks The axis designations must begin with the letters A, B, C, U, V, W, X, Y, Z or Q. After that, all letters and digits are possible. Caution: If the parameter P-CHAN-00253 is set, only the names ‘A1’ and ‘A32’ may be used. P-AXIS-00704 Conditions for clearing the gantry difference Description This parameter determines the conditions for the clearance of the gantry difference. Parameter kenngr.gantry_on_mode Data type STRING Data range Mode Meaning DEFAULT The gantry difference is cleared at reset or when the control unit 'gantry_on' ([HLI]) is set. ONLY_CONTROL_UNIT The gantry difference is only cleared when the drive enables are set, the drive status is 'ready' and the control unit 'gantry_on' is set. EDGE_TRIGGERED The gantry difference is cleared on a rising edge of the control unit 'gantry_on'. The behaviour of this setting is equivalent to the behaviour of a set axis parameter P- AXIS-00261. CONFIG : Deactivates gantry control and prevents the clearing of a gantry difference. Axis types T, R, S Dimension T: ---- R,S: ---- Default value DEFAULT Drive types ---- Remarks When the axis parameter P-AXIS-00261 is set, only DEFAULT or EDGE_TRIGGERED are used for P-AXIS-00704, otherwise the error message P- ERR-110606 is output. The parameter is available as of V2.11.2034.02. 28 Version: 1.051 TF5200 | Twin CAT 3 CNC Gantry operation
## Page 29

Support and Service 6 Support and Service Beckhoff and their partners around the world offer comprehensive support and service, making available fast and competent assistance with all questions related to Beckhoff products and system solutions. Download finder Our download finder contains all the files that we offer you for downloading. You will find application reports, technical documentation, technical drawings, configuration files and much more. The downloads are available in various formats. Beckhoff's branch offices and representatives Please contact your Beckhoff branch office or representative for local support and service on Beckhoff products! The addresses of Beckhoff's branch offices and representatives round the world can be found on our internet page: www.beckhoff.com You will also find further documentation for Beckhoff components there. Beckhoff Support Support offers you comprehensive technical assistance, helping you not only with the application of individual Beckhoff products, but also with other, wide-ranging services: • support • design, programming and commissioning of complex automation systems • and extensive training program for Beckhoff system components Hotline: +49 5246 963-157 e-mail: support@beckhoff.com Beckhoff Service The Beckhoff Service Center supports you in all matters of after-sales service: • on-site service • repair service • spare parts service • hotline service Hotline: +49 5246 963-460 e-mail: service@beckhoff.com Beckhoff Headquarters Beckhoff Automation Gmb H & Co. KG Huelshorstweg 20 33415 Verl Germany Phone: +49 5246 963-0 e-mail: info@beckhoff.com web: www.beckhoff.com TF5200 | Twin CAT 3 CNC Version: 1.051 29 Gantry operation
## Page 30

Index Index P P-AXIS-00003 25 P-AXIS-00015 25 P-AXIS-00070 25 P-AXIS-00071 25 P-AXIS-00072 26 P-AXIS-00073 26 P-AXIS-00074 26 P-AXIS-00075 26 P-AXIS-00249 27 P-AXIS-00253 27 P-AXIS-00254 27 P-AXIS-00297 28 P-AXIS-00704 28 P-CHAN-00104 24 P-CHAN-00105 24 30 Version: 1.051 TF5200 | Twin CAT 3 CNC Gantry operation
## Page 32

More Information: www.beckhoff.com/TF5200 Beckhoff Automation Gmb H & Co. KG Hülshorstweg 20 33415 Verl Germany Phone: +49 5246 9630 info@beckhoff.com www.beckhoff.com
