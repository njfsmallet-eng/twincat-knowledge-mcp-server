---
title: "TE131x Twin CAT 3"
product: "TC3"
category: "Engineering_Tools"
tags: ["CAT", "TWIN"]
language: "EN"
document_type: "Manual"
version: "1.2.0"
source_pdf: "https://download.beckhoff.com/download/Document/automation/twincat3/TE131x_TC3_Filter_Designer_EN.pdf"
release_date: "2025-03-27"
---
Manual | EN TE131x Twin CAT 3 | Filter Designer 2025-03-27 | Version: 1.2.0

## Page 3

Inhaltsverzeichnis Inhaltsverzeichnis 1 Foreword.................................................................................................................................................... 5 1.1 Notes on the documentation............................................................................................................. 5 1.2 For your safety.................................................................................................................................. 6 1.3 Notes on information security............................................................................................................ 7 2 Overview.................................................................................................................................................... 8 3 Installation................................................................................................................................................. 9 3.1 System requirements........................................................................................................................ 9 3.2 Installation under 4024...................................................................................................................... 9 3.2.1 Downloading the setup file................................................................................................. 9 3.2.2 Installation.......................................................................................................................... 9 3.3 Installation under 4026.................................................................................................................... 12 4 Technical introduction............................................................................................................................ 13 4.1 Digital filters..................................................................................................................................... 13 4.2 Filter types and parameterization.................................................................................................... 15 5 Configuration........................................................................................................................................... 25 5.1 New project..................................................................................................................................... 25 5.2 Filter................................................................................................................................................ 27 5.2.1 Filter set properties.......................................................................................................... 29 5.3 Use.................................................................................................................................................. 35 5.3.1 PLC.................................................................................................................................. 36 5.3.2 I/O.................................................................................................................................... 38 5.3.3 Data files.......................................................................................................................... 43 5.4 Saving projects and filters............................................................................................................... 43 6 Appendix.................................................................................................................................................. 47 6.1 FAQ................................................................................................................................................. 47 6.2 Support and Service........................................................................................................................ 48 TE131x Version: 1.2.0 3

## Page 4

Inhaltsverzeichnis 4 Version: 1.2.0 TE131x

## Page 5

Foreword 1 Foreword 1.1 Notes on the documentation This description is intended exclusively for trained specialists in control and automation technology who are familiar with the applicable national standards. The documentation and the following notes and explanations must be complied with when installing and commissioning the components. The trained specialists must always use the current valid documentation. The trained specialists must ensure that the application and use of the products described is in line with all safety requirements, including all relevant laws, regulations, guidelines, and standards. Disclaimer The documentation has been compiled with care. The products described are, however, constantly under development. We reserve the right to revise and change the documentation at any time and without notice. Claims to modify products that have already been supplied may not be made on the basis of the data, diagrams, and descriptions in this documentation. Trademarks Beckhoff®, Twin CAT®, Twin CAT/BSD®, TC/BSD®, Ether CAT®, Ether CAT G®, Ether CAT G10®, Ether CAT P®, Safety over Ether CAT®, Twin SAFE®, XFC®, XTS®, and XPlanar® are registered and licensed trademarks of Beckhoff Automation Gmb H. If third parties make use of the designations or trademarks contained in this publication for their own purposes, this could infringe upon the rights of the owners of the said designations. Ether CAT® is a registered trademark and patented technology, licensed by Beckhoff Automation Gmb H, Germany Copyright © Beckhoff Automation Gmb H & Co. KG, Germany. The distribution and reproduction of this document, as well as the use and communication of its contents without express authorization, are prohibited. Offenders will be held liable for the payment of damages. All rights reserved in the event that a patent, utility model, or design are registered. Third-party trademarks Trademarks of third parties may be used in this documentation. You can find the trademark notices here: https://www.beckhoff.com/trademarks. TE131x Version: 1.2.0 5

## Page 6

Foreword 1.2 For your safety Safety regulations Read the following explanations for your safety. Always observe and follow product-specific safety instructions, which you may find at the appropriate places in this document. Exclusion of liability All the components are supplied in particular hardware and software configurations which are appropriate for the application. Modifications to hardware or software configurations other than those described in the documentation are not permitted, and nullify the liability of Beckhoff Automation Gmb H & Co. KG. Personnel qualification This description is only intended for trained specialists in control, automation, and drive technology who are familiar with the applicable national standards. Signal words The signal words used in the documentation are classified below. In order to prevent injury and damage to persons and property, read and follow the safety and warning notices. Personal injury warnings DANGER Hazard with high risk of death or serious injury. WARNING Hazard with medium risk of death or serious injury. CAUTION There is a low-risk hazard that could result in medium or minor injury. Warning of damage to property or environment NOTICE The environment, equipment, or data may be damaged. Information on handling the product This information includes, for example: recommendations for action, assistance or further information on the product. 6 Version: 1.2.0 TE131x

## Page 7

Foreword 1.3 Notes on information security The products of Beckhoff Automation Gmb H & Co. KG (Beckhoff), insofar as they can be accessed online, are equipped with security functions that support the secure operation of plants, systems, machines and networks. Despite the security functions, the creation, implementation and constant updating of a holistic security concept for the operation are necessary to protect the respective plant, system, machine and networks against cyber threats. The products sold by Beckhoff are only part of the overall security concept. The customer is responsible for preventing unauthorized access by third parties to its equipment, systems, machines and networks. The latter should be connected to the corporate network or the Internet only if appropriate protective measures have been set up. In addition, the recommendations from Beckhoff regarding appropriate protective measures should be observed. Further information regarding information security and industrial security can be found in our https://www.beckhoff.com/secguide. Beckhoff products and solutions undergo continuous further development. This also applies to security functions. In light of this continuous further development, Beckhoff expressly recommends that the products are kept up to date at all times and that updates are installed for the products once they have been made available. Using outdated or unsupported product versions can increase the risk of cyber threats. To stay informed about information security for Beckhoff products, subscribe to the RSS feed at https:// www.beckhoff.com/secinfo. TE131x Version: 1.2.0 7

## Page 8

Overview 2 Overview The Twin CAT Filter Designer belongs to the Twin CAT Measurement product family. The tool enables the simple design of digital filters. The coefficients determined can be conveniently downloaded for the associated Filter PLC library (TF3680) or into the Ether CAT measurement modules (ELM3xxx). The Filter Designer is integrated seamlessly into the existing Twin CAT development environment and can be created in a measurement project. You have the option to individualize the filter characteristics graphically with the mouse or text-based in the filter settings. For large measurement campaigns in which, for example, several ELM modules are to operate with the same filter coefficients on different channels, the Twin CAT Filter Designer offers multi-download strategies in order to simplify the engineering still further. 8 Version: 1.2.0 TE131x

## Page 9

Installation 3 Installation 3.1 System requirements The following requirements must be satisfied to assure trouble-free functioning of the Twin CAT Filter Designer. Supported operating systems Windows 10 Twin CAT Minimum is Twin CAT 3.1 Build 4022.29 . NET Framework Version 4.6.2 Visual Studio development environment • Visual Studio 2015 • Visual Studio 2017 • Twin CAT XAE Shell In essence, using the Visual Studio Shell is sufficient. The "full" setup includes a shell in the form of the Twin CAT XAE Shell. The "update" shell only provides an update of the Filter Designer sources. 3.2 Installation under 4024 3.2.1 Downloading the setup file The Twin CAT Measurement Setup is available as a download from the Beckhoff website. This is the latest version of various measurement products such as Scope View, Scope Server, Bode Plot, Filter Designer etc.. The range of functions, which is sometimes very varied, can only be activated via the licenses. Follow these steps to download the setup file: 1. Open the web browser of your choice and go to the Beckhoff website: www.beckhoff.com. 2. In the structure tree of the web page, go to the Automation node and select the relevant product. For example: > Twin CAT 3 > TE1xxx | TC3 Engineering > TE13xx | TC3 Scope View Professional. 3. Click on the download link to place the software in the shopping cart. Then click on Start download. 4. (Optional) Transfer the downloaded file to the Twin CAT runtime system you want to install the product on. 3.2.2 Installation The following section describes how to install the Twin CAT 3 Function for Windows-based operating systems. ü The Twin CAT 3 Function setup file was downloaded from the Beckhoff website. 1. Run the setup file as administrator. To do this, select the command Run as administrator in the context menu of the file. ð The installation dialog opens. TE131x Version: 1.2.0 9

## Page 10

Installation 2. Accept the end user licensing agreement and click Next. 3. Enter your user data. 10 Version: 1.2.0 TE131x

## Page 11

Installation 4. If you want to install the full version of the Twin CAT 3 Function, select Complete as installation type. If you want to install the Twin CAT 3 Function components separately, select Custom. 5. Select Next, then Install to start the installation. ð A dialog box informs you that the Twin CAT system must be stopped to proceed with the installation. TE131x Version: 1.2.0 11

## Page 12

Installation 6. Confirm the dialog with Yes. 7. Select Finish to exit the setup. ð The Twin CAT 3 Function has been successfully installed. 3.3 Installation under 4026 Twin CAT Package Manager: Installation (Twin CAT 3.1 Build 4026) Detailed instructions on installing products can be found in the chapter Installing workloads in the Twin CAT 3.1 Build 4026 installation instructions. Install the following workload to be able to use the product: • TE131x | Twin CAT 3 Filter Designer 12 Version: 1.2.0 TE131x

## Page 13

Technical introduction 4 Technical introduction 4.1 Digital filters Digital filters are used to manipulate digitalized (time-discrete and value-quantized) signals. The manipulation is evident in the frequency domain, where certain components of a signal are emphasized or suppressed. Properties Digital filters can differ, among other things, in the frequency domain that may pass through the filter. Filter type Description Area of application (examples) Low-pass Frequencies below a cut-off frequency can Anti-aliasing filter or filter for smoothing a pass through the filter. signal. High-pass Frequencies above a cut-off frequency can Elimination of an interfering DC component in pass through the filter. the signal. Band-pass Frequencies within a certain frequency Useful for amplitude-modulated signals (radio interval can pass through the filter. technology, optical measuring signals, ultrasound signals, ...), i.e. the wanted signal is spectrally distributed around a carrier frequency, so that low and high frequencies outside the wanted signal worsen the SNR (signal-to-noise ratio) and are suppressed. Band-stop Frequencies out of a certain frequency Suppression of an inductively coupled interval can pass through the filter. frequency, e.g. the mains frequency. The specific implementation of the filter determines the transition behavior from the passband to the stopband. See also: Filter types and parameterization [} 15] Digital signals An analog signal x(t) is converted by an analog-to-digital converter, e.g. in an EL3xxx or ELM3xxx, to a time- discrete and value-quantized signal x[n]. The time discretization takes place with the sampling period T (inverse of the sampling rate f). s Difference equation The general difference equation for an input signal x[n] (input to a discrete system, in this case a filter) and a corresponding output signal y[n] is: a und b are usually real-valued coefficients (filter coefficients). The current output value y[n] of a system is k k thus calculated as a linear combination of past filter inputs x[n-k] with k > 0, past filter outputs y[n-k] with k > 0 and the current filter input x[n] (k = 0). The inclusion of past filter outputs in the calculation of a current output value represents a feedback and therefore requires verification to ensure system stability. Filters with feedback are called "IIR filters" (Infinite Impulse Response filters). Filters without feedback are called "FIR filters" (Finite Impulse Response filters). The advantage of IIR filters is that "good" manipulations of the signal x[n] can be achieved with low filter orders. By definition, FIR filters can never be unstable. TE131x Version: 1.2.0 13

## Page 14

Technical introduction Transfer function By z-transforming the difference equation and using the linearity and the time shift property, the following general representation of the filter transfer function is obtained: The denominator coefficients a belong to the coefficients in the feedback. In order for the filter to be stable in k conjunction with the transfer function G(z), care must be taken when calculating these coefficients that the poles of G(z) lie within the unit circle in the complex level. IIR filters with a high filter order can become instable due to quantification effects during the calculation of the coefficients. In order to overcome these challenges, IIR filters are often implemented in cascaded biquad filters, normally called second-order sections (SOS). The overall transfer function is expressed by a multiplication of several 2nd order filters. The transfer function G(z) is then described with: The frequency response of a system can be determined from the transfer function G(z) by transitioning to the frequency range (frequency f) with . The amplitude response then corresponds to the magnitude of the frequency response, and the phase response corresponds to the argument of the frequency response. Implementation in the PLC library The PLC library Tc3_Filter provides various function blocks for implementing digital filters. The function block FB_FTR_IIRCoeff can be used to implement a free filter. The filter coefficients a and b k k can be calculated individually and transferred to the function block using a configuration structure. You are responsible for the stability of your filter. With the function block FB_FTR_IIRSos you can implement a free filter structured in SOS. The filter coefficients a and b can be calculated individually and transferred to the function block using a configuration k k structure. You are responsible for the stability of your filter. The function block FB_FTR_IIRSpec can be used to implement ready-made filters of type Butterworth, Chebyshev or Bessel through simple parameterization. The filter coefficients are thereby calculated internally as biquads. The function block FB_FTR_Mov Avg and FB_FTR_Median can be used to implement an average filter or median filter, which is used in many applications for smoothing signals. Use the function block FB_FTR_Gaussian to create a smoothing filter with minimal group delay so that the shape of your signal is only minimally affected as it passes through the filter and only the interfering signal components are removed. You can use the function block FB_FTR_Notch to implement a band-stop filter that is used to suppress a narrow frequency band. You can use the function block FB_FTR_Actual Value to perform a plausibility check of a measured input value. In addition, further filters that are commonly used in system theory and control technology are made available to you: PTt, PT1, PT2, PT3, PTn, PT2oscillation and Lead Lag elements. A PT1 element and a Butterworth 1st order low-pass filter can be converted equivalently to each other, but the featured parameters of the filters are different. Bilinear transformation 14 Version: 1.2.0 TE131x

## Page 15

Technical introduction The parameterization of the predefined filters takes place in the Laplace space. The implementation of the time-continuous system representation in the time-discrete z-space takes place internally with the help of the bilinear transformation. The effect of "frequency warping" is taken into account in the filter design. 4.2 Filter types and parameterization This description is limited to low-pass filters. However, the concepts can be applied to other filter types (high-pass, band-pass and stop-band filters). Twin CAT Filter Designer The graphics created in the following were created with the Twin CAT Filter Designer. The Filter Designer makes it possible to create filters graphically and then use them in the PLC with Twin CAT 3 Filter (or as a filter directly on the Ether CAT Terminal or Drive). The Butterworth filter, the Chebyshev filter and the Bessel filter are common implementations of a digital filter. Each filter has certain properties that are beneficial in different situations. Butterworth filter vs. Chebyshev filter: The difference between the two implementations essentially consists of the balance between the permissible ripple of the amplitude response in the passband and the slope of the amplitude response in the transition between the passband and the stopband. While the Butterworth filter has a maximally flat amplitude response in the passband, for the Chebyshev filter the permissible ripple of the amplitude response in the passband is specified as a parameter. The advantage of the Chebyshev filter is a steeper decrease of the amplitude response in the transition from the passband to the stopband. Bessel filter vs. Chebyshev and Butterworth filters: In the Bessel filter, the focus is on a constant group delay or a linear phase response in the passband of the filter. As a result, the shape of signals with spectral components in the passband is not changed when passing through the filter. Compared to the Butterworth or Chebyshev filter, the transition from the passband to the stopband is less sharp in the Bessel filter, i.e. amplitudes near the cut-off frequency are comparatively less attenuated. In the passband itself, the Bessel filter exhibits a monotonically decreasing amplitude response. The filter types are compared and described in more detail below. First, some basic terms are explained briefly. Transfer function in the amplitude/frequency diagram The filter is described mathematically by the transfer function (see Digital filters [} 13]). The transfer function can be displayed in the form of an amplitude and a phase response. TE131x Version: 1.2.0 15

## Page 16

Technical introduction Graphical representation of the amplitude response of a low-pass filter Passband The passband (blue zone) allows spectral components of a signal to pass through. Modification of the signal in this frequency range should be avoided. Stopband In the stopband (red zone), the filter attenuates the corresponding frequency components of the signal. Transition The transition (yellow zone) separates the passband and the stopband. It should normally be as small as possible. The design of the transition phase is a defining criterion for the selection of the filter type and its parameterization. Passband ripple The ripple in the passband describes the waviness of the amplitude response in the passband. Parameterization of the Butterworth filter Properties The amplitude response of the Butterworth filter is maximally flat in the passband, so that the wanted signal in this range is only minimally manipulated. In addition, the entire course of the amplitude response is monotonous, i.e. without passband ripple. This filter type is one of the most frequently used filter types. Parameter The transfer function of the Butterworth filter contains only two parameters to be defined: the cut-off frequency and the filter order. Filter order The filter order determines how steeply the amplitude response decreases in the transition. The higher the filter order, the steeper the amplitude response decreases and the smaller the transition. For the slope of the amplitude response for a Butterworth filter, -n * 20 d B/decade, with n = order, i.e. -20 d B/decade for filter order 1, -40 d B/decade for filter order 2, and so on. Cut-off frequency 16 Version: 1.2.0 TE131x

## Page 17

Technical introduction The cut-off frequency of the Butterworth filter is defined as the frequency at which the normalized amplitude response assumes the value 1/sqrt(2) ≈ -3 d B. This applies to all filter orders. Accordingly, when designing the filter, care must be taken to ensure that the spectral components of a signal are already attenuated by 3 d B at the cut-off frequency. This parameter causes a parallel shift of the amplitude response along the frequency axis (distortion due to the logarithmic frequency axis). Graphical representation of the amplitude and phase response of a Butterworth filter with identical cut-off frequency (blue: filter order 2, yellow: filter order 4) TE131x Version: 1.2.0 17

## Page 18

Technical introduction Graphical representation of the amplitude and phase response of a Butterworth filter with identical filter order (blue: cut-off frequency 400 Hz, green: cut-off frequency 700 Hz) Parameterization of the Chebyshev filter Properties The amplitude response of the Chebyshev filter has a parameterizable passband ripple. However, the amplitude response decreases steeply in the transition even at low filter order. The following applies: the greater the permissible passband ripple, the shorter the transition. Parameter In addition to the filter order and the cut-off frequency as parameters to be defined, the transfer function of the Chebyshev filter contains a "passband ripple" parameter. Passband ripple The parameter specifies the permissible ripple of the amplitude response in the passband of the filter. By allowing a passband ripple, a short transition between passband and stopband, and thus a steep decrease of the amplitude response, can be achieved with a significantly lower filter order. Cut-off frequency The cut-off frequency of the Chebyshev filter is defined as the frequency at which the amplitude response passes downwards through the defined "passband ripple". The position of the transition on the frequency axis is thus associated not only with the cut-off frequency, but also with the settings for the filter order and passband ripple. 18 Version: 1.2.0 TE131x

## Page 19

Technical introduction The following diagram shows three different Chebyshev filters with different filter order and passband ripple, but the same cut-off frequency. Graphical representation of the amplitude and phase response of a Chebyshev filter with identical cut-off frequency (blue: filter order 4, passband ripple 0.1 d B, red: filter order 2, passband ripple 0.1 d B, cyan: filter order 4, passband ripple 1 d B) Filter order The filter order determines how steeply the amplitude response decreases in the transition. The higher the filter order, the steeper the amplitude response decreases and the smaller the transition. For the slope of the amplitude response for a Butterworth filter, -n * 20 d B/decade, with n = order, i.e. -20 d B/decade for filter order 1, -40 d B/decade for filter order 2, and so on. The filter order does not influence the cut-off frequency according to the above definition, as can be seen in the following graph. The amplitude response curves intersect at the cut-off frequency of 250 Hz. TE131x Version: 1.2.0 19

## Page 20

Technical introduction Graphical representation of the amplitude and phase response of a Chebyshev filter with identical cut-off frequency (250 Hz) and identical passband ripple (2 d B): (blue: filter order 2, yellow: filter order 4) Comparison of Butterworth and Chebyshev filters The following diagram shows a direct comparison of the amplitude and phase response of a Butterworth filter and a Chebyshev filter. Both filters are parameterized so that their amplitude responses intersect at the cut- off frequency of the Butterworth filter at a normalized amplitude of 1/sqrt(2). Both filters are defined as fifth order filters. The passband ripple parameter of the Chebyshev filter is 0.5 d B. The weighing up referred to above between the permissible passband ripple of the amplitude response and the slope in the transition with the same filter order becomes apparent. With the same filter order, the amplitude response of the Chebyshev filter decreases more sharply in the transition than that of the Butterworth filter. On the other hand, its amplitude response is not smooth in the passband, so that the wanted signal is manipulated more strongly here than with the Butterworth filter. 20 Version: 1.2.0 TE131x

## Page 21

Technical introduction Graphical representation of the amplitude and phase response of a Butterworth filter (blue) and a Chebyshev filter (cyan) Parameterization of the Bessel filter Properties The Bessel filter has a constant group delay in the passband. The amplitude response is monotonically slightly decreasing. Due to these properties, a signal that has only spectral components in the passband will not change in its signal shape when passing through the filter. Parameter Like the Butterworth filter, the Bessel filter is parameterized via the cut-off frequency and filter order. Cut-off frequency The cut-off frequency f defines the amount of group delay of the Bessel filter in the passband τ : c gd,pass Here f is the sampling frequency. s TE131x Version: 1.2.0 21

## Page 22

Technical introduction Graphical representation of the amplitude and phase response of a Bessel filter (blue: cut-off frequency 500 Hz, magenta: cut-off frequency 400 Hz, olive: cut-off frequency 250 Hz) Filter order The filter order influences the slope of the amplitude response in the stopband. It should be noted with the Bessel filter that an increase in the filter order is accompanied by an increase in the passband. Accordingly, it is advisable to select the order first and then use the cut-off frequency to define the passband. 22 Version: 1.2.0 TE131x

## Page 23

Technical introduction Graphical representation of the amplitude and phase response of a Bessel filter (blue: filter order 2, magenta: filter order 4, olive: filter order 6) Comparison of Butterworth, Chebyshev and Bessel filters The main characteristics of the Bessel filter can be seen in the time domain or in the phase and group delay. As shown in the graph below, the impulse response and step response of the Bessel filter do not require much settling. In addition, phase delay and group delay are almost constant in the passband of the filter, which means that signals with spectral components in the passband are not changed in shape. TE131x Version: 1.2.0 23

## Page 24

Technical introduction Graphical representation of the impulse and step response as well as the phase and group delay of a Butterworth filter (blue), a Chebyshev filter (cyan) and a Bessel filter (red). 24 Version: 1.2.0 TE131x

## Page 25

Configuration 5 Configuration 5.1 New project In order to be able to design digital filters, you must first create an appropriate project. There are various ways to do this. Fundamentally, you must first open the Visual Studio® New Project dialog. In the New Project dialog you can directly select the Filter Designer Project and enter your project name (e.g. My Filter Project). The project is then created in the Solution Explorer and, by clicking on an entry in the tree, the editor is displayed with the corresponding filter curve. Alternatively, the Measurement Wizard can be selected. TE131x Version: 1.2.0 25

## Page 26

Configuration Among other things, it offers an entry for the Filter Designer, 26 Version: 1.2.0 TE131x

## Page 27

Configuration where you can specify how many filter curves are to be generated before creating the project. 5.2 Filter Depending on how you have created the filter project, at least one or more filter sets are visible in the Solution Explorer tree. A filter set maps a filter curve in the plot. You can add further filter sets to the plot at any time using the context menu. TE131x Version: 1.2.0 27

## Page 28

Configuration Of course, it is also possible to maintain several plots in parallel in a project. 28 Version: 1.2.0 TE131x

## Page 29

Configuration The corresponding properties are described in the following sub-chapters, starting with the filter and the filter type. 5.2.1 Filter set properties Some of the properties of the filter sets are independent of the filter and the filter type. These generally applicable filter set properties are described in more detail here. TE131x Version: 1.2.0 29

## Page 30

Configuration Appearance: 30 Version: 1.2.0 TE131x

## Page 31

Configuration Cursor Visibility: Specifies whether the drag & drop cursor for the cut-off frequency is displayed. Line Color: Specifies the color of the filter set. Line Width: Line width of the chart. Line width 1 causes the lowest computing time. Magnitude Mode: You can choose between two modes here. The default mode is normalized and corresponds to the magnitude of the frequency response. In d B mode, the frequency response is displayed with logarithmic scaling. Marks: Indicates whether the interpolation points of the characteristic curve should be displayed. Precision: The filter coefficients can be calculated with different precision. Fixed Point32Bit is the default mode and is required for the measuring terminals, since they calculate using fixed-point arithmetic. Alternatively, Fixed Point64Bit mode (higher precision) is to be selected if the coefficients are to be transferred to the PLC. Supporting Points: Number of interpolation points in the Bode Plot. X-Axis-Scale: The frequency axis can be scaled logarithmically or linearly. Common: Enabled: With this property you can activate and deactivate the display of the filter curve. Title: Specifies the name of the filter set. PLC: Channels: Number of channels with which the filter structure is to be configured. Enable PLC Options: Must be true if a filter is to be transferred to the PLC. Oversamples: Number of oversamples with which the filter structure is to be configured. Terminal: Enable Terminal Options: Must be true if a filter is to be transferred to the measuring terminal according to the channel and filter number. Terminal Channel: Specifies the channel number. Terminal Filter: Specifies the filter number. 5.2.1.1 Butterworth The filter-specific properties of a Butterworth filter are described here. TE131x Version: 1.2.0 31

## Page 32

Configuration Properties of a Butterworth low-pass and high-pass Filter Cutoff Frequency [Hz]: Specifies the cut-off frequency. This must be between 0 and the sampling rate/2. Filter Name: Butterworth should be selected here. Filter Type: Here you can select between low-pass, high-pass, band-pass and band- stop. Impulse Response: An IIR filter (Infinite Impulse Response Filter) can be chosen. Order: The order must be > 0 and ≤ 10 (band-pass/band-stop) or ≤ 20 (low-pass/ high-pass). Sampling Rate [Hz]: The sampling rate must be greater than 0. 32 Version: 1.2.0 TE131x

## Page 33

Configuration Properties of Butterworth band-pass and band-stop Filter Supplementary properties for these types Bandwidth [Hz]: The bandwidth must be > 0 and < (sampling rate/2 – cut-off frequency). 5.2.1.2 Chebyshev The filter-specific properties of a Chebyshev filter are described here. TE131x Version: 1.2.0 33

## Page 34

Configuration Properties of a Chebyshev low-pass and high-pass Filter Cutoff Frequency [Hz]: Specifies the cut-off frequency. This must be between 0 and the sampling rate/2. Filter Name: Chebyshev should be selected here. Filter Type: Here you can select between low-pass, high-pass, band-pass and band- stop. Impulse Response: An IIR filter (Infinite Impulse Response Filter) can be chosen. Order: The order must be > 0 and ≤ 10 (band-pass/band-stop) or ≤ 20 (low-pass/ high-pass). Passband Ripple [d B]: The passband ripple (> 0) affects the ripple in the passband. Sampling Rate [Hz]: The sampling rate must be greater than 0. 34 Version: 1.2.0 TE131x

## Page 35

Configuration Properties of Chebyshev band-pass and band-stop Filter Bandwidth [Hz]: The bandwidth must be > 0 and < (sampling rate/2 – cut-off frequency). 5.3 Use The designed filter can be used in a variety of ways in Twin CAT. Firstly in interaction with the corresponding Filter PLC library and secondly with the measurement modules from the ELM series. Both ways are described in the following sub-chapters. The application options can be viewed by right-clicking on the corresponding Filter Set, which opens the context menu. TE131x Version: 1.2.0 35

## Page 36

Configuration 5.3.1 PLC There are several ways of transferring the filters to the PLC in the form of specifications or coefficients. The simplest way is via the context menu, which is opened by right-clicking on the respective Filter Set. 36 Version: 1.2.0 TE131x

## Page 37

Configuration Copy the data of the designed filter to the clipboard, then go directly to the already existing PLC project, where you can paste the coefficients or corresponding specification. There are currently three different copy options. Copy IIR Coeff Sos For PLC Here, the coefficients are broken up into individual biquads and transferred for the FB_FTR_IIRSos in an array that must be specified in a structure, ST_FTR_IIRSos. The instance names of the array and the structure must be manually declared. //Coeff Array_Sos : ARRAY [1..1] OF ARRAY [1..6] OF LREAL := [[0.894858606122573, -1.78971721224515, 0.894858606122573 , 1, -1.77863177782458, 0.800802646665708]]; : ST_FTR_IIRSos :=( n Oversamples := 1, n Channels := 1, p Coefficient Array Adr_Sos := ADR(), n Coefficient Array Size_Sos := SIZEOF()); Copy IIR Coeff For PLC Here, the coefficients are not broken up and are transferred for the FB_FTR_IIRCoeff in two arrays for the coefficients A and B. Instance names must be specified for both arrays. They are to be announced in the structure ST_FTR_IIRCoeff. The structure still requires an instance name. //Denom Coeff Array_a : ARRAY [1..3] OF LREAL := [1, -1.77863177782458, 0.800802646665708]; //Denom Coeff Array_b : ARRAY [1..3] OF LREAL := [0.894858606122573, -1.78971721224515, 0.894858606122573]; : ST_FTR_IIRCoeff := (n Oversamples := 1, n Channels := 1, p Coefficient Array Adr_A := ADR(), TE131x Version: 1.2.0 37

## Page 38

Configuration n Coefficient Array Size_A := SIZEOF(), p Coefficient Array Adr_B := ADR(), n Coefficient Array Size_B := SIZEOF()); Copy IIR Spec For PLC Here, the set specification of the filter is copied in plain text in the form of the structure type ST_FTR_IIRSpec. The structure still requires an instance name. : ST_FTR_IIRSpec :=(e Filter Name := E_FTR_Name.e Butterworth, e Filter Type := E_FTR_Type.e High Pass, n Filter Order := 2, f Cutoff := 250, f Sampling Rate := 10000, n Oversamples := 1, n Channels := 1 ); A further option to transfer the filter properties to the PLC is offered by the Transfer Filter Set dialog. You can choose between PLC and I/O here. In the case of the PLC it is possible to specify a path, for example to a solution. This is checked for possible POUs of the Filter library, i.e. for instances of the Coeff or Spec structures. The scan procedure is accordingly initiated with the magnifying glass button. Following the scan, all hits are displayed underneath in a tree view. You can now select which filter structure instance is to be overwritten by the designed filter. This function is also available if the scanned solution is already opened. Visual Studio® draws your attention to the fact that the file has changed externally and offers a reload. 5.3.2 I/O There are two ways to transfer the filters in the form of coefficients to one or more terminals/channels (multi- download). You can transfer the filter by drag and drop or execute the Transfer Filter Set command via the context menu. 38 Version: 1.2.0 TE131x

## Page 39

Configuration In the simplest case, the filter coefficients are transferred to the measuring terminal by dragging the created filter onto the desired channel by drag and drop. TE131x Version: 1.2.0 39

## Page 40

Configuration Transfer of a single filter set (Enable Terminal Options = false) Alternatively, a filter can be transferred via the Transfer Filter Set dialog. 40 Version: 1.2.0 TE131x

## Page 41

Configuration To do this, I/O and the target system must be selected with the appropriate Net Id. Following the scan procedure, all existing measurement modules are displayed in a tree view. You can now select one or more channels and transfer the designed filter. In addition, the filters set in the terminal can be removed and also loaded to the Filter Designer. Transfer of several filter sets (Enable Terminal Options = true) It is possible to transfer several filter sets to different filter channels with the Enable Terminal Options filter set property. TE131x Version: 1.2.0 41

## Page 42

Configuration In this sample, four filter sets are marked with Terminal Filter = 1 and Terminal Channel from 1-4. Alternatively, the selection of the filter plot has the same effect, because all sub-members are then selected. In the Transfer Filter Set dialog, Channel1-Channel4 are selected under Filter1 for the ELM3004 terminal. A filter transfer leads to a transfer only taking place if the filter and channel numbers of the source (Filter Designer filter sets) and target (ELM terminal channel) match. This corresponds to the following four transfers: • Filter Set 1 Channel 1 -> ELM3004:Filter1:Channel1 • Filter Set 1 Channel 2 -> ELM3004:Filter1:Channel2 • Filter Set 1 Channel 3 -> ELM3004:Filter1:Channel3 • Filter Set 1 Channel 4 -> ELM3004:Filter1:Channel4 The selected filter sets must have unique filter and channel numbers. The selected filter channels in the Transfer Filter Set dialog may not have unique filter and channel numbers. A filter transfer takes place if the filter and channel numbers of source and target match. Start-up list As changes in the local Co E directory are lost when a terminal is replaced, it is advisable to create start-up entries from the Filter Designer. To do this, transfer a filter set via the Transfer Filter Set dialog as described in this chapter. If the transfer is successful, a pop-up window appears that asks whether startup entries should be created. If they should be created, the solution with the corresponding Twin CAT project must then be selected and the start-up entries are created. 42 Version: 1.2.0 TE131x

## Page 43

Configuration 5.3.3 Data files If data files are available that can be loaded via the target browser, this data can also be filtered from the designed filter set. SVDX file To filter SVDX data, you need to drag and drop the relevant variable from the target browser into the corresponding filter set. If there are several filter sets under a filter plot, the variable can also be dragged into the filter plot. After the drag and drop process, a Scope project is created automatically that contains both the raw signal (green) and the filtered signal (blue) that is dependent on the filter set. 5.4 Saving projects and filters Distinction is made between a project and individual filter sets when saving. Saving a project There is a choice of various options for saving the entire project with all filter plots and sets. Firstly via the diskette icon in the Visual Studio® toolbar and secondly via the File menu. TE131x Version: 1.2.0 43

## Page 44

Configuration Saving and loading individual filter sets For cross-project work it is useful to be able to save and load individual filter sets. To do this, open the context menu of the filter set, where you will find the item Save Filter Set. 44 Version: 1.2.0 TE131x

## Page 45

Configuration Fig. 1: If you wish to load a filter set from a folder structure in the engineering system, you can select Open Filter Set via the context menu on the next higher hierarchical level, the filter plot. TE131x Version: 1.2.0 45

## Page 46

Configuration 46 Version: 1.2.0 TE131x

## Page 47

Appendix 6 Appendix 6.1 FAQ In this section frequently asked questions are answered to make your work with the Twin CAT 3 Filter Designer easier. If you have further questions, please contact our support (-157). 1. Which firmware versions of the I/Os are necessary to work there with the Filter Designer or to display the so-called Filter Tab? [} 47] 2. Are open source software components used in Twin CAT Measurement products? [} 47] Which firmware versions of the I/Os are necessary to work there with the Filter Designer or to display the so-called Filter Tab? Download of filter coefficients from Filter Designer to I/Os is supported from the following versions: ELM3002: from FW02 and Rev 0017 ELM3004: from FW04 and Rev 0018 ELM3102: from FW02 and Rev 0017 ELM3104: from FW02 and Rev 0017 ELM3148: from FW02 and Rev 0016 ELM3502: from FW01 and Rev 0016 ELM3504: from FW01 and Rev 0016 ELM3602: from FW03 and Rev 0017 ELM3604: from FW03 and Rev 0017 EL3751: from FW11 and Rev 0022 The upload of the already set filters has been implemented a bit later and is supported from the following firmware versions onwards: ELM3002: from FW04 ELM3004: from FW06 ELM3102: from FW04 ELM3104: from FW04 ELM3148: from FW02 ELM3502: from FW03 ELM3504: from FW03 ELM3602: from FW06 ELM3604: from FW06 EL3751: from FW13 All upcoming terminals in the ELM range will support this function from the beginning. Are open source software components used in Twin CAT Measurement products? Yes, various open source components are used. You can find a list of them including license conditions in the directory …\Twin CAT\Functions\Twin CAT Measurement\Legal. TE131x Version: 1.2.0 47

## Page 48

Appendix 6.2 Support and Service Beckhoff and their partners around the world offer comprehensive support and service, making available fast and competent assistance with all questions related to Beckhoff products and system solutions. Download finder Our download finder contains all the files that we offer you for downloading. You will find application reports, technical documentation, technical drawings, configuration files and much more. The downloads are available in various formats. Beckhoff's branch offices and representatives Please contact your Beckhoff branch office or representative for local support and service on Beckhoff products! The addresses of Beckhoff's branch offices and representatives round the world can be found on our internet page: www.beckhoff.com You will also find further documentation for Beckhoff components there. Beckhoff Support Support offers you comprehensive technical assistance, helping you not only with the application of individual Beckhoff products, but also with other, wide-ranging services: • support • design, programming and commissioning of complex automation systems • and extensive training program for Beckhoff system components Hotline: +49 5246 963-157 e-mail: support@beckhoff.com Beckhoff Service The Beckhoff Service Center supports you in all matters of after-sales service: • on-site service • repair service • spare parts service • hotline service Hotline: +49 5246 963-460 e-mail: service@beckhoff.com Beckhoff Headquarters Beckhoff Automation Gmb H & Co. KG Huelshorstweg 20 33415 Verl Germany Phone: +49 5246 963-0 e-mail: info@beckhoff.com web: www.beckhoff.com 48 Version: 1.2.0 TE131x

## Page 49

Trademark statements Beckhoff®, Twin CAT®, Twin CAT/BSD®, TC/BSD®, Ether CAT®, Ether CAT G®, Ether CAT G10®, Ether CAT P®, Safety over Ether CAT®, Twin SAFE®, XFC®, XTS® and XPlanar® are registered trademarks of and licensed by Beckhoff Automation Gmb H. Third-party trademark statements Microsoft, Microsoft Azure, Microsoft Edge, Power Shell, Visual Studio, Windows and Xbox are trademarks of the Microsoft group of companies.

## Page 50

More Information: www.beckhoff.com/te1310 Beckhoff Automation Gmb H & Co. KG Hülshorstweg 20 33415 Verl Germany Phone: +49 5246 9630 info@beckhoff.com www.beckhoff.com
