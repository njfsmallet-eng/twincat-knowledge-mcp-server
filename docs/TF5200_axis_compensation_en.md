---
title: "TF5200_axis_compensation_en"
product: "TF5200"
category: "Motion_Control"
tags: ["NC"]
language: "EN"
document_type: "Manual"
version: "1.51"
source_pdf: "https://download.beckhoff.com/download/Document/automation/twincat3/TF5200_axis_compensation_en.pdf"
release_date: "2025-06-10"
---
Functional description | EN TF5200 | Twin CAT 3 CNC Axis compensation 6/10/2025 | Version: 1.51
## Page 3

Notes on the documentation Notes on the documentation This description is only intended for the use of trained specialists in control and automation engineering who are familiar with the applicable national standards. It is essential that the documentation and the following notes and explanations are followed when installing and commissioning the components. It is the duty of the technical personnel to use the documentation published at the respective time of each installation and commissioning. The responsible staff must ensure that the application or use of the products described satisfy all the requirements for safety, including all the relevant laws, regulations, guidelines and standards. Disclaimer The documentation has been prepared with care. The products described are, however, constantly under development. We reserve the right to revise and change the documentation at any time and without prior announcement. No claims for the modification of products that have already been supplied may be made on the basis of the data, diagrams and descriptions in this documentation. Trademarks Beckhoff®, Twin CAT®, Twin CAT/BSD®, TC/BSD®, Ether CAT®, Ether CAT G®, Ether CAT G10®, Ether CAT P®, Safety over Ether CAT®, Twin SAFE®, XFC®, XTS® and XPlanar® are registered trademarks of and licensed by Beckhoff Automation Gmb H. Other designations used in this publication may be trademarks whose use by third parties for their own purposes could violate the rights of the owners. Patent Pending The Ether CAT technology is patent protected, in particular by the following applications and patents: EP1590927, EP1789857, EP1456722, EP2137893, DE102015105702 with corresponding applications or registrations in various other countries. Ether CAT® is registered trademark and patented technology, licensed by Beckhoff Automation Gmb H, Germany Copyright © Beckhoff Automation Gmb H & Co. KG, Germany. The reproduction, distribution and utilisation of this document as well as the communication of its contents to others without express authorisation are prohibited. Offenders will be held liable for the payment of damages. All rights reserved in the event of the grant of a patent, utility model or design. TF5200 | Twin CAT 3 CNC Version: 1.51 3 Axis compensation
## Page 4

General and safety instructions General and safety instructions Icons used and their meanings This documentation uses the following icons next to the safety instruction and the associated text. Please read the (safety) instructions carefully and comply with them at all times. Icons in explanatory text 1. Indicates an action. ð Indicates an action statement. DANGER Acute danger to life! If you fail to comply with the safety instruction next to this icon, there is immediate danger to human life and health. CAUTION Personal injury and damage to machines! If you fail to comply with the safety instruction next to this icon, it may result in personal injury or damage to machines. NOTICE Restriction or error This icon describes restrictions or warns of errors. Tips and other notes This icon indicates information to assist in general understanding or to provide additional informa- tion. General example Example that clarifies the text. NC programming example Programming example (complete NC program or program sequence) of the described function or NC com- mand. Specific version information Optional or restricted function. The availability of this function depends on the configuration and the scope of the version. 4 Version: 1.51 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 5

Table of contents Table of contents Notes on the documentation.................................................................................................................... 3 General and safety instructions.............................................................................................................. 4 1 Overview.................................................................................................................................................... 7 2 Backlash compensation........................................................................................................................... 8 2.1 Overview........................................................................................................................................... 8 2.2 Description........................................................................................................................................ 9 2.3 Parameterisation............................................................................................................................. 11 2.3.1 Overview.......................................................................................................................... 11 2.3.2 Description....................................................................................................................... 11 2.3.3 CNC objects..................................................................................................................... 11 2.4 Error messages............................................................................................................................... 13 2.5 Parameterisation example.............................................................................................................. 13 3 Temperature compensation................................................................................................................... 14 3.1 Overview......................................................................................................................................... 14 3.2 Parameterisation............................................................................................................................. 16 3.2.1 Overview.......................................................................................................................... 20 3.2.2 Description....................................................................................................................... 20 3.2.3 CNC objects..................................................................................................................... 21 3.3 Example.......................................................................................................................................... 24 4 Axis compensations with compensation value lists........................................................................... 25 4.1 Compensation value lists................................................................................................................ 25 4.2 Cross compensation....................................................................................................................... 28 4.2.1 Parameter........................................................................................................................ 30 4.2.2 Example of a compensation value list.............................................................................. 35 4.2.3 Error messages................................................................................................................ 37 4.3 Plane compensation........................................................................................................................ 38 4.3.1 Parameter........................................................................................................................ 41 4.3.2 Examples of compensation value lists............................................................................. 49 4.3.3 Error messages................................................................................................................ 51 4.4 Leadscrew error compensation....................................................................................................... 52 4.4.1 Parameter........................................................................................................................ 54 4.4.2 Example - Non-equidistant bilateral SSFK....................................................................... 62 4.4.3 Error messages................................................................................................................ 63 4.5 Friction compensation..................................................................................................................... 64 4.5.1 Types of friction and compensation................................................................................. 64 4.5.2 Determine the parameters for the compensation value list.............................................. 74 4.5.3 Effect of friction compensation......................................................................................... 75 4.5.4 Parameter........................................................................................................................ 75 4.6 Crosstalk compensation.................................................................................................................. 80 4.6.1 Overview.......................................................................................................................... 83 4.6.2 Parameter........................................................................................................................ 85 4.6.3 Example of a compensation value list.............................................................................. 91 4.6.4 Error messages................................................................................................................ 92 TF5200 | Twin CAT 3 CNC Version: 5 Axis compensation
## Page 6

Table of contents 5 Other configuration options for axis compensation ........................................................................... 94 5.1 Selecting/deselecting axis compensation in the NC program......................................................... 94 5.2 Checking the states of axis compensation in the NC program....................................................... 95 5.3 Monitoring of effectiveness of axis compensations in automatic mode.......................................... 97 6 Support and Service............................................................................................................................... 99 Index....................................................................................................................................................... 100 6 Version: TF5200 | Twin CAT 3 CNC Axis compensation
## Page 7

Overview 1 Overview Task Axis compensations rectify inaccuracies in tool guidance caused by mechanical errors such as backlash, errors in spindle pitch or temperature fluctuations. A distinction is made between 7 programming modes: • Backlash compensation • Temperature compensation • Cross compensation • Plane compensation • Leadscrew error compensation • Friction compensation • Crosstalk compensation Characteristics In general, each axis compensation can be: • activated for all axis types, and • used with all drive types The conditions required for their effectiveness are described in the related sections on compensation types. Parameterisation Specific parameters must be configured for each axis compensation in order to activate them. They are described for each compensation type in the section “Parameterisation”. Programming Axis compensations can be activated and deactivated in the NC program with the command X[COMP…]. Mandatory note on references to other documents For the sake of clarity, links to other documents and parameters are abbreviated, e.g. [PROG] for the Programming Manual or P-AXIS-00001 for an axis parameter. For technical reasons, these links only function in the Online Help (HTML5, CHM) but not in pdf files since pdfs do not support cross-linking. The friction compensation functionality is described in FCT-C25. TF5200 | Twin CAT 3 CNC Version: 1.51 7 Axis compensation
## Page 8

Backlash compensation 2 Backlash compensation 2.1 Overview Task Backlash compensation has the purpose of compensating for the deviation between the real and calculated actual position of an axis caused by mechanical backlash. Effectiveness Backlash compensation can be activated for all axis types. The effect of backlash can be compensated for all drive types. Parameterisation With regard to backlash compensation, • the type of mechanical backlash P-AXIS-00021 • the amount of mechanical backlash P-AXIS-00103 • the distribution of mechanical backlash P-AXIS-00243 can be parameterised in the axis parameter record [AXIS]. 8 Version: 1.51 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 9

Backlash compensation 2.2 Description Mechanical backlash The play between the • the drive and a moving machine part or • between a sensor and a moving machine part is referred to as mechanical backlash. For a moving machine part, mechanical backlash results in a deviation between the commanded position and the actual position. This especially has an effect when the direction of motion is reversed. A distinction is made between the following kinds of mechanical backlash: • Positive backlash • Negative backlash Positive backlash Positive backlash occurs in systems in which • the measuring system is connected directly to the drive and • the backlash occurs between the drive and the moving mechanical part. When the direction of movement reverses, the measuring system will detect a position change although the machine part is not yet moving due to the backlash. This leads to a situation in which the machine part does not reach the commanded position, but travels too short by the backlash amount because the sensor that indirectly measures the position of the machine part is ahead of the machine part’s actual position. Workpiece table M Encoder Backlash Fig. 1: Positive backlash TF5200 | Twin CAT 3 CNC Version: 1.51 9 Axis compensation
## Page 10

Backlash compensation Negative backlash Negative backlash is encountered in systems in which the backlash occurs between the moving machine part and the measuring system. When the direction is reversed, the machine part directly moves in the new direction without the measuring system detecting a position change. In this case, the machine part moves further by the backlash amount than is required by the command because the sensor that directly measures the position of the machine part lags behind the position of the machine part. Workpiece table Backlash Encoder M Fig. 2: Negative backlash Backlash compensation The size of the backlash P-AXIS-00103 during on position control is taken into consideration depending on the type of mechanical backlash P-AXIS-00021 and acts on the calculation of the command variables. The display of the absolute command position or actual position of the moving machine part does not include the compensation values and therefore represents the position of an ideal machine. Effectiveness When backlash compensation is selected, it is active directly after controller start-up, regardless of whether homing has taken place [FCT-M1//Description]. The algorithm compensates for the backlash in the 1st cycle of the path motion. A large backlash can cause strong excitation in the machine. To prevent this, the backlash can be distributed over several position control cycles P-AXIS-00243. 10 Version: 1.51 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 11

Backlash compensation 2.3 Parameterisation 2.3.1 Overview ID Parameter Description P-AXIS-00021 anwahl_losekomp Selection and type of mechanical backlash P-AXIS-00103 lose Size of mechanical backlash P-AXIS-00243 n_backlash_cyc Distribution of mechanical backlash 2.3.2 Description P-AXIS-00021 Selection of backlash compensation Description The selection of backlash compensation is done using this parameter. The type of backlash (the backlash between the table and the drive or the backlash between the drive and the measuring system) depends on the mathematical sign of P- AXIS-00103 (getriebe[i].lose). Parameter lr_param.anwahl_losekomp Data type UNS16 Data range 0: No backlash compensation 1: Last axis motion occurred in pos. direction. 2: Last axis motion occurred in neg. direction. Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0 drive types. ---- Remarks P-AXIS-00103 Size of backlash Description The parameter defines the size of backlash. Parameter getriebe[i].lose Data type SGN16 Data range SGN16 range 0 < backlash: backlash betw. drive and slide Axis types T, R, S Dimension T: 0.1µm R,S: 0.0001 ° Default value 0 drive types. ---- Remarks 2.3.3 CNC objects Name BC::actual backlash Description Backlash compensation: current effective compensation offset Task GEO (Port 551) Index group 0x120300 Index offset 0x<A >0093 ID Data type SGN32 Length 4 Attributes read Unit [-] Remarks TF5200 | Twin CAT 3 CNC Version: 1.51 11 Axis compensation
## Page 12

Backlash compensation Name BC::conf. backlash Description Backlash compensation: Size of backlash This value is defined in P-AXIS-00103 [} 11]. Task GEO (Port 551) Index group 0x120300 Index offset 0x<A >00AF ID Data type SGN32 Length 4 Attributes read Unit [Incr.] Remarks Name BC::delta backlash Description Backlash compensation: Change in compensation value in current cycle Task GEO (Port 551) Index group 0x120300 Index offset 0x<A >0095 ID Data type SGN32 Length 4 Attributes read Unit [-] Remarks Name BC::sum backlash Description Backlash compensation: Compensation value at the current position without filter Task GEO (Port 551) Index group 0x120300 Index offset 0x<A >0094 ID Data type SGN32 Length 4 Attributes read Unit [-] Remarks 12 Version: 1.51 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 13

Backlash compensation 2.4 Error messages Errors in the configuration of batch compensation result in deactivation of the function for the axis affected and an error message (warning) is output: P-ERR-110392 2.5 Parameterisation example Excerpt from the axis parameter list getriebe[0].lose 1000 #0,1 µm backlash lr_param.anwahl_losekomp 1 #Positive direction lr_param. n_backlash_cyc 10 #Number of filter cycles TF5200 | Twin CAT 3 CNC Version: 1.51 13 Axis compensation
## Page 14

Temperature compensation 3 Temperature compensation 3.1 Overview Deformation and its effect Temperature changes cause an expansion or contraction of machine parts. Deformations cause offsets in the axis positions that are not detected by the machine's position measuring system and lead to inaccuracies in the finished workpiece. Deviation Linear approximation of error curve Measured error curve at temperature T Axis position Fig. 3: Temperature-dependent falsification of the axis position 14 Version: 1.51 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 15

Temperature compensation Compensation Temperature compensation provides a function to correct the command variable of the axis depending on the current temperature and axis position. The compensation values are determined according to the following equation: Δs (T,s) = offset (T) + coefficient(T) * [s-s ] 0 0 where: s = current position of the axis T = current reference temperature S = reference position of the axis 0 Offset (T) = temperature-dependent deviation from reference position 0 Coefficient = temperature-dependent ratio of deviation to distance from reference position Deviation Coefficient Shift at reference position Reference position Axis position Fig. 4: Parameter of temperature compensation for a temperature T Effectiveness The temperature compensation is effective if: • it was activated for the axis and • the axis is homed. TF5200 | Twin CAT 3 CNC Version: 1.51 15 Axis compensation
## Page 16

Temperature compensation 3.2 Parameterisation Activate Temperature compensation is activated in the axis machine data record [AXIS] of the required axis using P- AXIS-00271: kopf.achs_nr 1 # # temperature compensation on/off lr_param.temp_comp 1 Compensation can also be activated using a write access to the CNC object via the GEO task: TEMPC::is_active Index group = 0x120300, Index offset = 0x10041 Reference measurement Before specifying the parameters of temperature compensation, a reference measurement must first be carried out using an external position measuring system. It determines the deviations of the axis positions between the internal and external measuring system at different temperatures. Deviation T3 T2 T1 Reference position Axis position Shift "Virtual" intersection of the linear approximation Fig. 5: Reference measurement at different temperatures 16 Version: 1.51 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 17

Temperature compensation Determine parameters The parameters reference position, offset and coefficient can be taken from the measurement curves. The values at a given temperature can be set later from the curves. Temperatures that are not measured can be interpolated or extrapolated from the measured temperature curves. If the virtual intersection of the approximated linear curves is chosen as the reference position, the offset is independent of temperature. In this case, only the coefficient must be reset for different temperatures. Influence of temperature The individual parameters can be set by the PLC depending on the current temperature. To do this, a corresponding temperature signal (sensor) is transmitted to the PLC which then derives the parameters from it. Explicit activation in NC program lr_param.temp_comp_manual_activation 0 • 0 (default): The CNC activates temperature compensation automatically as soon as the required preconditions are met (e.g. the axis is homed). • 1: Temperature compensation must be activated manually in the NC program using the COMP command (see Section “Selecting and deselecting axis compensations in the NC program [} 94]"). Compensation is deselected: • at the end of the NC program • at CNC reset and • on release of the axis. Change parameters Each of the parameters can be changed by downloading the axis list: kopf.achs_nr 1 # # temperature compensation on/off lr_param.temp_comp 1 # reference position lr_param.temp_comp_position_0 100 [0.1µm] # reference offset lr_param.temp_comp_offset_0 40 [0.1µm] lr_param.temp_comp_coefficient 4000 [µm/m] # TF5200 | Twin CAT 3 CNC Version: 1.51 17 Axis compensation
## Page 18

Temperature compensation In addition to the download option, there is also the option of writing and reading the parameters via direct access to the GEO task via CNC objects. For example, the first axis can be addressed via the following index group and index offset: Fig. 6: Access to CNC objects of temperature compensation Monitoring and coupling/decoupling The compensation values are recalculated for each interpolation cycle. If the change per cycle exceeds the given maximum axis acceleration, this change can be output filtered over multiple cycles. For this the number of cycles of the sin² filter can be defined in the axis parameter list. By default, this is set to one cycle. kopf.achs_nr 1 # # Cycle of the sin² filter lr_param.temp_comp_n_cycles 20 18 Version: 1.51 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 19

Temperature compensation Fig. 7: Deactivating compensation values with a sin² filter over 20 cycles by deactivating temperature compensation temporarily Display the compensation In addition to the download option, there is also the option of writing and reading the parameters via direct access to the CNC objects of the GEO task. For example, the 1st axis can be addressed using the following index group and index offset: TEMPC::is_active Index group = 0x120300, Index offset = 0x10041 TEMPC::is_active Index group = 0x120300, Index offset = 0x10042 Display the axis position When temperature compensation is activated, the normal command and actual positions of the axis are displayed unchanged. The corrections are only calculated and included before output to the drive bus and can therefore be viewed in the position values of the drive bus (dig_cmd_pos, dig_act_pos). TF5200 | Twin CAT 3 CNC Version: 1.51 19 Axis compensation
## Page 20

Temperature compensation 3.2.1 Overview ID Parameter Description P-AXIS-00789 lr_param.crosstalk Activate crosstalk compensation ID Parameter Description P-COMP-00063 kw.crosstalk.master_ax_nr Log. Axis number of the master axis P-COMP-00064 kw.crosstalk.n_cycles Number of cycles for ‘smooth switching’ P-COMP-00065 kw.crosstalk.last_index Last index of compensation value table P-COMP-00066 kw.crosstalk.acceleration Accelerations of the master axis P-COMP-00067 kw.crosstalk.correction Compensation values for the slave axis P-COMP-00073 kw.crosstalk.manual_activation Manual activation 3.2.2 Description P-AXIS-00271 Selection of temperature compensation Description The parameter selects the temperature compensation. Parameter lr_param.temp_comp Data type BOOLEAN Data range 0/1 Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0 Drive types ---- Remarks P-AXIS-00272 Parameterisation of temperature compensation (Basic position) Description The compensation values are approximated by a linear straight line. This straight line is defined by a basic position, an offset at this position and a geometrical pitch. Depending on the temperature, these parameters can be adjusted e.g. by the PLC. Parameter lr_param.temp_comp_position_0 Data type SGN32 Data range MIN(SGN32) < temp_comp_position_0 < MAX(SGN32) Axis types T, R, S Dimension T: 0.1 µm R,S: 0.0001° Default value 0 Drive types ---- Remarks P-AXIS-00273 Parameterisation of temperature compensation (Offset) Description The compensation values are approximated by a linear straight line. This straight line is defined by a basic position, an offset at this position and a geometrical pitch. Depending on the temperature, these parameters can be adjusted e.g. by the PLC. Parameter lr_param.temp_comp_offset_0 Data type SGN32 Data range MIN(SGN32) < temp_comp_offset_0 < MAX(SGN32) Axis types T, R, S Dimension T: 0.1 µm R,S: 0.0001° Default value 0 Drive types ---- 20 Version: 1.51 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 21

Temperature compensation Remarks P-AXIS-00274 Parameterisation of temperature compensation (Geometrical pitch) Description The compensation values are approximated by a straight line. This straight line is defined by a basic position, an offset at this position and a geometrical pitch. Depending on the temperature these parameters can be adjusted e.g. by the PLC. Parameter lr_param.temp_comp_coefficient Data type REAL64 Data range -10000 ≤ temp_comp_coefficient ≤ 10000 Axis types T, R, S Dimension T: µm/m R,S: ---- Default value 0 Drive types ---- Remarks P-AXIS-00275 Distribution of the temperature compensation on several cycles Description The compensation values are recalculated for each interpolation cycle. If the change per cycle exceeds the given maximum axis acceleration, this change can be output filtered over multiple cycles. For this the number of cycles of the sin² filter can be defined in the axis parameter list. Parameter lr_param.temp_comp_n_cycles Data type UNS16 Data range 0 < temp_comp_n_cycles < 20 Axis types T, R, S Dimension T: Number of interpolation cycles R,S: Number of interpolation cycles Default value 0 Drive types ---- Remarks P-AXIS-00482 Manual activation of the temperature compensation Description The CNC turns the temperature compensation on when it is selected in the axis parameter list (P-AXIS-00271) and the required preconditions are met (e.g. the axis is homed). If the parameter is set to 1, the temperature compensation must be manually turned on in the NC program via an NC command (see [PROG//Switching axis compensation on/off in the NC program]). In addition, the compensation is turned off at the end of the NC program, during CNC reset and axis release. Parameter lr_param.temp_comp_manual_activation Data type BOOLEAN Data range 0: Automatic activation (default). 1: Manual activation in NC program. Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0 Drive types ---- Remarks 3.2.3 CNC objects Name TEMPC:: activated TF5200 | Twin CAT 3 CNC Version: 1.51 21 Axis compensation
## Page 22

Temperature compensation Description Temperature compensation: active, activate using P-AXIS-00271 [} 20] Task GEO (Port 551) Index group 0x120300 Index offset 0x<A >0041 ID Data type BOOLEAN Length 1 Attributes read/ write Unit [-] Remarks TRUE/FALSE Name TEMPC::f_is_active Description This object reads whether temperature compensation is activated . This means that all preconditions, such as axis is referenced and all necessary enables are on, must be fulfilled. Task GEO (Port 551) Index group 0x120300 Index offset 0x<A >01D8 ID Data type BOOLEAN Length 1 Attributes read Unit [-] Remarks Name TEMPC::actual_offset Description Temperature compensation: current compensation value Task GEO (Port 551) Index group 0x120300 Index offset 0x<A >0042 ID Data type SGN32 Length 4 Attributes read Unit [Incr.] Remarks Name TEMPC::coefficient Description Temperature compensation: current coefficient See also P-AXIS-00274 [} 21] The temperature compensation values are approximated by a straight line. The straight line is defined by a basic position, an offset at this position and a geometrical pitch. Task GEO (Port 551) Index group 0x120300 Index offset 0x<A >0043 ID Data type REAL64 Length 8 Attributes read/ write Unit [µm/m] Remarks Name TEMPC::offset_0 Description Temperature compensation: Start offset characteristic See also P-AXIS-00273 [} 20] The temperature compensation values are approximated by a straight line. The straight line is defined by a basic position, an offset at this position and a geometrical pitch. Task GEO (Port 551) Index group 0x120300 Index offset 0x<A >0044 ID Data type SGN32 Length 4 Attributes read/ write Unit [0.1 µm] Remarks Name TEMPC::position_0 22 Version: 1.51 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 23

Temperature compensation Description Temperature compensation: Start position characteristic See also P-AXIS-00272 [} 20] The temperature compensation values are approximated by a straight line. The straight line is defined by a basic position, an offset at this position and a geometrical pitch. Task GEO (Port 551) Index group 0x120300 Index offset 0x<A >0045 ID Data type SGN32 Length 4 Attributes read/ write Unit [0.1 µm] Remarks TF5200 | Twin CAT 3 CNC Version: 1.51 23 Axis compensation
## Page 24

Temperature compensation 3.3 Example Initialisation Compensation is activated in the X axis by the following settings: lr_param.temp_comp 1 lr_param.temp_comp_position_0 100 [0.1µm] lr_param.temp_comp_offset_0 40 [0.1µm] lr_param.temp_comp_coefficient 4000 [µm/m] lr_param.temp_comp_n_cycles 20 NC program The following NC program was used for the test: N10: G90 G01 X0 F1000 G04 1 N10 X100 G04 1 N10 X80 G04 1 N10 X50 G04 1 N20 X-200 G04 1 $GOTO [N10] M30 Fig. 8: Logged compensation values dependent on axis position. 24 Version: 1.51 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 25

Axis compensations with compensation value lists 4 Axis compensations with compensation value lists 4.1 Compensation value lists Storing compensation values Data for the compensation processes • Cross compensation • Plane compensation • Leadscrew error compensation • Friction compensation and • crosstalk compensation are stored for each axis in so-called compensation value lists that are loaded when the controller starts up. It is also possible to update the lists at a later date. It is possible to activate all the compensation processes for an axis simultaneously. When you use leadscrew error compensation, it is recommended to include a possible backlash dir- ectly in the compensation table of the leadscrew error compensation (double-sided compensation P-COMP-00021). As of CNC Build V3.1.3079.06 you can adjust the size of the compensation value lists. Providing the compensation value lists The following entries must be present in the start-up description [STUP] in order to signal the compensation table to the controller: Variable name Type Meaning zahl_kw UNS16 Number of offset value lists achs_kw[i] String Name of datafile achs_kw_log_ax_nr[i] UNS16 Logical number of axis for which the compensation value list is valid. NOTICE If the compensation value list is configured by the Twin CAT System Manager, these entries are assigned automatically in the start-up description. TF5200 | Twin CAT 3 CNC Version: 1.51 25 Axis compensation
## Page 26

Axis compensations with compensation value lists Excerpt from the start-up list hochlauf.lis: : zahl_kw 3 # achs_kw_log_ax_nr[0] 1 achs_kw[0] ..\listen\achskw1.lis # achs_kw_log_ax_nr[1] 2 achs_kw[1] ..\listen\achskw2.lis # achs_kw_log_ax_nr[2] 6 achs_kw[2] ..\listen\achskw6.lis : Structure of the compensation value list The compensation value list consists of • a list header containing general data and • the body of the list where the compensation algorithms are configured and containing the actual compensation tables. List header The list header is identified in the list by the structure variable kopf . It contains the following elements: Variable name Type Meaning kopf.achs_nr UNS16 Logical number of compensation value list kopf.log_achs_name String Name of the axis, which is only used for diagnostic purposes NOTICE If the compensation value list is configured by the Twin CAT System Manager, these entries are made auto- matically in the compensation value list. 26 Version: 1.51 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 27

Axis compensations with compensation value lists Body of the list The list body contains general data and the compensation tables. The entries in the list body are identified by the structure variable kw and frict_comp . It contains the following substructures for each of the compensation processes: Variable name Meaning kw.crosscomp. Data structure for cross compensation kw.crosscomp2 Data structure for plane compensation (2-dimensional cross compensation) kw.ssfk. Data structure for leadscrew error compensation kw.crosstalk. Data structure for cross compensation frict_comp Data structure for friction compensation Updating the compensation table The compensation table can be updated while the controller is running, provided the conditions for the effectiveness of a compensation are fulfilled. NOTICE After start-up, updating or re-initialisation, it is “almost” not permissible to command a rapid program start or exchange an axis without requesting axis positions. First, the NC channel must be synchronised in relation to axis positions. TF5200 | Twin CAT 3 CNC Version: 1.51 27 Axis compensation
## Page 28

Axis compensations with compensation value lists 4.2 Cross compensation Cross compensation permits the compensation of rectangularity errors or errors that arise due to deflection of the axis. Compensation process Cross compensation (also called sag compensation) permits the compensation of an axis position depending on the command position of another axis. The axis whose command positions influences the compensation value is called the master axis. The axis for which compensation is active is called the slave axis. A master axis can also be the salve axis of another master axis. Cross compensation data is specified in the compensation value list of the slave axis . Z Y X Fig. 9: Application example for cross compensation (Y: Master, Z: Slave). 28 Version: 1.51 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 29

Axis compensations with compensation value lists Properties • A master axis has one or several slave axes. • A slave has only one master axis. • Cross compensation can also be used for the master and slave axes of a gantry combination. • A compensation value can be specified for each interpolation point. • Interpolation between interpolation points is linear. • Cross compensation is available for all drive types. • Compensations can only be viewed in the positions directly output to the drive (not in the normal display data) since compensation takes place outside normal calculations. • As of CNC Build V3.1.3079.06 you can adjust the size of the compensation table. The parameter P- COMP-00060 [} 32] defines the maximum number of table entries. The actual number of entries used by P-COMP-00004 [} 32] Effectiveness Cross compensation is only effective if all the following conditions are fulfilled: • The function was activated for the slave axis. • The compensation value table was provided. • Master and slave axes are linear axes. As of CNC Build v263.1504, cross compensation can also be used for rotary axes or spindles. • The master axis was referenced. Therefore there is no need to reference the slave axis. TF5200 | Twin CAT 3 CNC Version: 1.51 29 Axis compensation
## Page 30

Axis compensations with compensation value lists 4.2.1 Parameter 4.2.1.1 Overview Activation Cross compensation is activated in the axis machine data record of the slave axis by P-AXIS-00047: Variable name Type Meaning lr_param.crosscomp BOOLEAN 0: no cross compensation 1: Cross compensation active Excerpt from the axis parameter list: : lr_param.crosscomp 1 : Cross compensation can also be used for a gantry axis group. A compensation value table must then be specified for each individual axis in the gantry combination (cross compensation slave). Compensation value tables can therefore have different settings for each gantry axis. Activating/deactivating Cross compensation (ON if master axis is referenced and compensation is activated) can be switched on or off at any time when the slave axis is at standstill. The slave axis command positions displayed are offset with the offset values. Filter: When the master axis is referenced, inconsistencies may occur when compensation values are calculated for a moved slave axis. These inconsistencies can be smoothed by using a sin2 filter. The parameter P- COMP-00026 (n_cycles) switches the filter order to activate it. 30 Version: 1.51 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 31

Axis compensations with compensation value lists Management data of the cross compensation table General data of the list body is entered in the structure kw.crosscomp..*. It contains the following elements. Management data elements Variable name Type Meaning unit BOOLEAN Unit of the length entries: 0: Encoder increments 1: metric (in 0.1 µm) last_index SGN32 Last valid index in the slave axis table. As of CNC Build V3.1.3079.06 the maximum possible of table entries can be defined in P-COMP-00060 [} 32]. In previous Builds the default value is 1000. The table always starts with index 0 master_ax_nr UNS16 Axis number of the master axis; its command position acts as the input variable of the compensation table. n_cycles UNS16 Number of cycles of sin2 filter. manual_activation BOOLEAN 0: (Default) The CNC activates cross compensation automatically as soon as the required conditions are met (e.g. the master axis is referenced). 1: Cross compensation must be activated explicitly in the NC program by the COMP command (see section “Selecting/deselecting axis compensations in the NC program”) [} 94]. Compensation is deactivated at the end of the NC program, when the CNC is reset or when the axis is released. Compensation values for cross compensation The corresponding compensation value of the slave axis is entered in the table kw.crosscomp.table[i].* for every interpolation point. The compensation table is valid for positive and negative directions of motion. Compensation value table Variable name Type Meaning table[i].setpoint SGN32 Interpolation point of master axis for which the slave axis must be compensated. table[j][i].correction SGN32 Relative compensation value for the salve axis at interpolation point i Special feature for rotary master axis As of CNC Build v263.1504, cross compensation can also be used for rotary axes or spindles. A modulo calculation of the axis position is carried out in the position controller for these axis types. If a cross compensation master axis is a modulo axis, a "modulo transition" also takes place in the compensation table in the modulo transition of the axis position of this master axis. To prevent a jump from occurring at this point of the compensation value process of the slave axis, the same compensation value must be specified in the compensation table at the modulo transition. 4.2.1.2 Description P-AXIS-00047 Activation of cross compensation Description This parameter activates the cross compensation. Parameter lr_param.crosscomp Data type BOOLEAN TF5200 | Twin CAT 3 CNC Version: 1.51 31 Axis compensation
## Page 32

Axis compensations with compensation value lists Data range 0/1 Axis types T Dimension T: ---- Default value 0 Drive types ---- Remarks P-COMP-00060 Maximum number of table entries for cross compensation Description This cross compensation parameter (FCT-C5 [} 28]) saves the memory space required for a particular number of table entries. The size of the actually used compensation table is defined by `last_index` (P- COMP-00004) and `last_index` must be smaller than `max_points`. Parameter kw.crosscomp.max_points Data type UNS32 Data range 0 <= P-COMP-00060 Axis types T, R, S Dimension T: ---- R,S: ---- Default value 1001 Remarks The parameter value can no longer be changed after start-up or after lists are reloaded. Otherwise error ID 110639 is output. If P-COMP-00060 is not specified (or assigned the value 0), the default value is assigned to P-COMP-00060 for downward compatibility reasons. To avoid the default assignment, memory can be saved for an axis that does not use cross compensation [} 28] by assigning the value 1 to P-COMP-00060. This parameter is available as of CNC Build V3.3079.06 P-COMP-00003 Unit of the length entries Description The parameter defines the unit to be used for the length entries of compensation values. Parameter kw.crosscomp.unit Data type BOOLEAN Data range 0: Encoder increments 1: Metric (in 0.1 µm) Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0 Remarks P-COMP-00004 Last index of compensation value table Description This parameter determines the last valid index in the table of the master axis. The table always starts with index 0 Parameter kw.crosscomp.last_index Data type SGN32 Data range 0 ≤ last_index < P-COMP-00060 [} 32] Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0 32 Version: 1.51 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 33

Axis compensations with compensation value lists Remarks P-COMP-00060 [} 32] is available as of Build V3.1.3079.06. The upper limit in previous CNC versions is 1000. P-COMP-00005 Logical axis number of the master axis Description This parameter determines the logical number of the master axis whose command position is used to calculate the input variable of the compensation value table of the slave axis. Parameter kw.crosscomp.master_ax_nr Data type UNS16 Data range 1 ≤ master_ax_nr ≤ MAX (UNS16) Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0 Remarks P-COMP-00026 Number of cycles for ‘smooth switching’ Description This parameter determines the number of cycles for which cross compensation is activated/deactivated smoothly. Parameter kw.crosscomp.n_cycles Data type UNS16 Data range 0 ≤ n_cycles ≤ 20 (maximum number of cycles for which cross compensation is activated/deactivated, application-specific) Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0 Remarks P-COMP-00029 Manual activation Description Cross compensation is automatically activated by the CNC if it selected in the axis parameters (P-AXIS-00047) and the required conditions are met (e.g. axis is homed). If the parameter is set to the value 1, cross compensation must be activated explicitly by an NC command (see [PROG//Selecting/deselecting axis compensations in the NC program]. In addition, compensation is deselected at the end of the NC program, at CNC reset and on axis release. Parameter kw.crosscomp.manual_activation Data type BOOLEAN Data range 0: Automatic activation 1: Manual activation in NC program Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0 Remarks P-COMP-00006 Interpolation point of the master axis Description This parameter determines the interpolation points of the master axis on which the slave axis has to be corrected. Parameter kw.crosscomp.table[i].setpoint Data type SGN32 Data range MIN(SGN32) ≤ setpoint < MAX(SGN32) Axis types T, R, S TF5200 | Twin CAT 3 CNC Version: 1.51 33 Axis compensation
## Page 34

Axis compensations with compensation value lists Dimension T: 0.1 µm or increments R,S: 0.0001° or increments Default value 0 Remarks P-COMP-00007 Compensation values for the slave axis Description This parameter determines the relative compensation values for the slave axis at interpolation points 'i'. Parameter kw.crosscomp.table[i].correction Data type SGN32 Data range MIN(SGN32) ≤ correction < MAX(SGN32) Axis types T, R, S Dimension T: 0.1 µm or increments R,S: 0.0001° or increments Default value 0 Remarks 34 Version: 1.51 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 35

Axis compensations with compensation value lists 4.2.1.3 CNC objects Name CROSSC::f_is_active Description Cross compensation: active, activate using Description [} 31] This means that all preconditions must be met, such as the axis is homed and all necessary enables are on. Task GEO (Port 551) Index group 0x120300 Index offset 0x<A >004F ID Data type BOOLEAN Length 1 Attributes read Unit [-] Remarks Name CROSSC::activated Description This object reads whether cross compensation is activated via P-AXIS-00047 [} 31]. Task GEO (Port 551) Index group 0x120300 Index offset 0x<A >01D6 ID Data type BOOLEAN Length 1 Attributes read Unit [-] Remarks Name CROSSC::actual_offset Description Cross compensation: current effective offset Task GEO (Port 551) Index group 0x120300 Index offset 0x<A >0035 ID Data type SGN32 Length 4 Attributes read Unit [Incr.] Remarks Name CROSSC::delta_offset Description Cross compensation: change in compensation value compared to previous cycle Task GEO (Port 551) Index group 0x120300 Index offset 0x<A >0034 ID Data type SGN32 Length 4 Attributes read Unit [Incr.] Remarks 4.2.2 Example of a compensation value list Example of a compensation value list for cross compensation # **************************************** # Axis compensation data for Z-axis # **************************************** kopf.achs_nr 3 kopf.log_achs_name Z kw.crosscomp.last_index 99 /*Last valid index of the table*/ kw.crosscomp.master_ax_nr 1 /*Log. ax. number of the master axis*/ kw.crosscomp.unit 1 /*0:Incr. 1:Metric in 0.1 µm*/ kw.crosscomp.n_cycles 20 # kw.crosscomp.table[0].setpoint 10735 kw.crosscomp.table[0].correction 3 kw.crosscomp.table[1].setpoint 11523 TF5200 | Twin CAT 3 CNC Version: 1.51 35 Axis compensation
## Page 36

Axis compensations with compensation value lists kw.crosscomp.table[1].correction 5 : : kw.crosscomp.table[99].setpoint 10000000 /*at 1000 mm of axis 3*/ kw.crosscomp.table[99].correction 1000 /*corr. of 0.1 mm for axis 1*/ 36 Version: 1.51 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 37

Axis compensations with compensation value lists 4.2.3 Error messages Errors in the configuration of the cross compensation result in deactivation of the function for the affected axis and to the output of an error message (warning message). The following error messages then appear: • ID 110639 • ID 70242 • ID 70244 • ID 70245 • ID 70246 • ID 70247 • ID 70248 • ID 70249 • ID 70250 • ID 70432 TF5200 | Twin CAT 3 CNC Version: 1.51 37 Axis compensation
## Page 38

Axis compensations with compensation value lists 4.3 Plane compensation With plane compensation, axis misalignments can be compensated for as a function of the position of two master axes. One application case, for example, is the compensation of the Z axis depending on X and Y. Compensation process Plane compensation allows the compensation of an axis position depending on the command positions of 2 axes. The two axes whose command positions influence the compensation value are called master axes. The axis for which compensation is active is called the slave axis. One of the master axes can also be a slave axis itself. Cross compensation data is specified in the compensation value list of the slave axis . Correction list Actual position Master axis 1 Command position Calculation of compensation Slave axis value Master axis 2 Fig. 10: Schematic of the compensation value calculation for plane compensation Characteristics • The two master axes form a 2-axis coordinate system; in the simplest case it is the X-Y plane (master axis 1 = X axis, master axis 2 = Y axis). • This coordinate system is divided into squares or rectangles like a chessboard. • The edge length of the squares or the edge lengths of the rectangles can be parameterised. • The corners of the squares or rectangles form the interpolation points of the table (see figure below). • A compensation value can be specified for each interpolation point. • Interpolation between interpolation points is linear (see 2nd figure below). • Outside the table, the compensation values at the edge of the table remain effective. • As of CNC Build V3.1.3079.06 you can adjust the size of the compensation table. The maximum number of table entries can be set by P-COMP-00061 [} 44] and The actual number of entries used is specified by P-COMP-00010 [} 45] and P-COMP-00011 [} 45]. 38 Version: 1.51 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 39

Axis compensations with compensation value lists Compensation value Master 2 Master 1 Fig. 11: Specify compensation values at the interpolation points TF5200 | Twin CAT 3 CNC Version: 1.51 39 Axis compensation
## Page 40

Axis compensations with compensation value lists 40 35 30 25 20 Compensation value 15 10 5 0 40 Version: 1.51 TF5200 | Twin CAT 3 CNC Axis compensation eulav noitasnepmo C Y X Fig. 12: Linear interpolation between the 4 interpolation points of a square Effectiveness Plane compensation is only effective if all the following conditions are fulfilled: • The function was activated for the slave axis. • The compensation value table was provided. • Master and slave axes are linear axes. As of CNC Build v263.1504, plane compensation can also be used for rotary axes or spindles. • Master axes have an absolute measuring system or were referenced.
## Page 41

Axis compensations with compensation value lists 4.3.1 Parameter 4.3.1.1 Overview Activation Plane compensation is activated in the axis machine record of the slave axis by P-AXIS-00174: Variable name Type Meaning lr_param.crosscomp2 BOOLEAN 0: no plane compensation 1: Plane compensation active Excerpt from the axis parameter list: : lr_param.crosscomp2 1 : Activating/deactivating Plane compensation (ON if master axes are referenced and compensation is activated) can be switched on or off at any time when the slave axis is at standstill. The slave axis command positions displayed are offset with the offset values. Filter: When master axes are referenced, inconsistencies may occur when compensation values are calculated for a moved slave axis. These inconsistencies can be smoothed by using a sin2 filter. The parameter P- COMP-00027 [} 47] (n_cycles) switches the filter order to activate it. Special feature for rotary master axes As of CNC Build v263.1504, plane compensation can also be used for rotary axes or spindles. A modulo calculation of the axis position is carried out in the position controller for these axis types. If a plane compensation master axis is a modulo axis, a "modulo transition" also takes place in the compensation table in the modulo transition of the axis position of this master axis. To prevent a jump from occurring at this point of the compensation value process of the slave axis, the same compensation value must be specified in the compensation table at the modulo transition. TF5200 | Twin CAT 3 CNC Version: 1.51 41 Axis compensation
## Page 42

Axis compensations with compensation value lists Management data of the plane compensation table The general data of the list body parameterise the axes involved, the limits of the compensation range, etc. General data is entered in the structure kw.crosscomp2.*. It contains the following elements. Management data elements Variable name Type Meaning unit BOOLEAN Unit of the length entries: 0: Encoder increments 1: metric (in 0.1 µm) grid STRING Type of interpolation point sample grid: QUADRATIC: Identical grid structure, interval for both master axes RECTANGULAR: Different grid structure, interval1 and interval2 for both master axes interval UNS32 Interval between 2 interpolation points in 0.1 µm for the two master axes (grid = QUADRATIC) interval1 UNS32 Interval of the first master axis between 2 interpolation points in 0.1 µm (grid = RECTANGULAR) interval2 UNS32 Interval of 2nd master axis between 2 interpolation points in 0.1 µm (grid = RECTANGULAR) last_index_master1 SGN32 Last valid index in the table for master axis 1 (see Limits of compensation table [} 42]). The table always starts with index 0 last_index_master2 SGN32 Last valid index in the table for master axis 2 (see Limits of compensation table [} 42]). The table always starts with index 0 start_position_master1 SGN32 Position of master axis 1 at which the compensation table starts start_position_master2 SGN32 Position of master axis 2 at which the compensation table starts master1_ax_nr UNS16 Log. axis number of master axis 1 master2_ax_nr UNS16 Log. axis number of master axis 2 n_cycles UNS16 Number of cycles of sin2 filter. manual_activation BOOLEAN 0: Default: The CNC activates plane compensation automatically as soon as the required conditions are met (e.g. the master axes are referenced) 1: Plane compensation must be activated explicitly in the NC program by the COMP command (see section “Selecting/deselecting axis compensations in the NC program [} 94]“). Compensation is deactivated at the end of the NC program, when the CNC is reset or when the axis is released. Limits of compensation table As of CNC Build V3.1.3079.06 the maximum possible of table entries can be defined in P-COMP-00061 [} 44]. In previous builds, the entries “last_index_master1”(P-COMP-00010 [} 45]) and “last_index_master2” (P-COMP-00011 [} 45]) are limited to 100 entries. This rigid limitation non longer applies. Note only that: P-COMP-00010 [} 45] x P-COMP-00011 [} 45] <= P-COMP-00061 [} 44] 42 Version: 1.51 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 43

Axis compensations with compensation value lists Compensation values of plane compensation The corresponding compensation value of the slave axis is entered in the table kw.crosscomp2.table[j][i].* for every interpolation point. Compensation value table Variable name Type Meaning table[j][i].correction SGN32 Compensation value of slave axis at interpolation point [j][i], see figure below. When interpolation points are indexed in the compensation value table, the 1. index j always refers to the 2. master axis (see figure below). Index j -> master axis 2 Index i -> master axis 1 Unassigned interpolation points are assigned the value 0 in the compensation value table. This value is also used in the calculation. interval 0 0 start_position_master1 last_index_master1 TF5200 | Twin CAT 3 CNC Version: 1.51 43 Axis compensation 2retsam_noitisop_trats last_index_master2 AIscttpuoasl iptioonsi tdioenr o Af cahxsies master2_ax_nr [6][0] [6][7] [5][0] [5][7] [4][0] [4][7] [3][0] [3][7] 10 [2][7] [2][0] 10 AIscttpuoasl itpioons idtieorn [1][0] [1][7] o Afc ahxsies [0][0] master1_ax_nr [0][7] [0][6] [0][3] kw.crosscomp2.interval 100000 kw.crosscomp2.last_index_master1 7 kw.crosscomp2.last_index_master2 6 kw.crosscomp2.start_position_master1 220000 kw.crosscomp2.start_position_master2 -160000 kw.crosscomp2.unit 1 kw.crosscomp2.master1_ax_nr 1 kw.crosscomp2.master2_ax_nr 2 kw.crosscomp2.table[0][0].correction 0 ... kw.crosscomp2.table[6][7].correction 324 Fig. 13: Compensation value list parameters
## Page 44

Axis compensations with compensation value lists 4.3.1.2 Description P-AXIS-00174 Activation of plane compensation Description This parameter activates the plane compensation (2-dimensional cross compensation). Parameter lr_param.crosscomp2 Data type BOOLEAN Data range 0/1 Axis types T Dimension T: ---- Default value 0 Drive types ---- Remarks P-COMP-00061 Maximum number of table entries for plane compensation Description This plane compensation parameter (FCT-C5 [} 38]) saves the memory space required for a particular number of table entries. The size of the actually used compensation table is defined by `last_index:master1` (P-COMP-00010) and `last_index_master2` (P-COMP-00011) and the following must apply: (`last_index_master1` + 1) * (`last_index_master2` + 1) <= `max_points` If `max_points` is not specified (or assigned the value 0), the previous restrictions apply to `last_index_master1` and `last_index_master2`. • 0 <= `last_index_master1` <= 100 • 0 <= `last_index_master2` <= 100 Parameter kw.crosscomp2.max_points Data type UNS32 Data range 0 <= P-COMP-00061 Axis types T, R, S Dimension T: ---- R,S: ---- Default value 10201 (*) Remarks The parameter value can no longer be changed after start-up or after lists are reloaded. Otherwise error ID 110640 is output. If P-COMP-00061 is not specified (or assigned the value 0), the default value is assigned to P-COMP-00061 for downward compatibility reasons. To avoid the default assignment, memory can be saved for an axis that does not use plane compensation [} 38] by assigning the value 1 to P-COMP-00061. * composition of the default value: 101*101 =10201 This parameter is available as of CNC Build V3.3079.06 P-COMP-00008 Unit of the length entries Description This parameter defines the unit of the length / position entries. Parameter kw.crosscomp2.unit Data type BOOLEAN 44 Version: 1.51 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 45

Axis compensations with compensation value lists Data range 0: Encoder increments 1: Metric (in 0.1 µm) Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0 Remarks P-COMP-00009 Distance between interpolation points Description This parameter defines the distance between two interpolation points if both axes use an identical grid (P-COMP-000031(grid) = QUADRATIC). Parameter kw.crosscomp2.interval Data type UNS32 Data range 0 < interval < MAX(UNS32) Axis types T, R, S Dimension T: 0.1 µm or increments R,S: 0.0001° or increments Default value 0 Remarks P-COMP-00010 Last index of master axis 1 Description This parameter determines the last valid index in the table of master axis 1 (maximum value is 100). The table always starts with index 0. Parameter kw.crosscomp2.last_index_master1 Data type SGN32 Data range 0 ≤ P-COMP-00010 <= 100 Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0 Remarks As of Build V3.1.3079.06, P-COMP-00010 is freely assignable. There is no upper limit. However, the condition of P-COMP-00061 [} 44] must be complied with. P-COMP-00010 * P-COMP-00011 [} 45] <= P-COMP-00061 [} 44] Attention: If this parameter is re-interpreted, all the values in the compensation value table (P- COMP-00016 [} 46]) must be read in again. P-COMP-00011 Last index of master axis 2 Description This parameter determines the last valid index in the table of the two master axes (maximum 100 values). The table always starts with index 0. Parameter kw.crosscomp2.last_index_master2 Data type SGN32 Data range 0 ≤ P-COMP-00011 <= 100 Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0 Remarks As of Build V3.1.3079.06, P-COMP-00011 is freely assignable. There is no upper limit. However, the condition of P-COMP-00061 [} 44] must be complied with. P-COMP-00010 [} 45] * P-COMP-00011 <= P-COMP-00061 [} 44] Attention: If this parameter is re-interpreted, all the values in the compensation value table (P- COMP-00016 [} 46]) must be read in again. TF5200 | Twin CAT 3 CNC Version: 1.51 45 Axis compensation
## Page 46

Axis compensations with compensation value lists P-COMP-00012 Start position of master axis 1 Description This parameter determines the start position of master axis 1 in the compensation table. Parameter kw.crosscomp2.start_position_master1 Data type SGN32 Data range MIN(SGN32) ≤ start_position_master1 < MAX(SGN32) Axis types T, R, S Dimension T: 0.1 µm or increments R,S: 0.0001° or increments Default value 0 Remarks P-COMP-00013 Start position of master axis 2 Description This parameter determines the start position of master axis 2 in the compensation table. Parameter kw.crosscomp2.start_position_master2 Data type SGN32 Data range MIN(SGN32) ≤ start_position_master2 < MAX(SGN32) Axis types T, R, S Dimension T: 0.1 µm or increments R,S: 0.0001° or increments Default value 0 Remarks P-COMP-00014 Logical axis number of the master axis 1 Description This parameter defines the logical axis number of the first master axis. Parameter kw.crosscomp2.master1_ax_nr Data type UNS16 Data range 1 ≤ master1_ax_nr ≤ MAX (UNS16) Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0 Remarks P-COMP-00015 Logical axis number of the master axis 2 Description This parameter defines the logical axis number of the second master axis. Parameter kw.crosscomp2.master2_ax_nr Data type UNS16 Data range 1 ≤ master2_ax_nr ≤ MAX (UNS16) Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0 Remarks P-COMP-00016 Compensation values for the slave axis Description This parameter defines the relative compensation values of the slave axis at interpolation points [j][i]. When indexing the interpolation points in the compensation list, the first index j refers to the second master axis. Parameter kw.crosscomp2.table[j][i].correction Data type SGN32 Data range MIN(SGN32) ≤ correction < MAX(SGN32) Axis types T, R, S 46 Version: 1.51 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 47

Axis compensations with compensation value lists Dimension T: 0.1 µm or increments R,S: 0.0001° or increments Default value 0 Remarks P-COMP-00027 Number of cycles for ‘smooth switching’ Description This parameter determines the number of cycles for which plane compensation is activated/deactivated smoothly. Parameter kw.crosscomp2.n_cycles Data type UNS16 Data range 0 ≤ n_cycles ≤ 20 (maximum number of cycles for which cross compensation is activated/deactivated, application-specific) Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0 Remarks P-COMP-00030 Manual activation Description Plane compensation is automatically activated by the CNC if it selected in the axis parameters (P-AXIS-00174) and the required conditions are met (e.g. axis is homed). If the parameter is set to value 1, plane compensation must be activated explicitly by an NC command (see [PROG//Selecting/deselecting axis compensations in the NC program]. In addition, compensation is deselected at the end of the NC program, at CNC reset and on axis release. Parameter kw.crosscomp2.manual_activation Data type BOOLEAN Data range 0: Automatic activation 1: Manual activation in NC program Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0 Remarks P-COMP-00032 Distance between the interpolation points of the first master axis Description The parameter defines the interval between two interpolation points for the first master axis if both master axes use a different grid (P-COMP-00031(grid) = RECTANGULAR). Parameter kw.crosscomp2.interval1 Data type UNS32 Data range 0 < interval1 < MAX(UNS32) Axis types T, R, S Dimension T: 0.1 µm or increments R,S: 0.0001° or increments Default value 0 Remarks P-COMP-00033 Distance between the interpolation points on the second master axis Description The parameter defines the interval between two interpolation points for the first master axis if both master axes use a different grid (P-COMP-00031(grid) = RECTANGULAR). Parameter kw.crosscomp2.interval2 Data type UNS32 TF5200 | Twin CAT 3 CNC Version: 1.51 47 Axis compensation
## Page 48

Axis compensations with compensation value lists Data range 0 < interval2 < MAX(UNS32) Axis types T, R, S Dimension T: 0.1 µm or increments R,S: 0.0001° or increments Default value 0 Remarks 4.3.1.3 CNC objects Name CROSSC::f_is_active Description Cross compensation: active, activate using Description [} 31] This means that all preconditions must be met, such as the axis is homed and all necessary enables are on. Task GEO (Port 551) Index group 0x120300 Index offset 0x<A >004F ID Data type BOOLEAN Length 1 Attributes read Unit [-] Remarks Name CROSSC::delta_offset Description Cross compensation: change in compensation value compared to previous cycle Task GEO (Port 551) Index group 0x120300 Index offset 0x<A >0034 ID Data type SGN32 Length 4 Attributes read Unit [Incr.] Remarks Name CC2::correction Description Plane compensation: current effective offset Task GEO (Port 551) Index group 0x120300 Index offset 0x<A >0052 ID Data type SGN32 Length 4 Attributes read Unit [Incr.] Remarks Name CC2::activated Description This object reads whether plane compensation is activated via P-AXIS-00174 [} 44]. Task GEO (Port 551) Index group 0x120300 Index offset 0x<A >01D7 ID Data type BOOLEAN Length 1 Attributes read Unit [-] Remarks 48 Version: 1.51 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 49

Axis compensations with compensation value lists 4.3.2 Examples of compensation value lists Compensation value list for plane compensation Available as of V3.1.3079.06 The parameterisation example below reserved a maximum number of table entries of 50000 entries. The actual number of entries used is defined by the product of “last_index_master1” and “last_index_master2”. # **************************************** # Axis compensation data X axis # **************************************** kopf.achs_nr 1 kopf.log_achs_name X # Reserve maximum number of table entries kw.crosscomp2.max_points 50000 kw.crosscomp2.last_index_master1 1000 kw.crosscomp2.last_index_master2 20 kw.crosscomp2.table[ 0][ 0].correction -3 kw.crosscomp2.table[ 0][ 1].correction -1 etc. kw.crosscomp2.table[ 20][ 999].correction 58 kw.crosscomp2.table[ 20][1000].correction 49 Compensation value list for plane compensation # **************************************** # Axis compensation data X axis # **************************************** kopf.achs_nr 1 kopf.log_achs_name X kw.crosscomp2.interval 100000 /* 10 mm */ kw.crosscomp2.last_index_master1 100 kw.crosscomp2.last_index_master2 200 kw.crosscomp2.start_position_master1 -400000 /* -40 mm */ kw.crosscomp2.start_position_master2 -700000 /* -70 mm */ kw.crosscomp2.unit 1 /* 0,1 mµ */ kw.crosscomp2.master1_ax_nr 2 kw.crosscomp2.master2_ax_nr 3 kw.crosscomp2.n_cycles 20 kw.crosscomp2.table[ 0][ 0].correction -3 kw.crosscomp2.table[ 0][ 1].correction -1 kw.crosscomp2.table[ 0][ 2].correction 4 kw.crosscomp2.table[ 0][ 3].correction 9 kw.crosscomp2.table[ 0][ 4].correction 13 kw.crosscomp2.table[ 0][ 5].correction 17 kw.crosscomp2.table[ 0][ 6].correction 42 kw.crosscomp2.table[ 0][ 7].correction 53 kw.crosscomp2.table[ 0][ 8].correction 33 kw.crosscomp2.table[ 0][ 9].correction 42 kw.crosscomp2.table[ 0][ 10].correction 19 kw.crosscomp2.table[ 0][ 11].correction 7 kw.crosscomp2.table[ 0][ 12].correction 2 kw.crosscomp2.table[ 0][ 13].correction 0 kw.crosscomp2.table[ 0][ 14].correction 5 kw.crosscomp2.table[ 0][ 15].correction -3 kw.crosscomp2.table[ 0][ 16].correction -7 kw.crosscomp2.table[ 0][ 17].correction -11 kw.crosscomp2.table[ 0][ 18].correction -13 kw.crosscomp2.table[ 0][ 19].correction -22 kw.crosscomp2.table[ 0][ 20].correction -34 kw.crosscomp2.table[ 0][ 21].correction -29 kw.crosscomp2.table[ 0][ 22].correction -99 … kw.crosscomp2.table[200][ 71].correction 45 kw.crosscomp2.table[200][ 72].correction 68 kw.crosscomp2.table[200][ 73].correction 71 kw.crosscomp2.table[200][ 74].correction 90 kw.crosscomp2.table[200][ 75].correction 111 kw.crosscomp2.table[200][ 76].correction 123 kw.crosscomp2.table[200][ 77].correction 134 TF5200 | Twin CAT 3 CNC Version: 1.51 49 Axis compensation
## Page 50

Axis compensations with compensation value lists kw.crosscomp2.table[200][ 78].correction 147 kw.crosscomp2.table[200][ 79].correction 156 kw.crosscomp2.table[200][ 80].correction 176 kw.crosscomp2.table[200][ 81].correction 167 kw.crosscomp2.table[200][ 82].correction 148 kw.crosscomp2.table[200][ 83].correction 132 kw.crosscomp2.table[200][ 84].correction 123 kw.crosscomp2.table[200][ 85].correction 111 kw.crosscomp2.table[200][ 86].correction 101 kw.crosscomp2.table[200][ 87].correction 97 kw.crosscomp2.table[200][ 88].correction 88 kw.crosscomp2.table[200][ 89].correction 83 kw.crosscomp2.table[200][ 90].correction 82 kw.crosscomp2.table[200][ 91].correction 77 kw.crosscomp2.table[200][ 92].correction 68 kw.crosscomp2.table[200][ 93].correction 63 kw.crosscomp2.table[200][ 94].correction 61 kw.crosscomp2.table[200][ 95].correction 59 kw.crosscomp2.table[200][ 96].correction 57 kw.crosscomp2.table[200][ 97].correction 52 kw.crosscomp2.table[200][ 98].correction 56 kw.crosscomp2.table[200][ 99].correction 58 kw.crosscomp2.table[200][100].correction 49 # End 50 Version: 1.51 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 51

Axis compensations with compensation value lists 4.3.3 Error messages Errors in the configuration of the plane compensation result in deactivation of the function for the affected axis and to the output of an error message (warning message). The following error messages then appear: • ID 110640 • ID 70182 • ID 70183 • ID 70184 • ID 70185 TF5200 | Twin CAT 3 CNC Version: 1.51 51 Axis compensation
## Page 52

Axis compensations with compensation value lists 4.4 Leadscrew error compensation Compensation process Leadscrew error compensation (referred to below as LSEC) is an axial compensation. The position setpoint of the compensated axis is changed by a compensation value in the position controller cycle in order to compensate for leadscrew errors, for instance. This compensation is cancelled by computation for the measured actual position values so that the compensation performed does not appear in the display data of the controller. Compensation table The compensation values are taken from a table in which the profile of the compensation curve is stored as a function of the axis position. The axis positions entered in the table are called interpolation points and the corresponding values of the compensation curve are called compensation values. The compensation value is linearly interpolated for axis positions that lie between interpolation points. The table containing compensation values is referred to in the following as the compensation table. Bilateral/unilateral LSEC You can specify a separate compensation table for each direction of axis motion; this type of compensation is called bilateral compensation. With bilateral leadscrew error compensation, any backlash that may be present can also be compensated for; additional backlash compensation (see Section “Backlash compensation [} 8]“) is therefore not necessary. With bilateral leadscrew error compensation, the parameter P-AXIS-00243 [} 57] specifies the number of cycles for distribution of the compensation offset in case of a reversal in direction. If a table is used for both directions of axis motion, it is referred to as unilateral compensation. • The compensation tables are stored to a file for each axis (compensation value list). • Axis dynamics are not taken into account in the output of compensation values. 52 Version: 1.51 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 53

Axis compensations with compensation value lists The graphic below shows an example of a compensation value curve. The meaning of the parameters used in the graphic will be explained later. Compensation value Linear interpolation between interpolation points Compensation value Compensation curve for interpolation point 3 table[3].pos Interpolation kw_start.pos point kw_nr_max-1 12 0 1 2 3 4 5 6 7 8 9 10 11 Spacing between Reference point Axis position Interpolation points interpolation points interval Fig. 14: Compensation table with equidistant interpolation point grid and unilateral compensation Properties Leadscrew error compensation (LSEC) has the following characteristics: • When bilateral compensation is used, the same interpolation point positions must be used for both value tables. • You can define a compensation table only for a partial motion range of an axis. For axis positions outside the compensation table, the value at either end of the table continues to be used. • Any compensation value other than 0 can be present at the reference point. • The distance between interpolation points in the value tables can be selected either equidistant or non- equidistant. • As of CNC Build V3.1.3079.06 you can adjust the size of the compensation table. The parameter P- COMP-00059 [} 57] defines the maximum number of table entries. The actual number of entries used by P-COMP-00020 [} 58] Effectiveness The LSEC is effective under the following conditions: • The LSEC was activated for the slave axis. • A compensation table for the axis must be transferred to the controller. • he axis was referenced or uses an absolute measuring system. TF5200 | Twin CAT 3 CNC Version: 1.51 53 Axis compensation
## Page 54

Axis compensations with compensation value lists 4.4.1 Parameter 4.4.1.1 Overview Activation Leadscrew error compensation (LSEC) is activated in the axis machine data record of the corresponding slave axis by P-AXIS-00175: Variable name Type Meaning lr_param.ssfk BOOLEAN 0: no LSEC 1: LSEC active P-AXIS-00243 [} 57] UNS16 Number of cycles with bilateral leadscrew error compensation with reversal of direction lr_param.n_backlash_cyc Excerpt from the axis parameter list: : lr_param.ssfk 1 : 54 Version: 1.51 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 55

Axis compensations with compensation value lists Management data of the LSEC table The general data of the list body parameterises the operation mode of the compensation, e.g. unilateral or bilateral. General data is entered in the structure kw.ssfk..* and contains the following elements. Management data elements Variable name Type Meaning unit BOOLEAN Unit of the length entries: 0: Encoder increments 1: metric (in 0.1 µm) interval SGN32 Distance between interpolation points of the compensation table for use if using equidistant interpolation points. If this parameter is = 0, the position of each interpolation point must be specified separately. kw_startpos SGN32 Start position of the compensation table (with equidistant interpolation points) kw_nr_max SGN32 Number of entries in the compensation table As of CNC Build V3.1.3079.06, the maximum possible number of entries can be defined in P-COMP-00059 [} 57] . In previous builds the default value is 1500. bilateral BOOLEAN 0: Unilateral compensation 1: Bilateral compensation modulo BOOLEAN Compensation for a modulo axis take place manual_activation BOOLEAN 0 (default): The CNC activates leadscrew error compensation automatically as soon as the required conditions are met (e.g. the master axis is referenced) 1: Leadscrew error compensation must be activated explicitly in the NC program by the COMP command (see Section “Selecting/ deselecting axis compensations in the NC program“) [} 94] . Compensation is deactivated at the end of the NC program, when the CNC is reset or when the axis is released. set_pos_without_comp BOOLEAN By default, leadscrew error compensation also considers the compensation values generated from other axis compensations, e.g. cross and plane compensation. Direction-dependent leadscrew error compensation (see P-COMP-00021 [} 54]) may result in undesired backlash cover. The parameter set_pos_without_comp can disable the inclusion of other compensation values in the calculation. 0: Compensation values of other compensations are considered in the leadscrew error compensation. 1: Compensation values of other compensations are not considered. TF5200 | Twin CAT 3 CNC Version: 1.51 55 Axis compensation
## Page 56

Axis compensations with compensation value lists LSEC compensation values The compensation values are specified in the table kw.ssfk.table[i].*. The field index i can then assume the value 0 to kw.ssfk.kw_nr_max –1. The maximum number of entries is specified in [SYSP//Number 2.23]. The compensation values are specified as absolute position errors in the unit specified in kw.ssfk.unit (metric in 0.1 µm or incremental). Where: [Delta] i-th compensation value si s i-th command value (interpolation point of the compensation table) soll, i s i-th actual value (measured with reference measuring system) ist, i Compensation value table Variable name Type Meaning pos SGN16 Compensation value for motion in a positive direction (bilateral compensation) and compensation value for use with unilateral compensation. neg SGN16 Compensation value for motion in a negative direction. Not used with unilateral SSKF. setpoint SGN32 Interpolation point of the axis (programmed value). Only with non equidistant interpolation points. For use with bilateral compensation, enter position errors for motion in a position direction in the pos entry, The interpolation points specified are valid for both directions. For use with unilateral compensation, also enter position errors in the pos Entry. The neg entry is omitted. As opposed to the entry of individual interpolation points for the compensation table, a grid structure can also be used. Entries for interpolation points can then be omitted in the setpoint variable in this case. To use an interpolation point grid, enter the increment of the interpolation point grid in the kw.ssfk.interval variable. The interpolation points are then calculation internally from the start position (kw.ssfk. kw_startpos) and the increment. 56 Version: 1.51 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 57

Axis compensations with compensation value lists Special features applicable to modulo axes If a compensation table is configured for a modulo axis (kw.ssfk.modulo = 1), a modulo transition also occurs in the compensation table at the modulo transition of the axis position. This can be used in order to compensate for position errors caused by gears or transmissions for instance. The following special aspects must be noted: • The position values of the first and last entries in the compensation list must be identical. • The number of compensation values is also equal here to the number of entries in the compensation value table. 4.4.1.2 Description P-AXIS-00175 Activation of SSFK Description This parameter activates the lead screw error compensation. Parameter lr_param.ssfk Data type BOOLEAN Data range 0/1 Axis types T, R Dimension T: ---- R: ---- Default value 0 Drive types ---- Remarks P-AXIS-00243 Distribution of the backlash on multiple cycles Description The parameter defines a number of position control cycles on which the backlash is distributed. The distribution is done according to a sin2 function. The parameter is also used for bi-directional lead screw error compensation if a change of direction is executed. Parameter lr_param.n_backlash_cyc Data type UNS16 Data range 0 < n_backlash_cyc < 20 Axis types T, R, S Dimension T: Number of interpolation cycles R,S: Number of interpolation cycles Default value 0 Drive types ---- Remarks For the values 0 or 1 the output of the backlash to the drive is done abruptly within one cycle. A value larger than 1 creates a distribution according to the sin2function The use of this feature avoids increasing errors at the workpiece, because for large backlash the machine excitation is reduced. P-COMP-00059 Maximum number of table entries for leadscrew error compensation Description This leadscrew error compensation parameter (FCT-C5 [} 52]) sets the memory space required for a particular number of table entries. The size of the actually used compensation table is defined by `kw_nr_max` (P- COMP-00020) and `kw_nr_max` must be smaller than `max_points`. Parameter kw.ssfk.max_points Data type UNS32 Data range 0 <= P-COMP-00059 Axis types T, R, S TF5200 | Twin CAT 3 CNC Version: 1.51 57 Axis compensation
## Page 58

Axis compensations with compensation value lists Dimension T: ---- R,S: ---- Default value 1500 Remarks The parameter value can no longer be changed after start-up or after lists are reloaded. Otherwise error ID 110638 is output. If P-COMP-00059 is not specified (or assigned the value 0), the default value is assigned to P-COMP-00059 for downward compatibility reasons. To avoid the default assignment, memory can be saved for an axis that does not use leadscrew error compensation [} 52] by assigning the value 1 to P- COMP-00059. This parameter is available as of CNC Build V3.3079.06 P-COMP-00017 Unit of the length entries Description This parameter defines the unit of the length / position entries. Parameter kw.ssfk.unit Data type BOOLEAN Data range 0: Encoder increments 1: Metric (in 0.1 µm) Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0 Remarks P-COMP-00018 Distance between interpolation points Description The parameter defines the distance between interpolation points of the compensation table when equidistant interpolation points are used. If this parameter is = 0, the position of each interpolation point must be specified separately. Parameter kw.ssfk.interval Data type SGN32 Data range 0 ≤ interval < MAX(SGN32) Axis types T, R, S Dimension T: 0.1 µm or increments R,S: 0.0001° or increments Default value 0 Remarks P-COMP-00019 Start position of compensation values Description This parameter determines the position of the axis at which the compensation table starts. Parameter kw.ssfk.kw_startpos Data type SGN32 Data range MIN(SGN32) ≤ kw_startpos < MAX(SGN32) Axis types T, R, S Dimension T: 0.1 µm or increments R,S: 0.0001° or increments Default value 0 Remarks P-COMP-00020 Number of compensation values Description This parameter defines the number of entries in the compensation table. Parameter kw.ssfk.kw_nr_max Data type SGN32 58 Version: 1.51 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 59

Axis compensations with compensation value lists Data range 0 ≤ kw_nr_max < P-COMP-00059 [} 57] Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0 Remarks P-COMP-00059 [} 57] is available as of Build V3.1.3079.06. P-COMP-00021 Operation mode of compensation Description This parameter defines whether compensation is unilateral or bilateral. Parameter kw.ssfk.bilateral Data type BOOLEAN Data range 0: Unilateral compensation 1: Bilateral compensation Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0 Remarks P-COMP-00022 Compensation of a modulo axis Description This parameter defines the compensation table for a modulo axis. A modulo transition also takes place in the compensation table on the modulo transition of the axis position. The number of compensation values must then be equal to the number of entries in the compensation value table. Parameter kw.ssfk.modulo Data type BOOLEAN Data range 0: Compensation without modulo handling 1: Compensation for a modulo axis Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0 Remarks P-COMP-00023 Compensation value in positive direction Description This parameter defines a compensation value in case of movement in positive direction at interpolation point 'i'. Parameter kw.ssfk.table[i].pos Data type SGN32 Data range MIN(SGN32) ≤ pos < MAX(SGN32) Axis types T, R, S Dimension T: 0.1 µm or increments R,S: 0.0001° or increments Default value 0 Remarks P-COMP-00024 Compensation value in negative direction Description This parameter defines a compensation value in case of movement in negative direction at interpolation point 'i'. Parameter kw.ssfk.table[i].neg Data type SGN32 Data range MIN(SGN32) ≤ neg < MAX(SGN32) Axis types T, R, S TF5200 | Twin CAT 3 CNC Version: 1.51 59 Axis compensation
## Page 60

Axis compensations with compensation value lists Dimension T: 0.1 µm or increments R,S: 0.0001° or increments Default value 0 Remarks P-COMP-00025 Interpolation points of the axis Description This parameter determines the interpolation points of the axis for which the axis must be corrected. Parameter kw.ssfk.table[i].setpoint Data type SGN64 Data range MIN(SGN64) ≤ setpoint < MAX(SGN64) Axis types T, R, S Dimension T: 0.1 µm or increments R,S: 0.0001° or increments Default value 0 Remarks In CNC Builds V2.11.20xx and higher, the data type is SGN32 and so is the related data range. P-COMP-00028 Manual activation Description Leadscrew error compensation is automatically activated by the CNC if it selected in the axis parameters (P-AXIS-00175) and the required conditions are met (e.g. axis is homed). If the parameter is set to value 1, leadscrew error compensation must be explicitly activated by an NC command (see [PROG//Selecting/deselecting axis compensations in the NC program]. In addition, compensation is deselected at the end of the NC program, at CNC reset and on axis release. Parameter kw.ssfk.manual_activation Data type BOOLEAN Data range 0: Automatic activation 1: Manual activation in NC program Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0 Remarks P-COMP-00057 Consideration of other axis compensations Description By default, leadscrew error compensation also considers the compensation values generated from other axis compensations, e.g. cross and plane compensation. With direction-dependent spindle leadscrew error compensation (see P-COMP-00021) this may result in the undesirable occurrence of backlash under certain circumstances. The parameter set_pos_without_comp can disable the inclusion of other compensation values in the calculation. Parameter kw.ssfk.set_pos_without_comp Data type BOOLEAN Data range 0: Compensation values of other compensations are considered in the leadscrew error compensation. 1: Compensation values of other compensations are not considered. Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0 Remarks 60 Version: 1.51 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 61

Axis compensations with compensation value lists 4.4.1.3 CNC objects Name ssfk activated Description Leadscrew error compensation (LSEC);active, activate with P-AXIS-00175 [} 57] Task GEO (Port 551) Index group 0x120300 Index offset 0x<A >0038 ID Data type BOOLEAN Length 1 Attributes read Unit [-] Remarks Name LSEC::active Description This object reads whether leadscrew error compensation is active. This means that all preconditions must be met, such as the axis is homed and all necessary enables are on. (leadscrew error compensation - LSEC) Task GEO (Port 551) Index group 0x120300 Index offset 0x<A >00D0 ID Data type BOOLEAN Length 1 Attributes read Unit [-] Remarks Name LSEC::epsilon Description Leadscrew error compensation: change in compensation value compared to previous cycle Leadscrew error compensation (LSEC) Task GEO (Port 551) Index group 0x120300 Index offset 0x<A >001C ID Data type SGN32 Length 4 Attributes read Unit [Incr.] Remarks Name LSEC::sum epsilon Description Leadscrew error compensation: sum of all compensation values Leadscrew error compensation (LSEC) Task GEO (Port 551) Index group 0x120300 Index offset 0x<A >001D ID Data type SGN32 Length 4 Attributes read Unit [Incr.] Remarks TF5200 | Twin CAT 3 CNC Version: 1.51 61 Axis compensation
## Page 62

Axis compensations with compensation value lists 4.4.2 Example - Non-equidistant bilateral SSFK The diagram below shows a compensation value table with the properties: • Non-equidistant interpolation points (kw.ssfk.interval = 0) • Bilateral compensation table (kw.ssfk.bilateral = 1) • Position specifications in metric system (kw.ssfk.unit = 1) • Compensation value table with 140 entries (kw.ssfk.kw_nr_max = 140). The index of the position and setpoint entries goes from 0 to 139. The following values were measured at the third gauged position (table[3]): Programmed pos measurement neg measurement computed Computed Position value value pos compensation neg compensation s ith setpoint s ith actual value s ith actual value value value soll,i ist,i ist,i (pos direction) (neg direction) Δs = s – s Δs = s –s i i ist,i soll,i i ist,i soll, 19866.7 µm 19856.5 µm 19874.7 µm -102 x 0.1 µm 80 x 0.1 µm Non-equidistant bilateral SSFK kopf.achs_nr 2 kopf.log_achs_name Y AXIS kw.ssfk.interval 0 kw.ssfk.kw_startpos -200000 kw.ssfk.kw_nr_max 140 kw.ssfk.unit 1 kw.ssfk.bilateral 1 kw.ssfk.table[0].setpoint -200000 kw.ssfk.table[1].setpoint -199306 kw.ssfk.table[2].setpoint -198667 kw.ssfk.table[3].setpoint -198001 ... kw.ssfk.table[138].setpoint 334488 kw.ssfk.table[139].setpoint 335591 kw.ssfk.table[0].pos 0 kw.ssfk.table[1].pos 24 kw.ssfk.table[2].pos -102 ... kw.ssfk.table[139].pos -55 kw.ssfk.table[0].neg 0 kw.ssfk.table[1].neg 67 kw.ssfk.table[2].neg 80 ... kw.ssfk.table[139].neg 114 62 Version: 1.51 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 63

Axis compensations with compensation value lists 4.4.3 Error messages Errors in the configuration of leadscrew error compensation result in deactivation of the function for the affected axis and to the output of an error message (warning message). The following error messages then appear: • ID 110217 • ID 110218 • ID 110392 • ID 110474 • ID 110476 • ID 110477 • ID 110478 • ID 110479 • ID110480 • ID 110590 • ID 110638 TF5200 | Twin CAT 3 CNC Version: 1.51 63 Axis compensation
## Page 64

Axis compensations with compensation value lists 4.5 Friction compensation Friction effects in the drive train may cause marks or dimensional variations on the workpiece surface at points in the machining process where a change in axis direction occurs (reversing). The purpose of friction compensation is to minimise these effects and enhance machining results. Compensation process Friction compensation reduces position lag and improves surface quality. At the same time, it relieves pressure on the speed controller and when activated, it permits the greater use of dynamic parameters and this reduces machining time. Friction compensation can be activated for SERCOS and CANopen drives. This requires the install- ation of an additive torque interface (additive current) which requires [} 74] configuration. Characteristics • When friction compensation is selected, it is active directly after controller start-up • Friction compensation reduces position lag and axis backlash and increases accuracy. • Friction compensation is available for all drive types. Effectiveness Friction compensation is only effective if all the following conditions are fulfilled: • The function was activated in the axis parameter list with P-AXIS-00522 (TRUE) or was enabled by an NC command. • The compensation value table [COMP] was provided. 4.5.1 Types of friction and compensation Friction Friction basically occurs at points of contact between bodies moving relative to one another. It manifests itself as the force that counteracts the motion. According to Stribeck, the following friction curves result at different velocities: • Phase 1: Adhesive friction for standstill (boundary friction) • Phase 2: Mixed friction, Stribeck friction • Phase 3: Elastohydrodynamic friction The constant component of friction at velocity v = 0 results in a surge in frictional force at speed reversal resulting in backlash. 64 Version: 1.51 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 65

Axis compensations with compensation value lists Friction force Stribeck Viscous friction F friction brk Coulomb friction 0 Velocity Fig. 15: Theoretical friction curve TF5200 | Twin CAT 3 CNC Version: 1.51 65 Axis compensation
## Page 66

Axis compensations with compensation value lists Fig. 16: Measured friction curve 66 Version: 1.51 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 67

Axis compensations with compensation value lists 4.5.1.1 Additive current dependent on velocity Additive current The purpose of friction compensation is to compensate actually existing friction torque by way of an additional torque. It acts in the form of speed-dependent feedforward control of the motor current. Compensation HMI START parameter Axis FRICTION parameter %example P-COMP-00<i> N15 X[COMP ON FRICT] N25 P-AXIS-00522 ... M30 INIT ON / OFF CNC ENABLE / ACTIVATION Friction compensation Actual Additive current current Drive Fig. 17: Principle of friction compensation It is basically sufficient to command a additive current to the drive on the setpoint side for friction compensation. However, to determine the characteristic curve for the current and verify compensation, it is also ne- cessary to read the actual current. Effect The algorithm compensates for friction during path motions (v≠0) by an additional motor current. TF5200 | Twin CAT 3 CNC Version: 1.51 67 Axis compensation
## Page 68

Axis compensations with compensation value lists Control loop The effect of friction compensation on closed-loop control is shown in the figure below. friction compensation v additive d/dt I=f(v) current system pos pos cmd + + v + + act s-control v-control I-control motor mechanic - - current d/dt Fig. 18: Add friction compensation to the control loop of an axis 4.5.1.1.1 Reverse the motion direction Reverse and weight the friction curve In the Stribeck curve model, a jump in feedforward control current occurs in the axis reversal process (velocity zero crossing). To prevent this discontinuity, the CNC monitors axis reversal. In this case, the friction model may be weighted before and after zero crossing. • Before zero crossing: time [number of CNC cycles] • After zero crossing: Path distance covered [0.1 µm] friction force stribeck viscous F friction friction brk coulomb friction 0 velocity pre weighting 1 0 time post weighting distance Fig. 19: Weight friction model before/after zero crossing, on reversal from negative to positive velocity If no reversal takes place, i.e. the axis is only decelerated and continues in the same direction, the friction model is not weighted. 68 Version: 1.51 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 69

Axis compensations with compensation value lists Friction compensation Reverting pre/post - detection weighting model d/dt I=f(v) v Additive cmd current control System s cmd n*T a s cmd + s e s-control + v e v-control I + + I-control s act - - - d/dt d/dt Fig. 20: Add friction compensation to the control loop of an axis TF5200 | Twin CAT 3 CNC Version: 1.51 69 Axis compensation
## Page 70

Axis compensations with compensation value lists 4.5.1.2 Parameterisation Parameterise compensation values The table for friction compensation must be programmed with ascending velocity and the velocity must be ≥ 0. This is checked when the list is downloaded list and, if applicable, the error message P-ERR-110591 is output. As of CNC Build V3.1.3079.06, use P-COMP-00062 [} 79] to define a maximum number of table entries in the compensation value list. The entries actually used are defined in P-COMP-00042. Friction compensation parameters are defined in the compensation value list: • Maximum number of table entries P-COMP-00062 [} 79] as of Build V3.1.3079.06 • Friction compensation mode P-COMP-00041 • Number of table elements P-COMP-00042 • Current build-up after direction reversal P-COMP-00043 • Current decay before direction reversal P-COMP-00044 • Scaling factor for compensation values P-COMP-00045 • Table entries for velocity P-COMP-00046 • Table entries for current P-COMP-00047 Friction compensation is only active when the mode (P-COMP-00041) is assigned a value unequal to 0 and P-AXIS-00522 is set. Only value 3 is permitted for P-COMP-00041 Parameterise friction compensation frict_comp.mode 3 frict_comp.table_entries 3 frict_comp.position_delay 30 frict_comp.reversal_lookahead 4 frict_comp.scaling_factor 10 frict_comp.delay_cycles 9 frict_comp.table[0].in 0 frict_comp.table[0].out 0 frict_comp.table[1].in 316 frict_comp.table[1].out 3722 frict_comp.table[2].in 333 frict_comp.table[2].out 3884 70 Version: 1.51 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 71

Axis compensations with compensation value lists Parameter verification A consistency check takes place when compensation parameters are adopted. If the parameters are not coherent, a related error message is output. P-ERR-110591 Negative or non-ascending input values P-ERR-110592 Unknown mode or no values specified TF5200 | Twin CAT 3 CNC Version: 1.51 71 Axis compensation
## Page 72

Axis compensations with compensation value lists 4.5.1.3 Select and deselect compensation Activate/deactivate By analogy to other compensations, compensation can be activated by a parameter in the axis list or additionally by an NC command. Enable use/activate Compensation can only be applied if the parameter P-AXIS-00522 is set (TRUE) in the parameter list and the compensation value list is parameterised. Behaviour after start-up When friction compensation is selected, it is active directly after controller start-up regardless of whether homing was executed. Programming In every case, compensation can also be activated or deactivated explicitly by the axis-specific COMP command in the NC program. NOTICE The COMP command is valid after program end. After activating or deactivating compensation, the oper- ator must also explicitly deactivate or activate it at program end. 72 Version: 1.51 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 73

Axis compensations with compensation value lists 4.5.1.3.1 Programming <axis_name>[COMP ON | OFF FRICT] <axis_name> Name of the axis COMP Identifier to select/deselect axis-specific compensation. Must always be programmed as first keyword. ON Activates programmed compensation(s) OFF Deactivates programmed compensation(s) FRICT Keyword for friction compensation Activates and deactivates friction compensation N15 X[COMP ON FRICT] ;Activates X axis N25 Y[COMP OFF FRICT] ;Deactivates Y axis N35 X22 Y33 Z44 N45 X[COMP OFF FRICT] ;Deactivates X axis N55 M30 ;Program end Error message If friction compensation must be activated with the COMP command but it was not activated by the parameter P-AXIS-00522, the error message P-ERR-70495 is output. TF5200 | Twin CAT 3 CNC Version: 1.51 73 Axis compensation
## Page 74

Axis compensations with compensation value lists 4.5.1.4 Special features of drive parameters Drive telegram The drive must be fitted with a torque interface to be able to use friction compensation. SERCOS The additive torque setpoint must be configured in the cyclic log. • S-0-0084 Torque feedback value • S-0-0081 Additive torque command value CANopen The related PDOs (process data objects) are similarly configured with CANopen. • 6077 Torque actual value • 60B2 Torque offset 4.5.2 Determine the parameters for the compensation value list 4.5.2.1 Determine parameters manually Manual determination Each of the compensation value list parameters can be determined “manually”. To this end, the associated current (dig_drv.act_torque), e.g. in the scope, must be read off during a motion at constant speed. The motor current during a motion at constant speed is mapped in the figure below. It can be seen that the current is in the opposite direction to the speed. Fig. 21: Constant velocity (green) and associated current (black) 74 Version: 1.51 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 75

Axis compensations with compensation value lists 4.5.3 Effect of friction compensation Friction compensation reduces position lag and axis backlash. This boosts accuracy. Furthermore, the speed controllers are relieved, as a result of which the dynamic parameters can be used to a greater extent without impairing the machining result. The figure below shows the result of a circular transition test with compensation activated and deactivated. Without compensation (blue), clear peaks are visible at the quadrant transitions, which are reduced by compensation (red). Fig. 22: Circular transition test with and without friction compensation 4.5.4 Parameter 4.5.4.1 Overview 4.5.4.1.1 Axis parameters ID Parameter Description P-AXIS-00522 lr_param.frict_comp Activates and deactivates friction compensation 4.5.4.1.2 Compensation values ID Parameter Description TF5200 | Twin CAT 3 CNC Version: 1.51 75 Axis compensation
## Page 76

Axis compensations with compensation value lists P-COMP-00041 Index of the incorrect Friction compensation mode interpolation point P-COMP-00042 frict_comp.table_entries Number of elements in the compensation value table. Maximum of 20 P-COMP-00043 frict_comp.position_delay Distance over which the motor current is built up during start-up. P-COMP-00044 frict_comp.reversal_lookahea Number of cycles during which the motor current is d dissipated before a motion reversal. P-COMP-00045 frict_comp.scaling_factor Scaling factor for the entries in the compensation list P-COMP-00046 frict_comp.table[i].in Velocity P-COMP-00047 frict_comp.table[i].out Measured friction (motor current) P-COMP-00058 frict_comp.delay_cycles Delay in compensation values after reversal point in cycles P-COMP-00062 frict_comp.max_points Max. number of possible table entries 76 Version: 1.51 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 77

Axis compensations with compensation value lists 4.5.4.2 Description 4.5.4.2.1 Axis parameters P-AXIS-00522 Activation of friction compensation Description This parameter activates the friction compensation. Parameter lr_param.frict_comp Data type BOOLEAN Data range 0/1 Axis types T, R Dimension T: ---- R: ---- Default value 0 Drive types SERCOS, CANopen Remarks If friction compensation must be activated with the COMP command but it was not activated by the parameter P-AXIS-00522, the error message P-ERR-70495 is output. 4.5.4.2.2 Compensation values P-COMP-00041 Friction compensation mode Description The parameter defines the operation mode for friction compensation. If the parameter is assigned the value 0, friction compensation is deactivated. Parameter frict_comp.mode Data type UNS16 Data range 0: Deactivate friction compensation 3: Compensation with additive current taking into account the commanded speed Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0 Remarks To activate friction compensation, the mode must and P-AXIS-00522 must be set. P-COMP-00042 Number of elements in the compensation value table Description This parameter defines the number of entries in the compensation table. Parameter frict_comp.table_entries Data type UNS16 Data range 0 ≤ table_entries ≤ P-COMP-00062 [} 79] Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0 Remarks P-COMP-00062 [} 79] is available as of Build V3.1.3079.06. The default upper limit is 20. P-COMP-00043 Delay value for current build-up Description This parameter defines the delay value for current built-up at start-up. Its purpose is to prevent abrupt changes. Current build-up is linear. Parameter frict_comp.position_delay Data type SGN32 Data range 0 ≤ position_delay ≤ 10 Axis types T, R, S Dimension T: 0.1µm R,S: 0.0001° TF5200 | Twin CAT 3 CNC Version: 1.51 77 Axis compensation
## Page 78

Axis compensations with compensation value lists Default value 0 Remarks P-COMP-00044 Reversal look ahead Description This parameter defines the number of cycles over which the motor current decays before motion reversal. Parameter frict_comp.reversal_lookahead Data type UNS16 Data range 0 ≤ reversal_lookahead ≤ 4 Axis types T, R, S Dimension T: Cycles R,S: Cycles Default value 0 Remarks P-COMP-00045 Scaling factor for compensation values Description This parameter defines the scaling of all compensation values in the list. Parameter frict_comp.scaling_factor Data type SGN16 Data range MIN(SGN16) < scaling_factor < MAX(SGN16) Axis types T, R, S Dimension T: 0.1% R,S: 0.1% Default value 1000 Remarks P-COMP-00046 Velocity input variable Description This parameter defines the velocities for which the additional motor currents specified in P-COMP-00047 are to be output to the additive current interface. The values must be entered in ascending order. Parameter frict_comp.table[i].in where i= P-COMP-00042 Data type SGN32 Data range 0 < table[i].in < MAX(SGN32) Axis types T, R, S Dimension T: [µm/s] R,S: [0.001°/s] Default value 0 Remarks P-COMP-00047 Measured friction (motor current) – output variable Description This parameter defines the current which is to be additionally output at the additive current interface. Parameter frict_comp.table[i].out where i= P-COMP-00042 Data type SGN32 Data range MIN(SGN32) < table[i].out < MAX(SGN32) Axis types T, R, S Dimension T: * R,S: * Default value 0 Remarks * The dimension of the motor current depends on the internal data of the related drive. In CANopen and SERCOS, this value corresponds to the contents of the CNC object dig_drv.act_torque. P-COMP-00058 Delay time for compensation values Description This parameter defines the delay time of all compensation values. 78 Version: 1.51 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 79

Axis compensations with compensation value lists Parameter frict_comp.delay_cycles Data type SGN16 Data range 0 ≤ delay_cycles < 249 Axis types T, R, S Dimension T: Cycles R,S: Cycles Default value 0 Remarks P-COMP-00062 Maximum number of table entries for friction compensation Description This friction compensation parameter (FCT-C25) saves the memory space required for a particular number of table entries. The size of the actually used compensation table is defined by `table_entries` (P- COMP-00042) and `table_entries` must be smaller than `max_points`. Parameter frict_comp.max_points Data type UNS32 Data range 0 <= P-COMP-00062 Axis types T, R, S Dimension T: ---- R,S: ---- Default value 20 Remarks The parameter value can no longer be changed after start-up or after lists are reloaded. Otherwise error ID 110641 is output. If P-COMP-00062 is not specified (or assigned the value 0), the default value is assigned to P-COMP-00062 for downward compatibility reasons. To avoid the default assignment, memory can be saved for an axis that does not use friction compensation by assigning the value 1 to P-COMP-00062. This parameter is available as of CNC Build V3.3079.06 TF5200 | Twin CAT 3 CNC Version: 1.51 79 Axis compensation
## Page 80

Axis compensations with compensation value lists 4.6 Crosstalk compensation Crosstalk compensation is used to compensate for position errors caused by an acceleration in another axis. Functionality available as of CNC Build V3.1.3081.2 or V3.1.3108.4. Compensation process Crosstalk compensation is used to compensate an axis position depending on the acceleration of another axis. The axis whose acceleration affects the compensation value is called the master axis. The axis for which compensation is active is called the slave axis. A master axis can also be the salve axis of another master axis. The axis whose position affects the compensation value is called the adaptation axis. Up to two adaptation axes can be specified. Compensation can be configured direction-dependent. The data for crosstalk compensation is specified in the compensation value list of the slave axis. 80 Version: 1.51 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 81

Axis compensations with compensation value lists Fig. 23: Overview of crosstalk compensation TF5200 | Twin CAT 3 CNC Version: 1.51 81 Axis compensation
## Page 82

Axis compensations with compensation value lists Properties • A master axis has one or several slave axes. • A slave has only one master axis. • Crosstalk compensation can also be used for the master and slave axes of a gantry combination. • A compensation value can be specified for each acceleration. • Interpolation between accelerations is linear. • Crosstalk compensation is available for all drive types. • Compensations can only be viewed in the accelerations directly output to the drive (not in the normal display data) since compensation takes place outside normal calculations. Effectiveness Crosstalk compensation is only effective if all the following conditions are fulfilled: • The function was activated for the slave axis. • The compensation value list was provided. • Master and slave axes include linear axes, rotary axes or spindles. 82 Version: 1.51 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 83

Axis compensations with compensation value lists 4.6.1 Overview Activation Crosstalk compensation is activated in the axis machine data record of the slave axis by P-AXIS-00789 [} 86] (lr_param.crosstalk). Excerpt from the axis parameter list: : lr_param.crosstalk 1 : Crosstalk compensation can also be used for a gantry axis group. A compensation value list must then be specified for each axis in the gantry combination (crosstalk compensation slave). Compensation value lists can therefore have different settings for each gantry axis. Activating/deactivating Crosstalk compensation (ON if compensation is activated) can be switched on or off at any time when the slave axis is at standstill. The slave axis command positions displayed are offset with the offset values. Filter: These compensation values can be smoothed by using a sine-square filter. The parameter P-COMP-00064 [} 87] (n_cycles) switches the filter order to activate it. Direction dependency of compensation If position errors are dependent on the motion direction, compensation can be configured direction- dependent using the P-COMP-00084 [} 89] parameter. TF5200 | Twin CAT 3 CNC Version: 1.51 83 Axis compensation
## Page 84

Axis compensations with compensation value lists Crosstalk compensation modes Three modes are provided for crosstalk compensation. Mode 1: Fig. 24: Crosstalk compensation – Mode 1 An acceleration and the related compensation value are specified. With accelerations less than the specified values, the compensation value is linear interpolated. Mode 2: Fig. 25: Crosstalk compensation – Mode 2 Compensation is calculated using an adaptation axis which is obtained by the user conducting three measurement tests. The measurement tests are conducted at various positions on the adaptation axis. Compensation is then calculated using the position of the adaptation axis and the current acceleration. Mode 3: Fig. 26: Crosstalk compensation – Mode 3 Two adaptation axes can be specified. The user can enter up to 15 measurement tests in the compensation value list. Crosstalk compensation calculates compensation values using surface interpolation. Here, please note that the measurements must cover the complete workspace. If this is not the case, incorrect compensation values can occur with positions outside the specified measuring range. 84 Version: 1.51 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 85

Axis compensations with compensation value lists Management data of the crosstalk compensation list General data of the list body is entered in the structure kw.crosstalk.*. It contains the following elements. Management data elements Variable name Type Meaning mode UNS08 Compensation mode master_dyn_ax_nr UNS16 Logical axis number of the master axis whose acceleration is used as the input variable of the compensation list. master_pos1_ax_nr UNS16 Logical axis number of the first adaptation axis. master_pos2_ax_nr UNS16 Logical axis number of second adaptation axis n_cycles UNS16 Number of cycles of the sine-square filter. manual_activation BOOLEAN 0: (Default) The CNC activates crosstalk compensation automatically as soon as the required preconditions are met. max_points UNS32 Number of measurement tests in the compensation value list. acceleration SGN32 Acceleration [mm/s²] in case of axis excursion. deceleration SGN32 Negative acceleration [mm/s²] in case of axis excursion. velocity_dependent BOOLEAN Different compensation values for different motion directions. Compensation values of crosstalk compensation The corresponding compensation value of the slave axis is entered for each acceleration in the list kw.crosstalk.table[i].*. The compensation list is valid for positive and negative directions of acceleration. Compensation value list Variable name type Meaning position[i].ax_1 SGN64 Position of the first adaptation axis with acceleration test i position[i].ax_2 SGN64 Position of the second adaptation axis with acceleration test i position[i].correction_a SGN64 Compensation value for acceleration in positive motion ccelerate_dir_pos direction position[i].correction_d SGN64 Compensation value for deceleration in positive motion ecelerate_dir_pos direction position[i].correction_a SGN64 Compensation value for acceleration in negative motion ccelerate_dir_neg direction position[i].correction_d SGN64 Compensation value for deceleration in negative motion ecelerate_dir_neg direction 4.6.2 Parameter 4.6.2.1 Overview ID Parameter Description P-AXIS-00789 lr_param. crosstalk Activate crosstalk compensation ID Parameter Description P-COMP-00063 kw.crosstalk.master_ax_nr Logical axis number of the master axis TF5200 | Twin CAT 3 CNC Version: 1.51 85 Axis compensation
## Page 86

Axis compensations with compensation value lists P-COMP-00064 kw.crosstalk.n_cycles Number of cycles for ‘smooth switching’ P-COMP-00065 kw.crosstalk.last_index Last index of compensation value list P-COMP-00066 kw.crosstalk.table[i].accelerat Accelerations of the master axis ion P-COMP-00067 kw.crosstalk.table[i].correctio Compensation values for the slave axis n P-COMP-00080 kw.crosstalk.master_pos1_a Logical axis number of the first adaptation axis x_nr P-COMP-00081 kw.crosstalk.master_pos2_a Logical axis number of the second adaptation axis x_nr P-COMP-00082 kw.crosstalk.mode Crosstalk compensation mode P-COMP-00083 kw.crosstalk.max_points Number of measurement tests in the compensation value list P-COMP-00084 kw.crosstalk.velocity_depend Different compensation values for different motion ent directions P-COMP-00085 kw.crosstalk.position[i].ax_1 Position of the first adaptation axis with acceleration test i P-COMP-00086 kw.crosstalk.position[i].ax_2 Position of the second adaptation axis with acceleration test i P-COMP-00087 kw.crosstalk.position[i].correc Compensation value for acceleration in positive motion tion_accelerate_dir_pos direction P-COMP-00088 kw.crosstalk.position[i].correc Compensation value for acceleration in negative motion tion_accelerate_dir_neg direction P-COMP-00089 kw.crosstalk.position[i].correc Compensation value for deceleration in positive motion tion_decelerate_dir_pos direction P-COMP-00090 kw.crosstalk.position[i].correc Compensation value for deceleration in negative motion tion_decelerate_dir_neg direction 4.6.2.2 Description Axis parameter P-AXIS-00789 Activate crosstalk compensation Description This parameter activates the crosstalk compensation function. Parameter lr_param.crosstalk Data type BOOLEAN Data range 0/1 Axis types T Dimension T: ---- Default value 0 Drive types Remarks Parameter available as of CNC Build V3.1.3079.32 and higher 86 Version: 1.51 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 87

Axis compensations with compensation value lists Compensation parameters P-COMP-00063 Logical axis number of the master axis Description This parameter determines the logical number of the master axis whose acceleration is used as the input variable of the compensation value list of the slave axis. Parameter kw.crosstalk.master_dyn_ax_nr Data type UNS16 Data range 1 ≤ P-COMP-00063 ≤ MAX (UNS16) Axis types T Dimension T: ---- R,S: - Default value 0 Remarks Parameter available as of CNC Build V3.1.3081.2 or V3.1.3108.4. P-COMP-00064 Number of cycles for ‘smooth switching’ Description This parameter determines the number of cycles for which crosstalk compensation is coupled/decoupled softly. Parameter kw.crosstalk.n_cycles Data type UNS16 Data range 0 ≤ P-COMP-00064 ≤ 20 (maximum number of cycles above which coupling or decoupling is to occur) Axis types T, R, S Dimension T: ---- R, S: - Default value 0 Remarks Parameter available as of CNC Build V3.1.3079.32 P-COMP-00066 Accelerations of the master axis Description This parameter defines the acceleration of the master axis requiring a compensation of the slave axis. Parameter kw.crosstalk.acceleration Data type SGN32 Data range 0 < P-COMP-00066 < MAX(SGN32) Axis types T Dimension T: [mm/s²] R,S: - Default value 0 Remarks Parameter available as of V3.1.3081.2 and V3.1.3108.4 P-COMP-00067 Negative acceleration of the master axis Description This parameter defines the negative acceleration of the master axis which must be used to compensate the slave axis. Parameter kw.crosstalk.deceleration Data type SGN32 Data range MIN(SGN32) ≤ P-COMP-00067 < 0 Axis types T Dimension T: [mm/s²] R,S: - Default value 0 Remarks Parameter available as of V3.1.3081.2 and V3.1.3108.4 P-COMP-00065 Manual activation of crosstalk compensation TF5200 | Twin CAT 3 CNC Version: 1.51 87 Axis compensation
## Page 88

Axis compensations with compensation value lists Description The CNC activates crosstalk compensation automatically if it is selected in the axis parameters (P-AXIS-00789 [} 86]) and the required preconditions are met. If the parameter P-COMP-00065 is set to 1, crosstalk compensation must be explicitly activated by an NC command. [PROG// Selecting/deselecting axis compensations in the NC program (COMP)] Compensation is deactivated at the end of the NC program, when the CNC is reset or when the compensating axis is released. Parameter kw.crosstalk.manual_activation Data type BOOLEAN Data range 0: Automatic activation 1: Explicit activation in NC program Axis types T Dimension T: ---- R, S: - Default value 0 Remarks Parameter available as of CNC Build V3.1.3081.2 or V3.1.3108.4. P-COMP-00080 Logical axis number of the first adaptation axis Description This parameter defines the logical axis number of the first adaptation axis. The position of the adaptation axis influences compensation in Modes 2 and 3 (P- COMP-00082 [} 88]). Parameter kw.crosstalk.master_pos1_ax_nr Data type UNS16 Data range 0 < P-COMP-00080 < MAX(UNS16) Axis types T Dimension T: ---- R, S: - Default value 0 Remarks Parameter available as of V3.1.3081.2 and V3.1.3108.4 P-COMP-00081 Logical axis number of the second adaptation axis Description This parameter defines the logical axis number of the second adaptation axis. The position of the adaptation axis influences compensation in Mode 3 (P-COMP-00082 [} 88]). Parameter kw.crosstalk.master_pos2_ax_nr Data type UNS16 Data range 0 < P-COMP-00081 < MAX(UNS16) Axis types T Dimension T: ---- R, S: - Default value 0 Remarks Parameter available as of V3.1.3081.2 and V3.1.3108.4 P-COMP-00082 Crosstalk compensation mode Description This parameter specifies the compensation mode. Parameter kw.crosstalk.mode Data type UNS08 Data range 1 …3 Axis types T Dimension T: ---- R, S: - Default value 1 Remarks Parameter available as of V3.1.3081.2 and V3.1.3108.4 88 Version: 1.51 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 89

Axis compensations with compensation value lists P-COMP-00083 Number of measurement tests in the compensation value list Description This parameter sets the number of measurement tests specified in the compensation value list. Parameter kw.crosstalk.max_points Data type UNS32 Data range 0 ≤ P-COMP-00083 < 15 Axis types T Dimension T: ---- R, S: - Default value 0 Remarks Parameter available as of V3.1.3081.2 and V3.1.3108.4 P-COMP-00084 Different compensation values for different motion directions Description This parameter sets whether a compensation should use different compensation values for different motion directions. Parameter kw.crosstalk.velocity_dependent Data type BOOLEAN Data range 0 / 1 Axis types T Dimension T: ---- R, S: - Default value 0 Remarks Parameter available as of V3.1.3081.2 and V3.1.3108.4 P-COMP-00085 Position of the first adaptation axis with acceleration test Description This parameter specifies the position of the first adaptation axis for the ith acceleration test. Parameter kw.crosstalk.position[i].ax_1 Data type SGN64 Data range MIN(SGN64) ≤ P-COMP-00085 < MAX(SGN64) Axis types T Dimension T: [0.1 µm] R, S: - Default value 0 Remarks Parameter available as of V3.1.3081.2 and V3.1.3108.4 P-COMP-00086 Position of the second adaptation axis with acceleration test Description This parameter specifies the position of the second adaptation axis for the ith acceleration test. Parameter kw.crosstalk.position[i].ax_2 Data type SGN64 Data range MIN(SGN64) ≤ P-COMP-00086 < MAX(SGN64) Axis types T Dimension T: [0.1 µm] R, S: - Default value 0 Remarks Parameter available as of V3.1.3081.2 and V3.1.3108.4 P-COMP-00087 Compensation value for acceleration in positive motion direction Description Compensation value at position i for acceleration in positive motion direction. Parameter kw.crosstalk.position[i].correction_accelerate_dir_pos Data type SGN64 Data range MIN(SGN64) ≤ P-COMP-00087 < MAX(SGN64) Axis types T TF5200 | Twin CAT 3 CNC Version: 1.51 89 Axis compensation
## Page 90

Axis compensations with compensation value lists Dimension T: [0.1 µm] R, S: - Default value 0 Remarks Parameter available as of V3.1.3081.2 and V3.1.3108.4 P-COMP-00088 Compensation value for acceleration in negative motion direction Description Compensation value at position i for acceleration in negative motion direction. Parameter kw.crosstalk.position[i].correction_accelerate_dir_neg Data type SGN64 Data range MIN(SGN64) ≤ P-COMP-00088 < MAX(SGN64) Axis types T Dimension T: [0.1 µm] R, S: - Default value 0 Remarks Parameter available as of V3.1.3081.2 and V3.1.3108.4 This parameter is only active if P-COMP-00084 [} 89] is activated. P-COMP-00089 Compensation value for deceleration in positive motion direction Description Compensation value at position i for deceleration in positive motion direction. Parameter kw.crosstalk.position[i].correction_decelerate_dir_pos Data type This parameter is only active if P-COMP-00084 is activated. Data range MIN(SGN64) ≤ P-COMP-00089 < MAX(SGN64) Axis types T Dimension T: [0.1 µm] R, S: - Default value 0 Remarks Parameter available as of V3.1.3081.2 and V3.1.3108.4 P-COMP-00090 Compensation value for deceleration in negative motion direction Description Compensation value at position i for deceleration in negative motion direction. Parameter kw.crosstalk.position[i].correction_decelerate_dir_neg Data type SGN64 Data range MIN(SGN64) ≤ P-COMP-00090 < MAX(SGN64) Axis types T Dimension T: [0.1 µm] R, S: - Default value 0 Remarks Parameter available as of V3.1.3081.2 and V3.1.3108.4 This parameter is only active if P-COMP-00084 [} 89] is activated. 4.6.2.3 CNC objects Name CROSSTALK::activated Description This object reads whether crosstalk compensation is activated by P-AXIS-00789 [} 86] . Task GEO (Port 551) Index group 0x120300 Index offset 0x<A >01F4 ID Data type BOOLEAN Length 1 Attributes read Unit [-] Remarks Available as of CNC Build V3.1.3079.32 Name CROSSTALK::actual_offset Description This object reads the current effective offset of crosstalk compensation. 90 Version: 1.51 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 91

Axis compensations with compensation value lists Task GEO (Port 551) Index group 0x120300 Index offset 0x<A >01F7 ID Data type SGN32 Length 4 Attributes read Unit [Incr.] Remarks Available as of CNC Build V3.1.3079.32 Name CROSSTALK::delta_offset Description This object reads the change in compensation value in the current crosstalk compensation cycle. Task GEO (Port 551) Index group 0x120300 Index offset 0x<A >01F6 ID Data type SGN32 Length 4 Attributes read Unit [Incr.] Remarks Available as of CNC Build V3.1.3079.32 Name CROSSTALK::end_offset Description This object reads the compensation value of crosstalk compensation at the current position without filters. Task GEO (Port 551) Index group 0x120300 Index offset 0x<A >01F8 ID Data type SGN32 Length 4 Attributes read Unit [Incr.] Remarks Available as of CNC Build V3.1.3079.32 4.6.3 Example of a compensation value list Crosstalk compensation with Mode 1 # **************************************** # Axis compensation data for Z axis # **************************************** kopf.achs_nr 3 kopf.log_achs_name Z kw.crosstalk.mode 1 kw.crosstalk.master_dyn_ax_nr 1 /*Logical axis number of the master axis */ kw.crosstalk.velocity_dependent TRUE # kw.crosstalk.acceleration 10000 ( mm/s^2) kw.crosstalk.deceleration -10000 ( mm/s^2) kw.crosstalk.position[0].correction_accelerate_dir_pos 25 (0.1 um) Kw.crosstalk.position[0].correction_decelerate_dir_pos 25 Kw.crosstalk.position[0].correction_accelerate_dir_neg 50 kw.crosstalk.position[0].correction_decelerate_dir_neg 50 Crosstalk compensation with Mode 2 # **************************************** # Axis compensation data for Z axis # **************************************** kopf.achs_nr 3 kopf.log_achs_name Z kw.crosstalk.mode 2 kw.crosstalk.master_dyn_ax_nr 1 /*Logical axis number of the master axis */ kw.crosstalk.velocity_dependent TRUE # kw.crosstalk.acceleration 1000 ( mm/s^2 ) kw.crosstalk.deceleration -1000 ( mm/s^2 ) TF5200 | Twin CAT 3 CNC Version: 1.51 91 Axis compensation
## Page 92

Axis compensations with compensation value lists kw.crosstalk.position[0].ax_1 0 (0.1 um ) kw.crosstalk.position[0].correction_accelerate_dir_pos 50 (0.1 um) Kw.crosstalk.position[0].correction_decelerate_dir_pos 50 Kw.crosstalk.position[0].correction_accelerate_dir_neg 60 kw.crosstalk.position[0].correction_decelerate_dir_neg 60 kw.crosstalk.position[1].ax_1 1000 (0.1 um) kw.crosstalk.position[1].correction_accelerate_dir_pos 70 (0.1 um) Kw.crosstalk.position[1].correction_decelerate_dir_pos 70 Kw.crosstalk.position[1].correction_accelerate_dir_neg 80 kw.crosstalk.position[1].correction_decelerate_dir_neg 80 kw.crosstalk.position[2].ax_1 2000 ( 0.1 um) kw.crosstalk.position[2].correction_accelerate_dir_pos 50 (0.1 um) kw.crosstalk.position[2].correction_decelerate_dir_pos 50 Kw.crosstalk.position[2].correction_accelerate_dir_neg 60 kw.crosstalk.position[2].correction_decelerate_dir_neg 60 Crosstalk compensation with Mode 3 with 9 measuring points # **************************************** # Axis compensation data for Z axis # **************************************** kopf.achs_nr 3 kopf.log_achs_name Z kw.crosstalk.mode 3 kw.crosstalk.master_dyn_ax_nr 2 ( Logical axis number of the master axis ) kw.crosstalk.master_pos1_ax_nr 1 ( Logical axis number of the first adaptation axis ) kw.crosstalk.master_pos2_ax_nr 3 ( Logical axis number of the second adaptation axis ) kw.crosstalk.max_points 9 ( Number of measuring points) kw.crosstalk.velocity_dependent TRUE # kw.crosstalk.acceleration_pos 1000 ( mm/s^2 ) kw.crosstalk.acceleration_neg -1000 ( mm/s^2 ) kw.crosstalk.position[0].ax_1 0 ( 0.1 um) kw.crosstalk.position[0].ax_2 0 ( 0.1 um) kw.crosstalk.position[0].acc_pos_vel_pos_correction 60 ( 0.1 um ) kw.crosstalk.position[0].acc_pos_vel_neg_correction 60 kw.crosstalk.position[0].acc_neg_vel_pos_correction 70 kw.crosstalk.position[0].acc_neg_vel_neg_correction 70 #… #… kw.crosstalk.position[8].ax_1 3000 ( 0.1 um ) kw.crosstalk.position[8].ax_2 3000 ( 0.1 um ) kw.crosstalk.position[8].acc_pos_vel_pos_correction 50 ( 0.1 um ) kw.crosstalk.position[8].acc_pos_vel_neg_correction 50 kw.crosstalk.position[8].acc_neg_vel_pos_correction 60 kw.crosstalk.position[8].acc_neg_vel_neg_correction 60 4.6.4 Error messages Errors in the configuration of crosstalk compensation result in deactivation of the function for the affected axis and to the output of an error message or warning message. Overview of error messages: • ID 70622 • ID 70625 • ID 70626 • ID 70627 • ID 70629 • ID 70631 • ID 70632 • ID 70657 • ID 70658 • ID 70659 92 Version: 1.51 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 93

Axis compensations with compensation value lists • ID 70660 TF5200 | Twin CAT 3 CNC Version: 1.51 93 Axis compensation
## Page 94

Other configuration options for axis compensation 5 Other configuration options for axis compensation 5.1 Selecting/deselecting axis compensation in the NC program Axis compensations switched off by the COMP command has a global NC program effect, i.e. com- pensations are not automatically activated at program end. They must be switched back on expli- citly using the COMP command in the subsequent NC program. Syntax: <axis_name> [ COMP [ [ ON | OFF [ BACKLASH CROSS PLANE LEAD TEMP FRICT CROSSTALK] ] | OFF_ALL ] [ NO_MOVE ] { \ } ] <axis_name> Name of the axis COMP Identifier to select/deselect axis-specific compensation. Must always be programmed as the first keyword. ON Activates programmed compensation(s) OFF Deactivates programmed compensation(s) BACKLASH Keyword for backlash compensation [as of Build V3.1.3081.05] CROSS Keyword for cross compensation PLANE Keyword for plane compensation LEAD Keyword for spindle leadscrew error compensation TEMP Keyword for temperature compensation FRICT Keyword for friction compensation [as of Build V2.11.2022.05] CROSSTALK Keyword for crosstalk compensation [as of Build V3.1.3079.32] OFF_ALL Switch off all active compensations. No further compensation keywords may be programmed after the keyword. NO_MOVE By default the position offset occurring when axis compensations are switched on/ off is executed before NC program processing is continued. The keyword NO_MOVE suppresses this motion. The channel is initialised with the changed axis position. The position offset is only executed at the next axis motion programmed in the NC program. \ Separator ("backslash") for clear programming of the command over multiple lines. Axis-specific programming ;Deactivate cross and plane compensation in the X axis N10 X[COMP OFF CROSS PLANE ;Compensation programming of multiple axes in an NC block N50 X[COMP OFF CROSS] Y[COMP ON LEAD TEMP] ;Deactivate all compensations in the Z axis N100 Z[COMP OFF_ALL] ;Deactivate all compensations of the Y axis without axis motion N200 Y[COMP OFF_ALL NO_MOVE] 94 Version: 1.51 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 95

Other configuration options for axis compensation 5.2 Checking the states of axis compensation in the NC program V. A variables The following V. A. variables can be used to check from the NC program whether a compensation programmable via the COMP command is initialised or already active for a specific axis and the value of the compensation.. Read access to the variables with the identifier L causes flushing of the NC chan- Flush nel. For example, flushing the NC channel can result in the error ID 20651 if tool radius compensation (G41/G42) is active. Check for initialisation CROSS_COMP_INIT. Is cross compensation initialised for the Boolean 0 , 1 L Flush X axis? If yes, then 1 PLANE_COMP_INIT. X Is plane compensation initialised for the Boolean 0 , 1 L Flush axis? If yes, then 1 LEAD_COMP_INIT. X Is leadscrew error compensation activated Boolean 0 , 1 L Flush for the axis? If yes, then 1 TEMP_COMP_INIT. X Is temperature compensation initialised for Boolean 0 , 1 L Flush the axis? If yes, then 1 FRICT_COMP_INIT. X Is friction compensation initialised for the Boolean 0, 1 L Flush axis? If yes, then 1 CROSSTALK_COMP_ Is crosstalk compensation initialised for the Boolean 0, 1 L Flush INIT. X axis? If yes, then 1 Check for activation CROSS_COMP_ACTI Is cross compensation active for the axis? If Boolean 0 , 1 L Flush VE. X yes, then 1 PLANE_COMP_ACTIV Is plane compensation active for the axis? If Boolean 0 , 1 L Flush E. X yes, then 1 LEAD_COMP_ACTIVE Is leadscrew error compensation active for Boolean 0 , 1 L Flush . X the axis? If yes, then 1 TEMP_COMP_ACTIV Is temperature compensation active for the Boolean 0 , 1 L Flush E. X axis? If yes, then 1 FRICT_COMP_ACTIV Is friction compensation active for the axis? Boolean 0, 1 L Flush E. X If yes, then 1 CROSSTALK_COMP_ Is crosstalk compensation active for the Boolean 0, 1 L Flush ACTIVE. X axis? If yes, then 1 BACKLASH_COMP_A Is backlash compensation active for the Boolean 0, 1 L Flush CTIVE. X axis? If so, then 1 [as of V3.1.3081.05] TF5200 | Twin CAT 3 CNC Version: 1.51 95 Axis compensation
## Page 96

Other configuration options for axis compensation Read current compensation values: As of CNC Build V2.11.2810 the following V. A. variables of the current compensation values are available. LEAD_COMP_CURR. Current compensation value of LSEC for the Real [mm, inch] L Flush X axis CROSS_COMP_CUR Current compensation value of cross Real [mm, inch] L Flush R. X compensation for the axis PLANE_COMP_CURR Current compensation value of plane Real [mm, inch] L Flush . X compensation for the axis TEMP_COMP_CURR. Current compensation value of temperature Real [mm, inch] L Flush X compensation for the axis FRICT_COMP_CURR. Current compensation value of friction Real [mm, inch] L Flush X compensation for the axis CROSSTALK_COMP_ Current compensation value of crosstalk Real [mm, inch] L Flush CURR. X compensation for the axis BACKLASH_COMP_C Current compensation value of backlash Real [mm, inch] L Flush URR. X compensation for the axis [as of V3.1.3081.05] Check the states of the axis compensation N010 G74 X1 Y2 Z3 N020 $IF V. A. CROSS_COMP_INIT. X != TRUE N030 #MSG ["Cross_Comp for X not init."] N040 $ENDIF N050 $IF V. A. TEMP_COMP_INIT. X != TRUE N060 #MSG ["Temp_Comp for X not init."] N070 $ENDIF N080 X [ COMP ON CROSS TEMP ] N090 $IF V. A. CROSS_COMP_ACTIVE[0] != TRUE N100 #MSG ["Cross_Comp for X not active"] N110 $ENDIF N120 $IF V. A. TEMP_COMP_ACTIVE[0] != TRUE N130 #MSG ["Temp_Comp for X not active"] N140 $ENDIF N150 ... 96 Version: 1.51 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 97

Other configuration options for axis compensation 5.3 Monitoring of effectiveness of axis compensations in automatic mode Some axis compensations must fulfil certain preconditions before they can be active. To ensure that the selected axis compensations are operative in automatic mode, the required compensations for processing the NC program can be specified bit-encoded in the parameter 'lr_param.prog_movement_requires_compensations’ (see P-AXIS-00465). The CNC then outputs the error message P-ERR-70435 if the axis is moved in automatic mode and the specified axis compensations are not active. However, in manual mode or during homing [FCT-M1// Description], the axis can be moved without compensations. For example, this monitoring function may be practical to prevent the production of an inaccurate workpiece if there are errors in the compensation table. Prerequisites The following conditions exist for the effectiveness of axis compensations: 1. The compensation table may contain no errors, see [COMP]. 2. The axis must be referenced for spindle leadscrew error compensation and temperature compensa- tion. 3. The master axes must be referenced for cross and plane compensation.. 4. The drive releases must be set for cross and plane compensation before NC program start. Activating the monitoring function in the axis parameter list Variable name Type Meaning lr_param.prog_movement_requires_com UNS32 Bit-encoded specification of the required pensations compensations The CNC only generates error messages for compensations which are also enabled in the axis parameter list. TF5200 | Twin CAT 3 CNC Version: 1.51 97 Axis compensation
## Page 98

Other configuration options for axis compensation Bit encoding The table below contains the bit encoding for axis compensations. The bit identifier can also be used to specify the required compensations: Bit Identifier Axis compensation 0x1 BACKLASH Backlash compensation 0x2 LEAD Leadscrew error compensation 0x4 TEMP Temperature compensation 0x8 CROSS Cross compensation 0x10 PLANE Plane compensation Monitoring the effectiveness of axis compensations in automatic mode The following entry is required in the axis parameter list to monitor spindle leadscrew error compensation and cross compensation: lr_param.prog_movement_requires_compensations LEAD | CROSS The two compensations must be selected so that the CNC outputs an error message in automatic mode when the conditions are no longer met. lr_param.ssfk 1 lr_param.crosscomp 1 98 Version: 1.51 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 99

Support and Service 6 Support and Service Beckhoff and their partners around the world offer comprehensive support and service, making available fast and competent assistance with all questions related to Beckhoff products and system solutions. Download finder Our download finder contains all the files that we offer you for downloading. You will find application reports, technical documentation, technical drawings, configuration files and much more. The downloads are available in various formats. Beckhoff's branch offices and representatives Please contact your Beckhoff branch office or representative for local support and service on Beckhoff products! The addresses of Beckhoff's branch offices and representatives round the world can be found on our internet page: www.beckhoff.com You will also find further documentation for Beckhoff components there. Beckhoff Support Support offers you comprehensive technical assistance, helping you not only with the application of individual Beckhoff products, but also with other, wide-ranging services: • support • design, programming and commissioning of complex automation systems • and extensive training program for Beckhoff system components Hotline: +49 5246 963-157 e-mail: support@beckhoff.com Beckhoff Service The Beckhoff Service Center supports you in all matters of after-sales service: • on-site service • repair service • spare parts service • hotline service Hotline: +49 5246 963-460 e-mail: service@beckhoff.com Beckhoff Headquarters Beckhoff Automation Gmb H & Co. KG Huelshorstweg 20 33415 Verl Germany Phone: +49 5246 963-0 e-mail: info@beckhoff.com web: www.beckhoff.com TF5200 | Twin CAT 3 CNC Version: 1.51 99 Axis compensation
## Page 100

Index Index B P-COMP-00030 47 P-COMP-00032 47 backlash P-COMP-00033 47 Compensation 10 P-COMP-00041 77 mechanical 9 P-COMP-00042 77 negative 10 P-COMP-00043 77 positive 9 P-COMP-00044 78 Backlash compensation 10 P-COMP-00045 78 P-COMP-00046 78 P-COMP-00047 78 M P-COMP-00057 60 Mechanical backlash 9 P-COMP-00058 78 P-COMP-00059 57 P-COMP-00060 32 N P-COMP-00061 44 Negative backlash 10 P-COMP-00062 79 P-COMP-00063 87 P-COMP-00064 87 P P-COMP-00065 87 P-AXIS-00021 11 P-COMP-00066 87 P-AXIS-00047 31 P-COMP-00067 87 P-AXIS-00103 11 P-COMP-00080 88 P-AXIS-00174 44 P-COMP-00081 88 P-AXIS-00175 57 P-COMP-00082 88 P-AXIS-00243 57 P-COMP-00083 89 P-AXIS-00271 20 P-COMP-00084 89 P-AXIS-00272 20 P-COMP-00085 89 P-AXIS-00273 20 P-COMP-00086 89 P-AXIS-00274 21 P-COMP-00087 89 P-AXIS-00275 21 P-COMP-00088 90 P-AXIS-00482 21 P-COMP-00089 90 P-AXIS-00522 77 P-COMP-00090 90 P-AXIS-00789 86 Positive backlash 9 P-COMP-00003 32 P-COMP-00004 32 P-COMP-00005 33 P-COMP-00006 33 P-COMP-00007 34 P-COMP-00008 44 P-COMP-00009 45 P-COMP-00010 45 P-COMP-00011 45 P-COMP-00012 46 P-COMP-00013 46 P-COMP-00014 46 P-COMP-00015 46 P-COMP-00016 46 P-COMP-00017 58 P-COMP-00018 58 P-COMP-00019 58 P-COMP-00020 58 P-COMP-00021 59 P-COMP-00022 59 P-COMP-00023 59 P-COMP-00024 59 P-COMP-00025 60 P-COMP-00026 33 P-COMP-00027 47 P-COMP-00028 60 P-COMP-00029 33 100 Version: 1.51 TF5200 | Twin CAT 3 CNC Axis compensation
## Page 102

More Information: www.beckhoff.com/TF5200 Beckhoff Automation Gmb H & Co. KG Hülshorstweg 20 33415 Verl Germany Phone: +49 5246 9630 info@beckhoff.com www.beckhoff.com
