---
title: "TF5290_cnc_cutting_plus_en"
product: "TF5290"
category: "Motion_Control"
tags: ["NC"]
language: "EN"
document_type: "Manual"
version: "1.021"
source_pdf: "https://download.beckhoff.com/download/Document/automation/twincat3/TF5290_cnc_cutting_plus_en.pdf"
release_date: "2025-06-10"
---
Functional description | EN TF5290 | Twin CAT 3 CNC Cutting Plus 6/10/2025 | Version: 1.021
## Page 3

Notes on the documentation Notes on the documentation This description is only intended for the use of trained specialists in control and automation engineering who are familiar with the applicable national standards. It is essential that the documentation and the following notes and explanations are followed when installing and commissioning the components. It is the duty of the technical personnel to use the documentation published at the respective time of each installation and commissioning. The responsible staff must ensure that the application or use of the products described satisfy all the requirements for safety, including all the relevant laws, regulations, guidelines and standards. Disclaimer The documentation has been prepared with care. The products described are, however, constantly under development. We reserve the right to revise and change the documentation at any time and without prior announcement. No claims for the modification of products that have already been supplied may be made on the basis of the data, diagrams and descriptions in this documentation. Trademarks Beckhoff®, Twin CAT®, Twin CAT/BSD®, TC/BSD®, Ether CAT®, Ether CAT G®, Ether CAT G10®, Ether CAT P®, Safety over Ether CAT®, Twin SAFE®, XFC®, XTS® and XPlanar® are registered trademarks of and licensed by Beckhoff Automation Gmb H. Other designations used in this publication may be trademarks whose use by third parties for their own purposes could violate the rights of the owners. Patent Pending The Ether CAT technology is patent protected, in particular by the following applications and patents: EP1590927, EP1789857, EP1456722, EP2137893, DE102015105702 with corresponding applications or registrations in various other countries. Ether CAT® is registered trademark and patented technology, licensed by Beckhoff Automation Gmb H, Germany Copyright © Beckhoff Automation Gmb H & Co. KG, Germany. The reproduction, distribution and utilisation of this document as well as the communication of its contents to others without express authorisation are prohibited. Offenders will be held liable for the payment of damages. All rights reserved in the event of the grant of a patent, utility model or design. TF5290 | Twin CAT 3 CNC Version: 1.021 3 Cutting Plus
## Page 4

General and safety instructions General and safety instructions Icons used and their meanings This documentation uses the following icons next to the safety instruction and the associated text. Please read the (safety) instructions carefully and comply with them at all times. Icons in explanatory text 1. Indicates an action. ð Indicates an action statement. DANGER Acute danger to life! If you fail to comply with the safety instruction next to this icon, there is immediate danger to human life and health. CAUTION Personal injury and damage to machines! If you fail to comply with the safety instruction next to this icon, it may result in personal injury or damage to machines. NOTICE Restriction or error This icon describes restrictions or warns of errors. Tips and other notes This icon indicates information to assist in general understanding or to provide additional informa- tion. General example Example that clarifies the text. NC programming example Programming example (complete NC program or program sequence) of the described function or NC com- mand. Specific version information Optional or restricted function. The availability of this function depends on the configuration and the scope of the version. 4 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 5

Table of contents Table of contents Notes on the documentation.................................................................................................................... 3 General and safety instructions.............................................................................................................. 4 1 Lift functionality........................................................................................................................................ 9 1.1 Overview........................................................................................................................................... 9 1.2 Description...................................................................................................................................... 10 1.2.1 Advanced Lifting............................................................................................................... 10 1.2.2 Lifting................................................................................................................................ 14 1.2.3 Permitted functions.......................................................................................................... 22 1.2.4 Limitations and error response......................................................................................... 22 1.2.5 Differences between Advanced Lifting and Lifting........................................................... 23 1.2.6 Display data - status display............................................................................................ 25 1.3 Programming................................................................................................................................... 26 1.4 Parameter....................................................................................................................................... 28 1.4.1 Overview.......................................................................................................................... 28 1.4.2 Description....................................................................................................................... 29 2 Micro Joints.............................................................................................................................................. 36 2.1 Pre-output of M functions (Micro Joint)............................................................................................ 36 2.1.1 Limitations, special cases................................................................................................ 39 2.1.2 Tolerance parameters for the permitted deviation between real and planned pre-output positions of an M/H function............................................................................................. 43 2.1.3 Explicit feed programming for Micro Joints (#CHANNEL SET)......................................... 44 3 Tube processing..................................................................................................................................... 48 3.1 Overview......................................................................................................................................... 48 3.2 Description...................................................................................................................................... 48 3.3 Machining variants (3/4-axis).......................................................................................................... 52 3.3.1 Round tube, lateral surface.............................................................................................. 53 3.3.2 Round tube, projection..................................................................................................... 58 3.3.3 Polygonal tube, profiled tube............................................................................................ 62 3.3.4 Open polygonal tube / profiled tube (L/U profiles)............................................................ 72 3.4 Machining variants (5/6-axis).......................................................................................................... 81 3.4.1 Round tube, lateral surface.............................................................................................. 81 3.4.2 Polygonal tube, profiled tube.......................................................................................... 111 3.5 Block search and profiled tube machining.................................................................................... 115 3.6 Parameter..................................................................................................................................... 116 3.6.1 Overview........................................................................................................................ 116 3.6.2 Description..................................................................................................................... 118 4 Support and Service............................................................................................................................. 143 Index....................................................................................................................................................... 144 TF5290 | Twin CAT 3 CNC Version: 5 Cutting Plus
## Page 6

Table of contents 6 Version: TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 7

List of figures List of figures Fig. 1 Description of lifting in 3 NC blocks.............................................................................................. 10 Fig. 2 Target position > limit................................................................................................................... 13 Fig. 3 Premature termination of lifting due to a syntax error.................................................................. 14 Fig. 4 Structure of planning and executing the LIFT motion.................................................................. 15 Fig. 5 Contour smoothing with automatic activation/deactivation at LIFT start/end............................... 17 Fig. 6 Contour smoothing without lift axis movement before/after lifting................................................ 18 Fig. 7 Diagram of Look Ahead range overflow....................................................................................... 19 Fig. 8 Structure of the planning and processing of the lifting motion with time-based coupling............. 24 Fig. 9 Comparison of lifting heights reachable with Advanced Lifting (green curve) vs Lifting (blue curve)........................................................................................................................................... 24 Fig. 10 Path velocity override with Advanced Lifting................................................................................ 25 Fig. 11 Single-row lifting........................................................................................................................... 28 Fig. 12 Programmed Micro Joints in the part............................................................................................ 37 Fig. 13 Limitation of the pre-output path of the M function to 10 blocks................................................... 40 Fig. 14 Explicit limitation of the lead distance of the M function............................................................... 41 Fig. 15 Theoretical overlapping of Micro Joints in the part........................................................................ 42 Fig. 16 Limitation of overlapping of Micro Joints in the part...................................................................... 42 Fig. 17 Attempted pre-output with another M/H function of the MVS_SNS type...................................... 43 Fig. 18 Feed definition with Micro Joints................................................................................................... 44 Fig. 19 Feed with block global Micro Joints.............................................................................................. 45 Fig. 20 Increased feed with M11, decreased feed with M12.................................................................... 46 Fig. 21 Suppress VECTOR_LIMIT during Micro Joint.............................................................................. 47 Fig. 22 Round tube lateral surface machining.......................................................................................... 49 Fig. 23 Tube machining with Cartesian 3-axis machine........................................................................... 50 Fig. 24 Path programming on the lateral surface..................................................................................... 53 Fig. 25 Axis structure............................................................................................................................... 55 Fig. 26 X-U contour line projection........................................................................................................... 57 Fig. 27 Programming with path projection................................................................................................ 58 Fig. 28 Axis structure............................................................................................................................... 60 Fig. 29 X-Y contour line projection........................................................................................................... 61 Fig. 30 Programming on the lateral surface............................................................................................. 62 Fig. 31 Parameterisation examples for profiled tubes.............................................................................. 64 Fig. 32 Lateral surface coordinate system with rectangular profile.......................................................... 65 Fig. 33 Axis structure............................................................................................................................... 67 Fig. 34 Output of a technology function at a profile rounding................................................................... 68 Fig. 35 Path dynamics adjustment on profile rounding............................................................................ 69 Fig. 36 X-U contour line projection........................................................................................................... 71 Fig. 37 Examples of open profiles, U and L profile.................................................................................. 73 Fig. 38 Clamping examples...................................................................................................................... 74 Fig. 39 Defining an open U profile specifying the open edges................................................................. 75 Fig. 40 Examples of programming parameters for open profiles............................................................. 77 Fig. 41 X-U flat projection of geometry..................................................................................................... 79 Fig. 42 Defining an open L profile with rotation centre point offset.......................................................... 80 Fig. 43 TCP rotates about the tube centre axis, tube top point................................................................ 82 TF5290 | Twin CAT 3 CNC Version: 1.021 7 Cutting Plus
## Page 8

List of figures Fig. 44 Lateral surface machining with tube axis parallel to Y................................................................. 83 Fig. 45 Lateral surface machining with tube axis parallel to X................................................................. 84 Fig. 46 Lateral surface machining with tube axis parallel to X................................................................. 85 Fig. 47 Lateral surface machining with tube axis parallel to Y................................................................. 86 Fig. 48 Lateral surface machining with tube axis parallel to Y................................................................. 87 Fig. 49 Lateral surface machining with tube axis parallel to X................................................................. 88 Fig. 50 Lateral surface machining with tube axis parallel to X................................................................. 89 Fig. 51 Lateral surface machining with tube axis parallel to Y................................................................. 90 Fig. 52 Lateral surface machining with tube axis parallel to X................................................................. 91 Fig. 53 Lateral surface machining with tube axis parallel to Y................................................................. 92 Fig. 54 TCP drifts along the XZ, YZ plane............................................................................................... 93 Fig. 55 Lateral surface machining with AU kinematics............................................................................. 94 Fig. 56 Lateral surface machining with BV kinematics............................................................................. 95 Fig. 57 Starting position for motion resumption........................................................................................ 115 Fig. 58 Axis position after motion resumption.......................................................................................... 116 Fig. 59 Kinematic offsets for lateral surface machining............................................................................ 119 Fig. 60 Tube projection transformation kinematic offsets......................................................................... 121 Fig. 61 Profiled tube transformation kinematic offsets............................................................................. 123 Fig. 62 Offset for workpiece clamp position............................................................................................. 124 Fig. 63 Selection on the plane lateral surface.......................................................................................... 125 Fig. 64 Selection on profile rounding........................................................................................................ 126 Fig. 65 Parameters of AB tool head......................................................................................................... 128 Fig. 66 Parameters for BA orientation head............................................................................................. 130 Fig. 67 Parameters for CA orientation head............................................................................................. 132 Fig. 68 Parameters for CB orientation head............................................................................................. 134 Fig. 69 Cardanic head in zero position, HD6=0....................................................................................... 136 Fig. 70 Parameters of AU tool head......................................................................................................... 137 Fig. 71 Parameters of BV tool head......................................................................................................... 139 8 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 9

Lift functionality 1 Lift functionality 1.1 Overview Task When positioning operations are executed in the XY plane, the Z axis is lifted as far above the workpiece as possible to avoid collision with cut-out parts between cutting operations (G01/G02/G03, M04 laser on, M05 laser off). This is called Smart Collision Guard. The CNC automatically calculates motion of the Z axis between contour elements. Characteristics The user can specify a maximum lifting distance to lift the Z axis. Lifting/lowering is executed automatically and across blocks so that the path feedrate in the XY plane is reduced as little as possible and the Z axis reaches the specified target height at the start of the next machining contour. The path motion is normally not affected by the lifting/lowering motion, i.e. the Z axis can be attached and detached without feed stop (on the path). The Z axis moves with jerk limiting. The Smart Collision Guard is available in 2 methods. • Advanced Lifting [} 10] (time-based method) • Lifting [} 14] (path-based method) This document uses the terms lift axis and Z axis synonymously. Parameterisation Neither of the two methods is activated in the basic setting. In order to use the recommended Advanced Lifting function, the section Parametrisation [} 12] describes the start-up parameters P-STUP-00060 and P-STUP-00070 where the value FCT_LIFT_UP_TIME is assigned. In addition, the channel parameter P-CHAN-00345 “enable_time_based_lift“ must be set to 1. The P-STUP-00060 is also assigned the value FCT_LIFT_UP . Do not set the channel parameter P- CHAN-00345 "enable_time_based_lift". Programming The lift range is defined by the two commands Z[LIFT_START...] and Z[LIFT_END]. The lift axis is automatically moved by the lift function in the intermediate motion blocks. This function is an additional option requiring a license. Mandatory note on references to other documents For the sake of clarity, links to other documents and parameters are abbreviated, e.g. [PROG] for the Programming Manual or P-AXIS-00001 for an axis parameter. For technical reasons, these links only function in the Online Help (HTML5, CHM) but not in pdf files since pdfs do not support cross-linking. TF5290 | Twin CAT 3 CNC Version: 1.021 9 Cutting Plus
## Page 10

Lift functionality 1.2 Description This functionality has been available since CNC Build V2.11.2800. Lifting minimises the risk of tool collisions, e.g. during laser cutting, with workpiece parts that are already cut out. Z position Maximum lifting hight Z max Jerk limited lifting Jerk limited Z 2 lowering Z 1 Block 1 Block 2 Block 3 Travel path Start End Fig. 1: Description of lifting in 3 NC blocks A comparison table of the two methods is contained in the section Differences between Advanced Lifting and Lifting. [} 23] 1.2.1 Advanced Lifting This method is recommended. Advantages of the time-based method. • A greater lifting height can be achieved using Advanced Lifting. • Greater collision protection • Advanced Lifting has no negative impact on lifting height caused by changes in feed rate or path override. • Conventional lifting may result in Z axis overload. Advanced Lifting cannot be used when the HCS slope is employed. A further exception is the computing time if the aim is to achieve a shorter computing time for technical reasons. 10 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 11

Lift functionality 1.2.1.1 Advanced Lifting properties The target position and position limiting are specified when starting the LIFT motion. If the start or target position of the lift axis is outside the programmed maximum lifting height, the maximum height is increased, e.g. for lifting to the maximum of the start and target positions. Therefore, any Max/Min limiting of the position has no effect. If a height difference [POS] was programmed for the lifting motion and the lift axis dynamics are not sufficient to reach the required height in the time defined by the path feed rate, the path feed rate is reduced automatically. In extreme cases (e.g. if the motion path = 0), the path axes stop and the lift axis is linearly positioned at the target position. Waiting conditions (M functions with synchronisation, G04, M00, etc.) are possible during lifting/lowering. With Advanced Lifting the lift axis moves on to target height. HSC (Type 3 slope) is not supported with Advanced Lifting. Error ID 120711 is output. For the Advanced Lifting lift function, only the slope types STEP, TRAPEZ or SIN² are permitted. (See #SLOPE[TYPE=…]) Minimum path length The channel parameter P-CHAN-00244 defines the minimum path length. If the path motion between lift start and lift end is shorter than the minimum path length, the lifting motion is suppressed. The programmed target position of the Z axis is approached directly. When P-CHAN-00244 = 0 is in the default setting, the lifting motion is always executed irrespective of the real path distance. TF5290 | Twin CAT 3 CNC Version: 1.021 11 Cutting Plus
## Page 12

Lift functionality 1.2.1.2 Parameterisation The channel parameter P-CHAN-00345 is switched when it is enabled to Advanced Lifting. These calculations must be carried out in the GEO real-time task of the controller. To enable this function, the function must also be activated in the controller start-up list in the parameters P- STUP-00060 and P-STUP-00070 by the keyword FCT_LIFT_UP_TIME. Automatic lifting/lowering is currently not included in the basic scope of functions (FCT_DEFAULT) and must therefore always be activated. Further information on the start-up list parameter P-STUP-00060 The parameter P-STUP-00060 in the start-up list defines the individual functions in the contour planning. As a result, individual functions can be selected for testing, deselected for performance reasons (by not setting them) or activated as a specific function. For Advanced Lifting the identifier FCT_LIFT_UP_TIME must be set. Advanced Lifting P-STUP-00060 configuration.channel[0].path_preparation.function FCT_DEFAULT | FCT_LIFT_UP_TIME Further information on the start-up list parameter P-STUP-00070 In the start-up list the parameter P-STUP-00070 defines the individual functions of the path interpolator. As a result, individual functions can be selected for testing, deselected for performance reasons (by not setting them) or activated as a specific function. To activate Advanced Lifting the identifier FCT_LIFT_UP_TIME must be set. Advanced Lifting P-STUP-00070 configuration.channel[0].interpolator.function FCT_DEFAULT | FCT_LIFT_UP_TIME 12 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 13

Lift functionality 1.2.1.3 Special cases Special case 1: POS greater than POS_LIMIT If the specified lift axis target position is outside the limit, the limit has no effect. This means that the axis is positioned at the target position at the start of the lifting motion and not at the end. This also applies if the start position > limit. Z position Target position Z 2 Maximum lifting hight Z max Start position Z 1 Block 1 Block 2 Block 3 Travel path Start End Fig. 2: Target position > limit POS greater than POS_LIMIT N10 Z10 N20 Z[LIFT_START POS=40 POS_LIMIT=30] N30 X10 N40 X20 N50 X35 N60 Z[LIFT_END] TF5290 | Twin CAT 3 CNC Version: 1.021 13 Cutting Plus
## Page 14

Lift functionality Special case 2: Syntax error within the lift range Programming error within START – END In the event of a syntax error in the NC program, the path motion is always executed up to the last correctly decoded point in the NC program. If the error location lies within a LIFT_START – LIFT_END range, the lift axis is positioned at the maximum lift height at the error location. Z position expected lifting motion real lifting motion caused by syntax error Z max Z Target Z Start Travel path Start Error End Fig. 3: Premature termination of lifting due to a syntax error Syntax error within the lift range N10 Z10 N20 Z[LIFT_START POS_LIMIT=30] N30 X10 N40 X20 N50 X35 ... N100 syntax error ... N560 X50 N570 X60 N580 X100 N600 Z[LIFT_END] Special case 3: #FLUSH, #FLUSH WAIT Flushing the channel (#FLUSH, #FLUSH WAIT) may mean that the path must be stopped if the lift axis is unable to reach the lift position in time. Otherwise, #FLUSH WAIT has no effect on the lifting profile. 1.2.2 Lifting This method is only recommended if Advanced Lifting is not possible for technical reasons. Normally, the lift axis motion is planned as an independent motion in path preparation and is then coupled to the motion of the main axes. 14 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 15

Lift functionality The keyword “DOWN” cannot be programmed in standard lifting. 1.2.2.1 Lifting properties The lifting motion is coupled to the path motion in this method. i.e. if the velocity of the path is changed, the LIFT motion changes to the same extent. Therefore, the same position of the path axes is identical to the position of the lift axis, regardless of the current velocity. This means that If the path motion is stopped (feed hold) or decelerated (override), the motion of the lift axis stops accordingly. Background Decoder task Path preparation Profile calculation Z s K Complete available traverse path distance for lifting s Time equidistant task Interpolation Independent axis (interrupt) Interpolation (Slave coupling) Override, Feedhold Y s Z s X s X Y Z Position control Fig. 4: Structure of planning and executing the LIFT motion TF5290 | Twin CAT 3 CNC Version: 1.021 15 Cutting Plus
## Page 16

Lift functionality Within the LIFT range, the permitted acceleration on the path is defined so that the maximum permitted acceleration of the lift axis is not exceeded. Waiting conditions (M functions with synchronisation, G04, M00, etc.) are possible during lifting/lowering. During the lifting motion, waiting conditions therefore lead to an interruption of the path and also of the lifting motion. In the case of strongly bent curves (spline or polynomial contouring) or kinematic transformations, the original blocks can be further subdivided to improve planning the dynamics. This may lead to an increased number of blocks. If there is an insufficient number of blocks (Look Ahead range) • due to the large number of motion blocks of the path axes or • due to the large number of technology functions (M functions), premature lowering is avoided. Internally, a LIFT_END is added to the programmed height and a LIFT_START is then added. At present, a maximum number of 20 CNC internal blocks (Look Ahead range) is considered between the lifting motion (START) and the lowering motion (END). A programmed motion block (G0, G1, G2, G3) normally generates an internal CNC block. Smoothing methods generate additional internal blocks. Planning the dynamics The lifting motion is planned so that, at constant path velocity, the lift axis is lifted and lowered again with jerk limiting at its maximum acceleration. If the path feed rate is changed during the lifting motion (feed hold, override, etc.), this leads to additional acceleration of the lift axis. As a result, lift axis acceleration may briefly exceed its maximum limit. However, the overall acceleration due to the feed rate change on the path and the lifting motion itself always remain within the specified overload range. Therefore, the following applies to the axis: |a | < a * overloadfactor active max where Planning lift axis dynamics requires slope type 'TRAPEZ' ([#SLOPE [...]). Slope type STEP may res- ult in Z axis overload. 16 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 17

Lift functionality Path smoothing and lifting The LIFT function can be programmed if a smoothing method was previously activated (1st case). The LIFT axis has velocity = 0 at the start and end of the lifting motion. Therefore, smoothing is temporarily suppressed at these points. Exception: With CONTOUR MODE (G61, G261) the lift axis in the block does not move before lifting or directly after lifting (2nd case). 1st case: Lift axis motion before/after lifting If the lift axis is moved before lift start (block N10) or directly after lift end (block N20), the contouring of all axes at the start or end of lifting is briefly suppressed. Y G261 N20 G261 0 LIFT_START G261 1 N G260 LIFT_END G260 X Work piece machining Programmed motion of positioning Smoothed motion of positioning G260/1 Automatic suppression during LIFT_START/-END LIFT_START, LIFT axis is removed from path motion LIFT_END, LIFT axis is included into path motion Fig. 5: Contour smoothing with automatic activation/deactivation at LIFT start/end TF5290 | Twin CAT 3 CNC Version: 1.021 17 Cutting Plus
## Page 18

Lift functionality 2nd case: No lift axis motion before/after lifting The other axes can be smoothed if the lift axis is not moved before lift start (block N10) or directly after lift end (block N20). Y G261 N20 0 1 N LIFT_END LIFT_START X Work piece machining Programmed motion of positioning Smoothed motion of positioning LIFT_START, LIFT axis is removed from path motion LIFT_END, LIFT axis is included into path motion Fig. 6: Contour smoothing without lift axis movement before/after lifting Smoothing methods may not be additionally selected or deselected between LIFT_START and LIFT_END. 18 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 19

Lift functionality 1.2.2.2 Parameterisation To activate lifting, the parameter P-STUP-00060 must be assigned the value FCT_LIFT_UP . Lifting configuration.channel[0].path_preparation.function FCT_DEFAULT | FCT_LIFT_UP 1.2.2.3 Special cases Special case 1: Look Ahead range overflow Large number of blocks between START – END The Look Ahead range comprises a maximum of 20 NC blocks. Lifting is executed prematurely if the range of the motion path (Look Ahead range) considered during lifting is fully occupied due to a large number of blocks. In this case, the axis is first lifted to the specified maximum height and lowered shortly before END (see blue curve in the figure).. Premature lifting can lead to a situation where less motion path is available for the lifting motion than the user actually assumes. As a result, path velocity may be reduced in order to execute the lifting motion and re-engagement. Conclusion: A high number of blocks between lift start and end leads to premature lifting of the lift axis and to a possible deceleration of the path motion. For this reason Advanced Lifting is recommended. Z position expected lifting motion real lifting motion caused by a full look-ahead range Z max Z 1 Z axis with Look- Look- constant ahead ahead position is full is full Travel path Start End Fig. 7: Diagram of Look Ahead range overflow Look Ahead range overflow TF5290 | Twin CAT 3 CNC Version: 1.021 19 Cutting Plus
## Page 20

Lift functionality N10 Z10 N20 Z[LIFT_START POS_LIMIT=30] N30 X10 N40 X20 N50 X35 ... N550 X31 N560 X32 N570 X33 N580 X34 N600 Z[LIFT_END] 20 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 21

Lift functionality Special case 2: Lifting and explicit flushing of the channel LIFT and flushing the channel (#FLUSH) During lifting, the motion blocks are first stored to enable calculation of the optimum lifting motion from LIFT start to end. With various NC commands, however, immediate execution is necessary and this is achieved implicitly by "flushing the channel". If channel output of the NC blocks is compelled during lifting (e.g. NC command #FLUSH), the LIFT motion is executed as if LIFT_END and again LIFT_START were programmed at this point. Lifting and explicit flushing of the channel N20 X40 Z2 N30 Z[LIFT_START POS=12 POS_LIMIT=40] N40 X50 N50 X40 N60 #FLUSH N70 X30 N80 X20 N90 Z[LIFT_END] Operating principle of #FLUSH with comparable programming N20 X40 Z2 N30 Z[LIFT_START POS=40 POS_LIMIT=40] N40 X50 N50 X40 N60 Z[LIFT_END] N60 Z[LIFT_START POS=12 POS_LIMIT=40] N70 X30 N80 X20 N90 Z[LIFT_END] TF5290 | Twin CAT 3 CNC Version: 1.021 21 Cutting Plus
## Page 22

Lift functionality 1.2.3 Permitted functions Permitted CNC functions that may be active when lifting is selected: • #ROTATION ON and #CS ON: but only if the lift axis is not affected by the rotation. When the Z axis is lifted, only one coordinate system rotation about the Z axis is permitted. Otherwise, the error ID 21071 is output by the decoder. If #ROTATION ON/OFF is programmed within the lift range, path preparation outputs the error ID 120606. • #TRAFO ON: If #TRAFO ON/OFF is programmed within the lift range, path preparation outputs the error ID 120606. 1.2.4 Limitations and error response The following limitations apply both to Lifting and Advanced Lifting. If a programming error occurs during the lifting motion, the lifting motion is executed up to the error location and the axis stops at the specified maximum lifting height (POS_LIMIT). If the end of the program is reached during the lifting motion without a prior, explicit LIFT_END, the lifting motion is executed as if LIFT_END was programmed at the end of the program. Limitations during the lifting motion for both methods: • The axis affected by lifting may not be programmed. • Flushing the channel (#FLUSH, #FLUSH WAIT) interrupts the current lifting motion (this corresponds to implicit programming of LIFT_END followed by LIFT_START). The programmed target position of the lift axis is reached for a short time in the block in which #FLUSH was programmed. • Channel-internal axis swapping is basically possible but the lift axis must not be affected by axis swapping. Additional path smoothing of the LIFT axis (contouring, G61/G261, G151, #SPLINE ON, #HSC ON) is not possible in the lifting range. • During the lifting motion, tool radius compensation of the LIFT axis is not permitted, i.e. the LIFT axis may not be involved in tool radius compensation. Limitations during the lifting motion in addition to conventional lifting: • Path smoothing functions are temporarily suppressed at the start and end of the lifting motion. With Advanced Lifting path smoothing methods are suppressed if the lift axis is programmed directly before LIFT_START or directly after LIFT_END. • Axis swapping leads to the end of the lifting motion. 22 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 23

Lift functionality 1.2.5 Differences between Advanced Lifting and Lifting Basically Advanced Lifting is recommended. It is independent of the path motion and a greater lifting height is reached. In exceptional cases it may be necessary to apply conventional lifting. The table below provides a short comparison: 1. Advanced Lifting 2. Lifting Maximum lifting height high medium (is reached faster) Collision protection high lower Computing time (real-time high very low task) Path override changes Limited increase possible Z axis overload (=lift axis) possible Feed rate change No limitation Z axis overload (=lift axis) possible HSC slope (Type 3) not possible can call an implicitly called subroutine at program end. Maximum lift profile length unlimited Number of NC blocks is limited With Advanced Lifting profile planning must be executed in the real-time task of the controller This method therefore requires much more real-time computing time than the lifting method calculated in the path preparation task. TF5290 | Twin CAT 3 CNC Version: 1.021 23 Cutting Plus
## Page 24

Lift functionality Background Decoder task Path preparation Plausibility checks Time equidistant task Interpolation Profile planning independent axis (interrupt) Interpolation (Time coupling) Override, Feedhold Y t Z s X t X Y Z Position control Fig. 8: Structure of the planning and processing of the lifting motion with time-based coupling Compared with Lifting, Advanced Lifting achieves greater lifting heights: Fig. 9: Comparison of lifting heights reachable with Advanced Lifting (green curve) vs Lifting (blue curve) In the lowering motion the path velocity override is limited to the value which was active at the start of the lowering motion. 24 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 25

Lift functionality In the upward motion of the lift axis a higher path override may no longer be accepted, otherwise the lift axis would not be able to reach the target position at the end of the lowering motion any more. Z-Position Path velocity override may be increased if lifting axis has still enough time Path velocity override is limited to the override value, which was active at start of lowering movement Z 2 No limitations concerning path velocity override Z 2 Path movement End Start Fig. 10: Path velocity override with Advanced Lifting 1.2.6 Display data - status display As of CNC Build V2.11.2810.01 it is possible to display the status of the lift function. This is possible via CNC objects as well as via the HLI. The following data is available: • HLI: ◦ lift_active [} 35] ◦ lift_suppressed [} 35] • or as associated CNC objects ◦ lift_active [} 34] ◦ lift_suppressed [} 34] A distinction is made between the status "Lift function is active" and the status "Lift movement is suppressed". Suppression of the lift movement always occurs when the programmed minimum path distance P-CHAN-00244 [} 32] is not reached. An active lift function is associated with execution of a lift movement. Advanced Lifting is a special case where both the status for an active lift function and the status for suppressing a lift movement are set at the same time. This case occurs when the actual lifting of the axis is suppressed because the path distance is too small, but at the same time a target position of the Z axis is programmed. To reach the target position, the lift function is still active in the background. TF5290 | Twin CAT 3 CNC Version: 1.021 25 Cutting Plus
## Page 26

Lift functionality 1.3 Programming Cross-block lifting/lowering Programming is based on the syntax for independent axes. The corresponding parameters can be programmed at the start of lifting/lowering. These are non-modal parameters, i.e. if required they are reset for every start. Syntax: <axis_name> [ LIFT_START [ DOWN ] [ G90 | G91 ] [ POS=.. ] POS_LIMIT=.. ] <axis_name> Lift axis name LIFT_START Identifier for the start of the (cross-block) independent lifting motion of the axis. Must always be programmed as the first keyword. DOWN The axis motion direction can be inverted via DOWN, i.e. the motion is in the direction of the negative software limit switch. If nothing is specified, the default direction is in the direction of the positive software limit switch. Only available for Advanced Lifting [} 10] G90 / G91 Absolute/relative dimension; the default dimension is G90. G91 is non-modal and is only active for the lifting/lowering motion. POS=.. Target position of the lift axis after the lifting motion in [mm, inch]. The current command position of the axis (see V. A. ABS.<axis name>) is the default. POS_LIMIT=.. Maximum lifting height or lowering depth in [mm, inch] Syntax: <axis_name> [ LIFT_END ] <axis_name> Lift axis name LIFT_END Identifier for the end of the (cross-block) independent lifting motion of the axis. 26 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 27

Lift functionality Cross-block lifting/lowering N10 X10 Y20 Z30 ;Cut with laser N20 M5 ;Laser off N30 Z[LIFT_START POS=12 POS_LIMIT=100] ;Lift Z axis N30 G01 X.. Y.. N40 G02 X.. Y.. N50 G03 X.. Y.. N60 G01 X.. Y.. N70 Z[LIFT_END] ;Absolutely lower Z axis to target 12 mm N80 M4 ;Laser on N90 X20 Y20 ... N10 X10 Y20 Z30 N30 Z[LIFT_START POS=12 POS_LIMIT=100] ;Lift Z axis N40 G01 X.. Y.. N50 G01 X.. Y.. N60 Z[LIFT_END] ;Absolutely lower Z axis to target 12 mm N70 X100 alternative programming N110 X10 Y20 Z30 N140 G01 X.. Y.. Z[LIFT_START POS=12 POS_LIMIT=100] N150 G01 X.. Y.. Z[LIFT_END] N170 X100 Lifting/lowering in an NC block Programming is based on the syntax for independent axes. The corresponding parameters can be programmed at the start of lifting/lowering. These are non-modal parameters, i.e. if required they are reset for every start. Syntax: <axis_name> [ LIFT [ DOWN ] [ G90 | G91 ] [ POS=.. ] POS_LIMIT=.. ] <axis_name> Lift axis name LIFT Identifier for the start and end of the independent lifting motion of the axis in the current NC block Must always be programmed as the first keyword. DOWN The axis motion direction can be inverted via DOWN, i.e. the motion is in the direction of the negative software limit switch. If nothing is specified, the default direction is in the direction of the positive software limit switch. Only available for Advanced Lifting [} 10] G90 / G91 Absolute/relative dimension. The default dimension is G90. G91 is non-modal and is only active for the lifting/lowering motion. POS=.. Target position of the lift axis after the lifting motion in [mm, inch]. The current command position of the axis (see V. A. ABS.<axis name>) is the default. POS_LIMIT=.. Maximum lifting height or lowering depth in [mm, inch] TF5290 | Twin CAT 3 CNC Version: 1.021 27 Cutting Plus
## Page 28

Lift functionality Lifting/lowering in an NC block ; single-row programming N200 Z40 N240 X10 Y.. Z[LIFT POS=30 POS_LIMIT=300] N250 X20 Y.. Z[LIFT POS=20 POS_LIMIT=300] N260 X30 Y.. Z[LIFT POS=25 POS_LIMIT=300] N270 X.. Y.. Z[LIFT POS=30 POS_LIMIT=300] N280 X.. Y.. Z[LIFT POS=30 POS_LIMIT=300] Z position Maximum lifting hight Z max 40 30 20 N240 N250 N260 N270 Travel path Fig. 11: Single-row lifting Status query: Lifting/lowering active In the NC program, the V. G. variable… V. G. LIFT_ACTIVE … of the Boolean type can determine whether lifting/lowering is active. 1.4 Parameter 1.4.1 Overview ID Parameter Description P-STUP-00060 function Define functionalities in path preparation P-STUP-00070 function Define functionalities for decoding P-CHAN-00244 lift_min_dist Minimum path length for lifting motion P-CHAN-00345 enable_time_based_lift Switch to time-based approach for automatic lifting/lowering of an axis. P-AXIS-00441 dyn_monitoring_a_war Output a warning in the event of a percentage excess in n maximum axis acceleration Not necessary for Lifting (only for Advanced Lifting). 28 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 29

Lift functionality ID Parameter Description P-AXIS-00442 dyn_monitoring_a_err Output an error message in the event of a percentage excess in maximum axis acceleration This maximum value is used to plan lift acceleration. This means that the following applies to the axis: Not necessary for Lifting (only for Advanced Lifting). 1.4.2 Description 1.4.2.1 Activate lift function P-STUP-00060 Defining functionalities for path preparation. Description This parameter defines the individual functionalities for path preparation. The individual functions can be enabled or disabled for testing or for performance reasons. Parameter configuration.channel[i].path_preparation.function Data type STRING Data range See Activate lift function [} 30] Dimension ---- Default value FCT_DEFAULT Remarks TF5290 | Twin CAT 3 CNC Version: 1.021 29 Cutting Plus
## Page 30

Lift functionality Path preparation function table Identifier Description FCT_DEFAULT The functions FCT_FFM | FCT_PRESEGMENTATION | FCT_SPLINE | FCT_POLY | FCT_CAX | FCT_CAX_TRACK | FCT_SEGMENTATION are available. FCT_FFM Free-form surface mode, #HSC [OPMODE 1 CONTERR 0.01], #HSC [OPMODE 2] FCT_PRESEGMENTATION Linear pre-segmentation in HSC mode FCT_SPLINE #HSC[], AKIMA, B-Spline, G150/G151 FCT_POLY #CONTOUR MODE[], G61, G261/G260 FCT_CAX C axis processing, i.e. the spindle is embedded in the NC channel. FCT_CAX_TRACK #CAXTRACK, tracking an axis according to the contour angle FCT_SEGMENTATION For dynamic segmentation of the path contour, e.g. if the curvature of a polynomial segment varies significantly. The following functions must also be enabled: FCT_LIFT_UP Automatic lifting/lowering of an axis (path-based coupling). Example: FCT_DEFAULT | FCT_LIFT_UP FCT_EMF Edge machining (sharp angle contours). Example: FCT_DEFAULT | FCT_EMF FCT_EMF_POLY_OFF Edge machining inactive with polynomials. Contrary to the setting with FCT_EMF, edge signal generation is masked when path polynomial generation is active in the channel. Polynomials are generated for smoothing G261 or when B Spline is active. The resulting geometry is then tangential. Example: FCT_DEFAULT | FCT_EMF_POLY_OFF FCT_SYNC Synchronise an axis to a path group. Example: FCT_DEFAULT | FCT_SYNC FCT_PRECON Optimised planning using #HSC[BSPLINE]. Example: FCT_DEFAULT | FCT_PRECON FCT_LIFT_UP_TIME Automatic lifting/lowering of an axis (time-based coupling). Example: FCT_DEFAULT | FCT_LIFT_UP_TIME FCT_PTP Dynamically optimised smoothing of the complete contour. Example: FCT_DEFAULT | FCT_PTP FCT_M_PRE_OUTPUT Pre-output of M/H functions (microjoints). Example: FCT_DEFAULT | FCT_M_PRE_OUTPUT FCT_SURFACE HSC machining with Surface Optimiser Example: FCT_DEFAULT | FCT_SURFACE FCT_SEG_CHECK Block segmentation in combination with path-controlled offset of M functions (dwell time), see P-CHAN-00650 and Activate lift function [} 30] Example: FCT_DEFAULT | FCT_SEG_CHECK FCT_NIBBLING Activate the nibbling function Example: FCT_DEFAULT | FCT_NIBBLING FCT_PUNCHING Activate the punching function Example: FCT_DEFAULT | FCT_PUNCHING FCT_VSM Activate the velocity smoothing function Example: FCT_DEFAULT | FCT_VSM as of V3.1.3079.21 P-STUP-00070 Definition of interpolator functionalities Description This parameter defines individual functionalities and the size of the look-ahead buffer in the interpolator, i.e. it defines the number of blocks to calculate deceleration distance and dynamic planning. 30 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 31

Lift functionality Parameter configuration.channel[i].interpolator.function Data type STRING Data range See Activate lift function [} 32]. Dimension ---- Default value FCT_IPO_DEFAULT Remarks TF5290 | Twin CAT 3 CNC Version: 1.021 31 Cutting Plus
## Page 32

Lift functionality Interpolation function table Identifier Description FCT_IPO_DEFAULT FCT_LOOK_AHEAD_STANDARD FCT_LOOK_AHEAD_LOW 30 blocks FCT_LOOK_AHEAD_STANDARD 120 blocks FCT_LOOK_AHEAD_HIGH 190 blocks FCT_LOOK_AHEAD_CUSTOM Number of look-ahead blocks in the interval [ 10; P-CHAN-00653]. FCT_SYNC Synchronising an axis in coordinated motion Example: FCT_IPO_DEFAULT | FCT_SYNC FCT_LOOK_AHEAD_OPT The path velocity curve can be further improved for HSC machining by additional calculations. This generally reduces machining time. The additional calculations place greater demands on the controller hardware. FCT_LIFT_UP_TIME Automatic lifting/lowering of an axis (time-based coupling). Example: FCT_IPO_DEFAULT | FCT_LIFT_UP_TIME FCT_SHIFT_NCBL Path-controlled offset of M functions (dwell time). Example: FCT_IPO_DEFAULT | FCT_SHIFT_NCBL FCT_CALC_STATE_AT_T Calculation of path velocity at a time in the future. Function only available in combination with HSC slope and only as of V3.1.3057.0 Example: FCT_IPO_DEFAULT | FCT_CALC_STATE_AT_T FCT_CALC_TIME Calculation of interpolation time to next feed block (G01,G02,G03). Example: FCT_IPO_DEFAULT | FCT_CALC_TIME FCT_CONTOUR_LAH Contour look-ahead: advance output of motion blocks to the PLC as of V3.1.3104.07 FCT_DYN_POS_LIMIT Dynamic limitation of axis positions FCT_EXTENSION_EQUIDIST Die-sinking EDM Orbiting FCT_CALC_POS_V_0 Calculating and supplying the braking distance on the path until velocity and acceleration are 0. Supplying CNC objects on the path and assigned PCS and ACS axis positions at the end of this deceleration process. as of V3.01.3081.7 or V3.1.3114.0 FCT_DLM Activate the conveyor tracking function. as of V4.20.0 The look-ahead buffer size values specified above apply as of CNC Builds V2.11.2800 and higher; the following settings apply to CNC Build V2.11.20xx: FCT_LOOK_AHEAD_LOW 30 blocks FCT_LOOK_AHEAD_STANDARD 70 blocks FCT_LOOK_AHEAD_HIGH 120 blocks 1.4.2.2 Parameters for the Lift function P-CHAN-00244 Minimum path length for lift movements Description This parameter defines a minimum path distance for lift movement. If the main axis motion is shorter than the parameter value, no lift movement is executed. Parameter lift_min_dist Data type UNS32 Data range 0: Inactive (default). 1: Lift movements are suppressed if the main path motion is below the limit value. Dimension 0.1µm Default value 0 Remarks 32 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 33

Lift functionality P-CHAN-00345 Switch-over to time-based calculation when an axis is lifted Description When an axis is lifted (see [FCT-A11 [} 9]]), it can be lifted or lowered automatically independent of the path motion. The CNC limits the maximum lift height so that the axis can reach the target point of the lowering movement and not influence the path motion. Normally this takes place during path preparation with a path-based coupling of the axis to the main motion path. Instead the 'enable_time_base_lift' parameter can enable a time-based consideration in the real-time GEO task of the controller. As a result, greater lifting height can be reached afterwards. However, time-based coupling requires considerably more computing power in the real-time task of the controller. The HSC slope profile and the time-based approach cannot be used at the same time. Parameter enable_time_based_lift Data type BOOLEAN Data range 0: Path-based approach (default). 1: Time-based approach. Dimension ---- Default value 0 Remarks The time-based approach must also be included in the configuration data of the path preparation and interpolation function in the controller. Here, set the key word FCT_LIFT_UP_TIME in the parameters P-CHAN-00600 and P-CHAN-00650 (alternatively: P-STUP-00060 and P-STUP-00070). Parameterisation example with P-CHAN-00600 / P-CHAN-00650 configuration.path_preparation.function FCT_DEFAULT | FCT_LIFT_UP_TIME .interpolator.function FCT_DEFAULT | FCT_LIFT_UP_TIME Alternatively, the function can be parameterised in the start-up list (P-STUP-00060 / P-STUP-00070). Example of the 1st CNC channel: configuration.channel[0].path_preparation.function. FCT_DEFAULT | FCT_LIFT_UP_TIME configuration.channel[0].interpolator.function. FCT_DEFAULT | FCT_LIFT_UP_TIME TF5290 | Twin CAT 3 CNC Version: 1.021 33 Cutting Plus
## Page 34

Lift functionality 1.4.2.3 CNC objects For further information on addressing CNC objects, see [FCT-C13//Description]. Name lift_active Description This object checks the status of the lift function. It signals whether the lift function is activated. Task GEO (Port 551) Index group 0x12130<C > Index offset 0x<A >0095 ID ID Data type BOOLEAN Length 1 Attributes read Unit - Remarks Name lift_suppressed Description This object indicates whether a lift movement is suppressed. This is always the case when the programmed minimum path distance P-CHAN-00244 [} 32] is not reached. Task GEO (Port 551) Index group 0x12130<C > Index offset 0x<A >0094 ID ID Data type BOOLEAN Length 1 Attributes read Unit - Remarks The following special case of the status display occurs when you use Advanced Lifting. If the lift movement is suppressed due to insufficient travel distance and a target position of the Z axis is programmed at the same time, the lift function is active in order to be able to approach the target position of the Z-axis. In this case, the status of the lift function lift_active [} 34] = TRUE and lift_suppressed= TRUE are displayed simultaneously. 34 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 35

Lift functionality 1.4.2.4 HLI parameters Lift function is active Description This data item indicates whether a lift function is active or not. An active lift function is associated with execution of a lift movement. Signal flow CNC->PLC ST path gp Ax[axis_idx]^.ipo_state.lift_active Data type BOOL Value range TRUE = Lift function is active FALSE = Lift function is not active Access PLC is reading Lift movement is suppressed Description This data item indicates whether a lift movement is suppressed. This is always the case when the programmed minimum path distance P-CHAN-00244 [} 32] is not reached. Signal flow CNC->PLC ST path gp Ax[axis_idx]^.ipo_state.lift_suppressed Data type BOOL Value range TRUE = Lift movement is suppressed FALSE = Lift movement is not suppressed. Access PLC is reading Special feature The following special case of the status display occurs when you use “Advanced Lifting”: If the lift movement is suppressed due to insufficient travel distance and a target position of the Z axis is programmed at the same time, the lift function is active in order to be able to approach the target position of the Z-axis. In this case, the status of the lift function is simultaneously displayed as “active” and “suppressed”. TF5290 | Twin CAT 3 CNC Version: 1.021 35 Cutting Plus
## Page 36

Micro Joints 2 Micro Joints 2.1 Pre-output of M functions (Micro Joint) Use of this function requires a license for the “Cutting” option. It is not included in the scope of the standard license. Requirements to use the Micro Joints function: The pre-output function must be enabled in each channel in P-CHAN-00600, or in the start-up list in P- STUP-00060. configuration.path_preparation.function FCT_DEFAULT | FCT_M_PRE_OUTPUT ( P-CHAN-00600 ) The Micro Joint function only supports the pre-output of channel-specific M func- tions; axis-specific M functions are not supported. With the Micro Joint function, M functions can be pre-output by specifying a path. No timed pre-output is possible. This can only be implemented with M functions of syn- chronisation type MET_SVS. When the Micro Joints function is inactive, a path-based pre-output of M/H functions is only possible with the synchronisation type MEP_SVS. Activating and enabling the function Pre-output of an M/H function is executed if: a pre-output path is specified in P-CHAN-00070 or P-CHAN-00107 Path-related pre-output of M functions A pre-output can automatically output an M function in advance at a specific point along the path. For example, in the case of M functions with a time stamp MOS_TS, this can be used for advanced deactivation of a laser to briefly interrupt the cutting process. This leaves so-called Micro Joints. Output of the advanced M function is not tied to the originally programmed block limits. The motion block is opened automatically by the CNC at the corresponding positions and the M function is inserted. 36 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 37

Micro Joints N20 N10 TF5290 | Twin CAT 3 CNC Version: 1.021 37 Cutting Plus ffo resa L no resa L N25 Y10 micro joint 2 N15 M300=Laser on, Y7 Laser off micro joint 1 micro joint 3 Y6.95 Laser on M500=Laser off Moving direction automatic fragmentation of original program = position of micro joint Fig. 12: Programmed Micro Joints in the part Pre-output of M functions ; M300 - Laser on, M500 - Laser off N05 V. G. M_FCT[500]. PRE_OUTP_PATH = 0.05 N10 G00 G90 X0 Y0 N15 L Laser_on.sub N20 G01 F5000 N25 Y7 N30 M500 M300 ;Microjoint 1 N35 Y10 N40 X14 N45 M500 M300 ;Microjoint 2 N50 X20 N55 L Laser_off.sub N99 M30
## Page 38

Micro Joints Equivalent example with explicit programming ; M300 - Laser on, M500 - Laser off N05 G00 G90 X0 Y0 N10 L Laser_on.sub N15 G01 F5000 N20 Y6.95 N25 M500 ;Microjoint 1 N30 Y7 N35 M300 N40 Y10 N45 X13.95 N50 M500 ;Microjoint 2 N55 X14 N60 M300 N65 X20 … N70 L Laser_off.sub N99 M30 M/H functions for pre-output In addition to the actual use of pre-output with high-resolution MOS_TS, output is basically also possible for other M or H functions. The following synchronisation methods of the M and H functions are evaluated at pre-output: MOS, MVS_SVS, MVS_SNS, MNS_SNS, MOS_TS reference position of the pre-output If the M/H function is programmed together with a motion, then: the path of the pre-output is determined for its output time relative to the block. MOS, MOS_TS, MVS_SVS and MVS_SNS are determined relative to the block start position MNS_SNS is positioned relative to the block end position. Due to pre-output, however, it is basically no longer required to separate the output and synchron- isation points. In other word, if the M/H function is synchronised (MVS_SVS, MVS_SNS, MNS_SNS), output and synchronisation take place at the same point. This corresponds to programming the M/H function in a separate NC line. With synchronisation type MCS_SNS: if it is necessary to split blocks due to the pre-output since the pre-output fails to occur at an existing block limit, the split block is synchronised at the end and not at the output point. 38 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 39

Micro Joints Parametrisation using lists M functions with pre-output are parameterised in the channel list by P-CHAN-00041 (m_synch[..]) and P- CHAN-00070 (m_pre_outp[..]): m_synch[100] MOS_TS m_pre_outp[100] 500 ;in 0.1 µm H functions with pre-output are parameterised in the channel list by P-CHAN-00027 (h_synch[..]) and P- CHAN-00107 (h_pre_outp[..]): h_synch[50] MVS_SVS h_pre_outp[50] 400 ;in 0.1 µm Parametrisation by programming As a alternative to the parametrisation of M/H functions, the synchronisation method and the path also can be specified directly in NC program. V. G. M_FCT[11]. SYNCH = 1 V. G. M_FCT[11]. PRE_OUTP_PATH = 14 ;in [mm] V. G. H_FCT[200]. SYNCH = 4 V. G. H_FCT[200]. PRE_OUTP_PATH = 40 ;in [mm] Synchronisation types as macro %Micro Joint ; Synchronisation types as macro "MOS" = "1" "MVS_SVS" = "2" "MVS_SNS" = "4" "MNS_SNS" = "8" "MOS_TS" = "262144" ;0x40000 V. G. M_FCT[11]. SYNCH = "MOS_TS" V. G. M_FCT[11]. PRE_OUTP_PATH = 11 ;in [mm] V. G. M_FCT[13]. SYNCH = "MNS_SNS" V. G. M_FCT[13]. PRE_OUTP_PATH = 23 ;in [mm] V. G. H_FCT[12]. PRE_OUTP_PATH = 12 ;in [mm] V. G. H_FCT[12]. SYNCH = "MVS_SVS" N01 X0 G01 F500 N10 X100 N20 X200 M11 H12 M13 N30 X300 M30 2.1.1 Limitations, special cases Limitation of the look-ahead range The described look-ahead range is limited due to resource limitation and the requirement for the NC program to run up as soon as possible after start. The default limits the maximum number of blocks considered for pre-output to 10 blocks; this can be set in P- CHAN-00603 (or in P-STUP-00061). Depending on the block length, this results in a maximum joint width. If an M/H function is brought forward beyond the look-ahead range, the M/H function is only brought forward automatically as far as the look-ahead range permits. Limitation of the look-ahead range %microjoint4 N01 G00 G90 X0 Y0 N02 G01 F10000 TF5290 | Twin CAT 3 CNC Version: 1.021 39 Cutting Plus
## Page 40

Micro Joints N03 V. G. M_FCT[100]. PRE_OUTP_PATH = 28.6; in mm N20 G91 Y1 N21 Y1 ; -> planned Micro Joint at Y1.4 mm N22 Y1 N23 Y1 N24 Y1 N25 Y1 … N37 Y1 N38 Y1 N39 Y1 ; -> real Micro Joint caused by block number limitation N40 Y1 N41 Y1 N42 Y1 N43 Y1 N44 Y1 N45 Y1 N46 Y1 N47 Y1 N48 Y1 N49 Y1 N50 M100 M26 N99 M30 max. number of blocks micro joint N21 N20 N22 N41 N40 N45 N49 Fig. 13: Limitation of the pre-output path of the M function to 10 blocks Explicit cancellation of the look-ahead range, #FLUSH, Read synchronous V. E. variable The look-ahead range of M functions is reset by flushing the channel (#FLUSH or #FLUSH WAIT). In other words, the pre-output of M functions cannot be reversed beyond the #FLUSH point. An implicit #FLUSH WAIT, i.e. the channel is flushed, can also be executed when a synchronous V. E variable (see [EXTV]) is read. A pre-output via the read access of a synchronous V. E. variable is therefore not possible either. If an M/H function is brought forward beyond the look-ahead range, the M/H function is only brought forward automatically as far as the look-ahead range permits. Explicit cancellation of the look-ahead range, #FLUSH, Read synchronous V. E. variable %microjoint6 N01 G00 G90 X0 Y0 N02 G01 F10000 N10 V. G. M_FCT[100]. PRE_OUTP_PATH = 28.6; in mm N20 G91 Y1 N21 Y1 ; -> planned Micro Joint at Y1.4 mm N22 Y1 N23 Y1 … N38 Y1 N39 Y1 N40 Y1 N41 Y1 N42 Y1 N43 Y1 N44 Y1 40 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 41

Micro Joints N400#FLUSH ; -> Micro Joint inserted at Y24 N45 Y1 N46 Y1 N47 Y1 N48 Y1 N49 Y1 N50 M100 M26 N99 M30 micro joint N21 N20 N22 N41 N44 N45 N49 TF5290 | Twin CAT 3 CNC Version: 1.021 41 Cutting Plus HSULF# 004N Fig. 14: Explicit limitation of the lead distance of the M function "Overlapping" path-related pre-output After a path-related pre-output of the M function is detected, all previously stored motion blocks are output. This corresponds to explicit flushing of the channel (see #FLUSH), thus avoiding delayed processing of the motion blocks. As a result, it is not possible to overlap the path range of several M functions. If pre-outputs of M/H functions overlap, the individual M/H functions are only brought forward automatically up to the originally programmed position. "Overlapping" path-related pre-output %microjoint5 (* M100 – Laser off, M26 – Laser on *) N01 G00 G90 X0 Y0 N02 G01 F10000 N03 V. G. M_FCT[101]. PRE_OUTP_PATH = 5 ;in mm N04 V. G. M_FCT[102]. PRE_OUTP_PATH = 23 N05 V. G. M_FCT[103]. PRE_OUTP_PATH = 31 N20 X10 N30 M101 M26 N40 X30 N50 M102 M26 N60 X40 N70 M103 M26 N80 M30
## Page 42

Micro Joints micro joint 3 micro joint 2 micro joint 1N20 N40 N60 Segmentation of original program = position of micro joint Fig. 15: Theoretical overlapping of Micro Joints in the part micro joint 3 micro joint 2 micro joint 1 N20 N40 N60 Segmentation of original program = position of micro joint Fig. 16: Limitation of overlapping of Micro Joints in the part 42 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 43

Micro Joints Combination of MNS_SNS with and without pre-output path Combination of MNS_SNS with and without pre-output path %microjoint9 N01 G01 G90 X0 Y0 F10000 N02 V. G. M_FCT[100]. PRE_OUTP_PATH = 35.6; in mm N04 V. G. M_FCT[100]. SYNCH = 8 ;MNS_SNS N04 V. G. M_FCT[200]. SYNCH = 8 ;MNS_SNS N20 X10 N40 X30 M100 M200 N60 X40 N99 M30 Pre-output between output and synchronisation points of an MVS_SNS It is not possible to insert an M/H function of synchronisation type MVS_SNS between output and synchronisation points. The pre-output of the M/H function is then only brought forward up to synchronisation point of the MCS_SNS at the most. Pre-output of another M/H function of the MVS_SNS type The example below shows an attemptyto move M100 between the output and synchronisation points of the M200 (an MVS_SNS with motion). In this case, M100 is not output as required at X9 but at the end of N10, i.e. at X10. N01 G01 G90 X0 Y0 F1000 (Definitions of M functions) N02 V. G. M_FCT[100]. PRE_OUTP_PATH = 21.0 N03 V. G. M_FCT[100]. SYNCH = 2 ; MVS_SVS N04 V. G. M_FCT[200]. SYNCH = 4 ; MVS_SNS N10 X10 M200 N20 X30 N30 X40 M100 N40 X0 Y0 N50 M30 Fig. 17: Attempted pre-output with another M/H function of the MVS_SNS type 2.1.2 Tolerance parameters for the permitted deviation between real and planned pre-output positions of an M/H function The Limitations and special cases [} 39] described in the section can result in an M/H function with pre-output not being output at the required position, but possibly at a significantly less advanced position. However, the channel parameter P-CHAN-00760 (pre_output_tolerance) is used to check how far the pre- output of an M/H function may deviate from the planned position. If the deviation exceeds the specified tolerance value, the program is aborted and a corresponding error message is output. Otherwise, the M/H function is automatically without a warning output and offset by this deviation from the expected position. TF5290 | Twin CAT 3 CNC Version: 1.021 43 Cutting Plus
## Page 44

Micro Joints 2.1.3 Explicit feed programming for Micro Joints (#CHANNEL SET) Feed at / behind a Micro Joint For technical process reasons, it may be necessary to limit the path velocity for a Micro Joint (in particular with an M function MOS which requires no acknowledgement). In addition, the path after the advanced M function (Micro Joint path) is completely traversed to the end at a change in velocity. This can be defined by the following feed settings in the NC command #CHANNEL SET (see figure below “Feed definition with Micro Joints”). #CHANNEL SET [ M_PRE_OUTPUT [ E=.. ] [ F=.. ] [ VECTOR_LIMIT_OFF ] ] non-modal E=.. Block end velocity E of the previous Micro Joint (start of Micro Joint) F=.. Feed velocity within the Micro Joint (path between the position of the advanced M function and the originally programmed position of the M function) VECTOR_LIMIT_OFF Deselecting a possible dynamic limitation. If one of the previously programmed dynamic influences is active via #VECTOR LIMIT (VEL, ACC, DEC), it is suppressed within the Micro Joint range. Explicit feed programming for Micro Joints %microjoint16 N01 G00 G90 X0 Y0 N02 G01 F100 N05 #CHANNEL SET [M_PRE_OUTPUT E=20 F=5000] N10 V. G. M_FCT[100]. PRE_OUTP_PATH = 8; in mm N20 G91 Y1 … N40 Y10 N50 M100 M26 N99 M30 F100 F100 F100 F5000 micro joint N20 N30 N40 44 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus 02E Fig. 18: Feed definition with Micro Joints If the F or E word is not specified, the feed for the advanced M function and subsequent motion blocks is not changed. Micro Joint feed across multiple blocks When the pre-output of the M function is advanced across multiple blocks, the feed of all Micro Joint motion blocks is also changed to the specified value. A possibly explicitly programmed feed is replaced by the specific Micro Joint feed. Micro Joint feed across multiple blocks %microjoint17
## Page 45

Micro Joints N01 G01 G90 X0 Y0 F100 N05 #CHANNEL SET [M_PRE_OUTPUT E=20 F=5000] N10 V. G. M_FCT[100]. PRE_OUTP_PATH = 15; in mm … N40 G91 Y10 F7500 N50 M100 M26 N99 M30 F100 F100 F5000 micro joint N20 N30 N40 TF5290 | Twin CAT 3 CNC Version: 1.021 45 Cutting Plus 02E Fig. 19: Feed with block global Micro Joints Specifying a Micro Joint specific feed replaces the possible explicitly programmed feed of the NC block. See example above: F7500 in N40 is replaced by F5000.
## Page 46

Micro Joints Increased feed with M11, decreased feed with M12 %microjoint16 V. G. M_FCT[11]. SYNCH = "MOS" V. G. M_FCT[11]. PRE_OUTP_PATH = 125 V. G. M_FCT[12]. SYNCH = "MOS" V. G. M_FCT[12]. PRE_OUTP_PATH = 325 N300 #CHANNEL SET [M_PRE_OUTPUT E=250 F=1500] N01 X-222 G01 F1000 N10 X10 N20 X100 N30 X200 M11 (125mm) N32 #VECTOR LIMIT ON[VEL=500] N35 #CHANNEL SET [M_PRE_OUTPUT E=150 F=750] N40 X300 N41 X310 N42 X320 N43 X330 N44 X340 N45 X350 N46 X360 N47 X370 N48 X380 N49 X390 N50 X500 N60 M12 (325mm) N70 X600 N80 X700 M30 Fig. 20: Increased feed with M11, decreased feed with M12 46 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 47

Micro Joints Suppress VECTOR_LIMIT during Micro Joint %microjoint18 V. G. M_FCT[11]. SYNCH = "MOS" V. G. M_FCT[11]. PRE_OUTP_PATH = 125 V. G. M_FCT[12]. SYNCH = "MOS" V. G. M_FCT[12]. PRE_OUTP_PATH = 325 N300 #CHANNEL SET [M_PRE_OUTPUT E=250 F=1500] N01 X-222 G01 F1000 N10 X10 N20 X100 N30 X200 M11 (125mm) N32 #VECTOR LIMIT ON[VEL=500] N35 #CHANNEL SET [M_PRE_OUTPUT E=150 F=750 VECTOR_LIMIT_OFF] N40 X300 N41 X310 N42 X320 N43 X330 N44 X340 N45 X350 N46 X360 N47 X370 N48 X380 N49 X390 N50 X500 N60 M12 (325mm) N70 X600 N80 X700 M30 Fig. 21: Suppress VECTOR_LIMIT during Micro Joint TF5290 | Twin CAT 3 CNC Version: 1.021 47 Cutting Plus
## Page 48

Tube processing 3 Tube processing 3.1 Overview Task The functions permit a simplified programming for the surface machining of: • round tubes, • polygonal tubes (profiled tubes) and • open polygonal tubes (L/U profiles) Depending on the application, the geometry is specified as Cartesian either on the lateral surface projection on as a parallel projection onto the workpiece. Different machining variants are possible here on 3/4-axis or 5/6-axis machines. Characteristics The function can only be enabled exclusively for Cartesian and kinematic transformations. Parametrisation Specific kinematics with corresponding parameter sets are required for machining variants (see chapter Parameters [} 116]). Programming A kinematic transformation is actually selected by specific variants of the #CYL command. In this case, a kinematic is implicitly selected (#KIN ID [..]). Transformations are additional options and subject to the purchase of a license. Mandatory note on references to other documents For the sake of clarity, links to other documents and parameters are abbreviated, e.g. [PROG] for the Programming Manual or P-AXIS-00001 for an axis parameter. For technical reasons, these links only function in the Online Help (HTML5, CHM) but not in pdf files since pdfs do not support cross-linking. 3.2 Description Classic lateral surface machining Classic lateral surface machining of cylindrical workpieces typically takes place on machine structures that are designed and conceived for pure turning work. These machines have only 2 translatory tool axes Z, X and one rotary workpiece axis C. 48 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 49

Tube processing Fig. 22: Round tube lateral surface machining Rotation-symmetrical workpiece Besides its use in machining centres, this function is also used on other machine structures with 3 Cartesian axes X, Y, Z. With the aid of an additionally arranged rotary axis, e.g. A, these machines can also be used to machine rotation-symmetrical workpieces. TF5290 | Twin CAT 3 CNC Version: 1.021 49 Cutting Plus
## Page 50

Tube processing +Z +Y -Z +X -Y Z -X w +A Y w X w -A Fig. 23: Tube machining with Cartesian 3-axis machine Besides round tube machining on the lateral surface, the functions for tube projection and profiled tube machining are described below. Programming kinematic parameters The kinematic parameters can be set in the channel parameters (kinematik[*].param[*] or trafo[*].*) or in the NC program by suitable V. G variables. Note on CNC Build up to V2.11.28xx and as of V3.00 and higher Up to Build 2.11.28xx, parameterising the kinematics was only possible in the NC program. As of V3.00 the associated kinematic ID must be set in the channel parameters in P-CHAN-00262: e.g. trafo[0].id 15 As of Builds V3.00 and higher, the parameter P-CHAN-00262 is required for all subsequent transformations in pipe and profile tube machining operations. 50 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 51

Tube processing Transformation ID Description 15 Round tube, lateral surface (3/4-axis) [} 53] 78 Round tube, projection (3/4-axis) [} 58] 79 Polygonal tube, profiled tube (3/4-axis) [} 62] 90 Round tube, lateral surface (5/6-axis) [} 81] 93 Polygonal tube, profiled tube (5/6-axis) [} 111] TF5290 | Twin CAT 3 CNC Version: 1.021 51 Cutting Plus
## Page 52

Tube processing Channel parameter Setting example (for CNC Builds up to V2.11.28xx): ... # Parameterisation takes place in P-CHAN-00094 kinematik[15].param[0] 1230000 # P-CHAN-00094 kinematik[15].param[1] 0 # P-CHAN-00094 kinematik[15].param[2] 0 kinematik[15].param[3] 0 kinematik[15].param[4] 0 kinematik[15].param[5] 0 kinematik[15].param[6] 0 kinematik[15].param[7] 0 kinematik[15].param[8] 0 kinematik[15].param[9] 0 ... or Setting example (for CNC Builds as of V3.00 and higher): ... # Parameterisation takes place in P-CHAN-00262 and P-CHAN-00263 trafo[0].id 15 # P-CHAN-00262 trafo[0].param[0] 1230000 # P-CHAN-00263 trafo[0].param[1] 0 # P-CHAN-00263 trafo[0].param[2] 0 trafo[0].param[3] 0 trafo[0].param[4] 0 trafo[0].param[5] 0 trafo[0].param[6] 0 trafo[0].param[7] 0 trafo[0].param[8] 0 trafo[0].param[9] 0 ... NC program Setting example in the NC program: ... V. G. KIN[15]. PARAM[0] = 123000 V. G. KIN[15]. PARAM[1] = 0 V. G. KIN[15]. PARAM[2] = 0 V. G. KIN[15]. PARAM[3] = 0 V. G. KIN[15]. PARAM[4] = 0 V. G. KIN[15]. PARAM[5] = 0 V. G. KIN[15]. PARAM[6] = 0 V. G. KIN[15]. PARAM[7] = 0 V. G. KIN[15]. PARAM[8] = 0 V. G. KIN[15]. PARAM[9] = 0 ... 3.3 Machining variants (3/4-axis) A distinction is made between 4 different machining variants: • Round tube, lateral surface [} 53] • Round tube, projection [} 58] • Polygonal tube, profiled tube [} 62] • Open polygonal tube / profiled tube (L/U profiles) [} 72] 52 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 53

Tube processing 3.3.1 Round tube, lateral surface 3.3.1.1 Programming #CYL [..] The path is programmed in Cartesian coordinates on the lateral surface projection in X and U where U is the rotary axis identifier. When selected, the reference radius R on the cylindrical workpiece must also be programmed. The tool must be located above the centre of rotation when selected. If required, PCS (Programming Coordinate System) modulo calculation can be activated by a kinematic parameter (see below Parameter HD10 in section Description [} 118]). In this case, the PCS U axis is treated as a rotary modulo axis. After it crosses the modulo limit of the rotary axis, the circumferential position is also corrected. UPCS 4 P Radius flat projection of lateral area 2 P Radius workpiece contour U = 0 XPCS Fig. 24: Path programming on the lateral surface In the case of absolute programming, a position on the tube's circumference is always moved to over the shortest distance. The section "Programming modulo axes" in [PROG] must be observed when programming the sign. This must also be taken into account for circular motion blocks (G02, G03) with absolute target point programming. The kinematic parameters in ID 15 [} 118] must be set for this machining type. Syntax to select lateral surface machining with round tube: Lateral surface machining in G17 An axis configuration Z-C is formed by specifying the first and second main axes with #CYL [...]. This implicitly defines a main plane in G17. The reference radius must also be specified. Syntax: #CYL [ <1st_main_axis_name>, <2nd main_axis_name>, <3rd_main_axis_name>..] <1st_main_axis_name Name of the first main axis according to the current main plane. > <2nd Name of the second main axis according to the current main plane (virtual linear main_axis_name> axis, development). TF5290 | Twin CAT 3 CNC Version: 1.021 53 Cutting Plus
## Page 54

Tube processing <3rd_main_axis_name Axis name of the third main axis according to the current main plane with >. specification of the reference radius in [mm, inch]. Syntax to deselect lateral surface machining with round tube Syntax: #CYL OFF modal #CYL [..] (* Example with axis identifier U for 2nd main axis *) N05 G00 Y0 (tool over centre of rotation) N10 G01 X60 U45 F5000 N20 #CYL [X, U, Z60] (Select lateral surface, radius 60 mm) N30 G00 G90 X0 U0 (X: 0mm U:0mm!) N40 G01 U100 F500 N50 G02 X100 R50 N60 G01 U0 N70 Z0 N80 #CYL OFF 54 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 55

Tube processing 3.3.1.2 Axis configuration The following axis configuration must be set in the NC channel. Axis configuration in the NC channel Axis identifier X, Y, Z, U Axis index 0, 1, 2, 3 Kinematic structure (ID 15) Tool axes Workpiece axes NC axes X, Y, Z U Axis structure The Z tool axis must intersect with the rotary axis U, i.e. the tool axis lies at the tube centre point. To achieve this, place the Y axis in the correct position before selecting the transformation. Z Y U Fig. 25: Axis structure TF5290 | Twin CAT 3 CNC Version: 1.021 55 Cutting Plus
## Page 56

Tube processing Parameterisation: Round tube, lateral surface (kinematic ID 15) [} 118] 56 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 57

Tube processing 3.3.1.3 Path example Lateral surface transformation ;Lateral surface transformation N30 #SLOPE [TYPE=STEP] N40 G00 X0 Y0 Z100 U0 N50 #CYL [X, U, Z35] ;Select lateral surface machining N70 G01 G90 X0 U0 F5000 N80 G01 Z10 G90 F50000 N110 $FOR P2=1, 5, 1 N120 P3=P2*4 N130 P4=P3+2 N140 G01 G91 U-P3 N150 XP3 N160 U[2*P3] N170 X-P3 N180 G90 U0 N190 G91 XP4 N190 $ENDFOR N200 $FOR P2=1, 5, 1 N210 P3=P2*4 N220 P4=P3*2+2 N230 G90 G02 IP3 N240 G91 G01 XP4 N250 $ENDFOR N290 #CYL OFF ;Deselect lateral surface machining M30 X 105 2 1,5 1 0,5 WKS- 0 Sollwert 2 -0,5 -1 -1,5 -2 0 0,2 0,4 0,6 0,8 1 1,2 1,4 1,6 1,8 2 WKS-Sollwert 1 X 106 Fig. 26: X-U contour line projection TF5290 | Twin CAT 3 CNC Version: 1.021 57 Cutting Plus
## Page 58

Tube processing 3.3.2 Round tube, projection With projected round tube machining, the programmed X/Y path is mapped by parallel projection onto the lateral surface of a tube. The distance from the tube (Z height) is kept constant by transformation on the curved tube. If the distance is changed, a Z height change can be additionally programmed. Machining is possible up to a programmable radius limit. This value is always less than the tube radius. If a position is programmed outside this limit, processing is aborted with the error message ID 292011. Before selecting the transformation, the tube must be positioned so that the Y axis is within the set limit 'LIMIT' (see NC command #CYL [...]). The specified feed rate refers to the original path programmed. The real feed rate of the tool in the round tube is higher, especially at the edge zone of the tube. Y PCS projection top view radius radius workpiece Y = 0 contour -radius X PCS Fig. 27: Programming with path projection 58 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 59

Tube processing 3.3.2.1 Programming #CYL [RADIUS..] The kinematic parameters in ID 78 [} 120] must be set for this machining type. Syntax to select round tube projection: Syntax: #CYL [ RADIUS=.. [ LIMIT=..] ] modal RADIUS=.. Radius of the round tube or of the lateral surface to be machined, [mm, inch] LIMIT=.. Machining limit, symmetrically relative to the tube centre. [mm, inch] If no limit is explicitly specified, LIMIT = 0.25* RADIUS applies. Syntax to deselect round tube projection: Syntax: #CYL OFF modal #CYL [RADIUS..] N10 X0 Y-1000 Z100 U0 N20 # CYL [RADIUS=35 LIMIT=31] ;Select tube projection N30 G01 G90 X0 Y0 F5000 N40 G01 Z10 N50 $FOR P1=1, 4, 1 N60 G00 G90 X0 Y0 U[P1*90] N70 $FOR P2=1, 5, 1 N80 P3=P2*4 N90 P4=P3+2 N100 G01 G91 Y-P3 N110 XP3 N120 Y[2*P3] N130 X-P3 N140 G90 Y0 N150 G91 XP4 N160 $ENDFOR N170 $FOR P2=1, 5, 1 N180 P3=P2*4 N190 P4=P3*2+2 N200 G90 G02 IP3 N210 G91 G01 XP4 N220 $ENDFOR N230 $ENDFOR N240 #CYL OFF ;Deselect tube projection 3.3.2.2 Axis configuration The kinematic structure consists of three translatory axes in the tool. The rotary workpiece axis is not changed by the transformation. The following axis configuration must be set in the NC channel. Axis configuration in the NC channel Axis identifier X, Y, Z, U Axis index 0, 1, 2, 3 Kinematic structure (ID 78) Tool axes Workpiece axes NC axes X, Y, Z U TF5290 | Twin CAT 3 CNC Version: 1.021 59 Cutting Plus
## Page 60

Tube processing Axis structure Fig. 28: Axis structure Parameterisation: Round tube, projection (kinematic ID 78) [} 120] 60 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 61

Tube processing 3.3.2.3 Path example Tube projection (* Tube projection *) #SLOPE [TYPE=STEP] X0 Y-1000 Z100 U0 N50 #CYL [RADIUS=35 LIMIT=31] (* Selecting tube projection*) N70 G01 G90 X0 Y0 F5000 N80 G01 Z10 G90 F50000 N90 $FOR P1=1, 4, 1 N100 G00 G90 X0 Y0 U[P1*90] N110 $FOR P2=1, 5, 1 N120 P3=P2*4 N130 P4=P3+2 N140 G01 G91 Y-P3 N150 XP3 N160 Y[2*P3] N170 X-P3 N180 G90 Y0 N190 G91 XP4 N190 $ENDFOR N200 $FOR P2=1, 5, 1 N210 P3=P2*4 N220 P4=P3*2+2 N230 G90 G02 IP3 N240 G91 G01 XP4 N250 $ENDFOR N260 $ENDFOR N290 #CYL OFF M30 X 105 2 1,5 1 0,5 WKS- 0 Sollwert 2 -0,5 -1 -1,5 -2 0 0,2 0,4 0,6 0,8 1 1,2 1,4 1,6 1,8 2 WKS-Sollwert 1 X 106 Fig. 29: X-Y contour line projection TF5290 | Twin CAT 3 CNC Version: 1.021 61 Cutting Plus
## Page 62

Tube processing 3.3.3 Polygonal tube, profiled tube This function places the programmed contour onto the projected lateral surface of a profiled tube. The controller guides the workpiece during machining (Y deflection) so that the tool is always perpendicular to the workpiece surface. The distance from the workpiece (Z height) is kept constant without Z programming. A Z height can also be programmed. The programming coordinates of U, X and Z height of the TCP (Tool Centre Point) refers to the lateral surface. With lateral surface machining, the path feed rate for round tubes refers to the programmed projected path. Y PCS top left left rounding of profile Modulo of lateral bottom surface right top right Y = 0 X PCS Z PCS top left top right left right rotation center Y + ACS U ACS bottom Fig. 30: Programming on the lateral surface 62 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 63

Tube processing 3.3.3.1 Programming #CYL [EDGES..] The kinematic parameters in ID 79 [} 122] must be set for this machining type. Syntax to select profiled tube machining: Syntax: #CYL [ EDGES=.. ROUNDING=.. LENGTH1=.. [LENGTH2=.. ] modal [ VEL=.. ] [ ACC=..] ] EDGES=.. Number of edges (corners) of the profiled tube, positive integer The minimum number of corners on the profile is limited to 3 and the maximum number to 16. ROUNDING=.. Edge rounding radius (corner radius), [mm, inch]. LENGTH1=.. Side length for symmetrical tubes or first side length for rectangular tubes, [mm, inch] LENGTH2=.. Second side length for rectangular tubes, [mm, inch] VEL=.. Path velocity on edge rounding [mm/min] ACC=.. Path acceleration on edge rounding [mm/min2] Syntax to deselect profiled tube machining: Syntax: #CYL OFF modal #CYL [EDGES..] (Symmetrical square profile with 100 mm edge length) (and 10 mm edge rounding radius) N10 #CYL [EDGES=4 ROUNDING=10 LENGTH1=100] ... (Asymmetrical square profile with edge lengths of 100 mm) (and 80 mm and 15 mm edge rounding radius) N10 #CYL [EDGES=4 ROUNDING=15 LENGTH1=100 LENGTH2=80] ... (Reduced path dynamics on the profile rounding) N10 #CYL [EDGES=4 ROUNDING=5 LENGTH1=50 LENGTH2=50 ACC=1000000] NOTICE With relative programming, the number of profile rotations is limited for each block due to resources. An er- ror message is generated if the maximum number is exceeded. Tube profile machining (* Tube profile machining *) %main N10 #SLOPE [TYPE=STEP] N20 G90 X0 Y0 Z100 U0 N30 U0 X0 N40 #CYL[EDGES=4 ROUNDING=5 LENGTH1=20 LENGTH2=20] N50 G01 G91 X10 F5000 N60 U50 N70 G03 U-100 I300 J-50 N80 #CYL OFF N90 M30 TF5290 | Twin CAT 3 CNC Version: 1.021 63 Cutting Plus
## Page 64

Tube processing #CYL[EDGES=3 ROUNDING=5 LENGTH1=50] L1 R Triangle #CYL[EDGES=4 ROUNDING=5 #CYL[EDGES=4 ROUNDING=5 LENGTH1=50] LENGTH1=50 LENGTH2=40] L1 R L1 R Square Rectangle L1 L2 #CYL[EDGES=5 ROUNDING=5 #CYL[EDGES=6 ROUNDING=5 LENGTH1=40] LENGTH1=40] L1 L1 R R Pentagon Hexagon Fig. 31: Parameterisation examples for profiled tubes 64 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 65

Tube processing Rectangular profile ZPCS UPCS + Length 1 center of rotation Length 2 + YACS UACS Fig. 32: Lateral surface coordinate system with rectangular profile Activation condition Default case: Selecting on plane surface The transformation is selected when the workpiece is aligned flat. The angle of the U axis then displayed with horizontal workpiece alignment is set by means of a U offset (kinematic parameters). When #CYL[..] is selected, the Y axis position of the tool is located within the plane surface of the workpiece (side length LENGTH1), otherwise an error message is output. Special case: Selection on profile rounding A U angle offset may possibly have to be set in the same way as described before. The transformation should be selected on the profile rounding. This variant can be used when machining was stopped with active transformation on the profile rounding or a profile rounding position was approached using #PTP ON. The CNC checks whether selection is possible with the current active U and Y axis positions. An error message is generated if an axis position are invalid. With G90 absolute programming, positioning on the circumference is always based on the "shortest path” without specifying the direction of rotation. Please note the section "Programming modulo axes" in [PROG] when programming the sign for the direction of rotation. This must also be taken into account for circular motion blocks (G02, G03) with absolute target point programming. TF5290 | Twin CAT 3 CNC Version: 1.021 65 Cutting Plus
## Page 66

Tube processing 3.3.3.2 Axis configuration The kinematic structure consists of 3 translatory axes in the tool and one rotary axis in the workpiece. The following axis configuration must be set in the NC channel. Axis configuration in the NC channel Axis identifier X,Y, Z, U Axis index 0, 1, 2, 3 Kinematic structure (ID 79) Tool axes Workpiece axes NC axes X, Y, Z U 66 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 67

Tube processing Axis structure Fig. 33: Axis structure Parameterisation: Polygonal tube, profiled tube (kinematic ID 79) [} 122] TF5290 | Twin CAT 3 CNC Version: 1.021 67 Cutting Plus
## Page 68

Tube processing 3.3.3.3 Profile rounding, technology and dynamics during feed motion Machining on profile roundings In comparison to straight sections, there may be deviations in material characteristics (e.g. wall thickness) in the area of the profile roundings. When the limits to the profile roundings are crossed, this can be signalled by M/H functions. As a result, the process can be influenced by the PLC. The M/H functions are always of the MOS type (M functions without synchronisation). Y PCS Output M400 Output M300 N20 N10 X PCS Z PCS Y + ACS U ACS Fig. 34: Output of a technology function at a profile rounding 68 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 69

Tube processing Dynamics in the profile rounding At the transition points of the profile roundings, the CNC may possibly reduce the feed rate due to the acceleration of other axes depending on the parameterised axis dynamics of the participating axes. The dynamics on the profile rounding can be influenced by parameters in the NC command #CYL[...]. In addition to the normal path velocity and acceleration limit (cf. #VECTOR LIMIT[ VEL ACC]), the values from the #CYL[...] command are also considered in the profile rounding. Machining on profile roundings #CYL[EDGES=4 ROUNDING=5 LENGTH1=50 LENGTH2=50 ACC=500000 VEL=1000] 5 X 10 1 0,8 0,6 path velocity 0,4 0,2 0 0,2 0,4 0,6 0,8 1 1,2 1,4 3 cycles X 10 Fig. 35: Path dynamics adjustment on profile rounding TF5290 | Twin CAT 3 CNC Version: 1.021 69 Cutting Plus
## Page 70

Tube processing 3.3.3.4 Path example Polygonal tube transformation (* Polygonal tube transformation *) %L SUB_CONT N[10+P30] G00 G90 X0 Z100 U0 N[20+P30] G162 P1=5 (* Radius inner circle *) P2=25 (* Radius outer circle *) P3=22.5 P4=2*P3 $FOR P10=0, 8 , 1 P6=P10*P4 P7=SIN[P6] P8=COS[P6] N[40+P10] G01 X[P2*P8] U[P2*P7] F5000 P20=SIN[P3 + P6] P21=COS[P3 + P6] N[50+P10] G01 X[P1*P21] U[P1*P20] F5000 $ENDFOR M29 %t_tube_prof.nc N10 #SLOPE [TYPE=STEP] N20 G00 X0 Y0 Z100 U0 N70 #CYL[EDGES=4 ROUNDING=5 LENGTH1=20 LENGTH2=20] (* Profile circumference approx. 111.41592653589793 mm *) P30=2000 N35 G92 X30 U30 N40 LL SUB_CONT N45 G92 X-30 U30 N50 LL SUB_CONT N60 G92 X30 U-[-30] N70 LL SUB_CONT N80 G92 X-30 U-[-30] N90 LL SUB_CONT N100 G92 X0 U0 N110 #CYL OFF M30 70 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 71

Tube processing 5 X 10 1 0,8 WKS- 0,6 Sollwert 2 0,4 0,2 5 0 -4 -2 0 2 4 X 10 WKS-Sollwert 1 Fig. 36: X-U contour line projection TF5290 | Twin CAT 3 CNC Version: 1.021 71 Cutting Plus
## Page 72

Tube processing 3.3.4 Open polygonal tube / profiled tube (L/U profiles) This function is available as of CNC Build V2.11.2807.01 . Characteristics An extension of the definition permits the machining of non-closed profiles. An open profiled tube (L/U tube) is detected as a limited lateral surface. There is no limitation of the path motion or modulo calculation of the PCS coordinate when "virtual edges" are crossed. For this reason, the coordinate system on a lateral surface is linear (see also linear coordinate system for round tube machining). Starting from the zero point, the lateral surface is divided into a positive and a negative direction. Programming is always related to the closed edges of the tube profile. This means that it is possible to cross virtual edges when profile transformation is active but there is no rotation of the workpiece or Z height adjustment. 0 0 Center of Center of rotation rotation U-Profil EDGES=4 L-Profil 72 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 73

Tube processing Lateral surface of Lateral surface of U-Profile L-Profile U U PCS PCS + + U = 0 top L1 U = 0 top L1 rounding of rounding of profile profile left L2 left L2 bottom L1 X X PCS PCS Z Z PCS PCS top top center of rotation center of rotation left Y left Y + ACS + ACS U U ACS ACS bottom Fig. 37: Examples of open profiles, U and L profile Clamping examples of open rectangular profiles: TF5290 | Twin CAT 3 CNC Version: 1.021 73 Cutting Plus
## Page 74

Tube processing Fig. 38: Clamping examples 74 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 75

Tube processing 3.3.4.1 Programming #CYL [EDGES.. OPEN..] Open edges This extension permits the user to define 2 edges between which the profile is opened. L1 UPCS Open = 1 Edge 4 0 Edge 1 Centerreal of rotation L2 UACS Edge 3 Edge 2 Close = 2 U-Profil Edges = 4 Fig. 39: Defining an open U profile specifying the open edges The kinematic parameters in ID 79 [} 122] must be set for this machining type. Syntax to select open profiled tube machining: Syntax: #CYL [ EDGES=.. ROUNDING=.. LENGTH1=.. [LENGTH2=.. ] modal [ OPEN=.. CLOSE=.. ] ] EDGES=.. Number of edges (corners) of the closed profiled tube, positive integer. The number of profile edges is limited to minimum 3 and maximum 16. ROUNDING=.. Edge rounding radius (corner radius), [mm, inch]. LENGTH1=.. Side length for symmetrical tubes or first side length for rectangular tubes, [mm, inch] LENGTH2=.. Second side length for rectangular tubes, [mm, inch] OPEN=.. Number of the edge [ 1; <EDGES>] where the workpiece is open. Ascending number in lateral surface projection (positive U direction). PCS CLOSE=.. Number of the edge [ 1; < EDGES>] where the workpiece closes again (positive U direction). PCS TF5290 | Twin CAT 3 CNC Version: 1.021 75 Cutting Plus
## Page 76

Tube processing Syntax to deselect open profiled tube machining: Syntax: #CYL OFF modal Programming #CYL [EDGES.. OPEN..] … N3 U0 X0 N4 #CYL [EDGES=4 ROUNDING=5 LENGTH1=60 LENGTH2=45 OPEN=1 CLOSE=2] N5 G01 G91 X10 F5000 To determine the edge numbers for 'OPEN' and 'CLOSE', start with '1 PCS' in the positive PCS dir- ection (clockwise, CW) from 'OPEN' to 'CLOSE' across the profile. This ensures that all profiled parts between 'OPEN' and 'CLOSE' are in the open range. OPEN=1 / CLOSE=2: -> U open right OPEN=3 / CLOSE=4 -> U open left OPEN=1 / CLOSE=3: -> L open right OPEN=2 / CLOSE=4: -> L open right NOTICE It is only possible to select profile machining if a closed profile edge is orientated towards the tool when the rotating axis is in zero position. For example the following command is not permitted: #CYL [EDGES=4 ROUNDING=5 LENGTH1=60 OPEN=4 CLOSE=1] If it is necessary to cross an open profile edge to the adjacent surface (e.g. if the path to the new target position is shorter), deselect the profile transformation (#CYL OFF) or possibly retract the tool, reposition the rotating axis and repeat selection of the profile transformation with #CYL [EDGES…]. Examples of open profiles #CYL[EDGES=4 ROUNDING=5 LENGTH1=50] L1 R OPEN=2 CLOSE=3 OPEN=3 CLOSE=4 OPEN=1 CLOSE=2 OPEN=1 CLOSE=3 OPEN=2 CLOSE=4 76 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 77

Tube processing #CYL[EDGES=5 ROUNDING=5 LENGTH1=40] L1 R OPEN=2 CLOSE=4 OPEN=3 CLOSE=5 OPEN=1 CLOSE=3 OPEN=2 CLOSE=5 OPEN=1 CLOSE=4 Fig. 40: Examples of programming parameters for open profiles TF5290 | Twin CAT 3 CNC Version: 1.021 77 Cutting Plus
## Page 78

Tube processing Profile transformation of square profile (* Polygonal tube transformation, square tube, segmentation at circumference, *) (* Absolute programming *) (* Open profile *) %L SUB_CONT N[10+P30] G00 G90 X0 Z100 U0 N[20+P30] G162 P1=20 (* inner circle radius *) P2=50 (* outer circle radius *) P3=22.5 P4=2*P3 G261 $FOR P10=0, 8 , 1 P6=P10*P4 P7=SIN[P6] P8=COS[P6] N[40+P10] G01 X[P2*P8] U[P2*P7] F5000 P20=SIN[P3 + P6] P21=COS[P3 + P6] N[50+P10] G01 X[P1*P21] U[P1*P20] F5000 $ENDFOR G260 M29 %prof_open_close_.nc N10 #SLOPE [TYPE=STEP] N20 G00 X0 Y0 Z100 U0 N25 #CONTOUR MODE[DEV PATH_DEV 2] N65 G00 G90 Y0 U0 N70 #CYL[EDGES=4 ROUNDING=5 LENGTH1=20 LENGTH2=20 OPEN=2 CLOSE=3] P30=2000 N80 LL SUB_CONT N90 #CYL OFF M30 78 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 79

Tube processing 5 X 10 1 0,8 WCS- 0,6 Setpoint 2 0,4 0,2 5 0 -4 -2 0 2 4 X 10 WCS-Setpoint 1 Fig. 41: X-U flat projection of geometry TF5290 | Twin CAT 3 CNC Version: 1.021 79 Cutting Plus
## Page 80

Tube processing 3.3.4.2 Eccentric rotation centre point Open edges When the workpiece is not clamped centrally, it results in an offset between the workpiece centre point and the rotation centre. This offset can be additionally specified when it is selected. L 1 Z Y horizontal offset Y L 2 Center rotation Z vertical offset Center workpiece L-Profil Edges = 4 Fig. 42: Defining an open L profile with rotation centre point offset 80 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 81

Tube processing Syntax to select open profiled tube machining with offset of rotation centre point: #CYL [ EDGES=.. … CLOSE=.. [ HOR_OFFSET=.. VERT_OFFSET=.. ] ] EDGES=.. ... Syntax of profile description CLOSE=.. HOR_OFFSET=.. Offset of the workpiece centre point in horizontal direction (Y here) towards the actual rotation centre point in [mm, inch]. VERT_OFFSET=.. Offset of the workpiece centre point in vertical direction (Y here) towards the actual rotation centre point in [mm, inch]. 3.3.4.3 Axis configuration The kinematic structure consists of 3 translatory axes in the tool and one rotary axis in the workpiece. The following axis configuration must be set in the NC channel. Axis configuration in the NC channel Axis identifier X,Y, Z, U Axis index 0, 1, 2, 3 Kinematic structure (ID 79) Tool axes Workpiece axes NC axes X, Y, Z U Parameterisation: Polygonal tube, profiled tube (kinematic ID 79) [} 122] 3.4 Machining variants (5/6-axis) A distinction is made between 2 different machining variants: • Round tube, lateral surface [} 81] • Polygonal tube, profiled tube [} 111] 3.4.1 Round tube, lateral surface 3.4.1.1 6-axis, 2 orientation axes in the tool head available This function is available as of CNC Build V2.11.2019.00. Combined machining of plate/round tube The kinematics here consist of 6 axes and are intended for use on machine tools which have an optional tube axis in addition to the 5 axes of a classic plate machining machine. The machining orientation is defined by the 2 rotation axes in the tool. To machine the tube, the TCP (tool centre point) and the X/Y axis remain positioned above the tube rotation axis. The X/Y position of the TCP remains at the top point of the tube during machining. The contour is programmed on the lateral surface by the axes U, Y and X, V. Orientation is programmed dependent on the axis structure present in the tool head: • With the structure with machine angle A-B or B-A directly with the assigned angle values, or with the virtual angles C and A. TF5290 | Twin CAT 3 CNC Version: 1.021 81 Cutting Plus
## Page 82

Tube processing • With the head structure CA, CB, the programmings takes place directly using the angle values CA, CB. In these cases (virtual or real C axis) the bevel angle can be kept constant to the contour using the function "tangential tracking”. Set one of the following 6-axis configurations. Depending on the machine configuration, the tube axis lies parallel to the X or Y machine axis. This is controlled by the command #CYL ORI LATERAL[..]. Fig. 43: TCP rotates about the tube centre axis, tube top point 82 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 83

Tube processing 3.4.1.1.1 Tube machining with AB orientation head Axis configuration in the NC channel Axis identifier X, Y, Z, A/(C), B/(A), U/V Axis index 0, 1, 2, 3, 4, 5 Kinematic structure (ID 90) Tool axes Workpiece axes NC axes X, Y, Z, A/(C), B/(A) U/V +Z +A -B -A +B +X -Z +Y -X -Y -U +U Z w Y X w w Fig. 44: Lateral surface machining with tube axis parallel to Y TF5290 | Twin CAT 3 CNC Version: 1.021 83 Cutting Plus
## Page 84

Tube processing +Z +A -B -A +B +X -Z +Y -X -Y +V -V Z w Y X w w Fig. 45: Lateral surface machining with tube axis parallel to X Parameterisation: Parameters for AB orientation head [} 127] 84 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 85

Tube processing 3.4.1.1.2 Tube machining with BA orientation head Axis configuration in the NC channel Axis identifier X, Y, Z, B/(C), A/(A), U/V Axis index 0, 1, 2, 3, 4, 5 Kinematic structure (ID 90) Tool axes Workpiece axes NC axes X, Y, Z, B/(C), A/(A) U/V +Z +A -B -A +B +Y -Z +X -Y -X +V -V Z w Y X w w Fig. 46: Lateral surface machining with tube axis parallel to X TF5290 | Twin CAT 3 CNC Version: 1.021 85 Cutting Plus
## Page 86

Tube processing +Z +A -B +B -A +Y -Z +X -Y -X -U +U Z w Y X w w Fig. 47: Lateral surface machining with tube axis parallel to Y Parameterisation: Parameters for BA orientation head [} 129] 86 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 87

Tube processing 3.4.1.1.3 Tube machining with CA orientation head Axis configuration in the NC channel Axis identifier X, Y, Z, C, A, U/V Axis index 0, 1, 2, 3, 4, 5 Kinematic structure (ID 90) Tool axes Workpiece axes NC axes X, Y, Z, C ,A U/V Fig. 48: Lateral surface machining with tube axis parallel to Y TF5290 | Twin CAT 3 CNC Version: 1.021 87 Cutting Plus
## Page 88

Tube processing +Z +C -C +A +X -Z -A +Y -X +V -Y -V Z w Y X w w Fig. 49: Lateral surface machining with tube axis parallel to X Parameterisation: Parameters for CA orientation head [} 131] 88 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 89

Tube processing 3.4.1.1.4 Tube machining with CB orientation head Axis configuration in the NC channel Axis identifier X, Y, Z, C, B, U/V Axis index 0, 1, 2, 3, 4, 5 Kinematic structure (ID 90) Tool axes Workpiece axes NC axes X, Y, Z, C, B U/V +Z +C -C -B +Y -Z +B +X -Y -X +V -V Z w Y X w w Fig. 50: Lateral surface machining with tube axis parallel to X TF5290 | Twin CAT 3 CNC Version: 1.021 89 Cutting Plus
## Page 90

Tube processing +Z +C -C -B +Y -Z +X +B -Y -X -U +U Z w Y X w w Fig. 51: Lateral surface machining with tube axis parallel to Y Parameterisation: Parameters for CB orientation head [} 133] 90 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 91

Tube processing 3.4.1.1.5 Tube machining with CA cardanic orientation head Axis configuration in the NC channel Axis identifier X, Y, Z, C, A, U/V Axis index 0, 1, 2, 3, 4, 5 Kinematic structure (ID 90) Tool axes Workpiece axes NC axes X, Y, Z, C, A U/V +Z +C -C +A -A +Y -Z +X -Y -X +V -V Z w Y X w w Fig. 52: Lateral surface machining with tube axis parallel to X TF5290 | Twin CAT 3 CNC Version: 1.021 91 Cutting Plus
## Page 92

Tube processing +Z +C -C +A -A +Y -Z +X -Y -X -U +U Z w Y X w w Fig. 53: Lateral surface machining with tube axis parallel to Y Parameterisation: Parameters for CA cardanic orientation head [} 135] 92 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 93

Tube processing 3.4.1.2 5-axis, one orientation axis in both workpiece and tool This functionality has been available since CNC Build V2.11.2807.20. Round tube machining These kinematics are intended for machine tools with 5 machine axes which are specialised for tube machining only. This requires a configuration of 5 real machine axes and one virtual axis or one simulation axis. The machining orientation is defined by one rotation axis in the tool and one in the workpiece. The TCP is positioned for tube machining with the X/Y axis above the top point of the tube. As opposed to 6- axis kinematics [} 81] the TCP does not remain at the top point of the tube when there is a change in orientation but drifts along the surface of the cylinder. This must be considered to avoid collisions between the workpiece and the tool holder. The path is programmed on the lateral surface by the axes U, Y and X, V. Orientation is programmed dependent on the existing kinematics. • A-U or B-V structures are programmed directly using the assigned angle values A-B or B-A. • When virtual axes CA are used for parametrisation, these angles are used for programming. Fig. 54: TCP drifts along the XZ, YZ plane TF5290 | Twin CAT 3 CNC Version: 1.021 93 Cutting Plus
## Page 94

Tube processing 3.4.1.2.1 Tube machining with AU kinematics Axis configuration in the NC channel Axis identifier X, Y, Z, B*, A, U Axis index 0, 1, 2, 3, 4, 5 Kinematic structure (ID 90) Tool axes Workpiece axes NC axes X, Y, Z, B*, A U (*) Virtual axis or simulation axis +Z +A -A +X -Z +Y -X -Y -U +U Z w Y X w w Fig. 55: Lateral surface machining with AU kinematics Parameterisation: Parameters for AU kinematics [} 137] 94 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 95

Tube processing 3.4.1.2.2 Tube machining with BV kinematics Axis configuration in the NC channel Axis identifier X, Y, Z, A*, B, V Axis index 0, 1, 2, 3, 4, 5 Kinematic structure (ID 90) Tool axes Workpiece axes NC axes X, Y, Z, A*, B V (*) Virtual axis or simulation axis +Z -B +B +Y -Z +X -Y -X +V -V Z w Y X w w Fig. 56: Lateral surface machining with BV kinematics Parameterisation: Parameters for BV kinematics [} 139] TF5290 | Twin CAT 3 CNC Version: 1.021 95 Cutting Plus
## Page 96

Tube processing 3.4.1.3 Programming Kinematic structure and axis identifiers The U machine axis is normally an axis that rotates about the X axis, the V axis about Y and the W axis about Z. The configurations and programming examples deviate from this definition. The axis identifiers for the tube system are selected to achieve logical programming in a virtual right-handed G17 lateral surface system. Therefore, tube machining is dependent on the orientation of the tube axis in the U-Y or X-V plane. Of course, identifiers used in the NC program may also be the name of the rotary axis in both cases, e.g. U. For tube machining the function is selected by the command #CYL ORI LATERAL […]. The kinematic structure is then selected implicitly. A kinematic parameter defines which kinematic structure is activated in the tool head on selection. The sequence of axes during selection defines whether it is a U projection (tube axis is in Y direction) or a V projection (tube axis is in X direction). The same kinematic can be used for plate machining. Selection takes place with the command #KIN ID[90]; the kinematic is activated by #TRAFO ON. The tube axis U can be programmed as tracking axis. The programming variant with virtual C-A axis is only required for AB, BA head configurations if the application requires machining at a bevel angle to the path. In this case the tangential tracking function can be activated. For all other head configurations there is a real C machine axis. 3.4.1.3.1 Tube machining (#CYL ORI LATERAL) The kinematic parameters in ID 90 [} 127] must be set for this machining type. Syntax for selecting and parameterising, active as of the next motion block: Syntax: #CYL ORI LATERAL [ AX1<axis_name> | AXNR1=.. AX2<axis_name> | AXNR2=.. RADIUS=.. ] AX1<axis_name> Axis identifier of the first main axis (X or virtual linear axis U, flat projection) AXNR1=.. Logical axis number of first main axis (X or virtual linear axis U, flat projection), positive integer AX2<axis_name> Axis identifier of the second main axis (Y or virtual linear axis V, flat projection) AXNR2=.. Logical axis number of the second main axis (Y or virtual linear axis V, flat projection), positive integer RADIUS=.. Tube (bending) radius, [mm, inch] Syntax for deselection: #CYL OFF 96 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 97

Tube processing 3.4.1.3.2 Plate machining A general description is contained in the programming manual in Section 5-axis functionality [PROG]: N10 #KIN ID[90] (* Select kinematics *) N20 #TRAFO ON (* Select kinematics *) N30 G00 X100 Y100 Z10 (* Path sessions *) .................................. N100 #TRAFO OFF (* Deselection *) For plate machining the tube rotary axis (e.g. U) must be located on index 5 in the axis configura- tion. The tube rotary axis (e.g. U) is configured for C axis mode as a rotary modulo axis (operation mode 0x204, see P-AXIS-00015). All kinematics with 2 rotary axes in the tool can be selected as listed under the 6-axis head struc- tures. (AB, BA, CA, CB, CA cardanic head). The head structure is selected by the kinematic para- meter HD13 as for tube machining. TF5290 | Twin CAT 3 CNC Version: 1.021 97 Cutting Plus
## Page 98

Tube processing 3.4.1.4 Examples of tube machining (6-axis) 3.4.1.4.1 AB head, AB programming %L SUB_1 N100 G01 G90 U50 F2000 N150 B15 N200 Y40 N250 B0 A-15 N300 G01 U[-40] N350 B-15 A0 N400 G01 Y-40 N450 B0 A15 N500 G01 U40 N550 B15 A0 N600 G01 Y0 N700 G01 G90 U20 F2000 N1040 M29 %tube_5ax V. G. KIN[90]. PARAM[0] = 1000000 V. G. KIN[90]. PARAM[1] = 0 V. G. KIN[90]. PARAM[2] = 0 V. G. KIN[90]. PARAM[3] = 0 V. G. KIN[90]. PARAM[4] = 0 V. G. KIN[90]. PARAM[5] = 0 V. G. KIN[90]. PARAM[6] = 0 V. G. KIN[90]. PARAM[7] = 0 V. G. KIN[90]. PARAM[8] = 0 V. G. KIN[90]. PARAM[9] = 0 V. G. KIN[90]. PARAM[10] = 0 V. G. KIN[90]. PARAM[11] = 0 V. G. KIN[90]. PARAM[12] = 0 (* AB head *) V. G. KIN[90]. PARAM[13] = 0 (* AB programming *) V. G. KIN[90]. PARAM[14] = 0 V. G. KIN[90]. PARAM[15] = 0 V. G. KIN[90]. PARAM[16] = 0 V. G. KIN[90]. PARAM[17] = 0 N05 #SLOPE [TYPE=TRAPEZ] N20 #KIN ID[90] N40 G01 X500 Y0 Z50 A0 B0 F2000 N50 #CYL ORI LATERAL[AX1=U AX2=Y RADIUS=30] N40 G01 U0 Y0 Z30 A0 B0 F2000 N80 LL SUB_1 N110 #CYL OFF M30 98 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 99

Tube processing 3.4.1.4.2 BA head, BA programming %L SUB_1 N100 G01 G90 U50 F2000 N150 A15 N200 Y40 N250 A0 B-15 N300 G01 U[-40] N350 A-15 B0 N400 G01 Y-40 N450 A0 B0 N500 G01 U40 N550 A15 B0 N600 G01 Y0 N700 G01 G90 U20 F2000 N1040 M29 %tube_5ax V. G. KIN[90]. PARAM[0] = 1000000 V. G. KIN[90]. PARAM[1] = 0 V. G. KIN[90]. PARAM[2] = 0 V. G. KIN[90]. PARAM[3] = 0 V. G. KIN[90]. PARAM[4] = 0 V. G. KIN[90]. PARAM[5] = 0 V. G. KIN[90]. PARAM[6] = 0 V. G. KIN[90]. PARAM[7] = 0 V. G. KIN[90]. PARAM[8] = 0 V. G. KIN[90]. PARAM[9] = 0 V. G. KIN[90]. PARAM[10] = 0 V. G. KIN[90]. PARAM[11] = 0 V. G. KIN[90]. PARAM[12] = 1 (* BA head *) V. G. KIN[90]. PARAM[13] = 0 (* BA programming *) V. G. KIN[90]. PARAM[14] = 0 V. G. KIN[90]. PARAM[15] = 0 V. G. KIN[90]. PARAM[16] = 0 V. G. KIN[90]. PARAM[17] = 0 N05 #SLOPE [TYPE=TRAPEZ] N20 #KIN ID[90] N40 G01 X500 Y0 Z50 B0 A0 F2000 N50 #CYL ORI LATERAL[AX1=U AX2=Y RADIUS=30] N40 G01 U0 Y0 Z30 B0 A0 F2000 N80 LL SUB_1 N110 #CYL OFF M30 TF5290 | Twin CAT 3 CNC Version: 1.021 99 Cutting Plus
## Page 100

Tube processing 3.4.1.4.3 AB head, CA programming %L SUB_1 N100 G01 G90 U50 F2000 N200 Y40 N300 G03 Y50 U40 I-10 N500 G01 U[-40] N700 G03 Y40 U[-50] J-10 N900 G01 Y-40 N1100 G03 Y-50 U[-40] I10 N1300 G01 U40 N1500 G03 Y-40 U50 J10 N1700 G01 Y0 N1900 G01 G90 U20 F2000 N1040 M29 %tube_5ax V. G. KIN[90]. PARAM[0] = 1000000 V. G. KIN[90]. PARAM[1] = 0 V. G. KIN[90]. PARAM[2] = 0 V. G. KIN[90]. PARAM[3] = 0 V. G. KIN[90]. PARAM[4] = 0 V. G. KIN[90]. PARAM[5] = 0 V. G. KIN[90]. PARAM[6] = 0 V. G. KIN[90]. PARAM[7] = 0 V. G. KIN[90]. PARAM[8] = 0 V. G. KIN[90]. PARAM[9] = 0 V. G. KIN[90]. PARAM[10] = 0 V. G. KIN[90]. PARAM[11] = 0 V. G. KIN[90]. PARAM[12] = 0 (* AB head *) V. G. KIN[90]. PARAM[13] = 1 (* CA programming *) V. G. KIN[90]. PARAM[14] = 0 V. G. KIN[90]. PARAM[15] = 0 V. G. KIN[90]. PARAM[16] = 0 V. G. KIN[90]. PARAM[17] = 0 N05 #SLOPE [TYPE=TRAPEZ] N40 G01 X500 Y0 Z50 A0 B0 F2000 N45 #SET AX[X,1,0][Y,2,1][Z,3,2][C,4,3][A,5,4][U,6,5] N50 #CYL ORI LATERAL[AX1=U AX2=Y RADIUS=30] N40 G01 U0 Y0 Z30 C0 A15 F2000 N70 #CAXTRACK ON[ANGLIMIT 0.1] N80 LL SUB_1 N90 #CAXTRACK OFF N110 #CYL OFF M30 100 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 101

Tube processing 3.4.1.4.4 BA head, CA programming %L SUB_1 N100 G01 G90 U50 F2000 N200 Y40 N300 G03 Y50 U40 I-10 N500 G01 U[-40] N700 G03 Y40 U[-50] J-10 N900 G01 Y-40 N1100 G03 Y-50 U[-40] I10 N1300 G01 U40 N1500 G03 Y-40 U50 J10 N1700 G01 Y0 N1900 G01 G90 U20 F2000 N1040 M29 %tube_5ax V. G. KIN[90]. PARAM[0] = 1000000 V. G. KIN[90]. PARAM[1] = 0 V. G. KIN[90]. PARAM[2] = 0 V. G. KIN[90]. PARAM[3] = 0 V. G. KIN[90]. PARAM[4] = 0 V. G. KIN[90]. PARAM[5] = 0 V. G. KIN[90]. PARAM[6] = 0 V. G. KIN[90]. PARAM[7] = 0 V. G. KIN[90]. PARAM[8] = 0 V. G. KIN[90]. PARAM[9] = 0 V. G. KIN[90]. PARAM[10] = 0 V. G. KIN[90]. PARAM[11] = 0 V. G. KIN[90]. PARAM[12] = 1 (* AB head *) V. G. KIN[90]. PARAM[13] = 1 (* CA programming *) V. G. KIN[90]. PARAM[14] = 0 V. G. KIN[90]. PARAM[15] = 0 V. G. KIN[90]. PARAM[16] = 0 V. G. KIN[90]. PARAM[17] = 0 N05 #SLOPE [TYPE=TRAPEZ] N40 G01 X500 Y0 Z50 A0 B0 F2000 N45 #SET AX[X,1,0][Y,2,1][Z,3,2][C,4,3][A,5,4][U,6,5] N50 #CYL ORI LATERAL[AX1=U AX2=Y RADIUS=30] N40 G01 U0 Y0 Z30 C0 A15 F2000 N70 #CAXTRACK ON[ANGLIMIT 0.1] N80 LL SUB_1 N90 #CAXTRACK OFF N110 #CYL OFF M30 TF5290 | Twin CAT 3 CNC Version: 1.021 101 Cutting Plus
## Page 102

Tube processing 3.4.1.4.5 CA head, CA programming %L SUB_1 N100 G01 G90 U50 F2000 N200 Y40 N300 G03 Y50 U40 I-10 N500 G01 U[-40] N700 G03 Y40 U[-50] J-10 N900 G01 Y-40 N1100 G03 Y-50 U[-40] I10 N1300 G01 U40 N1500 G03 Y-40 U50 J10 N1700 G01 Y0 N1900 G01 G90 U20 F2000 N1040 M29 %tube_5ax V. G. KIN[90]. PARAM[0] = 1000000 V. G. KIN[90]. PARAM[1] = 0 V. G. KIN[90]. PARAM[2] = 0 V. G. KIN[90]. PARAM[3] = 0 V. G. KIN[90]. PARAM[4] = 0 V. G. KIN[90]. PARAM[5] = 0 V. G. KIN[90]. PARAM[6] = 0 V. G. KIN[90]. PARAM[7] = 0 V. G. KIN[90]. PARAM[8] = 0 V. G. KIN[90]. PARAM[9] = 0 V. G. KIN[90]. PARAM[10] = 0 V. G. KIN[90]. PARAM[11] = 0 V. G. KIN[90]. PARAM[12] = 2 (* CA head *) V. G. KIN[90]. PARAM[13] = 0 V. G. KIN[90]. PARAM[14] = 0 V. G. KIN[90]. PARAM[15] = 0 V. G. KIN[90]. PARAM[16] = 0 V. G. KIN[90]. PARAM[17] = 0 N05 #SLOPE [TYPE=TRAPEZ] N40 G01 X500 Y0 Z50 C0 A0 F2000 N45 #SET AX[X,1,0][Y,2,1][Z,3,2][C,4,3][A,5,4][U,6,5] N50 #CYL ORI LATERAL[AX1=U AX2=Y RADIUS=30] N40 G01 U0 Y0 Z30 C0 A15 F2000 N60 #CAXTRACK ON[ANGLIMIT 0.1] N70 LL SUB_1 N80 #CAXTRACK OFF N90 #CYL OFF M30 102 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 103

Tube processing 3.4.1.4.6 CB Kopf, CB Programmierung %L SUB_1 N100 G01 G90 U50 F2000 N200 Y40 N300 G03 Y50 U40 I-10 N500 G01 U[-40] N700 G03 Y40 U[-50] J-10 N900 G01 Y-40 N1100 G03 Y-50 U[-40] I10 N1300 G01 U40 N1500 G03 Y-40 U50 J10 N1700 G01 Y0 N1900 G01 G90 U20 F2000 N1040 M29 %tube_5ax V. G. KIN[90]. PARAM[0] = 1000000 V. G. KIN[90]. PARAM[1] = 0 V. G. KIN[90]. PARAM[2] = 0 V. G. KIN[90]. PARAM[3] = 0 V. G. KIN[90]. PARAM[4] = 0 V. G. KIN[90]. PARAM[5] = 0 V. G. KIN[90]. PARAM[6] = 0 V. G. KIN[90]. PARAM[7] = 0 V. G. KIN[90]. PARAM[8] = 0 V. G. KIN[90]. PARAM[9] = 0 V. G. KIN[90]. PARAM[10] = 0 V. G. KIN[90]. PARAM[11] = 0 V. G. KIN[90]. PARAM[12] = 4 (* CA head *) V. G. KIN[90]. PARAM[13] = 0 V. G. KIN[90]. PARAM[14] = 0 V. G. KIN[90]. PARAM[15] = 0 V. G. KIN[90]. PARAM[16] = 0 V. G. KIN[90]. PARAM[17] = 0 N05 #SLOPE [TYPE=TRAPEZ] N40 G01 X500 Y0 Z50 C0 B0 F2000 N45 #SET AX[X,1,0][Y,2,1][Z,3,2][C,4,3][B,5,4][U,6,5] N50 #CYL ORI LATERAL[AX1=U AX2=Y RADIUS=30] N40 G01 U0 Y0 Z30 C0 B15 F2000 N60 #CAXTRACK ON[ANGLIMIT 0.1] N70 LL SUB_1 N80 #CAXTRACK OFF N90 #CYL OFF M30 TF5290 | Twin CAT 3 CNC Version: 1.021 103 Cutting Plus
## Page 104

Tube processing 3.4.1.4.7 CA cardanic head, CA programming %L SUB_1 N100 G01 G90 U50 F2000 N200 Y40 N300 G03 Y50 U40 I-10 N500 G01 U[-40] N700 G03 Y40 U[-50] J-10 N900 G01 Y-40 N1100 G03 Y-50 U[-40] I10 N1300 G01 U40 N1500 G03 Y-40 U50 J10 N1700 G01 Y0 N1900 G01 G90 U20 F2000 N1040 M29 %tube_5ax V. G. KIN[90]. PARAM[0] = 0 V. G. KIN[90]. PARAM[1] = 0 V. G. KIN[90]. PARAM[2] = 450000 V. G. KIN[90]. PARAM[3] = 0 V. G. KIN[90]. PARAM[4] = 0 V. G. KIN[90]. PARAM[5] = 0 V. G. KIN[90]. PARAM[6] = 0 V. G. KIN[90]. PARAM[7] = 0 V. G. KIN[90]. PARAM[8] = 0 V. G. KIN[90]. PARAM[9] = 0 V. G. KIN[90]. PARAM[10] = 0 V. G. KIN[90]. PARAM[11] = 0 V. G. KIN[90]. PARAM[12] = 8 (* CA cardan head *) V. G. KIN[90]. PARAM[13] = 0 V. G. KIN[90]. PARAM[14] = 0 V. G. KIN[90]. PARAM[15] = 0 V. G. KIN[90]. PARAM[16] = 0 V. G. KIN[90]. PARAM[17] = 0 N05 #SLOPE [TYPE=TRAPEZ] N40 G01 X500 Y0 Z50 C0 B0 F2000 N45 #SET AX[X,1,0][Y,2,1][Z,3,2][C,4,3][A,5,4][U,6,5] N50 #CYL ORI LATERAL[AX1=U AX2=Y RADIUS=30] N40 G01 U0 Y0 Z30 C0 B15 F2000 N60 #CAXTRACK ON[ANGLIMIT 0.1] N70 LL SUB_1 N80 #CAXTRACK OFF N90 #CYL OFF M30 104 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 105

Tube processing 3.4.1.5 Examples of plate machining (6-axis) 3.4.1.5.1 AB Kopf, CA Programming %t_tube V. G. KIN[90]. PARAM[0] = 1000000 V. G. KIN[90]. PARAM[1] = 0 V. G. KIN[90]. PARAM[2] = 0 V. G. KIN[90]. PARAM[3] = 0 V. G. KIN[90]. PARAM[4] = 0 V. G. KIN[90]. PARAM[5] = 0 V. G. KIN[90]. PARAM[6] = 0 V. G. KIN[90]. PARAM[7] = 0 V. G. KIN[90]. PARAM[8] = 0 V. G. KIN[90]. PARAM[9] = 0 V. G. KIN[90]. PARAM[10] = 0 V. G. KIN[90]. PARAM[11] = 0 V. G. KIN[90]. PARAM[12] = 0 AB Kopf V. G. KIN[90]. PARAM[13] = 1 (* CA programming *) V. G. KIN[90]. PARAM[14] = 0 V. G. KIN[90]. PARAM[15] = 0 V. G. KIN[90]. PARAM[16] = 0 V. G. KIN[90]. PARAM[17] = 0 N10 #SLOPE [TYPE=TRAPEZ] N20 #KIN ID[90] N30 G01 X0 Y0 Z0 A0 C0 U0 F2000 N40 #SET AX[X,1,0][Y,2,1][Z,3,2][C,4,3][A,5,4][U,7,5] N45 #CONTOUR MODE[DEV PATH_DEV 0.1 TRACK_DEV 1] N50 #TRAFO ON N55 G01 U0 X0 Y0 Z0 C0 A45 N56 #CAXTRACK ON[ANGLIMIT 1] N57 G261 N58 G01 G91 X50 N60 G90 G02 J-30 N61 G01 G91 X50 N62 G260 N63 #CAXTRACK OFF N80 #TRAFO OFF N90 M30 TF5290 | Twin CAT 3 CNC Version: 1.021 105 Cutting Plus
## Page 106

Tube processing 3.4.1.5.2 AB Kopf, AB Programming %t_tube V. G. KIN[90]. PARAM[0] = 1000000 V. G. KIN[90]. PARAM[1] = 0 V. G. KIN[90]. PARAM[2] = 0 V. G. KIN[90]. PARAM[3] = 0 V. G. KIN[90]. PARAM[4] = 0 V. G. KIN[90]. PARAM[5] = 0 V. G. KIN[90]. PARAM[6] = 0 V. G. KIN[90]. PARAM[7] = 0 V. G. KIN[90]. PARAM[8] = 0 V. G. KIN[90]. PARAM[9] = 0 V. G. KIN[90]. PARAM[10] = 0 V. G. KIN[90]. PARAM[11] = 0 V. G. KIN[90]. PARAM[12] = 0 AB Kopf V. G. KIN[90]. PARAM[13] = 0 (* AB programming *) V. G. KIN[90]. PARAM[14] = 0 V. G. KIN[90]. PARAM[15] = 0 V. G. KIN[90]. PARAM[16] = 0 V. G. KIN[90]. PARAM[17] = 0 N10 #SLOPE [TYPE=TRAPEZ] N20 #KIN ID[90] N30 G01 X0 Y0 Z0 A0 C0 U0 F2000 N40 #SET AX[X,1,0][Y,2,1][Z,3,2][A,4,3][B,5,4][U,7,5] N45 #CONTOUR MODE[DEV PATH_DEV 0.1 TRACK_DEV 1] N50 #TRAFO ON N55 G01 U0 X0 Y0 Z0 A0 B45 N57 G261 N58 G01 G91 X50 N60 G90 G02 J-30 N61 G01 G91 X50 N62 G260 N80 #TRAFO OFF N90 M30 106 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 107

Tube processing 3.4.1.6 Examples of tube machining (5-axis) 3.4.1.6.1 AU kinematics, BA programming (* B is simulation axis *) %L SUB_1 N570 G261 N580 G01 G90 Y50 B15 N600 G90 G02 J-30 N610 G01 G90 Y-50 B-15 N620 G90 G02 J-30 N630 G01 G91 Y50 B0 N640 G260 M29 %t_tube V. G. KIN[90]. PARAM[0] = 1000000 V. G. KIN[90]. PARAM[1] = 0 V. G. KIN[90]. PARAM[2] = 0 V. G. KIN[90]. PARAM[3] = 0 V. G. KIN[90]. PARAM[4] = 0 V. G. KIN[90]. PARAM[5] = 0 V. G. KIN[90]. PARAM[6] = 0 V. G. KIN[90]. PARAM[7] = 0 V. G. KIN[90]. PARAM[8] = 0 V. G. KIN[90]. PARAM[9] = 0 V. G. KIN[90]. PARAM[10] = 0 V. G. KIN[90]. PARAM[11] = 0 V. G. KIN[90]. PARAM[12] = 9 (* Kinematic 9: A WZ, U 10: B WZ, V *) V. G. KIN[90]. PARAM[13] = 0 (* Progr. orientation 0: same as Kin. 1: CA *) V. G. KIN[90]. PARAM[14] = 0 V. G. KIN[90]. PARAM[15] = 0 V. G. KIN[90]. PARAM[16] = 0 V. G. KIN[90]. PARAM[17] = 0 N05 #SLOPE [TYPE=STEP] N10 #SET AX[X,1,0][Y,2,1][Z,3,2][B,4,3][A,5,4][U,6,5] N20 G01 X0 Y0 Z150 A0 B0 U0 F2000 N30 #CONTOUR MODE[DEV PATH_DEV 0.1 TRACK_DEV 1] N40 #CYL ORI LATERAL[AX1=U AX2=Y RADIUS=25] N50 G01 U0 X0 Y0 Z30 A0 B0 N60 LL SUB_1 N120 #CYL OFF M30 TF5290 | Twin CAT 3 CNC Version: 1.021 107 Cutting Plus
## Page 108

Tube processing 3.4.1.6.2 BV kinematics, AB programming (* A is simulation axis *) %L SUB_1 N570 G261 N580 G90 G01 X50 A15 N600 G02 J-30 N610 G01 X-50 A-15 N600 G02 J-30 N610 G01 X50 A0 N620 G260 M29 %t_tube V. G. KIN[90]. PARAM[0] = 1000000 V. G. KIN[90]. PARAM[1] = 0 V. G. KIN[90]. PARAM[2] = 0 V. G. KIN[90]. PARAM[3] = 0 V. G. KIN[90]. PARAM[4] = 0 V. G. KIN[90]. PARAM[5] = 0 V. G. KIN[90]. PARAM[6] = 0 V. G. KIN[90]. PARAM[7] = 0 V. G. KIN[90]. PARAM[8] = 0 V. G. KIN[90]. PARAM[9] = 0 V. G. KIN[90]. PARAM[10] = 0 V. G. KIN[90]. PARAM[11] = 0 V. G. KIN[90]. PARAM[12] = 10 (* Kinematic 9: A-U 10: B-V *) V. G. KIN[90]. PARAM[13] = 0 (* Progr. orientation 0: same as Kin 1: CA *) V. G. KIN[90]. PARAM[14] = 0 V. G. KIN[90]. PARAM[15] = 0 V. G. KIN[90]. PARAM[16] = 0 V. G. KIN[90]. PARAM[17] = 0 N05 #SLOPE [TYPE=STEP] N10 #SET AX[X,1,0][Y,2,1][Z,3,2][A,4,3][B,5,4][V,6,5] N20 G01 X0 Y0 Z150 A0 B0 V0 F2000 N30 #CONTOUR MODE[DEV PATH_DEV 0.1 TRACK_DEV 1] N40 #CYL ORI LATERAL[AX1=X AX2=V RADIUS=25] N50 G01 V0 X0 Y0 Z30 A0 B0 N60 LL SUB_1 N120 #CYL OFF M30 108 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 109

Tube processing 3.4.1.6.3 AU kinematics, CA programming (* C is simulation axis *) %L SUB_1 N570 G261 N575 A15 N580 G01 G90 U50 N590 Y50 N600 U0 N610 Y0 N620 U[-50] N630 Y-50 N640 U0 N650 Y0 N620 G260 M29 %t_tube V. G. KIN[90]. PARAM[0] = 1000000 V. G. KIN[90]. PARAM[1] = 0 V. G. KIN[90]. PARAM[2] = 0 V. G. KIN[90]. PARAM[3] = 0 V. G. KIN[90]. PARAM[4] = 0 V. G. KIN[90]. PARAM[5] = 0 V. G. KIN[90]. PARAM[6] = 0 V. G. KIN[90]. PARAM[7] = 0 V. G. KIN[90]. PARAM[8] = 0 V. G. KIN[90]. PARAM[9] = 0 V. G. KIN[90]. PARAM[10] = 0 V. G. KIN[90]. PARAM[11] = 0 V. G. KIN[90]. PARAM[12] = 9 (* Kinematic 9: A-U 10: B-V *) V. G. KIN[90]. PARAM[13] = 1 (* Progr. orientation 0: same as Kin. 1: CA *) V. G. KIN[90]. PARAM[14] = 0 V. G. KIN[90]. PARAM[15] = 0 V. G. KIN[90]. PARAM[16] = 0 V. G. KIN[90]. PARAM[17] = 0 N05 #SLOPE [TYPE=STEP] N10 #SET AX[X,1,0][Y,2,1][Z,3,2][C,4,3][A,5,4][U,6,5] N20 G01 X0 Y0 Z150 C0 A0 U0 F2000 N30 #CONTOUR MODE[DEV PATH_DEV 0.1 TRACK_DEV 1] N40 #CYL ORI LATERAL[AX1=U AX2=Y RADIUS=25] N50 G01 U0 X0 Y0 Z30 C0 A0 N56 #CAXTRACK ON[AX=C ANGLIMIT 0.1] N60 LL SUB_1 N70 #CAXTRACK OFF N110 #CYL OFF M30 TF5290 | Twin CAT 3 CNC Version: 1.021 109 Cutting Plus
## Page 110

Tube processing 3.4.1.6.4 BV kinematics, CA programming (* C is simulation axis *) %L SUB_1 N570 G261 N575 A15 N580 G01 G90 X50 N590 V50 N600 X0 N610 V0 N620 X-50 N630 V[-50] N640 V0 N650 X0 N620 G260 M29 %t_tube V. G. KIN[90]. PARAM[0] = 1000000 V. G. KIN[90]. PARAM[1] = 0 V. G. KIN[90]. PARAM[2] = 0 V. G. KIN[90]. PARAM[3] = 0 V. G. KIN[90]. PARAM[4] = 0 V. G. KIN[90]. PARAM[5] = 0 V. G. KIN[90]. PARAM[6] = 0 V. G. KIN[90]. PARAM[7] = 0 V. G. KIN[90]. PARAM[8] = 0 V. G. KIN[90]. PARAM[9] = 0 V. G. KIN[90]. PARAM[10] = 0 V. G. KIN[90]. PARAM[11] = 0 V. G. KIN[90]. PARAM[12] = 10 (* Kinematic 9: A-U 10: B-V *) V. G. KIN[90]. PARAM[13] = 1 (* Progr. orientation 0: same as Kin 1: CA *) V. G. KIN[90]. PARAM[14] = 0 V. G. KIN[90]. PARAM[15] = 0 V. G. KIN[90]. PARAM[16] = 0 V. G. KIN[90]. PARAM[17] = 0 N05 #SLOPE [TYPE=STEP] N10 #SET AX[X,1,0][Y,2,1][Z,3,2][C,4,3][A,8,4][V,7,5] N20 G01 X0 Y0 Z150 C0 A0 V0 F2000 N30 #CONTOUR MODE[DEV PATH_DEV 0.1 TRACK_DEV 1] N40 #CYL ORI LATERAL[AX1=X AX2=V RADIUS=25] N50 G01 V0 X0 Y0 Z30 C0 A0 N56 #CAXTRACK ON[AX=C ANGLIMIT 1] N60 LL SUB_1 N70 #CAXTRACK OFF N80 #CYL OFF M30 110 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 111

Tube processing 3.4.2 Polygonal tube, profiled tube Machining with 5-axis head The Kinematic 93 [} 141] is provided for profiled tube machining with 5-axis heads. It is activated implicitly when tube machining is selected. Its configuration is described in the section "Polygonal tube, profiled tube (5/6-axis) [} 141]". 5-axis heads supported The Kinematic 93 [} 141] also supports all 5-axis heads described in the section "Round tube, lateral surface [} 81]". One restriction is that the tube axis must always be parallel to the X axis. This explains why the command #CYL ORI PROFILE [...] has no options to specify the axes. Parameterisation example: Parameters for AB and BV orientation head [} 141] 3.4.2.1 Programming (#CYL ORI PROFILE) The kinematic parameters in ID 93 [} 141] must be set for this machining type. Syntax for selecting and parameterising, active as of the next motion block: Syntax: #CYL ORI PROFILE [ EDGES=.. ROUNDING=.. LENGTH1=.. [ LENGTH2=..] modal [ VEL=..] [ ACC=..] ] EDGES=.. Number of edges (corners) of the profiled tube, positive integer The minimum number of corners on the profile is limited to 3 and the maximum number to 16. ROUNDING=.. Edge rounding radius (corner radius), [mm, inch]. LENGTH1=.. Side length for symmetrical tubes or first side length for rectangular tubes, [mm, inch] LENGTH2=.. Second side length for rectangular tubes, [mm, inch] VEL=.. Path velocity on edge rounding [mm/min] ACC=.. Path acceleration on edge rounding [mm/min²] Syntax for deselection: Syntax: #CYL OFF modal TF5290 | Twin CAT 3 CNC Version: 1.021 111 Cutting Plus
## Page 112

Tube processing #CYL ORI PROFILE [..] (Symmetrical square profile with 100 mm edge length) (and 10 mm edge rounding radius) N10 #CYL ORI PROFILE [EDGES=4 ROUNDING=10 LENGTH1=100] ... (Rectangular tube with edge lengths of 100 mm) (and 80 mm and 15 mm edge rounding radius) N10 #CYL ORI PROFILE [EDGES=4 ROUNDING=15 LENGTH1=100 LENGTH2=80] ... (Reduced path dynamics on the profile rounding) N10 #CYL ORI PROFILE [EDGES=4 ... LENGTH2=50 ACC=1000000] 112 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 113

Tube processing 3.4.2.2 Program example with AB tool head configuration This configuration contains 6 real axes. N010 ; configuration of AB orientation head N020 V. G. KIN[93]. PARAM[0] = 1000000 ; Z offset to the tool fixing point N030 V. G. KIN[93]. PARAM[1] = 10000 ; X offset to the tool fixing point N040 V. G. KIN[93]. PARAM[2] = 20000 ; Y offset to the tool fixing point N050 V. G. KIN[93]. PARAM[3] = 30000 ; X offset rotation point A axis - rotation point B axis N060 V. G. KIN[93]. PARAM[4] = 31415 ; Y offset rotation point A axis - rotation point B axis N070 V. G. KIN[93]. PARAM[5] = 27181 ; Z offset rotation point A axis - rotation point B axis N080 V. G. KIN[93]. PARAM[6] = -1234 ; X offset zero point - rotation point A axis N090 V. G. KIN[93]. PARAM[7] = 17 ; Y offset zero point - rotation point A axis N100 V. G. KIN[93]. PARAM[8] = 100 ; Z offset zero point - rotation point A axis N110 V. G. KIN[93]. PARAM[11] = 1000 ; angle offset U/V axis N120 V. G. KIN[93]. PARAM[12] = 0 ; 0 = AB head N130 V. G. KIN[93]. PARAM[13] = 0 ; 0 = PCS programming same as head N140 V. G. KIN[93]. PARAM[14] = 0 ; rotation direction AM positive N150 V. G. KIN[93]. PARAM[15] = 0 ; rotation direction BM positive N160 V. G. KIN[93]. PARAM[16] = 200 ; angle offset AM N170 V. G. KIN[93]. PARAM[17] = 100 ; angle offset BM N200 ; configuration of profile tube N230 V. G. KIN[93]. PARAM[23] = 513 ; Z offset rotary axis U to machine zero point N240 V. G. KIN[93]. PARAM[24] = 1000 ; X offset rotary axis U to machine zero point N250 V. G. KIN[93]. PARAM[25] = -5000 ; Y offset rotary axis U to machine zero point N260 N270 ; sort axes N280 #SET AX [X, 1, 0][Y, 2, 1][Z, 3, 2][A, 4, 3][B, 5, 4][U, 6, 5] N290 N300 ; move to zero N310 G00 G90 X0 Y0 Z0 A0 B0 U0 N320 N330 ; select kinematic 93 N340 #KIN ID[93] N350 N360 ; start processing N370 G01 X500 Y0 Z50 A0 B0 F2000 N380 #CYL ORI PROFILE [EDGES = 4 ROUNDING = 10 LENGTH1 = 50] N390 G01 X0 U0 Z30 A0 B0 F2000 N400 G01 G90 U50 F2000 N410 B15 N420 X40 N430 B0 A-15 N440 G01 U-40 N450 B-15 A0 N460 G01 X-40 N470 A15 B0 N480 G01 U40 N490 B15 A0 N500 G01 X0 N510 G01 G90 U20 F2000 N520 #CYL OFF N530 N540 ; end program N550 M30 TF5290 | Twin CAT 3 CNC Version: 1.021 113 Cutting Plus
## Page 114

Tube processing 3.4.2.3 Program example with BV configuration: This configuration contains 5 real axes. The A axis included is a virtual simulation axis. %L SUB_GEOM N570 G261 N575 B=15 F200 N580 G01 G90 X50 F5000 N590 G91 U100 N600 G90 X0 N610 G91 U-100 N620 G90 X-100 N630 G91 U-100 N640 G91 U100 N650 G90 X0 N660 G90 B=0 N620 G260 M29 %t_edge_prof_5ax_BV.nc N9 ; N10 V. G. KIN[93]. PARAM[0] = 1000000 N11 V. G. KIN[93]. PARAM[1] = 0 N12 V. G. KIN[93]. PARAM[2] = 0 N13 V. G. KIN[93]. PARAM[3] = 0 N14 V. G. KIN[93]. PARAM[4] = 0 N15 V. G. KIN[93]. PARAM[5] = 0 N16 V. G. KIN[93]. PARAM[6] = 0 N17 V. G. KIN[93]. PARAM[7] = -942000 N18 V. G. KIN[93]. PARAM[8] = 0 N21 V. G. KIN[93]. PARAM[11] = 0 N22 V. G. KIN[93]. PARAM[12] = 10 (* 10: B WZ, V *) N23 V. G. KIN[93]. PARAM[13] = 0 N24 V. G. KIN[93]. PARAM[14] = 0 N25 V. G. KIN[93]. PARAM[15] = 0 N26 V. G. KIN[93]. PARAM[16] = 0 N27 V. G. KIN[93]. PARAM[17] = 0 N33 V. G. KIN[93]. PARAM[23] = 0 N34 V. G. KIN[93]. PARAM[24] = 0 N35 V. G. KIN[93]. PARAM[25] = 0 N10 #SET SLOPE PROFIL[1] N20 G00 X0 Y0 Z250 N30 #CONTOUR MODE[DEV PATH_DEV 0.1 TRACK_DEV 1] N40 #SET AX[X,1,0][Y,2,1][Z,3,2][A,4,3][B,5,4][U,6,5] N50 G00 X0 Y94.2 Z250 A0 B0 U0 N60 #CYL ORI PROFILE[EDGES=4 ROUNDING=5 LENGTH1=50 LENGTH2=50] (* Profile circumference approx. 231.41592 mm *) N70 LL SUB_GEOM N90 #CYL OFF M30 114 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 115

Tube processing 3.5 Block search and profiled tube machining Resuming path approach Please note the following when path motion is resumed on profiled tubes with the block search function: • The approach motion in an area with an active #CYL [EDGES..] or #CYL ORI PROFILE [EDGES=…] takes place on the ACS plane. To prevent any collision between tool and workpiece, position the tool at a sufficient safety height (U axis rotates without compensation motion of Z). • The tool must be perpendicular to the profile surface and within the capture range of the profile (see figure below). • The approach motion is executed in two steps: 1. Approach motions without Z axis (e.g. U, Y, X) 2. Approach motion of the Z axis Tool perpendicular to Tool outside catching area profile surface and contour return motion inside catching area not possible Z Z Y Y Fig. 57: Starting position for motion resumption TF5290 | Twin CAT 3 CNC Version: 1.021 115 Cutting Plus
## Page 116

Tube processing Fig. 58: Axis position after motion resumption 3.6 Parameter Parameterisation The workpiece parameters are defined in the NC program. The following parameters are offset values of the kinematic structure, parameters for the rotary axis and optionally applicable M/H codes. 3.6.1 Overview 3.6.1.1 Channel parameters The following kinematic parameters must be assigned function-specific for machining variants. ID Parameter Description P-CHAN-00094 kinematik[i].param[j] Kinematic offsets of the corresponding kinematics, CNC Build as of V3.00 P-CHAN-00262 trafo[i].id Kinematics ID P-CHAN-00263 trafo[i].param[j] Kinematic offsets of the corresponding kinematics, CNC Build as of V3.00 The following parameters are optional for profiled tube machining. The M/H numbers are defined for output at the rounding transition of the profiled tube. ID Parameter Description P-CHAN-00249 tube_profile.techno_nr_rnd_o M/H number, entering edge rounding n P-CHAN-00250 tube_profile.techno_nr_rnd_o M/H number, leaving edge rounding ff P-CHAN-00251 tube_profile.techno_type 0 = M, 1 = H 3.6.1.2 Axis parameters The U rotary axis must be set by the following parameters. 116 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 117

Tube processing ID Parameter Value Description P-AXIS-00015 axis mode 0x0000 0204 Axis defined as U rotary axis for lateral surface, projection and profiled tube machining. P-AXIS-00126 moduloo 3600000 Definition of upper modulo limit P-AXIS-00127 modulou 0 Definition of lower modulo limit TF5290 | Twin CAT 3 CNC Version: 1.021 117 Cutting Plus
## Page 118

Tube processing 3.6.2 Description 3.6.2.1 Round tube, lateral surface (kinematic ID 15) Parameters are defined under the ID 15 of the kinematic offsets (P-CHAN-00263 and P-CHAN-00094). If required, PCS modulo calculation can be enabled by the parameter HD10. HD offset param[i] Description Unit HD1 0 Z offset tool fixing point - Tool carrier reference point 1.0 E-4 mm HD2 1 Angle offset of rotary axis 1.0 E-4° HD3 2 X offset tool fixing point - Tool carrier reference point 1.0 E-4 mm HD4 3 - HD5 4 Z offset of rotary axis U to machine zero point 1.0 E-4 mm HD6 5 X offset of rotary axis U to machine zero point 1.0 E-4 mm HD10 9 PCS modulo calculation [ - ] 0: inactive 1: active The general description is contained in the channel parameter list under P-CHAN-00263 and P- CHAN-00094. 118 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 119

Tube processing Curved Surface Area HD3 TRP HD1 TL U Z X HD5 HD2 MZP HD6 Fig. 59: Kinematic offsets for lateral surface machining TF5290 | Twin CAT 3 CNC Version: 1.021 119 Cutting Plus
## Page 120

Tube processing 3.6.2.2 Round tube, projection (kinematic ID 78) Parameters are defined under the ID 78 of the kinematic offsets (P-CHAN-00263 and P-CHAN-00094). HD offset param[i] Description Unit HD1 0 Z offset tool fixing point - Tool carrier reference point 1.0 E-4 mm HD2 1 X offset tool fixing point - Tool carrier reference point 1.0 E-4 mm HD3 2 Y offset tool fixing point - Tool carrier reference point 1.0 E-4 mm HD4 3 - HD5 4 Z offset of rotary axis U to machine zero point 1.0 E-4 mm HD6 5 X offset of rotary axis U to machine zero point 1.0 E-4 mm HD7 6 Y offset of rotary axis U to machine zero point 1.0 E-4 mm With regard to modulo calculation, the U axis is handled depending on the MDS setting in the axis. The general description is contained in the channel parameter list under P-CHAN-00263 and P- CHAN-00094. 120 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 121

Tube processing Projection Tube Processing HD2 TRP HD1 TL Z X HD5 MZP HD6 HD3 TRP Z Y HD5 MZP HD7 Fig. 60: Tube projection transformation kinematic offsets TF5290 | Twin CAT 3 CNC Version: 1.021 121 Cutting Plus
## Page 122

Tube processing 3.6.2.3 Polygonal tube, profiled tube (kinematic ID 79) Parameters are defined under the ID 79 of the kinematic offsets (P-CHAN-00263 and P-CHAN-00094). HD offset param[i] Description Unit HD1 0 Z offset tool fixing point - Tool carrier reference point 1.0 E-4 mm HD2 1 X offset tool fixing point - Tool carrier reference point 1.0 E-4 mm HD3 2 Y offset tool fixing point - Tool carrier reference point 1.0 E-4 mm HD4 3 Z offset of rotary axis U to machine zero point 1.0 E-4 mm HD5 4 X offset of rotary axis U to machine zero point 1.0 E-4 mm HD6 5 Y offset of rotary axis U to machine zero point 1.0 E-4 mm HD7 6 - HD8 7 Angle offset of workpiece clamp position 1.0 E-4° A modulo compensation is always executed for the U axis. The general description is contained in the channel parameter list under P-CHAN-00263 and P- CHAN-00094. 122 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 123

Tube processing Tube Profile Processing HD2 TRP HD1 TL Z X HD5 MZP HD6 HD3 TRP Z Y MZP HD7 Fig. 61: Profiled tube transformation kinematic offsets TF5290 | Twin CAT 3 CNC Version: 1.021 123 Cutting Plus
## Page 124

Tube processing Tube Profile Processing Workpiece fixture offset HD8 Z 3 1 Y U = 0° 2 Lateral surface coordinates 0 U = 19mm PCS - + r = 5mm Z 1 Y I1 = 50mm 2 3 U = -60° Fig. 62: Offset for workpiece clamp position When the rotary workpiece axis is in zero position, the clamped workpiece is normally not in the specified basic orientation where the workpiece axis is perpendicular to the profile section. The kinematic parameter HD8 considers the clamp position of the profiled tube. In this case, the workpiece must be oriented above the rotary axis so that a plane surface of the profile is perpendicular to the tool. In the current example the U axis is moved to -60°; the required offset setting is then +60°. In the above figure, the lateral surface system is then obtained after the transformation is selected according to following parameters #CYL[EDGES=3 ROUNDING=5 LENGTH1=50]. The zero point of the lateral surface system is located in the middle of lateral plane 1; the PCS start position of the TCP is U = +19mm. PCS 124 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 125

Tube processing Tube Profile Processing Z 3 1 Y U = 0° 2 Lateral surface coordinates I1 = 50mm r = 5mm Z 2 - Y U = 180° U = PCS 0 145mm + 3 1 Fig. 63: Selection on the plane lateral surface In the following case the transformation should be activated on the lateral surface 2. The clamping position and kinematic parameter HD8 correspond to the above example. The U axis is positioned at 180° before the transformation is selected so that the tool is perpendicular to the required plane surface. In the above figure, the lateral surface system is then obtained after transformation is selected according to the following parameters #CYL[EDGES=3 ROUNDING=5 LENGTH1=50]. The zero point of the lateral surface system is located in the middle of lateral plane 1; in the lateral surface system, it is located at the start position U =145mm. PCS TF5290 | Twin CAT 3 CNC Version: 1.021 125 Cutting Plus
## Page 126

Tube processing Tube Profile Processing Lateral surface coordinates I1 = 50mm r = 5mm Z 2 23 12 - Y U = 180° U = PCS 0 136.94mm + 3 1 31 Lateral surface coordinates - 12 Z 0 2 U = 23 Y + 214.38° U = 1 PCS 148.94mm 3 31 Fig. 64: Selection on profile rounding In this case the transformation should be activated on the profile rounding 12. The clamping position and kinematic parameter HD8 correspond to the above example. The lateral surface system is obtained after transformation is selected as shown in above figure. The system is located at the start position U =136.94mm. The approach to the profile rounding at position U =148.94mm is executed by positioning PCS PCS with the command #PTP ON. Polygonal tube, profiled tube (kinematic ID 79) N30 ... 126 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 127

Tube processing N40 G0 G90 X0 Y=20 U=0 Z50 N50 #CYL [EDGES=3, ROUNDING=5, LENGTH1=50] N60 #PTP ON N70 G0 G90 U148.94 Z40 N80 #PTP OFF N90 Z0 N100 G01 U150 X5 ... 3.6.2.3.1 M / H Steuercodes The M/H functions described below can be used for process control on the profile rounding. Variable name Type Permitted range Dimension tube_profile.techno_nr_rnd_on SGN16 -1 ... [M/H_FKT_ANZ-1] --- Default: -1 = not used tube_profile.techno_nr_rnd_off SGN16 -1 ... [M/H_FKT_ANZ-1] --- Default: -1 = not used tube_profile.techno_type SGN16 0 : M numbers ---- 1 : H numbers Value M/H_FKT_ANZ Meaning application-specific Maximum number of M/H functions NOTICE To activate the function, the M/H numbers of the two parameters must be >= 0. M/H numbers may not already be assigned by an application in P-CHAN-00041 (m_synch[...]) or P- CHAN-00027 (h_synch[...]). Excerpt from the channel parameter list: # Definition of M/H functions for profiled tube rounding technology # =============================================================== : tube_profile.techno_type 1 Use of H numbers tube_profile.techno_nr_rnd_on 300 H number, engage in rounding tube_profile.techno_nr_rnd_off 400 H number, retract from rounding # 3.6.2.4 Round tube, lateral surface (5/6-axis) (kinematic ID 90) 3.6.2.4.1 Parameters for AB orientation head Parameters are defined under the ID 90 of the kinematic offsets (P-CHAN-00263 and P-CHAN-00094). HD offset param[i] Description Unit HD1 0 Z axis offset to the tool fixing point 1.0 E-4 mm HD2 1 X axis offset to the tool fixing point 1.0 E-4 mm HD3 2 Y axis offset to the tool fixing point 1.0 E-4 mm HD4 3 X axis offset rotation point A axis to rotation point B axis 1.0 E-4 mm HD5 4 Y axis offset rotation point A axis to rotation point B axis 1.0 E-4 mm HD6 5 Z axis offset rotation point A axis to rotation point B axis 1.0 E-4 mm HD7 6 X axis offset zero point to rotation point A axis 1.0 E-4 mm HD8 7 Y axis offset zero point to rotation point A axis 1.0 E-4 mm HD9 8 Z axis offset zero point to rotation point A axis 1.0 E-4 mm HD10 9 n.a. TF5290 | Twin CAT 3 CNC Version: 1.021 127 Cutting Plus
## Page 128

Tube processing HD11 10 n.a. HD12 11 Angle offset U/V axis 1.0 E-4° HD13 12 Orientation head, sequence of rotary axes [ - ] 0: AB 1: BA HD14 13 PCS angle programming [ - ] 0: same as orientation head 1: CA HD15 14 Rotation direction AM [ - ] 0: math positive 1: math negative HD16 15 Rotation direction BM [ - ] 0: math positive 1: math negative HD17 16 Angle offset AM 1.0 E-4° HD18 17 Angle offset BM 1.0 E-4° The general description is contained in the channel parameter list under P-CHAN-00263 and P- CHAN-00094. HD8 HD4 HD7 HD9 A + B + + - - B - HD6 HD1 TL HD2 HD5 HD3 Z Z w w X Y w w Fig. 65: Parameters of AB tool head 128 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 129

Tube processing 3.6.2.4.2 Parameters for BA orientation head Parameters are defined under the ID 90 of the kinematic offsets (P-CHAN-00263 and P-CHAN-00094). HD offset param[i] Description Unit HD1 0 Z axis offset to the tool fixing point 1.0 E-4 mm HD2 1 X axis offset to the tool fixing point 1.0 E-4 mm HD3 2 Y axis offset to the tool fixing point 1.0 E-4 mm HD4 3 X axis offset rotation point B axis to rotation point A axis 1.0 E-4 mm HD5 4 Y axis offset rotation point B axis to rotation point A axis 1.0 E-4 mm HD6 5 Z axis offset rotation point B axis to rotation point A axis 1.0 E-4 mm HD7 6 X axis offset zero point to rotation point B axis 1.0 E-4 mm HD8 7 Y axis offset zero point to rotation point B axis 1.0 E-4 mm HD9 8 Z axis offset zero point to rotation point B axis 1.0 E-4 mm HD10 9 n.a. HD11 10 n.a. HD12 11 Angle offset U/V axis 1.0 E-4° HD13 12 Orientation head, sequence of rotary axes [ - ] 0: AB 1: BA HD14 13 PCS angle programming [ - ] 0: same as orientation head 1: CA HD15 14 Rotation direction AM [ - ] 0: math positive 1: math negative HD16 15 Rotation direction BM [ - ] 0: math positive 1: math negative HD17 16 Angle offset AM 1.0 E-4° HD18 17 Angle offset BM 1.0 E-4° The general description is contained in the channel parameter list under P-CHAN-00263 and P- CHAN-00094. TF5290 | Twin CAT 3 CNC Version: 1.021 129 Cutting Plus
## Page 130

Tube processing B HD2 130 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus + - HD7 HD8 HD9 A HD1 HD6 TL HD4 + - A + - HD5 HD3 Z Z w w X Y w w Fig. 66: Parameters for BA orientation head
## Page 131

Tube processing 3.6.2.4.3 Parameters for CA orientation head Parameters are defined under the ID 90 of the kinematic offsets (P-CHAN-00263 and P-CHAN-00094). HD offset param[i] Description Unit HD1 0 Z axis offset to the tool fixing point 1.0 E-4 mm HD2 1 X axis offset to the tool fixing point 1.0 E-4 mm HD3 2 Y axis offset to the tool fixing point 1.0 E-4 mm HD4 3 X axis offset rotation point C axis to rotation point A axis 1.0 E-4 mm HD5 4 Y axis offset rotation point C axis to rotation point A axis 1.0 E-4 mm HD6 5 Z axis offset rotation point C axis to rotation point A axis 1.0 E-4 mm HD7 6 X offset reference point to rotation point C axis 1.0 E-4 mm HD8 7 Y offset reference point to rotation point C axis 1.0 E-4 mm HD9 8 Z offset reference point to rotation point C axis 1.0 E-4 mm HD10 9 n.a. HD11 10 n.a. HD12 11 Angle offset U/V axis 1.0 E-4° HD13 12 Orientation head, sequence of rotary axes [ - ] 2: CA 4: CB HD14 13 - HD15 14 Rotation direction CM [ - ] 0: math positive 1: math negative HD16 15 Rotation direction AM [ - ] 0: math positive 1: math negative HD17 16 Angle offset CM 1.0 E-4° HD18 17 Angle offset AM 1.0 E-4° The general description is contained in the channel parameter list under P-CHAN-00263 and P- CHAN-00094. TF5290 | Twin CAT 3 CNC Version: 1.021 131 Cutting Plus
## Page 132

Tube processing C-axis HD4 HD5 M M HD9 K K HD7 HD6 A-axis HD1 Z Z TL TCP Z prog HD3 HD8 HD2 X Y X Y prog prog HD8 M Y HD7 X K M: Machine reference K: Orientation-head reference (typical: M=K) Fig. 67: Parameters for CA orientation head 132 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 133

Tube processing 3.6.2.4.4 Parameters for CB orientation head Parameters are defined under the ID 90 of the kinematic offsets (P-CHAN-00263 and P-CHAN-00094). HD offset param[i] Description Unit HD1 0 Z axis offset to the tool fixing point 1.0 E-4 mm HD2 1 X axis offset to the tool fixing point 1.0 E-4 mm HD3 2 Y axis offset to the tool fixing point 1.0 E-4 mm HD4 3 X axis offset rotation point C axis to rotation point B axis 1.0 E-4 mm HD5 4 Y axis offset rotation point C axis to rotation point B axis 1.0 E-4 mm HD6 5 Z axis offset rotation point C axis to rotation point B axis 1.0 E-4 mm HD7 6 X axis offset zero point to rotation point B axis 1.0 E-4 mm HD8 7 Y axis offset zero point to rotation point B axis 1.0 E-4 mm HD9 8 Z axis offset zero point to rotation point B axis 1.0 E-4 mm HD10 9 n.a. HD11 10 n.a. HD12 11 Angle offset U/V axis 1.0 E-4° HD13 12 Orientation head, sequence of rotary axes [ - ] 2: CA 4: CB HD14 13 - HD15 14 Rotation direction CM [ - ] 0: math positive 1: math negative HD16 15 Rotation direction BM [ - ] 0: math positive 1: math negative HD17 16 Angle offset CM 1.0 E-4° HD18 17 Angle offset BM 1.0 E-4° The general description is contained in the channel parameter list under P-CHAN-00263 and P- CHAN-00094. TF5290 | Twin CAT 3 CNC Version: 1.021 133 Cutting Plus
## Page 134

Tube processing C-axis HD5 HD4 M M HD9 K K HD8 HD6 B-axis HD1 Z Z TL Z TCP prog HD2 HD7 HD3 Y X Y X prog prog K HD8 Y M: Machine reference K: Orientation-head reference (typical: M=K) M X HD7 Fig. 68: Parameters for CB orientation head 134 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 135

Tube processing 3.6.2.4.5 Parameters for CA cardanic orientation head Parameters are defined under the ID 90 of the kinematic offsets (P-CHAN-00263 and P-CHAN-00094). HD offset param[i] Description Unit HD1 0 n.a. HD2 1 n.a. HD3 2 Head angle 1.0 E-4° HD4 3 n.a. HD5 4 n.a. HD6 5 Orientation C axis head; required if head has a 180° offset in [ - ] zero position. 0: Default 1: 180 degree offset HD7 6 X offset reference point to rotation point C axis 1.0 E-4 mm HD8 7 Y offset reference point to rotation point C axis 1.0 E-4 mm HD9 8 Z offset reference point to rotation point C axis 1.0 E-4 mm HD10 9 n.a. HD11 10 n.a. HD12 11 Angle offset U/V axis 1.0 E-4° HD13 12 Orientation head, sequence of rotary axes: [ - ] 2: CA 8: CA cardanic HD14 13 n.a. HD15 14 X offset to tool holding device 1.0 E-4 mm HD16 15 Y offset to tool holding device 1.0 E-4 mm HD17 16 Z offset to tool holding device 1.0 E-4 mm HD18 17 X offset A axis to C axis 1.0 E-4 mm HD19 18 Y offset A axis to C axis 1.0 E-4 mm HD20 19 Z offset A axis to C axis 1.0 E-4 mm The general description is contained in the channel parameter list under P-CHAN-00263 and P- CHAN-00094. TF5290 | Twin CAT 3 CNC Version: 1.021 135 Cutting Plus
## Page 136

Tube processing Fig. 69: Cardanic head in zero position, HD6=0 136 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 137

Tube processing 3.6.2.4.6 Parameters for AU kinematics HD5 HD4 HD6 A + - HD1 TL HD2 HD3 Z Z w w X Y w w Fig. 70: Parameters of AU tool head TF5290 | Twin CAT 3 CNC Version: 1.021 137 Cutting Plus
## Page 138

Tube processing Parameters are defined under the ID 90 of the kinematic offsets (P-CHAN-00263 and P-CHAN-00094). HD offset param[i] Description Unit HD1 0 Z axis offset to the tool fixing point 1.0 E-4 mm HD2 1 X axis offset to the tool fixing point 1.0 E-4 mm HD3 2 Y axis offset to the tool fixing point 1.0 E-4 mm HD4 3 X offset rotation point A axis to reference point tool slide 1.0 E-4 mm HD5 4 Y offset rotation point A axis to reference point tool slide 1.0 E-4 mm HD6 5 Z offset rotation point A axis to reference point tool slide 1.0 E-4 mm HD7 6 X offset to machine origin 1.0 E-4 mm HD8 7 Y offset to machine origin 1.0 E-4 mm HD9 8 Z offset to machine origin 1.0 E-4 mm HD10 9 n.a. HD11 10 n.a. HD12 11 Angle offset U/V axis 1.0 E-4° HD13 12 Machine structure [ - ] 9 : A U 10: B V HD14 13 PCS angle programming [ - ] 0: same as kinematic 1: CA HD15 14 Rotation direction AM [ - ] 0: math positive 1: math negative HD16 15 Rotation direction BM [ - ] 0: math positive 1: math negative HD17 16 Angle offset AM 1.0 E-4° HD18 17 Angle offset BM 1.0 E-4° The general description is contained in the channel parameter list under P-CHAN-00263 and P- CHAN-00094. 138 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 139

Tube processing 3.6.2.4.7 Parameters for BV kinematics HD4 HD5 B HD6 HD1 HD2 TF5290 | Twin CAT 3 CNC Version: 1.021 139 Cutting Plus + - TL HD3 Z Z w w X Y w w Fig. 71: Parameters of BV tool head
## Page 140

Tube processing Parameters are defined under the ID 90 of the kinematic offsets (P-CHAN-00263 and P-CHAN-00094). HD offset param[i] Description Unit HD1 0 Z axis offset to the tool fixing point 1.0 E-4 mm HD2 1 X axis offset to the tool fixing point 1.0 E-4 mm HD3 2 Y axis offset to the tool fixing point 1.0 E-4 mm HD4 3 X offset rotation point B axis to reference point tool slide 1.0 E-4 mm HD5 4 Y offset rotation point B axis to reference point tool slide 1.0 E-4 mm HD6 5 Z offset rotation point B-axis to reference point tool slide 1.0 E-4 mm HD7 6 X offset to machine origin 1.0 E-4 mm HD8 7 Y offset to machine origin 1.0 E-4 mm HD9 8 Z offset to machine origin 1.0 E-4 mm HD10 9 n.a. HD11 10 n.a. HD12 11 Angle offset U/V axis 1.0 E-4° HD13 12 Machine structure [ - ] 9 : A U 10: B V HD14 13 PCS angle programming [ - ] 0: same as kinematic 1: CA HD15 14 Rotation direction AM [ - ] 0: math positive 1: math negative HD16 15 Rotation direction BM [ - ] 0: math positive 1: math negative HD17 16 Angle offset AM 1.0 E-4° HD18 17 Angle offset BM 1.0 E-4° The general description is contained in the channel parameter list under P-CHAN-00263 and P- CHAN-00094. 140 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 141

Tube processing 3.6.2.5 Polygonal tube, profiled tube (5/6-axis) (kinematic ID 93) Configuration Kinematic 93 is configured in analogy to kinematic 90 in section "Round tube, lateral surface (5/6-axis) [} 127]". In addition the user can specify kinematic parameters as of index 23. The parameters correspond to kinematic 79 described in section "Polygonal tube, profiled tube [} 122]” (i.e. Index 23 in kinematic 93 corresponds to Index 3 in kinematic 79 etc.). As an example the configuration her is shown of an AB orientation head. Parameterisation is analogous for all other orientation heads. Note: All offsets starting from Index 20 act as static offsets, i.e. they are not influenced by rotations within the head. 3.6.2.5.1 Parameters for AB and BV orientation head Parameters are defined under the ID 93 of the kinematic offsets (P-CHAN-00263 and P-CHAN-00094). The parameters in the AB and BV configurations only differ in the assignment of HD13. HD offset param[i] Description Unit HD1 0 Z axis offset to the tool fixing point 1.0 E-4 mm HD2 1 X axis offset to the tool fixing point 1.0 E-4 mm HD3 2 Y axis offset to the tool fixing point 1.0 E-4 mm HD4 3 X offset rotation point A axis to. rotation point B axis 1.0 E-4 mm HD5 4 Y axis offset rotation point A axis to rotation point B axis 1.0 E-4 mm HD6 5 Z axis offset rotation point A axis to rotation point B axis 1.0 E-4 mm HD7 6 X axis offset zero point to rotation point A axis 1.0 E-4 mm HD8 7 Y axis offset zero point to rotation point A axis 1.0 E-4 mm HD9 8 Z axis offset zero point to rotation point A axis 1.0 E-4 mm HD10 9 n.a. HD11 10 n.a. HD12 11 Angle offset U/V axis 1.0 E-4° HD13 12 Orientation head, sequence of rotary axes [ - ] 0 : AB 10: BV HD14 13 PCS angle programming [ - ] 0: same as orientation head 1: CA HD15 14 Rotation direction AM, [ - ] , 0: math positive 1: math negative HD16 15 Rotation direction BM [ - ] 0: math positive 1: math negative HD17 16 Angle offset AM 1.0 E-4° HD18 17 Angle offset BM 1.0 E-4° HD19 18 n.a. HD20 19 n.a. HD21 20 n.a. HD22 21 n.a. HD23 22 n.a. HD24 23 Z offset of rotary axis U to machine zero point (MNP) 1.0 E-4 mm HD25 24 X offset of rotary axis U to machine zero point 1.0 E-4 mm TF5290 | Twin CAT 3 CNC Version: 1.021 141 Cutting Plus
## Page 142

Tube processing HD26 25 Y offset of rotary axis U to machine zero point 1.0 E-4 mm HD27 26 - HD28 27 Angle offset of workpiece clamp position 1.0 E-4° The general description is contained in the channel parameter list under P-CHAN-00263 and P- CHAN-00094. 142 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 143

Support and Service 4 Support and Service Beckhoff and their partners around the world offer comprehensive support and service, making available fast and competent assistance with all questions related to Beckhoff products and system solutions. Download finder Our download finder contains all the files that we offer you for downloading. You will find application reports, technical documentation, technical drawings, configuration files and much more. The downloads are available in various formats. Beckhoff's branch offices and representatives Please contact your Beckhoff branch office or representative for local support and service on Beckhoff products! The addresses of Beckhoff's branch offices and representatives round the world can be found on our internet page: www.beckhoff.com You will also find further documentation for Beckhoff components there. Beckhoff Support Support offers you comprehensive technical assistance, helping you not only with the application of individual Beckhoff products, but also with other, wide-ranging services: • support • design, programming and commissioning of complex automation systems • and extensive training program for Beckhoff system components Hotline: +49 5246 963-157 e-mail: support@beckhoff.com Beckhoff Service The Beckhoff Service Center supports you in all matters of after-sales service: • on-site service • repair service • spare parts service • hotline service Hotline: +49 5246 963-460 e-mail: service@beckhoff.com Beckhoff Headquarters Beckhoff Automation Gmb H & Co. KG Huelshorstweg 20 33415 Verl Germany Phone: +49 5246 963-0 e-mail: info@beckhoff.com web: www.beckhoff.com TF5290 | Twin CAT 3 CNC Version: 1.021 143 Cutting Plus
## Page 144

Index Index A Axis Lift function active 35 Lift movement actively suppressed 35 L Lift function active Axis 35 P P-CHAN-00244 32 P-CHAN-00345 33 P-STUP-00060 29 P-STUP-00070 30 144 Version: 1.021 TF5290 | Twin CAT 3 CNC Cutting Plus
## Page 146

More Information: www.beckhoff.com/TF5290 Beckhoff Automation Gmb H & Co. KG Hülshorstweg 20 33415 Verl Germany Phone: +49 5246 9630 info@beckhoff.com www.beckhoff.com
