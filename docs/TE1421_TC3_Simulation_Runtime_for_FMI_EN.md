---
title: "TE1421_TC3_Simulation_Runtime_for_FMI_EN"
product: "TE1421"
category: "Engineering_Tools"
tags: ["FMI", "RUNTIME", "SIMULATION"]
language: "EN"
document_type: "Manual"
version: "1.0.1"
source_pdf: "https://download.beckhoff.com/download/Document/automation/twincat3/TE1421_TC3_Simulation_Runtime_for_FMI_EN.pdf"
release_date: "2025-06-27"
---
Manual | EN TE1421 Twin CAT 3 | Simulation Runtime for FMI 2025-06-27 | Version: 1.0.1

## Page 3

Table of contents Table of contents 1 Foreword.................................................................................................................................................... 5 1.1 Notes on the documentation............................................................................................................. 5 1.2 For your safety.................................................................................................................................. 5 1.3 Notes on information security............................................................................................................ 7 2 Overview.................................................................................................................................................... 8 3 Installation................................................................................................................................................. 9 4 Workflow for carrying out a simulation................................................................................................. 10 4.1 Creating an FMU............................................................................................................................. 10 4.1.1 Configuring the System Manager..................................................................................... 10 4.1.2 Configuring runtime.......................................................................................................... 14 4.2 Run simulation................................................................................................................................ 16 4.2.1 Importing FMU................................................................................................................. 16 4.2.2 Starting runtime and simulation........................................................................................ 16 4.2.3 Warnings and errors......................................................................................................... 17 5 Scan inputs and outputs of the FMU..................................................................................................... 18 6 Support and Service............................................................................................................................... 19 TE1421 Version: 1.0.1 3

## Page 4

Table of contents 4 Version: 1.0.1 TE1421

## Page 5

Foreword 1 Foreword 1.1 Notes on the documentation This description is intended exclusively for trained specialists in control and automation technology who are familiar with the applicable national standards. The documentation and the following notes and explanations must be complied with when installing and commissioning the components. The trained specialists must always use the current valid documentation. The trained specialists must ensure that the application and use of the products described is in line with all safety requirements, including all relevant laws, regulations, guidelines, and standards. Disclaimer The documentation has been compiled with care. The products described are, however, constantly under development. We reserve the right to revise and change the documentation at any time and without notice. Claims to modify products that have already been supplied may not be made on the basis of the data, diagrams, and descriptions in this documentation. Trademarks Beckhoff®, ATRO® , Ether CAT®, Ether CAT G®, Ether CAT G10®, Ether CAT P®, MX-System®, Safety over Ether CAT®, TC/BSD®, Twin CAT®, Twin CAT/BSD®, Twin SAFE®, XFC®, XPlanar®, and XTS® are registered and licensed trademarks of Beckhoff Automation Gmb H. If third parties make use of the designations or trademarks contained in this publication for their own purposes, this could infringe upon the rights of the owners of the said designations. Ether CAT® is a registered trademark and patented technology, licensed by Beckhoff Automation Gmb H, Germany. Copyright © Beckhoff Automation Gmb H & Co. KG, Germany. The distribution and reproduction of this document, as well as the use and communication of its contents without express authorization, are prohibited. Offenders will be held liable for the payment of damages. All rights reserved in the event that a patent, utility model, or design are registered. Third-party trademarks Trademarks of third parties may be used in this documentation. You can find the trademark notices here: https://www.beckhoff.com/trademarks. 1.2 For your safety Safety regulations Read the following explanations for your safety. Always observe and follow product-specific safety instructions, which you may find at the appropriate places in this document. Exclusion of liability All the components are supplied in particular hardware and software configurations which are appropriate for the application. Modifications to hardware or software configurations other than those described in the documentation are not permitted, and nullify the liability of Beckhoff Automation Gmb H & Co. KG. TE1421 Version: 1.0.1 5

## Page 6

Foreword Personnel qualification This description is only intended for trained specialists in control, automation, and drive technology who are familiar with the applicable national standards. Signal words The signal words used in the documentation are classified below. In order to prevent injury and damage to persons and property, read and follow the safety and warning notices. Personal injury warnings DANGER Hazard with high risk of death or serious injury. WARNING Hazard with medium risk of death or serious injury. CAUTION There is a low-risk hazard that could result in medium or minor injury. Warning of damage to property or environment NOTICE The environment, equipment, or data may be damaged. Information on handling the product This information includes, for example: recommendations for action, assistance or further information on the product. 6 Version: 1.0.1 TE1421

## Page 7

Foreword 1.3 Notes on information security The products of Beckhoff Automation Gmb H & Co. KG (Beckhoff), insofar as they can be accessed online, are equipped with security functions that support the secure operation of plants, systems, machines and networks. Despite the security functions, the creation, implementation and constant updating of a holistic security concept for the operation are necessary to protect the respective plant, system, machine and networks against cyber threats. The products sold by Beckhoff are only part of the overall security concept. The customer is responsible for preventing unauthorized access by third parties to its equipment, systems, machines and networks. The latter should be connected to the corporate network or the Internet only if appropriate protective measures have been set up. In addition, the recommendations from Beckhoff regarding appropriate protective measures should be observed. Further information regarding information security and industrial security can be found in our https://www.beckhoff.com/secguide. Beckhoff products and solutions undergo continuous further development. This also applies to security functions. In light of this continuous further development, Beckhoff expressly recommends that the products are kept up to date at all times and that updates are installed for the products once they have been made available. Using outdated or unsupported product versions can increase the risk of cyber threats. To stay informed about information security for Beckhoff products, subscribe to the RSS feed at https:// www.beckhoff.com/secinfo. TE1421 Version: 1.0.1 7

## Page 8

Overview 2 Overview The Functional Mock-up Interface (FMI) is a free standard for exchanging or coupling simulation models created with different simulation tools. This is often the case when the models are provided by different suppliers or domain-specific simulation tools are used to simulate the different aspects of a machine or plant. A simulation tool that supports FMI allows a model to be exported or imported as a Functional Mock-up Unit (FMU). The Twin CAT 3 Simulation Runtime for FMI enables the coupling between Twin CAT 3 and another tool with FMI import function (FMI importer tool). This allows you to export a Twin CAT 3 configuration with the Twin CAT Usermode Runtime as an FMU. This can then be executed in any tool with an FMI import function. Execution takes place in Usermode context, i.e. not in real-time. The calculations of the FMI importer tool and Twin CAT 3 are synchronized. For example, the FMI importer tool can be a tool for the physical modeling of a machine. Software-in-the- loop simulations (Si L simulations) can be carried out by coupling with the Twin CAT 3 Simulation Runtime for FMI. Si L simulations are tests in which the control software is tested in an emulated environment (Usermode Runtime). For example, functional tests can be carried out on the PLC code or various operating scenarios can be tested using a simulation model. 8 Version: 1.0.1 TE1421

## Page 9

Installation 3 Installation System requirements Technical data Description Operating system Windows 10/ 11 Minimum Twin CAT version Twin CAT 3.1.4026.8 Twin CAT licenses TE1421 Simulation Runtime for FMI Supported FMI versions FMI 2.0, 3.0 Twin CAT Package Manager The product is installed via the Twin CAT Package Manager. Further information on this can be found in the installation documentation. Twin CAT Package Manager UI Install the following Workload via the Twin CAT Package Manger user interface in order to be able to use the product: TE1421 | Simulation Runtime for FMI Twin CAT Package Manager command line program You can use the Tc Pkg Command Line Interface (CLI) to display the available workloads on the system: tcpkg list -t workload Use the following command to install the Workload: tcpkg install TE1421. Simulation Runtime For FMI. XAE For use with Motion To be able to use NC axes in the Usermode Runtime, install the following packages via the command line: • Twin CAT. XARUM. NCPTP • Twin CAT. XARUM. Advanced Motion Licensing The Twin CAT 3 Simulation Runtime for FMI tool is an engineering product. Licensing is therefore carried out exclusively on the engineering system. If no license is available on the engineering system, a trial license is automatically used. The trial license limits the use of Twin CAT 3 Simulation Runtime for FMI to 180 simulation seconds and five signals. Activate the Twin CAT 3 project again to start another simulation. TE1421 Version: 1.0.1 9

## Page 10

Workflow for carrying out a simulation 4 Workflow for carrying out a simulation The procedure for carrying out a simulation with the Twin CAT 3 Simulation Runtime for FMI is described below. It first describes how the FMU is configured in Twin CAT 3 and then describes the procedure for execution in the FMI importer tool. 4.1 Creating an FMU The Runtime Functional Mock-up Unit (FMU) is exported via the user interface in Twin CAT 3. To do this, you must first configure the project. The following chapter explains the process using an example where an NC axis is simulated. 4.1.1 Configuring the System Manager To configure the project, create a Tc COM object in the System Manager with the inputs and outputs of the FMU according to the following scheme: Creating the Sim Io Master module 1. Right-click on Tc COM Objects in the System Manager. 2. Select Add New Item.... 3. Select Sim Io Master under Beckhoff Automation Gmb H & Co. KG > Simulation Modules. 10 Version: 1.0.1 TE1421

## Page 11

Workflow for carrying out a simulation ð The Sim IOMaster is inserted. Creating a Sim Io Group module Add the Sim Io Groups under the Sim Io Master. 1. Right-click on the Sim Io Master module you have created. 2. Select Add New Item.... 3. Select Sim Io Group under Beckhoff Automation Gmb H & Co. KG > Simulation Modules. 4. Under each Sim Io Group, you define the inputs and outputs of the FMU. ð You must create at least one group, but you can add as many groups as you need. The Sim Io Groups can be structured as required. TE1421 Version: 1.0.1 11

## Page 12

Workflow for carrying out a simulation Creating a symbol using the example of an axis A variable is added to the Sim IOGroup below: 1. Right-click on Outputs of the created Sim Io Group module. 2. Select Add New Item.... 3. For example, select NCTOPLC_AXIS_REF. 4. Confirm with the OK button. ð In the next step, you must assign a task to the Sim Io Master module. 5. To do this, create a new task under SYSTEM > Tasks. ð Once you have created the axis in the next step, you can link the variable. Example of creating an axis 1. Left-click on the Motion node. 2. Select Add New Item.... 3. Select NC/PTP NCI Configuration. 4. Confirm with OK. 5. Right-click on Axes. 6. Select Add New Item... here too. 7. Confirm with OK. ð The axis has been created. ð Next, the axis parameters can be linked to the variable already created in the Sim Io Group Signal linking 1. Left-click on Var 1. 2. Select Change Link.... 3. Select under MOTION > NC task 1 SAF > Axes > Axis 1 To Plc 12 Version: 1.0.1 TE1421

## Page 13

Workflow for carrying out a simulation 4. Confirm with OK. ð The link has been created. Creating a task 1. Right-click on Tasks. 2. Select Add New Item.... 3. Then select a Twin CAT task. 4. Confirm with OK. ð The task was created. Assigning the task 1. Left-click on the Sim Io Master module. 2. Select Context Tab 3. Use the Task drop-down menu to assign the previously created task to the Sim Io Master module. TE1421 Version: 1.0.1 13

## Page 14

Workflow for carrying out a simulation ð The FMU is now ready for export. 4.1.2 Configuring runtime Once the project has been configured, you can make further settings and then export the FMU. Configuration interface 1. Left-click on the Sim Io Master node. 2. Select the Simulation Runtime for FMI tab. 14 Version: 1.0.1 TE1421

## Page 15

Workflow for carrying out a simulation ð The configuration window of the Simulation Runtime for FMI opens. In the configuration interface of the Simulation Runtime for FMI, you can set the behavior of the runtime on the left-hand side: Control Description Export FMU Exports the FMU with the corresponding settings. FMU file name Name of the exported FMU without file extension, the FMI standard recommends using only ASCII characters. FMU export directory Directory for FMU export FMI version Version of the FMI specification, FMI 2.0 and FMI 3.0 are supported. Variable naming convention This setting determines whether the variables are exported in a structured format or as a flat list. Simulation time pacing Limits the temporal progression of the simulation to real-time. Wait for activation The simulation is prevented from progressing at a certain point in time until the user activates a Solution on the target. Wait for activation at [s] Time in seconds, regarding the Wait for activation checkbox. Include boot project The Solution is built automatically during FMU export and integrated into the FMU. Auto start If a boot project has been integrated in the FMU, it is started automatically after initializing the runtime. Information: The automatic start of the boot project is only possible if all required Twin CAT licenses are available on the system. Create Task The configuration interface checks whether the Sim Io Master module is already connected to a task. If this is not the case, this button can be used to automatically create a task and link it to the module. If a task is already linked, this button is grayed out. TE1421 Version: 1.0.1 15

## Page 16

Workflow for carrying out a simulation On the right side of the configuration interface, select the signals that should actually appear as inputs and outputs of the FMU. For this purpose, the I/O hierarchy from the System Manager is presented here once again. You can use all variables that have an FMU variable name as inputs and outputs in the FMU. Use the Add FMU variable name checkbox to select or deselect it. The corresponding Twin CAT data type and the FMI data type are also displayed. If, for example, only the variable Sim Io Master > Sim Io Group > Outputs > Act Pos is to be used as the output of the FMU for a drive, you can deselect all other variables and only activate the corresponding checkbox on Act Pos. Once you have made all the settings, click on the Export FMU button. The export path in the file system is displayed at the bottom of the configuration interface. In the example, the pre-set export directory and the pre-set file name are used: %Program Data%/Beckhoff/Twin CAT/Functions/TE1421-Simulation-Runtime-for-FMI/Tc Sim Runtime Fmi.fmu 4.2 Run simulation The Si L simulation with the exported FMU does not have to be run on the same system that was used for the export. However, a prerequisite for initializing the runtime within the FMU is that the Twin CAT Standard Workload has been installed on the simulation computer. The package TE1421 | Simulation Runtime for FMI is not required to use the exported runtime FMU. 4.2.1 Importing FMU Once the runtime FMU has been exported from Twin CAT, the next step is to load the FMU from the selected FMI importer tool. The procedure depends on the tool. You can usually select an interface type in the FMI importer tool. This is where you set up co-simulation. In Simulink®, the FMU Block is used for the FMU import. A Bus selector and a Scope Block are also used in this minimal example. The inputs and outputs of the FMU are interpreted as bus signals in Simulink®, so the bus object must also be created with the command fmudialog.create Bus Type before the first simulation start. fmudialog.create Bus Type('<Simulink Model Name>/FMU') The resulting block diagram in Simulink® is shown in the figure below: 4.2.2 Starting runtime and simulation After successfully importing the FMU, you can start the simulation. During the simulation start, the Twin CAT Runtime is initialized within the FMU and can then be selected as a target in Twin CAT 3.1. Depending on the export settings of the FMU, you can set Twin CAT to Run Mode in various ways. You have the following options here: • If no boot project has been included in the FMU, the Twin CAT Solution can be activated with the Activate configuration button. • If a boot project is included in the FMU, the included boot project can be activated with the Restart Twin CAT System button. Alternatively, the Activate configuration button can be used to activate the current Solution on the target. 16 Version: 1.0.1 TE1421

## Page 17

Workflow for carrying out a simulation • If a boot project exists and the Auto start feature has also been activated, the boot project contained in the FMU is automatically activated. The automatic start of the boot project is only possible if all required Twin CAT licenses are available on the system. If Twin CAT is in Run Mode, you can move the NC axis. 1. Click on the Axis 1 node. 2. Select the Online tab. 3. Enable the axis for manual movement by clicking on Enabling > Set and selecting All . 4. Use the + and - buttons to move the axis. ð The Act Pos output of the FMU runtime displays the corresponding numerical values of the axis in the FMI importer tool. 4.2.3 Warnings and errors All warnings and errors of the runtime FMU are transferred to the FMI importer tool via the FMI log mechanism. The display of warnings and errors depends on the tool. However, as some of the warnings and errors are not displayed by the FMI importer tools, a log file is also created. The log file can be found by default under the following path: %Program Data%/Beckhoff/Twin CAT/Functions/TE1421-Simulation-Runtime-for-FMI/TE1421-Simulation- Runtime-for-FMI.log TE1421 Version: 1.0.1 17

## Page 18

Scan inputs and outputs of the FMU 5 Scan inputs and outputs of the FMU After you have initialized the Twin CAT Runtime within the FMU and Twin CAT is in Config Mode, you can scan the System Manager configuration. This is particularly helpful if the FMU has been passed on, but not the associated Twin CAT Solution. 1. Click on the Tc COM Objects node. 2. Click on the magic wand in the toolbar (Scan target instances). ð The I/O configuration contained in the FMU is created in the System Manager. 3. Set the task for the scanned Sim Io Master module. ð You can then set Twin CAT to Run Mode and perform the Si L simulation as described in the previous chapter [} 16]. 18 Version: 1.0.1 TE1421

## Page 19

Support and Service 6 Support and Service Beckhoff and their partners around the world offer comprehensive support and service, making available fast and competent assistance with all questions related to Beckhoff products and system solutions. Download finder Our download finder contains all the files that we offer you for downloading. You will find application reports, technical documentation, technical drawings, configuration files and much more. The downloads are available in various formats. Beckhoff's branch offices and representatives Please contact your Beckhoff branch office or representative for local support and service on Beckhoff products! The addresses of Beckhoff's branch offices and representatives round the world can be found on our internet page: www.beckhoff.com You will also find further documentation for Beckhoff components there. Beckhoff Support Support offers you comprehensive technical assistance, helping you not only with the application of individual Beckhoff products, but also with other, wide-ranging services: • support • design, programming and commissioning of complex automation systems • and extensive training program for Beckhoff system components Hotline: +49 5246 963-157 e-mail: support@beckhoff.com Beckhoff Service The Beckhoff Service Center supports you in all matters of after-sales service: • on-site service • repair service • spare parts service • hotline service Hotline: +49 5246 963-460 e-mail: service@beckhoff.com Beckhoff Headquarters Beckhoff Automation Gmb H & Co. KG Huelshorstweg 20 33415 Verl Germany Phone: +49 5246 963-0 e-mail: info@beckhoff.com web: www.beckhoff.com TE1421 Version: 1.0.1 19

## Page 20

Trademark statements Beckhoff®, Twin CAT®, Twin CAT/BSD®, TC/BSD®, Ether CAT®, Ether CAT G®, Ether CAT G10®, Ether CAT P®, Safety over Ether CAT®, Twin SAFE®, XFC®, XTS® and XPlanar® are registered trademarks of and licensed by Beckhoff Automation Gmb H. Third-party trademark statements DSP System Toolbox, Embedded Coder, MATLAB, MATLAB Coder, MATLAB Compiler, Math Works, Predictive Maintenance Toolbox, Simscape, Simscape™ Multibody™, Simulink, Simulink Coder, Stateflow and Thing Speak are registered trademarks of The Math Works, Inc.

## Page 21

More Information: www.beckhoff.com/te1421 Beckhoff Automation Gmb H & Co. KG Hülshorstweg 20 33415 Verl Germany Phone: +49 5246 9630 info@beckhoff.com www.beckhoff.com
