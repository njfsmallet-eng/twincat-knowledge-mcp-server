---
title: "TF8810_TC3_AES70_Communication_EN"
product: "TF8810"
category: "Communication"
tags: ["AES", "COMMUNICATION"]
language: "EN"
document_type: "Manual"
version: "1.3"
source_pdf: "https://download.beckhoff.com/download/Document/automation/twincat3/TF8810_TC3_AES70_Communication_EN.pdf"
release_date: "2022-09-08"
---
Manual | EN TF8810 Twin CAT 3 | AES70 (OCA) Communication 2022-09-08 | Version: 1.3
## Page 3

Table of contents Table of contents 1 Foreword.................................................................................................................................................... 5 1.1 Notes on the documentation............................................................................................................. 5 1.2 For your safety.................................................................................................................................. 6 1.3 Notes on information security............................................................................................................ 7 2 Overview.................................................................................................................................................... 8 3 System requirements................................................................................................................................ 9 4 Installation............................................................................................................................................... 10 5 Licensing................................................................................................................................................. 14 6 Technical introduction............................................................................................................................ 17 7 PLC API.................................................................................................................................................... 18 7.1 Function blocks............................................................................................................................... 18 7.1.1 FB_Oca Device................................................................................................................. 18 7.1.2 FB_Oca Root.................................................................................................................... 19 7.1.3 Worker function blocks..................................................................................................... 24 7.2 Data types....................................................................................................................................... 54 7.2.1 Structures used to represent the properties of OCA objects............................................ 54 7.2.2 E_Oca Status.................................................................................................................... 56 7.2.3 E_Oca Mute State.............................................................................................................. 57 7.2.4 ST_Oca Temperature....................................................................................................... 57 7.2.5 ST_Oca Device Info........................................................................................................... 57 7.2.6 E_Oca Message Type........................................................................................................ 57 8 Examples................................................................................................................................................. 58 8.1 Example for using the function block FB_Oca Device..................................................................... 58 8.2 Example for using the function block FB_Oca Root......................................................................... 58 8.3 Example for using the function block FB_Oca Worker..................................................................... 59 8.4 Example for using the function block FB_Oca Gain......................................................................... 60 9 Support and Service............................................................................................................................... 61 TF8810 Version: 1.3 3
## Page 4

Table of contents 4 Version: 1.3 TF8810
## Page 5

Foreword 1 Foreword 1.1 Notes on the documentation This description is only intended for the use of trained specialists in control and automation engineering who are familiar with applicable national standards. It is essential that the documentation and the following notes and explanations are followed when installing and commissioning the components. It is the duty of the technical personnel to use the documentation published at the respective time of each installation and commissioning. The responsible staff must ensure that the application or use of the products described satisfy all the requirements for safety, including all the relevant laws, regulations, guidelines and standards. Disclaimer The documentation has been prepared with care. The products described are, however, constantly under development. We reserve the right to revise and change the documentation at any time and without prior announcement. No claims for the modification of products that have already been supplied may be made on the basis of the data, diagrams and descriptions in this documentation. Trademarks Beckhoff®, Twin CAT®, Twin CAT/BSD®, TC/BSD®, Ether CAT®, Ether CAT G®, Ether CAT G10®, Ether CAT P®, Safety over Ether CAT®, Twin SAFE®, XFC®, XTS® and XPlanar® are registered trademarks of and licensed by Beckhoff Automation Gmb H. Other designations used in this publication may be trademarks whose use by third parties for their own purposes could violate the rights of the owners. Patent Pending The Ether CAT Technology is covered, including but not limited to the following patent applications and patents: EP1590927, EP1789857, EP1456722, EP2137893, DE102015105702 with corresponding applications or registrations in various other countries. Ether CAT® is a registered trademark and patented technology, licensed by Beckhoff Automation Gmb H, Germany Copyright © Beckhoff Automation Gmb H & Co. KG, Germany. The reproduction, distribution and utilization of this document as well as the communication of its contents to others without express authorization are prohibited. Offenders will be held liable for the payment of damages. All rights reserved in the event of the grant of a patent, utility model or design. TF8810 Version: 1.3 5
## Page 6

Foreword 1.2 For your safety Safety regulations Read the following explanations for your safety. Always observe and follow product-specific safety instructions, which you may find at the appropriate places in this document. Exclusion of liability All the components are supplied in particular hardware and software configurations which are appropriate for the application. Modifications to hardware or software configurations other than those described in the documentation are not permitted, and nullify the liability of Beckhoff Automation Gmb H & Co. KG. Personnel qualification This description is only intended for trained specialists in control, automation, and drive technology who are familiar with the applicable national standards. Signal words The signal words used in the documentation are classified below. In order to prevent injury and damage to persons and property, read and follow the safety and warning notices. Personal injury warnings DANGER Hazard with high risk of death or serious injury. WARNING Hazard with medium risk of death or serious injury. CAUTION There is a low-risk hazard that could result in medium or minor injury. Warning of damage to property or environment NOTICE The environment, equipment, or data may be damaged. Information on handling the product This information includes, for example: recommendations for action, assistance or further information on the product. 6 Version: 1.3 TF8810
## Page 7

Foreword 1.3 Notes on information security The products of Beckhoff Automation Gmb H & Co. KG (Beckhoff), insofar as they can be accessed online, are equipped with security functions that support the secure operation of plants, systems, machines and networks. Despite the security functions, the creation, implementation and constant updating of a holistic security concept for the operation are necessary to protect the respective plant, system, machine and networks against cyber threats. The products sold by Beckhoff are only part of the overall security concept. The customer is responsible for preventing unauthorized access by third parties to its equipment, systems, machines and networks. The latter should be connected to the corporate network or the Internet only if appropriate protective measures have been set up. In addition, the recommendations from Beckhoff regarding appropriate protective measures should be observed. Further information regarding information security and industrial security can be found in our https://www.beckhoff.com/secguide. Beckhoff products and solutions undergo continuous further development. This also applies to security functions. In light of this continuous further development, Beckhoff expressly recommends that the products are kept up to date at all times and that updates are installed for the products once they have been made available. Using outdated or unsupported product versions can increase the risk of cyber threats. To stay informed about information security for Beckhoff products, subscribe to the RSS feed at https:// www.beckhoff.com/secinfo. TF8810 Version: 1.3 7
## Page 8

Overview 2 Overview The AES70 standard was published by the Audio Engineering Society, which is based in New York. It defines a scalable control protocol for professional audio devices and describes monitoring and control of such devices, but not the transfer of media data. The function blocks of the Twin CAT 3 AES70 (OCA) Communication PLC library can be used to establish data exchange between a Twin CAT PLC and a device that supports the AES70 (OCA) standard. The user can query or set properties of different objects in a device (Oca device). Various function blocks such as FB_Oca Gain, FB_Oca Mute or FB_Oca Switch are available for this purpose. The user can thus integrate OCA-compatible audio systems into Beckhoff's PC-based control technology platform and select from a wide range of control panels and various I/Os. Further information can be found on the Beckhoff website under entertainment industry. For the OCA-capable amplifiers from d&b audiotechnik, an example of a higher-level function block with some basic functions such as gain, mute or presets is available for download from the d&b audiotechnik website under www.dbaudio.com > Systems > Networks and Integration > Integration 8 Version: 1.3 TF8810
## Page 9

System requirements 3 System requirements Technical data Requirement Operating system Windows 7/10, Windows Embedded Standard 7, Windows CE 7 Target platform PC architecture (x86, x64 or ARM) Twin CAT version Twin CAT 3.1 build 4022.2 or higher Required Twin CAT setup level Twin CAT 3 XAE, XAR Required Twin CAT license TF8810 AES70 (OCA) Communication TF8810 Version: 1.3 9
## Page 10

Installation 4 Installation The following section describes how to install the Twin CAT 3 Function for Windows-based operating systems. ü The Twin CAT 3 Function setup file was downloaded from the Beckhoff website. 1. Run the setup file as administrator. To do this, select the command Run as administrator in the context menu of the file. ð The installation dialog opens. 2. Accept the end user licensing agreement and click Next. 10 Version: 1.3 TF8810
## Page 11

Installation 3. Enter your user data. 4. If you want to install the full version of the Twin CAT 3 Function, select Complete as installation type. If you want to install the Twin CAT 3 Function components separately, select Custom. TF8810 Version: 1.3 11
## Page 12

Installation 5. Select Next, then Install to start the installation. ð A dialog box informs you that the Twin CAT system must be stopped to proceed with the installation. 6. Confirm the dialog with Yes. 12 Version: 1.3 TF8810
## Page 13

Installation 7. Select Finish to exit the setup. ð The Twin CAT 3 Function has been successfully installed and can be licensed (see Licensing [} 14]). TF8810 Version: 1.3 13
## Page 14

Licensing 5 Licensing The Twin CAT 3 function can be activated as a full version or as a 7-day test version. Both license types can be activated via the Twin CAT 3 development environment (XAE). Licensing the full version of a Twin CAT 3 Function A description of the procedure to license a full version can be found in the Beckhoff Information System in the documentation "Twin CAT 3 Licensing". Licensing the 7-day test version of a Twin CAT 3 Function A 7-day test version cannot be enabled for a Twin CAT 3 license dongle. 1. Start the Twin CAT 3 development environment (XAE). 2. Open an existing Twin CAT 3 project or create a new project. 3. If you want to activate the license for a remote device, set the desired target system. To do this, select the target system from the Choose Target System drop-down list in the toolbar. ð The licensing settings always refer to the selected target system. When the project is activated on the target system, the corresponding Twin CAT 3 licenses are automatically copied to this system. 4. In the Solution Explorer, double-click License in the SYSTEM subtree. ð The Twin CAT 3 license manager opens. 14 Version: 1.3 TF8810
## Page 15

Licensing 5. Open the Manage Licenses tab. In the Add License column, check the check box for the license you want to add to your project (e.g. "TF4100 TC3 Controller Toolbox"). 6. Open the Order Information (Runtime) tab. ð In the tabular overview of licenses, the previously selected license is displayed with the status “missing”. 7. Click 7-Day Trial License... to activate the 7-day trial license. ð A dialog box opens, prompting you to enter the security code displayed in the dialog. 8. Enter the code exactly as it is displayed and confirm the entry. 9. Confirm the subsequent dialog, which indicates the successful activation. ð In the tabular overview of licenses, the license status now indicates the expiry date of the license. TF8810 Version: 1.3 15
## Page 16

Licensing 10. Restart the Twin CAT system. ð The 7-day trial version is enabled. 16 Version: 1.3 TF8810
## Page 17

Technical introduction 6 Technical introduction The AES70 specification describes objects representing functions and device states. These objects are handled with Twin CAT using function block methods. Each object has a unique object number that is defined by the device manufacturer. For each AES70-compatible device, an instance of the function block FB_Oca Device [} 18] has to be called cyclically. The function block establishes the connection via TCP/IP. The parameterization of the function block (IP address, port etc.) is explained in the Example for using the function block FB_Oca Device [} 58]. After calling the function block instance, you must call the methods of those function blocks that represent objects in the AES70-compatible device, for example so-called worker objects [} 24] such as Oca Mute, Oca Switch, and so on. TF8810 Version: 1.3 17
## Page 18

PLC API 7 PLC API 7.1 Function blocks 7.1.1 FB_Oca Device The function block FB_Oca Device establishes the connection via Tcp Ip to devices that support the AES70 standard. Cyclically single call The instance of the function block FB_Oca Device must be called cyclically once at the start of the PLC program. Syntax VAR_INPUT b Enable : BOOL; END_VAR VAR_OUTPUT ip Tc Result Event : Tc3_Event Logger. I_Tc Result Event; p Link : POINTER TO ST_Link; b Busy : BOOL; b Active : BOOL; b Error : BOOL; st Device Info : ST_Oca Device Info; END_VAR Inputs Name Type Description b Enable BOOL Enables/disables execution of the function block and starts the "keep alive" mechanism. A rising edge at this input clears any pending errors (indicated by b Error = TRUE). The property s Device Name should be set before the activation. Parameters such as IP address, port, etc. should also be predefined in the global variable list "GVL_AES70". 18 Version: 1.3 TF8810
## Page 19

PLC API Outputs Name Type Description ip Tc Result Event Tc3_Event Logger. I_Tc Res Result interface with detailed information on the return ult Event value p Link POINTER TO ST_Link Pointer for establishing a connection between OCA objects and the OCA device b Busy BOOL TRUE as long as the function block is called with b Enable = TRUE. b Active BOOL Indicates that the device is ready to operate. This output is generally used to activate OCA objects. b Error BOOL TRUE, if an error occurs. st Device Info ST_Oca Device Info [} 57] This structure provides information such as the time of the last sent or received message and the number of messages. Properties Name Type Access Definition lo- Description cation Ams Net Id T_Ams Net ID Set Local AMS network ID of the device For the local computer (default) an empty string may be specified. b Local Oca BOOL Local Currently unused (intended for future extension) Device s Device Na STRING Set Name of the OCA device to be used me Parameters such as IP address and port are defined in the array a Oca Devices, which can be found in the global variable list GVL_AES70. t Ads Timeo TIME Set Maximum time allowed for the execution of the ut function block This input is internally preset to DEFAULT_ADS_TIMEOUT and does not have to be explicitly assigned. Requirements Development environment Target platform PLC libraries to include Twin CAT v3.1.4022.2 or higher PC or CX (x64, x86, ARM) Tc3_AES70 See also: Example for using the function block FB_Oca Device [} 58] 7.1.2 FB_Oca Root The function block FB_Oca Root provides basic OCA functionality. It is the function block from which all other function blocks inherit. No explicit call Since there is no code in the body of the function block, it should not be called explicitly. Instead, use the corresponding methods of the function block. TF8810 Version: 1.3 19
## Page 20

PLC API Methods Name Definition loca- Description tion Get Class Identification Local This method can be used to query the Class Id and Class Version of the OCA object. [} 21] If the query was successful, the result is output in the properties st Class ID and st Class Version. Get Lockable [} 21] Local This method is used to query whether the OCA object can be locked. If the query was successful, the result is output in the property st Lockable. Lock Unlock [} 22] Local Method for unlocking or locking an OCA object If the method was executed successfully, the result is output in the property st Object Locked. Get Role [} 22] Local OCA objects can have a text label to make their meaning easier to recognize. If the method call was successful, the result is output in the property st Role. Subscription [} 23] Local You can use this method to request OCA objects, generate notifications for value changes, or set up sending. If the method was executed successfully, the result is output in the property st Subscribed. Properties Name Type Access Definition lo- Description cation s Class Id STRING Get Local Unique class name st Class Id ST_Class Id Pro Get Local Unique class name perty [} 54] st Class Version ST_UINT16Pro Get Local OCA Class Version perty [} 54] st Lockable ST_Boolean Pro Get Local Indicates whether the object can be locked perty [} 54] st Subscribed ST_Boolean Pro Get Local Shows whether the object was requested to generate notifications when value changes perty [} 54] occur st Role ST_String Prop Get Local Task of the object in the device (e.g. Config_Input Enable) erty [} 54] n ONo UDINT Get Local Unique number with which the instantiated object is uniquely defined s Oca Object Des STRING(32) Set Local Arbitrary object name. This is used to assign cription further object properties to the function block that were defined in the array a Oca Devices (located in the global variable list GVL_AES70). st Object Locked ST_Boolean Pro Get Local Indicates whether the object is locked. perty [} 54] AES70 standard The names of variables and function blocks have been adapted to the AES70 standard where possible. Information about this communication protocol can be found at www.aes.org and www.ocaalliance.com. 20 Version: 1.3 TF8810
## Page 21

PLC API Requirements Development environment Target platform PLC libraries to include Twin CAT v3.1.4022.2 or higher PC or CX (x64, x86, ARM) Tc3_AES70 See also: Example for using the function block FB_Oca Root [} 58] 7.1.2.1 Get Class Identification The method Get Class Identification can be used to query the Class Id and Class Version of the OCA object. If the query was successful, the result is output in the properties st Class ID and st Class Version. Cyclic method call Since several PLC cycles may pass between sending and the response from the device, this method should be executed cyclically. Syntax VAR_INPUT p Link : POINTER TO ST_Link; b Execute : BOOL; END_VAR Inputs Name Type Description p Link POINTER TO ST_Link Pointer for establishing a connection between OCA objects and the OCA device b Execute BOOL The method is executed with a positive edge at the b Execute input. 7.1.2.2 Get Lockable The method Get Lockable is used to query whether the OCA object can be locked. If the query was successful, the result is output in the property st Lockable. Cyclic method call Since several PLC cycles may pass between sending and the response from the device, this method should be executed cyclically. Syntax VAR_INPUT p Link : POINTER TO ST_Link; b Execute : BOOL; END_VAR TF8810 Version: 1.3 21
## Page 22

PLC API Inputs Name Type Description p Link POINTER TO ST_Link Pointer for establishing a connection between OCA objects and the OCA device b Execute BOOL The method is executed with a positive edge at the b Execute input. 7.1.2.3 Lock Unlock The Lock Unlock method can be used to unlock or lock an OCA object. If the method was executed successfully, the result is output in the property st Object Locked. Cyclic method call Since several PLC cycles may pass between sending and the response from the device, this method should be executed cyclically. Syntax VAR_INPUT p Link : POINTER TO ST_Link; b Execute : BOOL; b Lock : BOOL; //If the Method is executed this Boolean Input decides whether the object should be locked (TRUE) or unlocked (FALSE) e Cmd Mode : E_Oca Message Type Cmdb Lock; END_VAR Inputs Name Type Description p Link POINTER TO ST_Link Pointer for establishing a connection between OCA objects and the OCA device b Execute BOOL The method is executed with a positive edge at the b Execute input. b Lock BOOL Variable that determines whether to lock (TRUE) or unlock (FALSE) e Cmd Mode E_Oca Message Type Cmd Depending on whether confirmation is required or not, this input variable is set to E_Oca Message Type Cmd. Oca Cmd Rrq or E_Oca Message Type Cmd. Oca Cmd. 7.1.2.4 Get Role OCA objects can have a text label to make their meaning easier to recognize. If the method call was successful, the result is output in the property st Role. Cyclic method call Since several PLC cycles may pass between sending and the response from the device, this method should be executed cyclically. 22 Version: 1.3 TF8810
## Page 23

PLC API Syntax VAR_INPUT p Link : POINTER TO ST_Link; b Execute : BOOL; END_VAR Inputs Name Type Description p Link POINTER TO ST_Link Pointer for establishing a connection between OCA objects and the OCA device b Execute BOOL The method is executed with a positive edge at the b Execute input. 7.1.2.5 Subscription You can use the Subscription method to request OCA objects, generate notifications for value changes, or set up sending of notifications. If the method was executed successfully, the result is output in the property st Subscribed. Cyclic method call Since several PLC cycles may pass between sending and the response from the device, this method should be executed cyclically. Syntax VAR_INPUT p Link : POINTER TO ST_Link; b Execute : BOOL; e Mode : E_Subscription Mode; n Subscribtion No : UDINT; e Cmd Mode : E_Oca Message Type Cmd; END_VAR Inputs Name Type Description p Link POINTER TO ST_Link Pointer for establishing a connection between OCA objects and the OCA device b Execute BOOL The method is executed with a positive edge at the b Execute input. e Mode E_Subscription Mode Depending on whether a notification request is to be created or deleted, the input of the method can be set to E_Subscription Mode. ADD_Subscription or E_Subscription Mode. DELETE_Subscription. n Subscribtion No UDINT Unique number for localizing the respective subscription e Cmd Mode E_Oca Message Type Cmd Depending on whether confirmation is required or not, this input variable is set to E_Oca Message Type Cmd. Oca Cmd Rrq or E_Oca Message Type Cmd. Oca Cmd. TF8810 Version: 1.3 23
## Page 24

PLC API 7.1.3 Worker function blocks Worker function blocks are used to control OCA worker objects. AES70 standard The names of variables and function blocks have been adapted to the AES70 standard where possible. Information about this communication protocol can be found at www.aes.org and www.ocaalliance.com. 7.1.3.1 FB_Oca Worker The function block FB_Oca Worker extends the function block FB_Oca Root with properties and methods for handling the OCA objects. No explicit call Since there is no code in the body of the function block, it should not be called explicitly. Instead, use the corresponding methods of the function block. Inheritance hierarchy FB_Oca Root FB_Oca Worker Methods Name Definition loca- Description tion Get Enabled / Local Method for querying or setting the Enabled property of the OCA object. Set Enabled [} 25] If the query was successful, the result is output in the property st Enabled. Get Label /Set Label / Local This method is used to query whether the OCA object can be locked. RNtf Label [} 26] If the query was successful, the result is output in the property st Lockable. Lock Unlock [} 22] Local Method for unlocking or locking an OCA object. If the method was executed successfully, the result is output in the property st Object Locked. Get Role [} 22] Local OCA objects can have a text label to make their meaning easier to recognize. If the method call was successful, the result is output in the property st Role. Subscription [} 23] Local You can use this method to request OCA objects, generate notifications for value changes, or set up sending. If the method was executed successfully, the result is output in the property st Subscribed. 24 Version: 1.3 TF8810
## Page 25

PLC API Properties Name Type Access Definition lo- Description cation st Enabled ST_Boolean Prop Get Local Indicates whether the OCA object in the corresponding OCA device is enabled. erty [} 54] st Label ST_String Propert Get Local OCA objects can have a description text that is stored in this property to facilitate recognition. y [} 54] st Latency ST_FLOAT32Pro Get Local Processing latency of the OCA object perty [} 54] st Owner ST_UINT32Prope Get Local OCA object number of the higher-level object rty [} 54] AES70 standard The names of variables and function blocks have been adapted to the AES70 standard where possible. Information about this communication protocol can be found at www.aes.org and www.ocaalliance.com. Requirements Development environment Target platform PLC libraries to include Twin CAT v3.1.4022.2 or higher PC or CX (x64, x86, ARM) Tc3_AES70 See also: Example for using the function block FB_Oca Worker [} 59] 7.1.3.1.1 Get Enabled / Set Enabled Get Enabled The Get Enabled method is used to query the Enabled property of the OCA object. If the query was successful, the result is output in the property st Enabled. Cyclic method call Since several PLC cycles may pass between sending and the response from the device, this method should be executed cyclically. Syntax VAR_INPUT p Link : POINTER TO ST_Link; b Execute : BOOL; END_VAR Inputs Name Type Description p Link POINTER TO ST_Link Pointer for establishing a connection between OCA objects and the OCA device b Execute BOOL The method is executed with a positive edge at the b Execute input. TF8810 Version: 1.3 25
## Page 26

PLC API Set Enabled The Set Enabled method can be used to enable or disable an OCA object. If the method was executed successfully, the result is output in the property st Enabled. Cyclic method call Since several PLC cycles may pass between sending and the response from the device, this method should be executed cyclically. Syntax VAR_INPUT p Link : POINTER TO ST_Link; b Execute : BOOL; b Val Enabled : BOOL; e Cmd Mode : E_Oca Message Type Cmd; END_VAR Inputs Name Type Description p Link POINTER TO ST_Link Pointer for establishing a connection between OCA objects and the OCA device. b Execute BOOL The method is executed with a positive edge at the b Execute input. b Val Enabled BOOL Depending on whether the OCA object is to be enabled or disabled, this input must be assigned TRUE or FALSE. e Cmd Mode E_Oca Message Type Cmd Depending on whether confirmation is required or not, this input variable is set to E_Oca Message Type Cmd. Oca Cmd Rrq or E_Oca Message Type Cmd. Oca Cmd. 7.1.3.1.2 Get Label / Set Label / RNtf Label Get Label OCA objects can be labeled to facilitate recognition. The Get Label method is used to query this property of the OCA object. If the query was successful, the result is output in the property st Label. Cyclic method call Since several PLC cycles may pass between sending and the response from the device, this method should be executed cyclically. Syntax VAR_INPUT p Link : POINTER TO ST_Link; b Execute : BOOL; END_VAR 26 Version: 1.3 TF8810
## Page 27

PLC API Inputs Name Type Description p Link POINTER TO ST_Link Pointer for establishing a connection between OCA objects and the OCA device b Execute BOOL The method is executed with a positive edge at the b Execute input. Set Label The Set Label method can be used to set the labeling of an OCA object. If the method was executed successfully, the result is output in the property st Label. Cyclic method call Since several PLC cycles may pass between sending and the response from the device, this method should be executed cyclically. Syntax VAR_INPUT p Link : POINTER TO ST_Link; b Execute : BOOL; s Label : STRING; e Cmd Mode : E_Oca Message Type Cmd; END_VAR Inputs Name Type Description p Link POINTER TO ST_Link Pointer for establishing a connection between OCA objects and the OCA device b Execute BOOL The method is executed with a positive edge at the b Execute input. s Label STRING Label for the OCA object e Cmd Mode E_ Oca Message Type Cmd Depending on whether confirmation is required or not, this input variable is set to E_Oca Message Type Cmd. Oca Cmd Rrq or E_Oca Message Type Cmd. Oca Cmd. RNtf Label If the OCA object is prompted to notify changes (using the Subscription [} 23] method), incoming notifications are read using the RNtf Label method. Cyclic method call Since several PLC cycles may pass between sending and the response from the device, this method should be executed cyclically. TF8810 Version: 1.3 27
## Page 28

PLC API Syntax VAR_INPUT p Link : POINTER TO ST_Link; b Enable : BOOL; n Subscribtion No : UDINT; END_VAR Inputs Name Type Description p Link POINTER TO ST_Link Pointer for establishing a connection between OCA objects and the OCA device. b Execute BOOL The method is executed with a positive edge at the b Execute input. n Subscribtion No UDINT Unique number for localizing the respective subscription. 7.1.3.1.3 Get Latency / Set Latency / RNtf Latency Get Latency The Get Latenca method is used to query the processing latency of the OCA object. If the query was successful, the result is output in the property st Latency. Cyclic method call Since several PLC cycles may pass between sending and the response from the device, this method should be executed cyclically. Syntax VAR_INPUT p Link : POINTER TO ST_Link; b Execute : BOOL; END_VAR Inputs Name Type Description p Link POINTER TO ST_Link Pointer for establishing a connection between OCA objects and the OCA device b Execute BOOL The method is executed with a positive edge at the b Execute input. Set Latency The Set Latency method can be used to set the processing latency of an OCA object. If the method was executed successfully, the result is output in the property st Latency. 28 Version: 1.3 TF8810
## Page 29

PLC API Cyclic method call Since several PLC cycles may pass between sending and the response from the device, this method should be executed cyclically. Syntax VAR_INPUT p Link : POINTER TO ST_Link; b Execute : BOOL; f Latency : REAL; e Cmd Mode : E_Oca Message Type Cmd; END_VAR Inputs Name Type Description p Link POINTER TO ST_Link Pointer for establishing a connection between OCA objects and the OCA device b Execute BOOL The method is executed with a positive edge at the b Execute input. f Latency REAL Value to be assigned to this property of the OCA object e Cmd Mode E_Oca Message Type Cmd Depending on whether confirmation is required or not, this input variable is set to E_Oca Message Type Cmd. Oca Cmd Rrq or E_Oca Message Type Cmd. Oca Cmd. RNtf Latency If the OCA object was prompted to notify changes (using the Subscription [} 23] method), incoming notifications are read using the RNtf Latency method. Cyclic method call Since several PLC cycles may pass between sending and the response from the device, this method should be executed cyclically. Syntax VAR_INPUT p Link : POINTER TO ST_Link; b Enable : BOOL; n Subscribtion No : UDINT; END_VAR Inputs Name Type Description p Link POINTER TO ST_Link Pointer for establishing a connection between OCA objects and the OCA device. b Execute BOOL The method is executed with a positive edge at the b Execute input. n Subscribtion No UDINT Unique number for localizing the respective subscription. TF8810 Version: 1.3 29
## Page 30

PLC API 7.1.3.1.4 Get Owner The Get Owner method is used to query the higher-level element. If the query was successful, the result is output in the property st Owner. Cyclic method call Since several PLC cycles may pass between sending and the response from the device, this method should be executed cyclically. Syntax VAR_INPUT p Link : POINTER TO ST_Link; b Execute : BOOL; END_VAR Inputs Name Type Description p Link POINTER TO ST_Link Pointer for establishing a connection between OCA objects and the OCA device b Execute BOOL The method is executed with a positive edge at the b Execute input. 7.1.3.2 Actuator function blocks Actuator objects are worker objects whose purpose is the control of electronic functions. AES70 standard The names of variables and function blocks have been adapted to the AES70 standard where possible. Information about this communication protocol can be found at www.aes.org and www.ocaalliance.com. 7.1.3.2.1 FB_Oca Actuator The function block FB_Oca Actuator extends the function block FB_Oca Worker. It is the function block from which all function blocks that are assigned to the Actuator category inherit. FB_Oca Actuator has neither properties nor methods. No explicit call Since there is no code in the body of the function block, it should not be called explicitly. Instead, use the corresponding methods of the function block. Inheritance hierarchy FB_Oca Root FB_Oca Worker FB_Oca Actuator 30 Version: 1.3 TF8810
## Page 31

PLC API Requirements Development environment Target platform PLC libraries to include Twin CAT v3.1.4022.2 or higher PC or CX (x64, x86, ARM) Tc3_AES70 7.1.3.2.2 FB_Oca Gain The function block FB_Oca Gain provides properties and methods for handling OCA objects for gain adjustment. No explicit call Since there is no code in the body of the function block, it should not be called explicitly. Instead, use the corresponding methods of the function block. Inheritance hierarchy FB_Oca Root FB_Oca Worker FB_Oca Actuator FB_Oca Gain Methods Name Definition loca- Description tion Get Gain [} 32] Local Used to query the properties Gain, Gain MAX and Gain MIN of the OCA object. If the query was successful, the result is output in the properties st Gain, st Gain MAX and st Gain MIN. Set Gain [} 32] Local Use this method to set the gain of an OCA object in d B. If the method was executed successfully, the result is output in the property st Gain. RNtf Gain [} 32] Local If the OCA object was prompted to notify changes (using the Subscription [} 23] method), this method is used to read incoming notifications. Properties Name Type Access Definition lo- Description cation st Gain ST_FLOAT32Pr Get Local Gain in d B operty [} 54] st Gain MAX ST_FLOAT32Pr Get Local Maximum gain value in d B operty [} 54] st Gain MIN ST_FLOAT32Pr Get Local Minimum gain value in d B operty [} 54] TF8810 Version: 1.3 31
## Page 32

PLC API AES70 standard The names of variables and function blocks have been adapted to the AES70 standard where possible. Information about this communication protocol can be found at www.aes.org and www.ocaalliance.com. Requirements Development environment Target platform PLC libraries to include Twin CAT v3.1.4022.2 or higher PC or CX (x64, x86, ARM) Tc3_AES70 See also: Example for using the function block FB_Oca Gain [} 60] 7.1.3.2.2.1 Get Gain / Set Gain / RNtf Gain Get Gain The Get Gain method is used to query the properties Gain, Gain MAX and Gain MIN of the OCA object. If the query was successful, the result is output in the properties st Gain, st Gain MAX and st Gain MIN. Cyclic method call Since several PLC cycles may pass between sending and the response from the device, this method should be executed cyclically. Syntax VAR_INPUT p Link : POINTER TO ST_Link; b Execute : BOOL; END_VAR Inputs Name Type Description p Link POINTER TO ST_Link Pointer for establishing a connection between OCA objects and the OCA device b Execute BOOL The method is executed with a positive edge at the b Execute input. Set Gain Use the Set Gain method to set the gain of an OCA object in d B. If the method was executed successfully, the result is output in the property st Gain. 32 Version: 1.3 TF8810
## Page 33

PLC API Cyclic method call Since several PLC cycles may pass between sending and the response from the device, this method should be executed cyclically. Syntax VAR_INPUT p Link : POINTER TO ST_Link; b Execute : BOOL; f Gain : REAL; e Cmd Mode : E_Oca Message Type Cmd; END_VAR Inputs Name Type Description p Link POINTER TO ST_Link Pointer for establishing a connection between OCA objects and the OCA device. b Execute BOOL The method is executed with a positive edge at the b Execute input. f Gain REAL Gain value in d B to which the OCA object is to be set. e Cmd Mode E_Oca Message Type Cmd Depending on whether confirmation is required or not, this input variable is set to E_Oca Message Type Cmd. Oca Cmd Rrq or E_Oca Message Type Cmd. Oca Cmd. RNtf Gain If the OCA object was prompted to notify changes (using the Subscription [} 23] method), incoming notifications are read using the RNtf Gain method. Cyclic method call Since several PLC cycles may pass between sending and the response from the device, this method should be executed cyclically. Syntax VAR_INPUT p Link : POINTER TO ST_Link; b Enable : BOOL; n Subscribtion No : UDINT; END_VAR Inputs Name Type Description p Link POINTER TO ST_Link Pointer for establishing a connection between OCA objects and the OCA device. b Execute BOOL The method is executed with a positive edge at the b Execute input. n Subscribtion No UDINT Unique number for localizing the respective subscription. TF8810 Version: 1.3 33
## Page 34

PLC API 7.1.3.2.3 FB_Oca Switch The function block FB_Oca Switch extends the function block FB_Oca Actuator with properties and methods and for handling OCA switch objects. These objects can have multiple switch positions. Individual positions can be enabled or disabled and given names. No explicit call Since there is no code in the body of the function block, it should not be called explicitly. Instead, use the corresponding methods of the function block. Inheritance hierarchy FB_Oca Root FB_Oca Worker FB_Oca Actuator FB_Oca Switch Methods Name Definition loca- Description tion Get Position [} 35] Local This method is used to query the Position, Position MAX, and Position MIN properties of the OCA object. Set Position [} 35] Local Use this method to set the switch position of an OCA object. RNtf Position [} 35] Local This method reads incoming notifications Get Position Enabled Local Method for querying a switch position [} 37] Set Position Enabled Local Method for enabling or disabling a switch position [} 37] Get Position Name Local Method for querying the name of a switch position Set Position Name Local Use this method to assign a name to a switch position. 34 Version: 1.3 TF8810
## Page 35

PLC API Properties Name Type Access Definition loca- Description tion st Position ST_UINT16Pr Get Local Indicates the switch position of the OCA object. operty [} 54] st Position ST_UINT16Pr Get Local Indicates the lowest switch position of the OCA MAX object. operty [} 54] st Position ST_UINT16Pr Get Local Indicates the highest switch position of the OCA MIN object. operty [} 54] st Position ST_Position En Get Local Indicates whether a particular switch position is Enabled enabled or disabled. abled Propert y [} 54] st Position ST_Position N Get Local Indicates the position name of a particular switch Name position. ame Property [} 54] AES70 standard The names of variables and function blocks have been adapted to the AES70 standard where possible. Information about this communication protocol can be found at www.aes.org and www.ocaalliance.com. Requirements Development environment Target platform PLC libraries to include Twin CAT v3.1.4022.2 or higher PC or CX (x64, x86, ARM) Tc3_AES70 7.1.3.2.3.1 Get Position / Set Position / RNtf Position Get Position The Get Position method is used to query the Position, Position MAX, and Position MIN properties of the OCA object. If the query was successful, the result is output in the properties st Position, st Position MAX and st Position MIN. Cyclic method call Since several PLC cycles may pass between sending and the response from the device, this method should be executed cyclically. Syntax VAR_INPUT p Link : POINTER TO ST_Link; //Pointer to address of the structure which links the OCA objects to the OCA device b Execute : BOOL; //The Method is triggered by a rising edge at this input. END_VAR TF8810 Version: 1.3 35
## Page 36

PLC API Inputs Name Type Description p Link POINTER TO ST_Link Pointer for establishing a connection between OCA objects and the OCA device b Execute BOOL The method is executed with a positive edge at the b Execute input. Set Position The Set Position method can be used to set the switch position of an OCA object. If the method was executed successfully, the result is output in the property st Position. Cyclic method call Since several PLC cycles may pass between sending and the response from the device, this method should be executed cyclically. Syntax VAR_INPUT p Link : POINTER TO ST_Link; //Pointer to address of the structure which links the OCA objects to the OCA device b Execute : BOOL; //The Method is triggered by a rising edge at this input. n Position : UINT; e Cmd Mode : E_Oca Message Type Cmdb Lock; END_VAR Inputs Name Type Description p Link POINTER TO Pointer for establishing a connection between OCA objects and the ST_Link OCA device. b Execute BOOL The method is executed with a positive edge at the b Execute input. n Position UINT Switch position for the OCA object. e Cmd Mode E_Oca Message Type Depending on whether confirmation is required or not, this input Cmdb Lock variable is set to E_Oca Message Type Cmd. Oca Cmd Rrq or E_Oca Message Type Cmd. Oca Cmd. RNtf Position If the OCA object was prompted to notify changes (using the Subscription [} 23] method), incoming notifications are read using the RNtf Position method. 36 Version: 1.3 TF8810
## Page 37

PLC API Cyclic method call Since several PLC cycles may pass between sending and the response from the device, this method should be executed cyclically. Syntax VAR_INPUT p Link : POINTER TO ST_Link; b Enable : BOOL; n Subscribtion No : UDINT; END_VAR Inputs Name Type Description p Link POINTER TO ST_Link Pointer for establishing a connection between OCA objects and the OCA device. b Execute BOOL The method is executed with a positive edge at the b Execute input. n Subscribtion No UDINT Unique number for localizing the respective subscription. 7.1.3.2.3.2 Get Position Enabled / Set Position Enabled Get Position Enabled The Get Position Enabled method is used to query whether the respective switch position determined by n Index is enabled or disabled. If the query was successful, the result is output in the property st Position Enabled. Cyclic method call Since several PLC cycles may pass between sending and the response from the device, this method should be executed cyclically. Syntax VAR_INPUT p Link : POINTER TO ST_Link; //Pointer to address of the structure which links the OCA objects to the OCA device b Execute : BOOL; //The Method is triggered by a rising edge at this input. n Index : UINT; //The Index of the queried Position END_VAR Inputs Name Type Description p Link POINTER TO ST_Link Pointer for establishing a connection between OCA objects and the OCA device b Execute BOOL The method is executed with a positive edge at the b Execute input. n Index UINT Index of the switch position to be queried TF8810 Version: 1.3 37
## Page 38

PLC API Set Position Enabled The Set Position Enabled method can be used to enable or disable a specific switch position specified by n Index. If the query was successful, the result is output in the property st Position Enabled. Cyclic method call Since several PLC cycles may pass between sending and the response from the device, this method should be executed cyclically. Syntax VAR_INPUT p Link : POINTER TO ST_Link; //Pointer to address of the structure which links the OCA objects to the OCA device b Execute : BOOL; //The Method is triggered by a rising edge at this input. b Val Enabled : BOOL; //Set this Input to TRUE to enable the Position specified by n Index or FALSE to disable this Position n Index : UINT; //The Index of the Position which shold be modified e Cmd Mode : E_Oca Message Type Cmdb Lock; END_VAR Inputs Name Type Description p Link POINTER TO ST_Link Pointer for establishing a connection between OCA objects and the OCA device b Execute BOOL The method is executed with a positive edge at the b Execute input. b Val Enabled BOOL If this input is set to TRUE, the switch position selected by n Index is enabled when this method is executed. If the input is set to FALSE, the switch position is disabled. n Position UINT Switch position for the OCA object. e Cmd Mode E_Oca Message Type Cmdb Lock Depending on whether confirmation is required or not, this input variable is set to E_Oca Message Type Cmd. Oca Cmd Rrq or E_Oca Message Type Cmd. Oca Cmd. 7.1.3.2.4 FB_Oca Mute The function block FB_Oca Mute provides properties and methods for handling OCA objects for muting. No explicit call Since there is no code in the body of the function block, it should not be called explicitly. Instead, use the corresponding methods of the function block. 38 Version: 1.3 TF8810
## Page 39

PLC API Inheritance hierarchy FB_Oca Root FB_Oca Worker FB_Oca Actuator FB_Oca Mute Methods Name Definition loca- Description tion Get Mute State [} 39] Local This method is used to query the Position, Position MAX, and Position MIN properties of the OCA object. Set Mute State [} 39] Local Use this method to set the switch position of an OCA object. RNtf Mute State [} 39] Local This method reads incoming notifications. Properties Name Type Access Definition loca- Description tion st Mute State ST_Mute Pr Get Local Indicates whether the OCA object is muted or not. operty [} 54] AES70 standard The names of variables and function blocks have been adapted to the AES70 standard where possible. Information about this communication protocol can be found at www.aes.org and www.ocaalliance.com. Requirements Development environment Target platform PLC libraries to include Twin CAT v3.1.4022.2 or higher PC or CX (x64, x86, ARM) Tc3_AES70 7.1.3.2.4.1 Get Mute State / Set Mute State / RNtf Mute State Get Mute State The Get Position method is used to query the Mute State property of the OCA object. If the query was successful, the result is output in the property st Mute State. Cyclic method call Since several PLC cycles may pass between sending and the response from the device, this method should be executed cyclically. Syntax VAR_INPUT p Link : POINTER TO ST_Link; b Execute : BOOL; END_VAR TF8810 Version: 1.3 39
## Page 40

PLC API Inputs Name Type Description p Link POINTER TO ST_Link Pointer for establishing a connection between OCA objects and the OCA device b Execute BOOL The method is executed with a positive edge at the b Execute input. Set Mute State The Set Mute State method can be used to set the muting feature of an OCA object. If the method was executed successfully, the result is output in the property st Mute State. Cyclic method call Since several PLC cycles may pass between sending and the response from the device, this method should be executed cyclically. Syntax VAR_INPUT p Link : POINTER TO ST_Link; b Execute : BOOL; e Mute State : E_Oca Mute State; e Cmd Mode : E_Oca Message Type Cmd; END_VAR Inputs Name Type Description p Link POINTER TO ST_Link Pointer for establishing a connection between OCA objects and the OCA device b Execute BOOL The method is executed with a positive edge at the b Execute input. e Mute State E_Oca Mute State [} 57] Muting setting (muted/unmuted) to be assigned to the OCA object. e Cmd Mode Oca Message Type Cmd Depending on whether confirmation is required or not, this input variable is set to E_Oca Message Type Cmd. Oca Cmd Rrq or E_Oca Message Type Cmd. Oca Cmd. RNtf Mute State If the OCA object was prompted to notify changes (using the Subscription [} 23] method), incoming notifications are read using the RNtf Mute State method. Cyclic method call Since several PLC cycles may pass between sending and the response from the device, this method should be executed cyclically. 40 Version: 1.3 TF8810
## Page 41

PLC API Syntax VAR_INPUT p Link : POINTER TO ST_Link; b Enable : BOOL; n Subscribtion No : UDINT; END_VAR Inputs Name Type Description p Link POINTER TO ST_Link Pointer for establishing a connection between OCA objects and the OCA device. b Execute BOOL The method is executed with a positive edge at the b Execute input. n Subscribtion No UDINT Unique number for localizing the respective subscription. 7.1.3.2.5 FB_Oca Basic Actuator The function block FB_Oca Basic Actuator extends the function block FB_Oca Actuator. It is the function block from which all function blocks that are assigned to the Basic Actuator category inherit. FB_Oca Basic Actuator has neither properties nor methods. Inheritance hierarchy FB_Oca Root FB_Oca Worker FB_Oca Actuator FB_Oca Basic Actuator Requirements Development environment Target platform PLC libraries to include Twin CAT v3.1.4022.2 or higher PC or CX (x64, x86, ARM) Tc3_AES70 7.1.3.2.6 FB_Oca Boolean Actuator The function block FB_Oca Boolean Actuator extends the function block FB_Oca Basic Actuator with properties and methods for handling Oca Boolean Actuator objects. No explicit call Since there is no code in the body of the function block, it should not be called explicitly. Instead, use the corresponding methods of the function block. Inheritance hierarchy FB_Oca Root FB_Oca Worker TF8810 Version: 1.3 41
## Page 42

PLC API FB_Oca Actuator FB_Oca Basic Actuator FB_Oca Boolean Actuator Methods Name Definition loca- Description tion Get Setting [} 42] Local This method is used to query a Boolean property. Set Setting [} 42] Local This method can be used to set the value of a Boolean property. RNtf Setting [} 42] Local This method reads incoming notifications Properties Name Type Access Definition loca- Description tion st Setting ST_Boolean Pr Get Local Indicates the switch position of the OCA object. operty [} 54] AES70 standard The names of variables and function blocks have been adapted to the AES70 standard where possible. Information about this communication protocol can be found at www.aes.org and www.ocaalliance.com. Requirements Development environment Target platform PLC libraries to include Twin CAT v3.1.4022.2 or higher PC or CX (x64, x86, ARM) Tc3_AES70 7.1.3.2.6.1 Get Setting / Set Setting / RNtf Setting Get Setting The Get Setting method is used to query the Boolean property of the OCA object. If the query was successful, the result is output in the property st Setting. Cyclic method call Since several PLC cycles may pass between sending and the response from the device, this method should be executed cyclically. Syntax VAR_INPUT p Link : POINTER TO ST_Link; b Execute : BOOL; END_VAR 42 Version: 1.3 TF8810
## Page 43

PLC API Inputs Name Type Description p Link POINTER TO ST_Link Pointer for establishing a connection between OCA objects and the OCA device b Execute BOOL The method is executed with a positive edge at the b Execute input. Set Setting The Set Setting method can be used to set the muting feature of an OCA object. If the method was executed successfully, the result is output in the property st Mute State. Cyclic method call Since several PLC cycles may pass between sending and the response from the device, this method should be executed cyclically. Syntax VAR_INPUT p Link : POINTER TO ST_Link; b Execute : BOOL; b Setting : BOOL; e Cmd Mode : E_Oca Message Type Cmd; END_VAR Inputs Name Type Description p Link POINTER TO ST_Link Pointer for establishing a connection between OCA objects and the OCA device. b Execute BOOL The method is executed with a positive edge at the b Execute input. b Setting BOOL Value to be assigned to the property of the OCA object. e Cmd Mode Oca Message Type Cmd Depending on whether confirmation is required or not, this input variable is set to E_Oca Message Type Cmd. Oca Cmd Rrq or E_Oca Message Type Cmd. Oca Cmd. RNtf Mute State If the OCA object was prompted to notify changes (using the Subscription [} 23] method), incoming notifications are read using the RNtf Setting method. Cyclic method call Since several PLC cycles may pass between sending and the response from the device, this method should be executed cyclically. TF8810 Version: 1.3 43
## Page 44

PLC API Syntax VAR_INPUT p Link : POINTER TO ST_Link; b Enable : BOOL; n Subscribtion No : UDINT; END_VAR Inputs Name Type Description p Link POINTER TO ST_Link Pointer for establishing a connection between OCA objects and the OCA device. b Execute BOOL The method is executed with a positive edge at the b Execute input. n Subscribtion No UDINT Unique number for localizing the respective subscription. 7.1.3.2.7 FB_Oca String Actuator The function block FB_Oca String Actuator extends the function block FB_Oca Basic Actuator with properties and methods for handling Oca String Actuator objects. No explicit call Since there is no code in the body of the function block, it should not be called explicitly. Instead, use the corresponding methods of the function block. Inheritance hierarchy FB_Oca Root FB_Oca Worker FB_Oca Actuator FB_Oca Basic Actuator FB_ Oca String Actuator Methods Name Definition loca- Description tion Get Value [} 45] Local This method is used to query a signed property (integer, signed data type, 32 bits). Set Value [} 45] Local This method can be used to set the value of the property. RNtf Value [} 45] Local This method reads incoming notifications Get Max Len [} 47] Local Use this method to query the maximum length of the string that the OCA object accepts. 44 Version: 1.3 TF8810
## Page 45

PLC API Properties Name Type Access Definition loca- Description tion st Setting ST_STRINGPro Get Local Contains the string perty [} 54] st Max Len ST_UINT16Pro Get Local Contains the maximum length of the string perty [} 54] AES70 standard The names of variables and function blocks have been adapted to the AES70 standard where possible. Information about this communication protocol can be found at www.aes.org and www.ocaalliance.com. Requirements Development environment Target platform PLC libraries to include Twin CAT v3.1.4022.2 or higher PC or CX (x64, x86, ARM) Tc3_AES70 7.1.3.2.7.1 Get Value / Set Value / RNtf Value Get Value The Get Value method is used to query the property of the OCA object. If the query was successful, the result is output in the property st Setting. Cyclic method call Since several PLC cycles may pass between sending and the response from the device, this method should be executed cyclically. Syntax VAR_INPUT p Link : POINTER TO ST_Link; b Execute : BOOL; END_VAR Inputs Name Type Description p Link POINTER TO ST_Link Pointer for establishing a connection between OCA objects and the OCA device b Execute BOOL The method is executed with a positive edge at the b Execute input. Set Value TF8810 Version: 1.3 45
## Page 46

PLC API The Set Value method can be used to set the property of an OCA object. If the method was executed successfully, the result is output in the property st Setting. Cyclic method call Since several PLC cycles may pass between sending and the response from the device, this method should be executed cyclically. Syntax VAR_INPUT p Link : POINTER TO ST_Link; b Execute : BOOL; s Value : STRING; e Cmd Mode : E_Oca Message Type Cmd; END_VAR Inputs Name Type Description p Link POINTER TO ST_Link Pointer for establishing a connection between OCA objects and the OCA device. b Execute BOOL The method is executed with a positive edge at the b Execute input. n Setting UDINT Value to be assigned to the property of the OCA object. e Cmd Mode Oca Message Type Cmd Depending on whether confirmation is required or not, this input variable is set to E_Oca Message Type Cmd. Oca Cmd Rrq or E_Oca Message Type Cmd. Oca Cmd. RNtf Value If the OCA object was prompted to notify changes (using the Subscription [} 23] method), incoming notifications are read using the RNtf Value method. Cyclic method call Since several PLC cycles may pass between sending and the response from the device, this method should be executed cyclically. Syntax VAR_INPUT p Link : POINTER TO ST_Link; b Enable : BOOL; n Subscribtion No : UDINT; END_VAR Inputs Name Type Description p Link POINTER TO ST_Link Pointer for establishing a connection between OCA objects and the OCA device. b Execute BOOL The method is executed with a positive edge at the b Execute input. n Subscribtion No UDINT Unique number for localizing the respective subscription. 46 Version: 1.3 TF8810
## Page 47

PLC API 7.1.3.2.7.2 Get Max Len The Get Max Len method is used to query the maximum accepted length of the string of the OCA object (Oca String Actuator). If the query was successful, the result is output in the property st Max Len. Cyclic method call Since several PLC cycles may pass between sending and the response from the device, this method should be executed cyclically. Syntax VAR_INPUT p Link : POINTER TO ST_Link; b Execute : BOOL; END_VAR Inputs Name Type Description p Link POINTER TO ST_Link Pointer for establishing a connection between OCA objects and the OCA device b Execute BOOL The method is executed with a positive edge at the b Execute input. 7.1.3.2.8 FB_Oca Int32Actuator The function block FB_Oca Int32Actuator extends the function block FB_Oca Basic Actuator with properties and methods for handling Oca Int32Actuator objects. No explicit call Since there is no code in the body of the function block, it should not be called explicitly. Instead, use the corresponding methods of the function block. Inheritance hierarchy FB_Oca Root FB_Oca Worker FB_Oca Actuator FB_Oca Basic Actuator FB_ Oca Int32Actuator TF8810 Version: 1.3 47
## Page 48

PLC API Methods Name Definition loca- Description tion Get Value [} 48] Local This method is used to query a signed property (integer, signed data type, 32 bits). Se Value [} 48] Local This method can be used to set the value of the property. RNtf Value [} 48] Local This method reads incoming notifications Properties Name Type Access Definition lo- Description cation st Setting ST_INT32Property Get Local Contains the value (integer, signed data type, 32 bit). [} 54] st Setting M ST_INT32Property Get Local Contains the maximum value (integer, signed AX data type, 32 bit). [} 54] st Setting MI ST_INT32Property Get Local Contains the minimum value (integer, signed N data type, 32 bit). [} 54] AES70 standard The names of variables and function blocks have been adapted to the AES70 standard where possible. Information about this communication protocol can be found at www.aes.org and www.ocaalliance.com. Requirements Development environment Target platform PLC libraries to include Twin CAT v3.1.4022.2 or higher PC or CX (x64, x86, ARM) Tc3_AES70 7.1.3.2.8.1 Get Value / Set Value / RNtf Value Get Value The Get Value method is used to query the property of the OCA object. If the query was successful, the result is output in the properties t Setting, st Setting MAX and st Setting MIN. Cyclic method call Since several PLC cycles may pass between sending and the response from the device, this method should be executed cyclically. Syntax VAR_INPUT p Link : POINTER TO ST_Link; b Execute : BOOL; END_VAR 48 Version: 1.3 TF8810
## Page 49

PLC API Inputs Name Type Description p Link POINTER TO ST_Link Pointer for establishing a connection between OCA objects and the OCA device b Execute BOOL The method is executed with a positive edge at the b Execute input. Set Value The Set Value method can be used to set the property of an OCA object. If the method was executed successfully, the result is output in the property st Setting. Cyclic method call Since several PLC cycles may pass between sending and the response from the device, this method should be executed cyclically. Syntax VAR_INPUT p Link : POINTER TO ST_Link; b Execute : BOOL; n Setting : UDINT; e Cmd Mode : E_Oca Message Type Cmd; END_VAR Inputs Name Type Description p Link POINTER TO ST_Link Pointer for establishing a connection between OCA objects and the OCA device. b Execute BOOL The method is executed with a positive edge at the b Execute input. n Setting UDINT Value to be assigned to the property of the OCA object. e Cmd Mode Oca Message Type Cmd Depending on whether confirmation is required or not, this input variable is set to E_Oca Message Type Cmd. Oca Cmd Rrq or E_Oca Message Type Cmd. Oca Cmd. RNtf Value If the OCA object is prompted to notify changes (using the Subscription [} 23] method), incoming notifications are read using the Rntf Value method. Cyclic method call Since several PLC cycles may pass between sending and the response from the device, this method should be executed cyclically. TF8810 Version: 1.3 49
## Page 50

PLC API Syntax VAR_INPUT p Link : POINTER TO ST_Link; b Enable : BOOL; n Subscribtion No : UDINT; END_VAR Inputs Name Type Description p Link POINTER TO ST_Link Pointer for establishing a connection between OCA objects and the OCA device. b Execute BOOL The method is executed with a positive edge at the b Execute input. n Subscribtion No UDINT Unique number for localizing the respective subscription. 7.1.3.3 Sensor function blocks Sensors enable querying of different parameters. AES70 standard The names of variables and function blocks have been adapted to the AES70 standard where possible. Information about this communication protocol can be found at www.aes.org and www.ocaalliance.com. 7.1.3.3.1 FB_Oca Sensor The function block FB_Oca Sensor extends the function block FB_Oca Worker. It is the function block from which all function blocks that are assigned to the Sensor category inherit. No explicit call Since there is no code in the body of the function block, it should not be called explicitly. Instead, use the corresponding methods of the function block. Inheritance hierarchy FB_Oca Root FB_Oca Worker FB_Oca Sensor Methods Name Definition loca- Description tion Get Reading State Local You can use this method to query whether the value that was read is valid or not. [} 51] If the query was successful, the result is output in the property st Reading State. 50 Version: 1.3 TF8810
## Page 51

PLC API Properties Name Type Access Definition lo- Description cation st Reading St ST_Sensor Readi Get Local Indicates whether the queried value is valid or not. ate ng Statey [} 54] Requirements Development environment Target platform PLC libraries to include Twin CAT v3.1.4022.2 or higher PC or CX (x64, x86, ARM) Tc3_AES70 7.1.3.3.1.1 Get Reading State The Get Reading State method is used to query the Reading State property of the OCA object. If the query was successful, the result is output in the property st Reading State. Cyclic method call Since several PLC cycles may pass between sending and the response from the device, this method should be executed cyclically. Inputs Name Type Description p Link POINTER TO ST_Link Pointer for establishing a connection between OCA objects and the OCA device b Execute BOOL The method is executed with a positive edge at the b Execute input. 7.1.3.3.2 FB_Oca Temperature Sensor The function block FB_Oca Temperature Sensor provides properties and methods for querying OCA objects that map a temperature value. No explicit call Since there is no code in the body of the function block, it should not be called explicitly. Instead, use the corresponding methods of the function block. Inheritance hierarchy FB_Oca Root FB_Oca Worker FB_Oca Sensor FB_Oca Temperature Sensor TF8810 Version: 1.3 51
## Page 52

PLC API Methods Name Definition loca- Description tion Get Reading Local Used to query the properties Reading, min Reading and max Reading of the OCA object. If the query was successful, the result is output in the properties st Reading, st Reading MAX and st Reading MIN. RNtf Gain Local If the OCA object was prompted to notify changes (using the Subscription [} 23] method), this method is used to read incoming notifications. AES70 standard The names of variables and function blocks have been adapted to the AES70 standard where possible. Information about this communication protocol can be found at www.aes.org and www.ocaalliance.com. Requirements Development environment Target platform PLC libraries to include Twin CAT v3.1.4022.2 or higher PC or CX (x64, x86, ARM) Tc3_AES70 7.1.3.3.2.1 Get Reading / Rntf Reading Get Reading The Get Reading method is used to query the property of the OCA object. If the query was successful, the result is output in the properties st Reading, st Reading MAX and st Reading MIN Cyclic method call Since several PLC cycles may pass between sending and the response from the device, this method should be executed cyclically. Inputs Name Type Description p Link POINTER TO ST_Link Pointer for establishing a connection between OCA objects and the OCA device b Execute BOOL The method is executed with a positive edge at the b Execute input. Rntf Reading If the OCA object was prompted to notify changes (using the Subscription [} 23] method), incoming notifications are read using the RNtf Reading method. 52 Version: 1.3 TF8810
## Page 53

PLC API Cyclic method call Since several PLC cycles may pass between sending and the response from the device, this method should be executed cyclically. Inputs Name Type Description p Link POINTER TO ST_Link Pointer for establishing a connection between OCA objects and the OCA device. b Execute BOOL The method is executed with a positive edge at the b Execute input. n Subscribtion No UDINT Unique number for localizing the respective subscription. 7.1.3.3.3 FB_Oca Basic Sensor The function block FB_Oca Basic Sensor extends the function block FB_Oca Sensor [} 50]. It is the function block from which all function blocks that are assigned to the Basic Sensor category inherit. FB_Oca Basic Sensor has neither properties nor methods. Inheritance hierarchy FB_Oca Root FB_Oca Worker FB_Oca Sensor FB_Oca Basic Sensor Requirements Development environment Target platform PLC libraries to include Twin CAT v3.1.4022.2 or higher PC or CX (x64, x86, ARM) Tc3_AES70 7.1.3.3.4 FB_Oca Boolean Sensor In terms of functionality, the function block FB_Oca Boolean Sensor is similar to the function block FB_Oca Boolean Actuator [} 41]. However, since sensors can only be read, there is no corresponding set method. Inheritance hierarchy FB_Oca Root FB_Oca Worker FB_Oca Sensor FB_Oca Basic Sensor FB_Oca Boolean Sensor TF8810 Version: 1.3 53
## Page 54

PLC API 7.1.3.3.5 FB_Oca String Sensor In terms of functionality, the function block FB_Oca Boolean Sensor is similar to the function block FB_Oca String Actuator [} 44]. However, since sensors can only be read, there is no corresponding set method. Inheritance hierarchy FB_Oca Root FB_Oca Worker FB_Oca Sensor FB_Oca Basic Sensor FB_Oca String Sensor 7.1.3.3.6 FB_Oca Int32Sensor In terms of functionality, the function block FB_Oca Boolean Sensor is similar to the function block FB_Oca Int32Actuator [} 47]. However, since sensors can only be read, there is no corresponding set method. Inheritance hierarchy FB_Oca Root FB_Oca Worker FB_Oca Sensor FB_Oca Basic Sensor FB_Oca Int32Sensor 7.2 Data types 7.2.1 Structures used to represent the properties of OCA objects ST_Oca Property All structures listed below inherit from this structure. TYPE ST_Oca Property : STRUCT e State: E_Oca Status := E_Oca Status. Undefined; s Prop String: STRING(5) := '00p00'; END_STRUCT END_TYPE See also: E_Oca Status [} 56] 54 Version: 1.3 TF8810
## Page 55

PLC API ST_Boolean Property TYPE ST_Boolean Property EXTENDS ST_Oca Property : STRUCT b Val: BOOL := FALSE; END_STRUCT END_TYPE ST_Class Id Property TYPE ST_Class Id Property EXTENDS ST_Oca Property : STRUCT n Val: ST_Oca Class Id; END_STRUCT END_TYPE ST_FLOAT32Property TYPE ST_FLOAT32Property EXTENDS ST_Oca Property: STRUCT f Val: REAL; END_STRUCT END_TYPE ST_INT16Property TYPE ST_INT16Property EXTENDS ST_Oca Property : STRUCT n Val: INT; END_STRUCT END_TYPE ST_INT32Property TYPE ST_INT32Property EXTENDS ST_Oca Property : STRUCT n Val: DINT; END_STRUCT END_TYPE ST_INT8Property TYPE ST_INT8Property EXTENDS ST_Oca Property : STRUCT n Val: BYTE; END_STRUCT END_TYPE ST_Mute State Property TYPE ST_Mute State Property EXTENDS ST_Oca Property : STRUCT e Val: E_Oca Mute State := E_Oca Mute State. Unmuted ; END_STRUCT END_TYPE See also: E_Oca Mute State [} 57] ST_Polarity State Property TYPE ST_Polarity State Property EXTENDS ST_Oca Property : STRUCT e Val: E_Oca Polarity State := E_Oca Polarity State. Non Inverted; END_STRUCT END_TYPE ST_Position Enabled Property TYPE ST_Position Enabled Property EXTENDS ST_Boolean Property: STRUCT n Index: UINT; END_STRUCT END_TYPE TF8810 Version: 1.3 55
## Page 56

PLC API ST_Position Name Property TYPE ST_Position Name Property EXTENDS ST_String Property : STRUCT n Index: UINT; END_STRUCT END_TYPE ST_Sensor Reading State TYPE ST_Sensor Reading State EXTENDS ST_Oca Property : STRUCT e Val: E_Oca Sensor Reading State := E_Oca Sensor Reading State.e Unknown; END_STRUCT END_TYPE ST_String Property TYPE ST_String Property EXTENDS ST_Oca Property : STRUCT st Val: ST_Oca String; END_STRUCT END_TYPE ST_Subscription Manager State TYPE ST_Subscription Manager State EXTENDS ST_Oca Property : STRUCT e Val: E_Oca Subscription Manager State; END_STRUCT END_TYPE ST_Temperature Property TYPE ST_Temperature Property EXTENDS ST_Oca Property:STRUCT st Val: ST_Oca Temperature; END_STRUCT END_TYPE See also: ST_Oca Temperature [} 57] ST_UINT16Property TYPE ST_UINT16Property EXTENDS ST_Oca Property : STRUCT n Val: UINT; END_STRUCT END_TYPE ST_UDINT32Property TYPE ST_UDINT32Property EXTENDS ST_Oca Property : STRUCT n Val: UDINT; END_STRUCT END_TYPE ST_UINT8Property TYPE ST_UINT8Property EXTENDS ST_Oca Property : STRUCT n Val: SINT; END_STRUCT END_TYPE 7.2.2 E_Oca Status The status code that identifies the result of the method invocation the response belongs to. E_Oca Status has a size of 1 byte. (*Status codes returned from method calls*) {attribute 'qualified_only'} TYPE E_Oca Status : ( Ok := 0, Protocol Version Error := 1, 56 Version: 1.3 TF8810
## Page 57

PLC API Device Error := 2, Locked := 3, Bad Format := 4, Bad ONo := 5, Parameter Error := 6, Parameter Out Of Range := 7, Not Implemented := 8, Invalid Request := 9, Processing Failed := 10, Bad Method := 11, Partially Succeeded := 12, Timeout := 13, Buffer Overflow := 14, Decoding Error := 20, Undefined := 21 )BYTE; END_TYPE 7.2.3 E_Oca Mute State {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Oca Mute State: ( Muted:= 1, Unmuted:=2 ); END_TYPE 7.2.4 ST_Oca Temperature TYPE ST_Oca Temperature : STRUCT f Degrees Celsius: REAL; //Value in Degrees Celsius END_STRUCT END_TYPE 7.2.5 ST_Oca Device Info Structure used to show informations about OCA devices. TYPE ST_Oca Device Info: STRUCT t Device Enabled Since: DATE_AND_TIME; t Client Connected Since: DATE_AND_TIME; //yet not used – for further extensions t Last Sent Msg: DATE_AND_TIME; t Last Received Msg: DATE_AND_TIME; a Sent Messages: ARRAY[E_Oca Message Type. Oca Cmd.. E_Oca Message Type. Oca Keep Alive] OF UDINT; a Received Messages: ARRAY[E_Oca Message Type. Oca Cmd.. E_Oca Message Type. Oca Keep Alive] OF UDINT; END_STRUCT END_TYPE 7.2.6 E_Oca Message Type Indicates the type of the message {attribute 'qualified_only'} TYPE E_Oca Message Type: ( Oca Cmd:= 0, // Command - no Response Required Oca Cmd Rrq:= 1, // Command - Response Required Oca Ntf:= 2, // Notification Oca Rsp:= 3, // Response (to a command or notification) Oca Keep Alive:= 4, // Keep-alive message used for device supervision. Idle:=7 )BYTE; END_TYPE TF8810 Version: 1.3 57
## Page 58

Examples 8 Examples 8.1 Example for using the function block FB_Oca Device The example shows how to handle and parameterize the function block FB_Oca Device. The function block FB_Oca Device forms the basis for the use of further function blocks that can be used to read and modify OCA objects of an OCA device. This example assumes that a device that supports the AES70 standard is connected. Download: https://infosys.beckhoff.com/content/1033/tf8810_tc3_aes70/Resources/4223793163/.zip 8.2 Example for using the function block FB_Oca Root The example shows how the function block FB_Oca Root can be used. The function block FB_Oca Root provides basic functionalities and passes these on to all function blocks of the library that are used to read and modify OCA objects such as FB_Oca Mute, FB_Oca Switch etc. 58 Version: 1.3 TF8810
## Page 59

Examples This example assumes that a device that supports the AES70 standard is connected. Download: https://infosys.beckhoff.com/content/1033/tf8810_tc3_aes70/Resources/4223020171/.zip 8.3 Example for using the function block FB_Oca Worker The example shows how the function block FB_Oca Worker can be used. This example assumes that a device that supports the AES70 standard is connected. TF8810 Version: 1.3 59
## Page 60

Examples Download: https://infosys.beckhoff.com/content/1033/tf8810_tc3_aes70/Resources/4223021835/.zip 8.4 Example for using the function block FB_Oca Gain The example shows how to handle and parameterize the function block FB_Oca Gain. Methods and properties that are inherited from FB_Oca Worker and therefore also from FB_Oca Root are also used. This example assumes that a device that supports the AES70 standard is connected. Download: https://infosys.beckhoff.com/content/1033/tf8810_tc3_aes70/Resources/4223791499/.zip 60 Version: 1.3 TF8810
## Page 61

Support and Service 9 Support and Service Beckhoff and their partners around the world offer comprehensive support and service, making available fast and competent assistance with all questions related to Beckhoff products and system solutions. Download finder Our download finder contains all the files that we offer you for downloading. You will find application reports, technical documentation, technical drawings, configuration files and much more. The downloads are available in various formats. Beckhoff's branch offices and representatives Please contact your Beckhoff branch office or representative for local support and service on Beckhoff products! The addresses of Beckhoff's branch offices and representatives round the world can be found on our internet page: www.beckhoff.com You will also find further documentation for Beckhoff components there. Beckhoff Support Support offers you comprehensive technical assistance, helping you not only with the application of individual Beckhoff products, but also with other, wide-ranging services: • support • design, programming and commissioning of complex automation systems • and extensive training program for Beckhoff system components Hotline: +49 5246 963-157 e-mail: support@beckhoff.com Beckhoff Service The Beckhoff Service Center supports you in all matters of after-sales service: • on-site service • repair service • spare parts service • hotline service Hotline: +49 5246 963-460 e-mail: service@beckhoff.com Beckhoff Headquarters Beckhoff Automation Gmb H & Co. KG Huelshorstweg 20 33415 Verl Germany Phone: +49 5246 963-0 e-mail: info@beckhoff.com web: www.beckhoff.com TF8810 Version: 1.3 61
## Page 63

More Information: www.beckhoff.com/tf8810 Beckhoff Automation Gmb H & Co. KG Hülshorstweg 20 33415 Verl Germany Phone: +49 5246 9630 info@beckhoff.com www.beckhoff.com
