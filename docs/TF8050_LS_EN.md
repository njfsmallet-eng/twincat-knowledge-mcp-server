---
title: "TF8050 Twin CAT 3"
product: "TF8050"
category: "Building_Automation"
tags: ["CAT", "TWIN"]
language: "EN"
document_type: "Manual"
version: "2.0.0.9"
source_pdf: "https://download.beckhoff.com/download/Document/automation/twincat3/TF8050_LS_EN.pdf"
release_date: "2025-09-01"
---
Manual | EN TF8050 Twin CAT 3 | LS Lighting Solution 2025-09-01 | Version: 2.0.0.9
## Page 3

Table of contents Table of contents 1 Foreword.................................................................................................................................................... 5 1.1 Notes on the documentation............................................................................................................. 5 1.2 For your safety.................................................................................................................................. 5 1.3 Notes on information security............................................................................................................ 7 2 Technical data........................................................................................................................................... 8 3 Functional description.............................................................................................................................. 9 3.1 Web visualization.............................................................................................................................. 9 3.2 Navigation....................................................................................................................................... 10 3.3 Touch control.................................................................................................................................. 11 3.4 Scene settings................................................................................................................................. 12 3.5 Groups............................................................................................................................................ 14 3.5.1 "Groups" submenu........................................................................................................... 15 3.6 IO configuration............................................................................................................................... 20 3.6.1 Switches table.................................................................................................................. 20 3.6.2 Circuits table.................................................................................................................... 24 3.6.3 Logics table...................................................................................................................... 26 3.7 Lamps............................................................................................................................................. 33 3.7.1 "Lamps" table................................................................................................................... 33 3.8 Sensors........................................................................................................................................... 37 3.8.1 Sensors table................................................................................................................... 37 3.9 Schedules....................................................................................................................................... 43 3.9.1 "Schedules" submenu...................................................................................................... 43 3.10 Human Centric Lighting (HCL)........................................................................................................ 47 3.11 Energy............................................................................................................................................. 49 3.11.1 Measurement................................................................................................................... 49 3.11.2 History.............................................................................................................................. 50 3.11.3 Optimization..................................................................................................................... 53 3.12 Addressing...................................................................................................................................... 56 3.12.1 Addressing lamps............................................................................................................. 56 3.12.2 Addressing sensors.......................................................................................................... 57 3.13 Construction.................................................................................................................................... 59 3.13.1 Addressing....................................................................................................................... 59 3.13.2 Manual Mode................................................................................................................... 60 3.14 Settings........................................................................................................................................... 61 3.14.1 Light................................................................................................................................. 61 3.14.2 Templates........................................................................................................................ 64 3.14.3 System............................................................................................................................. 66 3.15 Error messages............................................................................................................................... 72 3.15.1 Warnings.......................................................................................................................... 73 3.16 User................................................................................................................................................. 76 3.17 Configuration assistant.................................................................................................................... 77 3.18 Tips for initial construction............................................................................................................... 83 4 Excel configuration................................................................................................................................. 84 TF8050 Version: 2.0.0.9 3
## Page 4

Table of contents 5 Setting up the visualization.................................................................................................................... 92 6 Programming........................................................................................................................................... 95 6.1 BA_LS............................................................................................................................................. 99 6.2 BA_LS_Dali_Communication.......................................................................................................... 99 7 Examples............................................................................................................................................... 100 7.1 Groups.......................................................................................................................................... 100 7.2 Area............................................................................................................................................... 101 8 Appendix................................................................................................................................................ 106 8.1 Support and Service...................................................................................................................... 106 4 Version: 2.0.0.9 TF8050
## Page 5

Foreword 1 Foreword 1.1 Notes on the documentation This description is intended exclusively for trained specialists in control and automation technology who are familiar with the applicable national standards. The documentation and the following notes and explanations must be complied with when installing and commissioning the components. The trained specialists must always use the current valid documentation. The trained specialists must ensure that the application and use of the products described is in line with all safety requirements, including all relevant laws, regulations, guidelines, and standards. Disclaimer The documentation has been compiled with care. The products described are, however, constantly under development. We reserve the right to revise and change the documentation at any time and without notice. Claims to modify products that have already been supplied may not be made on the basis of the data, diagrams, and descriptions in this documentation. Trademarks Beckhoff®, ATRO® , Ether CAT®, Ether CAT G®, Ether CAT G10®, Ether CAT P®, MX-System®, Safety over Ether CAT®, TC/BSD®, Twin CAT®, Twin CAT/BSD®, Twin SAFE®, XFC®, XPlanar®, and XTS® are registered and licensed trademarks of Beckhoff Automation Gmb H. If third parties make use of the designations or trademarks contained in this publication for their own purposes, this could infringe upon the rights of the owners of the said designations. Ether CAT® is a registered trademark and patented technology, licensed by Beckhoff Automation Gmb H, Germany. Copyright © Beckhoff Automation Gmb H & Co. KG, Germany. The distribution and reproduction of this document, as well as the use and communication of its contents without express authorization, are prohibited. Offenders will be held liable for the payment of damages. All rights reserved in the event that a patent, utility model, or design are registered. Third-party trademarks Trademarks of third parties may be used in this documentation. You can find the trademark notices here: https://www.beckhoff.com/trademarks. 1.2 For your safety Safety regulations Read the following explanations for your safety. Always observe and follow product-specific safety instructions, which you may find at the appropriate places in this document. Exclusion of liability All the components are supplied in particular hardware and software configurations which are appropriate for the application. Modifications to hardware or software configurations other than those described in the documentation are not permitted, and nullify the liability of Beckhoff Automation Gmb H & Co. KG. TF8050 Version: 2.0.0.9 5
## Page 6

Foreword Personnel qualification This description is only intended for trained specialists in control, automation, and drive technology who are familiar with the applicable national standards. Signal words The signal words used in the documentation are classified below. In order to prevent injury and damage to persons and property, read and follow the safety and warning notices. Personal injury warnings DANGER Hazard with high risk of death or serious injury. WARNING Hazard with medium risk of death or serious injury. CAUTION There is a low-risk hazard that could result in medium or minor injury. Warning of damage to property or environment NOTICE The environment, equipment, or data may be damaged. Information on handling the product This information includes, for example: recommendations for action, assistance or further information on the product. 6 Version: 2.0.0.9 TF8050
## Page 7

Foreword 1.3 Notes on information security The products of Beckhoff Automation Gmb H & Co. KG (Beckhoff), insofar as they can be accessed online, are equipped with security functions that support the secure operation of plants, systems, machines and networks. Despite the security functions, the creation, implementation and constant updating of a holistic security concept for the operation are necessary to protect the respective plant, system, machine and networks against cyber threats. The products sold by Beckhoff are only part of the overall security concept. The customer is responsible for preventing unauthorized access by third parties to its equipment, systems, machines and networks. The latter should be connected to the corporate network or the Internet only if appropriate protective measures have been set up. In addition, the recommendations from Beckhoff regarding appropriate protective measures should be observed. Further information regarding information security and industrial security can be found in our https://www.beckhoff.com/secguide. Beckhoff products and solutions undergo continuous further development. This also applies to security functions. In light of this continuous further development, Beckhoff expressly recommends that the products are kept up to date at all times and that updates are installed for the products once they have been made available. Using outdated or unsupported product versions can increase the risk of cyber threats. To stay informed about information security for Beckhoff products, subscribe to the RSS feed at https:// www.beckhoff.com/secinfo. TF8050 Version: 2.0.0.9 7
## Page 8

Technical data 2 Technical data Hardware The TF8050 Lighting Solution offers virtually unlimited possibilities in terms of the number of DALI-2 lines or the number of bus couplers installed in different sub-distributions. The performance can be heavily utilized depending on the size of a system. Therefore, attention should be paid to the following recommendations when selecting the controllers: • Panel PC ◦ DALI lines: 1 – 12: CP6606 ◦ DALI lines: 1 – 18: CP6706 ◦ DALI lines: 1 - 35: CP6706 4 cores • DIN rail controller ◦ DALI lines: 1 – 12: CX9020 ◦ DALI lines: 1 – 18: CX5120 ◦ DALI lines: 1 – 35: CX5140 Software • Twin CAT 3 • Target, web visualization (HMTL 5) • Unlimited number of DALI lines ◦ Maximum 63 sensors/push button couplers per line ◦ Max. 63 lamps per line • 250 groups • 10 areas • 60 scenes • 50 circuits • 50 schedules • 150 switches/push buttons • 20 logic modules NOTICE Losses in performance We strongly recommend that you plan for a maximum of 50 lamps per line. In practice there may be losses in performance if there are too many devices on the bus. Adaptation of old tables The Lighting Solution is a product that continuously adapts itself to the latest technical requirements. For example, a new version may contain functions of the latest sensors that didn't exist before. These new items may mean that old tables (see Excel configuration [} 84]) can no longer be read one-to-one and need to be adjusted accordingly. 8 Version: 2.0.0.9 TF8050
## Page 9

Functional description 3 Functional description The LS light controller offers a complete package for the control and programming of the lighting system. The range of functions extends from the addressing of the individual devices to the formation of virtual cross- line groups in the Dali-2 system and from the integration of circuits to the display and maintenance of all devices. The configuration and addressing can take place completely and flexibly via the visualization. The fast parameterization and allocation of all devices can be done with the help of simple Excel spreadsheets. All parameters can always be changed during operation. Sensors, push buttons or schedules can be integrated for controlling the lighting. The lamps, circuits, sensors, push buttons and schedules can be assigned to individual or several groups or scenes as required. Each of these groups can operate with a daylight-dependent control or with an adjustable light value control. In addition, the operation mode (circuit, semi/fully automatic, etc.) can be selected for each group. If sensors are used, the light is switched off on expiry of the 1st overrun time (OT1). With a 2nd overrun time (OT2) –if desired– the lighting can initially be ramped down to a basic value until it is switched off on expiry of this time. Individual scenes can be created and saved across all groups. Each group can be assigned an area, which can be activated via a push button or schedule. The light can only be switched on via a sensor if the area is activated. Pass-through or night watchman circuits, for example, are thus easy to insert at any time with the help of the flexible group logics. In manual operation mode, all Dali lines are addressed simultaneously by broadcast. This mode is important, especially prior to the initial commissioning, so that the electricians can check and test their DALI wiring. If the individual lamps do not react here, this means that there is a defect in the control gear, the lamp or the cabling. Furthermore there is a maintenance mode for each individual lamp as well as each group in order to specifically override and test them. Defective control gears and sensors can be replaced or added during operation. All settings, parameters, etc. are generally password-protected. Users can be managed via the system's own user management. NOTICE Performance problems The system performance can be greatly reduced if an unnecessarily large number of devices and groups are marked as "enabled". Mark only devices that are used and available! The illustrations in the following chapters may differ slightly from the latest version. In the first column of each table you can open a dialog for changing the parameters. Changes are possible only when logged in. The light intensity with DALI is scaled logarithmically from 0 to 254. The following table is provided for orientation: Dali Light intensity 150 5% 180 15% 200 25% 220 40% 240 70% 250 95% 254 100% 3.1 Web visualization The web visualization is called via the following path; this is an example link, so you should adapt the IP to the corresponding device settings beforehand: TF8050 Version: 2.0.0.9 9
## Page 10

Functional description http://172.16.17.10/Tc3Plc Hmi Web/Port_851/Visu/webvisu.htm 3.2 Navigation The navigation differs in the user and configuration interface. When called, the user page is always started. Buttons, scenes and individual groups of scenes can be operated without a user login. The user can also see the current alarm states. The configuration interface is accessed via the gear. This usually requires a login. When activated, the Home button takes you back to your custom visualization. Navigation is generally divided into several levels. The top level corresponds to the buttons with corresponding symbols. The second level is highlighted with a gray horizontal band. Here you will find subitems or, for example, the selection of DALI lines. As a third navigation level, there is a menu on almost every page that can be opened by clicking on a table entry. This menu provides all the setting options for the item selected in the table. The submenu can be closed again using the "Close" button. However, while the menu is open, you can jump between rows of the table and scroll through them. 10 Version: 2.0.0.9 TF8050
## Page 11

Functional description 3.3 Touch control There are buttons that have been configured accordingly in the settings. The display can be activated and its appearance / position on the button side can be set for each button used. (1) Depending on the selection, up to four button pages are displayed, between which you can switch here. (2) Button configured: Feedback in blue. How the individual buttons are configured is explained in the "IO configuration [} 20]" chapter. (3) Button that enables/disables the editing mode. If it is active, the names of the button pages (1) can be changed with a click. TF8050 Version: 2.0.0.9 11
## Page 12

Functional description 3.4 Scene settings This page is only available if scene control has previously been activated in the settings. (1) Drop-down menu for selecting the scene to be edited. (2) The name of the scene can be edited here. (3) Buttons for "Scene Off", "Scene On" and "Save". (4) All groups activated in the scene are displayed here and can be controlled individually. (5) Button opens the table on the right, which shows all 250 possible groups. (6) Scene functions: Dim Enables the entire scene to be dimmed by holding down a button. Turn off Enables the scene - if active - to be turned off. This function should be disabled to prevent accidental double pressing. To turn off, another scene can be stored with 0 as values. Switch off first If only one lighting group of this scene has a value greater than 0, the scene is first switched off when a button is pressed. If a direct transition from one scene to the next is desired, this function should be disabled. Activate scene Activates the scene. Inactive scenes are ignored and are invisible in the display. Reset Manual Mode When a scene is activated, the groups are set to manual mode. If this function is activated, manual mode is automatically reset when the scene is switched off. (Back to automatic mode) (7) The respective group for the selected scene can be activated here. (8) Display of the number of scenes in which the respective group is already activated. (9) Display of the number of lights controlled by the respective group. 12 Version: 2.0.0.9 TF8050
## Page 13

Functional description (10) A new page for controlling the groups is displayed for every 14 activated groups. If there is more than one page, you can navigate between them here. TF8050 Version: 2.0.0.9 13
## Page 14

Functional description 3.5 Groups All groups are displayed simultaneously in one table. 250 groups are possible. Each group can additionally be assigned to one of 10 areas. Area assignments are helpful when certain groups are to be disabled, as long as they are not enabled via buttons or schedules. Table The most important parameters of the groups are displayed in the table. Only activated functions are displayed in a white cell, all inactive cells are hidden. This makes it possible to see at a glance whether a schedule or a button is linked to the group, for example. The explanation of the individual columns can be found in the table below. (1) Group name (2) An icon of the selected group template is displayed here. If no icon is displayed, the group has individual settings. See chapter "Templates". (3) Display in red if the service mode is active. This overrides all other group commands. In this mode a group can be switched on or off and dimmed via a slider. For test purposes or for overriding in case of error (e.g. sensor no longer triggers). (4) Display of the current group presence in green. At least one sensor in the group detects a person. (5) Feedback when the group is in the 1st delay time. (6) Feedback when the group is in the 2nd delay time. (7) Feedback when the group is in manual mode or is switched on by a button. (8) Feedback when the group is switched on by a schedule. (9) Feedback if the group is overridden by a scene. (10) Feedback when the group is controlled by the "n Group_Extern Value[x]" or slave mode. 14 Version: 2.0.0.9 TF8050
## Page 15

Functional description (11) Display in green if the control value/setpoint is influenced by the HCL curve. In the HCL settings, different dimming settings can be selected for different times of day to influence the luminous intensity. This function can be enabled here. Not recommended in the case of groups without HCL. (12) Feedback when the set area is active. (13) Display of the current percentage light value that is transferred to the lamps. The value is highlighted in yellow when illumination is switched on. If the group is switched off by the set control parameters (bright enough), the value 0% is displayed and still highlighted in yellow. (14) The control value switches the light to this value as long as the group is directly requested. (15) The base value is enabled via the 2nd delay time or via the slave mode. (16) The setpoint specifies a value that the "Curr. brightness" should reach and maintain. The lamp value regulates itself to maintain the brightness. (17) The current brightness is formed from the mean value of all the sensors in the group. Similar to the setpoint, this value is unitless and cannot be compared directly with illuminance in lux. 3.5.1 "Groups" submenu The submenu can be opened by clicking on the group name in the table. The selected group is highlighted in blue in the table. All settings for the respective group can be adjusted in the menu that opens. The following chapter describes each of the available submenus. General: (1) The displayed name can be edited here. (2) Activate group. Only activated groups are processed by the program. (3) The selected group type specifies most of the parameters via the corresponding template and locks them. Locked parameters are displayed in gray. If no template is to be used, the "Individual" type must be selected here. TF8050 Version: 2.0.0.9 15
## Page 16

Functional description (4) Light mode Fixed Control The Fixed Control directly accepts the control value. Daylight Control The Daylight Control changes the lamp value in relation to the difference between the actual value and the setpoint. Daylight Control parameters can be changed in the settings. Global light control 1-5 The group adjusts to a fixed value that is set via a global control curve. "Global light control 1" refers accordingly to the first control curve. The curves can be set in the settings under "Light" -> "Global light control". See chapter "Global light control [} 63]". (5) Control mode Sensor / button / schedule Switch-on takes place by sensor, button or schedule. The status remains unchanged as long as a component is active. Sensor + (button / Switch-on only takes place if the activation has taken place via the button or a schedule) schedule and the sensor is also triggered. Daylight Control Always active in the "Daylight Control" mode. Activated via button/schedule in the "Fixed Control" mode. Presence always triggers. Useful with an area activation if only a light sensor without presence is available. Full Automatic The light switches on and off automatically via the sensor. If the light is operated or dimmed manually with the push button, the manual mode is retained until the delay time without presence has elapsed. Schedules have no effect. Semi-automatic The light is switched on via the push button. The sensor only switches off automatically. If the light is operated or dimmed manually with the push button, the manual mode is retained until the delay time without presence has elapsed. Schedules have no effect. Manual button The light is switched on and off via the push button. Schedules have no effect. In Daylight Control mode the Daylight Control can be enabled/disabled via the push button. Manual button with delay The light is switched on and off via the push button. In addition, switching-off time takes place on expiry of delay time 1. Schedules have no effect. In Daylight Control mode the Daylight Control can be enabled/disabled via the push button. (6) If this function is activated, the parameters are not affected by global changes. (7) The HCL dimming position can be activated here (8) If this function is activated, the group is ignored in the event of a central off command. 16 Version: 2.0.0.9 TF8050
## Page 17

Functional description Configuration: (1) Setting the 1st delay time in minutes and seconds. The current delay time is displayed in the right-hand field if it is currently expiring. (2) Setting the 2nd delay time in minutes and seconds. The current delay time is displayed in the right-hand field if it is currently expiring. (3) Activation of the automatic delay time optimization. See chapter "Optimization". (4) Only displayed if (3) is disabled. If there is a proposal for a new delay time, this can be accepted with the "Set" button. (5) Activation of an automatic start value adjustment for light control. If the function is activated, data is collected during normal operation. If sufficient values are available, a new start value is calculated and applied according to the brightness that is present when the group is switched on. If the function is disabled or too little data is available, the group is switched on with a defined start value (e.g. 90%). This function is only available in normal operation. (6) The actual value and setpoint of the light control can be read or entered. Click on "Set" to define the current brightness value as the setpoint. (7) These parameters can be used to limit the light control to a minimum / maximum. (8) Enter the control value. (9) Enter the base value. (10) Enter the area. Slave Groups: Up to 8 master groups can be entered here. If one of the master groups is active, the slave group with the base value is also switched on. TF8050 Version: 2.0.0.9 17
## Page 18

Functional description Statistics: (5) The bar chart shows the switching times of the group in the respective hour. The current week is shown in blue and the comparison week selected under (7) is shown in green. The bars are divided into four colors, each representing Presence (1), Overrun 1 (2), Overrun 2 (3) and Switches operation. In each case, the percentage of activation is given as an average. The area highlighted in yellow corresponds to the set operating time. (6) Selection of the day of the week displayed (7) Selection of comparison week shown in green 18 Version: 2.0.0.9 TF8050
## Page 19

Functional description Info: The number of linked devices or functions is displayed here. This page provides quick orientation, which can be particularly useful when changing the system. Test: Here, the group can be set to manual/service mode and dimmed using a slider. TF8050 Version: 2.0.0.9 19
## Page 20

Functional description 3.6 IO configuration The following chapter explains the tables and submenus of the switches, circuits and logic in more detail. 3.6.1 Switches table The most important switch parameters are displayed in the table. Only activated functions are displayed in a white cell, all inactive cells are hidden. Cells are highlighted in green if the set group / scene etc. provides feedback. 3.6.1.1 "Switches" submenu The submenu can be opened by clicking on the name in the table. The selected row is highlighted in blue in the table. All settings for the respective switch can be edited in the menu that opens. 20 Version: 2.0.0.9 TF8050
## Page 21

Functional description General: (1) The displayed name can be edited here. (2) Activate switch. Only active switches are processed by the program. (3) Here you can select which type of switch is linked. You can choose between “Hardware Input,” “En Ocean®” or “KNX.” If Hardware Input is selected, the variable "GVL_LS_IO.b Switch[x]" is used. Additional parameters must be set for En Ocean®/KNX. (4) Only "En Ocean®" or "KNX": ID of the En Ocean® remote or KNX line. (5) Only "En Ocean®" or "KNX": En Ocean® Button ID or KNX group address (6) Only "En Ocean®" or "KNX": Feedback from the switch (7) Only "En Ocean®": Click on this button to activate or deactivate programming mode. The next time a button is pressed on the set remote, its ID is entered. Programming mode is then exited automatically. TF8050 Version: 2.0.0.9 21
## Page 22

Functional description Configuration: (1) Enter the groups to be switched. (2) Enter the scene to be switched. (3) Enter the area to be activated (4) A number of another button can be entered here. If this is the case, the selected one behaves like the one specified here. (5) Either a "Central off" function or a "Manual mode reset" can be activated in the drop-down menu. The Central off function applies globally to all groups and switches them off. Resetting the "Manual mode" resets the groups specified under (1) to automatic mode. 22 Version: 2.0.0.9 TF8050
## Page 23

Functional description Start page: Here you can select whether and how a button is displayed on the start page. (1) Selection of an icon. The selected icon is displayed in the button table and, depending on the style, on the button. (2) Selection of display. If "X" is selected (default), the button is not displayed. (3) Selection of the start page. There are up to 4 possible pages. (4) Selection of the button position. The possible positions are shown here in a grid and offer a preview of the start page. Clicking on one of the boxes displays the selected button at the corresponding position. TF8050 Version: 2.0.0.9 23
## Page 24

Functional description 3.6.2 Circuits table All circuits are shown in a table. Up to 50 circuits can be integrated (these correspond to the physical outputs "GVL_LS_IO.b Circuit[x]"). The voltage switched by the respective output is irrelevant (e.g. 24 V, 230 V, etc.). The output is switched as soon as one of the four groups is active. The group value is output simultaneously as a percentage, analog value and DMX value. This allows dimmer terminals (KL2751, KL2761 or 0-10V analog output terminals) to be integrated directly, as well as DMX terminals (EL6851) via further programming. 3.6.2.1 "Circuits" submenu The submenu can be opened by clicking on the name field in the table. The selected row is highlighted in blue in the table. All settings for the respective circuit can be adjusted in the menu that opens. 24 Version: 2.0.0.9 TF8050
## Page 25

Functional description (1) The displayed name can be edited here. (2) Activate circuit. Only active circuits are processed by the program. (3) Selection of the groups. 4 groups can be selected per circuit. (4) Service mode can be activated here to test the circuit. TF8050 Version: 2.0.0.9 25
## Page 26

Functional description 3.6.3 Logics table All of the 20 possible logics are displayed in a table. A general distinction is made between logic types. Only the parameters that are relevant for the selected type are displayed in the table. You can select either "Logic", "Threshold" or "Timer". These functions can be used to implement solutions for many special cases. However, these functions should only be configured by experienced users. 3.6.3.1 "Logics" submenu The submenu can be opened by clicking on the name in the table. The selected row is highlighted in blue in the table. All settings for the respective logic can be adjusted in the menu that opens. In the following section, a distinction is made between the different logic types for each page. 26 Version: 2.0.0.9 TF8050
## Page 27

Functional description General (Logic): (1) The displayed name can be edited here. (2) Activate logic. Only active logics are processed by the program. (3) The logic type can be selected here. You can select either "Logic", "Threshold" or "Timer". (4) Settings of the inputs: Up to 4 inputs can be selected. Depending on the type, the Number/Address and DALI line must be specified. TF8050 Version: 2.0.0.9 27
## Page 28

Functional description General (Threshold/Timer): (1) The displayed name can be edited here. (2) Activate logic. Only active logics are processed by the program. (3) The logic type can be selected here. You can select either "Logic", "Threshold" or "Timer". (4) Settings of the input: Either "External Value" (GVL_LS_IO.b In_Sensor_Brightness[x,y]), "Group" or "Sensor" can be selected. Depending on the selection, the other parameters must be specified accordingly. (5) "Threshold" only: Specification of a min. and max. value to scale the input value accordingly. (6) "Threshold" only: Display of the actual value 28 Version: 2.0.0.9 TF8050
## Page 29

Functional description Values (logic): A classic logic table is displayed (here for 3 activated inputs: I1-I3). (1) Inputs column (Input: "I1" - "I4") The upper elements provide blue feedback when the respective input is switched "On". (2) Output column (Output: "O") The upper element gives blue feedback when the output is switched "On" according to the logic. (3) All possible combinations of I1-I4 (if activated) are listed in the table. White means "Off", green means "On". (4) In the Output column, the target status of the output can be set in accordance with the input image (3) of the same row by clicking in the respective cell. White means "Off", green means "On". (5) The arrow jumps to the line that shows the actual status for orientation. TF8050 Version: 2.0.0.9 29
## Page 30

Functional description Values (Threshold): (1) Actual value display (2) Setting the threshold logic can be switched between ">" and "<" by clicking. (3) Specification of the threshold value (4) Time delay until the output is set. (5) Output display is highlighted in blue when it is active In the example shown, the actual value must be greater than the threshold for 10 seconds for the output to switch. 30 Version: 2.0.0.9 TF8050
## Page 31

Functional description Values (Timer): (1) Feedback of the input (2) A switch-on delay can be specified (0-3600 s). The input must be set for this duration so that the signal is switched through. (3) A switch-off delay can be specified (0-3600 s). The output is only switched off after the set time has elapsed. (4) Feedback of the output (5) Schematic representation of the set timer. TF8050 Version: 2.0.0.9 31
## Page 32

Functional description Outputs: Up to 4 outputs can be set up in parallel here. In each case, it is possible to either enable an area, switch a group directly or describe an external input. If group is selected, the specified group "x" is overridden by 100%. 32 Version: 2.0.0.9 TF8050
## Page 33

Functional description 3.7 Lamps All lamps are distributed to several lines. Each line has 0 to 63 lamps (at the same time the physical address). 3.7.1 "Lamps" table (1) Selection of the DALI line (2) Name of the lamp (3) Lamp type (see templates) (4) Service mode (red when active) (5) Setpoint of the lamp (highlighted in yellow when switched on or switched off by light control) (6) Groups assigned to the lamp (7) Status of the lamp ("OK" or error code) (8) Operating hours of the lamp 3.7.1.1 "Lamps" submenu The submenu can be opened by clicking on the name in the table. The selected row is highlighted in blue in the table. All settings for the respective lamp can be adjusted in the menu that opens. TF8050 Version: 2.0.0.9 33
## Page 34

Functional description General: (1) The displayed name can be edited here. (2) Activate lamp. Only active lamps are processed by the program. (3) Selection of a lamp template (see chapter "Templates [} 64]"). Click on the arrow to the right of the drop-down menu to jump directly to the selected template. (4) Click on Start to search for and address an unaddressed device. To avoid double addressing, the selected lamp must return an error, otherwise the button is disabled. If the number of addressed devices is 1 after the addressing process, then the process has worked, and the lamp is ready for operation: If more than one device has been addressed, the lamp must be assigned manually (see Addressing [} 56]) (5) Service mode can be activated to override a lamp. The lamp can be switched and dimmed using the buttons and the slider. (6) Reset the current operating hours 34 Version: 2.0.0.9 TF8050
## Page 35

Functional description Configuration: (1) A lamp can be assigned to up to 8 groups here. (2) "Standard", "Emergency lighting" or "Switch actuator" can be selected. Mainly used for orientation (implemented for later use). (3) The min. or max. level of the lamp can be adjusted here. The lamp only dims in the specified range, even if the group specifies a higher or lower value. (4) Rated power of the lamp. Important for correct energy calculation! (5) The actual power, which is calculated based on the rated power and dimming level. TF8050 Version: 2.0.0.9 35
## Page 36

Functional description Dali parameters: DALI parameters can be read from the ECGs or written to the ECGs here. The most important parameters can also be written globally to all lamps in the settings. (1) Name of the parameter (classic name in the DALI specification). (2) Raw value that has been read and is simultaneously the input field for writing. (3) The raw value of (2) is displayed in plain text in this column. (4) Buttons for reading or writing parameters. Writing the parameters requires the "Admin" user level. 36 Version: 2.0.0.9 TF8050
## Page 37

Functional description 3.8 Sensors The following chapter explains the table and submenus of the sensors in more detail. 3.8.1 Sensors table (1) Selection of the DALI line (2) Address of the sensor (3) Name of the sensor (4) Feedback on current presence (5) Current brightness value (6) Groups assigned to the sensor (presence and brightness only) (7) Scene that the sensor switches (8) Linked button couplers (B1-B8) (9) Status of the sensor (status text or DALI error code) 3.8.1.1 "Sensors" submenu The submenu can be opened by clicking on the name in the table. The selected row is highlighted in blue in the table. All settings for the respective sensor can be adjusted in the menu that opens. TF8050 Version: 2.0.0.9 37
## Page 38

Functional description General (DALI-2): (1) The displayed name can be edited here. (2) Activate sensor. Only active sensors are processed by the program. (3) You can select "Dali-2", "External Input" or "KNX" here. If External Input is selected, the corresponding variables must be written externally ("GVL_LS_IO.b In Sensor_Presence[x,y]" and ("GVL_LS_IO.n In Sensor_Brightness[x,y]"). (4) Auto-detection of the DALI-2 sensor can be activated here. If the function is activated, the GTIN number of the sensor is read and compared with an internal database. The read number is displayed and supplemented with a green check mark or a red "X". If the check mark is displayed, the device is included in the database and the sensor is ready for operation. If the device is not known ("X"), a similar device can be selected at (5) and (6). (5) Specification of the manufacturer of the sensor (6) Specification of the model name of the sensor (7) Click on Start to search for and address an unaddressed device. To avoid double addressing, the selected sensor must return an error, otherwise the button is disabled. If the number of addressed devices is 1 after addressing, then the process has worked, and the sensor is ready for operation: If more than one device has been addressed, the sensor must be assigned manually (see Addressing). 38 Version: 2.0.0.9 TF8050
## Page 39

Functional description General (KNX): (1) The displayed name can be edited here. (2) Activate sensor. Only active sensors are processed by the program. (3) You can select "Dali-2", "External Input" or "KNX" here. (here KNX) (4) Specification of the KNX line. (5) Specification of the KNX group address for presence (6) Feedback from the presence sensor (7) Specification of the KNX group address for brightness (8) Current brightness value of the sensor TF8050 Version: 2.0.0.9 39
## Page 40

Functional description Presence: (1) The presence and brightness evaluations can be disabled here. (2) The function that checks the sensor for possible errors can be disabled here. (see chapter Error analysis) (3) Factor for scaling the brightness value, can be set from 0.1 - 10. (4) Specification of 1-4 groups that the sensor switches (0 = no function). "Presence 2" is prepared for future sensors that can detect in two directions. (5) Specification of a scene that the sensor should switch (0 = no function) 40 Version: 2.0.0.9 TF8050
## Page 41

Functional description Buttons: If the selected sensor has button inputs, this menu item is displayed and each available input can be configured. The designations "B1"-"B8" are highlighted in green when the button is pressed. (1) Selection of the group to be switched ( 0 = no function) (2) Selection of scene to be switched ( 0 = no function) (3) Selection of the area to be switched ( 0 = no function) (4) Either a "Central off" function or a "Reset manual mode" can be activated in the drop-down menu. The Central off function applies globally to all groups and switches them off. Resetting the manual mode resets the group specified under (1) to automatic mode. TF8050 Version: 2.0.0.9 41
## Page 42

Functional description Statistics: (1) Bar chart showing the total presence time per hour. The set operating time is displayed in yellow on the time axis (see Settings [} 61]). Areas outside of operating hours are shown in gray. Blue bars show the data of the selected day of the last week. The settings for the comparison period (3) are shown in green. (2) Selection of a day of the week (always the current day on the right) (3) Selection of a past week for comparison Info: On the Info page, you can check which functions are supported by the sensor selected at General. 42 Version: 2.0.0.9 TF8050
## Page 43

Functional description 3.9 Schedules All schedules are shown in a table. You can assign up to 8 groups or an area to each schedule. Depending on the control mode in the respective groups, a schedule can activate the group for sensor detection or switch the light directly. 3.9.1 "Schedules" submenu The submenu can be opened by clicking on the name field in the table. The selected row is highlighted in blue in the table. In the menu that opens, you can adjust all settings for the respective schedule. TF8050 Version: 2.0.0.9 43
## Page 44

Functional description General: (1) The displayed name can be edited here. (2) Activate schedule. Only active schedules are processed by the program. (3) If this function is activated, the schedule is ignored on holidays. (4) Switch-on point (5) Switch-off point (6) Click on the symbol to switch from "Time" to "Dawn" or "Dusk" (astro function). The corresponding switching time (7) is then calculated daily using the set coordinates. (7) Switch-on/switch-off times can be specified here. If the astro function (6) is activated, the input fields are disabled. (8) Selection of weekdays on which the schedule is active 44 Version: 2.0.0.9 TF8050
## Page 45

Functional description Configuration: (1) Enter the groups to be switched. (2) Enter the scene to be switched. (3) Enter the area to be activated. (4) A number of another schedule can be specified here. If this is the case, the selected one behaves like the one specified here (can be used to switch more than 8 groups). Holiday Holidays can be activated globally on which the schedules are disabled. Common public holidays are predefined and can be activated. You can create your own individual entries in the right-hand section. Click on the date to open a calendar. TF8050 Version: 2.0.0.9 45
## Page 46

Functional description 46 Version: 2.0.0.9 TF8050
## Page 47

Functional description 3.10 Human Centric Lighting (HCL) The following functions must be activated in the settings under HCL. Up to 24 interpolation points are possible per day. Fixed times can be entered and in addition the calculated sunrise and sunset can be referred to for the color temperature adjustment. All interpolation points are driven to linearly in relation to the steps. The color temperature can be fixed via manual operation by means of a slider. The color temperature applies to all lamps (broadcast). The times for this are calculated on the basis of the date and the specified longitudes and latitudes (see Settings [} 61]). The currently set process, the current time and the calculated sun values are illustrated in the diagram. With regard to the possible times for sunrise and sunset, try to enter season-independent values if possible in order to avoid ups and downs of the color temperature. After closing the dialog box, the table sorts itself in chronological order. The dimming position changes the output value of a group proportionately – provided it has HCL dimming position activated. In the Fixed Control mode the control value is influenced and in the Daylight Control mode the setpoint is changed accordingly. According to current studies, Tunable White only becomes genuine Human Centric Lighting through the dimming position. The desired HCL effect is only made possible by the color temperature and the matching luminous intensity. TF8050 Version: 2.0.0.9 47
## Page 48

Functional description Time configuration dialog: (1) End time when the color value should be reached. This is at the same time the start point for the next interpolation point. Not required if sunrise or sunset is selected. (2) The color value may be set between 2700 and 6500 Kelvin. (3) Reduces/increases the control value/setpoint of all groups. Provided HCL dimming position is activated for each group. (4) Set the time to sunrise. (5) Set the time to sunset. (6) Determines the control time (after sunrise/before sunset) to the desired color temperature. Can be used to artificially prolong the effect. (7) Activate schedule. 48 Version: 2.0.0.9 TF8050
## Page 49

Functional description 3.11 Energy The following chapter describes the different aspects of energy data and optimization. A basic distinction is made between real energy measurements and a software-based energy calculation. 3.11.1 Measurement Up to 15 measurements can be activated. NOTICE Observe the correct current direction It is essential to observe the correct current direction of the transformer when connecting! (at the same time the physical input GVL_LS_IO. st In_KL3403[x] and GVL_LS_IO. st Out_KL3403[x]). The display contains live current and power values. The quarter-hourly average values over the last 24 hours are displayed in the dialog. The diagram display ranges from 0 to 50 k W. All quarter-hourly values and the total k Wh per day are backed up daily on the controller under "Active Energy k Wh.csv" and "Active Power k W.csv" in the Energy folder. The path for backing up the files and for further use and evaluation can be changed in the Settings parameter (see Programming). The files can be downloaded from the controller by FTP. TF8050 Version: 2.0.0.9 49
## Page 50

Functional description 3.11.1.1 Measurement submenu (1) The displayed name can be edited here. (2) Activate measurement. Only active measurements are processed by the program. (3) Depending on the upstream transformer, the correct ratio of primary current to secondary current must be specified here. Notice Be sure to observe the notes on use of the KL3403! (4) Diagram of current power 3.11.2 History Here, consumption is shown based on calculated data. For correct calculation, it is essential that all lamps have been set up accordingly and have the correct rated power (see Lamps [} 33] and Lamp templates [} 64]). The data is displayed in various forms. 50 Version: 2.0.0.9 TF8050
## Page 51

Functional description Day comparison: Shows the course of a selected day. A second day can be displayed in parallel as a comparison. (1) The displayed day can be selected here using the calendar. (2) If Comparison is activated, a second day can be selected here using the calendar. (3) Daily course of total consumption in quarter-hourly values Week comparison: Displays the total consumption of individual consecutive days. 28 days are displayed. TF8050 Version: 2.0.0.9 51
## Page 52

Functional description (1) A day can be selected using the calendar. The selected day is displayed on the far right of the diagram. Accordingly, the previous 27 days are displayed from right to left. Month comparison: The total consumption of the past months is shown here. (1) Use the arrow buttons to jump forwards or backwards in the time period. The single arrow jumps 2 months, the double arrow jumps 1 year (2) As in (1), the slider can be used to change the displayed time period 52 Version: 2.0.0.9 TF8050
## Page 53

Functional description Year comparison: The total consumption for up to 12 years is shown here 3.11.3 Optimization A table shows the average usage data of the individual groups and also deals with the automatic overrun time optimization. The automatic optimization uses an algorithm based on usage behavior to decide whether the set overrun time should be longer or can be set shorter. This function is always active and new suggestions for optimization are provided once a day. A change to the overrun time is set to ±10 s. You can decide for each group whether the suggestions are to be adopted automatically and whether the overrun time is to be changed directly. If no automatic system is active, each proposal must be accepted manually. TF8050 Version: 2.0.0.9 53
## Page 54

Functional description (1) The bar chart shows the average state of the respective group based on 24 hours. A different color indicates how long the group has been in "Presence", "Overrun time 1", Overrun time 2" or "External" (e.g. slave mode). This data can be used to decide whether, for example, the presence/overrun time ratio is correct or the overrun time is set too long. (2) This column displays the 1st overrun time in seconds. Green and red arrows show the trend of recent changes. (3) Display of the proposed overrun time change. (4) Display of the new overrun time. The proposal can be accepted by clicking on the green tick. A menu can be opened again for each group to view a "log" of the last changes, among other things. The times are viewed/changed or automatic optimization is activated under Overrun. 54 Version: 2.0.0.9 TF8050
## Page 55

Functional description TF8050 Version: 2.0.0.9 55
## Page 56

Functional description 3.12 Addressing In the Addressing tab, you can address the devices on the DALI lines or activate the Manual Mode. The selected DALI line is blocked for control and all connected devices are temporarily inactive. The state of the illumination freezes and the sensors do not provide any presences. During operation, it is recommended to first activate Manual Mode for individual areas to ensure that the lighting is switched on for safety's sake. In Manual Mode, all lamps on all lines are addressed via a broadcast command. You can set the lamps directly to their maximum or minimum value. Alternatively you can dim directly to a certain value using the slider. This mode is important, especially prior to the initial construction, so that the electricians can check and test their DALI wiring. If the individual lamps do not react here, this means that there is a defect in the ECG (electronic control gear), the lamp or the cabling. 3.12.1 Addressing lamps (1) Selection of whether lamps or sensors are to be addressed. Under Manual Mode, all or individual lines can be overridden. (2) Specification of the DALI line to be addressed. (3) Button to search for already addressed devices on the selected line. This updates the table (10). (4) Button for switching the view (see "Alternative view [} 58]"). (5) Button for changing the addresses according to the table. (6) Selection of visual feedback to identify the selected device. One of the following options can be selected: "Inactive": (no feedback) "Off/Max": (all lamps "Off", selected lamp "Max") "Min/Max": (all lamps "Min", selected lamp "Max") "Max/Min": (all lamps "Max", selected lamp "Min") In addition to the selection, you can select "Flashing" to make the selected lamp easier to recognize. 56 Version: 2.0.0.9 TF8050
## Page 57

Functional description (7) Input fields and button for changing a single address. This function does not provide any feedback and the table should be updated with (3) to check this. (8) Button for readdressing all connected lamps. All existing addresses will be deleted in the process. (9) Input field and button for addressing new lamps (unaddressed). In the input field, you can enter an address to start with. In the course of addressing, all lamps found (only new ones) are given free addresses (starting with the specified start address). If there are not enough free addresses, the process ends with an error message. (10) Table showing all the lamps found after a search run (3). The line selected here provides the visual feedback. The desired address per lamp can be entered under New address. Once the complete list has been adjusted as required, the readdressing process can be started with (5). If an address in the table is assigned twice, the process is aborted and a corresponding error message is displayed. (11) When the button is pressed, all devices found are activated/deactivated according to the list. This means that individual devices do not need to be activated later. Before use, check that all devices are found and displayed in the list. The button is only enabled if a search has been performed recently and no changes have been made since then. (12) Buttons and sliders for the Manual Mode of the selected DALI line. 3.12.2 Addressing sensors (1) Selection of whether lamps or sensors are to be addressed. Under Manual Mode, all or individual lines can be overridden. (2) Specification of the DALI line to be addressed (3) Button to search for already addressed devices on the selected line. This updates the table (10). (4) Button for switching the view (see "Alternative view [} 58]"). (5) Button for changing the addresses according to the table. (6) Selection of visual feedback to identify the selected device. The selected sensor flashes approximately once per second. With push button couplers, the corresponding line lights up green when pressed. TF8050 Version: 2.0.0.9 57
## Page 58

Functional description (7) Input fields and button for changing a single address. This function does not provide any feedback and the table should be updated with (3) to check this. (8) Button for readdressing all connected sensors. All existing addresses will be deleted in the process. (9) Input field and button for addressing new (unaddressed) sensors. In the input field, you can enter an address to start with. In the course of addressing, all sensors found (only new ones) are given free addresses (starting with the specified start address). If there are not enough free addresses, the process ends with an error message. (10) Table showing all sensors found after a search run (3). The line selected here provides the visual feedback. The desired address for each sensor can be entered under New address. Once the complete list has been adjusted as required, the readdressing process can be started with (5). If an address in the table is assigned twice, the process is aborted and a corresponding error message is displayed. (11) When the button is pressed, all devices found are activated/deactivated according to the list. This means that individual devices do not need to be activated later. Before use, check that all devices are found and displayed in the list. If a sensor has previously been activated as "External Input" or "KNX", it will not be affected, even if one of the sensors found has its address. The button is only enabled if a search has been performed recently and no changes have been made since then. (12) During the search process, the GTIN number is read for each device and compared with the internal database. If the device is known, the manufacturer and product name are displayed in this column. If the device is unknown, "Unknown" is displayed. An unknown sensor can also work later, only the automatic detection does not work and a similar model must be selected manually. Alternative view: In this view (lamps or sensors are almost identical) you have a simultaneous overview of all 64 possible devices. A device was found for all white addresses, but not for the gray ones. If you click on a field under New, the visual feedback for the device is activated and a dialog opens. In the dialog box, you can select the desired address with a single click and the dialog box closes (no keyboard input required). Addresses that have already been selected are highlighted in yellow here. Duplicate "new" addresses are highlighted in red on the page. It is common for several addresses to be temporarily marked in red during the sorting process. 58 Version: 2.0.0.9 TF8050
## Page 59

Functional description 3.13 Construction "Construction" is activated on delivery and initially forms the start page. This is used to test or operate the lamps in manual mode even without in-depth knowledge and to address all devices automatically. By activating individual functions, the number of all connected devices can be displayed. If there is a difference to the number of devices actually installed, this indicates errors in the installation of the lighting system. 3.13.1 Addressing (1) Display of the DALI lines and their names. (2) Number of lamps and sensors found (only addressed devices). (3) A permanent search run of addressed devices per line can be selected here. The sum of the devices is shown at (2). (4) Button for deleting all addresses on the respective line. (5) A permanent addressing process can be started here for each line. NOTICE The addressing process generates an increased load on the DALI bus, which subsequently affects other functions such as searching for devices (3). In the worst case, this can lead to incorrect evaluations. This function should therefore not be activated in parallel. In practice, you can activate it for approx. 5 minutes for all lines and then start the search run. (6) Permanent sensor feedback can be activated here. All connected sensors should then flash until the function is deactivated again. If a sensor is not flashing, its connection should be checked. (7) Button for restarting the DALI line. When pressed, the internal power supply switches off briefly and switches back on again after 2 seconds. All DALI devices restart during this process. Can be used if devices do not work despite being connected correctly. (8) Status of the DALI terminal / communication. (9) Example of DALI terminals that are not in operation due to various problems. The buttons in the lines refer to the respective line. The buttons next to the headings affect all lines. TF8050 Version: 2.0.0.9 59
## Page 60

Functional description 3.13.2 Manual Mode Here, all lamps of all or individual DALI lines can be switched or dimmed via broadcast commands. This can be used to test a system after installation or to provide a switching option before construction. The broadcast command controls each lamp, so all lamps should respond accordingly. If this is not the case, the connection must be checked or the control gear has a fault. Manual Mode also has priority and overrides all configurations for the corresponding line. If at least one of the lines is in Manual Mode, a warning symbol ( ! ) is displayed. (1) Display of the DALI lines and their names. (2) Activate/deactivate Manual Mode checkbox. (3) Switch off the lamps. (4) Slider dimming value (min-max level). (5) Switch on lamps at max level. (6) Status of the DALI terminal/communication. (7) Example of DALI terminals that are not in operation due to various problems. The buttons in the lines refer to the respective line. The buttons next to the headings affect all lines. 60 Version: 2.0.0.9 TF8050
## Page 61

Functional description 3.14 Settings The Settings tab is described in more detail in the following chapter. Among other things, functions can be activated, global parameters changed, templates edited and data saved or loaded here. Also see about this 2 Groups [} 14] 3.14.1 Light Light Control: (1) Daylight Control start value: If a group is in "Daylight Control" mode, it is switched on with the value set here. The group then adjusts to the setpoint. (2) If this function is activated, a group can determine a variable start value. The function must be activated separately for each group. (see Group configuration [} 14]). (3) The lowest value to which the lights can be dimmed down. (4) Deviation actual value/setpoint at which the Daylight Control becomes active. If the deviation is smaller than the value set here, the group is "balanced". (5) If the actual value/setpoint deviation is greater than the value set here, the light dims up or down more quickly in order to reach the setpoint more quickly. (6) Waiting time after changing the dimming value. (Here only if the deviation actual value/setpoint is less than the difference at (5)). The lower this value is, the faster the Daylight Control responds. The brightness query of the sensors is independent of this setting. If the value is set too low, the setpoint may be exceeded, causing unwanted dimming up/down! (7) Waiting time after changing the dimming value. (Here only if the deviation actual value/setpoint is greater than the difference at (5)). The lower this value is, the faster the Daylight Control responds. The brightness query of the sensors is independent of this setting. If the value is set too low, the setpoint may be exceeded, causing unwanted dimming up/down! TF8050 Version: 2.0.0.9 61
## Page 62

Functional description (8) This value fixes the threshold at which the Daylight Control can shutdown the light if it is bright enough. If the illumination has already been dimmed down to the min level, this value comes into effect. See also (9). (9) If the condition in (8) is met, the set time is waited for before the light switches off. Global values: The values listed under Dali parameter are written to or read from the control gears. The Software parameters relate to general control behavior. (1) The physical minimum value can only be read and the smallest value found is displayed (DALI value: 0-254). Reading this value may take some time. (2) Power-on-level specifies the value to which the lamps switch on after the mains voltage is switched on. (3) System-failure-level specifies which value the lamps assume in the event of an error. (4) Max-level indicates the highest value that the lamps assume. (5) The step time specifies the time in which the lamps approach a new dimming value. With a higher value, the light dims up or down more slowly after switching on/off. (6) Input/output field (7) Each value change must be confirmed by clicking on the respective button. This causes all ECGs to be written with the corresponding parameter via a broadcast command. (8) This value specifies how quickly the light dims up/down when manually operated by a push button (push button long press). (9) Specifies the time from which a push button evaluates a "long press". Short press: On/Off Long press: Dimming function Only available in the group control modes fully automatic, semi-automatic, manual push button and manual push button with overrun. 62 Version: 2.0.0.9 TF8050
## Page 63

Functional description Global light control: Global light control can be used to implement Daylight Control to an outdoor light sensor, among other things. 5 control curves can be configured and up to 3 DALI sensors can be evaluated. An average value is then calculated from these 3 sensors. (1) Selection of the control curve. This is equivalent to the group light modes Global light control 1-5. (2) Scale for dimming level of the lamps. (3) Scale for brightness. Dynamically generated values from 0 to the highest possible value (max. values of the sensors). (4) The control values of the lamps for the corresponding brightness values can be entered here. Higher control values must not be assigned to higher brightness values. (5) Displays the actual dimming value. The Daylight Control is internally linked to other parameters so that a new value is approached correspondingly slowly. (6) Up to 3 sensors can be configured here. As soon as line "0" is specified, the sensor is deactivated. TF8050 Version: 2.0.0.9 63
## Page 64

Functional description Emergency light: (1) Duration Test (2) Function Test (3) The automatic tests can be enabled here. As a rule, a function test must be carried out once a week and the duration test once a year. As a duration test takes several hours, this test must be supervised by a specialist. An automatic test is not recommended in this case. (4) Selection of a day from an annual calendar. (5) Selection of a day of the week. (6) Specification of a time at which the test should start. (7) Display of a timestamp of the last test performed. A green check mark indicates a successful test, while a red "X" indicates an unsuccessful test. (8) The last 100 test results can be called up here. (9) Button to manually start the respective test. 3.14.2 Templates Various lamps and group configurations can be predefined here. It is advisable to start here first during construction, as this makes setting up the individual groups and lamps easier. Subsequent changes to parameters can then be made here for many groups and lamps at the same time. Each of the changes in the individual templates are transferred to all assigned groups and lamps. 64 Version: 2.0.0.9 TF8050
## Page 65

Functional description Groups: (1) Selection of the template (1-10). (2) The name of the template can be edited here. All other parameters shown here are described in detail under Group configuration [} 14]. (3) Here you can select an icon to be displayed in the drop-down menu (1) and the group table. Lamps: (1) Selection of the template (1-10). TF8050 Version: 2.0.0.9 65
## Page 66

Functional description (2) The name of the template can be edited here. All other parameters shown here are described in detail under Lamps configuration [} 33]. (3) Here you can select an icon to be displayed in the drop-down menu (1) and the lamp table. (4) Individual or multiple lamps can be quickly assigned to the selected template here. 3.14.3 System Global functions can be activated here and settings can be made that affect the entire system. Functions: (1) If this function is activated, the button for the scene settings is displayed on the start page. (2) The HCL function can be activated/deactivated globally here. (3) If this function is activated, the button for the buttons is displayed on the start page. (4) Function is activated on delivery and should be deactivated after construction, as the corresponding page allows access to the DALI lines without access rights. (5) Here you can switch between light and dark display mode. (6) This function resets all buttons at the specified time and the corresponding illumination switches off. 66 Version: 2.0.0.9 TF8050
## Page 67

Functional description Time setting: (1) The date and time of the controller can be adjusted here. Both the date and the time must be entered and confirmed with Set. (2) A time server can be specified to synchronize the time automatically. When changing, confirm with Set. (3) The specification of a regular working time is mandatory for some functions. The time set here is used, for example, to calculate average usage values and to report possible false triggering of the sensors. The timespan should be set slightly longer than the regular business hours. (e.g. ±30-60 min) TF8050 Version: 2.0.0.9 67
## Page 68

Functional description Building: (1) The name entered here is displayed in the top left-hand corner. This is mainly used for orientation when using several controllers. (2) Indication of the coordinates of the building. Is required for the HCL and Astro functions. Screen saver: A screen saver can be activated here. Regardless of the set delay, this only starts 5 minutes after a system restart. You can choose between different display options. (1) Activate/deactivate the screen saver. 68 Version: 2.0.0.9 TF8050
## Page 69

Functional description (2) An unlock pin can be activated and set up here. (3) Time delay after the last operation. (4) Various display options can be selected here: Color: The screen only displays a clock and a fire alarm if applicable. Infoboard: In addition to "Color", the current power and a corresponding diagram as well as an alarm bell for faults are displayed here. Energy consumption: Shows the current power in the form of a histogram. (5) Preview of the selection (6) A background color can be selected here. Coupler: All configured bus couplers are shown here in a table. (1) The coupler description can be edited here. (2) The assignments of the DALI lines are displayed here. These were defined as parameters when programming the controller. (3) The status of the respective bus coupler is shown here in green/red. If the status is "red", the assigned DALI lines are not processed and there is a system fault (if (4) is activated). (4) Only activated couplers are monitored and displayed as a fault if necessary. Network: Shows the IP settings and MAC addresses of the controller's interfaces. Backup: All settings and data can be saved, loaded or reset here. The data is protected in CSV format and is stored in the FTP folder on the device. TF8050 Version: 2.0.0.9 69
## Page 70

Functional description (1) The Safety PIN must be entered here. Different pins are required for different functions. (2) Recently made changes can be saved here beyond the restart. (3) Saving and loading the base settings writes or reads the CSV data from the FTP folder. These "base settings" are usually generated automatically once a week. When saving/loading manually, the individual files can be selected in a subsequent dialog to save time when making minor changes. (4) The backup settings are a second level of protection. The same data is generated as in (3), but with the extension "Backup_" in the file name. This backup can only be created manually. (5) The USB functions are pure copy functions which copy the CSV data from the FTP folder to the USB stick ("Export") and vice versa ("Import"). Before an "Export", the base settings should have been saved with (3). (6) In the event of a loss of old energy values (hardware damage), these can be restored here. The data is located in the FTP subfolder "Persistent Data" and is also automatically written with the base settings. (7) A controller can be reset to the delivery state here. Information: This page provides an overview of the nominal operating hours of all lamps. The percentage of nominal operating hours already used is calculated for each lamp. The lamps are then grouped according to this percentage. 70 Version: 2.0.0.9 TF8050
## Page 71

Functional description (1) The pie chart shows the percentages of (2). (2) 5 groups are displayed, showing the percentage consumption of the nominal operating hours. Click on one of the colored fields to update the table (4). (3) Number of lamps located in the corresponding area. (4) The table lists up to 100 lamps that are located in the area selected under (2). (5) The table shows the operating hours according to the switching groups. FAQ: Shows the current version number, as well as QR codes and buttons as shortcuts to this document. TF8050 Version: 2.0.0.9 71
## Page 72

Functional description 3.15 Error messages If there is a fault, a warning symbol is displayed. The individual faults are divided into different categories. Lamps/Sensors: Faults of lamps/sensors are displayed in the respective table. Up to 100 faults are displayed per list and the respective line, address and status message can be read. The Go To button takes you directly to the corresponding configuration. The following errors may be displayed: Number Error text Description 1 No Answer: Terminal The DALI gateway (KL6821) cannot be reached. Is the 24 V power supply missing for the terminal (red LED lights up)? Is the PLC correctly linked to the terminal? 2 No Answer: Control gear/ The lamp does not answer. Circuit breaker on? Correct DALI ECGs address? DALI voltage measurable at the lamp (approx. 12-16 V)? Manual mode still active? Possible defect? 3 Overflow The DALI bus is overloaded. Too many transmit commands? Button sticking? DALI-2-incompatible devices connected? 4 No Answer: PLC Com The PLC is not linked correctly to the DALI communication. 5/6 Dali Collision Several devices are transmitting simultaneously. Has a conventional DALI sensor (broadcast transmitter) been installed? No other master in the system may transmit commands. 56 Blocked: Dali I/O Were the digital inputs on the KL6821 used to send DALI-configured DALI commands? Reset: Restart the controller. 78 Short Circuit Short circuit detected on the DALI bus. Xx Undefined An uncommon error has occurred. Please contact Support. No device found If "Auto-Detect" is activated for a sensor. No device could be found. Detecting If "Auto-Detect" is activated for a sensor. An attempt is currently being made to find the device. 72 Version: 2.0.0.9 TF8050
## Page 73

Functional description The numbers correspond to the DALI error codes. You can find further and more detailed information here. System: System-relevant faults are listed here. This primarily includes bus coupler faults caused by a network failure, for example. If a bus coupler is faulty, the devices connected to it are not listed separately under Lamps/ Sensors. The system faults are entered with a timestamp and must be acknowledged. Extern: Faults that are transferred via external variables are displayed here. It is possible to describe up to 50 alarms (GVL_LS.st ALarm[1..50]). 3.15.1 Warnings If a yellow warning signal is displayed on the lamps or sensors, the controller has detected possible malfunction by a device. As can be seen in the following figures, further warning signals are routed to the corresponding devices via the associated DALI lines. TF8050 Version: 2.0.0.9 73
## Page 74

Functional description Such a warning is displayed for the lamps if they do not accept their set dimming value after several attempts. This can happen if a corresponding parameter in the control gear is set incorrectly. In this example, the maximum value of the lamp is below the setpoint of 100%: In the case of the sensors, a daily check is carried out to see whether a sensor has detected a presence outside the set operating time (yellow bar). If this is the case, this warning is issued and you must evaluate it yourself by taking a look at the "statistics". The following example shows a defective sensor that provides such a false presence on a daily basis. 74 Version: 2.0.0.9 TF8050
## Page 75

Functional description The check for this error can be disabled separately for each sensor. TF8050 Version: 2.0.0.9 75
## Page 76

Functional description 3.16 User Login Opens the Login dialog. The user logs in by entering his user name and password. He is automatically logged out again after a defined time without action. Logout Logs out the currently logged-in user. This option is only shown if a user is logged in. Change password Here, the password of the logged-in user can be changed. This option is only shown if a user is logged in. User management Opens the User management, in which you can delete users, create new users or change passwords. This option is only shown if a user is logged in with sufficient rights. The following preset groups and users exist on delivery: Group Rights Admin Full access Login name Group Password technik Admin technik admin Admin 1 76 Version: 2.0.0.9 TF8050
## Page 77

Functional description 3.17 Configuration assistant The Assistant tab is displayed under Groups. This function helps to set up the groups and assign lamps and sensors. In order to use the function efficiently, the necessary templates for groups and lamps should have been created beforehand. During the configuration of a group, the progress or the current step is displayed at the top: Start: (1) A new group can be created by clicking on +. A free entry is then searched for and suggested in the following dialog. This can be confirmed or another one can be searched for. (2) Click on the - to delete the group entered in the text field. All links are also deleted in the process. The deletion must be confirmed once again. (3) Click on the pencil to edit the group entered in the text field. (4) Here is a shortcut to the templates (5) Statistics can be found here to quickly see whether there are still devices that have not been configured (provided the devices have been activated beforehand). TF8050 Version: 2.0.0.9 77
## Page 78

Functional description Step 1: Group configuration (1) Display of the current step. (2) Cancel the process. (3) Continue to the next step. (4) Selection of a group template. If "Individual" is selected, all parameters under (5) can be changed. If a template is selected, a corresponding number of parameters are locked. (5) Setting the group parameters. The name of the group is predefined after the selection of a template (4) and can then be edited. The area can also be defined separately. (6) Here you can enter which other groups should be master groups for this group. Up to 8 master groups can be entered. If one of the master groups is active, the slave group is also switched on with the default value. 78 Version: 2.0.0.9 TF8050
## Page 79

Functional description Step 2: Assigning the lamps (1) Display of the current step. (2) Cancel the process. (3) Continue to the next step. (4) Selection of the active DALI line. (5) Here you can specify how many devices are to be displayed in a row. For easier grouping, this value can be set to match the number of lamps in a light-band. (6) Display of the number of devices assigned to this group (black). Display of changed devices (green/red, only if a group is being edited). (7) The corresponding lamps can be added to or removed from the group with a simple click. The individual fields are highlighted in color: Gray: The device is deactivated. White: The device is activated but not in use. Blue: The device is already assigned to another group. Green: The device is assigned to the current group. Red: The device is already assigned to 8 other groups (max.) (8) All lamps of an entire line or all lamps of all lines for the group can be activated/deactivated here. TF8050 Version: 2.0.0.9 79
## Page 80

Functional description Step 3: Assigning the sensors (1) Display of the current step. (2) Return to the previous step or cancel the process. (3) Continue to the next step. (4) Selection of the active DALI line. (5) Here you can specify how many devices are to be displayed in a row. For easier grouping, this value can be set to match the number of sensors in a light-band. (6) Display of the number of devices assigned to this group (black). Display of changed devices (green/red, only if a group is being edited). (7) Here, the corresponding sensors can be added to or removed from the group with a simple click. The individual fields are highlighted in color: Gray: The device is deactivated. White: The device is activated but not in use. Blue: The device is already assigned to another group. Green: The device is assigned to the current group. Red: The device is already assigned to 4 other groups (max.). 80 Version: 2.0.0.9 TF8050
## Page 81

Functional description Step 4: Activating the DALI devices (1) Display of the current step. (2) Return to the previous step or cancel the process. (3) Continue to the next step. (4) Here you can specify whether the previously selected lamps are to be "activated" and which lamp type they should be assigned. (5) Here you can specify whether the previously selected sensors are to be "activated" and which sensor types they should be assigned. If auto-detection is selected, no type needs to be selected. In this case, the sensors should be checked later for correct function. TF8050 Version: 2.0.0.9 81
## Page 82

Functional description Step 5: Overview and test function (1) Display of the current step. (2) Return to the previous step or cancel the process. (3) Completing the configuration. After clicking, you will be asked again whether the settings are correct. You will then be taken back to the start page of the assistant and the group will be set up. (4) Some of the specified data is summarized again here. The group name can be edited here again. (5) A Test mode can be activated here. If the function is activated, a group presence is displayed. The illumination can also be switched. 82 Version: 2.0.0.9 TF8050
## Page 83

Functional description 3.18 Tips for initial construction In general, several steps are necessary to quickly put a system into operation. The most important ones are listed in order below. 1. On the Construction page, activate automatic addressing for all lines (if it makes sense) and let it run for about 5-10 minutes. During the waiting period, you can name the DALI lines and bus couplers to make them easier to find later. 2. Deactivate automatic addressing and start the search run for all lines. After 1-2 minutes, each address was checked once and the table should have found the correct number of devices per line. The search function should be deactivated if it is no longer required. 3. If all devices have been found in step 2, you can continue with step 4. If not all devices have been found, the illumination can be dimmed in manual mode and the feedback from the sensors can be activated to identify the missing devices and repair them if necessary. Then, depending on your wishes or the number of problems, you can continue with step 4 or repeat the steps startying with step 1. 4. Switch to addressing mode and switch on the illumination globally under Manual Mode. This means that all other lines are switched on during addressing. Then start sorting the devices (see chapter Addressing [} 56]). 5. Create templates for groups and lamps in the settings. 6. Start the group assistant and set up the individual groups. 7. Configure other switching conditions (buttons, schedules, circuits). 8. Deactivate Manual Mode and check circuits. 9. Check the system time and adjust if necessary. Set the regular operating time. 10. Activate the desired special functions in the settings and adjust parameters (Daylight Control parameters, HCL, scenes...). 11. Deactivate construction page. 12. Save data (generate CSV data and export if required). TF8050 Version: 2.0.0.9 83
## Page 84

Excel configuration 4 Excel configuration The configuration can be done entirely via the visualization, which is recommended from version 2.0 onwards. For larger systems, however, it can be helpful to carry out the configuration using Excel. In general, all worksheets are already available on the controller on delivery. Otherwise, you can save them on the end device via Save basic settings on Settings page. You can copy these files to the USB stick using the Export USB function. All files are then located in the subfolder "Beckhoff" (the USB stick must not be write- protected). With network knowledge, the FTP directory ftp://172.16.17.10/ also lends itself. This is an example link; first adapt the IP to the corresponding device settings. The limits of the input table must be adhered to! The following files are created: • Group_Data.csv • Circuit_Data.csv • Lamp_Data.csv • Sensor_Data.csv • Switch_Data.csv • Schedule_Data.csv • HCL_Data.csv • Energy_Data.csv • Scenes_Data.csv • Scene_Group_Data.csv • Scene_Group_Data2.csv The following files are saved, but should not be adapted externally: • General_Settings.csv • Logics_Data.csv • Group Template_Data.csv • Lamp Template_Data.csv NOTICE Do not change the table names or the file format! Do not change the table names or the file format ".csv". All files must always be available – even if they aren't used. 84 Version: 2.0.0.9 TF8050
## Page 85

Excel configuration Group_Data: Parameter Input Name Naming Activate 0: deactivated 1: activated Set Value 0…100% Basic Value 0…100% Setpoint 5..5000 Delay time 1 0..600 in minutes "OR 1 min" Delay time 1 0..60 seconds "OR 1 sec" Delay time 2 0..600 in minutes "OR 2 min" Delay time 2 0..60 seconds "OR 2 sec" Automatic delay time optimization 0: deactivated "OR Autoadjust" 1: activated Parameters blocked 0: Free 1: Blocked Area 0..10 Light mode 1: Fixed Control 2: Daylight Control Control mode 0: Sensor, button or schedule 1: Sensor with activation via schedule or button 2: Daylight Control 3: Full Automatic 4: Semi-automatic 5: Manual button 6: Manual button with delay time HCL dimming position 0: deactivated 1: activated RGB (no function yet) Color value in hexadecimal Disable Central off 0: Central off active 1: Central off is ignored Slave Gr.1-Gr.8 0..250 Circuit_Data: Parameter Input Name Naming Group 1 .. 4 0..250 Activate 0: deactivated 1: activated TF8050 Version: 2.0.0.9 85
## Page 86

Excel configuration Lamp_Data: Parameter Input Name Naming Activate 0: deactivated 1: activated Group 1.. 8 0..250 Type 0: Standard 1: Emergency lighting 2: Switching actuator Template 0..10 "Model" Min Level 0..254 Max Level 0..254 Rated power 1-3500 Tunable White 0: deactivated 1: activated RGB (no function yet) Color value in hexadecimal Operating hours Not changeable 86 Version: 2.0.0.9 TF8050
## Page 87

Excel configuration Sensor_Data: TF8050 Version: 2.0.0.9 87
## Page 88

Excel configuration Parameter Input Name Naming Activate 0: deactivated 1: activated Group presence 1: 0..250 G1.1 - G1.4 Scene Presence 1: 0: deactivated S1 1..60: activated Group presence 2: 0..250 G2.1 – G2.4 Scene Presence 2: 0: deactivated S2 1..60: activated Auto-detection (Auto-Detect): "AD" 0: deactivated 1: activated Input Type: "IT" 0: DALI-2 1: External input (GVL_LS_IO.b In_Sensor_Presence, GVL_LS_IO.n In_Sensor_Brightness) 2: KNX Manufacturer: "M" 0…20 Type: "T" 0…60 Enable brightness: "En_BR" 0: Disable 1: Enable Enable Presence 0: Disable "En_PIR" 1: Enable Report false presence 0: Disable "EN_FP" 1: Enable Brightness scale factor 0.1 – 10.0 "SF" Range 0..255 (low - high) Sensitivity 1..15 (high - low) Button configuration B1-8: G: 0 – 250 Group "G" S: 0 – 60 Scene "S" A: 0 – 10 Area "A" Special function “Z” Z: 0: deactivated 1: Reset Manual Mode 2: Central off KNX line 1…10 KNX-Main Presence 0-31 "PM" KNX-Submain Presence 0-7 Presence "PS" KNX-Number Presence 0-255 Presence "PN" KNX-Main Brightness 0-31 "BM" 88 Version: 2.0.0.9 TF8050
## Page 89

Excel configuration KNX-Submain Brightness 0-7 "BS" KNX-Number Brightness 0-255 "BN" Switch_Data: Parameter Input Name Naming Activate 0: deactivated 1: activated Group 1...8 1..250 Scene 0: deactivated 1..30: activated Area 0: deactivated 1..10: activated Special function 0: deactivated 1: Reset Manual Mode 2: Central off Function as 0: deactivated 1 .. 100: activated Type 0: Hardware Input (GVL_LS_IO.b Switch[x]) 1: KNX 2: En Ocean® KNX-Line 1-10 KNX-Main 0-31 KNX-Submain 0-7 KNX-Number 0-255 En Ocean® Remote 1-10 En Ocean® Device ID ID of the button as a decimal value ID2 2nd part of the ID (button pressed) Icon 0…19 Visibility 0: Invisible 1: Text only 2: Icon only 3: Text + icon Page 0: No selection 1...4: Button displayed on page x Row 0: No selection 1...5: Button displayed in row x Column 0: No selection 1..6: Button displayed in column x TF8050 Version: 2.0.0.9 89
## Page 90

Excel configuration Schedule_Data: Parameter Input Name Naming Activate 0: deactivated 1: activated Mo-Su 0: deactivated 1: activated Group 1...8 0..200 Scene 0: deactivated 1..30: activated Scene Off 0: deactivated 1: activated Area 0: deactivated 1..10: activated On h 0..23 On m 0..59 On s 0..59 Off h 0..23 Off m 0..59 Off s 0..59 Same as 0: deactivated 1…50 activated Astro On 0: Time 1: Dawn 2: Dusk Astro Off 0: Time 1: Dawn 2: Dusk HCL_Data: Parameter Input Time Hour 0..23 Time Minute 0..59 Color 2700..6500 Dimming position 10..100 Sunrise 0: deactivated 1: activated Sunset 0: deactivated 1: activated Drive time by min 3..240 Activate 0: deactivated 1: activated 90 Version: 2.0.0.9 TF8050
## Page 91

Excel configuration Energy_Data: Parameter Input Name Naming ct ratio 1..10000 Activate 0: deactivated 1: activated Scenes_Data: Parameter Input Name Naming Dimming 0: deactivated 1: activated Scene off 0: deactivated 1: activated Scene first off 0: deactivated 1: activated Manual Mode Reset 0: deactivated 1: activated Activate 0: deactivated 1: activated Scene_Group_Data and Scene_Group_Data2: Parameter Input Group (Display only: described by Scenes_Data) Scene S1... S30 0: deactivated Scene S31... S60 1: activated Value 0..254 Also see about this 2 Settings [} 61] TF8050 Version: 2.0.0.9 91
## Page 92

Setting up the visualization 5 Setting up the visualization The visualization is designed for the XS style. Unpleasant display errors can occur if you use a different style. You can also define the default language here. It may be the case with some devices that graphics are not displayed properly. Then select Extended settings → visible →Convert images to: →png. If the problem persists, it may help to clear the browser cache. NOTICE Secure the functions! Be sure to create a user management, as otherwise all functions will be operable without a password! 92 Version: 2.0.0.9 TF8050
## Page 93

Setting up the visualization The start visualization for the target and web visualization must be linked as follows: "Tc3_LS. BA_LS_Main" If you use the web visualization without tablet, set the Default Text input to "Keyboard" so that the entries can be made via the keyboard. TF8050 Version: 2.0.0.9 93
## Page 94

Setting up the visualization 94 Version: 2.0.0.9 TF8050
## Page 95

Programming 6 Programming NOTICE Tc3_DALI A current Tc3_Dali library is required to ensure the function of the light solution. A minimum version of 3.21.2.0 is required. The Lighting Solution application consists of 2 PLC programs. The program BA_LS in a slower task and the DALI communication program BA_LS_Dali_Communication in a faster task. Key hardware data is specified in the parameter settings of the library. This includes the number of bus couplers, the number of DALI lines and their distribution to the bus couplers. Syntax n Number Of Dali Lines : INT(1..50) := 10; n Number Of Coupler : INT(0..10) := 1; s CX_Dali Lines : T_Max String := ''; s Coupler_1_Dali Lines : T_Max String := '1,2'; s Coupler_2_Dali Lines : T_Max String := ''; s Coupler_3_Dali Lines : T_Max String := ''; s Coupler_4_Dali Lines : T_Max String := ''; s Coupler_5_Dali Lines : T_Max String := ''; s Coupler_6_Dali Lines : T_Max String := ''; s Coupler_7_Dali Lines : T_Max String := ''; s Coupler_8_Dali Lines : T_Max String := ''; s Coupler_9_Dali Lines : T_Max String := ''; s Coupler_10_Dali Lines : T_Max String := ''; s Backup Data_Pin : STRING(10) := '1909'; s Restore Data_Pin : STRING(10) := '1909'; s Backup Default Data_Pin : STRING(10) := '7007'; s Restore Default Data_Pin : STRING(10) := '7007'; s Path_Data : STRING(100) := '\Hard Disk\ftp\'; s Path_USB : STRING(100) := 'Hard Disk2\'; s Path_Energy : STRING(100) := '\Hard Disk\ftp\'; TF8050 Version: 2.0.0.9 95
## Page 96

Programming Parameter Name Type Description n Number Of Dali Lines INT Enter the exact number of KL6821/EL6821. n Number Of Coupler INT Enter the number of bus couplers. s CX_Dali Lines T_Max Strin Indication of all DALI lines connected to the CX. g s Coupler_1_Dali Lines T_Max Strin Specification of all DALI lines connected to the 1st bus g coupler. s Coupler_2_Dali Lines T_Max Strin Specification of all DALI lines connected to the 2nd bus g coupler. … s Backup Data_Pin STRING PIN for saving the configuration (basic setting). s Restore Data_Pin STRING PIN for loading the configuration (basic setting). s Backup Default Data_Pin STRING PIN for saving the configuration (backup). s Restore Default Data_Pin STRING PIN for loading the configuration (backup). s Path_Data STRING FTP storage location s Path_USB STRING USB storage location s Path_Energy STRING Energy storage location Param_Interfaces Name Type Description n Number Of KNX_Terminals INT Enter the exact number of KL6301. n Number Of En Ocean_Terminals INT Enter the exact number of KL6581. Global variables GVL_LS Name Type Description b Manual Mode BOOL Broadcast: Manual Mode is activated across all lines. n Manual Mode_Slider BYTE Broadcast: The Manual Mode value is described for all lines. n Group_Value ARRAY OF BYTE Group: The group is set to Manual Mode when the value is changed and adopts the value. b Group_Man Mod_Reset ARRAY OF BOOL Resets the Manual Mode of the group. n Group_External Value ARRAY OF BYTE Can be written with a DALI value. The group assumes the highest value of internal and external requirements. b Area_Enable ARRAY OF BOOL Enables the corresponding area (1-10). st Alarm ARRAY OF ST_Alarm st Alarm.b ALarm: Activates the display of the alarm. st Alarm.s Name: Display text of the alarm. The following data points are exclusively read-only. The data points are intended only for information purposes. 96 Version: 2.0.0.9 TF8050
## Page 97

Programming Name Type Description b Group_Presence ARRAY OF BOOL Group: Summarized presence (current, delay time 1, delay time 2). n Group_Act Value ARRAY OF BYTE Group: Current luminous intensity in DALI. b Group_Enabled ARRAY OF BOOL Group: Enabled/Disabled. n Group_Brightness ARRAY OF INT Group: Current brightness value of the sensors. n Group_Setpoint ARRAY OF INT Group: Current setpoint. s Group_Name ARRAY OF STRING Group: Name of the group. b Area_Enabled ARRAY OF BOOL Feedback of the active areas. b Dali Line_Lamp_Error ARRAY OF BOOL Lamps: Collective error message for lamps per line. b Dali Line_Sensor_Error ARRAY OF BOOL Sensors: Collective error message sensors per line. r Lamps_Operating_hours ARRAY OF REAL Lamps: operating hours n Lamps_Act Value ARRAY OF BYTE Lamp: Current luminous intensity in DALI s Lamps_Error ARRAY OF STRING Lamp: Error text s Lamps_Name ARRAY OF STRING Lamp: Name of the lamp n Lamps_Groups ARRAY OF INT Lamp: Specification of associated groups. b Sensor_Presence ARRAY OF BOOL Sensor: Current presence b Sensor_Button ARRAY OF BOOL Sensor: State of the button inputs (1-8) of a sensor. n Sensor_Act Value ARRAY OF INT Sensor: Current brightness value of the sensors. s Sensor_Error ARRAY OF STRING Sensor: Error text s Sensor_Name ARRAY OF STRING Sensor: Name of the sensor s Switch_Name ARRAY OF STRING Switch: Name of the switch s Switch_Dali_Error ARRAY OF STRING DALI switch: Error text s Switch_Dali_Name ARRAY OF STRING DALI switch: Name of the push button coupler. r Energy_Average Value ARRAY OF REAL Energy measurement: Quarter-hourly values over the last 24 hrs. st Energy_Data ARRAY OF Energy measurement: Output of measured ST_LS_Power values (see ST_LS_Power). n Temperature_HCL INT HCL color temperature Structure for the further use of the measured energy values: TYPE INTERNAL ST_LS_Power : STRUCT f IL1, f IL2, f IL3 :. LREAL; f Ig : LREAL; f UL1, f UL2, f UL3 : LREAL; f PL1, f PL2, f PL3 : LREAL; f Pg : LREAL; f Cos Phi L1, f Cos Phi L2, f Cos Phi L3: LREAL; f Cos Phi : LREAL; f WL1, f WL2, f WL3 : LREAL; f Wg : LREAL; f Imax L1, f Imax L2, f Imax L3 : LREAL; f Umax L1, f Umax L2, f Umax L3 : LREAL; f Pmax L1, f Pmax L2, f Pmax L3 : LREAL; f Sg : LREAL; f Qg : LREAL; f Frequency L1, f Frequency L2, f Frequency L3 : LREAL; END_STRUCT END_TYPE GVL_LS_IO The following data points must be linked accordingly with the hardware. TF8050 Version: 2.0.0.9 97
## Page 98

Programming Name Type Description st Dali_KL6821In ARRAY OF Connect inputs to KL6821. ST_KL6821In Data st Dali_KL6821Out ARRAY OF Connect outputs to KL6821. ST_KL6821Out Data st Dali_EL6821In ARRAY OF Connect inputs to EL6821. ST_EL6821In Data st Dali_EL6821Out ARRAY OF Connect outputs to EL6821. ST_EL6821Out Data st KNX_Terminal ARRAY OF Connect inputs and outputs to KL6301. ST_KNX_Terminal st En Ocean_Terminal ARRAY OF Connect inputs and outputs to KL6581. ST_En Ocean_Terminal w In_CX_State WORD Link input with CX. w Out_CX_Ctrl WORD Link output with CX. w In_BK_Coupler State ARRAY OF WORD Link input with coupler "x". w In_BK_Box State ARRAY OF WORD Link input with coupler "x". w In_BK_Missed Cnt ARRAY OF WORD Link input with coupler "x". w Out_BK_Box Ctrl ARRAY OF WORD Link output with coupler "x". b Switch ARRAY OF BOOL Inputs of switches, KNX, Modbus, En Ocean®, etc. can be linked here. b Switch_FB ARRAY OF BOOL Switch feedback according to the index from b Switch. b In_Sensor_Presence ARRAY OF BOOL Input for "External Input" mode with the sensors to switch presence. Conventional detectors or self-defined logics can be linked here. n In_Sensor_Brightness ARRAY OF INT Input for "External Input" mode with the sensors to transfer the brightness. Conventional detectors or self-defined logics can be linked here. b Circuit ARRAY OF BOOL Switching output n Circuit_Percent ARRAY OF INT Switching: Output value in percent n Circuit_analog ARRAY OF INT Circuit: Output value in 0-32767 n Circuit_DMX ARRAY OF BYTE Circuit: Output value in 0-255 st In_KL3403 ARRAY OF ST_KL3403_IN Connect input structure to KL3403. st Out_KL3403 ARRAY OF ST_KL3403_OUT Connect output structure to KL3403. b Soft_Error BOOL Output of collective error message for lamps and sensors. b Hard_Error BOOL Output of hardware errors. Output is constantly on; the output automatically switches off if the components fail. b Emergency Lights_Error BOOL Output is on if the last function test of the emergency lights was faulty. 98 Version: 2.0.0.9 TF8050
## Page 99

Programming 6.1 BA_LS Inputs b Enable_Write Persistent : BOOL := TRUE; t Write Persistent : TIME := T#48H; b Write Persistent_Trig : BOOL; b Enable_Local Time : BOOL := TRUE; dt Date And Time : DT; b Enable_Return_Visu : BOOL := FALSE; s Return_Visu : STRING(70):= 'Webvisu'; b Fire Alarm_NC : BOOL := TRUE; b Switch_Reset_Trig : BOOL; Name Type Description b Enable_Write Persistent BOOL Allows cyclic persistent writing to the controller. t Write Persistent TIME Cyclic persistent saving of the configured data. The input b Enable_Write Persistent must be true. b Write Persistent_Trig BOOL A positive edge executes the persistent writing of the data. The input b Enable_Write Persistent must be true. b Enable_Local Time BOOL Activates the local time of the runtime system. dt Date And Time DT Used if b Enable_Local Time is false. b Enable_Return_Visu BOOL Enables the "Back" button on the Start page. Target is s Return_Visu. s Return_Visu STRING String of the target visualization. b Fire Alarm_NC BOOL Input for the integration of a fire alarm system. If the input is False, the illumination is switched on 100% and operation is disabled. b Switch_Reset_Trig BOOL A positive edge resets all switch/push button inputs. 6.2 BA_LS_Dali_Communication The call must take place in a faster task with a higher priority than the call of BA_LS. 3x faster is recommended. TF8050 Version: 2.0.0.9 99
## Page 100

Examples 7 Examples 7.1 Groups All lamps can be assigned to several groups. The light intensity is determined by the highest light value of all groups: Three individual lamps can be seen in the first illustration. The set value of group 3 is 70% while that of group 4 is 80%. The basic value of both groups is 30%. One group is assigned to each of the sensors (group 3 and group 4). In the next illustration, the sensor in group 3 detects presence. As a result, the lamps in group 3 are set to the set value 70%. The sensor in group 4 now also detects presence. The lamps in group 4 are set to the set value 80%. In the following illustration, group 4 no longer has presence. The right-hand lamp is set to the basic value on expiry of the 1st overrun time and the middle lamp is reduced to the set value of group 3. The second overrun time has now expired for group 4. The right-hand lamp is switched off. 100 Version: 2.0.0.9 TF8050
## Page 101

Examples In the last illustration, group 3 no longer has presence and the 1st overrun time has expired. The left-hand and middle lamps are set to the basic value. On expiry of the 2nd overrun time these are also switched off. 7.2 Area All groups can be assigned to an area. Each area must first be released so that a group is active. In the first illustration, group 1 is not assigned to any area. Group 2 belongs to area 1. No push-button or schedule that switches area 1 is currently active. TF8050 Version: 2.0.0.9 101
## Page 102

Examples In the next illustration, the sensor for group 1 has triggered and the light is switched on. This group is activated directly without an area assignment. 102 Version: 2.0.0.9 TF8050
## Page 103

Examples In the following illustration, the sensor for group 2 has now also triggered. The light remains off because the area has not yet been activated. TF8050 Version: 2.0.0.9 103
## Page 104

Examples In the last illustration, the area is activated via a push-button/schedule. Group 2 is switched on. 104 Version: 2.0.0.9 TF8050
## Page 105

Examples TF8050 Version: 2.0.0.9 105
## Page 106

Appendix 8 Appendix Building-Automation@Beckhoff.com 8.1 Support and Service Beckhoff and their partners around the world offer comprehensive support and service, making available fast and competent assistance with all questions related to Beckhoff products and system solutions. Download finder Our download finder contains all the files that we offer you for downloading. You will find application reports, technical documentation, technical drawings, configuration files and much more. The downloads are available in various formats. Beckhoff's branch offices and representatives Please contact your Beckhoff branch office or representative for local support and service on Beckhoff products! The addresses of Beckhoff's branch offices and representatives round the world can be found on our internet page: www.beckhoff.com You will also find further documentation for Beckhoff components there. Beckhoff Support Support offers you comprehensive technical assistance, helping you not only with the application of individual Beckhoff products, but also with other, wide-ranging services: • support • design, programming and commissioning of complex automation systems • and extensive training program for Beckhoff system components Hotline: +49 5246 963-157 e-mail: support@beckhoff.com Beckhoff Service The Beckhoff Service Center supports you in all matters of after-sales service: • on-site service • repair service • spare parts service • hotline service Hotline: +49 5246 963-460 e-mail: service@beckhoff.com Beckhoff Headquarters Beckhoff Automation Gmb H & Co. KG Huelshorstweg 20 33415 Verl Germany Phone: +49 5246 963-0 e-mail: info@beckhoff.com web: www.beckhoff.com 106 Version: 2.0.0.9 TF8050
## Page 107

Trademark statements Beckhoff®, ATRO®, Ether CAT®, Ether CAT G®, Ether CAT G10®, Ether CAT P®, MX-System®, Safety over Ether CAT®, TC/BSD®, Twin CAT®, Twin CAT/BSD®, Twin SAFE®, XFC®, XPlanar® and XTS® are registered and licensed trademarks of Beckhoff Automation Gmb H.
## Page 108

More Information: www.beckhoff.com/TF8050 Beckhoff Automation Gmb H & Co. KG Hülshorstweg 20 33415 Verl Germany Phone: +49 5246 9630 info@beckhoff.com www.beckhoff.com
