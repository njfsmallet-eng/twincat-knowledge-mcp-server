---
title: "TF5200_spindle_en"
product: "TF5200"
category: "Motion_Control"
tags: ["NC"]
language: "EN"
document_type: "Manual"
version: "1.05"
source_pdf: "https://download.beckhoff.com/download/Document/automation/twincat3/TF5200_spindle_en.pdf"
release_date: "2025-06-06"
---
Functional description | EN TF5200 | Twin CAT 3 CNC Spindle 6/6/2025 | Version: 1.05
## Page 3

Notes on the documentation Notes on the documentation This description is only intended for the use of trained specialists in control and automation engineering who are familiar with the applicable national standards. It is essential that the documentation and the following notes and explanations are followed when installing and commissioning the components. It is the duty of the technical personnel to use the documentation published at the respective time of each installation and commissioning. The responsible staff must ensure that the application or use of the products described satisfy all the requirements for safety, including all the relevant laws, regulations, guidelines and standards. Disclaimer The documentation has been prepared with care. The products described are, however, constantly under development. We reserve the right to revise and change the documentation at any time and without prior announcement. No claims for the modification of products that have already been supplied may be made on the basis of the data, diagrams and descriptions in this documentation. Trademarks Beckhoff®, Twin CAT®, Twin CAT/BSD®, TC/BSD®, Ether CAT®, Ether CAT G®, Ether CAT G10®, Ether CAT P®, Safety over Ether CAT®, Twin SAFE®, XFC®, XTS® and XPlanar® are registered trademarks of and licensed by Beckhoff Automation Gmb H. Other designations used in this publication may be trademarks whose use by third parties for their own purposes could violate the rights of the owners. Patent Pending The Ether CAT technology is patent protected, in particular by the following applications and patents: EP1590927, EP1789857, EP1456722, EP2137893, DE102015105702 with corresponding applications or registrations in various other countries. Ether CAT® is registered trademark and patented technology, licensed by Beckhoff Automation Gmb H, Germany Copyright © Beckhoff Automation Gmb H & Co. KG, Germany. The reproduction, distribution and utilisation of this document as well as the communication of its contents to others without express authorisation are prohibited. Offenders will be held liable for the payment of damages. All rights reserved in the event of the grant of a patent, utility model or design. TF5200 | Twin CAT 3 CNC Version: 1.05 3 Spindle
## Page 4

General and safety instructions General and safety instructions Icons used and their meanings This documentation uses the following icons next to the safety instruction and the associated text. Please read the (safety) instructions carefully and comply with them at all times. Icons in explanatory text 1. Indicates an action. ð Indicates an action statement. DANGER Acute danger to life! If you fail to comply with the safety instruction next to this icon, there is immediate danger to human life and health. CAUTION Personal injury and damage to machines! If you fail to comply with the safety instruction next to this icon, it may result in personal injury or damage to machines. NOTICE Restriction or error This icon describes restrictions or warns of errors. Tips and other notes This icon indicates information to assist in general understanding or to provide additional informa- tion. General example Example that clarifies the text. NC programming example Programming example (complete NC program or program sequence) of the described function or NC com- mand. Specific version information Optional or restricted function. The availability of this function depends on the configuration and the scope of the version. 4 Version: 1.05 TF5200 | Twin CAT 3 CNC Spindle
## Page 5

Table of contents Table of contents Notes on the documentation.................................................................................................................... 3 General and safety instructions.............................................................................................................. 4 1 Overview.................................................................................................................................................... 8 2 Description................................................................................................................................................ 9 2.1 Control topology................................................................................................................................ 9 2.2 Spindle types................................................................................................................................... 10 2.2.1 NC spindle........................................................................................................................ 10 2.2.2 PLC spindle...................................................................................................................... 12 2.2.3 Main spindle..................................................................................................................... 15 2.2.4 Controlled spindle............................................................................................................ 16 2.2.5 Other configuration examples ......................................................................................... 19 2.3 Spindle modes................................................................................................................................ 23 2.3.1 Endless rotation............................................................................................................... 25 2.3.2 Positioning........................................................................................................................ 25 2.3.3 Spindle as channel axis................................................................................................... 25 2.4 Spindle behaviour........................................................................................................................... 26 2.4.1 Spindle override............................................................................................................... 26 2.4.2 Control by CNC................................................................................................................ 26 2.4.3 Behaviour at NC program end or CNC Reset.................................................................. 26 2.5 Synchronisation............................................................................................................................... 27 2.5.1 M functions....................................................................................................................... 28 2.5.2 Spindle speed - path motion............................................................................................ 28 2.6 Spindle monitoring.......................................................................................................................... 31 2.7 Homing for NC spindles.................................................................................................................. 32 2.8 Spindle functions............................................................................................................................. 32 2.8.1 Feed forward.................................................................................................................... 32 2.8.2 Gear change.................................................................................................................... 35 2.8.3 Synchronous operation.................................................................................................... 39 2.8.4 Curve-controlled acceleration.......................................................................................... 41 2.8.5 Tool-related dynamic limiting for spindles........................................................................ 50 2.8.6 Thread drilling without compensating chuck (G63).......................................................... 51 2.8.7 Thread cutting with endlessly rotating spindle (G33)....................................................... 53 2.8.8 C-axis machining (face and lateral surface machining)................................................... 58 2.8.9 Turning functions.............................................................................................................. 58 2.9 HLI interface objects (NCK PLC interface)...................................................................................... 60 3 Parameter................................................................................................................................................. 61 3.1 Overview of channel, axis and tool parameters.............................................................................. 61 3.2 Description...................................................................................................................................... 63 3.2.1 Channel parameters......................................................................................................... 63 3.2.2 Axis parameters............................................................................................................... 71 3.2.3 Tool parameters............................................................................................................... 83 4 Support and Service............................................................................................................................... 85 Index......................................................................................................................................................... 86 TF5200 | Twin CAT 3 CNC Version: 5 Spindle
## Page 6

Table of contents 6 Version: TF5200 | Twin CAT 3 CNC Spindle
## Page 7

List of figures List of figures Fig. 1 Integrating spindles in the NC control topology............................................................................ 9 Fig. 2 Every NC channel can be configured for access to all available spindles................................... 9 Fig. 3 Operating the NC spindle............................................................................................................. 10 Fig. 4 NC spindle with external commanding......................................................................................... 11 Fig. 5 PLC spindle.................................................................................................................................. 12 Fig. 6 Channel-specific commanding of a PLC spindle.......................................................................... 14 Fig. 7 Interfacing the 3 spindles to channel 1......................................................................................... 20 Fig. 8 Interfacing the 3 spindles to channel 1 and channel 2................................................................. 22 Fig. 9 State graph of spindle modes for analogue drives....................................................................... 23 Fig. 10 State graph of spindle modes for digital drives (e.g. SERCOS)................................................... 24 Fig. 11 Spindle not synchronised with path motion.................................................................................. 29 Fig. 12 Spindle synchronised with path motion........................................................................................ 30 Fig. 13 Define the speed ranges according to the example..................................................................... 37 Fig. 14 Example of a machine structure for synchronous operation with spindles.................................. 39 Fig. 15 Acceleration curve as a function of speed................................................................................... 41 Fig. 16 Profile of acceleration based on a polynomial or hyperbole......................................................... 42 Fig. 17 Acceleration profile based on polynomial or hyperbole with interpolation points......................... 43 Fig. 18 Curve profile for nominal speed nlimit with polynomials.............................................................. 45 Fig. 19 Curve profile for nominal speed nlimit with hyperbola.................................................................. 46 Fig. 20 Acceleration profile with asynchronous drive curve..................................................................... 48 Fig. 21 Curve profile above nominal speed.............................................................................................. 49 Fig. 22 Value of thread pitch for longitudinal thread................................................................................. 54 Fig. 23 Value of thread pitch for tapered thread....................................................................................... 54 Fig. 24 Representation of geometry example.......................................................................................... 55 Fig. 25 Face and lateral surface machining............................................................................................. 58 TF5200 | Twin CAT 3 CNC Version: 1.05 7 Spindle
## Page 8

Overview 1 Overview Task Spindles are machine elements with an electric drive. Their purpose is to engage a tool (milling cutter, drill bit, countersink drill, thread tapping drills, etc.) or a workpiece and set it rotating for the purpose of machining. Spindles are used to machine all types of materials such as metal, wood or plastic. Spindles are also a major component of CNC-controlled machine tools. These machines include lathe or milling machines, machining centres and grinding machines. Properties Basically, spindles are distinguished by the different kinds of control. The spindle type can also be determined by its machining task. This document distinguishes between 4 types of spindles: 1. NC spindle 2. PLC spindle 3. Main spindle 4. Controlled spindle Only spindles which are known to the channel by their configuration can be used in the NC program. This means that a spindle can also be addressed by several channels if it is configured appropriately. Parameter definition Depending on its inclusion in the control topology, the type of spindle used and its machining task must be defined as parameters in various configuration data. • Channel parameters [} 61] • Axis parameters [} 61] • Tool parameters [} 62] Mandatory note on references to other documents For the sake of clarity, links to other documents and parameters are abbreviated, e.g. [PROG] for the Programming Manual or P-AXIS-00001 for an axis parameter. For technical reasons, these links only function in the Online Help (HTML5, CHM) but not in pdf files since pdfs do not support cross-linking. 8 Version: 1.05 TF5200 | Twin CAT 3 CNC Spindle
## Page 9

Description 2 Description 2.1 Control topology The channel parameter list [CHAN] is used to select and parameterise the spindles required for the NC channel from the existing spindles. Spindles can be commanded via the user interface (NC program or HMI) or via the interface to the PLC (HLI). Depending on the version, 6 - 16 spindles can be commanded per channel in the NC program. HMI DIN-66025 Channel specific parameters NCK HLI PLC Axis NC-channels External instruction specific of a NC-Spindle parameters NC-Spindle PLC-Spindle Fig. 1: Integrating spindles in the NC control topology As of CNC Build V3.1.3100, 16 spindles can be commanded per channel. In CNC Builds up to V3.1.30xx, 6 spindles can be commanded per channel NC Channels 1 2 3 S1 S2 S3 Fig. 2: Every NC channel can be configured for access to all available spindles. TF5200 | Twin CAT 3 CNC Version: 1.05 9 Spindle
## Page 10

Description 2.2 Spindle types 2.2.1 NC spindle The NC spindle is operated by a single axis interpolator of the controller. NC HLI PLC Spindle NC Channel interpolator Fig. 3: Operating the NC spindle Control with digital drives (e.g. SERCOS) is at the drive end. The speed or torque control modes can also be activated here. Parameters for the NC spindle P-AXIS-00015 Operation mode of the axis P-AXIS-00016 Logical number of the axis P-AXIS-00018 Type of axis P-AXIS-00020 Drive type of the axis P-CHAN-00007 Designation of the spindle P-CHAN-00036 Logical axis number of the spindle P-CHAN-00051 Logical axis number of the main spindle P-CHAN-00053 Designation of the main spindle P-CHAN-00082 Number of spindles 10 Version: 1.05 TF5200 | Twin CAT 3 CNC Spindle
## Page 11

Description 2.2.1.1 Example: Configuring and programming an NC spindle Initialisation in the axis parameter list kopf.achs_nr 1 achs_typ 0x0004 Spindel Initialisation in the channel parameter list (channel 1) spdl_anzahl 1 main_spindle_ax_nr 1 main_spindle_name S spindel[0].bezeichnung S1 spindel[0].log_achs_nr 1 Configuring and programming an NC spindle DIN syntax: N10 M03 S1000 N20 Z0 N30 M04 S1000 N40 Z100 N50 M05 N60 M19 S200 S. POS100 M30 Axis-specific syntax: N10 S[M03 REV1000] N20 Z0 N30 S[M04 REV1000] N40 Z100 N50 S[M05] N60 S[M19 REV200 POS100] M30 Commanding an NC spindle externally The NC spindle can be commanded from the PLC process via an additional interface in the HLI. • The spindle processes the commands sequentially in their order of arrival. • The PLC process receives the acknowledgements, e.g. about the speed reached. NC HLI PLC Spindle NC Channel interpolator Fig. 4: NC spindle with external commanding TF5200 | Twin CAT 3 CNC Version: 1.05 11 Spindle
## Page 12

Description 2.2.2 PLC spindle The PLC spindle is controlled by the PLC. HLI NC PLC CH AX Spindle Spindle NC Channel interpolator control Fig. 5: PLC spindle The spindle axis is configured and parameterised like an NC spindle. Since no real drive is supplied by the NC, the "simulation" or "virtual" drive type must be selected. PLC spindles are commanded with speed or position commands by the CNC via the PLC interface (HLI). Control takes place by the PLC. The CNC merely receives an acknowledgement for M functions output to the spindle. Parameters for the PLC spindle P-AXIS-00015 Operation mode of the axis P-AXIS-00016 Logical number of the axis P-AXIS-00018 Type of axis P-AXIS-00020 Drive type of the axis P-CHAN-00007 Designation of the spindle P-CHAN-00036 Logical axis number of the spindle P-CHAN-00051 Logical axis number of the main spindle P-CHAN-00053 Designation of the main spindle P-CHAN-00082 Number of spindles 12 Version: 1.05 TF5200 | Twin CAT 3 CNC Spindle
## Page 13

Description 2.2.2.1 Example: Configuring and programming a PLC spindle Initialisation in the axis parameter list achs_typ 0x00004 Spindel achs_mode 0x40000 Externally controlled Spindle antr_typ 0x00004 Simulation Initialising in the channel parameter list spdl_anzahl 1 main_spindle_ax_nr 1 main_spindle_name S spindel[0].bezeichnung S1 spindel[0].log_achs_nr 1 There is no difference between programming NC and PLC spindles. Configuring and programming a PLC spindle DIN syntax: N10 M03 S1000 N20 Z0 N30 M04 S1000 N40 Z100 N50 M05 N60 M19 S200 S. POS100 M30 Axis-specific syntax: N10 S[M03 REV1000] N20 Z0 N30 S[M04 REV1000] N40 Z100 N50 S[M05] N60 S[M19 REV200 POS100] M30 TF5200 | Twin CAT 3 CNC Version: 1.05 13 Spindle
## Page 14

Description 2.2.2.2 Special application Data exchange for PLC spindles over the channel-specific HLI range There is no single axis interpolator for the controller in this configuration. It is possible to command PLC spindles directly by means of the NC channel. NC HLI PLC CH Spindle NC Channel control AX Fig. 6: Channel-specific commanding of a PLC spindle Parameter P-CHAN-00069 PLC-controlled spindle Special application Spindle S1 is defined as a PLC spindle. Initialising in the channel parameter list : spindel[0].plc_control 1 spindel[0].bezeichnung S1 spindel[0].log_achs_nr 1 : Any logical axis number is possible but it must be unequal to 0 and it may not already be assigned to any other axis. No axis parameter list is required for this kind of PLC spindle. 14 Version: 1.05 TF5200 | Twin CAT 3 CNC Spindle
## Page 15

Description 2.2.3 Main spindle The main spindle can be programmed together with specific functions (e.g. thread tapping, gear changing, etc.) in conventional DIN syntax. The main spindle is defined by assigning the parameter P-CHAN-00051. The logical axis number of one of the spindles which is configured in the channel parameters list is entered here. After the controller starts up, this spindle becomes the main spindle. The NC command #MAIN spindle, see [PROG], can define any other spindle in the system into the main spindle. The main spindle is assigned an axis name by the parameter P-CHAN-00053 (main_spindle_name) and this is used to address it in the subroutine. The main spindle is always called S. The axis names of the other spindles must also start with S but are otherwise freely selectable. Even if there is only one spindle in the system, it must be configured as the main spindle. Parameter P-CHAN-00051 Logical axis number of the main spindle P-CHAN-00053 Designation of the main spindle Example data record Example: spindle S1 is defined as the main spindle. Initialising in the channel parameter list main_spindle_ax_nr 10 main_spindle_name S spindel[0].bezeichnung S1 spindel[0].log_achs_nr 10 spindel[1].bezeichnung S2 spindel[1].log_achs_nr 11 spindel[2].bezeichnung S3 spindel[2].log_achs_nr 12 TF5200 | Twin CAT 3 CNC Version: 1.05 15 Spindle
## Page 16

Description 2.2.4 Controlled spindle Functionality For certain applications it may be sufficient to simply operate a spindle in purely speed-controlled mode by outputting a speed command value instead of operating it in a position-controlled loop. Drive types A speed-controlled spindle can be configured for drive types Terminal, Lightbus and Ether CAT/CANopen. Principle of operation For a speed-controlled spindle the speed command value of the interpolator is output directly to the axis and not the speed command value of the position controller. The acknowledgement of speed commands to the spindle is derived from the following actual values depending on the actual value telegram configured: 1. If an actual position value is configured, the actual speed is calculated from the actual position values. However, the encoder resolution must be specified in the axis parameter list. 2. If a speed actual value is configured and not an actual position value, the speed actual value is used to acknowledge the speed. 3. If neither an actual position value nor an actual speed value is configured (sensorless spindle), the speed acknowledgement is calculated from the internal speed command value. The speed is con- sidered as reached when the internal speed command value calculated cycle by cycle is within the speed tolerance specified in the axis parameter list. A sensorless spindle cannot be positioned. If an attempt to do this is made despite this, error message 70252 is output. For the actual spindle speed to match the programmed spindle speed, the scaling factor must be correctly adjusted for the speed command value. A speed-controlled spindle can be configured for drive types Terminal, Lightbus and Ether CAT/CANopen. For terminal drives, offset voltages in the analogue input part of the drive controller may lead to a slow rotary spindle movement, even if a spindle speed of 0 is programmed. This can be prevented by: • Offset adjustment of the drive amplifier. • Disabling the drive amplifier by the PLC at speed 0. 16 Version: 1.05 TF5200 | Twin CAT 3 CNC Spindle
## Page 17

Description 2.2.4.1 Example: Configuring a sensorless spindle If a sensorless spindle is parameterised for a terminal drive: The DA converter terminal supplies an output voltage of 10 V at a digital input value of 32767 digits. The motor turns at a speed of 3000 revolutions/minute at an input voltage of 10 V. The following steps are required to do this: 1. Configuring a spindle without encoder but with a DA output channel. 2. Setting the operation mode to speed-controlled mode. 3. Parameterising speed scaling. 1. Step Configuring a spindle without encoder Normally, configuration is executed with a configuration tool. The basic configuration is executed as for an NC spindle (see section NC spindle [} 10]). 2. Step Configuring speed-controlled mode for the axis In the axis parameter list, set the parameter P-AXIS-00320 to the value “OPEN_POSITION_LOOP_MODE”. antr.operation_mode OPEN_POSITION_LOOP_MODE 3. Step Parametrising speed scaling In this case, assign P-AXIS-00207, P-AXIS-00206 and P-AXIS-00205 in the axis parameter list: The command speed to the drive is specified in revolutions per minute: antr.v_time_base 0 An output of 32767 increments turns the motor at 3000 rpm. This corresponds to a speed of 3000 * 360°/min = 1080000°/min. When converted to the internal format this results in: 1080000° * 1000 = 1080000000. antr.v_reso_num 32767 antr.v_reso_denom 1080000000 Parameters for sensorless spindle P-AXIS-00320 Axis operation mode P-AXIS-00207 Timebase for speed scaling P-AXIS-00206 Speed scaling nominator P-AXIS-00205 Speed scaling denominator TF5200 | Twin CAT 3 CNC Version: 1.05 17 Spindle
## Page 18

Description 2.2.4.2 Example: Configuring a speed-controlled spindle with speed feedback Configure a speed-controlled spindle whose speed acknowledgement is sent via the speed actual value. The spindle axis turns at the command speed of 1 revolution per minute when the value 1 is output. The following steps are required to do this: 1. Configuring a spindle with output of a speed command value and feedback of an actual speed value. 2. Setting the operation mode to speed-controlled mode. 3. Parameterising speed scaling. 1. Step Configuring a spindle Normally, configuration is executed with a configuration tool. The basic configuration is executed as for an NC spindle (see section NC spindle [} 10] 2. Step Configuring speed-controlled mode for the axis In the axis parameter list, set the parameter P-AXIS-00320 to the value “OPEN_POSITION_LOOP_MODE”. antr.operation_mode OPEN_POSITION_LOOP_MODE 3. Step Parametrising speed scaling Set the parameters P-AXIS-00207, P-AXIS-00206 and P-AXIS-00205 in the axis parameter list: The command speed to the drive is specified in rpm: antr.v_time_base 0 At an output of 1 increment, the motor turns at 1 rpm. This corresponds to a speed of 1 * 360°/min = 360 °/ min. When converted to the internal format this results in: 360° * 1000 = 360000. antr.v_reso_num 1 antr.v_reso_denom 360000 Parameters for sensorless spindle P-AXIS-00320 Axis operation mode P-AXIS-00207 Timebase for speed scaling P-AXIS-00206 Speed scaling nominator P-AXIS-00205 Speed scaling denominator 18 Version: 1.05 TF5200 | Twin CAT 3 CNC Spindle
## Page 19

Description 2.2.5 Other configuration examples 2.2.5.1 Example: Configuring and programming several spindles 3 spindles Initialisation in the axis parameter list achs_typ 0x00004 Spindel achs_mode 0x40000 Externally controlled spindles antr_typ 0x00004 Simulation Initialising in the channel parameter list spdl_anzahl 3 main_spindle_ax_nr 6 main_spindle_name S spindel[0].bezeichnung S1 spindel[0].log_achs_nr 6 spindel[1].bezeichnung S2 spindel[1].log_achs_nr 11 ... spindel[2].bezeichnung S3 spindel[2].log_achs_nr 30 ... The spindle "S1" with the logical axis number 6 is defined as the main spindle. It is addressed by the spindle name "S". The spindles with logical axis numbers 11 and 30 care programmed by their default names "S2" and "S3". TF5200 | Twin CAT 3 CNC Version: 1.05 19 Spindle
## Page 20

Description Main spindle S Axis number 6 Spindle S2 Axis number 11 Channel 1 Spindle S3 Axis number 30 Fig. 7: Interfacing the 3 spindles to channel 1 20 Version: 1.05 TF5200 | Twin CAT 3 CNC Spindle
## Page 21

Description 2.2.5.2 Example: Configuration of a 2-channel system with 3 spindles Channel 1 Initialisation in the channel parameter list of channel 1: 3 spindles where the spindle with axis number 11 (S2) is to be the main spindle. spdl_anzahl 3 main_spindle_ax_nr 11 main_spindle_name S main_spindle_gear_change 0 # spindel[0].bezeichnung S1 spindel[0].log_achs_nr 6 spindel[1].bezeichnung S2 spindel[1].log_achs_nr 11 spindel[2].bezeichnung S3 spindel[2].log_achs_nr 30 : Channel 2 spdl_anzahl 3 main_spindle_ax_nr 11 main_spindle_name S main_spindle_gear_change 0 # spindel[0].bezeichnung S1 spindel[0].log_achs_nr 6 spindel[1].bezeichnung S2 spindel[1].log_achs_nr 11 spindel[2].bezeichnung S3 spindel[2].log_achs_nr 30 Initialisation in the channel parameter list of channel 2: 2 spindles where the spindle with axis number 11 (S2) is to be the main spindle. spdl_anzahl 2 main_spindle_ax_nr 11 main_spindle_name S main_spindle_gear_change 0 # spindel[0].bezeichnung S1 spindel[0].log_achs_nr 6 spindel[1].bezeichnung S2 spindel[1].log_achs_nr 11 TF5200 | Twin CAT 3 CNC Version: 1.05 21 Spindle
## Page 22

Description Both channels can address the spindle with logical axis number 11 as the main spindle by the spindle name "S". It can be programmed in conventional DIN syntax or in spindle-specific syntax. Spindle "S1” can also be programmed from both channels in spindle-specific syntax. Spindle "S3” is only available in channel 1. This spindle is not known in channel 2. Spindle S1 Axis number 6 Axis number 6 Main spindle S Axis number 11 Axis number 11 Channel 1 Channel 2 Spindle S3 Axis number 30 Fig. 8: Interfacing the 3 spindles to channel 1 and channel 2 22 Version: 1.05 TF5200 | Twin CAT 3 CNC Spindle
## Page 23

Description 2.3 Spindle modes Analogue spindles In general, the following machine data is assigned when analogue spindles are used: • In P-AXIS-00015 (achs_mode) the operation mode ACHSMODE_KEINE_AUTO_RPF may not be set. • P-AXIS-00156 (ref_ohne_nocken) == TRUE • P-AXIS-00157 (ref_ohne_rev) == TRUE Based on these settings, the following state graph applies: +/- 10V M3/M4 Control limit exceeded M19, M5 Homing M19 G74 M19 (without RPF) M19 M19 M5 Discrete motion Continuous motion G74 (without RPF) M19 M5 Done M3/M4 Standstill Fig. 9: State graph of spindle modes for analogue drives TF5200 | Twin CAT 3 CNC Version: 1.05 23 Spindle
## Page 24

Description Digital spindles When digital spindles are used (SERCOS), pay attention to the following when setting the machine data [AXIS]: • In P-AXIS-00015 (achs_mode), the operation mode ACHSMODE_KEINE_AUTO_RPF must be set. • As opposed to analogue spindles the setting of P-AXIS-00156 (ref_ohne_nocken) and P-AXIS-00157 (ref_ohne_rev) has no significance. Based on these settings, the following state graph applies: M19 Discrete motion Continuous motion M19 (without RPF) M19 M5 Done M3/M4 M19 (without RPF) Standstill Error Reset G74 Done Homing Fig. 10: State graph of spindle modes for digital drives (e.g. SERCOS) 24 Version: 1.05 TF5200 | Twin CAT 3 CNC Spindle
## Page 25

Description 2.3.1 Endless rotation The endless rotation (M03/M04) functions command speed and direction of rotation. The spindle is accelerated at a constant speed (P-AXIS-00001, or P-AXIS-00002 during the deceleration phase) or an acceleration based on a curve. Endless rotation is terminated by spindle stop (M05), homing (G74) or a set- up block (M19). DIN66025 programming M3/M4 S.. Extended syntax S[M3/M4 REV..] 2.3.2 Positioning The spindle is positioned at a specified target point at a specified speed. DIN66025 programming M19 S.. S. POS.. M3/M4 Extended syntax S[M19 REV.. POS.. M3/M4] Observe the following for the direction of rotation: If a direction of rotation is programmed in connection with M19, set-up takes place in this direction. If a direction of rotation is not specified for M19, • distance optimisation takes place from standstill and • set-up takes place in the current direction of rotation starting from endless rotation. Preferred direction of rotation When a preferred direction P-AXIS-00224 (vorz_richtung) and a direction of rotation P-AXIS-00031 (beweg_richt) are specified, all commanded directions of rotation are checked for conformity with the preferred direction. If they do not match, an error message 60254 is issued and the function reverts to error state. 2.3.3 Spindle as channel axis With machining operations such as tapping without a compensating chuck, face and lateral surface machining etc., the spindle is addressed by the NC channel as a normal axis. Programming Transition to this mode is achieved by the programming in the part program [PROG]: #CAX, G63.. TF5200 | Twin CAT 3 CNC Version: 1.05 25 Spindle
## Page 26

Description 2.4 Spindle behaviour 2.4.1 Spindle override The rpm or speed of a spindle during endless rotation or positioning can be scaled as a percentage via the override interface on the HLI. 2 control units are used for this axis-specific override. for CNC Builds > V2.11.2800 1. gp Ax[axis_idx]^.ipo_mc_control.override 2. gp Ax[axis_idx]^.ipo_mc_control.override_valid for CNC Builds < V2.11.2800 1. p AC[axis_idx]^.addr^. Mc Control Ipo_Data. MCControl UNS16Unit_Override/ 2. p AC[axis_idx]^.addr^. Mc Control Ipo_Data. MCControl Bool Unit_Override Valid The NC command G167 [PROG] can suppress the influence exerted by the override interface. Spindle override N10 N10 [M3 REV1000 ](When override is 50%, speed is (500 rpm.) N20 S2[G167/] (Override influencing off,) (spindle rotates at 1000 rpm.) N30 S2[REV3000] (Override influencing active again,) (speed 1500 rpm.) N40 M30 (Program end) 2.4.2 Control by CNC With spindles, the limit at which the measuring system no longer supplies a valid signal may be exceeded at a higher speed. The parameter P-AXIS-00220 (vb_regelgrenze) specifies the speed at which the position control loop is opened and transits to speed-controlled mode. The actual values which are defined by the position lag depending on the specified speed are simulated automatically. Control is automatically resumed starting from endless rotation when the control limit is undershot. However, the reference point is then lost. This is why referencing must be repeated before a positioning motion. With digital drive systems (e.g. SERCOS), the drive executes the control and monitoring of the con- trol limit. 2.4.3 Behaviour at NC program end or CNC Reset Program end The endlessly rotating spindle is only stopped at NC program end if the corresponding flag (spindle stop at program end [HLI]) is set in the HLI interface. Reset The spindle is always stopped when the CNC is reset (default). This behaviour can be changed by the parameter P-AXIS-00455. 26 Version: 1.05 TF5200 | Twin CAT 3 CNC Spindle
## Page 27

Description 2.5 Synchronisation Synchronisation methods The synchronisation types of spindle M functions M3, M4, M5, M19 and of spindle function S are defined spindle-specifically. The following synchronisation types are permissible: Constant Value Meaning NO_SYNCH 0x00000000/ No output of S/M function to PLC MOS 0x00000001/ Output of S/M function to PLC without synchronisation. MVS_SVS 0x00000002/ Output of the S/M function to the PLC before the motion block, synchronisation before the motion block MVS_SNS 0x00000004/ Output of the S/M function to the PLC before the motion block, synchronisation after the motion block MNS_SNS 0x00000008/ Output of the M function to the PLC after the motion block, synchronisation after the motion block MNE_SNS 0x00000020/ Output of the S/M function to the PLC after a (measurement) event, synchronisation after the motion block (for edge banding option only) MVS_SLM 0x00004000/ Late synchronisation, output of S/M function to PLC in the block, synchronisation on transition to G01/G02/G03 (implicit synchronisation) MVS_SLP 0x00008000/ Late synchronisation, output of S/M function to PLC in the block, synchronisation by NC command #EXPL SYN (explicit synchronisation) PLC_INFO 0x00020000/ Output to PLC, acknowledgement by PLC required, additive bit TF5200 | Twin CAT 3 CNC Version: 1.05 27 Spindle
## Page 28

Description PLC_INFO It only makes sense to use the PLC_INFO bit with NC spindles (position-controlled spindles). In addition to the synchronisation type, the PLC_INFO bit can be set for every spindle M function. This determines whether a spindle M function is output to the PLC or not and whether it must be acknowledged by the PLC. If the PLC_INFO bit is not set, no output is sent to the PLC and internal synchronisation only takes place based on window monitoring for the position or speed.. With PLC spindles please observe the following: In general, with every spindle M function, an output of the M function is also sent to the PLC automatically. It is therefore not necessary to additionally set the PLC_INFO bit. The synchronisation method of the S function has no effect if a spindle M function is programmed in the NC block. Synchronisation only takes place based on the settings for the spindle M function. The following priorities apply: M19 > M3/M4/M5 > S 2.5.1 M functions The M functions M3, M4, M5, M19 and M40 are reserved in DIN66025 for the control of spindles. These M functions can be synchronised with an executing path motion. With M3, M4 and M5, synchronisation always takes place internally (speed reached) and optionally by the PLC additively. Moreover, all freely available M functions can be output axis-specifically to a spindle. For further details of M functions and PLC synchronisation, refer to the documentation [FCT-C1]. M function Meaning Channel parameters M03 Endless clockwise spindle rotation P-CHAN-00045 M04 Endless counter-clockwise spindle rotation P-CHAN-00047 M05 Spindle stop P-CHAN-00049 M19 Spindle positioning P-CHAN-00043 M40–45 Gear speed selection for the main spindle See [CHAN // section: Spindle gear change] 2.5.2 Spindle speed - path motion The spindle must reach the programmed speed before a machining motion begins. The parameter P- CHAN-00081 (s_synch) defines a synchronisation type for speed. The synchronisation method of the S function has no effect if a spindle M function is programmed in the same NC block. Synchronisation only takes place based on the settings for the spindle M func- tion. The following priority sequence applies: M19 > M3/M4/M5 > S 1: Spindle asynchronous to path motion spindel[i].s_synch 0x00000002 Output before, sync. before block spindel[i].m3_synch 0x00000001 No synchronisation N10 X0 Y0 G0 N20 X40 Y40 G1 F1500 M3 S500 ;Due to M3 no synchronisation ;Motion starts immediately N30 M3 S100 X0 Y0 ;Path executes motion without waiting ;until spindle speed is reached 28 Version: 1.05 TF5200 | Twin CAT 3 CNC Spindle
## Page 29

Description 500 1500 100 Spindle speed 0 0 Path feed Fig. 11: Spindle not synchronised with path motion TF5200 | Twin CAT 3 CNC Version: 1.05 29 Spindle
## Page 30

Description 2: Spindle synchronous with path motion spindel[i].s_synch 0x00000002 Output before, sync. before block spindel[i].m3_synch 0x00000001 No sync. N10 M3 X0 Y0 G0 N20 X40 Y40 G1 F1500 S500 ;Path motion only starts when ;spindle speed is reached N30 S100 X0 Y0 ;Path waits before executing motion ;until spindle speed is reached 500 1500 100 Spindle speed 0 0 Path feed Fig. 12: Spindle synchronised with path motion 30 Version: 1.05 TF5200 | Twin CAT 3 CNC Spindle
## Page 31

Description 2.6 Spindle monitoring Overview of monitoring mechanisms for an NC spindle • Dynamic monitoring (speed, acceleration) [FCT-D1] • Revolution monitoring • Position monitoring [FCT-A3] • Position lag monitoring [FCT-A1] • Time monitoring [FCT-A3] • Monitoring the direction of rotation Speed The parameter P-AXIS-00217 defines the actual speed at which nominal speed is regarded as reached. The parameter P-AXIS-00216 defines the speed limit under which the zero speed is assumed. Direction of rotation If a preferred direction P-AXIS-00224 and a direction of rotation P-AXIS-00031 are specified, all commanded directions of rotation are checked for matching with the preferred direction. If they do not match, the error message P-ERR-60254 is issued and the function reverts to error state. TF5200 | Twin CAT 3 CNC Version: 1.05 31 Spindle
## Page 32

Description 2.7 Homing for NC spindles To execute spindle positioning, the coordinate zero point must be synchronised with the signals of the actual value measuring system by a reference marker. With spindles, this can take place during endless rotation without standstill. For example, the zero point passage of the actual value encoder is used. Automatic homing If no homing took place for the spindle, it is executed automatically before positioning with M19 takes place or if positioning or stopping the spindle with M05 takes place after the control limit speed is exceeded (see the figure in section Spindle operation modes [} 23]). With digital drive systems (e.g. SERCOS), drive-controlled homing is executed using the command (G74). Automatic homing is not possible. This must be deactivated by axis parameter P- AXIS-00015. Programming Homing for NC spindles G74 S1 or S[G74] Homing spindles and other axes can be started simultaneously but is otherwise not synchronised. 1. Homing the spindle starts simultaneously with Y axis homing: N10 G74 X2 Y1 S1 2nd Same as 1. The system continues to the next NC block without waiting until the spindle is referenced so that the X axis is referenced quasi simultaneously: N10 G74 S1 N15 G74 X1 Y2 3rd Axes X and Y are first referenced. Spindle referencing then starts: N10 G74 X1 Y2 N15 G74 S1 A detailed description of homing for axes and spindles is contained in the documentation [FCT-M1]. 2.8 Spindle functions 2.8.1 Feed forward Spindle position lag can be minimised by using speed and acceleration feedforward control. Spindle feedforward control is required especially to tap threads with an endlessly rotating spindle since both the path axes and the spindle must keep to the specified setpoints as far as possible without position lag if a good machining result is to be achieved. Conventional feedforward control This type of feedforward control is only possible for conventional drives and for drive simulation. The theoretical position lag is then calculated based on the current speed and acceleration and is added to the setpoint specified by the interpolator. The expected position lags can be calculated by the relation 32 Version: 1.05 TF5200 | Twin CAT 3 CNC Spindle
## Page 33

Description for constant speed and for constant acceleration. T is the drive time constant which can be set in the axis parameter list P- a AXIS-00225/ P-AXIS-00226. Maintaining the permissible axis acceleration values is taken into account when the feedforward control variable is added to the specified setpoint. The condition for the described equations is use of a P position controller whose velocity gain for linear axes or speed gain for rotation axes are essentially defined by the drive dynamics. Path fidelity If all axes of a system have the same k factor, there are no deviations from the specified path, neither with v straight ahead nor circular motion after stabilisation. A position lag is only executed according to the equations described above. Sampling time and prefiltering When velocity v and acceleration a are derived from differentiation of the distance, make sure that sampling times are sufficiently long to minimise undesirable quantisation noise. Improved response is also achieved by prefiltering v and a. For this reason, several values of v and a are averaged linearly. Settings Feedforward control leads to an increase in dynamic acceleration stress and an increase in control ranges. An improvement in path fidelity by feedforward control is only possible with position controller settings whose velocity or speed gain is less than the optimum values required for response to setpoint changes since otherwise there is an extreme inclination to overshoot. Coupling in feedforward control Activating or deactivating feedforward control during the motion may lead to oscillations. This is why it is necessary to use 'soft' coupling for feedforward control. This includes the maximum permitted axis acceleration values or maximum jerk (e.g. for the non-linear 'slope' function). This permits activation or deactivation of feedforward control as required at block boundaries without interrupting the motion. Wear and tear on the drive and also on the mechanics of the machine tool can be reduced by activating feedforward control for paths which require precise machining. Further information on the subject of feedforward control and parameterisation is contained in the description of functions [FCT-D2]. TF5200 | Twin CAT 3 CNC Version: 1.05 33 Spindle
## Page 34

Description Programming S[G135] Spindle feedforward control on S[G136] Specify weighting S[G137] Spindle feedforward control off With digital drive systems (e.g. SERCOS), feedforward control can be activated and parameterised in the drive. After homing and positioning with M19, the spindle is always stopped with exact stop. 34 Version: 1.05 TF5200 | Twin CAT 3 CNC Spindle
## Page 35

Description 2.8.2 Gear change activation The channel parameter P-CHAN-00052 (main_spindle_gear_change) enables gear changes and the related reserved use of the M functions M40-45. Gear changes can only be programmed for the main spindle in DIN syntax [PROG//Gear change]. 6 gear speeds or data records are available for programming in combination with the S word and M40 - M45 functions. After start-up of the NC controller, the default gear speed specified in the axis machine data record P-AXIS-00079 (getriebe_stufe) is activated. Approach the change position The rapid traverse velocity specified in the axis machine data record P-AXIS-00209 (vb_eilgang) moves the axis to the change position of the current gear P-AXIS-00078 (getr_schalt_pos). If the gear has no preferred direction, the direction of rotation is selected to optimise the motion path. The change operation is normally undertaken by the PLC. Adjustments must be made in the NC controller to adopt the parameters of the new gear. A distinction must be made between two cases here: 1. The measuring system is coupled to the motor shaft. Depending on the gear speed, the measuring system resolution must be adapted (factors in the axis machine records: P-AXIS-00233 (wegaufz), P- AXIS-00234 (wegaufn). 2. The measuring system is coupled to the gear shaft. The measuring system resolution must be re- tained and the control dynamics of the gear speed must be adapted. Factors in the axis machine data record: P-AXIS-00128 (multi_gain_n), P-AXIS-00129 (multi_gain_z), P-AXIS-00099 (kv). Parameterise the speed ranges Each of the 6 gear speeds covers a specific speed range which is defined by a minimum P-CHAN-00058 (min_speed) and a maximum P-CHAN-00055 (max_speed) speed (unit: rpm). Speed range overlaps are permitted. The minimum and maximum speeds of the unused speed ranges must be assigned the value 0. Automatic gear speed selection When automatic gear speed selection P-CHAN-00004 (autom_range=1) is used, the gear speed from the programmed speed S is defined using the speed table. The M functions M45 are not programmed. The parameter P-CHAN-00074 (range_way) specifies the direction in which the automatic gear speed selection searches for the suitable speed range in the table during gear speed selection (from speed 1 to 6 ("bottom up") or from speed 6 to 1 ("top down")). Manual gear speed selection Manual gear speed selection P-CHAN-00004 (autom_range= 0) requires programming of the M functions M40 - M45 together with the speed S. A message is output if the speed S is not within the programmed speed range. Minimise change operations Generally, the control system attempts to minimise change operations. A gear speed selection is not executed if a new speed is run at the current gear speed. Configuration example Definition of M40 - 45 and synchronisation methods. m_synch[1] 0x00000001 MOS TF5200 | Twin CAT 3 CNC Version: 1.05 35 Spindle
## Page 36

Description m_synch[2] 0x00000002 MVS_SVS : m_synch[40] 0x00000002 MVS_SVS m_synch[41] 0x00000002 MVS_SVS m_synch[42] 0x00000002 MVS_SVS m_synch[43] 0x00000002 MVS_SVS m_synch[44] 0x00000002 MVS_SVS m_synch[45] 0x00000002 MVS_SVS m_synch[48] 0x00000008 MNS_SNS m_synch[49] 0x00000002 MVS_SVS Enabling the M functions M40-45 and gear changing: : main_spindle_gear_change 1 0: OFF 1: ON : Parameterise the spindle gear (search direction, speed ranges): spindel[0].range_way 0 0:bottom up 1:top down # spindel[0].range_table[0].min_speed 50 (M40) spindel[0].range_table[0].max_speed 560 (M40) spindel[0].range_table[1].min_speed 400 (M41) spindel[0].range_table[1].max_speed 800 (M41) spindel[0].range_table[2].min_speed 700 (M42) spindel[0].range_table[2].max_speed 3500 (M42) spindel[0].range_table[3].min_speed 3501 (M43) spindel[0].range_table[3].max_speed 4000 (M43) spindel[0].range_table[4].min_speed 3800 (M44) spindel[0].range_table[4].max_speed 5500 (M44) spindel[0].range_table[5].min_speed 5400 (M45) spindel[0].range_table[5].max_speed 7000 (M45) # 36 Version: 1.05 TF5200 | Twin CAT 3 CNC Spindle
## Page 37

Description U/min 7000 P-AXIS-00055 M45 5400 P-AXIS-00058 „top down“ 800 P-AXIS-00074 P-AXIS-00055 „bottom up“ M41 560 P-AXIS-00055 Overlapping P-AXIS-00058 400 M40 P-AXIS-00058 50 Gear step 1 2... ...6 Fig. 13: Define the speed ranges according to the example Automatic gear stage determination: ON : spindel[0].autom_range 1 : NC program: S650 M03 OK, M41→ PLC S750 OK, no change, M41 already selected S950 OK, automatic change, M42 → PLC S1050 OK, no change, M42 already selected S750 OK, automatic change, M41 → PLC S500 OK, no change, M41 already selected S350 OK, no change, M41 already selected S8000 Error, speed too high A programmed gear stage is always checked: M41 S750 OK, "automatic" change, M41 → PLC ..but M40 S750 Error, wrong gear stage TF5200 | Twin CAT 3 CNC Version: 1.05 37 Spindle
## Page 38

Description Determine the automatic gear stage: OFF : spindel[0].autom_range 0 : NC program: M41 S650 M03 OK, M41 → PLC M41 S750 OK, no change, M41 already selected M42 S950 OK, change, M42 → PLC M42 S1050 OK, no change, M41 already selected M41 S750 OK, change, M41 → PLC M41 S500 OK, no change, M41 already selected M41 S350 OK, no change, M41 already selected M41 S200 Error, program different gear stage (M40) S950 Error, no gear stage (M42) programmed 38 Version: 1.05 TF5200 | Twin CAT 3 CNC Spindle
## Page 39

Description 2.8.3 Synchronous operation When synchronous operation is active, spindle commanding for coupled spindle axes is mapped by the master spindle onto the slave spindles, i.e. implicit parallel command of slave axes takes place. Coupling specifications for spindle axes are defined analogously to those of path axes [PROG//Synchronous operation]. Coupled spindles are commanded in parallel. Setpoints are not coupled synchronously with cycles. There is no need for the separate commands for slave spindles for speed or positioning commands otherwise required in the NC program or for the technology functions and their acknowledgements. Z1 Y1 Z2 Y2 C1 S1 C2 X S2 Fig. 14: Example of a machine structure for synchronous operation with spindles Characteristics: 2-axis systems with one common X axis Master system: X, Y1, Z1,C1, S1 Slave system: Y2, Z2, C2, S2 Default assignment in channel parameters In the channel parameters [CHAN//Synchronous mode settings] spindles can be assigned defaults for synchronous mode as coupling pairs in coupling group 0: TF5200 | Twin CAT 3 CNC Version: 1.05 39 Spindle
## Page 40

Description Parameter P-CHAN-00037 Logical no. of master axis P-CHAN-00038 Logical no. of slave axis P-CHAN-00061 Mode (for spindle axis: 1) Axis coupling defaults: koppelgruppe[0].paar[i].log_achs_nr_slave log. no. slave axis koppelgruppe[0].paar[i].log_achs_nr_master log. no. master axis koppelgruppe[0].paar[i].mode Spindle axis (1) i: coupling pair koppelgruppe[0].paar[0].log_achs_nr_slave 6 koppelgruppe[0].paar[0].log_achs_nr_master 1 koppelgruppe[0].paar[0].mode Programming Synchronous mode of spindles is programmed in the NC program by means of the following NC commands [PROG//Selecting and deselecting axis couplings]: Definition of a coupling specification: #SET AX LINK[…] Select synchronous mode: #ENABLE AX LINK[…] Deselect synchronous mode: #DISABLE AX LINK The default assignments in the channel parameters can be selected in the NC program #ENABLE AX LINK[0] with Synchronous mode for spindles cannot be used in combination with rotary functions. 40 Version: 1.05 TF5200 | Twin CAT 3 CNC Spindle
## Page 41

Description 2.8.4 Curve-controlled acceleration Servo and main spindle motors can perform better with digital drive technology than with analogue technology, i.e. the motors can be operated closer to their performance limits. To fully exploit a motor during acceleration, it can be operated at its commutation limit curve. This curve defines the maximum available torque as a function of speed. It has been observed that motors can sometimes output 1.5 to 2 times the torque at up to half the nominal speed compared to the nominal speed. For an endlessly rotating spindle, setpoint generation can be set to such a speed-dependent acceleration curve. Typically the acceleration curve is constant in the lower speed range and then drops after a speed limit n limit according to a specified curve: a B n n limit Fig. 15: Acceleration curve as a function of speed As this acceleration curve varies for individual spindle gears, a corresponding data record must be provided for each gear. Two methods are provided to define the acceleration curve and they can be selected by the machine parameter P-AXIS-00202. TF5200 | Twin CAT 3 CNC Version: 1.05 41 Spindle
## Page 42

Description 2.8.4.1 Method 1: Characteristic curve a(n) in polynomial- or hyperbola form In the range above the limit speed, the current acceleration is optionally specified by a third-order polynomial or by a hyperbola function. In the case of both characteristics, a constant acceleration a is used in the konst range below n . This corresponds to acceleration at nominal speed. The curves apply to both the speed grenz build-up and slow-down phases. a[°/s2] Polynomial: a(n) = b Dn3+b Dn2+b Dn+a 3 2 1 const with Dn = n-n limit a Hyperbole: a(n) = b const 1 with n = n/n 1+b n 2(1+b n 2) ng limit 2 ng 3 ng a min n[°/s] n limit Fig. 16: Profile of acceleration based on a polynomial or hyperbole Interpolation points on the drive curve a(n) are used to determine the coefficients of the curves. 4 or 3 interpolation points are required to determine them. One interpolation point P1=(n (a(n )) is already defined by the parameter for constant acceleration a and 1, 1 konst the limit speed n and the user can define the remaining 3 or 2 on the drive characteristic a(n). It is best for grenz the abscissa values to be at a constant distance. The equations to determine the coefficients are listed below. 42 Version: 1.05 TF5200 | Twin CAT 3 CNC Spindle
## Page 43

Description a[°/s2] n limit a(n ) 1 = a const a(n ) 2 a(n ) 3 a(n ) 4 n[°/s] n n n n 1 2 3 4 Fig. 17: Acceleration profile based on polynomial or hyperbole with interpolation points TF5200 | Twin CAT 3 CNC Version: 1.05 43 Spindle
## Page 44

Description Polynomial , relative speed Example of curve determination Interpolation point Acceleration a [°/s2] Speed n [°/s] 1 16000 12000 2 8000 24000 3 4000 36000 4 2000 48000 a = 16000 [°/s2] to n = 12000 [°/s] const limit The following is obtained for the coefficients: b3 = -1.92901234E-10 [s/°2] b2 = 2.08333333E-5 [1/°] b1 = -0.88888888 [1/s] b0 = a = 16000 [°/s2] konst 44 Version: 1.05 TF5200 | Twin CAT 3 CNC Spindle
## Page 45

Description As from nominal speed (n ) the characteristic profile is as follows:: limit 18000 16000 14000 12000 10000 a[°/s] 8000 6000 4000 2000 0 0 5000 10000 15000 20000 25000 30000 35000 40000 n-n [°/s] limit Fig. 18: Curve profile for nominal speed n with polynomials limit Hyperbola , normalised speed, TF5200 | Twin CAT 3 CNC Version: 1.05 45 Spindle
## Page 46

Description Example of curve determination Interpolation point Acceleration a [°/s2] Speed n [°/s] 1 16000 12000 2 8000 24000 3 4000 36000 4 2000 48000 A_konst = 16000[degrees/s2] to n = 12000 [degrees/s] konst limit The following is obtained for the coefficients: b2 = 4.166666E-1[] b3 = 2.857142E-2[] b1 = 2.285714E4[°/s2] As from nominal speed (n ) the characteristic profile is as follows:: limit 18000 16000 14000 12000 10000 a[°/s2] 8000 6000 4000 2000 0 1 1,5 2 2,5 3 3,5 4 4,5 n/n limit Fig. 19: Curve profile for nominal speed n with hyperbola limit 46 Version: 1.05 TF5200 | Twin CAT 3 CNC Spindle
## Page 47

Description Parameter P-AXIS-00202 Type: 1 (hyperbola) or 2 (polynomial) P-AXIS-00130 Limit speed n limit P-AXIS-00007 Constant acceleration a for n<n const limit P-AXIS-00010 Minimum acceleration a min P-AXIS-00026 Coefficient b1 P-AXIS-00027 [} 78] Coefficient b2 P-AXIS-00028 [} 78] Coefficient b3 Parameterisation examples # beschl_kennlinie.typ 1 Hyperbola shape beschl_kennlinie.a_min 1400 [°/s*s] beschl_kennlinie.n_grenz 12000000 [10-3 °/s] beschl_kennlinie.a_konst 16000 [°/s*s] beschl_kennlinie.b1 2.285714E4 [°/s*s] beschl_kennlinie.b2 4.166666E-1 [] beschl_kennlinie.b3 -2.857142E-2 [] # # beschl_kennlinie.typ 2 Polynomial shape beschl_kennlinie.a_min 2000 [°/s*s] beschl_kennlinie.n_grenz 12000000 [10-3 °/s] beschl_kennlinie.a_konst 16000 [°/s*s] beschl_kennlinie.b1 -0.88888888 [1/s] beschl_kennlinie.b2 2.08333333E-5 [1/°] beschl_kennlinie.b3 -1.92901234E-10 [s/°²] # TF5200 | Twin CAT 3 CNC Version: 1.05 47 Spindle
## Page 48

Description 2.8.4.2 Method 2: Characteristic curve for asynchronous drives Asynchronous motors are often used for spindle drives. You can achieve optimised adaptation to typical characteristic of such spindle drives using the speed-dependent spindle acceleration curve a=f(n) shown in the figure below. a[°/s2] a_max a_max*N1/n a_max*N1/n*N2/n a_min n[°/s] N N 1 2 Fig. 20: Acceleration profile with asynchronous drive curve Besides the maximum permitted acceleration a_ , speed N for the constant acceleration range, you need max 1 only parameterise an additional speed N and the upper minimum acceleration a . Acceleration is constant 2 min up to the speed N . Above N , acceleration is proportional to 1/n, and above N it is proportional to 1/n2. 1 1 2 N =10000 °/s N =20000 °/s, a =16000 °/s2 1 2 max Above the nominal speed (n ) the characteristic profile is as follows: limit 48 Version: 1.05 TF5200 | Twin CAT 3 CNC Spindle
## Page 49

Description 18000 16000 14000 12000 10000 a[°/s] 8000 6000 4000 2000 0 0 5000 10000 15000 20000 25000 30000 35000 40000 n-n [°/s] limit Fig. 21: Curve profile above nominal speed Parameter P-AXIS-00202 Curve type 3: Asynchronous drive P-AXIS-00010 Minimum acceleration a min P-AXIS-00240 Maximum acceleration a for n<N max 1 P-AXIS-00241 Speed limit N for maximum torque 1 P-AXIS-00242 Speed limit N for maximum output 2 Parameterisation example getriebe[0].beschl_kennlinie.typ 3 Asynchronous drive getriebe[0].beschl_kennlinie.a_max 16000 [°/s²] getriebe[0].beschl_kennlinie.a_min 4000 [°/s*s] getriebe[0].beschl_kennlinie.n1 10000000 [10-3 °/s] getriebe[0].beschl_kennlinie.n2 20000000 [10-3 °/s] TF5200 | Twin CAT 3 CNC Version: 1.05 49 Spindle
## Page 50

Description 2.8.5 Tool-related dynamic limiting for spindles The dynamic behaviour of spindles can be modified by a tool change depending on the entry in the tool data. Spindle behaviour can then be adapted to the permissible dynamic loads of the tool. The tool is assigned in the tool data [TOOL] to a spindle via the logical axis number. The tool dynamic data takes effect automatically on transition of the spindle from standstill to interpolation after programming a new tool (D word, #TOOL DATA). After deselecting the tool, the dynamic curves of the tool last selected remain valid. Parameter P-TOOL-00012 Logical axis number of the spindle axis P-TOOL-00013 Minimum speed P-TOOL-00014 Maximum speed P-TOOL-00015 Maximum acceleration Tool-related dynamics limiting wz[i].log_ax_nr_spdl 6 wz[i].vb_min 60000 [10-3 °/s] wz[i].vb_max 3000000 [10-3 °/s] wz[i].a_max 3000 [°/s2] Programming D word or #TOOL DATA Adoption of new dynamic curve parameters can be deactivated by entering the logical axis number 0. 50 Version: 1.05 TF5200 | Twin CAT 3 CNC Spindle
## Page 51

Description 2.8.6 Thread drilling without compensating chuck (G63) Syntax example of tapping in Z direction: G63 Z.. F.. <spindle_name>.. modal G63 Thread tapping Z.. Thread depth (target point) in the tapping axis in [mm, inch] F.. Feed rate in [mm/min, m/min, inch/min] <spindle_name>.. Spindle speed consisting of spindle name according to P-CHAN-00053 and speed value in [rpm] With this kind of tapping (G63) the position-controlled spindle is tracked by the CNC synchronously to the path motion. In this case the spindle and the feed motion of the participating axes are matched precisely and dynamically. A compensatory chuck is not required. The programmed feed rate must match the programmed spindle speed and the thread pitch and is calculated as follows: Feed rate F [mm/min] = speed S [rpm] * pitch [mm/rev] G63 is deselected by the selecting a different modal block type (e.g. linear motion G01). A non-modal block type (e.g. dwell time with G04) does not deactivate G63. The path feed rate (F word) and spindle speed (S word) do not necessarily need to be specified in the same NC block as G63. The feed rate calculation must always be based on the last values programmed. An error message is output if the path feed rate or spindle speed are equal to zero with G63 is selected. M03, M04, M05, M19 cannot be programmed in combination with G331/G332. NOTICE The spindle (or the thread tapping drill) must be at standstill when G63 is selected. This can be achieved by previously programming M05 (Stop spindle) or M19 with S. POS (Position spindle). Cutting a left-hand thread or movement out of a thread hole is programmed with a negative S value. In C axis mode, the gear stage can be defined using the parameter P-AXIS-00052. TF5200 | Twin CAT 3 CNC Version: 1.05 51 Spindle
## Page 52

Description Tapping (G63) Tap a right-hand thread with pitch 1.25 mm, thread depth 50 mm. At a programmed spindle speed S of 200 rpm the calculated feedrate is: F = 200*1.25 = 250 mm/min ;… G01 F2000 G90 X0 Y0 Z0 ; position axes M19 S. POS=0 M3 S100 ; stop and position spindle ;… G63 Z-50 F250 S200 ; tap Z0 S-200 ; retract from threaded bore G01 F1000 X100 ; reposition, deselect tapping : Tapping (G63) %Tapping_G63 N05 X0 Y0 Z0 N10 G91 Z100 N20 M19 S. POS180 M3 S100 ; position spindle N30 G63 Z-50 F300 S200 ; tap N40 Z100 S-200 ; retract from threaded bore N50 G01 X200 F3000 ; reposition, deselect tapping N60 G63 Z-70 F300 S200 ; tap N70 Z100 S-200 ; retract from threaded bore N80 M05 G01 X300 F1000 N90 M30 A thread can also be executed in a rotating workpiece using G63 or G331/G332. The thread tapping drill feedrate results from the speed difference between the tool spindle and the driven thread tapping drill. Before starting the actual tapping, the spindle with the thread tapping drill must be coupled to the workpiece spindle at a synchronous speed. No spindle stop is required to start tapping or to establish the speed coupling. The process can be started on the fly both for the tool and the workpiece spindles. 52 Version: 1.05 TF5200 | Twin CAT 3 CNC Spindle
## Page 53

Description 2.8.7 Thread cutting with endlessly rotating spindle (G33) Single-start/multi-start threads When thread cutting with an endlessly rotating spindle (G33), the path motion is synchronised to the zero passage of the spindle rotation. Therefore, the thread can also be cut in several passes in succession. When an offset angle is specified as option, multi-start threads can also be produced. To achieve a good machining result and to minimise path errors, feedforward control can be selected for the spindle and for path axes. Programming Syntax example for ZX plane (longitudinal axis Z, feed axis X): G33 Z.. K.. [ <spindle_name>. OFFSET=.. ] modal G33 Thread cutting with endlessly rotating spindle. The G33 function is modal. The next motion block with a modal block type (G00, G01, G02, G03, spline, polynomial) deselects thread cutting. Z.. Target point ("thread length”) in [mm, inch] K.. The thread pitch is programmed with active thread cutting in the unit [mm/rev, inch/ rev] without a mathematical sign using the address letters I, J and K. They are assigned to the X, Y and Z axes according to DIN 66025. The thread pitch is modal up to program end and should not be zero on when G33 is selected. The feed is not programmed using the F word but results from the spindle speed and the thread pitch. The pitch of longitudinal or tapered threads at an inclination angle less than 45° is specified by the address letter K if the Z axis is the longitudinal turning axis. With facing or tapered threads with a pitch greater than or equal to 45°, the pitch is specified by I if the X axis is used as the face turning axis, and by J if the Y axis is used. The figure below shows examples for specifying thread pitch using the address letters in the Z-X plane. <spindle_name>. OFFS Thread offset angle in [°] in spindle modulo range. Only required as an option for ET=.. multi-turn threads. The offset angle is modal up to program end. Spindle name according to P-CHAN-00053. The "=” character is optional. TF5200 | Twin CAT 3 CNC Version: 1.05 53 Spindle
## Page 54

Description Pitch values I, K with longitudinal thread K I X Z Fig. 22: Value of thread pitch for longitudinal thread Pitch values I, K with tapered thread K I a X Z Fig. 23: Value of thread pitch for tapered thread 54 Version: 1.05 TF5200 | Twin CAT 3 CNC Spindle
## Page 55

Description Thread cutting with endlessly rotating spindle (G33) G33 Z.. K.. [S. OFFSET=..] Fig. 24: Representation of geometry example TF5200 | Twin CAT 3 CNC Version: 1.05 55 Spindle
## Page 56

Description Cutting a longitudinal thread (M70x1.5) with several cuts: %L longit_thread N100 G33 Z48 K1.5 ;Cut thread turn N110 G00 X72 ;Retract and move N120 Z105 ;to start position N130 M29 ;Subroutine end %G33 (thread depth 0.92 mm) N10 G51 ;Select diameter programming N15 T1 D1 M03 S400 ;Select tool, start spindle N20 G00 X72 Z105 ;Approach N25 G01 X69.54 F1000 ;Position at 1st cutting depth N30 LL longitudinal thread ;1st thread cut N35 G01 X69.08 ;Position at 2nd cutting depth N30 LL longitudinal thread ;2nd thread cut N35 G01 X68.62 ;Position at 3rd cutting depth N30 LL longitudinal thread ;3rd thread cut N35 G01 X68.16 ;Position at final depth N30 LL longitudinal thread ;4th thread cut N35 G01 X68.16 ;Reposition at final depth N30 LL longitudinal thread ;Empty cut N60 M05 X150 Z200 ;Moving to end position N65 M30 ;Program end Cut a 2-turn longitudinal thread (M70x1.5) %G33_2 (2-turn thread, thread depth 0.92 mm) N10 G51 ;Select diameter programming N15 T1 D1 M03 S40 ;Select tool, start spindle N20 G00 X72 Z105 ;Approach N25 G01 X68.16 F1000 ;Position at thread depth N30 G33 Z48 K1.5 ;Cut 1st thread turn N35 G00 X72 ;Retract and move N40 Z105 ;to next N45 G01 X68.16 ;start position N50 G33 Z48 K1.5 S. OFFSET=180 ;Cut 2nd thread turn at 180° N55 G00 X72 ;Retract and move N60 M05 X150 Z200 ;to end position N65 M30 ;Program end 56 Version: 1.05 TF5200 | Twin CAT 3 CNC Spindle
## Page 57

Description Cutting a tapered thread %L tapered thread N010 G33 Z90 X1 I5.0 ;Cut thread turn (reference I) ; N010 G33 Z90 X1 K5.0 ;Cut thread turn (reference K) N020 G00 X72 ;Retract and move N030 Z105 ;to start position N040 M29 ;Subroutine end %G33 N050 G00 X0 Y0 Z0 N060 G18 N070 G51 ;Select diameter programming N080 D1 M03 S1 ;Select tool, start spindle N090 G00 X105 Z105 ;Start N100 G01 X100 F1000 ;Position at 1st cutting depth N110 LL tapered thread ;1st thread cut N120 M05 X150 Z200 ;Move to end position N130 M30 ;Program end TF5200 | Twin CAT 3 CNC Version: 1.05 57 Spindle
## Page 58

Description 2.8.8 C-axis machining (face and lateral surface machining) This functionality permits the face and lateral surface machining of cylindrical workpieces on machines with a rotary axis for workpiece mounting (e.g. lathes or milling machines with turntables). The workpiece is moved by the rotary axis or spindle (C axis) and the driven tool (e.g. a milling cutter) by the two translatory axes X (or Y) and Z. The type of machine used for face machining is defined in the machine parameter P-CHAN-00008. The axis must be marked by the axis parameter P-AXIS-00015 as an axis for kinematic C axis transformation. Facing and lateral surface machining can be described in Cartesian coordinates. Spindle as channel axis The main spindle is changed to a rotary path axis (e.g. "C"). Programming #CAX [...] #CAX OFF Face machining #FACE[...] #FACE OFF Lateral surface machining #CYL #CYL OFF Parameter P-CHAN-00008 The type of machine used for face machining P-AXIS-00015 Axis mode for kinematic C axis transformation Fig. 25: Face and lateral surface machining 2.8.9 Turning functions For a further description of turning functions, refer to the programming manual [PROG] 58 Version: 1.05 TF5200 | Twin CAT 3 CNC Spindle
## Page 59

Description Cutter radius compensation Tool tip radius compensation acts in the machining plane selected using G17, G18, G19. In this plane, one of the axes must be operated in "facing" mode and the other in "longitudinal turning" mode (P-AXIS-00015 (achs_mode)). Programming G40/G41/G42 Feedrate per revolution During turning with active G95, a constant chip thickness can be defined with the F Word in mm/rev irrespective of spindle speed (rpm). Here, the axis feedrate is linked to the rotational speed (rpm) of the NC spindle. Programming G95 Constant cutting speed To achieve a constant relative speed between the workpiece and the turning tool for all machining diameters during turning, the spindle speed is coupled to the distance of the feed axis from the turning centre. Programming G96, G97, G196 TF5200 | Twin CAT 3 CNC Version: 1.05 59 Spindle
## Page 60

Description 2.9 HLI interface objects (NCK PLC interface) For a description of the spindle-specific data available at the PLC interface, refer to the separate documentation entitled "HLI interface" [HLI]. Overview Speeds • Nominal speed • Actual speed • Speed programmed Positions • Target position • Actual position Status information • Operating state • Speed monitoring active • Nominal speed reached • Spindle stopped • Speed monitoring invalid • Distance to go • Job error Control commands • Spindle stop at program end • Spindle reset External spindle command Everything that can be commanded via the channel can also be commanded via the external interface. 60 Version: 1.05 TF5200 | Twin CAT 3 CNC Spindle
## Page 61

Parameter 3 Parameter 3.1 Overview of channel, axis and tool parameters ID Parameter Description P-CHAN-00004 autom_range Automatic gear speed change P-CHAN-00007 bezeichnung Spindle designation P-CHAN-00008 cax_face_id Face machining variant (turning/milling) P-CHAN-00010 default_ax_name_of_s Name of the spindle as channel axis pindle P-CHAN-00036 log_achs_nr Spindle axis number P-CHAN-00037 log_achs_nr_master Master axis P-CHAN-00038 log_achs_nr_slave slave axis P-CHAN-00043 m19_synch Synchronisation type of the M19 function P-CHAN-00045 m3_synch Synchronisation type of the M03 function P-CHAN-00047 m4_synch Synchronisation type of the M04 function P-CHAN-00049 m5_synch Synchronisation type of the M05 function P-CHAN-00051 main_spindle_ax_nr Definition of Main Spindle P-CHAN-00052 main_spindle_gear_ch Enabling gear changes ange P-CHAN-00053 main_spindle_name Main spindle designation P-CHAN-00055 max_speed Speed range limits P-CHAN-00058 min_speed Speed range limits P-CHAN-00061 mode Coupling mode P-CHAN-00069 plc_control PLC-controlled spindle via channel interface P-CHAN-00074 range_way Search direction in the speed range table P-CHAN-00081 s_synch Synchronisation method of the S function P-CHAN-00082 spdl_anzahl Number of spindles in the channel ID Parameter Description P-AXIS-00007 a_konst Constant acceleration P-AXIS-00010 a_min Acceleration minimum P-AXIS-00015 achs_mode Axis mode P-AXIS-00016 achs_nr axis number P-AXIS-00018 achs_typ Axis type P-AXIS-00020 antr_typ Drive type P-AXIS-00026 b1 Coefficient P-AXIS-00027 b2 Coefficient P-AXIS-00028 b3 Coefficient P-AXIS-00031 beweg_richt Direction of rotation for rotary axes P-AXIS-00041 n1 Speed limit 1 for maximum torque P-AXIS-00078 getr_schalt_pos Gear speed change position P-AXIS-00079 getriebe_stufe Number of default gear speed P-AXIS-00099 kv Proportional factor kv for P-positional control P-AXIS-00120 mod_komp Activation of modulo compensation P-AXIS-00124 modulo_fehler Modulo error compensation P-AXIS-00125 modulo_umdreh Number of revolutions P-AXIS-00126 moduloo Upper modulo range limit P-AXIS-00127 modulou Lower modulo range limit TF5200 | Twin CAT 3 CNC Version: 1.05 61 Spindle
## Page 62

Parameter P-AXIS-00128 multi_gain_n Adjustment of the drive manipulated variable to the D/A converter P-AXIS-00129 multi_gain_z Adjustment of the drive manipulated variable to the D/A converter P-AXIS-00130 n_grenz Limit speed P-AXIS-00156 ref_ohne_nocken Referencing without cam P-AXIS-00157 ref_ohne_rev Referencing without reversal P-AXIS-00159 reverse Nominal/actual sign reversal in the position controller at +/- 10 V P-AXIS-00202 typ Curve type P-AXIS-00205 v_reso_denom Speed scaling denominator P-AXIS-00206 v_reso_num Speed scaling nominator P-AXIS-00207 v_time_base Timebase for speed scaling P-AXIS-00209 vb_eilgang Rapid traverse velocity P-AXIS-00216 vb_min_null Limit for speed == 0 for speed monitoring P-AXIS-00217 vb_prozent Factor for spindle speed reached P-AXIS-00220 vb_regelgrenze Speed for control limit P-AXIS-00224 vorz_richtung Restriction of direction of rotation for rotary axes P-AXIS-00233 wegaufn Distance resolution of measuring system P-AXIS-00234 wegaufz Distance resolution of measuring system P-AXIS-00240 a_max Maximum spindle acceleration P-AXIS-00242 n2 Speed limit 2 for maximum output P-AXIS-00265 velocity_position_contr Changeover speed ol_on P-AXIS-00266 velocity_position_contr Switch back speed ol_off ID Parameter Description P-TOOL-00012 log_ax_nr_spdl Logical axis number of the spindle P-TOOL-00013 vb_min Minimum speed P-TOOL-00014 vb_max Maximum speed P-TOOL-00015 a_max Maximum acceleration 62 Version: 1.05 TF5200 | Twin CAT 3 CNC Spindle
## Page 63

Parameter 3.2 Description 3.2.1 Channel parameters Overview This chapter describes the channel-specific parameter for configuring spindles. Note that only the spindles entered in the channel parameter list can also be addressed in the part program. This applies to both NC and PLC spindles. The spindle configuration defined in the channel parameter list is the default assignment which is provided after the controller is started up. P-CHAN-00082 Number of configured spindles in NC channel Description This element specifies the total number of existing position-controlled and speed- controlled spindles. The number of spindles must be identical with the entered spindles (spindel[i].*). Parameter spdl_anzahl Data type UNS16 Data range 0 ≤ spdl_anzahl ≤ 6 (application-specific) Dimension ---- Default value 0 Remarks Parameterisation example: A position-controlled and a speed-controlled spindle are to be configured. spdl_anzahl 2 P-CHAN-00010 Spindle name within a path compound Description If a spindle axis is changed with specific machining modes (e.g. C axis mode) in the path compound, it can be addressed by this default name (e.g. C1). Parameter default_ax_name_of_spindle Data type STRING Data range Maximum 16 characters (length of spindle designation, application-specific) Dimension ---- Default value * Remarks The designation of spindles in the path compound must start with the letters A, B, C, U, V, W, X, Y, Z or Q. After that, all letters and digits are possible. The axis designation must be unique. It may not be identical with the configured name of a channel axis (P- CHAN-00006). Parameterisation example: The C axis receives the designation C1. default_ax_name_of_spindle C1 * Note: The default value of variables is a blank string. P-CHAN-00051 Logical axis number of the main spindle in the NC channel Description This parameter assigns the definition of the main spindle. The logical axis number of one of the spindles which is configured in the channel parameters list is entered here. After the controller starts up, this spindle becomes the main spindle. However, any other spindle in the system can be declared to be the main spindle using a command in the part program (#MAIN SPINDLE [PROG]). Parameter main_spindle_ax_nr Data type UNS16 Data range 1 ... MAX(UNS16) Dimension ---- Default value 0 TF5200 | Twin CAT 3 CNC Version: 1.05 63 Spindle
## Page 64

Parameter Remarks Parameterisation example: The spindle with logical axis number 6 is the main spindle. main_spindle_ax_nr 6 P-CHAN-00053 Designation of the main spindle in the NC channel Description Besides the logical axis number, a name must be assigned to the main spindle by which it can be addressed in the subroutine. This parameter therefore assigns an axis name to the main spindle. The axis name is freely selectable, but the first character must be an 'S'. Parameter main_spindle_name Data type STRING Data range Maximum 16 characters (length of spindle designation, application-specific) Dimension ---- Default value * Remarks The designation of the main spindle cannot be changed in the subroutine. However, if the main spindle is changed using #MAIN SPINDLE (see [PROG]), the new main spindle is assigned. Parameterisation example: The main spindle (logical axis number 6) is programmed in the subroutine with the name 'S'. main_spindle_ax_nr 6 main_spindle_name S * Note: The default value of variables is a blank string. P-CHAN-00008 Machine ID with C axis face machining Description This parameter defines the type of machine used for face machining. Parameter cax_face_id Data type UNS16 Data range 1: Lathe (automatic orientation of the rotary axis in the centre of rotation) 2: Milling machines (no orientation) Dimension ---- Default value 0 Remarks Parameterisation example: Face machining takes place on a milling machine. cax_face_id 2 P-CHAN-00036 Logical axis number of a spindle in NC channel Description The logical axis number is entered in this parameter. The logical axis name is unique throughout the entire system. The logical axis number assigns the spindle name in the NC program to the axis data (see axis parameters lists in [AXIS]). Therefore only logical numbers make sense if they are known to the NC program. The logical axis number "0" is not permitted. Parameter spindel[i].log_achs_nr Data type UNS16 Data range 1... MAX(UNS16) Dimension ---- Default value - Remarks A logical axis number may not be assigned several times. A logical axis number may not be simultaneously configured as path axis and spindle. If this is the case, the plausibility check of the channel parameters generates an error message at start-up. P-CHAN-00007 Name of a spindle in the NC channel Description This parameter defines the default name to address the spindle in the NC program. Please note that as long as a spindle is the main spindle, it can only be programmed using the main spindle name. The spindle name is a string. Parameter spindel[i].bezeichnung Data type STRING 64 Version: 1.05 TF5200 | Twin CAT 3 CNC Spindle
## Page 65

Parameter Data range Maximum 16 characters (length of spindle designation, application-specific) Dimension ---- Default value * Remarks The spindle names must start with the letter ‘S’. After that, all letters and digits are possible. Spindle names must be unique. Parameterisation example: Configuration of a 1-channel system with 3 spindles. After start-up, spindle 'S1' with logical axis number 6 is the main spindle. It is addressed by the spindle name 'S'. The spindles with logical axis numbers 11 and 30 are programmed by their default names 'S2' and 'S3'. spdl_anzahl 3 : main_spindle_ax_nr 6-> -> ->- main_spindle_name S ->- / # / / spindel[0].bezeichnung S1-<- / spindel[0].log_achs_nr 6-< -< -<- : spindel[1].bezeichnung S2 spindel[1].log_achs_nr 11 : spindel[2].bezeichnung S3 spindel[2].log_achs_nr 30 * Note: The default value of variables is a blank string. P-CHAN-00069 Spindle control by PLC via channel specific interface Description This parameter is set to TRUE if a spindle is controlled directly by the PLC and not by a spindle interpolator in the NC channel. Note here that all synchronisations are no longer (spindle) axis-specific but are output and processed by the channel-specific HLI range. The axis-specific syntax for programming spindle commands is still allowed, but is limited to specifying the speed and the M functions M3/M4/M5/M19. Parameter spindel[i].plc_control Data type BOOLEAN Data range 0/1 Dimension ---- Default value 0 Remarks Synchronisation definitions P-CHAN-00081 Synchronisation type of the spindle S function Description This parameter defines the synchronisation type of the spindle S function. The synchronisation type is defined as a string constant or a hexadecimal value. Parameter spindel[i].s_synch Data type STRING Data range See Spindle-specific synchronisation types Dimension ---- Default value NO_SYNCH Remarks Parameterisation example: For a (position-controlled) spindle 'S1' the spindle function is executed without synchronisation. The PLC is not informed. spindel[0].bezeichnung S1 spindle[0].log_achs_no 6 spindel[0].s_synch MOS 0x00000001 spindle[0].m3_synch PLC_INFO | MVS_SVS 0x00020002 spindle[0].m4_synch PLC_INFO | MVS_SNS 0x00020004 spindle[0].m5_synch PLC_INFO | MVS_SVS 0x00020002 spindle[0].m19_synch MNS_SNS 0x00000008 Note: Programming a UNS32 variable is permissible for downward compatibility reasons. Example: spindle[0].s_synch 0x00000001 TF5200 | Twin CAT 3 CNC Version: 1.05 65 Spindle
## Page 66

Parameter P-CHAN-00045 Synchronisation type for M03 Description When the M03 function is used, the synchronisation type must be defined for the spindles used. The synchronisation type is defined as a string constant or a hexadecimal value. Parameter spindel[i].m3_synch Data type STRING Data range See Spindle-specific synchronisation types Dimension ---- Default value NO_SYNCH Remarks Parameterisation example: For a (position-controlled) spindle 'S1', the spindle- specific M function M03 is assigned the synchronisation type MVS_SVS. The PLC is also informed. spindel[0].bezeichnung S1 spindle[0].log_achs_no 6 spindel[0].s_synch MOS 0x00000001 spindel[0].m3_synch PLC_INFO | MVS_SVS 0x00020002 spindle[0].m4_synch PLC_INFO | MVS_SNS 0x00020004 spindle[0].m5_synch PLC_INFO | MVS_SVS 0x00020002 spindle[0].m19_synch MNS_SNS 0x00000008 Note: Programming a UNS32 variable is permissible for downward compatibility reasons. Example: spindel[0].m3_synch 0x00020002 P-CHAN-00047 Synchronisation type for M04 Description When the M04 function is used, the synchronisation type must be defined for the spindles used. The synchronisation type is defined as a string constant or a hexadecimal value. Parameter spindel[i].m4_synch Data type STRING Data range See Spindle-specific synchronisation types Dimension ---- Default value NO_SYNCH Remarks Parameterisation example: For a (position-controlled) spindle 'S1' the spindle- specific M function M04 is assigned the synchronisation type MVS_SNS. The PLC is also informed. spindel[0].bezeichnung S1 spindle[0].log_achs_no 6 spindel[0].s_synch MOS 0x00000001 spindel[0].m3_synch PLC_INFO | MVS_SVS 0x00020002 spindel[0].m4_synch PLC_INFO | MVS_SNS 0x00020004 spindle[0].m5_synch PLC_INFO | MVS_SVS 0x00020002 spindle[0].m19_synch MNS_SNS 0x00000008 Note: Programming a UNS32 variable is permissible for downward compatibility reasons. Example: spindel[0].m4_synch 0x00020004 P-CHAN-00049 Synchronisation type for M05 Description When the M05 function is used, the synchronisation type must be defined for the spindles used. The synchronisation type is defined as a string constant or a hexadecimal value. Parameter spindel[i].m5_synch Data type STRING Data range See Spindle-specific synchronisation types Dimension ---- Default value NO_SYNCH 66 Version: 1.05 TF5200 | Twin CAT 3 CNC Spindle
## Page 67

Parameter Remarks Parameterisation example: For a (position-controlled) spindle 'S1', the spindle- specific M function M05 is assigned the synchronisation type MVS_SVS. The PLC is also informed. spindel[0].bezeichnung S1 spindle[0].log_achs_no 6 spindel[0].s_synch MOS 0x00000001 spindel[0].m3_synch PLC_INFO | MVS_SVS 0x00020002 spindle[0].m4_synch PLC_INFO | MVS_SNS 0x00020004 spindel[0].m5_synch PLC_INFO | MVS_SVS 0x00020002 spindle[0].m19_synch MNS_SNS 0x00000008 Note: Programming a UNS32 variable is permissible for downward compatibility reasons. Example: spindel[0].m5_synch 0x00020002 P-CHAN-00043 Synchronisation type for M19 Description When the M19 function is used, the synchronisation type must be defined for the spindles used. The synchronisation type is defined as a string constant or a hexadecimal value. Parameter spindel[i].m19_synch Data type STRING Data range See Spindle-specific synchronisation types Dimension ---- Default value NO_SYNCH Remarks Parameterisation example: For a (position-controlled) spindle 'S1' the spindle- specific M function M19 is assigned the synchronisation type MNS_SNS. The PLC is also informed. spindel[0].bezeichnung S1 spindle[0].log_achs_no 6 spindel[0].s_synch MOS 0x00000001 spindel[0].m3_synch PLC_INFO | MVS_SVS 0x00020002 spindle[0].m4_synch PLC_INFO | MVS_SNS 0x00020004 spindle[0].m5_synch PLC_INFO | MVS_SVS 0x00020002 spindel[0].m19_synch MNS_SNS 0x00000008 Note: Programming a UNS32 variable is permissible for downward compatibility reasons. Example: spindel[0].m19_synch 0x00000008 Gear change Gear changing is only possible for the main spindle P-CHAN-00052 Enable mechanical gear change of main spindle Description This parameter enables or disables gear changes for the main spindle. Parameter main_spindle_gear_change Data type BOOLEAN Data range 0: Spindle gear changes disabled for the main spindle 1: Spindle gear changes enabled for the main spindle Dimension ---- Default value 0 Remarks The M functions to select the gear speeds of the main spindle M40–45 are activated by the parameter P-CHAN-00052 in the channel parameter list. The M functions M40–45 can be freely used if gear changes are disabled. P-CHAN-00074 Direction of range selection for spindle gear change Description This parameter defines whether the lower or the higher gear range is selected when speed ranges overlap. If 'range_way' = 0 the search starts from the lowest speed range, if 'range_way' > 0 from the highest. The correct speed (gear) range is the one where the programmed spindle speed is first found. TF5200 | Twin CAT 3 CNC Version: 1.05 67 Spindle
## Page 68

Parameter Parameter spindel[i].range_way Data type UNS16 Data range 0 ≤ range_way < MAX(UNS16) Dimension ---- Default value 0 Remarks Parameterisation example: The search starts from the lowest speed range. spindel[0].range_way 0 (from bottom to top) P-CHAN-00004 Automatic range selection for spindle gear change Description If the spindle gear range is to be be automatically determined by the NC kernel, this parameter must be set to 1. In this case the M functions M40 to M45 need not be programmed. This means that the correct gear range is determined implicitly by the programmed speed (S word). Parameter spindel[i].autom_range Data type BOOLEAN Data range 0/1 Dimension ---- Default value 0 Remarks Parameterisation example: The automatic range selection is enabled. spindel[0].autom_range 1 P-CHAN-00058 Minimum spindle speed of a speed range (spindle gear change) Description The speed ranges of a spindle may be defined with or without overlap. If one range is not used, the corresponding values must be set to zero in the table. Parameter spindel[i].range_table[j].min_speed Data type UNS16 Data range 0 ≤ min_speed ≤ MAX(UNS16) Dimension rpm Default value 0 Remarks Parameterisation example: Definition of a speed range table for 6 ranges. Only the first four ranges are used. spindel[0].range_table[0].min_speed 50 spindel[0].range_table[0].max_speed 560 spindel[0].range_table[1].min_speed 400 spindel[0].range_table[1].max_speed 800 spindel[0].range_table[2].min_speed 700 spindel[0].range_table[2].max_speed 3360 spindel[0].range_table[3].min_speed 3361 spindel[0].range_table[3].max_speed 4000 spindel[0].range_table[4].min_speed 0 spindel[0].range_table[4].max_speed 0 spindel[0].range_table[5].min_speed 0 spindel[0].range_table[5].max_speed 0 P-CHAN-00055 Maximum spindle speed of a speed range (spindle gear change) Description The speed ranges of a spindle may be defined with or without overlap. If one range is not used, the corresponding values must be set to zero in the table. Parameter spindel[i].range_table[j].max_speed Data type UNS16 Data range 0 ≤ max_speed ≤ MAX(UNS16) Dimension rpm Default value 0 Remarks Parameterisation example: Definition of a speed range table for 6 ranges. Only the first four ranges are used. spindel[0].range_table[0].min_speed 50 spindel[0].range_table[0].max_speed 560 68 Version: 1.05 TF5200 | Twin CAT 3 CNC Spindle
## Page 69

Parameter spindel[0].range_table[1].min_speed 400 spindel[0].range_table[1].max_speed 800 spindel[0].range_table[2].min_speed 700 spindel[0].range_table[2].max_speed 3360 spindel[0].range_table[3].min_speed 3361 spindel[0].range_table[3].max_speed 4000 spindel[0].range_table[4].min_speed 0 spindel[0].range_table[4].max_speed 0 spindel[0].range_table[5].min_speed 0 spindel[0].range_table[5].max_speed 0 Synchronous operation P-CHAN-00038 Logical axis number of the slave axis (synchronous operation) Description This parameter defines an axis as the slave axis. The logical axis number P- CHAN-00035 must then be specified. Parameter synchro_data.koppel_gruppe[i].paar[j].log_achs_nr_slave Data type UNS16 Data range 1 ... MAX(UNS16) Dimension ---- Default value 0 Remarks Parameterisation example: The axis with the logical number 3 is defined in the coupled axis pair[1] within the coupled axis group[0] as slave axis. synchro_data.koppel_gruppe[0].paar[1].log_achs_nr_slave 3 P-CHAN-00037 Logical axis number of the master axis (synchronous operation) Description This parameter defines an axis as the master axis. The logical axis number P- CHAN-00035 must then be specified. Parameter synchro_data.koppel_gruppe[i].paar[j].log_achs_nr_master Data type UNS16 Data range 1 ... MAX(UNS16) Dimension ---- Default value 0 Remarks Parameterisation example: The axis with the logical number 1 is defined in the coupled axis pair[1] within the coupled axis group[0] as the master axis. synchro_data.koppel_gruppe[0].paar[1].log_achs_nr_master 1 P-CHAN-00061 Mode of the coupled axis pair (synchronous operation) Description Since spindle axes can be coupled in addition to the synchronous operation of path axes, the type of coupling must be specified for each pair. The coupling type must therefore be entered in this parameter. Parameter synchro_data.koppel_gruppe[i].paar[j].mode Data type UNS16 Data range 0: Coupled axis pair consists of path axes 1: Coupled axis pair consists of spindle axes Dimension ---- Default value 0 TF5200 | Twin CAT 3 CNC Version: 1.05 69 Spindle
## Page 70

Parameter Remarks Parameterisation example: The coupled axis pair [0] within the coupled axis group [0] consists of path axes (mode 0) The coupled axis pair [1] within the coupled axis group [0] consists of spindle axes (mode 1). #synchro_data.koppel_gruppe[0].paar[0].log_achs_nr_slave 4 #synchro_data.koppel_gruppe[0].paar[0].log_achs_nr_master 1 #synchro_data.koppel_gruppe[0].paar[0].mode 0 #synchro_data.koppel_gruppe[0].paar[1].log_achs_nr_slave 11 #synchro_data.koppel_gruppe[0].paar[1].log_achs_nr_master 6 #synchro_data.koppel_gruppe[0].paar[1].mode 1 70 Version: 1.05 TF5200 | Twin CAT 3 CNC Spindle
## Page 71

Parameter 3.2.2 Axis parameters Overview Only the specific parameters for spindle axes are described here. Refer to the [AXIS] documentation for details on further parameters available for setting axes. P-AXIS-00015 Axis mode Description Axes can be traversed in different operating modes. Parameter kenngr.achs_mode Data type UNS32 Data range 0x00000001 - 0x10000000 Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0x00000001 Drive types ---- Remarks P-AXIS-00016 Logical axis number Description The logical axis number is a system-wide unique identifier for each axis. The entire management of axis data in the NC kernel takes place using the logical axis number. Parameter kopf.achs_nr Data type UNS16 Data range 0 < achs_nr < MAX(UNS16) Axis types T, R, S Dimension T: ---- R,S: ---- Default value 1 drive types. ---- Remarks It is not allowed to use the same logical axis number more than once. The logical axis number "0" is not allowed. The assignment of an axis designation in the NC program to a logical axis (axis number) takes place in the channel parameters [CHAN]. This entry is not adopted when the axis parameter list is updated. Updates only become effective when the controller is rebooted. P-AXIS-00018 Axis type (linear axis, rotary axes, spindle) Description This parameter specifies the axis type of an axis. Parameter kenngr.achs_typ Data type STRING Data range Linear axis (ACHSTYP_TRANSLATOR) : 0x0001 Rotary axis (ACHSTYP_ROTATOR) : 0x0002 Spindle (ACHSTYP_SPINDEL): : 0x0004 Axis types T, R, S Dimension T: ---- R,S: ---- Default value ACHSTYP_TRANSLATOR Drive types ---- Remarks Depending on the axis type that is set, special functionalities are addressed in the NC kernel. Examples: - modulo calculation for rotary axes, - speed monitoring for spindles TF5200 | Twin CAT 3 CNC Version: 1.05 71 Spindle
## Page 72

Parameter P-AXIS-00020 Drive type Description This parameter defines the drive type for each axis. A choice of drive types can be made for each axis: Parameter kenngr.antr_typ Data type UNS16 Data range 1 : Conventional drive interface 2 : SERCOS drive interface 3 : PROFIDRIVE MC drive interface 4 : Drive simulation 5 : Beckhoff Lightbus drive interface 6 : Drive interface +-10V over field bus (terminal) 7 : RT Ethernet drive interface 8 : CANopen drive interface 16 : Virtual axis 32 : CAN bus Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0x0004 Drive types ---- Remarks This entry is not adopted when the axis parameter list is updated. Updates only become effective when the controller is rebooted. Axis parameter block data can be divided into drive type dependent and drive type independent parameters. P-AXIS-00159 Reverse of sign for setpoint and actual value Description The turning direction of a spindle is defined in this parameter. If reverse is TRUE, the signs of the output and input data are changed. This is an option for keeping the signs of setpoint and actual values. Parameter getriebe[i].reverse Data type BOOLEAN Data range 0/1 Axis types S Dimension S: ---- Default value 0 Drive types Simulation, Conventional, Terminal, Lightbus, Profidrive Remarks P-AXIS-00234 Distance resolution of measurement (numerator) Description The distance resolution of the measuring system is entered in the dimension [increment/0.1 µm] for translatory axes or [increment/0.0001°] for rotary axes. The number of increments must be entered in 'getriebe[i].wegaufz' (numerator), the size of the motion path in [0.1µm] for translatory axes or in [0.0001°] for rotary axes in 'getriebe[i].wegaufn' (denominator). Parameter getriebe[i].wegaufz Data type UNS32 Data range 1 ≤ wegaufz ≤ MAX(UNS32) Axis types T, R, S Dimension T: increments R,S: increments Default value 1 Drive types ---- 72 Version: 1.05 TF5200 | Twin CAT 3 CNC Spindle
## Page 73

Parameter Remarks These entries are not taken over when the axis parameter list is updated. A controller reboot is required to update. Note that when a distance resolution is greater than 1, the motion range is restricted to less than (-MAX(UNS32)… +MAX(UNS32)) [µm/10-³ °]. If wegaufz is 0, the CNC generates the warning 110386 and corrects the parameter to the value 1. If P-AXIS-00234/ P-AXIS-00233 are used, the parameters P-AXIS-00362 and P- AXIS-00363 must be set to 1. Recommendation: It is recommended to set the path resolution using the parameters P-AXIS-00362 and P-AXIS-00363 . For possible applications, see Settings of position scaling P-AXIS-00233 Distance resolution of measurement (denominator) Description The distance resolution of the measuring system is entered in the dimension [increment/0.1 µm] for translatory axes or [increment/0.0001°] for rotary axes. The number of increments must be entered in 'getriebe[i].wegaufz' (numerator), the size of the motion path in [0.1µm] for translatory axes or in [0.0001°] for rotary axes in 'getriebe[i].wegaufn' (denominator). Parameter getriebe[i].wegaufn Data type UNS32 Data range 1 ≤ wegaufn ≤ MAX(UNS32) Axis types T, R, S Dimension T: 0.1 µm R,S: 0.0001° Default value 1 Drive types ---- Remarks These entries are not adopted when updating the axis parameter list. For updating to take effect, the control system must be restarted. Note that when a distance resolution is greater than 1, the motion range is restricted to less than (-MAX(UNS32)… +MAX(UNS32)) [µm/10-³ °]. If wegaufn is 0, the CNC generates the warning 110086 and corrects the parameter to the value 1. If P-AXIS-00234/ P-AXIS-00233 are used, the parameters P-AXIS-00362 and P- AXIS-00363 must be set to 1. Recommendation: It is recommended to set the path resolution using the parameters P-AXIS-00362 and P-AXIS-00363 . For possible applications, see Settings of position scaling P-AXIS-00129 Adaptation of command value of drive to the drive format (numerator) Description The speed setpoint calculated in the position controller must be adapted to the D/A format of the D/A converter. The digital value at the D/A converter input (getriebe[i].multi_gain_z/getriebe[i].mulit_gain_n) must be specified at which the axis travels at the velocity of [1m/min] or at the speed [1000°/min]. Denominator : P-AXIS-00128 Parameter getriebe[i].multi_gain_z Data type UNS32 Data range 1 ≤ multi_gain_z ≤ MAX(UNS32) Axis types T, R, S Dimension T: Bit R,S: Bit Default value 2000 Drive types Simulation, Conventional, Terminal, Lightbus, Profidrive Remarks TF5200 | Twin CAT 3 CNC Version: 1.05 73 Spindle
## Page 74

Parameter P-AXIS-00128 Adapting the drive command value to the drive format (denominator) Description The speed setpoint calculated in the position controller must be adapted to the D/A format of the D/A converter. The digital value at the D/A converter input (getriebe[i].multi_gain_z/getriebe[i].mulit_gain_n) must be specified at which the axis travels at the velocity of [1m/min] or at the speed [1000°/min]. Numerator: P-AXIS-00129 Parameter getriebe[i].multi_gain_n Data type UNS32 Data range 1 ≤ multi_gain_n ≤ MAX(UNS32) Axis types T, R, S Dimension T: ---- R,S: ---- Default value 1 Drive types Simulation, Conventional, Terminal, Lightbus, Profidrive Remarks P-AXIS-00099 Proportional factor kv for P-positional control Description The P-positional controller has the amplification factor k The parameter is only effective if v. the CNC internal position control is used. With drive amplifiers with integrated position control, the amplification must be defined in the drive. The parameter P-AXIS-00320 determines the manner how an axis moves to its commanded position. Parameter getriebe[i].kv Data type UNS32 Data range 0 < kv ≤ MAX(UNS32) Axis types T, R, S Dimension T: 0.01/s R,S: 0.01/s Default value 1000 Drive types ---- Remarks Settings for modulo calculation P-AXIS-00126 Upper modulo limit Description For modulo calculation for rotary axes, an upper modulo limit' (e.g. 360°) should be set. Parameter getriebe[i].moduloo Data type SGN32 Data range modulou < moduloo ≤ MAX(SGN32) Axis types R, S Dimension R,S: 0.0001° Default value 3600000 Drive types ---- Remarks Modulo calculation is activated automatically for rotary axes and spindles (axis types 0x2 and 0x4). P-AXIS-00127 Lower modulo limit Description For modulo calculation for rotary axes, a lower modulo limit (e.g. 0°) should be set. Parameter getriebe[i].modulou Data type SGN32 Data range MIN(SGN32) ≤ modulou < moduloo Axis types R, S Dimension R,S: 0.0001° 74 Version: 1.05 TF5200 | Twin CAT 3 CNC Spindle
## Page 75

Parameter Default value 0 Drive types ---- Remarks Modulo calculation is activated automatically for rotary axes and spindles (axis types 0x2 and 0x4). P-AXIS-00125 Number of rotations in case of modulo error compensation Description When a rotary axis is operated, in certain circumstances the modulo circle of the command variables cannot be converted to the modulo circle of the increments without errors. The modulo circle of the increments is less by the rounding error. This is compensated by the modulo compensation in the position controller so that the missing increments per modulo rotation can be preset as integers in the machine data P-AXIS-00124 . Parameter getriebe[i].modulo_umdreh Data type SGN16 Data range 0 ≤ modulo_umdreh ≤ MAX(SGN16) Axis types R, S Dimension R,S: ---- Default value 0 Drive types Simulation, Conventional, Terminal, Lightbus, Profidrive Remarks This function is activated via the parameter P-AXIS-00120. P-AXIS-00124 Error in modulo circle Description See also P-AXIS-00125 Parameter getriebe[i].modulo_fehler Data type SGN16 Data range MIN(SGN16) ... MAX(SGN16) Axis types R, S Dimension R,S: increments Default value 0 Drive types Simulation, Conventional, Terminal, Lightbus, Profidrive Remarks P-AXIS-00120 Activation of modulo compensation Description This parameter activates the modulo compensation in position controller. Parameter lr_param.mod_komp Data type BOOLEAN Data range 0/1 Axis types R, S Dimension R,S: ---- Default value 0 Drive types ---- Remarks Speeds and velocities P-AXIS-00220 Limiting velocity for the measurement system Description Especially with spindles, the limit at which the measuring system supplies erroneous signals at higher rotation speeds can be exceeded. The parameter describes the velocity value at which the position controller has to switch over to open-loop controlled operation mode. Parameter getriebe[i].vb_regelgrenze Data type UNS32 TF5200 | Twin CAT 3 CNC Version: 1.05 75 Spindle
## Page 76

Parameter Data range 0 ≤ vb_regelgrenze ≤ MAX(UNS32) Axis types S Dimension S: 0.001°/s Default value 200000 drive types. Simulation, Conventional, Terminal, Lightbus, Profidrive Remarks P-AXIS-00216 Limit for spindle speed 'zero' Description Especially in the case of spindles, the barrier should be given below which rotational speed monitoring in the position controller shows the state 'speed zero'. Parameter getriebe[i].vb_min_null Data type UNS32 Data range 0 ≤ vb_min_null ≤ MAX(UNS32) Axis types S Dimension S: 0.001°/s Default value 100 drive types. ---- Remarks P-AXIS-00217 Speed-value attained - tolerance band Description This parameter defines the actual speed value at which the status 'speed-value attained' is declared. Parameter kenngr.vb_prozent Data type UNS16 Data range 0 ... 1000 Axis types S Dimension S: 0.1% Default value 100 Drive types ---- Remarks Configuration example: For 'kenngr.vb_prozent = 100' the message 'speed-value attained' appears when '1.1 * commanded speed ≥ actual speed-value ≥ 0.9 * commanded speed '. P-AXIS-00209 Rapid mode velocity Description The rapid traverse velocity is specified for positioning in rapid traverse (G00). Parameter getriebe[i].vb_eilgang Data type UNS32 Data range 1 ≤ vb_eilgang ≤ P-AXIS-00212 Axis types T, R, S Dimension T: µm/s R,S: 0.001°/s Default value 166666 Drive types ---- Remarks Curve-controlled acceleration of spindles A gear speed specific acceleration curve is defined by the following parameters. This functionality is only possible for axes of the spindle type with endless rotation. P-AXIS-00202 Type of the characteristic acceleration curve Description The parameter defines the type of the characteristic acceleration curve. Parameter getriebe[i].beschl_kennlinie.typ 76 Version: 1.05 TF5200 | Twin CAT 3 CNC Spindle
## Page 77

Parameter Data type UNS32 Data range 0: No characteristic curve acceleration is active, acceleration profile acc. to P- AXIS-00270 1: Hyperbola 2: Polynomial 3: Asynchronous drive Axis types S Dimension S: ---- Default value 0 Drive types ---- Remarks P-AXIS-00130 Limit speed of the acceleration curve Description The parameter defines the limit speed from which onwards the acceleration is specified in a polynomial or hyperbolic form (see P-AXIS-00202). Parameter getriebe[i].beschl_kennlinie.n_grenz Data type UNS32 Data range 0 < n_grenz ≤ MAX(UNS32) Axis types S Dimension S: 10-³ °/s Default value 0 Drive types ---- Remarks P-AXIS-00007 Constant acceleration in the range n<ngrenz Description The parameter defines a constant acceleration in the range n<n grenz Parameter getriebe[i].beschl_kennlinie.a_konst Data type UNS32 Data range 0 ≤ a_konst ≤ MAX(UNS32) Axis types S Dimension S: °/s² Default value 0 Drive types ---- Remarks P-AXIS-00010 Minimum value of acceleration which may not be undershot. Description The parameter defines the minimum value of acceleration, which may not be undershot. Parameter getriebe[i].beschl_kennlinie.a_min Data type UNS32 Data range 0 ≤ a_min ≤ MAX(UNS32 Axis types S Dimension S: °/s² Default value 0 Drive types ---- Remarks P-AXIS-00026 Parameter of the a(n) Polynomial (B1) Description B1 parameter of the a(n) polynomial Parameter getriebe[i].beschl_kennlinie.b1 TF5200 | Twin CAT 3 CNC Version: 1.05 77 Spindle
## Page 78

Parameter Data type REAL64 Data range REAL64 range Axis types S Dimension S: 1/s Default value 0 Drive types ---- P-AXIS-00027 Parameter of the a(n) Polynomial (B2) Description B2 parameter of the a(n) polynomial Parameter getriebe[i].beschl_kennlinie.b2 Data type REAL64 Data range REAL64 range Axis types S Dimension S: 1/° Default value 0 Drive types ---- P-AXIS-00028 Parameter of the a(n) Polynomial (B3) Description B3 parameter of the a(n) polynomial Parameter getriebe[i].beschl_kennlinie.b3 Data type REAL64 Data range REAL64 range Axis types S Dimension S: s/°² Default value 0 Drive types ---- P-AXIS-00240 Maximum acceleration for acceleration curve of type 3 (P-AXIS-00202) Description This acceleration value is used in constant range with n < N1. Parameter getriebe[i].beschl_kennlinie.a_max Data type REAL64 Data range 0 ≤ a_max ≤ P-AXIS-00008 Axis types S Dimension S: °/s² Default value 0 Drive types ---- Remarks P-AXIS-00241 Speed limit 1 for acceleration curve of type 3 (P-AXIS-00202) Description Above this speed the transition to curve characteristic becomes proportional to 1/n. Parameter getriebe[i].beschl_kennlinie.n1 Data type REAL64 Data range 0 ≤ n1 ≤ P-AXIS-00242 Axis types S Dimension S: 10-³ °/s Default value 0 Drive types ---- Remarks P-AXIS-00242 Speed limit 2 for acceleration curve of type 3 (P-AXIS-00202) 78 Version: 1.05 TF5200 | Twin CAT 3 CNC Spindle
## Page 79

Parameter Description Above this speed the transition to curve characteristic becomes proportional to 1/n². Parameter getriebe[i].beschl_kennlinie.n2 Data type REAL64 Data range 0 ≤ n2 ≤ P-AXIS-00212 Axis types S Dimension S: 10-³ °/s Default value 0 Drive types ---- Remarks Referencing P-AXIS-00156 Homing without cam Description A changeover of homing strategy can be carried out so that homing is done without cam (e.g. only with zero pulse), i.e. without reverting. In this case the parameter P-AXIS-00156 should be set to TRUE. Parameter kenngr.ref_ohne_nocken Data type BOOLEAN Data range 0/1 Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0 drive types. Conventional, Terminal, Lightbus, Profidrive Remarks To be assigned for analogue spindles only. If P-AXIS-00156 is assigned with 1 (TRUE), then it is imperative that P-AXIS-00157 is assigned with 1 (TRUE). P-AXIS-00157 Homing without reverting Description Via parameter P-AXIS-00157 a restriction of homing can occur that will prohibit any reverting. Parameter kenngr.ref_ohne_rev Data type BOOLEAN Data range 0/1 Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0 drive types. Conventional, Terminal, Lightbus, Profidrive Remarks The speed during reversing is set with the parameter P-AXIS-00064 (fast_from_cam). By reverting, it is possible to repeatedly move to the reference cam at slow speed. To be assigned for analogue spindles only. P-AXIS-00157 must be assigned with 1 (TRUE) if P-AXIS-00156 is assigned with 1 (TRUE). Gear change P-AXIS-00078 Gear change position Description The gear change position is given by this parameter for every gear step. Parameter getriebe[i].getr_schalt_pos Data type SGN32 Data range P-AXIS-00177 < getr_schalt_pos < P-AXIS-00178 Axis types T, R, S Dimension T: 0.1 µm R,S: 0.0001° Default value 0 Drive types ---- TF5200 | Twin CAT 3 CNC Version: 1.05 79 Spindle
## Page 80

Parameter Remarks The definition of this parameter becomes significant when several gear steps are present. P-AXIS-00079 Default gear step number Description This parameter defines the gear step number which is supposed to be active at the time of controller start-up. Parameter kenngr.getriebe_stufe Data type UNS16 Data range 1 ≤ getriebe_stufe < MAX(UNS16) Axis types T, R, S Dimension T: ---- R,S: ---- Default value 1 Drive types ---- Remarks Direction of rotation of rotary axes P-AXIS-00224 Restriction of direction of spindle rotation Description If a spindle may only be operated in one direction, then the parameter should be set to 1. Parameter kenngr.vorz_richtung Data type BOOLEAN Data range 0/1 Axis types R, S Dimension R,S: ---- Default value 0 Drive types ---- Remarks P-AXIS-00031 Definition of preferred direction of spindle rotation Description If only one direction of rotation is permitted for spindles (P-AXIS-00224), this parameter defines the direction of rotation. Parameter kenngr.beweg_richt Data type BOOLEAN Data range 0: Negative direction of rotation 1: Positive direction of rotation Axis types R, S Dimension R,S: ---- Default value 0 Drive types ---- Remarks Positive direction of rotation signifies that coordinate values increase. Negative direction of rotation signifies that coordinate values decrease. This parameter is used only if the parameter P-AXIS-00224 is assigned the value 1. Sensorless spindles P-AXIS-00206 Normalisation of command velocity (numerator) Description The conversion factor of the command velocity to drive format is defined by specifying the value output to the drive and the related distance covered in the time specified in P-AXIS-00207 . This parameter specifies the conversion factor numerator. (P-AXIS-00205 is the denominator) The factor indicates the number of velocity increments output. 80 Version: 1.05 TF5200 | Twin CAT 3 CNC Spindle
## Page 81

Parameter Parameter antr.v_reso_num Data type UNS32 Data range 0 ≤ v_reso_num ≤ MAX(UNS32) Axis types T, R, S Dimension T: increments R,S: increments Default value 1 Drive types All drive types Remarks P-AXIS-00205 Normalisation of the velocity (denominator) Description The conversion factor of the set velocity to drive format is obtained by specifying the value output to the drive and the related path distance covered in the time specified in P-AXIS-00207. This parameter specifies the conversion factor numerator. (P-AXIS-00206 is the numerator) This parameter indicates the path covered in the time specified in P-AXIS-00207, provided the value in P-AXIS-00206 is output to the drive. The path is specified in 1 µm or 0.001°. Parameter antr.v_reso_denom Data type UNS32 Data range 1 ≤ v_reso_denom ≤ MAX(UNS32) Axis types T, R, S Dimension T: 1µm R,S: 0,001° Default value 36 Drive types All drive types Remarks P-AXIS-00207 Time base for normalisation of velocity Description The time base for adapting the velocity interface to the unit used in the drive can be specified as value per minute, second or sampling interval. If normalisation per sampling interval is selected, the output value changes proportionally depending on the CNC cycle time at constant velocity. This may be essential depending on the drive. Parameter antr.v_time_base Data type UNS16 Data range 0: per minute 1: per second 2: per sampling interval Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0 Drive types SERCOS Remarks P-AXIS-00265 Velocity limit for switching to velocity controlled mode Description If any spindle revolution higher than the given limit is commanded, the operation mode is switched to velocity control automatically. Parameter antr.velocity_position_control_on Data type SGN32 Data range 0 ≤ velocity_position_control_on ≤ MAX(SGN32) Axis types S TF5200 | Twin CAT 3 CNC Version: 1.05 81 Spindle
## Page 82

Parameter Dimension S: 0.001°/s Default value 2000000000 Drive types SERCOS Remarks For a sensorless spindle only a velocity of 0 is useful. Therefore the command velocity of the interpolator is always output and not the setpoint velocity of the position controller. P-AXIS-00266 Velocity limit for switching back to position control Description If the actual revolution during any positioning via M19 is higher than the given limit, the spindle is first decelerated to the limit. Afterwards the operation mode is switched back to position control. Parameter antr.velocity_position_control_off Data type SGN32 Data range 0 ≤ velocity_position_control_off ≤ MAX(SGN32) Axis types S Dimension S: 0.001°/s Default value 0 Drive types SERCOS Remarks For a sensorless spindle only a velocity of 0 is useful Therefore the command velocity of the interpolator is always output and not the setpoint velocity of the position controller. 82 Version: 1.05 TF5200 | Twin CAT 3 CNC Spindle
## Page 83

Parameter 3.2.3 Tool parameters Dynamic data Depending on the application, it may be necessary to define specific dynamic data for some tools. This data is used in the spindle to limit speed and acceleration during machining. The logical axis number of the spindle must also be specified in order to transmit the dynamic data to the spindle with the assigned tool. P-TOOL-00012 Logical spindle axis number Description The dynamic data of the tool is assigned by the logical axis number of the spindle which will carry the tool after it is changed. If the logical axis number is assigned the value 0, no dynamic data is transferred to the spindle when the tool is changed. Dynamic data is modal in the spindle. It can either be overwritten • by the dynamic data of a new tool or • be reset by S[DEFAUL_DYNAMIK_DATA] to the default values configured. Parameter wz[i].log_ax_nr_spdl Data type UNS16 Data range 0 ≤ log_ax_nr_spdl ≤ MAX(UNS16) Dimension ---- Default value 0 Remarks Parameterisation example: Assigning the dynamic data of Tool 5 wz[5].log_ax_nr_spdl 6 #Logical axis number of the spindle P-TOOL-00013 Minimum rotation speed Description Minimum tool rotation speed. Parameter wz[i].vb_min Data type REAL64 Data range 0 ≤ vb_min ≤ P-TOOL-00014 Unit 0.001°/s Default value 0 Remarks The minimum rotation speed is only limited for endless turning. Parameterisation example: Assigning the dynamic data of Tool 5 wz[5].vb_min 60000 #Minimum rotation speed P-TOOL-00014 Maximum rotation speed Description Maximum tool rotation speed. Parameter wz[i].vb_max Data type REAL64 Data range 1 ≤ vb_max ≤ 2000000000 Unit 0.001°/s Default value 1 Remarks Parameterisation example: Assigning the dynamic data of Tool 5 wz[5].vb_max 3000000 #Maximum rotation speed P-TOOL-00015 Maximum acceleration Description Maximum tool acceleration. Parameter wz[i].a_max Data type REAL64 Data range 1 ≤ a_max ≤ 100000000 Unit °/s2 TF5200 | Twin CAT 3 CNC Version: 1.05 83 Spindle
## Page 84

Parameter Default value 1 Remarks Parameterisation example: Assigning the dynamic data of Tool 5 wz[5].a_max 3000 #Maximum acceleration 84 Version: 1.05 TF5200 | Twin CAT 3 CNC Spindle
## Page 85

Support and Service 4 Support and Service Beckhoff and their partners around the world offer comprehensive support and service, making available fast and competent assistance with all questions related to Beckhoff products and system solutions. Download finder Our download finder contains all the files that we offer you for downloading. You will find application reports, technical documentation, technical drawings, configuration files and much more. The downloads are available in various formats. Beckhoff's branch offices and representatives Please contact your Beckhoff branch office or representative for local support and service on Beckhoff products! The addresses of Beckhoff's branch offices and representatives round the world can be found on our internet page: www.beckhoff.com You will also find further documentation for Beckhoff components there. Beckhoff Support Support offers you comprehensive technical assistance, helping you not only with the application of individual Beckhoff products, but also with other, wide-ranging services: • support • design, programming and commissioning of complex automation systems • and extensive training program for Beckhoff system components Hotline: +49 5246 963-157 e-mail: support@beckhoff.com Beckhoff Service The Beckhoff Service Center supports you in all matters of after-sales service: • on-site service • repair service • spare parts service • hotline service Hotline: +49 5246 963-460 e-mail: service@beckhoff.com Beckhoff Headquarters Beckhoff Automation Gmb H & Co. KG Huelshorstweg 20 33415 Verl Germany Phone: +49 5246 963-0 e-mail: info@beckhoff.com web: www.beckhoff.com TF5200 | Twin CAT 3 CNC Version: 1.05 85 Spindle
## Page 86

Index Index P P-CHAN-00074 67 P-CHAN-00081 65 P-AXIS-00007 77 P-CHAN-00082 63 P-AXIS-00010 77 P-TOOL-00012 83 P-AXIS-00015 71 P-TOOL-00013 83 P-AXIS-00016 71 P-TOOL-00014 83 P-AXIS-00018 71 P-TOOL-00015 83 P-AXIS-00020 72 P-AXIS-00026 77 P-AXIS-00027 78 P-AXIS-00028 78 P-AXIS-00031 80 P-AXIS-00078 79 P-AXIS-00079 80 P-AXIS-00099 74 P-AXIS-00120 75 P-AXIS-00124 75 P-AXIS-00125 75 P-AXIS-00126 74 P-AXIS-00127 74 P-AXIS-00128 74 P-AXIS-00129 73 P-AXIS-00130 77 P-AXIS-00156 79 P-AXIS-00157 79 P-AXIS-00159 72 P-AXIS-00202 76 P-AXIS-00205 81 P-AXIS-00206 80 P-AXIS-00207 81 P-AXIS-00209 76 P-AXIS-00216 76 P-AXIS-00217 76 P-AXIS-00220 75 P-AXIS-00224 80 P-AXIS-00233 73 P-AXIS-00234 72 P-AXIS-00240 78 P-AXIS-00241 78 P-AXIS-00242 78 P-AXIS-00265 81 P-AXIS-00266 82 P-CHAN-00004 68 P-CHAN-00007 64 P-CHAN-00008 64 P-CHAN-00010 63 P-CHAN-00036 64 P-CHAN-00037 69 P-CHAN-00038 69 P-CHAN-00043 67 P-CHAN-00045 66 P-CHAN-00047 66 P-CHAN-00049 66 P-CHAN-00051 63 P-CHAN-00052 67 P-CHAN-00053 64 P-CHAN-00055 68 P-CHAN-00058 68 P-CHAN-00061 69 P-CHAN-00069 65 86 Version: 1.05 TF5200 | Twin CAT 3 CNC Spindle
## Page 88

More Information: www.beckhoff.com/TF5200 Beckhoff Automation Gmb H & Co. KG Hülshorstweg 20 33415 Verl Germany Phone: +49 5246 9630 info@beckhoff.com www.beckhoff.com
