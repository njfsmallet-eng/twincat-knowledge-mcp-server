---
title: "TF5200_vibration_guard_en"
product: "TF5200"
category: "Motion_Control"
tags: ["NC"]
language: "EN"
document_type: "Manual"
version: "1.04"
source_pdf: "https://download.beckhoff.com/download/Document/automation/twincat3/TF5200_vibration_guard_en.pdf"
release_date: "2025-06-10"
---
Functional description | EN TF5200 | Twin CAT 3 CNC Vibration Guard 6/10/2025 | Version: 1.04
## Page 3

Notes on the documentation Notes on the documentation This description is only intended for the use of trained specialists in control and automation engineering who are familiar with the applicable national standards. It is essential that the documentation and the following notes and explanations are followed when installing and commissioning the components. It is the duty of the technical personnel to use the documentation published at the respective time of each installation and commissioning. The responsible staff must ensure that the application or use of the products described satisfy all the requirements for safety, including all the relevant laws, regulations, guidelines and standards. Disclaimer The documentation has been prepared with care. The products described are, however, constantly under development. We reserve the right to revise and change the documentation at any time and without prior announcement. No claims for the modification of products that have already been supplied may be made on the basis of the data, diagrams and descriptions in this documentation. Trademarks Beckhoff®, Twin CAT®, Twin CAT/BSD®, TC/BSD®, Ether CAT®, Ether CAT G®, Ether CAT G10®, Ether CAT P®, Safety over Ether CAT®, Twin SAFE®, XFC®, XTS® and XPlanar® are registered trademarks of and licensed by Beckhoff Automation Gmb H. Other designations used in this publication may be trademarks whose use by third parties for their own purposes could violate the rights of the owners. Patent Pending The Ether CAT technology is patent protected, in particular by the following applications and patents: EP1590927, EP1789857, EP1456722, EP2137893, DE102015105702 with corresponding applications or registrations in various other countries. Ether CAT® is registered trademark and patented technology, licensed by Beckhoff Automation Gmb H, Germany Copyright © Beckhoff Automation Gmb H & Co. KG, Germany. The reproduction, distribution and utilisation of this document as well as the communication of its contents to others without express authorisation are prohibited. Offenders will be held liable for the payment of damages. All rights reserved in the event of the grant of a patent, utility model or design. TF5200 | Twin CAT 3 CNC Version: 1.04 3 Vibration Guard
## Page 4

General and safety instructions General and safety instructions Icons used and their meanings This documentation uses the following icons next to the safety instruction and the associated text. Please read the (safety) instructions carefully and comply with them at all times. Icons in explanatory text 1. Indicates an action. ð Indicates an action statement. DANGER Acute danger to life! If you fail to comply with the safety instruction next to this icon, there is immediate danger to human life and health. CAUTION Personal injury and damage to machines! If you fail to comply with the safety instruction next to this icon, it may result in personal injury or damage to machines. NOTICE Restriction or error This icon describes restrictions or warns of errors. Tips and other notes This icon indicates information to assist in general understanding or to provide additional informa- tion. General example Example that clarifies the text. NC programming example Programming example (complete NC program or program sequence) of the described function or NC com- mand. Specific version information Optional or restricted function. The availability of this function depends on the configuration and the scope of the version. 4 Version: 1.04 TF5200 | Twin CAT 3 CNC Vibration Guard
## Page 5

Table of contents Table of contents Notes on the documentation.................................................................................................................... 3 General and safety instructions.............................................................................................................. 4 1 Overview.................................................................................................................................................... 8 2 Description................................................................................................................................................ 9 2.1 Operating principle............................................................................................................................ 9 2.2 Vibration Guard mode..................................................................................................................... 10 2.3 Contour deviation............................................................................................................................ 13 2.3.1 Tolerance monitoring....................................................................................................... 13 3 Activating the Vibration Guard.............................................................................................................. 14 4 Limitations, special features.................................................................................................................. 15 5 Programming........................................................................................................................................... 16 6 Parameters............................................................................................................................................... 19 6.1 Overview......................................................................................................................................... 19 6.2 Description...................................................................................................................................... 20 7 Support and Service............................................................................................................................... 22 Index......................................................................................................................................................... 23 TF5200 | Twin CAT 3 CNC Version: 5 Vibration Guard
## Page 6

Table of contents 6 Version: TF5200 | Twin CAT 3 CNC Vibration Guard
## Page 7

List of figures List of figures Fig. 1 Setpoint signal smoothing (red - with Vibration Guard; blue - without Vibration Guard).............. 9 Fig. 2 Sensitivity ranges for a residual vibration of 5% at damping=0.1................................................ 10 Fig. 3 Comparison of Vibration Guard modes at corner contour (10 Hz and damping=0.1).................. 11 Fig. 4 2D contour programming example (green - with VGuard and tolerance monitoring; red - only with VGuard; blue - w/o VGuard)................................................................................................. 18 TF5200 | Twin CAT 3 CNC Version: 1.04 7 Vibration Guard
## Page 8

Overview 1 Overview This function is an additional option requiring a license. Task Vibrations in a machine tool can have a negative impact on machining results. A particularly critical factor is the natural frequency of the machine or frequencies caused by the machining program which may lead to an excitation of the machine. The Vibration Guard function permits the following: • the specific smoothing of setpoint curves at axis level to minimise or prevent critical excitation • specifying a maximum permitted tolerance to limit contour deviations caused by setpoint smoothing This function is available as of CNC Build V3.1.3075.02 Programming and parametrisation Parameter settings and function activation can take place • either in axis lists or • by using the programming command #VIB GUARD in the NC program. Mandatory note on references to other documents For the sake of clarity, links to other documents and parameters are abbreviated, e.g. [PROG] for the Programming Manual or P-AXIS-00001 for an axis parameter. For technical reasons, these links only function in the Online Help (HTML5, CHM) but not in pdf files since pdfs do not support cross-linking. 8 Version: 1.04 TF5200 | Twin CAT 3 CNC Vibration Guard
## Page 9

Description 2 Description In many cases, it is impossible to avoid exciting the machine to vibrate during machining work. The intensity of these vibration excitations may vary considerably from machine to machine. The Vibration Guard function can specifically prevent or minimise vibrations in the machine by specifying a natural frequency and damping factor. 2.1 Operating principle The Vibration Guard function acts on the axis setpoint signal of each axis. Vibration Guard smooths the signal so that the setpoint signal only excites the machine slightly within the specified frequency range or not at all. An example of setpoint signal smoothing is depicted in the graphic below using a spring-mass damper system. The signal curve or smoothing has a different characteristic depending on the Vibration Guard mode used. Smoothing also causes a deviation from the original setpoint curve. Therefore, the use of Vibration Guard entails a certain amount of error or distortion in each axis. This error may result in contour deviations at corners or curvatures in a programmed contour. A tolerance monitoring function is provided to limit axis errors and is described in the subsection Tolerance monitoring. Fig. 1: Setpoint signal smoothing (red - with Vibration Guard; blue - without Vibration Guard) The use of Vibration Guard causes axis errors compared to the setpoint signal if Vi- bration Guard is not activated. This results in a contour deviation which can be limited by tolerance monitoring. TF5200 | Twin CAT 3 CNC Version: 1.04 9 Vibration Guard
## Page 10

Description 2.2 Vibration Guard mode The smoothing curve and therefore the vibration-preventing effect are dependent on parameters and the Vibration Guard mode selected. Each mode has its own characteristic curve and effect. The following modes are available when using Vibration Guard: Modes 1 - 3 • Asymmetrical modes (contours may have different forward and backward motions). • The higher the mode (1- 3), the more sensitive vibration attenuation is compared to deviations to the set frequency (compared to the actual natural frequency of the machine). The Figure - Sensitivity ranges [} 10] depicts the ranges within which the normalised frequency may lie in order to remain below 5% residual vibration (at damping = 0.1). • The higher the mode (1- 3), the greater the axis error (or contour deviation) – see Figure - Comparison of Vibration Guard modes [} 11] Mode 4: • Symmetrical mode (contours are identical in forward and backward motion). Fig. 2: Sensitivity ranges for a residual vibration of 5% at damping=0.1 10 Version: 1.04 TF5200 | Twin CAT 3 CNC Vibration Guard
## Page 11

Description The figure above results in the following standard values for each of the modes regarding acceptable percentage deviations to obtain residual vibrations of below 5%: Table of standard values for sensitivity Permitted deviations for max. 5% residual max. negative deviation max. positive deviation vibration (at damping=0.1) Mode 1: -3% +3% Mode 2: -13% +19% Mode 3: -20% +33% Mode 4: -10% +13% Standard values for permitted percentage deviations between the frequency setting and the real frequency to obtain a residual vibration of below 5% (at damping= 0.1). Fig. 3: Comparison of Vibration Guard modes at corner contour (10 Hz and damping=0.1) TF5200 | Twin CAT 3 CNC Version: 1.04 11 Vibration Guard
## Page 12

Description Selecting the right Vibration Mode for an axis Basic procedure: 1. Measurements of machine frequencies at three points 2. Calculation of percentage deviations 3. Assessment of calculation results based on the above Table of standard value for sensitivity [} 11] • Measurements of machine frequencies at three points: ◦ At minimum position of Z axis (6.9 Hz) ◦ At centre of workspace of Z axis (6 Hz) ◦ At maximum position of Z axis (5.4 Hz) • Calculation of percentage deviations: ◦ minimum Z position at centre of workspace 6.9/6.0 results in 1.15, i.e. +15% deviation. ◦ maximum Z position at centre of workspace 5.4/6.0 results in 0.9, i.e. -10% deviation. Evaluation of results: The deviations exceed the permitted range of Mode 1 (+/-3%) but are within of the permitted range of Mode 2 (-13%, +19%). The positive deviation for Mode 4 of +15% is greater than the permitted +13%. So, in this example, Vibration Guard Mode 2 should be set to a frequency of 6 Hz. A suitable programming command would then be: #VIB GUARD [FREQ=6 MODE=2] 12 Version: 1.04 TF5200 | Twin CAT 3 CNC Vibration Guard
## Page 13

Description 2.3 Contour deviation A contour deviation is determined by axis errors. Provided the same Vibration Guard Mode was selected for each axis in the axis group, an axis error is dependent on the following factors: • Cycle time (longer cycle time = greater error) • Natural frequency (lower natural frequency = greater error) • Feed rate (greater feed rate = greater error) The following options are available to influence an axis error or contour deviation: ◦ Adapt the influencing factor described above (cycle time, natural frequency, feed rate). ◦ Assign the same Vibration Guard parameters to all axes in an axis group (if they have different settings). ◦ Activate automatic tolerance monitoring. 2.3.1 Tolerance monitoring Tolerance monitoring provides a simple and reliable method for handling the Vibration Guard. The automatic monitoring of axis errors only intervenes if the Vibration Guard function causes axis errors that are too large. The user must specify the maximum permitted tolerance in the NC program (see Section Programming [} 16]). The operating principle of the tolerance monitor is described in more detail in [FCT-C37, Section "Tolerance monitoring"]. TF5200 | Twin CAT 3 CNC Version: 1.04 13 Vibration Guard
## Page 14

Activating the Vibration Guard 3 Activating the Vibration Guard The Vibration Guard can be parameterised and/or activated in 2 ways: 1. Permanently and for a specific axis in the axis lists. 2. For a specific program and at the same time for all axes in the #VIB GUARD command in the NC pro- gram. No preconfiguration is required in the axes in order to configure and activate the Vibration Guard. If the axes in an axis group are configured with different settings, this will lead to asynchronous axis behaviour. It is therefore recommended to always configure the same settings within an axis group. However, a mixed form is possible: For example, settings can be preconfigured for specific axes in the axis lists and the Vibration Guard can then be flexibly activated or deactivated by the NC command in the NC program. Configuration or activation in the NC program has priority over configuration or activation in the axis lists. The Vibration Guards can also be globally and flexibly activated/deactivated or reparameterised in the NC program for all axes during machining work (between motion blocks) (see Programming example [} 17]). 14 Version: 1.04 TF5200 | Twin CAT 3 CNC Vibration Guard
## Page 15

Limitations, special features 4 Limitations, special features The FIR filters and the Vibration Guard [} 9] are different independent functions with similar objectives. Both functions smooth the axis setpoint signal to avoid exciting the machine to vibrations. FIR filters achieve this in the broadband. On the other hand, the Vibration Guard filters specific critical frequencies selectively. NOTICE It is only possible to use FIR filters and the Vibration Guard simultaneously under certain conditions. The following combinations are not possible and will result in the output of an error message: • Configuring an FIR filter in one axis and at the same time activating the Vibration Guard in the same axis. • It is not possible within an NC program to program both #FILTER and #VIB GUARD [} 16] commands (Error ID 22060). • If #FILTER commands are used, the Vibration Guard may not be activated in the axis lists. • If #VIB GUARD [} 16] commands are used, no filter types may be configured in the axes. It is permitted to use: • an FIR filter in one axis and the Vibration Guard in another axis but only if activation takes place exclusively in the axis lists. In this case, neither #FILTER nor #VIB GUARD commands can be used. Axis exchange commands Axis exchange commands deactivate the Vibration Guard. Axis exchange commands deactivate a Vibration Guard if it was activated at that time. If the Vibration Guard is to remain activated after an axis exchange, it must be re-activated by a corresponding #VIB GUARD [} 16] command. If the Vibration Guard was only activated in the axis lists (P-AXIS-00588), the Vibration Guard will remain activated automatically after an axis exchange. TF5200 | Twin CAT 3 CNC Version: 1.04 15 Vibration Guard
## Page 16

Programming 5 Programming #VIB GUARD [ON | OFF] [MODE=.. FREQ=.. DAMPING=.. AX_DEV=.. ACC_FACT=.. ] modal ON Activate Vibration Guard. OFF Deactivate Vibration Guard. MODE=.. Specify Vibration Guard mode. (see P-AXIS-00571) default value = 1 FREQ=.. Natural frequency of the machine [Hz] (see P-AXIS-00589) default value = 30 DAMPING=.. Damping factor for machine natural frequency (see P-AXIS-00568) Value range: 0 to 1.0 default value = 0.1 AX_DEV=.. Specify the tolerance for tolerance monitoring in [mm, inch *] default value = 0 (no tolerance monitoring). *with active P-CHAN-00439 ACC_FACT=.. Increase the path velocity at block transitions with the Vibration Guard activated. The greater the value setting, the less the velocity is reduced at the block transition. The condition here is the correct setting of P-AXIS-00013 (a_trans_weight) of the axes: Value range: 1.0 to 10.0 Default value: 1.0 Tolerance monitoring can only be activated in the NC program. Tolerance monitoring is programmed with the parameter AX_DEV which ensures that contour deviations for each axis remain within the tolerance specified in AX_DEV. Tolerance monitoring can only be configured and activated in the NC program. This takes place by specifying the AX_DEV parameter. If the AX_DEV parameter is not specified in the NC command, tolerance monitoring is again deactivated. Tolerance monitoring in only activated if a corresponding tolerance was specified. Tolerance monitoring always monitors all axes and therefore only global control is possible in the NC program. 16 Version: 1.04 TF5200 | Twin CAT 3 CNC Vibration Guard
## Page 17

Programming Program 90° corners – with and without tolerance monitoring Programming example with simple square contour. Feed rate used=4000mm/min, slope type=TRAPEZ (non- linear) and tolerance (AX_DEV)=0.01mm. The contour is traversed 3 times: 1. with Vibration Guard and tolerance monitoring. 2. with only Vibration Guard and 3. finally without Vibration Guard activated as reference. N010 G00 G90 X0 Y0 Z0 N020 #SLOPE[TYPE=TRAPEZ] N030 #VIB GUARD ON [MODE=2 FREQ=40 AX_DEV=0.01] N040 G01 X0 Y1 F4000 N050 G01 X1 Y1 N060 G01 X1 Y0 N070 G01 X0 Y0 N080 #VIB GUARD ON N090 G01 X0 Y1 F4000 N100 G01 X1 Y1 N110 G01 X1 Y0 N120 G01 X0 Y0 N130 #VIB GUARD OFF N140 G01 X0 Y1 F4000 N150 G01 X1 Y1 N160 G01 X1 Y0 N170 G01 X0 Y0 N180 M30 TF5200 | Twin CAT 3 CNC Version: 1.04 17 Vibration Guard
## Page 18

Programming Fig. 4: 2D contour programming example (green - with VGuard and tolerance monitoring; red - only with VGuard; blue - w/o VGuard) 18 Version: 1.04 TF5200 | Twin CAT 3 CNC Vibration Guard
## Page 19

Parameters 6 Parameters 6.1 Overview ID Parameter Description P-AXIS-00568 damping Damping factor of natural frequency P-AXIS-00571 mode Vibration Guard mode P-AXIS-00588 active Activating the Vibration Guard P-AXIS-00589 freq Natural frequency of machine Description Axis parameters Programming parameter Activation vib_guard.active ON Deactivation - OFF Mode vib_guard.mode MODE Natural frequency of machine vib_guard.freq FREQ Damping factor of natural frequency vib_guard.damping DAMPING Tolerance monitoring limit [mm] - AX_DEV Path velocity at block transitions - ACC_FACT TF5200 | Twin CAT 3 CNC Version: 1.04 19 Vibration Guard
## Page 20

Parameters 6.2 Description P-AXIS-00568 Damping factor of natural frequency Description Besides the natural frequency itself, this parameter can also specify the damping factor of the natural frequency which is defined as follows: Parameter vib_guard.damping Data type REAL64 Data range 0 ≤ damping ≤ 1 Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0.1 Drive types ---- Remarks The parameter is available as of V3.1.3075.00 P-AXIS-00571 Vibration Guard mode Description This parameter defines Modes 1 - 4 of the Vibration Guard [} 8] function. Modes 1– 3: • Asymmetrical modes (contours may have different forward and backward motions). • The higher the mode (1-3), the less sensitive to deviations from the actual natural frequency • The higher the mode (1-3), the larger the axis error (or contour deviation) Mode 4: • Symmetrical mode (contours are identical in forward and backward motion). Parameter vib_guard.mode Data type UNS32 Data range 1 ≤ mode ≤ 4 20 Version: 1.04 TF5200 | Twin CAT 3 CNC Vibration Guard
## Page 21

Parameters Axis types T, R, S Dimension T: ---- R,S: ---- Default value 1 Drive types ---- Remarks See Table of sensitivity to natural frequency: [} 11] The parameter is available as of V3.1.3075.00 P-AXIS-00588 Activating the Vibration Guard Description This parameter can permanently activate or deactivate the Vibration Guard [} 8] function at program start. Parameter vib_guard.active Data type BOOLEAN Data range 0/1 Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0 Drive types ---- Remarks Alternatively, the Vibration Guard can also be activated or deactivated by the NC command #VIB GUARD / OFF [} 16] . The parameter is available as of V3.1.3075.00 P-AXIS-00589 Machine natural frequency Description This parameter specifies the machine’s natural frequency which the Vibration Guard [} 8] function is to suppress. Parameter vib_guard.freq Data type REAL64 Data range 1 ≤ freq Axis types T, R, S Dimension T: Hz R,S: Hz Default value 30 Drive types ---- Remarks The parameter is available as of V3.1.3075.00 TF5200 | Twin CAT 3 CNC Version: 1.04 21 Vibration Guard
## Page 22

Support and Service 7 Support and Service Beckhoff and their partners around the world offer comprehensive support and service, making available fast and competent assistance with all questions related to Beckhoff products and system solutions. Download finder Our download finder contains all the files that we offer you for downloading. You will find application reports, technical documentation, technical drawings, configuration files and much more. The downloads are available in various formats. Beckhoff's branch offices and representatives Please contact your Beckhoff branch office or representative for local support and service on Beckhoff products! The addresses of Beckhoff's branch offices and representatives round the world can be found on our internet page: www.beckhoff.com You will also find further documentation for Beckhoff components there. Beckhoff Support Support offers you comprehensive technical assistance, helping you not only with the application of individual Beckhoff products, but also with other, wide-ranging services: • support • design, programming and commissioning of complex automation systems • and extensive training program for Beckhoff system components Hotline: +49 5246 963-157 e-mail: support@beckhoff.com Beckhoff Service The Beckhoff Service Center supports you in all matters of after-sales service: • on-site service • repair service • spare parts service • hotline service Hotline: +49 5246 963-460 e-mail: service@beckhoff.com Beckhoff Headquarters Beckhoff Automation Gmb H & Co. KG Huelshorstweg 20 33415 Verl Germany Phone: +49 5246 963-0 e-mail: info@beckhoff.com web: www.beckhoff.com 22 Version: 1.04 TF5200 | Twin CAT 3 CNC Vibration Guard
## Page 23

Index Index P P-AXIS-00568 20 P-AXIS-00571 20 P-AXIS-00588 21 P-AXIS-00589 21 TF5200 | Twin CAT 3 CNC Version: 1.04 23 Vibration Guard
## Page 25

More Information: www.beckhoff.com/TF5200 Beckhoff Automation Gmb H & Co. KG Hülshorstweg 20 33415 Verl Germany Phone: +49 5246 9630 info@beckhoff.com www.beckhoff.com
