---
title: "TC170x Twin CAT 3"
product: "TC170"
category: "Fundamentals"
tags: ["CAT", "TWIN"]
language: "EN"
document_type: "Manual"
version: "1.4.0"
source_pdf: "https://download.beckhoff.com/download/Document/automation/twincat3/TC170x_TC3_Usermode_Runtime_EN.pdf"
release_date: "2025-10-23"
---
Manual | EN TC170x Twin CAT 3 | Usermode Runtime 2025-10-23 | Version: 1.4.0

## Page 3

Table of contents Table of contents 1 Foreword.................................................................................................................................................... 5 1.1 Notes on the documentation............................................................................................................. 5 1.2 For your safety.................................................................................................................................. 5 1.3 Notes on information security............................................................................................................ 7 2 Overview.................................................................................................................................................... 8 3 Installation................................................................................................................................................. 9 3.1 Revision control................................................................................................................................. 9 4 Limitations............................................................................................................................................... 10 5 Technical introduction............................................................................................................................ 11 5.1 Illustration Multi Core...................................................................................................................... 11 5.2 File storage..................................................................................................................................... 11 5.3 Starting the Twin CAT 3 Usermode Runtime................................................................................... 11 5.4 Using the Twin CAT 3 Usermode Runtime...................................................................................... 12 5.5 Using External Control (TC1701).................................................................................................... 13 5.6 Using Fast As Possible (TC1702)................................................................................................... 13 5.7 Several Twin CAT 3 Usermode Runtimes on one system............................................................... 13 5.8 Integration Twin CAT Functions....................................................................................................... 14 5.8.1 TF50x0 | Twin CAT 3 NC PTP.......................................................................................... 14 5.8.2 TF5100 | Twin CAT 3 NCI (GST interpreter)..................................................................... 14 5.8.3 TF52xx | Twin CAT 3 CNC................................................................................................ 15 5.8.4 TF5400 | Twin CAT 3 Advanced Motion Pack.................................................................. 15 5.8.5 TF6310 | Twin CAT 3 TCP/IP........................................................................................... 16 5.8.6 TF7xxx | Twin CAT 3 Vision.............................................................................................. 16 6 Reference................................................................................................................................................. 17 6.1 Command line parameters & commands........................................................................................ 17 6.2 Configuration................................................................................................................................... 17 7 API............................................................................................................................................................ 19 7.1 External Control (ADS).................................................................................................................... 19 7.2 Interface ITc RTime Simulation......................................................................................................... 19 7.2.1 Method ITc RTime Simulation:Change Tick Mode............................................................... 20 7.2.2 Method ITc RTime Simulation:Get Tick Mode..................................................................... 20 7.2.3 Method ITc RTime Simulation:Advance Tick...................................................................... 20 7.3 Runtime type (ADS)........................................................................................................................ 21 8 Sample..................................................................................................................................................... 22 9 Appendix.................................................................................................................................................. 23 9.1 Return values.................................................................................................................................. 23 9.2 FAQ - frequently asked questions and answers............................................................................. 23 9.3 ADS Return Codes.......................................................................................................................... 25 10 Support and Service............................................................................................................................... 30 TC170x Version: 1.4.0 3

## Page 4

Table of contents 4 Version: 1.4.0 TC170x

## Page 5

Foreword 1 Foreword 1.1 Notes on the documentation This description is intended exclusively for trained specialists in control and automation technology who are familiar with the applicable national standards. The documentation and the following notes and explanations must be complied with when installing and commissioning the components. The trained specialists must always use the current valid documentation. The trained specialists must ensure that the application and use of the products described is in line with all safety requirements, including all relevant laws, regulations, guidelines, and standards. Disclaimer The documentation has been compiled with care. The products described are, however, constantly under development. We reserve the right to revise and change the documentation at any time and without notice. Claims to modify products that have already been supplied may not be made on the basis of the data, diagrams, and descriptions in this documentation. Trademarks Beckhoff®, ATRO® , Ether CAT®, Ether CAT G®, Ether CAT G10®, Ether CAT P®, MX-System®, Safety over Ether CAT®, TC/BSD®, Twin CAT®, Twin CAT/BSD®, Twin SAFE®, XFC®, XPlanar®, and XTS® are registered and licensed trademarks of Beckhoff Automation Gmb H. If third parties make use of the designations or trademarks contained in this publication for their own purposes, this could infringe upon the rights of the owners of the said designations. Ether CAT® is a registered trademark and patented technology, licensed by Beckhoff Automation Gmb H, Germany. Copyright © Beckhoff Automation Gmb H & Co. KG, Germany. The distribution and reproduction of this document, as well as the use and communication of its contents without express authorization, are prohibited. Offenders will be held liable for the payment of damages. All rights reserved in the event that a patent, utility model, or design are registered. Third-party trademarks Trademarks of third parties may be used in this documentation. You can find the trademark notices here: https://www.beckhoff.com/trademarks. 1.2 For your safety Safety regulations Read the following explanations for your safety. Always observe and follow product-specific safety instructions, which you may find at the appropriate places in this document. Exclusion of liability All the components are supplied in particular hardware and software configurations which are appropriate for the application. Modifications to hardware or software configurations other than those described in the documentation are not permitted, and nullify the liability of Beckhoff Automation Gmb H & Co. KG. TC170x Version: 1.4.0 5

## Page 6

Foreword Personnel qualification This description is only intended for trained specialists in control, automation, and drive technology who are familiar with the applicable national standards. Signal words The signal words used in the documentation are classified below. In order to prevent injury and damage to persons and property, read and follow the safety and warning notices. Personal injury warnings DANGER Hazard with high risk of death or serious injury. WARNING Hazard with medium risk of death or serious injury. CAUTION There is a low-risk hazard that could result in medium or minor injury. Warning of damage to property or environment NOTICE The environment, equipment, or data may be damaged. Information on handling the product This information includes, for example: recommendations for action, assistance or further information on the product. 6 Version: 1.4.0 TC170x

## Page 7

Foreword 1.3 Notes on information security The products of Beckhoff Automation Gmb H & Co. KG (Beckhoff), insofar as they can be accessed online, are equipped with security functions that support the secure operation of plants, systems, machines and networks. Despite the security functions, the creation, implementation and constant updating of a holistic security concept for the operation are necessary to protect the respective plant, system, machine and networks against cyber threats. The products sold by Beckhoff are only part of the overall security concept. The customer is responsible for preventing unauthorized access by third parties to its equipment, systems, machines and networks. The latter should be connected to the corporate network or the Internet only if appropriate protective measures have been set up. In addition, the recommendations from Beckhoff regarding appropriate protective measures should be observed. Further information regarding information security and industrial security can be found in our https://www.beckhoff.com/secguide. Beckhoff products and solutions undergo continuous further development. This also applies to security functions. In light of this continuous further development, Beckhoff expressly recommends that the products are kept up to date at all times and that updates are installed for the products once they have been made available. Using outdated or unsupported product versions can increase the risk of cyber threats. To stay informed about information security for Beckhoff products, subscribe to the RSS feed at https:// www.beckhoff.com/secinfo. TC170x Version: 1.4.0 7

## Page 8

Overview 2 Overview This component is available from version Twin CAT 3.1 Build 4026. The Twin CAT 3 Usermode Runtime enables the customer to execute a Twin CAT program without the deep Twin CAT operating system integration that would be necessary to ensure real-time execution. The same program code of the customer project is executed but without meeting the real-time requirements. The Twin CAT 3 Usermode Runtime provides functionality for three scenarios in particular: • Engineering (TC1700 - free of license costs): During the basic development of machine control systems, the focus is not yet on compliance with or measurement of real-time properties. The Twin CAT 3 Usermode Runtime can be used directly on the engineering system to execute, test or debug the program code as long as real-time properties are not required. • External Control (TC1701): In some applications it makes sense to control the Twin CAT program from an external program. This enables synchronous integration of the execution, as is necessary, for example, when synchronous intermediate values are required in applications. The Twin CAT 3 Usermode Runtime offers an interface for this, whereby the ticks of the real-time are specified externally. • Fast As Possible (TC1702): In particular for simulation aspects, it makes sense to execute the Twin CAT program code on a CPU as quickly as possible independently of real I/O and, for example, to calculate a preview of the result or the sequence. Twin CAT 3 Usermode Runtime offers an interface for this, so that instead of waiting for the next clock pulse, the real-time continues to calculate as quickly as possible. 8 Version: 1.4.0 TC170x

## Page 9

Installation 3 Installation The Twin CAT 3 Usermode Runtime is available as a workload in the Twin CAT package management workload • TC170x | Twin CAT 3 Usermode Runtime or as a package • Twin CAT. XAR. User Mode Runtime. System requirements Technical data Description Operating system Windows 10/11 Target platform PC architecture (x64) Minimum Twin CAT version Twin CAT 3.1.4026 Required Twin CAT license TC1700: no separate license required, only licenses used elsewhere in the project TC1701: License "TC3 User Mode Runtime - External Control" in addition to the licenses used elsewhere in the project TC1702: License "TC3 User Mode Runtime - Fast As Possible" in addition to the licenses used elsewhere in the project It is recommended to provide at least two cores for the operating system - otherwise communication may be interrupted if the computing time within the Usermode Runtime is heavily used. Twin CAT Package Manager: Installation (Twin CAT 3.1 Build 4026) Detailed instructions on installing products can be found in the chapter Installing workloads in the Twin CAT 3.1 Build 4026 installation instructions. Install the following workload to be able to use the product: • TC170x | Twin CAT 3 Usermode Runtime Licensing The Twin CAT 3 Usermode Runtime is used in different scenarios, which are licensed differently. In principle, the licenses required for execution, such as TC1200 for the PLC, are also required for the device with Twin CAT 3 Usermode Runtime. This licensing takes place per device, so that mixed operation with real- time and Usermode Runtime is also possible with the same licenses. The usual 7 days trial licenses can also be used in combination with the Usermode Runtime. • Engineering (TC1700): No separate licensing requirement arises here. In combination with the 7 days trial licenses, this generally enables free test execution with the Twin CAT 3 Usermode Runtime as well as with the real-time runtime. • External Control (TC1701): This interface is additionally licensed for the device in the usual way. Irrespective of this, the normal licenses (such as TC1200 PLC) are required for the device. • Fast As Possible (TC1702): This interface is additionally licensed for the device in the usual way. Irrespective of this, the normal licenses (such as TC1200 PLC) are required for the device. 3.1 Revision control The revision control of the Usermode Runtime is based on the Twin CAT. Standard Workload, e.g. version 4026.42. This is intended to indicate that the behavior is similar to that of the corresponding Twin CAT. Standard Workload. The version number of the package referenced in the Twin CAT. Usermode Runtime. XAR workload is different because this package is built and tested independently. TC170x Version: 1.4.0 9

## Page 10

Limitations 4 Limitations The Twin CAT 3 Usermode Runtime provides an execution environment for the same program code that is executed in the real-time runtime. • The Twin CAT 3 Usermode Runtime has no guaranteed deterministic execution properties. The operating system is able to interrupt the Usermode Runtime at any time. • The Twin CAT 3 Usermode Runtime has no access to Ether CAT. The I/O part of the configuration is therefore normally "disabled". • Components that are based on the real-time Ethernet driver can be executed. The execution times and the jitter can affect the function due to the principle. • CCAT-based network cards cannot be used. • Twin CAT 3 Usermode Runtime cannot access USB, i.e. the license key USB stick cannot be used. • In principle, it does not make sense to use all Twin CAT functions under a Twin CAT 3 Usermode Runtime. For example, some Twin CAT functions require a constant real-time tick. If appropriate, Twin CAT 3 functions are extended to work with the Twin CAT 3 Usermode Runtime. In particular, if something has to be observed for the Twin CAT 3 Usermode Runtime with regard to the configuration, this is documented for the respective products. • The execution order between the tasks may differ from the behavior in the real-time runtime due to the principle [} 11]. For this reason, it also makes sense not to make the execution order dependent on the task priorities. 10 Version: 1.4.0 TC170x

## Page 11

Technical introduction 5 Technical introduction The Twin CAT 3 Usermode Runtime executes an engineering program as the same binary - but not under the usual real-time conditions. As a result, deviating system behavior must be expected, particularly with regard to time. Separate configurations or behaviors must be taken into account for the use of further Twin CAT functions; these are described at Integration Twin CAT Functions [} 14]. The necessary parameterization is carried out via command line parameters [} 17] on the one hand and a configuration file [} 17] on the other. 5.1 Illustration Multi Core While the real-time runtime has direct access to the hardware and can therefore use cores in a dedicated and possibly isolated manner, the Twin CAT Usermode Runtime does not have this option. Twin CAT 3 Usermode Runtime therefore maps a task to an operating system thread. The assignment of tasks to CPU cores, on the other hand, is accepted by the Usermode Runtime but technically not taken into account, as the operating system manages these threads. 5.2 File storage After installation, Twin CAT 3 Usermode Runtime files are located in two places: • C:\Program Files (x86)\Beckhoff\Twin CAT\3.1\Runtimes Contains the Twin CAT 3 Usermode Runtime itself as well as a copy template ("Um RT_Template") for the Program Data directories of the Twin CAT 3 Usermode Runtime • C:\Program Data\Beckhoff\Twin CAT\3.1\Runtimes Contains a directory "Um RT_Default" after installation. In addition to this directory, the copy template can be copied from the Program Files (x86) and thus several Twin CAT 3 Usermode Runtimes can be provided in parallel. This directory essentially contains a start.bat, which can be used to start the respective instance. The subdirectory 3.1/ contains the boot directory as well as a Tc Registry.xml, which serves as a configuration interface [} 17]. 5.3 Starting the Twin CAT 3 Usermode Runtime The Twin CAT 3 Usermode Runtime can be started via the Tc Sys UI: TC170x Version: 1.4.0 11

## Page 12

Technical introduction The Twin CAT 3 Usermode Runtime starts in the background. The router status can then be queried and changed via the same menu. A minimized window provides additional interaction: heap memory allocated 000002514EB00000 size=536870912 Tc Sys Srv Um state: Config [8896] Ams Net Id: 199.4.42.250.1.1 Tc Sys Srv Um state: Config [8896] Press 'c' for Reconfig Twin CAT System. Press 'r' for Restart Twin CAT system. Press 's' to view current state. Press 'x' to exit Twin CAT system service. Press 'd' to detach the exception handler. • 'c': Sets the Usermode Runtime to CONFIG - if it is already in CONFIG, a Re CONFIG is executed. • 'r': Sets the Usermode Runtime to RUN - if it is already in RUN, it is restarted. • 's': Sows the current state of the Usermode Runtime. • 'x': Exits Usermode Runtime. • 'd': A debugger is usually started with the Usermode Runtime, which is necessary for debugging a PLC, for example. This debugger can be terminated with 'd' if external debugging tools are to be used. 5.4 Using the Twin CAT 3 Usermode Runtime Like the real-time runtime, the Twin CAT 3 Usermode Runtime can be addressed via an Ams Net Id. This is defined when Twin CAT 3 Usermode Runtime is started for the first time and saved afterwards. 12 Version: 1.4.0 TC170x

## Page 13

Technical introduction 5.5 Using External Control (TC1701) The "External Control" interface allows external applications to control the cycle tick. The advantage of specifying the cycle tick here is that the program can be simulated more quickly if the complexity of the model allows it. Conversely, the Twin CAT application can also be executed more slowly if the calculation of a model in the external application takes longer than the set cycle time. On the other hand, this also means that the overall system does not execute - and therefore does not process - any code if no corresponding instruction has been issued. The application can automatically switch back to normal cyclic execution in the code. Use The Twin CAT 3 Usermode Runtime must be called with the command line parameter "-f 0x4". The easiest way to achieve this is to extend the corresponding Start.bat in the Program Data [} 11]: start "%TC_INST_NAME%" /min "%TWINCAT3DIR%Runtimes\bin\Tc System Service Um.exe" -t bin -i path -n %TC_INST_NAME% -c .\3.1 -f 0x4 This enables the functionality of switching between the modes described below. If this mode is set to the value Rt Mode_Externaltick in a real-time program by the PLC or a C++ module using the ITc RTime Simulation [} 19] interface, the execution of the code is stopped. In the following, the ADS interface External Control [} 19] can be used to control the execution by specifying 1..n cycle steps. The application can return to cyclic execution by setting the value Rt Mode_Cyclic using ITc RTime Simulation->Change Tick Mode. The documentation for this is shown in the chapter API [} 19] as well as in the sample [} 22]. 5.6 Using Fast As Possible (TC1702) If the Twin CAT 3 Usermode Runtime is configured accordingly, the "Fast As Possible" interface can be used to instruct the execution environment not to use delays in order to map a real execution speed. Instead, the next cycle is started immediately after the program has been processed. In return, this also means that the computer is loaded accordingly. To ensure that this remains available, it is recommended to have at least one more core than there are tasks in the project. Use The Twin CAT 3 Usermode Runtime must be called with the command line parameter "-f 0x4". The easiest way to achieve this is to extend the corresponding Start.bat in the Program Data [} 11]: start "%TC_INST_NAME%" /min "%TWINCAT3DIR%Runtimes\bin\Tc System Service Um.exe" -t bin -i path -n %TC_INST_NAME% -c .\3.1 -f 0x4 This enables the functionality of switching between the modes described below. If this mode is set to the value Rt Mode_Fast As Possible via the ITc RTime Simulation [} 19] interface, the code is executed as quickly as possible without delays. The application can return to cyclic execution by setting the value Rt Mode_Cyclic using ITc RTime Simulation->Change Tick Mode. The documentation for this is shown in the chapter API [} 19] as well as in the sample [} 22]. 5.7 Several Twin CAT 3 Usermode Runtimes on one system Several Twin CAT 3 Usermode Runtimes can be started on one system. TC170x Version: 1.4.0 13

## Page 14

Technical introduction The starting point for the scenario is copying the template from Program Files (x86) to Program Data, as documented in File storage [} 11]. The following aspects must be taken into account: • The Ams Net Ids (command line parameter "-i") [} 17] must be unique in an entire AMS network. This means that the Twin CAT 3 Usermode Runtimes must have different Ams Net Ids. • Different configuration folders (command line parameter "-c" [} 17]) must be specified. • It is not possible to connect several Twin CAT 3 Usermode Runtimes from one system to another external system, as the router on the external system cannot distinguish between the Twin CAT 3 Usermode Runtimes. In such a scenario, ADS-over-MQTT with a broker as intermediary should be evaluated. 5.8 Integration Twin CAT Functions Twin CAT Functions must be partially upgraded to work with the Twin CAT 3 Usermode Runtime. The information required to commission the functions with the Twin CAT 3 Usermode Runtime is provided here. 5.8.1 TF50x0 | Twin CAT 3 NC PTP The TF50x0 Twin CAT 3 NC PTP function is supported by the Usermode Runtime. The prerequisite for this is the installation of the package: • Twin CAT. XARUM. NCPTP In addition to NC PTP, the package also includes the Usermode Runtime component for the following products: • TF5050 | Twin CAT 3 NC Camming • TF5055 | Twin CAT 3 NC Flying Saw • TF5060 | Twin CAT 3 NC FIFO The Twin CAT. XARUM. NCPTP package is also required to use the TF51xx and TF54xx products with the Twin CAT Usermode Runtime. These products require the installation of additional components. Details can be found in the respective product documentation. 5.8.2 TF5100 | Twin CAT 3 NCI (GST interpreter) The TF5100 Twin CAT 3 NCI function is partially supported (GST interpreter, PLC interpolation) by the Twin CAT 3 Usermode Runtime. The Classic interpreter is not supported. GST interpreter In addition to the general user mode runtime installation [} 9], the following packages must also be installed on the Usermode Runtime system in order to use the GST interpreter: • Twin CAT. XARUM. NCPTP • Twin CAT. XAR. NCI. GST Each Usermode Runtime instance has its own registry: Tc Registry.xml. This defines the default directories for the GST interpreter. If the Tc Registry.xml file needs to be edited, the associated Usermode Runtime instance must not be started. <Tc Registry> <Key Name="HKLM"> <Key Name="Software"> <Key Name="Beckhoff"> <Key Name="Twin CAT3"> <Key Name="Nc"> <Key Name="Tc Mc Gst"> <Value Name="searchpath" Type="SZ">C:\Program Data\Beckhoff\Twin CAT\Mc\Nci\</ 14 Version: 1.4.0 TC170x

## Page 15

Technical introduction Value> <Value Name="workingdirectory" Type="SZ">C: \Program Data\Beckhoff\Twin CAT\Mc\Nci\Um RT_Default\</Value> </Key> </Key> </Key> </Key> </Key> </Key> </Tc Registry> GST interpreter and Fast As Possible mode The GST interpreter is an ADS server outside the runtime in the Windows context. This means that the state of the GST interpreter is not taken into account when the cycle tick is presented in the Fast As Possible modes of the Usermode Runtime. This can result in the NC executing the Motion commands faster than the interpreter sends the commands to the NC. This results in unrealistic dynamic progressions and a lack of smoothing. To prevent this, when using the Fast As Possible mode in conjunction with the GST interpreter, the lookahead of the NC should be monitored and switched to cyclic mode if the value falls below a threshold so that the interpreter has the chance to fill the lookahead again. IF fb Set Rt Mode.b Execute = FALSE THEN IF io_X. Nc To Plc. Saf Entries > n Saf Entries Threshold THEN IF fb Set Rt Mode.rt Mode <> E_Rt Mode. Rt Mode_Fast As Possible THEN fb Set Rt Mode.rt Mode := E_Rt Mode. Rt Mode_Fast As Possible; fb Set Rt Mode.b Execute := TRUE; END_IF ELSIF fb Set Rt Mode.rt Mode <> E_Rt Mode. Rt Mode_Cyclic THEN fb Set Rt Mode.rt Mode := E_Rt Mode. Rt Mode_Cyclic; fb Set Rt Mode.b Execute := TRUE; END_IF ELSIF NOT fb Set Rt Mode.b Busy THEN fb Set Rt Mode.b Execute := FALSE; END_IF fb Set Rt Mode(); 5.8.3 TF52xx | Twin CAT 3 CNC The TF52xx Twin CAT 3 CNC function is supported by the Usermode Runtime. This requires the installation of the following packages: • Twin CAT. XARUM. CNC. Export • Twin CAT. XARUM. CNC. Standard These packages are also a prerequisite for using all TF52xx products with Usermode Runtime. Excluded from this are the products: • TF5225 | Twin CAT 3 CNC Measurement • TF5245 | Twin CAT 3 CNC Kinematic Optimization • TF5293 | Twin CAT 3 CNC Milling Base These are CNC cycles that can be run in both Kernelmode- and Usermode Runtime. 5.8.4 TF5400 | Twin CAT 3 Advanced Motion Pack The functions contained in the TF5400 Twin CAT 3 Advanced Motion Pack • TF5110-TF5112 Twin CAT 3 Kinematic Transformation L1-L3 • TF5410 Twin CAT 3 Motion Collision Avoidance • TF5420 Twin CAT 3 Motion Pick-and-Place • TF5430 Twin CAT 3 Planar Motion. are supported by the Usermode Runtime. This requires the installation of the following packages: TC170x Version: 1.4.0 15

## Page 16

Technical introduction • Twin CAT. XARUM. NCPTP • Twin CAT. XARUM. Advanced Motion 5.8.5 TF6310 | Twin CAT 3 TCP/IP The function TF6310 Twin CAT 3 TCP/IP is based on an ADS Server, which is started by the Twin CAT 3 Usermode Runtime. To do this - after the function has been installed - a Start Man Config.xml file with the following content must be created in the 3.1\Target directory of the Usermode Runtime (for example: C:\Program Data\Beckhoff\Twin CAT\3.1\Runtimes\Um RT_Default\3.1\Target) <Start Man> <Twin CATServers> <Twin CATServer Enabled="1"> <Name>Tcp Ip Server</Name> <Path>C:\Program Files (x86)\Beckhoff\Twin CAT\Functions\TF6310-TCP-IP\Win32\Server\Tcp Ip Server.exe</Path> </Twin CATServer> </Twin CATServers> </Start Man> 5.8.6 TF7xxx | Twin CAT 3 Vision A few configurations must be taken into account to use Twin CAT 3 Vision with the Usermode Runtime. These are described in the Twin CAT 3 Vision documentation in the chapter Using the Twin CAT 3 Usermode Runtime. 16 Version: 1.4.0 TC170x

## Page 17

Reference 6 Reference 6.1 Command line parameters & commands The Twin CAT 3 Usermode Runtime is implemented by the program Tc System Service Um.exe. This program can also be called up or used directly, which is why parameters and commands are described here. Parameter • -i: Specifies the Ams Net Id to be used. Example "-i 192.168.4.1.1.1" • -n: Name of the Twin CAT 3 Usermode Runtime. Example "-n My Um Runtime" • -c: Path to the configuration folder. Example "-c ..\3.1" • -f 0x4: Mode to use External Control [} 13] or Fast As Possible [} 13]. Commands If the Twin CAT 3 Usermode Runtime is started on the command line, the following output appears: • "c" switches to Config mode • "r" switches to Run mode • "s" queries the current state • "x" exits the Twin CAT 3 Usermode Runtime 6.2 Configuration The entire configuration of the Twin CAT 3 Usermode Runtime is carried out in the \3.1 directory. The structure of the directories is described at File storage [} 11]. Here you will find the usual files that are also used for the real-time runtime. On the one hand, this concerns the boot directory, which contains the program to be executed by enabling a configuration. On the other hand, the target directory, which for example also contains the route information via Static Routes.xml for the Usermode Runtime. Under Windows, Twin CAT saves a number of settings in the system-wide Windows registry. Because the Usermode Runtime may have different settings than the real-time runtime, the Tc Registry.xml file is provided locally in the \3.1 directory for this purpose. TC170x Version: 1.4.0 17

## Page 18

Reference The following XML entries in the Tc Registry.xml are of particular interest for the Twin CAT 3 Usermode Runtime: • The structure used is similar to the Windows registry, so that adaptations can also be derived for other components. • Heap Mem Size MB (see example below): Total size of the memory used. In real-time runtime, it corresponds to the nonpaged pool of Windows, but in Usermode Runtime, it is allocated completely at startup. The memory must be sufficient for ◦ Router memory: Is defined via the Engineering Realtime-Tab->Settings->Router Memory. This value is stored as Locked Mem Size (in bytes) in the Tc Registry.xml. ◦ Application memory: Memory that is allocated by the runtime itself, the PLC, TMX modules or also dynamically by the application. <?xml version="1.0"?> <Tc Registry> <Key Name="HKLM"> <Key Name="Software"> <Key Name="Beckhoff"> <Key Name="Twin CAT3"> <Value Name="Current Version" Type="SZ">3.1</Value> <Key Name="System"> <Value Name="Run As Device" Type="DW">1</Value> <Value Name="Ams Net Id" Type="BIN">C0A804010101</Value> <Value Name="Heap Mem Size MB" Type="DW">512</Value> </Key> […] 18 Version: 1.4.0 TC170x

## Page 19

API 7 API 7.1 External Control (ADS) An interface is available for Twin CAT 3 Usermode Runtime - External Control to enable access from external programs via ADS. This interface consists of several parts: Query the state The current state can be queried via this interface. ADS Port Index Group Index Offset Access Data Description Note type 200 0x00000001 0x00000032 R ULONG Returns the current Rt Mode. (RTADSGRP (RTADSOFF If the value is 3 _SYSDATA) S_SYSDATA ( Rt Mode_Externaltick ), the _TICK_MOD calculation can be triggered by E) starting the tick. Values of the Rt Mode: enum Rt Mode { Rt Mode_None = 0, Rt Mode_Normal = 1, Rt Mode_Simulation = 2, Rt Mode_External Tick = 3, Rt Mode_Invalid = -1 } Starting the ticks This interface can be used to specify a number of ticks that the Twin CAT 3 Usermode Runtime should execute. ADS Port Index Group Index Offset Access Data Description Note type 200 0x00000001 0x00000031 W Int Number of ticks that the (RTADSGRP (RTADSOFF Usermode Runtime should _SYSDATA) S_SYSDATA execute. _TICKNOW) Return value indicates whether the command can be processed, then ADSERR_NOERR. 7.2 Interface ITc RTime Simulation The ITc RTime Simulation interface provides the interface for accessing the Twin CAT 3 Usermode Runtime from the real-time program (in PLC / C++). This can be used to query and change the status. Syntax TCOM_DECL_INTERFACE("460AD091-0352-4002-9C5E-C8AE7A1AFE56", ITc RTime Simulation) TC170x Version: 1.4.0 19

## Page 20

API Methods Name Description Change Tick Mode [} 20] Change the mode of the Usermode Runtime. Get Tick Mode [} 20] Query the mode of the Usermode Runtime. Advance Tick [} 20] Execution of real-time ticks for the Usermode Runtime. 7.2.1 Method ITc RTime Simulation:Change Tick Mode Change the mode of the Usermode Runtime. Syntax virtual HRESULT TCOMAPI Change Tick Mode(ULONG rt Tick Mode) = 0; Parameter Name Type Description rt Tick Mode ULONG Sets the mode of the Usermode Runtime. Rt Mode_Fast As Possible := 2 Rt Mode_Externaltick := 3 Rt Mode_Cyclic := 4 Return value If successful, S_OK ("0") or another positive value will be returned, cf. Return values [} 23]. Extended messages refer in particular to the column HRESULT in ADS Return Codes [} 25]. 7.2.2 Method ITc RTime Simulation:Get Tick Mode Query the mode of the Usermode Runtime. Syntax virtual HRESULT TCOMAPI Get Tick Mode(ULONG& rt Tick Mode) = 0; Parameter Name Type Description rt Tick Mode ULONG& Query the advanced mode of the Usermode Runtime Rt Mode_None := 0 Rt Mode_Normal := 1 Rt Mode_Fast As Possible := 2 Rt Mode_Externaltick := 3 Rt Mode_Cyclic := 4 Rt Mode_Invalid := -1 Return value If successful, S_OK ("0") or another positive value will be returned, cf. Return values [} 23]. Extended messages refer in particular to the column HRESULT in ADS Return Codes [} 25]. 7.2.3 Method ITc RTime Simulation:Advance Tick Execution of real-time ticks for the Usermode Runtime. 20 Version: 1.4.0 TC170x

## Page 21

API Syntax virtual HRESULT TCOMAPI Change Tick Mode(ULONG rt Tick Mode) = 0; Parameter Name Type Description n Ticks ULONG Execution of the number of ticks. Return value If successful, S_OK ("0") or another positive value will be returned, cf. Return values [} 23]. Extended messages refer in particular to the column HRESULT in ADS Return Codes [} 25]. 7.3 Runtime type (ADS) A runtime provides an interface via ADS with which an ADS client can query the type. Platform type The platform type can be queried via this interface. ADS Port Index Group Index Offset Access Data Description Note type 200 0x00000700 0x00000004 R String A string with the platform as (SYSTEMSE (TARGETINF selected in Twin CAT XAE RVICE_TAR O_PLATFOR Engineering. GETINFO) M) For example, a "Twin CAT OS (x64)" for a Twin CAT Usermode Runtime or a Twin CAT/BSD® system. Runtime type The runtime type can be queried via this interface - i.e. the information whether it is a real-time runtime or the Twin CAT 3 Usermode Runtime. ADS Port Index Group Index Offset Access Data Description Note type 200 0x00000700 0x00000002 R ULONG 1 = Usermode Runtime (SYSTEMSE (TARGETINF 0 = no Usermode Runtime RVICE_TAR O_TARGETT GETINFO) YPE) TC170x Version: 1.4.0 21

## Page 22

Sample 8 Sample This sample shows the different ways in which the Twin CAT 3 Usermode Runtime can be used. Sample code for these products can be obtained from the corresponding repository on Git Hub: https:// github.com/Beckhoff/TC170x_Samples. There you have the option to clone the repository or download a ZIP file containing the sample. The sample assumes that a Twin CAT 3 Usermode Runtime has been started for execution and that this has also been started with -f 0x4 to switch between different modes, as described [} 13]. There are two projects in the repository: • Tc Rt Simulation External Tick provides external control of the Twin CAT 3 Usermode Runtime. A command is sent that leads to the execution of 100 real-time ticks. The program can be easily compiled in a Visual Studio with C++ support. Please note that you may need to adjust the Ams Net Id. • Test Tc Os Um Rt Simulation_Self Tick is a Twin CAT solution that provides a corresponding sample to demonstrate the use of the products. External Control (TC1701): MAIN_External Tick A counter value is counted down from 100 to 0 in normal cyclic mode. Meanwhile, "...cycling..." is displayed in a "hint" variable. The system then waits for the external ticks, which you can send using the Tc Rt Simulation External Tick program The three variants of MAIN_External Tick show different ways to use the same interface: Via ADS (MAIN_External Tick), as a Functions call (MAIN_External Tick_F), or as a Tc COM object (MAIN_External Tick_ITc). Fast As Possible (TC1702): MAIN_Fast As Possible A counter value is counted down from 100 to 0 in normal cyclic mode. The system then switches to Rt Mode_Fast As Possible and counts from 100,000 to 0. The process is repeated, which is counted in the counter Iteration. The three variants of MAIN_Fast As Possible show different ways to use the same interface: Via ADS (MAIN_Fast As Possible); as a Functions call (MAIN_Fast As Possible_F); or as a Tc COM object (MAIN_Fast As Possible_ITc). 22 Version: 1.4.0 TC170x

## Page 23

Appendix 9 Appendix 9.1 Return values ITc interfaces methods generally return an HRESULT. The following return values can be returned in the case of ITc interfaces: Name HRESULT S_OK 0x0000 0000 S_FALSE 0x0000 0001 E_NOTIMPL 0x8000 4001 E_NOINTERFACE 0x8000 4002 E_POINTER 0x8000 4003 E_ABORT 0x8000 4004 E_FAIL 0x8000 4005 E_UNEXPECTED 0x8000 FFFF E_ACCESSDENIED 0x8007 0005 E_HANDLE 0x8007 0006 E_OUTOFMEMORY 0x8007 000E E_INVALIDARG 0x8007 0057 In addition, there is a possibility for ADS Return Codes [} 25] to be returned as HRESULT. These are also available as macros in the SDK, where they are known, for example, as ADS_E_BUSY for the ADS Error Code ADSERR_DEVICE_BUSY. 9.2 FAQ - frequently asked questions and answers In this section frequently asked questions are answered, in order to facilitate your work with the Twin CAT Usermode Runtime. If you have any further questions, please contact our support team at support@beckhoff.com. 1. How do I start the Twin CAT Usermode Runtime? [} 23] 2. What does the error message mean: too little memory when using the PLC? [} 23] 3. How can I access the Usermode Runtime remotely? [} 24] 4. How is a collision of the Ams Net Id prevented? [} 24] 5. Is Twin CAT C++ and Critical Sections available in the Windows context? [} 24] How do I start the Twin CAT Usermode Runtime? You can start the Usermode Runtime via the "start.bat" in your respective Program Data [} 11] folder. It can then be selected as a target system via the Automation Interface and can be used in the same way as other systems in terms of Activate Configuration and changing the state. What does the error message mean: too little memory when using the PLC? If you get this error when logging in (or through the autostart): TC170x Version: 1.4.0 23

## Page 24

Appendix your application requires more memory than the Usermode Runtime provides by default. A file 3.1/Tc Registry.xml is available in the Program Data directory of the Usermode Runtime, which you can use to change this configuration. Insert a value "Heap Mem Size MB", which specifies a value in megabytes. Here it is 512 MB: How can I access the Usermode Runtime remotely? The Usermode Runtime has its own router component and its own Ams Net Id. The Usermode Runtime logs on to the system router component so that it can be reached locally via its own Ams Net Id. If the Usermode Runtime is to be accessible from another system, the file 3.1\Static Routes.xml can be extended in its Program Data directory, as described in the documentation Twin CAT 3 ADS-over-MQTT. How is a collision of the Ams Net Id prevented? A Usermode Runtime requires a unique Ams Net Id on the system. This is saved in the configuration in your Program Data directory 3.1\Tc Registry.xml. If a Usermode Runtime has already occupied this Ams Net Id at startup, the 2nd byte is incremented: 199.4.42.250.1.1 thus becomes 199.5.42.250.1.1. Is Twin CAT C++ and Critical Sections available in the Windows context? The Critical Sections synchronization mechanism is not available in the Windows context for Twin CAT C++. It is not required if the state machine is used correctly. The Enter Critical Section call is therefore ignored in these transitions. However, in Usermode Runtime, the call terminates the process via an exception to improve understanding. The following code queries this explicitly: if ( ! In Windows() ) m_cs. Enter Critical Section(); m_counter = 0x00u; if (! In Windows() ) m_cs. Leave Critical Section(); However, it is important to familiarize yourself with the state machine of the C++ modules and to use it appropriately. Critical sections can be omitted in these steps. 24 Version: 1.4.0 TC170x

## Page 25

Appendix 9.3 ADS Return Codes Grouping of error codes: Global error codes: 0x0000 [} 25]... (0x9811_0000 ...) Router error codes: 0x500 [} 25]... (0x9811_0500 ...) General ADS errors: 0x700 [} 26]... (0x9811_0700 ...) RTime error codes: 0x1000 [} 28]... (0x9811_1000 ...) Global error codes Hex Dec HRESULT Name Description 0x0 0 0x98110000 ERR_NOERROR No error. 0x1 1 0x98110001 ERR_INTERNAL Internal error. 0x2 2 0x98110002 ERR_NORTIME No real time. 0x3 3 0x98110003 ERR_ALLOCLOCKEDMEM Allocation locked – memory error. 0x4 4 0x98110004 ERR_INSERTMAILBOX Mailbox full – the ADS message could not be sent. Reducing the number of ADS messages per cycle will help. 0x5 5 0x98110005 ERR_WRONGRECEIVEHMSG Wrong HMSG. 0x6 6 0x98110006 ERR_TARGETPORTNOTFOUND Target port not found – ADS server is not started, not reachable or not installed. 0x7 7 0x98110007 ERR_TARGETMACHINENOTFOUND Target computer not found – AMS route was not found. 0x8 8 0x98110008 ERR_UNKNOWNCMDID Unknown command ID. 0x9 9 0x98110009 ERR_BADTASKID Invalid task ID. 0x A 10 0x9811000A ERR_NOIO No IO. 0x B 11 0x9811000B ERR_UNKNOWNAMSCMD Unknown AMS command. 0x C 12 0x9811000C ERR_WIN32ERROR Win32 error. 0x D 13 0x9811000D ERR_PORTNOTCONNECTED Port not connected. 0x E 14 0x9811000E ERR_INVALIDAMSLENGTH Invalid AMS length. 0x F 15 0x9811000F ERR_INVALIDAMSNETID Invalid AMS Net ID. 0x10 16 0x98110010 ERR_LOWINSTLEVEL Installation level is too low –Twin CAT 2 license error. 0x11 17 0x98110011 ERR_NODEBUGINTAVAILABLE No debugging available. 0x12 18 0x98110012 ERR_PORTDISABLED Port disabled – Twin CAT system service not started. 0x13 19 0x98110013 ERR_PORTALREADYCONNECTED Port already connected. 0x14 20 0x98110014 ERR_AMSSYNC_W32ERROR AMS Sync Win32 error. 0x15 21 0x98110015 ERR_AMSSYNC_TIMEOUT AMS Sync Timeout. 0x16 22 0x98110016 ERR_AMSSYNC_AMSERROR AMS Sync error. 0x17 23 0x98110017 ERR_AMSSYNC_NOINDEXINMAP No index map for AMS Sync available. 0x18 24 0x98110018 ERR_INVALIDAMSPORT Invalid AMS port. 0x19 25 0x98110019 ERR_NOMEMORY No memory. 0x1A 26 0x9811001A ERR_TCPSEND TCP send error. 0x1B 27 0x9811001B ERR_HOSTUNREACHABLE Host unreachable. 0x1C 28 0x9811001C ERR_INVALIDAMSFRAGMENT Invalid AMS fragment. 0x1D 29 0x9811001D ERR_TLSSEND TLS send error – secure ADS connection failed. 0x1E 30 0x9811001E ERR_ACCESSDENIED Access denied – secure ADS access denied. Router error codes TC170x Version: 1.4.0 25

## Page 26

Appendix Hex Dec HRESULT Name Description 0x500 1280 0x98110500 ROUTERERR_NOLOCKEDMEMORY Locked memory cannot be allocated. 0x501 1281 0x98110501 ROUTERERR_RESIZEMEMORY The router memory size could not be changed. 0x502 1282 0x98110502 ROUTERERR_MAILBOXFULL The mailbox has reached the maximum number of possible messages. 0x503 1283 0x98110503 ROUTERERR_DEBUGBOXFULL The Debug mailbox has reached the maximum number of possible messages. 0x504 1284 0x98110504 ROUTERERR_UNKNOWNPORTTYPE The port type is unknown. 0x505 1285 0x98110505 ROUTERERR_NOTINITIALIZED The router is not initialized. 0x506 1286 0x98110506 ROUTERERR_PORTALREADYINUSE The port number is already assigned. 0x507 1287 0x98110507 ROUTERERR_NOTREGISTERED The port is not registered. 0x508 1288 0x98110508 ROUTERERR_NOMOREQUEUES The maximum number of ports has been reached. 0x509 1289 0x98110509 ROUTERERR_INVALIDPORT The port is invalid. 0x50A 1290 0x9811050A ROUTERERR_NOTACTIVATED The router is not active. 0x50B 1291 0x9811050B ROUTERERR_FRAGMENTBOXFULL The mailbox has reached the maximum number for fragmented messages. 0x50C 1292 0x9811050C ROUTERERR_FRAGMENTTIMEOUT A fragment timeout has occurred. 0x50D 1293 0x9811050D ROUTERERR_TOBEREMOVED The port is removed. General ADS error codes 26 Version: 1.4.0 TC170x

## Page 27

Appendix Hex Dec HRESULT Name Description 0x700 1792 0x98110700 ADSERR_DEVICE_ERROR General device error. 0x701 1793 0x98110701 ADSERR_DEVICE_SRVNOTSUPP Service is not supported by the server. 0x702 1794 0x98110702 ADSERR_DEVICE_INVALIDGRP Invalid index group. 0x703 1795 0x98110703 ADSERR_DEVICE_INVALIDOFFSET Invalid index offset. 0x704 1796 0x98110704 ADSERR_DEVICE_INVALIDACCESS Reading or writing not permitted. Several causes are possible. For example, an incorrect password was entered when creating routes. 0x705 1797 0x98110705 ADSERR_DEVICE_INVALIDSIZE Parameter size not correct. 0x706 1798 0x98110706 ADSERR_DEVICE_INVALIDDATA Invalid data values. 0x707 1799 0x98110707 ADSERR_DEVICE_NOTREADY Device is not ready to operate. 0x708 1800 0x98110708 ADSERR_DEVICE_BUSY Device is busy. 0x709 1801 0x98110709 ADSERR_DEVICE_INVALIDCONTEXT Invalid operating system context. This can result from use of ADS blocks in different tasks. It may be possible to resolve this through multitasking synchronization in the PLC. 0x70A 1802 0x9811070A ADSERR_DEVICE_NOMEMORY Insufficient memory. 0x70B 1803 0x9811070B ADSERR_DEVICE_INVALIDPARM Invalid parameter values. 0x70C 1804 0x9811070C ADSERR_DEVICE_NOTFOUND Not found (files, ...). 0x70D 1805 0x9811070D ADSERR_DEVICE_SYNTAX Syntax error in file or command. 0x70E 1806 0x9811070E ADSERR_DEVICE_INCOMPATIBLE Objects do not match. 0x70F 1807 0x9811070F ADSERR_DEVICE_EXISTS Object already exists. 0x710 1808 0x98110710 ADSERR_DEVICE_SYMBOLNOTFOUND Symbol not found. 0x711 1809 0x98110711 ADSERR_DEVICE_SYMBOLVERSIONINVALID Invalid symbol version. This can occur due to an online change. Create a new handle. 0x712 1810 0x98110712 ADSERR_DEVICE_INVALIDSTATE Device (server) is in invalid state. 0x713 1811 0x98110713 ADSERR_DEVICE_TRANSMODENOTSUPP Ads Trans Mode not supported. 0x714 1812 0x98110714 ADSERR_DEVICE_NOTIFYHNDINVALID Notification handle is invalid. 0x715 1813 0x98110715 ADSERR_DEVICE_CLIENTUNKNOWN Notification client not registered. 0x716 1814 0x98110716 ADSERR_DEVICE_NOMOREHDLS No further handle available. 0x717 1815 0x98110717 ADSERR_DEVICE_INVALIDWATCHSIZE Notification size too large. 0x718 1816 0x98110718 ADSERR_DEVICE_NOTINIT Device not initialized. 0x719 1817 0x98110719 ADSERR_DEVICE_TIMEOUT Device has a timeout. 0x71A 1818 0x9811071A ADSERR_DEVICE_NOINTERFACE Interface query failed. 0x71B 1819 0x9811071B ADSERR_DEVICE_INVALIDINTERFACE Wrong interface requested. 0x71C 1820 0x9811071C ADSERR_DEVICE_INVALIDCLSID Class ID is invalid. 0x71D 1821 0x9811071D ADSERR_DEVICE_INVALIDOBJID Object ID is invalid. 0x71E 1822 0x9811071E ADSERR_DEVICE_PENDING Request pending. 0x71F 1823 0x9811071F ADSERR_DEVICE_ABORTED Request is aborted. 0x720 1824 0x98110720 ADSERR_DEVICE_WARNING Signal warning. 0x721 1825 0x98110721 ADSERR_DEVICE_INVALIDARRAYIDX Invalid array index. 0x722 1826 0x98110722 ADSERR_DEVICE_SYMBOLNOTACTIVE Symbol not active. 0x723 1827 0x98110723 ADSERR_DEVICE_ACCESSDENIED Access denied. Several causes are possible. For example, a unidirectional ADS route is used in the opposite direction. 0x724 1828 0x98110724 ADSERR_DEVICE_LICENSENOTFOUND Missing license. 0x725 1829 0x98110725 ADSERR_DEVICE_LICENSEEXPIRED License expired. 0x726 1830 0x98110726 ADSERR_DEVICE_LICENSEEXCEEDED License exceeded. 0x727 1831 0x98110727 ADSERR_DEVICE_LICENSEINVALID Invalid license. 0x728 1832 0x98110728 ADSERR_DEVICE_LICENSESYSTEMID License problem: System ID is invalid. 0x729 1833 0x98110729 ADSERR_DEVICE_LICENSENOTIMELIMIT License not limited in time. 0x72A 1834 0x9811072A ADSERR_DEVICE_LICENSEFUTUREISSUE Licensing problem: time in the future. 0x72B 1835 0x9811072B ADSERR_DEVICE_LICENSETIMETOLONG License period too long. 0x72C 1836 0x9811072C ADSERR_DEVICE_EXCEPTION Exception at system startup. 0x72D 1837 0x9811072D ADSERR_DEVICE_LICENSEDUPLICATED License file read twice. 0x72E 1838 0x9811072E ADSERR_DEVICE_SIGNATUREINVALID Invalid signature. 0x72F 1839 0x9811072F ADSERR_DEVICE_CERTIFICATEINVALID Invalid certificate. 0x730 1840 0x98110730 ADSERR_DEVICE_LICENSEOEMNOTFOUND Public key not known from OEM. 0x731 1841 0x98110731 ADSERR_DEVICE_LICENSERESTRICTED License not valid for this system ID. TC170x Version: 1.4.0 27

## Page 28

Appendix Hex Dec HRESULT Name Description 0x732 1842 0x98110732 ADSERR_DEVICE_LICENSEDEMODENIED Demo license prohibited. 0x733 1843 0x98110733 ADSERR_DEVICE_INVALIDFNCID Invalid function ID. 0x734 1844 0x98110734 ADSERR_DEVICE_OUTOFRANGE Outside the valid range. 0x735 1845 0x98110735 ADSERR_DEVICE_INVALIDALIGNMENT Invalid alignment. 0x736 1846 0x98110736 ADSERR_DEVICE_LICENSEPLATFORM Invalid platform level. 0x737 1847 0x98110737 ADSERR_DEVICE_FORWARD_PL Context – forward to passive level. 0x738 1848 0x98110738 ADSERR_DEVICE_FORWARD_DL Context – forward to dispatch level. 0x739 1849 0x98110739 ADSERR_DEVICE_FORWARD_RT Context – forward to real-time. 0x740 1856 0x98110740 ADSERR_CLIENT_ERROR Client error. 0x741 1857 0x98110741 ADSERR_CLIENT_INVALIDPARM Service contains an invalid parameter. 0x742 1858 0x98110742 ADSERR_CLIENT_LISTEMPTY Polling list is empty. 0x743 1859 0x98110743 ADSERR_CLIENT_VARUSED Var connection already in use. 0x744 1860 0x98110744 ADSERR_CLIENT_DUPLINVOKEID The called ID is already in use. 0x745 1861 0x98110745 ADSERR_CLIENT_SYNCTIMEOUT Timeout has occurred – the remote terminal is not responding in the specified ADS timeout. The route setting of the remote terminal may be configured incorrectly. 0x746 1862 0x98110746 ADSERR_CLIENT_W32ERROR Error in Win32 subsystem. 0x747 1863 0x98110747 ADSERR_CLIENT_TIMEOUTINVALID Invalid client timeout value. 0x748 1864 0x98110748 ADSERR_CLIENT_PORTNOTOPEN Port not open. 0x749 1865 0x98110749 ADSERR_CLIENT_NOAMSADDR No AMS address. 0x750 1872 0x98110750 ADSERR_CLIENT_SYNCINTERNAL Internal error in Ads sync. 0x751 1873 0x98110751 ADSERR_CLIENT_ADDHASH Hash table overflow. 0x752 1874 0x98110752 ADSERR_CLIENT_REMOVEHASH Key not found in the table. 0x753 1875 0x98110753 ADSERR_CLIENT_NOMORESYM No symbols in the cache. 0x754 1876 0x98110754 ADSERR_CLIENT_SYNCRESINVALID Invalid response received. 0x755 1877 0x98110755 ADSERR_CLIENT_SYNCPORTLOCKED Sync Port is locked. 0x756 1878 0x98110756 ADSERR_CLIENT_REQUESTCANCELLED The request was canceled. RTime error codes Hex Dec HRESULT Name Description 0x1000 4096 0x98111000 RTERR_INTERNAL Internal error in the real-time system. 0x1001 4097 0x98111001 RTERR_BADTIMERPERIODS Timer value is not valid. 0x1002 4098 0x98111002 RTERR_INVALIDTASKPTR Task pointer has the invalid value 0 (zero). 0x1003 4099 0x98111003 RTERR_INVALIDSTACKPTR Stack pointer has the invalid value 0 (zero). 0x1004 4100 0x98111004 RTERR_PRIOEXISTS The request task priority is already assigned. 0x1005 4101 0x98111005 RTERR_NOMORETCB No free TCB (Task Control Block) available. The maximum number of TCBs is 64. 0x1006 4102 0x98111006 RTERR_NOMORESEMAS No free semaphores available. The maximum number of semaphores is 64. 0x1007 4103 0x98111007 RTERR_NOMOREQUEUES No free space available in the queue. The maximum number of positions in the queue is 64. 0x100D 4109 0x9811100D RTERR_EXTIRQALREADYDEF An external synchronization interrupt is already applied. 0x100E 4110 0x9811100E RTERR_EXTIRQNOTDEF No external sync interrupt applied. 0x100F 4111 0x9811100F RTERR_EXTIRQINSTALLFAILED Application of the external synchronization interrupt has failed. 0x1010 4112 0x98111010 RTERR_IRQLNOTLESSOREQUAL Call of a service function in the wrong context 0x1017 4119 0x98111017 RTERR_VMXNOTSUPPORTED Intel® VT-x extension is not supported. 0x1018 4120 0x98111018 RTERR_VMXDISABLED Intel® VT-x extension is not enabled in the BIOS. 0x1019 4121 0x98111019 RTERR_VMXCONTROLSMISSING Missing function in Intel® VT-x extension. 0x101A 4122 0x9811101A RTERR_VMXENABLEFAILS Activation of Intel® VT-x fails. Specific positive HRESULT Return Codes: 28 Version: 1.4.0 TC170x

## Page 29

Appendix HRESULT Name Description 0x0000_0000 S_OK No error. 0x0000_0001 S_FALSE No error. Example: successful processing, but with a negative or incomplete result. 0x0000_0203 S_PENDING No error. Example: successful processing, but no result is available yet. 0x0000_0256 S_WATCHDOG_TIMEOUT No error. Example: successful processing, but a timeout occurred. TCP Winsock error codes Hex Dec Name Description 0x274C 10060 WSAETIMEDOUT A connection timeout has occurred - error while establishing the connection, because the remote terminal did not respond properly after a certain period of time, or the established connection could not be maintained because the connected host did not respond. 0x274D 10061 WSAECONNREFUSED Connection refused - no connection could be established because the target computer has explicitly rejected it. This error usually results from an attempt to connect to a service that is inactive on the external host, that is, a service for which no server application is running. 0x2751 10065 WSAEHOSTUNREACH No route to host - a socket operation referred to an unavailable host. More Winsock error codes: Win32 error codes TC170x Version: 1.4.0 29

## Page 30

Support and Service 10 Support and Service Beckhoff and their partners around the world offer comprehensive support and service, making available fast and competent assistance with all questions related to Beckhoff products and system solutions. Download finder Our download finder contains all the files that we offer you for downloading. You will find application reports, technical documentation, technical drawings, configuration files and much more. The downloads are available in various formats. Beckhoff's branch offices and representatives Please contact your Beckhoff branch office or representative for local support and service on Beckhoff products! The addresses of Beckhoff's branch offices and representatives round the world can be found on our internet page: www.beckhoff.com You will also find further documentation for Beckhoff components there. Beckhoff Support Support offers you comprehensive technical assistance, helping you not only with the application of individual Beckhoff products, but also with other, wide-ranging services: • support • design, programming and commissioning of complex automation systems • and extensive training program for Beckhoff system components Hotline: +49 5246 963-157 e-mail: support@beckhoff.com Beckhoff Service The Beckhoff Service Center supports you in all matters of after-sales service: • on-site service • repair service • spare parts service • hotline service Hotline: +49 5246 963-460 e-mail: service@beckhoff.com Beckhoff Headquarters Beckhoff Automation Gmb H & Co. KG Huelshorstweg 20 33415 Verl Germany Phone: +49 5246 963-0 e-mail: info@beckhoff.com web: www.beckhoff.com 30 Version: 1.4.0 TC170x

## Page 31

Trademark statements Beckhoff®, ATRO®, Ether CAT®, Ether CAT G®, Ether CAT G10®, Ether CAT P®, MX-System®, Safety over Ether CAT®, TC/BSD®, Twin CAT®, Twin CAT/BSD®, Twin SAFE®, XFC®, XPlanar® and XTS® are registered and licensed trademarks of Beckhoff Automation Gmb H. Third-party trademark statements Intel, the Intel logo, Intel Core, Xeon, Intel Atom, Celeron and Pentium are trademarks of Intel Corporation or its subsidiaries. Microsoft, Microsoft Azure, Microsoft Edge, Power Shell, Visual Studio, Windows and Xbox are trademarks of the Microsoft group of companies.

## Page 32

More Information: www.beckhoff.com/tc1700 Beckhoff Automation Gmb H & Co. KG Hülshorstweg 20 33415 Verl Germany Phone: +49 5246 9630 info@beckhoff.com www.beckhoff.com
