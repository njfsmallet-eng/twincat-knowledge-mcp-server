---
title: "TF5200_axis_filter_en"
product: "TF5200"
category: "Motion_Control"
tags: ["NC"]
language: "EN"
document_type: "Manual"
version: "1.05"
source_pdf: "https://download.beckhoff.com/download/Document/automation/twincat3/TF5200_axis_filter_en.pdf"
release_date: "2025-06-06"
---
Functional description | EN TF5200 | Twin CAT 3 CNC Axis filters 6/6/2025 | Version: 1.05
## Page 3

Notes on the documentation Notes on the documentation This description is only intended for the use of trained specialists in control and automation engineering who are familiar with the applicable national standards. It is essential that the documentation and the following notes and explanations are followed when installing and commissioning the components. It is the duty of the technical personnel to use the documentation published at the respective time of each installation and commissioning. The responsible staff must ensure that the application or use of the products described satisfy all the requirements for safety, including all the relevant laws, regulations, guidelines and standards. Disclaimer The documentation has been prepared with care. The products described are, however, constantly under development. We reserve the right to revise and change the documentation at any time and without prior announcement. No claims for the modification of products that have already been supplied may be made on the basis of the data, diagrams and descriptions in this documentation. Trademarks Beckhoff®, Twin CAT®, Twin CAT/BSD®, TC/BSD®, Ether CAT®, Ether CAT G®, Ether CAT G10®, Ether CAT P®, Safety over Ether CAT®, Twin SAFE®, XFC®, XTS® and XPlanar® are registered trademarks of and licensed by Beckhoff Automation Gmb H. Other designations used in this publication may be trademarks whose use by third parties for their own purposes could violate the rights of the owners. Patent Pending The Ether CAT technology is patent protected, in particular by the following applications and patents: EP1590927, EP1789857, EP1456722, EP2137893, DE102015105702 with corresponding applications or registrations in various other countries. Ether CAT® is registered trademark and patented technology, licensed by Beckhoff Automation Gmb H, Germany Copyright © Beckhoff Automation Gmb H & Co. KG, Germany. The reproduction, distribution and utilisation of this document as well as the communication of its contents to others without express authorisation are prohibited. Offenders will be held liable for the payment of damages. All rights reserved in the event of the grant of a patent, utility model or design. TF5200 | Twin CAT 3 CNC Version: 1.05 3 Axis filters
## Page 4

General and safety instructions General and safety instructions Icons used and their meanings This documentation uses the following icons next to the safety instruction and the associated text. Please read the (safety) instructions carefully and comply with them at all times. Icons in explanatory text 1. Indicates an action. ð Indicates an action statement. DANGER Acute danger to life! If you fail to comply with the safety instruction next to this icon, there is immediate danger to human life and health. CAUTION Personal injury and damage to machines! If you fail to comply with the safety instruction next to this icon, it may result in personal injury or damage to machines. NOTICE Restriction or error This icon describes restrictions or warns of errors. Tips and other notes This icon indicates information to assist in general understanding or to provide additional informa- tion. General example Example that clarifies the text. NC programming example Programming example (complete NC program or program sequence) of the described function or NC com- mand. Specific version information Optional or restricted function. The availability of this function depends on the configuration and the scope of the version. 4 Version: 1.05 TF5200 | Twin CAT 3 CNC Axis filters
## Page 5

Table of contents Table of contents Notes on the documentation.................................................................................................................... 3 General and safety instructions.............................................................................................................. 4 1 Overview.................................................................................................................................................... 8 2 Description................................................................................................................................................ 9 2.1 Standard filters.................................................................................................................................. 9 2.1.1 Low-pass filters................................................................................................................ 10 2.1.2 High-pass filters............................................................................................................... 14 2.1.3 Band-pass filters.............................................................................................................. 16 2.1.4 Band-stop filters............................................................................................................... 17 2.1.5 All-pass filters................................................................................................................... 21 2.1.6 PT1-filter........................................................................................................................... 22 2.1.7 PT2-filter........................................................................................................................... 24 2.1.8 Time delay filter................................................................................................................ 26 2.2 HSC filters....................................................................................................................................... 28 2.3 Filter prototypes.............................................................................................................................. 30 3 Parameter................................................................................................................................................. 31 3.1 Overview......................................................................................................................................... 31 3.2 Axis filter parameter........................................................................................................................ 33 3.3 Additional interface parameters...................................................................................................... 37 4 Application............................................................................................................................................... 40 5 Support and Service............................................................................................................................... 41 Index......................................................................................................................................................... 42 TF5200 | Twin CAT 3 CNC Version: 5 Axis filters
## Page 6

Table of contents 6 Version: TF5200 | Twin CAT 3 CNC Axis filters
## Page 7

List of figures List of figures Fig. 1 Amplitude frequency response of filter prototypes (4th order)..................................................... 11 Fig. 2 Step response of filter prototypes (4th order)............................................................................... 12 Fig. 3 Amplitude frequency response of high-pass filters (4th order)..................................................... 14 Fig. 4 Step response of high-pass filters (4th order).............................................................................. 15 Fig. 5 Amplitude frequency response of band-pass filters (4th order, quality = 1)................................. 16 Fig. 6 Amplitude frequency response of band-stop filters (4th order, quality = 1).................................. 17 Fig. 7 Amplitude response of band-stop filters ...................................................................................... 18 Fig. 8 Oscillation response of band-stop filters ..................................................................................... 19 Fig. 9 Bode diagram of an all-pass filter................................................................................................. 21 Fig. 10 Time constant of the PT1 filter .................................................................................................... 22 Fig. 11 Time constant of the PT2 filter .................................................................................................... 24 Fig. 12 Step response of the PT2 filter .................................................................................................... 25 Fig. 13 Signal profiles of the time delay filter .......................................................................................... 26 Fig. 14 Step response of the HSC filter.................................................................................................... 28 Fig. 15 Contour error per filter order at a 90° corner................................................................................ 29 Fig. 16 Step response of low-pass filters of different orders.................................................................... 40 TF5200 | Twin CAT 3 CNC Version: 1.05 7 Axis filters
## Page 8

Overview 1 Overview Task Filters are used to influence the signal profile. Depending on the required effect, the filters can be defined as low-pass, high-pass, band-pass or band-stop and all-pass filters. Depending on the filter type, the following is possible: • Smooth signal curve • Limit bandwidth • Suppress noise • Select frequency bands • Attenuate frequency bands • Compensate dead times The filters are also used to reduce resonance phenomena. The filters act on the values for the absolute position setpoint that were calculated by path interpolation. Characteristics Filters can be classified according to their characteristic transmission behaviour and their purpose. Filter types with different characteristics can be used for control. A distinction is made between standard and HSC filters. Filter prototypes 1-4 are standard filter types and filter prototype 5 describes HSC filters. The parameter-definable filters are effective with: • Linear axes • Rotary axes without modulo calculation, i.e. those that have a limited motion range (see P- AXIS-00015) • Rotary axes with modulo handling, i.e. rotating endlessly • Spindles (as of CNC Version V3.00). Only standard filters are available for spindles;HSC filters cannot be used. Parametrisation and programming Filter settings are configured and adapted in the axis lists. Standard filters are also activated in the axis lists. HSC filters are only preconfigured in the axis lists; they are activated by an NC command. Mandatory note on references to other documents For the sake of clarity, links to other documents and parameters are abbreviated, e.g. [PROG] for the Programming Manual or P-AXIS-00001 for an axis parameter. For technical reasons, these links only function in the Online Help (HTML5, CHM) but not in pdf files since pdfs do not support cross-linking. 8 Version: 1.05 TF5200 | Twin CAT 3 CNC Axis filters
## Page 9

Description 2 Description General The filter algorithms that are implemented in the controller are characterised by high selectivity with a low order of the filter. For each specific axis, the properties of the filters used can be defined via the axis parameter record. Filter response is basically determined by: • Filter prototypes • Filter type • Order • Characteristic frequency. For certain filter types, the quality P-AXIS-00080 is also a defining attribute. With a standard filter (exception: HSC filters), up to 3 filters can be defined for each axis and they are then connected in series. In addition, 1 filter for each filter can be parameterised for the additional interface. 2.1 Standard filters Up to 3 axis filters can be connected in series and parameterised for each axis. A filter is active when the filter[i].enable parameter is set to 1 and the value of the filter[i].order parameter is > 0. In addition, 1 filter for each filter can be parameterised for the additional interface. The operating principle of standard filters can be controlled by using the following CNC objects in the GEO task: Name Index-Group Index-Offset Data type Description Active position 0x121300 0x61 SGN32 ACS command position unfiltered +<ch_id> +0x10000*<ax_i [unit 0.1µm or 10^-4°] dx> Example Channel 1: Example 1 Axis: 0x121301 0x10061 Ft_sollwert_gest 0x121300 0x1C SGN64 ACS command position after filter ern cascade +<ch_id> +0x10000*<ax_i dx> [unit 0.1µm or 10^-4°] Example Channel 1 Example 1 Axis 0x121301 0x1001C <ch_id> channel ID, <ax_idx> Axis index in the NC channel TF5200 | Twin CAT 3 CNC Version: 1.05 9 Axis filters
## Page 10

Description The following standard filters are available: • Low-pass filter All frequencies below a certain cut-off frequency are passed through the filter. Higher frequencies above this cut-off frequency are attenuated or are not passed through at all. High frequencies are filtered out. • High-pass filters Lower signal frequencies are attenuated or are not passed through at all. Only frequencies above a cut-off frequency are transmitted unchanged. • Band-stop filters One frequency range out of the transmit frequency range is filtered out. All other frequencies are transmitted almost without attenuation. The characteristic frequency is called the centre frequency. • Band-pass filters All frequencies except for the chosen frequency band are filtered out. All other frequencies are attenuated. • All-pass filters These filters have constant gain but generate a frequency-dependent phase shift. They are used for phase correction and to delay signals. • PT1 filters A PT1 filter is a first-order delay element that has a transmission response similar to that of a first-order low-pass filter. The filter transmits frequencies under the cut-off frequency fg = 1 / (2 * Pi * filter[i].time_constant). Frequencies > the cut-off frequency are attenuated at –20 d B/decade. • PT2 filters A PT2 filter is a 2nd order delay element whose transmit function G(s)=1/(1+Ts)2 corresponds to two first order delay elements switched in series. The transmission response is similar to a second-order low-pass filter. Frequencies up to a cut-off frequency of fg = 1 / (2 * Pi * filter[i].time_constant) are transmitted by the filter but higher frequencies are attenuated at –40d B/decade. • Time delay filters (as of CNC Build 2013, 2803 or 3013) A time delay filter can delay the signal time signature. This does not change the signal profile. 2.1.1 Low-pass filters Frequency response The diagram below shows the frequency transmission response of low-pass filters that are each based on one of the filter prototypes. To elucidate the characteristic transmission response, filters of the 4th order were chosen because the characteristics are more distinct due to the higher order. 10 Version: 1.05 TF5200 | Twin CAT 3 CNC Axis filters
## Page 11

Description Fig. 1: Amplitude frequency response of filter prototypes (4th order) In the range below the cut-off frequency, low-pass filters of the "critical attenuation" and "Bessel" prototypes have very similar responses. In this range, Butterworth filters transmit almost without attenuation over a wide range. Attenuation of the transmitted frequencies only sets in just before the cut-off frequency. Of the filters presented here, the Butterworth filter has the highest attenuation in the range above the cut-off frequency. TF5200 | Twin CAT 3 CNC Version: 1.05 11 Axis filters
## Page 12

Description Step response The step response of a low-pass filter with "critical attenuation" does not display any overshoot. This is why this filter is highly suitable for control applications despite its lower frequency selection response compared to other filters. A slight overshoot with filter orders > 1 can be observed in the case of Bessel low-pass filters. This is why this filter should not be applied to position values. In the case of Butterworth low-pass filters considerable overshoot is exhibited in response to an abrupt change at the input. The overshoot increases with the filter's order. Due to this keen reaction, the Butterworth low-pass filter is unsuitable for control applications. Fig. 2: Step response of filter prototypes (4th order) Axis filters 4th order low-pass filters with a cut-off frequency of 15 Hz: filter[0].enable 1 filter[0].order 4 filter[0].prototype CRIT_DAMPING filter[0].type LOWPASS filter[0].fg_f0 15 filter[0].share_percent 100 12 Version: 1.05 TF5200 | Twin CAT 3 CNC Axis filters
## Page 13

Description Additional interface: 3rd order low-pass filters with a cut-off frequency of 8 Hz: lr_param.add_interface.enable 1 lr_param.add_interface.filter[0].enable 1 lr_param.add_interface.filter[0].order 3 lr_param.add_interface.filter[0].prototype BUTTERWORTH lr_param.add_interface.filter[0].type LOWPASS lr_param.add_interface.filter[0].fg_f0 8 lr_param.add_interface.filter[0].share_percent 100 TF5200 | Twin CAT 3 CNC Version: 1.05 13 Axis filters
## Page 14

Description 2.1.2 High-pass filters Frequency response The frequency response of high-pass filters results from mirroring the frequency response of the corresponding low-pass filter at the cut-off frequency line. Fig. 3: Amplitude frequency response of high-pass filters (4th order) 14 Version: 1.05 TF5200 | Twin CAT 3 CNC Axis filters
## Page 15

Description Step response Contrary to low-pass filters, the filter output values of the step response in the case of high-pass filters fluctuate about the stationary value. Fig. 4: Step response of high-pass filters (4th order) TF5200 | Twin CAT 3 CNC Version: 1.05 15 Axis filters
## Page 16

Description 2.1.3 Band-pass filters Frequency response Bandwidth ΔΩ=f - f within the pass-band of the band-pass filter is defined by the cut-off frequencies f and 0 u 0 f . They are defined as frequencies where the amplitude has exceeded –3d B (~0.707). When a band-pass u filter is configured, the bandwidth is defined by specifying the quality factor (filter[i].guete [} 33]). The quality factor is the ratio of the characteristic filter frequency to bandwidth ΔΩ: For this reason, the frequency range f -f reduces as the quality rises. The following relationship exists 0 u between the characteristic frequency of the band-pass filter and the cut-off frequencies f and f (geometric 0 u mean): With band-pass filters, the filter prototype has only a minor influence on filter response. Fig. 5: Amplitude frequency response of band-pass filters (4th order, quality = 1) 16 Version: 1.05 TF5200 | Twin CAT 3 CNC Axis filters
## Page 17

Description 2.1.4 Band-stop filters Frequency response Bandwidth ΔΩ=f - f within the stop band of the band-stop filter is defined by the cut-off frequencies f and f . 0 u 0 u They are defined as frequencies where the amplitude drops by -3d B (~0.707). When a band-stop filter is configured, the bandwidth is determined by specifying the quality factor (filter[i].guete [} 33]) . The quality factor is the ratio of the characteristic filter frequency to bandwidth ΔΩ: For this reason, the frequency range f -f reduces as the quality rises. The following relationship exists 0 u between the characteristic frequency of the band-stop filter and the cut-off frequencies f and f (geometric 0 u mean): With band-stop filters, the filter prototype has only a slight influence on filter response. Fig. 6: Amplitude frequency response of band-stop filters (4th order, quality = 1) TF5200 | Twin CAT 3 CNC Version: 1.05 17 Axis filters
## Page 18

Description Fig. 7: Amplitude response of band-stop filters The figure shows the amplitude response of band-stop filters depending on the specified quality factor (2nd order, characteristic frequency fg_f0 = 20 Hz) 18 Version: 1.05 TF5200 | Twin CAT 3 CNC Axis filters
## Page 19

Description Response In general notch filters tend to oscillate due to the strong weakening of the characteristic frequency. This also leads to axis overshoots at block transitions. The higher the filter order or the smaller the cut-off frequency fg_f0, the greater the overshoot may be. However, in general this error is much smaller than the contour error that may occur by exciting a resonance frequency. This must be verified for a particular application. Otherwise the use of a band-stop filter makes no sense. Fig. 8: Oscillation response of band-stop filters The figure shows the oscillation response of band-stop filters depending on the order and characteristic frequency. Dynamic monitors may react in the CNC due to an overshoot of the band-stop filters. In this case either the axis dynamics must be reduced or a (slightly!) higher excess in command velocity must be permitted (see P-AXIS-00440). TF5200 | Twin CAT 3 CNC Version: 1.05 19 Axis filters
## Page 20

Description Axis filters: 2nd order band-stop, with characteristic frequency 20 Hz and quality 4: filter[0].enable 1 filter[0].order 2 filter[0].prototype BUTTERWORTH filter[0].type BANDSTOP filter[0].fg_f0 20 filter[0].guete 4 filter[0].share_percent 100 Additional interface: 3rd order band-stop, with characteristic frequency 17Hz and quality 1.8 Lr_param.add_interface.enable 1 lr_param.add_interface.filter[0].enable 1 lr_param.add_interface.filter[0].order 3 lr_param.add_interface.filter[0].prototype BUTTERWORTH lr_param.add_interface.filter[0].type BANDSTOP lr_param.add_interface.filter[0].fg_f0 17 lr_param.add_interface.filter[0].guete 1.8 lr_param.add_interface.filter[0].share_percent 100 20 Version: 1.05 TF5200 | Twin CAT 3 CNC Axis filters
## Page 21

Description 2.1.5 All-pass filters All-pass filters transmit all frequencies at a gain factor of 1. All-pass filters only change the phase of the sinusoidal input signals. They are used for phase correction and to delay signals. Fig. 9: Bode diagram of an all-pass filter When the parameters of an all-pass filter are defined, the Bessel filter prototype should be paramet- erised because it approximates a constant group run time for all frequencies. The group run time is the time that a "group" of cos-shaped oscillations takes when passing through a transmission system. TF5200 | Twin CAT 3 CNC Version: 1.05 21 Axis filters
## Page 22

Description 2.1.6 PT1-filter Frequency response The PT1 filter has the transmission response of a first order delay element. Contrary to the other axis filters, it is parameterised by specifying a time constant (filter[i].time_constant). No filter prototype needs to be specified for this filter type. To activate the filter, an order > 1 (filter[i].order) must be set. Fig. 10: Time constant of the PT1 filter The figure shows the amplitude response of the PT2 filter depending on the filter[i].time_constant. 22 Version: 1.05 TF5200 | Twin CAT 3 CNC Axis filters
## Page 23

Description Axis filters: PT1 filter with time constant of 0.01 seconds: filter[0].enable 1 filter[0].order 1 filter[0].type PT1 filter[0].time_constant 10000 filter[0].share_percent 100 Additional interface: PT1 filter with time constant of 0.01 seconds Lr_param.add_interface.enable 1 lr_param.add_interface.filter[0].enable 1 lr_param.add_interface.filter[0].order 1 lr_param.add_interface.filter[0].type PT1 lr_param.add_interface.filter[0].time_constant 10000 lr_param.add_interface.filter[0].share_percent 100 TF5200 | Twin CAT 3 CNC Version: 1.05 23 Axis filters
## Page 24

Description 2.1.7 PT2-filter Frequency response The PT2 filter has the transmission response of a second order delay element. Contrary to the other axis filters, it is parameterised by specifying a time constant (filter[i].time_constant). No filter prototype needs to be specified for this filter type. To activate the filter, an order > 1 (filter[i].order) must be set. Fig. 11: Time constant of the PT2 filter The figure shows the amplitude response of the PT2 filter depending on the filter[i].time_constant. 24 Version: 1.05 TF5200 | Twin CAT 3 CNC Axis filters
## Page 25

Description Fig. 12: Step response of the PT2 filter The figure shows the step response of the PT2 filter depending on the filter[i].time_constant. Axis filters: PT2 filter with time constant of 0.005 seconds: filter[0].enable 1 filter[0].order 2 filter[0].type PT2 filter[0].time_constant 5000 filter[0].share_percent 100 Additional interface: PT2 filter with time constant of 0.005 seconds lr_param.add_interface.enable 1 lr_param.add_interface.filter[0].enable 1 lr_param.add_interface.filter[0].order 2 lr_param.add_interface.filter[0].type PT2 lr_param.add_interface.filter[0].time_constant 5000 lr_param.add_interface.filter[0].share_percent 100 TF5200 | Twin CAT 3 CNC Version: 1.05 25 Axis filters
## Page 26

Description 2.1.8 Time delay filter The time delay filter is available in each of the CNC Builds as of V2.11.2013, V2.11.2803 and V3.00.3013. Response A signal can be delayed by the time delay filter. The amplitude response of this filter is constant 1, i.e. the signal profile does not change One application, for example, is to compensate for dead times in the drive train, if this is not identical in all axes. The filter delay time must be within the interval 0 ≤ delay time (filter[i].time_constant) < 6 * cycle time of the NC controller. The filter is parameterised by defined the required filter time constant (filter[i].time_constant). It is not necessary to specify a filter prototype of a cut-off frequency for the time delay filter. To activate the filter, a filter order must also be specified > 0 (filter[i].order). However, the order is recalculated in the CNC when the filter coefficients are generated depending on the delay time settings. Fig. 13: Signal profiles of the time delay filter The figure shows the signal profiles of the time delay filter with different time constants (filter[i].time_constant). 26 Version: 1.05 TF5200 | Twin CAT 3 CNC Axis filters
## Page 27

Description Axis filters: Time delay filter with time constant of 0.002 seconds: filter[0].enable 1 filter[0].order 1 filter[0].type TIME_DELAY filter[0].time_constant 2000 filter[0].share_percent 100 Additional interface: Time delay filter with time constant of 0.002 seconds lr_param.add_interface.enable 1 lr_param.add_interface.filter[0].enable 1 lr_param.add_interface.filter[0].order 1 lr_param.add_interface.filter[0].type TIME_DELAY lr_param.add_interface.filter[0].time_constant 2000 lr_param.add_interface.filter[0].share_percent 100 TF5200 | Twin CAT 3 CNC Version: 1.05 27 Axis filters
## Page 28

Description 2.2 HSC filters As of CNC Build V3.1.3075.02 it is advisable to use FIR filters in FCT-C37. They re- place the HSC filters described here and have a larger scope of functions. With these filters, only one HSC filter per axis is allowed and it must imperatively be the first filter (filter[0]). In the axis lists, HSC filters are only preconfigured but do not take effect until activated by the NC command #FILTER ON[HSC] in the NC program. In the pre-configuration, make sure that all axes in an axis group are configured identically. Otherwise axis behaviour may become asynchronous. In addition, it is possible to deactivate HSC filters during machining or to redefine their parameters. The following filter types may only be used in conjunction with the prototype HSC. • HSC-average The HSC average filter is an acausal time range average filter. It acts within the frequency band as a low-pass filter. • HSC-No Vib The HSC No Vib is an acausal FIR filter. The internal filter core, which depends on its natural frequency among other things, suppresses oscillations. Step response Fig. 14: Step response of the HSC filter 28 Version: 1.05 TF5200 | Twin CAT 3 CNC Axis filters
## Page 29

Description Contour deviation adjustment aid The contour deviation when using HSC axis filters is composed of three components. 1. Cycle time 2. Filter order 3. Feed rate run The following simple relationships apply: • Double cycle time = double error • Double feed rate = double error • Double filter order = double error The graphic below represents a cycle time of 1 ms and a feed rate of F1000 at a 90° corner. With different marginal data, the filter orders must be uprated according to the ratios above. Fig. 15: Contour error per filter order at a 90° corner The figure above assumes a corner velocity of 1000mm/s and a cycle time of 1ms. TF5200 | Twin CAT 3 CNC Version: 1.05 29 Axis filters
## Page 30

Description 2.3 Filter prototypes Four different filter prototypes can be set. They are essentially distinguished by their response for transmitting frequencies and their response to step excitation (filter step response). These are: • Filter with critical attenuation • Bessel filter • Butterworth filter • HSC 30 Version: 1.05 TF5200 | Twin CAT 3 CNC Axis filters
## Page 31

Parameter 3 Parameter 3.1 Overview The following parameters are available to adjust filters in the axis parameter record: ID Parameter Description P-AXIS-00319 enable Activates standard filter P-AXIS-00067 fg_f0 Characteristic frequency of a filter P-AXIS-00080 guete Quality of the filter P-AXIS-00740* P-AXIS-00140 order Order of the filter P-AXIS-00153 prototype Filter characteristic P-AXIS-00164 share_percent Signal component that is routed through the filter P-AXIS-00741* P-AXIS-00204 type Type of the filter P-AXIS-00357 time_constant - Use with standard filters: Time constant of the PT1, PT2 and time delay filters. - Use with HSC filters: Filter order in µs [alternative to P-AXIS-00140 [} 34]) P-AXIS-00735 enable Enables standard filter of the additional interface P-AXIS-00739 fg_f0 Characteristic frequency of an additional interface filter P-AXIS-00740 guete Quality of the additional interface filter P-AXIS-00736 order Order of the additional interface filter P-AXIS-00737 prototype Filter characteristic of the additional interface P-AXIS-00741 share_percent Signal component that is routed through the filter P-AXIS-00738 type Type of the additional interface filter P-AXIS-00742 time_constant - Use with standard filters of the additional interface Time constant of the PT1, PT2 and time delay filters. - Use with HSC filters: Filter order in µs [alternative to P-AXIS-00140) Parameter Standard filters HSC filters enable X - (**) fg_f0 X (*) X (*) guete X (*) - order X X prototype X X share_percent X X type X X time_constant X (*) X (*) Depending on the filter type (**) Activated via NC command TF5200 | Twin CAT 3 CNC Version: 1.05 31 Axis filters
## Page 32

Parameter The relevant filter parameters for each filter type are: Filter type Order Character Prototype Time constant Quality Signal com- Frequency ponent Low-pass X X X X High-pass X X X X Band-stop X X X X X Band-pass X X X X X All-pass X X X X PT1 (X) X X PT2 (X) X X Delay (X) X X HSC X X X X mean* HSC (X) X X (X) X No Vib* (X) only to active the filter; order is calculated internally * Can only be used as axis filter 32 Version: 1.05 TF5200 | Twin CAT 3 CNC Axis filters
## Page 33

Parameter 3.2 Axis filter parameter P-AXIS-00319 Activate the axis-specific command value filter (for standard filters) Description This parameter controls the general enabling/disabling of the filter function. Parameter filter[i].enable Data type BOOLEAN Data range 0: Filter is disabled 1: Filter is enabled Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0 Drive types ---- Remarks The filter function is only activated for filter order > 0 (P-AXIS-00140). P-AXIS-00067 Characteristic frequency of the axis-specific command value filter Description - The frequency range parameter defines the following standard filters: • Low-pass: Beginning of cut-off frequency range (ideal filter) • High-pass : Beginning of pass-band frequency range (ideal filter) • Band-pass and band-stop filters : Middle frequency - This parameter defines the first natural frequency to be suppressed for the HSC No Vib Parameter filter[i].fg_f0 Data type REAL64 Data range 0 ≤ fg_f0 < 0.5/T (where T is the NC cycle time) fall fall Axis types T, R, S Dimension T: Hz R,S: Hz Default value 3.000000e+001 Drive types ---- Remarks P-AXIS-00080 Bandwidth of axis specific command value filter Description Definition of reciprocal of bandwidth for band-pass and band-stop filter types. The figure below illustrates the parameter behaviour. Parameter filter[i].guete TF5200 | Twin CAT 3 CNC Version: 1.05 33 Axis filters
## Page 34

Parameter Data type REAL64 Data range 1 ≤ guete ≤ 10 Axis types T, R, S Dimension T: ---- R,S: ---- Default value 1.0 Drive types ---- Remarks P-AXIS-00140 Order of axis specific command value filter Description This parameter defines the filter order. In addition, this parameter is a value which expresses the fall of frequency response (fall = - order x 20 d B/ decade). The value order = 0 means: no filter is active. With HSC No Vib or time delay filters, the order is calculated internally but an order > 0 is required, otherwise the filter is not active. Parameter filter[i].order Data type UNS32 Data range 0 ≤ order ≤ 6 for low-pass, high-pass and all-pass filters 0 ≤ order ≤ 3 for band-pass and band-stop filters order = 0 or 1 for PT1 filters order = 0 or 2 for PT2 filters order = 0 or > 0 for time delay filters 0 ≤ order ≤ 200 for HSC filters Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0 Drive types ---- Remarks P-AXIS-00153 Characteristic of axis-specific command value filter Description The parameter defines the filter characteristic. Parameter filter[i].prototype Data type STRING Data range CRIT_DAMPING 1: 'Critical damping’ filter characteristic: BUTTERWORTH 2: Butterworth filter characteristic BESSEL 3: Bessel filter characteristic HSC - 5: Filter characteristic 'HSC' Axis types T, R, S Dimension T: ---- R,S: ---- Default value CRIT_DAMPING Drive types ---- Remarks P-AXIS-00164 Signal share of axis specific command value filter Description The parameter defines the signal share in percent which is processed by the filter. Parameter filter[i].share_percent Data type REAL64 Data range 0 ≤ share_percent ≤ 100 Axis types T, R, S Dimension T: ---- R,S: ---- 34 Version: 1.05 TF5200 | Twin CAT 3 CNC Axis filters
## Page 35

Parameter Default value 1.000000e+002 Drive types ---- Remarks P-AXIS-00204 Type of axis-specific command value filter Description The parameter defines the filter type. Parameter filter[i].type Data type UNS32 Data range 1 ≤ type ≤ 12 where: 1 Low-pass filter 2 High-pass filter 3 Band-pass filter 4 Band-stop filter 5 All-pass filter 6 PT1 filter 7 reserved 8 HSC average 9 reserved 10 PT2 filter 11 Time delay filter (as of CNC Build 3013 and higher) 12 HSC No Vib Axis types T, R, S Dimension T: ---- R,S: ---- Default value 1 for standard filters (filter[i].prototype 1-4) 8 for HSC filters (filter[i].prototype 5) Drive types ---- Remarks P-AXIS-00357 Time constant of axis specific command value filter Description - Application for standard filters: The parameter defines the time constants of the PT1, PT2 and time delay filters. - Application with HSC filters: Filter order in µs [alternative to parameter P-AXIS-00140 [} 34] The value time_constant is only used if P-AXIS-00140 [} 34] is not configured or has the value 0. If time_constant < NC cycle time, the filter is not active unless the parameter order P-AXIS-00140 [} 34] has a valid value which is then used in this case. With HSC No Vib, the order is calculated internally but an order > 0 is required, otherwise the filter is not active. Parameter filter[i].time_constant Data type UNS32 Data range - Standard filters: For PT1 / PT2 filters: TAb ≤ P-AXIS-00357 ≤ MAX(UNS32) For time delay filters: 0 ≤ P-AXIS-00357 < 6 * TAb (where TAb is NC cycle time in s) - HSC filters: TAb < P-AXIS-00357 < 200 * TAb (where TAb is NC cycle time in µs) Axis types T, R, S Dimension T: µs R,S: µs TF5200 | Twin CAT 3 CNC Version: 1.05 35 Axis filters
## Page 36

Parameter Default value 10000 Drive types ---- Remarks 36 Version: 1.05 TF5200 | Twin CAT 3 CNC Axis filters
## Page 37

Parameter 3.3 Additional interface parameters P-AXIS-00735 Enable the additional interface filter Description This parameter controls the general enabling/disabling of the filter function. Parameter lr_param.add_interface.filter[i].enable Data type BOOLEAN Data range 0: Filter is disabled 1: Filter is enabled Axis types T, R, S Dimension T:---- R,S: ---- Default value 0 Drive types ---- Remarks The filter function is only enabled for filter order > 0 (filter[i].order). P-AXIS-00739 Frequency range of the additional interface filter Description The parameter defines the frequency range for: • Low-pass: Beginning of cut-off frequency range (ideal filter) • High-pass: Beginning of cut-off frequency range (ideal filter) • Band-pass and band-stop filters: middle frequency Parameter lr_param.add_interface.filter[i].fg_f0 Data type REAL64 Data range 0 < FG_F= > 0.5/T (where T is the NC cycle time) fall fall Axis types T, R, S Dimension T: Hz R,S: Hz Default value 30 Drive types ---- Remarks P-AXIS-00740 Bandwidth of the additional interface filter Description Definition of reciprocal of bandwidth for band-pass and band-stop filter types. The behaviour is similar to parameter P-AXIS-00080. Parameter lr_param.add_interface.filter[i].guete Data type REAL64 Data range 1 < guete < 10 Axis types T, R, S Dimension T: ---- R,S: ---- Default value 1.0 Drive types ---- Remarks P-AXIS-00736 Order of the additional interface filter Description This parameter defines the filter order. In addition, this parameter is a value which expresses the fall of frequency response (fall = -order x 20 d B/decade). The value order = 0 means: no filter connected. Parameter lr_param.add_interface.filter[i].order Data type UNS32 TF5200 | Twin CAT 3 CNC Version: 1.05 37 Axis filters
## Page 38

Parameter Data range 0 < order < 6 for low-pass, high-pass and all-pass filters 0 < order < 3 for band-pass and band-stop filters order = 0 or <= 1 for PT1 filters order = 0 or <= 1 for PT2 filters Axis types T, R, S Dimension T:---- R,S: ---- Default value 2 Drive types ---- Remarks An order of < 1 need only be specified for filters types PT1, PT2 and TIME_DELAY to activate the filter. The corresponding order is calculated internally. P-AXIS-00737 Characteristic of the additional interface filter Description This parameter defines the filter characteristic. Parameter lr_param.add_interface.filter[i].prototype Data type STRING Data range CRIT_DAMPING: ‘Critical damping’ filter characteristic BUTTERWORTH: ‘Butterworth’ filter characteristic BESSEL: ‘Bessel’ filter characteristic Axis types T Dimension T:---- Default value CRIT_DAMPING Drive types ---- Remarks P-AXIS-00741 Signal share of the additional interface filter Description The parameter defines the signal share in percent which is processed by the filter. Parameter lr_param.add_interface.filter[i].share_percent Data type REAL64 Data range 0 < share_percent < 100 Axis types T Dimension T:---- R, S: ---- Default value 1.000000e+002 Drive types ---- Remarks P-AXIS-00738 Type of the additional interface filter Description This parameter defines the filter type. Parameter lr_param.add_interface.filter[i].type Data type STRING 38 Version: 1.05 TF5200 | Twin CAT 3 CNC Axis filters
## Page 39

Parameter Data range LOWPASS Low-pass filter HIGHPASS High-pass filter BANDPASS Band-pass filter BANDSTOP Band-stop filter ALLPASS All-pass filter PT1 PT1 filter HSC_SINE HSC Sine HSC_MEAN HSC mean HSC_GAUSS HSC Gauss PT2 PT2 filter TIME_DELAY Time delay filter (as of CNC Build 3013 and higher) Axis types T, R, S Dimension T:---- R,S: ---- Default value PT2 Drive types ---- Remarks P-AXIS-00742 Time constant of the additional interface filter Description The parameter defines the time constants of the PT1, PT2 and time delay filters. Parameter lr_param.add_interface.filter[i].time_constant Data type UNS32 Data range For PT1 / PT2 filters: TAb ≤ filter[i].time_constant ≤ MAX(UNS32) (with TAb ->NC cycle time) For time-delay filter: 0 ≤ filter[i].time_constant < 6 * TAb (Where TAb ->NC cycle time) Axis types T, R, S Dimension T: µs R,S: µs Default value 0 Drive types ---- Remarks TF5200 | Twin CAT 3 CNC Version: 1.05 39 Axis filters
## Page 40

Application 4 Application Smoothing signals with low-pass filters The ability of low-pass filters to attenuate high frequencies is used to smooth signal profiles. The diagram below shows the step response of low-pass filters of different orders but with the same cut-off frequency of 1 Hz. It is found that the maximum slope of the step response is almost independent of the filter order. As a result, it can be estimated from the slope at the start of the step response of a first-order filter. This requires only a simple calculation. For a step ∆ x at the input of a low-pass filter at cut-off frequency f the following equation is obtained for the g maximum slope of the output signal: This equation is important because it reflects the relationship between the bandwidth of the signal and the maximum slope of the filtered signal. 1 0.9 0.8 0.7 0.6 0.5 0.4 0.3 0.2 0.1 0 0 100 200 300 400 500 600 700 800 900 1000 t [ms] 40 Version: 1.05 TF5200 | Twin CAT 3 CNC Axis filters y Step response Order 1 2 3 4 5 1 T = 2pf g Fig. 16: Step response of low-pass filters of different orders
## Page 41

Support and Service 5 Support and Service Beckhoff and their partners around the world offer comprehensive support and service, making available fast and competent assistance with all questions related to Beckhoff products and system solutions. Download finder Our download finder contains all the files that we offer you for downloading. You will find application reports, technical documentation, technical drawings, configuration files and much more. The downloads are available in various formats. Beckhoff's branch offices and representatives Please contact your Beckhoff branch office or representative for local support and service on Beckhoff products! The addresses of Beckhoff's branch offices and representatives round the world can be found on our internet page: www.beckhoff.com You will also find further documentation for Beckhoff components there. Beckhoff Support Support offers you comprehensive technical assistance, helping you not only with the application of individual Beckhoff products, but also with other, wide-ranging services: • support • design, programming and commissioning of complex automation systems • and extensive training program for Beckhoff system components Hotline: +49 5246 963-157 e-mail: support@beckhoff.com Beckhoff Service The Beckhoff Service Center supports you in all matters of after-sales service: • on-site service • repair service • spare parts service • hotline service Hotline: +49 5246 963-460 e-mail: service@beckhoff.com Beckhoff Headquarters Beckhoff Automation Gmb H & Co. KG Huelshorstweg 20 33415 Verl Germany Phone: +49 5246 963-0 e-mail: info@beckhoff.com web: www.beckhoff.com TF5200 | Twin CAT 3 CNC Version: 1.05 41 Axis filters
## Page 42

Index Index P P-AXIS-00067 33 P-AXIS-00080 33 P-AXIS-00140 34 P-AXIS-00153 34 P-AXIS-00164 34 P-AXIS-00204 35 P-AXIS-00319 33 P-AXIS-00357 35 P-AXIS-00735 37 P-AXIS-00736 37 P-AXIS-00737 38 P-AXIS-00738 38 P-AXIS-00739 37 P-AXIS-00740 37 P-AXIS-00741 38 P-AXIS-00742 39 42 Version: 1.05 TF5200 | Twin CAT 3 CNC Axis filters
## Page 44

More Information: www.beckhoff.com/TF5200 Beckhoff Automation Gmb H & Co. KG Hülshorstweg 20 33415 Verl Germany Phone: +49 5246 9630 info@beckhoff.com www.beckhoff.com
