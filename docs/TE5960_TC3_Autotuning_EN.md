---
title: "TE5960 Twin CAT 3"
product: "TE5960"
category: "Motion_Control"
tags: ["CAT", "TWIN"]
language: "EN"
document_type: "Manual"
version: "1.0.2"
source_pdf: "https://download.beckhoff.com/download/Document/automation/twincat3/TE5960_TC3_Autotuning_EN.pdf"
release_date: "2025-09-03"
---
Manual | EN TE5960 Twin CAT 3 | Autotuning 2025-09-03 | Version: 1.0.2

## Page 3

Table of contents Table of contents 1 Foreword.................................................................................................................................................... 5 1.1 Notes on the documentation............................................................................................................. 5 1.2 For your safety.................................................................................................................................. 5 1.3 Notes on information security............................................................................................................ 7 2 Overview.................................................................................................................................................... 8 3 Installation................................................................................................................................................. 9 3.1 System Requirements....................................................................................................................... 9 3.2 Installation......................................................................................................................................... 9 3.3 Installation under Twin CAT 4026.................................................................................................... 12 4 Technical introduction............................................................................................................................ 13 4.1 Basic task Autotuning...................................................................................................................... 13 4.2 Basics of the Bode plot................................................................................................................... 13 4.3 Resonance...................................................................................................................................... 17 5 Configuration........................................................................................................................................... 23 5.1 Configuration and execution........................................................................................................... 23 5.2 Stability conditions.......................................................................................................................... 24 5.3 Bode settings.................................................................................................................................. 24 5.4 Evaluation values............................................................................................................................ 26 5.5 Drive target system parameters...................................................................................................... 26 6 Examples................................................................................................................................................. 28 6.1 Twin CAT 3 Autotuning - First steps................................................................................................ 28 6.2 Exporting the tuning results............................................................................................................. 36 7 Appendix.................................................................................................................................................. 39 7.1 FAQ - frequently asked questions and answers............................................................................. 39 7.1.1 Error code 0x6138............................................................................................................ 39 7.1.2 Filter slots for AX8000/AMP8000..................................................................................... 39 7.1.3 Fragmented recording...................................................................................................... 39 7.1.4 Unstable validation measurement.................................................................................... 40 7.1.5 Excitation problems.......................................................................................................... 42 7.1.6 Deviations in the validation measurement....................................................................... 42 8 Support and Service............................................................................................................................... 44 TE5960 Version: 1.0.2 3

## Page 4

Table of contents 4 Version: 1.0.2 TE5960

## Page 5

Foreword 1 Foreword 1.1 Notes on the documentation This description is intended exclusively for trained specialists in control and automation technology who are familiar with the applicable national standards. The documentation and the following notes and explanations must be complied with when installing and commissioning the components. The trained specialists must always use the current valid documentation. The trained specialists must ensure that the application and use of the products described is in line with all safety requirements, including all relevant laws, regulations, guidelines, and standards. Disclaimer The documentation has been compiled with care. The products described are, however, constantly under development. We reserve the right to revise and change the documentation at any time and without notice. Claims to modify products that have already been supplied may not be made on the basis of the data, diagrams, and descriptions in this documentation. Trademarks Beckhoff®, ATRO® , Ether CAT®, Ether CAT G®, Ether CAT G10®, Ether CAT P®, MX-System®, Safety over Ether CAT®, TC/BSD®, Twin CAT®, Twin CAT/BSD®, Twin SAFE®, XFC®, XPlanar®, and XTS® are registered and licensed trademarks of Beckhoff Automation Gmb H. If third parties make use of the designations or trademarks contained in this publication for their own purposes, this could infringe upon the rights of the owners of the said designations. Ether CAT® is a registered trademark and patented technology, licensed by Beckhoff Automation Gmb H, Germany. Copyright © Beckhoff Automation Gmb H & Co. KG, Germany. The distribution and reproduction of this document, as well as the use and communication of its contents without express authorization, are prohibited. Offenders will be held liable for the payment of damages. All rights reserved in the event that a patent, utility model, or design are registered. Third-party trademarks Trademarks of third parties may be used in this documentation. You can find the trademark notices here: https://www.beckhoff.com/trademarks. 1.2 For your safety Safety regulations Read the following explanations for your safety. Always observe and follow product-specific safety instructions, which you may find at the appropriate places in this document. Exclusion of liability All the components are supplied in particular hardware and software configurations which are appropriate for the application. Modifications to hardware or software configurations other than those described in the documentation are not permitted, and nullify the liability of Beckhoff Automation Gmb H & Co. KG. TE5960 Version: 1.0.2 5

## Page 6

Foreword Personnel qualification This description is only intended for trained specialists in control, automation, and drive technology who are familiar with the applicable national standards. Signal words The signal words used in the documentation are classified below. In order to prevent injury and damage to persons and property, read and follow the safety and warning notices. Personal injury warnings DANGER Hazard with high risk of death or serious injury. WARNING Hazard with medium risk of death or serious injury. CAUTION There is a low-risk hazard that could result in medium or minor injury. Warning of damage to property or environment NOTICE The environment, equipment, or data may be damaged. Information on handling the product This information includes, for example: recommendations for action, assistance or further information on the product. 6 Version: 1.0.2 TE5960

## Page 7

Foreword 1.3 Notes on information security The products of Beckhoff Automation Gmb H & Co. KG (Beckhoff), insofar as they can be accessed online, are equipped with security functions that support the secure operation of plants, systems, machines and networks. Despite the security functions, the creation, implementation and constant updating of a holistic security concept for the operation are necessary to protect the respective plant, system, machine and networks against cyber threats. The products sold by Beckhoff are only part of the overall security concept. The customer is responsible for preventing unauthorized access by third parties to its equipment, systems, machines and networks. The latter should be connected to the corporate network or the Internet only if appropriate protective measures have been set up. In addition, the recommendations from Beckhoff regarding appropriate protective measures should be observed. Further information regarding information security and industrial security can be found in our https://www.beckhoff.com/secguide. Beckhoff products and solutions undergo continuous further development. This also applies to security functions. In light of this continuous further development, Beckhoff expressly recommends that the products are kept up to date at all times and that updates are installed for the products once they have been made available. Using outdated or unsupported product versions can increase the risk of cyber threats. To stay informed about information security for Beckhoff products, subscribe to the RSS feed at https:// www.beckhoff.com/secinfo. TE5960 Version: 1.0.2 7

## Page 8

Overview 2 Overview Twin CAT 3 Autotuning is a tool embedded in the Twin CAT 3 Drive Manager 2 for automatically setting the control parameters of Twin CAT 3 compatible drives. It simplifies the necessary and intensive analysis of the frequency response of the mechanical system in its initial state. Based on a qualitative measurement of the mechanics with the active control parameters, the selected axis is tuned according to stability and quality conditions, whereby the limit values to be complied with can be easily selected via templates, but can also be individually adapted. In addition to the primary control parameters, the gain factors Kp and Kv, the integration time constant Tn and the load inertia of the mechanical system, a calculation and implementation of system-stabilizing current command value filters can be carried out. The results of the tuning are then compared and the parameters and/or filters can be applied directly. Key Features • Frequency response-based axis tuning of the central drive parameters • Calculation of the total mass of the mechanical system • Determination of system-stabilizing current command value filters • Compliance with standardized stability criteria in consideration of dynamics • Integration in the Twin CAT 3 Drive Manager 2 • Post-processing with the help of Overview by exporting the measurement data and tuning results Principle of operation During the autotuning process, the axis is vibrated several times using a sine-based broadband signal. In the first phase, short excitation phases are carried out to calibrate the excitation amplitudes for the initial recording of the frequency response with the preset drive parameters. The fine-resolution recording of the initial measurement is carried out in several steps, whereby the values already determined are displayed directly in graphic form. Once the recording is complete, the new parameters (and current command value filters) are calculated. These are temporarily activated for a comparison of the frequency responses. Another recording is made for this purpose. Finally, the results can be evaluated and downloaded. WARNING Risk of injury due to the drive axis starting up automatically To create the Bode plot, the drive axis performs a movement sequence that depends on the settings. At the start of the recording the drive axis starts up automatically in accordance with the set motion profile and can endanger people and material. During the recording the drive axis remains integrated in the application context (e.g. releases, monitoring, etc.). • Ensure safety during the Bode plot recording. Supported drives Feature Types Twin CAT Autotuning Support AX5000 rotary From firmware v2.15 Support AX8000 rotary From firmware v1.07 Support AMP8000 rotary From firmware v1.06 Further information in section System Requirements [} 9]. 8 Version: 1.0.2 TE5960

## Page 9

Installation 3 Installation 3.1 System Requirements Software requirements under Twin CAT 3.1.4024.x on the development system (XAE) Software From version (or higher) Twin CAT 3 XAE 3.1.4024.64 TE5950 | Twin CAT 3 Drive Manager 2 1.1.96.0 TE13xx | Twin CAT 3 Measurement Update 3.4.3148.35 Tc Bode Plot (TMX) 1.1.5.0 Tc Nc Objects (TMX) 3.1.0.4707 (optional) If there is no versioned TMX driver for the Tc Nc Object installed on the development system, then the software requirements for the Twin CAT 3.1.4024.x runtime system apply. An installation of Tc Nc Objects (TMX) is required when using target systems with TC/BSD. Software requirements under Twin CAT 3.1.4024.x on the runtime system (XAR) Software From version (or higher) Twin CAT 3 XAR 3.1.4024.64 Software requirements under Twin CAT 3.1.4026.x on the development system (XAE) Software From version (or higher) Twin CAT Standard 4026.4.0 TE5950. Drive Manager2. XAE 1.1.96 System requirements servo system Hardware From firmware version (or higher) AX5000 2.15 AX8000 1.07 AMP8000 1.06 3.2 Installation Setup installation (Twin CAT 3.1 Build 4024) The following section describes how to install the Twin CAT 3 function for Windows-based operating systems. ü The Twin CAT 3 function setup file was downloaded from the Beckhoff website. 1. Run the setup file as administrator. To do this, select the Run As Admin command in the context menu of the file. ð The installation dialog opens. TE5960 Version: 1.0.2 9

## Page 10

Installation 2. Accept the end user licensing agreement and click Next. 3. Enter your user data. 10 Version: 1.0.2 TE5960

## Page 11

Installation 4. If you want to install the full version of the Twin CAT 3 function, select Complete as the installation type. If you want to install the Twin CAT 3 function components separately, select Custom. 5. Click Next, then Install to start the installation. ð A dialog box informs you that the Twin CAT system must be stopped to proceed with the installation. TE5960 Version: 1.0.2 11

## Page 12

Installation 6. Confirm the dialog with Yes. 7. Click Finish to exit the setup. ð The Twin CAT 3 function has been installed successfully. 3.3 Installation under Twin CAT 4026 Twin CAT Package Manager: Installation (Twin CAT 3.1 Build 4026) Detailed instructions on installing products can be found in the chapter Installing workloads in the Twin CAT 3.1 Build 4026 installation instructions. Install the following workload to be able to use the product: • TE5950. Drive Manager2. XAE 12 Version: 1.0.2 TE5960

## Page 13

Technical introduction 4 Technical introduction 4.1 Basic task Autotuning Servo drives are commonly used for precise and dynamic positioning tasks in automation technology. The properties of the mechanics to be moved by the drives have a significant influence on the parameterization of the control loops, which is necessary to achieve the best possible positioning tasks in terms of accuracy and dynamics while maintaining system stability. Essential mechanical properties include mass inertia and system resonances. The exact properties of the mechanical systems are usually unknown at the time of commissioning. The basic tasks of autotuning include the following • Metrological determination of the essential parameters of the mechanical system. ◦ This is achieved by recording the frequency response in terms of magnitude and phase (Bode plot). ◦ An internal algorithm determines the properties of the mechanical system based on the frequency response. (inertia, resonance points, etc.) • Determination of sensible control parameters, taking into account the system characteristics and the given boundary conditions with regard to dynamics and system stability. • Set and parameterize filters, for example to suppress resonance points. The properties of the control system in terms of dynamics and stability can be further improved by using filters. 4.2 Basics of the Bode plot A Bode plot is a graphical toolbox for displaying the frequency characteristics of a system. It consists of two plots, the gain response and the phase response. • Gain response: Indicates the gain of the system (ratio of the output gain to the input gain) as a function of the frequency. The gain is specified in decibels [d B]. • Phase response: Indicates the phase shift of the system (relative delay from input to output) as a function of frequency. The phase shift is specified in degrees [°]. TE5960 Version: 1.0.2 13

## Page 14

Technical introduction The specific properties of a mechanical drive system can be graphically displayed and determined using the Bode plot. It also provides information about the system stability and the dynamics of the system. In the following, the Bode plot for mechanical control systems is explained in such a way that the meaning of the variables and parameters used in the user interface with regard to dynamics and stability is made clear and a basic understanding of how to read a Bode plot is taught. To describe the system characteristics using the Bode plot, it is necessary to divide the control drive system into open and closed control loops. In a control system with a cascade structure, consisting of a current, speed and position control loop from inside to outside, the speed control loop is the one in which the mechanical system properties act. • Open loop (OL for short) Control loop without feedback consisting of controller, controlled system (mechanical system in this case) and feedback (sensors). 14 Version: 1.0.2 TE5960

## Page 15

Technical introduction • Closed loop (CL for short) Control loop with feedback ◦ Consideration of the frequency-dependent gain and phase shift of the real drive control. ◦ Consideration of the dynamic properties of the control system. Open loop (stability analysis) System stability is determined on the basis of the phase margin and the gain margin. • Phase margin (phase response, Stability conditions [} 24]) Distance of the phase in the phase response of 180°, at the point at which the gain response falls below 0 d B when viewed from the left. In practice, the phase margin should be at least 30° - 40°. • Gain margin (gain response, Stability conditions [} 24]) Distance of the gain in the gain response from 0 d B, at the point at which the phase gain falls below 180° when viewed from the left. In practice, the gain margin should be at least 6 - 8 d B. TE5960 Version: 1.0.2 15

## Page 16

Technical introduction Closed loop The Bode plot of the closed loop shows the physical effect of the frequency-dependent gains and phase shifts. The ideal system would be one for which the output signal has the same gain as the input signal for all frequencies and has no delay in relation to the input signal. Such a system has zero values for gain and phase in the Bode plot. In practice, this is not possible in a real system for energy and runtime reasons. As the frequency increases, the output signal becomes weaker than the input signal over time and exhibits an increasing phase shift compared to the input signal. Furthermore, resonance points and the parameterization of the controller can cause the gain of the output signal to exceed that of the input signal locally for certain frequencies. In this context, the terms bandwidth and maximum gain are defined. • Bandwidth (Stability conditions [} 24]) Minimum of the two frequencies at which the gain response falls below -3 d B as seen from the left and the phase response falls below -90° as seen from the left. • Max. gain (Stability conditions [} 24]) Maximum permissible gain in d B. In practice, this can be selected between 1 d B (Soft: factor 1.122) and 3 d B (Stiff: factor 1.413) depending on the application. Optimization goals In principle, short machine throughput times are required for high productivity. These require correspondingly high bandwidths of the drive controllers used for fast processing while guaranteeing the requirements for accuracy and precision. 16 Version: 1.0.2 TE5960

## Page 17

Technical introduction The demands for a high bandwidth and high stability are usually contradictory. An increase in bandwidth generally leads to lower stability and vice versa. Another optimization goal can be requirements for the smooth running of the drive. Moderate controller gains are often advantageous for smooth running. 4.3 Resonance Most mechanical drive systems are mechanically inhomogeneous. This can be a belt drive, for example, in which the belt has a different strength and elasticity than other drive axes made of metal. But even drive axes of the same material have different strengths depending on their material thickness. Physically, such systems represent spring-mass systems with "c" as the spring constant and "d" as the attenuation constant. Furthermore, "JM" represents the moment of inertia of a motor and "JL" the moment of inertia of a load. It must also be taken into account that the user usually does not have information about the position and speed of the load, as the position is usually measured by a position sensor installed in the motor. However, for the user, the behavior on the load side, rather than the motor side, is usually of interest. For the stability analysis of the drive control, however, the side from which the information flows into the control as feedback is always relevant. This is usually the motor side. Behavior of a two-mass system In the following, the ideal behavior of a two-mass system without higher-level control is considered for understanding. Load side (load speed as actual value related to a torque as setpoint): If the load speed is related to a given torque of a drive, the following idealized frequency response results for an exemplary two-mass system. TE5960 Version: 1.0.2 17

## Page 18

Technical introduction For low frequencies below the resonance frequency, the load can follow the movement of the motor. This is less and less the case for increasing frequencies above the resonance frequency. This is where the load is decoupled from the motor. For this reason, it does not make sense to aim for a controller bandwidth above the resonance frequency when designing the controller. Motor side (motor speed as actual value in relation to a torque as setpoint): 18 Version: 1.0.2 TE5960

## Page 19

Technical introduction The motor-side transmission behavior of the two-mass system is the decisive behavior for the controller design. (when using the position sensor on the motor). It shows an anti-resonance at the frequency of the resonance of the load-side behavior. Furthermore, it shows a resonance that lies above the anti-resonance in the frequency range. The inertia ratio of the load inertia to the motor inertia depends on the distance of the resonance frequency from the anti-resonance frequency. Behavior of a controlled system with two-mass mechanics (AX8000 servo drive, basic settings: speed observer: Off, no filters) The frequency response of a real system with higher-level control and mechanical two-mass behavior is shown below. (The real mechanical system has different parameters than the ideal system shown.) Furthermore, no filters have been set and the speed monitor is not active. TE5960 Version: 1.0.2 19

## Page 20

Technical introduction The relevant stability parameters for tuning essentially relate to the response of the mechanical system before and after the leading resonance point. The maximum gain before resonance (Max. Gain Suspension) can be parameterized to the stiffness of the drive as required. See Stability conditions [} 24]. The attenuation of frequency components above the controller bandwidth (BW) is achieved by specifying the Max. Gain Resonance As a rule, it is desirable for frequency components above the controller bandwidth to have little or no influence on the controller behavior. For this reason, it is advantageous to attenuate these frequency components sufficiently. Frequently used values for attenuation due to maximum gain resonance are -6d B to -3d B. The tuning procedure determines the following optimized frequency response, taking the above relationships into account: 20 Version: 1.0.2 TE5960

## Page 21

Technical introduction In contrast to the initial plot, the bandwidth (BW) was increased from 33 Hz to over 100 Hz. A notch filter was placed on the resonance frequency to actively attenuate it. The specifications regarding the maximum gains (Max. Gain Suspension (3d B) and Max. Gain Resonance (-3d B)) are adhered to. Behavior of a controlled system with multi-mass mechanics Mechanics used in practice often have multi-mass behavior rather than pure two-mass behavior. Such systems can be modeled by connecting several two-mass systems in series. From a practical point of view, the lowest-frequency resonance is relevant for controller tuning, as this is also where the lowest-frequency load decoupling takes place. The following frequency response shows an example of the tuning of such a system. TE5960 Version: 1.0.2 21

## Page 22

Technical introduction 22 Version: 1.0.2 TE5960

## Page 23

Configuration 5 Configuration Twin CAT 3 Autotuning enables compatible axes to be put into operation with high performance without special settings. The drive parameters are calculated according to the essential stability criteria. These criteria, consisting of the gain maximum, the phase margin, and gain margin, can be selected from predefined parameter sets or defined individually, depending on the nature of the mechanics in question. In addition, all essential settings from the Twin CAT 3 Bode Plot can be adapted. All editable parameters are described below. 5.1 Configuration and execution You can define the tuning goals here, start the process, and export the results. • Export: Opens the file window for saving the generated Twin CAT 3 Bode Plot project. See also: Exporting the tuning results [} 36] • Start: Starts the autotuning. • Auto tuning mode: Defines the drive parameters to be searched for tuning. The available options are: ◦ Kp and Tn: Calculation of the gain factor of the speed controller and the integration time constant. ◦ Kp only: Calculation of the gain factor of the speed controller without adjusting the integration time constant. ◦ Filter based: Pure filter calculation without calculation of the other parameters. After applying the calculated filters, it is recommended to adjust the controller parameters. TE5960 Version: 1.0.2 23

## Page 24

Configuration • Enable filter calculation: Enables/disables the calculation of current command value filters for available filter slots. See: Configure Drive Manager [} 32] • Auto adjust current: Disables the automatic adjustment of the base and signal amplitude. If disabled, the values can be adjusted in the Bode settings [} 24] area. • Enable load inertia/mass calculation: Enables/disables the calculation of the load inertia of the mechanical system (total mass). 5.2 Stability conditions The settings for the system stability limits to be observed during tuning can be made here. • Load category: Selects a set of typical values for the following parameters. The following preconfigured sets are available: ◦ Stiff: Limit values for stiffly connected mass in the system; direct system response expected. Direct drive (e.g. torque or linear motor), spindle, low-backlash planetary gear unit. ◦ Medium: Limit values for medium-strength connected masses in the system. Rack and pinion, short toothed belts, flexible couplings. ◦ Soft: Limit values for softly connected mass in the system; late system response expected. Long toothed belts, chain drives, long shafts, elastic systems (e.g. rubber/elastomer couplings). • Max. closed loop gain (suspension): Maximum permissible gain in the frequency range below the first antiresonance. • Max. closed loop gain (resonance): Maximum permissible gain in the frequency range above the first antiresonance. • Gain margin threshold: Sets the gain margin to be maintained. The frequency corresponds to the point at which the phase response of the open loop phase falls below the value -180°. • Phase margin threshold: Sets the phase margin to be maintained. The frequency corresponds to the point at which the open loop gain falls below the value of 0 d B. 5.3 Bode settings The settings for the Bode plot, i.e. the frequency responses of the initial recording and the validation measurement, can be adjusted here. 24 Version: 1.0.2 TE5960

## Page 25

Configuration • Max frequency: Specifies the upper frequency limit of the Bode plot [in Hz]. • Min frequency: Specifies the lower frequency limit of the Bode plot [in Hz]. • Frequency Steps: Number of measuring points in the Bode plot. • Position Monitoring Window: Defines a window that is monitored during the Bode plot. The object must not leave this window. The unit actually set is read out and the number is interpreted in accordance with the unit. • Velocity Amplitude Scaling Mode: Scales the signal amplitude during recording so that movements are not too large as the frequency increases. The following are available: ◦ Constant: The amplitude corresponds to the parameterized signal amplitude and remains constant over the entire frequency range. ◦ 1 / X at 1000Hz: Scales the amplitude so that at 1000 Hz it has fallen to 1 / X of the start amplitude of 1 Hz (~1/f). Useful ratios in practice are 1/5, 1/10 and 1/20. • Velocity Base Amplitude: Sets the amplitude of the basic oscillation (~1 Hz) for overcoming the static friction. The unit of measurement is to be taken from the system settings (e.g. Drive, NC, etc.) and cannot be specified here. • Velocity Signal Amplitude: Represents the amplitude of the signal (or measurement) oscillation at 1 Hz (see Velocity Amplitude Scaling Mode). The unit of measurement is to be taken from the system settings (e.g. Drive, NC, etc.) and cannot be specified here. • Max current threshold: Target value as a percentage of the measured current when automatic setting of the excitation amplitudes is activated. • Dynamic Container id: Sets the ID of the container for dynamic process data. The Dyn Container is appended to the Ether CAT device in the Twin CAT project. • Check Drive Limitations: If you want to check via the axes, you can specify this here. • Maximum Steps per Response: Sets the number of measuring points per system response for broadband excitations (e.g. Multi Sine, Chirp, PRBS). • Signal Generator: Displays the excitation type of the signal generator used. The following are available: TE5960 Version: 1.0.2 25

## Page 26

Configuration ◦ Sine: Standard sine oscillation with regard to the set amplitude. ◦ Multi Sine: Amplitude-modulated broadband sine. ◦ Chirp: Time-varying, sinusoidal excitation, chirp. ◦ PRBS: The Pseudorandom Binary Sequence (PRBS) approximates a broadband white noise. • Autoscale Gain: Disables/enables the automatic scaling in the gain response chart. • Trace Level: Sets the detail level of the messages generated by the “Drive Diag –Tc Com Object” and output in the error list. The available options are Always, Error, Verbose and Warning. 5.4 Evaluation values After successful tuning, the parameters to be adopted can be selected here and adopted for the download or reset. • Commit: Confirms the application of the proposed controller parameters. • Undo: Resets the controller parameters to the default settings. • Suggested Position control Kv: Suggested value for the gain factor of the position controller. • Suggested Position control Kp: Suggested value for the gain factor of the speed controller. • Suggested Position control Tn: Suggested value for the integration time constant of the speed controller. • Suggested load inertia/mass: Suggested load inertia / total mass of the system. • Filter setting: Selection of suggested filters. Depending on the filter type, the corresponding parameters are displayed: ◦ Filter type: Type of filter to be implemented. ◦ Frequency: Frequency point in Hertz for the current command value filter. ◦ Bandwidth: Bandwidth of the filter specified in Hertz. ◦ Depth: Depth of the filter in decibels. 5.5 Drive target system parameters The current drive parameters and filters can be viewed and changed here. Several changed parameters (red) can be downloaded using the Download button 26 Version: 1.0.2 TE5960

## Page 27

Configuration • Download: Download the edited (red marked) drive parameters and filters. • Position control Kv: Current value for the gain factor of the position controller. • Velocity control Kp: Current value for the gain factor of the speed controller. • Velocity control Tn: Current value for the integration time constant of the speed controller. • Load inertia/mass: Currently configured load inertia / total mass of the system. • Motor moment of inertia: Motor-specific inertia constant. • Filter setting: Display of the active current command value filters. TE5960 Version: 1.0.2 27

## Page 28

Examples 6 Examples 6.1 Twin CAT 3 Autotuning - First steps The first essential steps for tuning a Twin CAT compatible axis with Twin CAT 3 Autotuning are explained below. A new project for tuning is created as an example and all necessary (and recommended) settings are made. These can also be implemented analogously in existing projects. WARNING Risk of injury due to the drive axis starting up automatically To create the Bode plot, the drive axis performs a movement sequence that depends on the settings. At the start of the recording the drive axis starts up automatically in accordance with the set motion profile and can endanger people and material. During the recording the drive axis remains integrated in the application context (e.g. releases, monitoring, etc.). • Ensure safety during the Bode plot recording. Create Twin CAT project 1. Open a new Twin CAT XAE project (XML format) via File > New > Project. ð A new project folder is then created and opened. Registering the classes ü Twin CAT 3 Autotuning is based on the Twin CAT 3 Bode Plot. This is performed in the Twin CAT system by a Tc COM object, which is generated automatically. Therefore, it is necessary to make the associated class descriptions for Tc Bode Plot (and Tc Nc Objects) known for the subsequent recordings of the frequency response. 28 Version: 1.0.2 TE5960

## Page 29

Examples 1. You do this under the Tc COM Objects project node in the Class Factories tab. TE5960 Version: 1.0.2 29

## Page 30

Examples Scanning drives and creating dynamic memory 1. Search for available axes in the project tree under I/O > Devices on the selected target system by selecting Scan. ð Associated elements are automatically created for the available axes under the MOTION node. ð Communication between the Tc Bode Plot and the NC / CNC takes place via the Tc Nc Objects and requires a dynamic memory area for oversampling in the drive. 30 Version: 1.0.2 TE5960

## Page 31

Examples 2. You add this to the associated device via the context menu using Append Dynamic Container. 3. In the window that opens for setting the size of the Dynamic Container, you must set a size of 512. First, a Drive Manager 2 project must be added to the Twin CAT Solution. ü The parameterization and execution of Twin CAT 3 Autotuning is carried out via the Twin CAT 3 Drive Manager 2. TE5960 Version: 1.0.2 31

## Page 32

Examples 1. To do this, add a new project to the Solution: 2. Open the project you have created and search for drives. If necessary, adjust the parameters of the detected drives. Configuration in Twin CAT Drive Manager 2 (recommended) ü For the best possible tuning result, it is recommended to enable the use of current command value filters for the selected drive. 1. In the Drive Manager 2 project, select the Tune drive tab for the desired drive. 32 Version: 1.0.2 TE5960

## Page 33

Examples 2. In the window that opens (Controller overview), select the Current controller. 3. Then open the Torque command value Filter menu. 4. If possible, add one or more unconfigured filters (No Filter). TE5960 Version: 1.0.2 33

## Page 34

Examples ð If necessary, these are automatically parameterized accordingly in the following tuning. 5. After (re-)activating the Solution, the changes made are available. 6. Follow the instructions in the Drive Manager 2 project. 7. Carry out this step again if necessary. Starting the tuning ü During the tuning process, the axis is set in motion so that you have to activate the controls for this. 34 Version: 1.0.2 TE5960

## Page 35

Examples 1. Select the Run motor tab under the properties of the NC and enable the controller under Enable controller. 2. With the axis armed, select the Autotuning menu item in the Tune drive tab and start the process by clicking on the Start button. TE5960 Version: 1.0.2 35

## Page 36

Examples 3. After successfully calculating the drive parameters and performing a validation measurement, you have the option of accepting the proposed values (Commit) and then downloading them to the drive (Download). ð For a detailed analysis, further processing of the results or for troubleshooting, the generated data can be exported to a Twin CAT 3 Bode Plot project. Further details can be found in the section Exporting the tuning results [} 36]. 6.2 Exporting the tuning results The drive parameters and current command value filters calculated during tuning are saved in a Twin CAT 3 Bode Plot project and can be used after the calculation both for intensive evaluation of the results and for troubleshooting. The exported project (*.tcbodeprojx) can be inserted into a Twin CAT Measurement project as an existing project. 36 Version: 1.0.2 TE5960

## Page 37

Examples The calculated filters can be displayed and parameters adjusted via the properties. By adding a "Result Set", the effects on the initial recording can be calculated in a preview. Changing the filter parameters here is just an example. The changed values will not be downloaded directly to the drive. TE5960 Version: 1.0.2 37

## Page 38

Examples In the event of inconsistent tuning results, the simulated and measured frequency response can be compared with regard to the calculated drive parameters. To do this, the "Record Set" with the designation "Calculation result" must be made visible. 38 Version: 1.0.2 TE5960

## Page 39

Appendix 7 Appendix 7.1 FAQ - frequently asked questions and answers The following describes some scenarios in which Twin CAT 3 Autotuning could not be performed successfully. The problems that arise are outlined and possible solutions are described. 7.1.1 Error code 0x6138 Problem The autotuning recording stops with the error 0x6138. Solution This error may occur when using the AX8206 servo system. In this case, remove the Feedback Slot of the unused channel for the duration of the tuning of the desired axis (channel). 7.1.2 Filter slots for AX8000/AMP8000 Problem The use of filters under AX8000/AMP8000 is not possible or the filters are calculated but not applied. Solution Activate the desired number of filters in the advanced settings of the drive. Also place a check mark in the higher-level category. The filter slots are only available after reactivating the Solution in the drive. 7.1.3 Fragmented recording Problem The initial recording of the frequency response (black) shows clear fragments in the gain and phase response in the lower frequency range. TE5960 Version: 1.0.2 39

## Page 40

Appendix Solution Fragmentation of the frequency response in the lower frequency range may be due to insufficient excitation of the axis. The following troubleshooting options are available: • Amplification of the excitation amplitude by increasing the percentage threshold value when automatic determination of the base and signal amplitude is activated. The corresponding parameter can be found in the section Bode settings [} 24] under the entry "Max. current threshold". • Disable automatic amplitude determination in the section "Configuration and execution [} 23] and manually select the base and signal amplitude in the Bode settings [} 24]. 7.1.4 Unstable validation measurement Problem The tuning was carried out successfully, but the validation of the results (red) shows unstable behavior. 40 Version: 1.0.2 TE5960

## Page 41

Appendix Solution In the example above, a very high value was determined for the gain factor for the speed controller because the initial measurement did not map the frequency response sharply enough. As a result, resonance and antiresonance cannot be determined accurately enough and the simulation of the mechanics does not match the real behavior. In this case, increase the resolution of the frequency response in the frequency range by increasing the number of "Frequency steps" in the section Bode settings [} 24]. TE5960 Version: 1.0.2 41

## Page 42

Appendix 7.1.5 Excitation problems Problem The amplitude of the tuned frequency response falls well below a value of 0 decibels in the lower frequency range. Solution An unexpected, significant drop in amplitude is often due to insufficient excitation. Increase the excitation amplitude in the section Bode settings [} 24] by either increasing the percentage threshold value or disabling the automatic calibration of the excitation and manually configuring a suitable value. See also: Fragmented recording [} 39] 7.1.6 Deviations in the validation measurement Problem The results of the autotuning are not consistent. When analyzing the Twin CAT 3 Bode Plot project, a clear deviation can be seen between the propagated ("Calculation result", blue) and the measured frequency response (red) with the determined drive parameters. 42 Version: 1.0.2 TE5960

## Page 43

Appendix Solution Use one of the supported observer modes and follow the instructions in Twin CAT Drive Manager 2. The selection of the observer influences the mechanics of the system and must be set correctly. TE5960 Version: 1.0.2 43

## Page 44

Support and Service 8 Support and Service Beckhoff and their partners around the world offer comprehensive support and service, making available fast and competent assistance with all questions related to Beckhoff products and system solutions. Download finder Our download finder contains all the files that we offer you for downloading. You will find application reports, technical documentation, technical drawings, configuration files and much more. The downloads are available in various formats. Beckhoff's branch offices and representatives Please contact your Beckhoff branch office or representative for local support and service on Beckhoff products! The addresses of Beckhoff's branch offices and representatives round the world can be found on our internet page: www.beckhoff.com You will also find further documentation for Beckhoff components there. Beckhoff Support Support offers you comprehensive technical assistance, helping you not only with the application of individual Beckhoff products, but also with other, wide-ranging services: • support • design, programming and commissioning of complex automation systems • and extensive training program for Beckhoff system components Hotline: +49 5246 963-157 e-mail: support@beckhoff.com Beckhoff Service The Beckhoff Service Center supports you in all matters of after-sales service: • on-site service • repair service • spare parts service • hotline service Hotline: +49 5246 963-460 e-mail: service@beckhoff.com Beckhoff Headquarters Beckhoff Automation Gmb H & Co. KG Huelshorstweg 20 33415 Verl Germany Phone: +49 5246 963-0 e-mail: info@beckhoff.com web: www.beckhoff.com 44 Version: 1.0.2 TE5960

## Page 45

Trademark statements Beckhoff®, ATRO®, Ether CAT®, Ether CAT G®, Ether CAT G10®, Ether CAT P®, MX-System®, Safety over Ether CAT®, TC/BSD®, Twin CAT®, Twin CAT/BSD®, Twin SAFE®, XFC®, XPlanar® and XTS® are registered and licensed trademarks of Beckhoff Automation Gmb H. Third-party trademark statements Microsoft, Microsoft Azure, Microsoft Edge, Power Shell, Visual Studio, Windows and Xbox are trademarks of the Microsoft group of companies.

## Page 46

More Information: www.beckhoff.com/te5960 Beckhoff Automation Gmb H & Co. KG Hülshorstweg 20 33415 Verl Germany Phone: +49 5246 9630 info@beckhoff.com www.beckhoff.com
