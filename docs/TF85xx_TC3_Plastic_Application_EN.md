---
title: "TF85xx_TC3_Plastic_Application_EN"
product: "TC3"
category: "Process_Engineering"
tags: ["APPLICATION", "PLASTIC"]
language: "EN"
document_type: "Manual"
version: "1.4.0"
source_pdf: "https://download.beckhoff.com/download/Document/automation/twincat3/TF85xx_TC3_Plastic_Application_EN.pdf"
release_date: "2025-08-07"
---
Manual | EN TF85xx Twin CAT 3 | Plastic Application 2025-08-07 | Version: 1.4.0
## Page 3

Table of contents Table of contents 1 Foreword.................................................................................................................................................... 9 1.1 Notes on the documentation............................................................................................................. 9 1.2 For your safety.................................................................................................................................. 9 1.3 Notes on information security.......................................................................................................... 11 1.4 Documentation issue status............................................................................................................ 11 2 Introduction............................................................................................................................................. 13 3 Version of the documented software.................................................................................................... 15 4 Installation............................................................................................................................................... 16 4.1 Creating a PLC project.................................................................................................................... 16 4.2 Creating an HMI project.................................................................................................................. 18 4.3 Setup of PLC debugging................................................................................................................. 21 5 PLC concept and strategy...................................................................................................................... 27 5.1 HMI interface................................................................................................................................... 27 5.2 Modification and extension by inheritance...................................................................................... 28 5.3 Use of interfaces............................................................................................................................. 29 5.4 Guidelines and compatibility........................................................................................................... 29 5.5 Initialization and cycle methods...................................................................................................... 31 5.6 Data handling.................................................................................................................................. 33 5.7 Project structure.............................................................................................................................. 34 6 PLC-API - Class overview....................................................................................................................... 42 6.1 Alarms - Handling of the Tc3_Event Logger.................................................................................... 42 6.1.1 FB_Alarm Handler............................................................................................................. 42 6.1.2 FB_App Message.............................................................................................................. 43 6.2 Analog - analog value scaling......................................................................................................... 47 6.2.1 FB_Scale Analog Hmi........................................................................................................ 47 6.2.2 FB_Monitoring.................................................................................................................. 49 6.2.3 FB_Monitoring Hmi........................................................................................................... 53 6.2.4 FB_Setpoints.................................................................................................................... 55 6.2.5 FB_Setpoints Hmi............................................................................................................. 56 6.3 Base - Base classes........................................................................................................................ 58 6.3.1 FB_Base.......................................................................................................................... 58 6.3.2 FB_Base Hmi.................................................................................................................... 60 6.3.3 FB_Base Md..................................................................................................................... 60 6.3.4 FB_Base Md Hmi............................................................................................................... 62 6.4 Blow Molding - Blow molding specific classes................................................................................. 63 6.4.1 FB_Blowing...................................................................................................................... 63 6.4.2 FB_Interval Blowing.......................................................................................................... 65 6.4.3 FB_Blowpin...................................................................................................................... 67 6.4.4 FB_Blowpin Hmi................................................................................................................ 71 6.4.5 FB_Blow Molding Extruder................................................................................................. 74 6.4.6 FB_Blow Molding Extruder Hmi.......................................................................................... 78 6.4.7 FB_Wtc............................................................................................................................ 81 6.4.8 FB_Wtc Hmi...................................................................................................................... 85 TF85xx Version: 1.4.0 3
## Page 4

Table of contents 6.4.9 FB_Wtc Timer................................................................................................................... 88 6.4.10 FB_Wtc Timer Hmi............................................................................................................. 90 6.4.11 FB_Wtc Accumulator........................................................................................................ 91 6.4.12 FB_Wtc Accumulator Hmi.................................................................................................. 95 6.4.13 FB_Support Air.................................................................................................................. 99 6.4.14 FB_Support Air Hmi......................................................................................................... 101 6.5 Logging - Recording user input..................................................................................................... 103 6.5.1 CSV................................................................................................................................ 103 6.5.2 User Logging................................................................................................................... 111 6.6 Machine Data - Machine data........................................................................................................ 115 6.6.1 Base............................................................................................................................... 117 6.6.2 Components................................................................................................................... 122 6.7 Manual Function - Manual functions.............................................................................................. 163 6.7.1 FB_Manual Function Hmi................................................................................................. 163 6.7.2 FB_Manual..................................................................................................................... 167 6.7.3 FB_Manual Motion.......................................................................................................... 168 6.7.4 FB_Manual Base Work.................................................................................................... 170 6.7.5 FB_Manual Power........................................................................................................... 172 6.7.6 FB_Manual Turnrate....................................................................................................... 174 6.7.7 FB_Manual Wheel........................................................................................................... 175 6.8 Motion - Motion objects................................................................................................................. 178 6.8.1 FB_Motion...................................................................................................................... 178 6.8.2 FB_Motion Hmi............................................................................................................... 185 6.8.3 FB_Axis.......................................................................................................................... 187 6.8.4 FB_Axis Hmi................................................................................................................... 192 6.8.5 FB_Cam Axis.................................................................................................................. 207 6.8.6 FB_Cam Axis Hmi............................................................................................................ 210 6.8.7 FB_Carriage................................................................................................................... 217 6.8.8 FB_Carriage Hmi............................................................................................................ 220 6.8.9 FB_Clamp...................................................................................................................... 224 6.8.10 FB_Clamp Hmi................................................................................................................ 227 6.8.11 FB_Extruder................................................................................................................... 231 6.8.12 FB_Extruder Hmi............................................................................................................. 234 6.8.13 FB_Ptp Motion................................................................................................................ 237 6.8.14 FB_Ptp Motion Hmi.......................................................................................................... 242 6.9 Operation Data - Production data and statistics............................................................................. 250 6.9.1 FB_Production Counter................................................................................................... 250 6.9.2 FB_Energy Measurement............................................................................................... 253 6.10 Recipe - recipe management........................................................................................................ 261 6.10.1 FB_Plc State To Hmi......................................................................................................... 261 6.10.2 I_Recipe State................................................................................................................. 263 6.10.3 FB_Recipe..................................................................................................................... 264 6.10.4 FB_Temp Recipe............................................................................................................ 265 6.10.5 FB_Move Cluster Recipe................................................................................................. 267 6.11 Runtime - Handling of initialization and cycle calls....................................................................... 270 6.11.1 FB_Base Runtime........................................................................................................... 270 4 Version: 1.4.0 TF85xx
## Page 5

Table of contents 6.11.2 I_Runtime Interface......................................................................................................... 272 6.12 Temperature - TF8540 Temperature Interface............................................................................. 273 6.12.1 FB_Temperature............................................................................................................ 273 6.12.2 FB_Temperature Hmi...................................................................................................... 280 6.12.3 FB_Temperature Group.................................................................................................. 282 6.12.4 FB_Temperature Group Hmi............................................................................................ 287 6.12.5 FB_Temp Channel Base.................................................................................................. 290 6.12.6 FB_Temp Channel.......................................................................................................... 291 6.12.7 FB_Temp Channel Hmi.................................................................................................... 292 6.12.8 FB_Temp Supply............................................................................................................ 293 6.12.9 FB_Temp Supply Line...................................................................................................... 294 6.12.10 FB_Temp Schedule........................................................................................................ 294 6.12.11 FB_Temp Schedule Hmi.................................................................................................. 296 6.12.12 FB_Timer Temp Hmi........................................................................................................ 297 6.12.13 FB_Temp Config Query Hmi............................................................................................. 298 6.12.14 T_SHA256...................................................................................................................... 300 6.13 Time - Time-related functions....................................................................................................... 300 6.13.1 FB_Timer Hmi................................................................................................................. 300 6.13.2 FB_Timer Ton................................................................................................................. 301 6.13.3 FB_Timer Tof.................................................................................................................. 302 6.13.4 FB_Timer Tp................................................................................................................... 303 6.13.5 FB_Timer Weekday Hmi.................................................................................................. 304 6.13.6 FB_Timer Weekday Master............................................................................................. 306 6.13.7 FB_Time......................................................................................................................... 307 6.13.8 F_Get Cycle Time().......................................................................................................... 309 6.13.9 F_Update Local Systemtime............................................................................................ 309 6.13.10 F_Get Local Systemtime.................................................................................................. 309 6.13.11 F_Get Local Systemtime Ex.............................................................................................. 310 6.13.12 F_Seconds To Time()...................................................................................................... 311 6.13.13 F_Time To Seconds()...................................................................................................... 311 6.14 Utilities........................................................................................................................................... 312 6.14.1 Files................................................................................................................................ 312 6.14.2 FB_Adaptable Sequence................................................................................................ 317 6.14.3 FB_CP22xx_1025.......................................................................................................... 322 6.14.4 FB_Flex Value................................................................................................................. 330 6.14.5 FB_Handshake Hmi........................................................................................................ 331 6.14.6 FB_List Query Hmi........................................................................................................... 333 6.14.7 FB_Parameter................................................................................................................ 334 6.14.8 FB_Scale Hmi................................................................................................................. 335 6.14.9 FB_Trend Hmi................................................................................................................. 336 6.14.10 Math............................................................................................................................... 341 6.14.11 T_Plastic Status.............................................................................................................. 342 6.14.12 Table Generator.............................................................................................................. 343 6.14.13 Trigger............................................................................................................................ 349 6.14.14 Version........................................................................................................................... 351 6.15 Setting parameters - Tc3_Plastic Base App Static Params.............................................................. 353 TF85xx Version: 1.4.0 5
## Page 6

Table of contents 7 HMI project structure............................................................................................................................ 356 7.1 References.................................................................................................................................... 356 7.2 Themes......................................................................................................................................... 359 7.3 Contents........................................................................................................................................ 359 7.3.1 Navigation...................................................................................................................... 366 7.3.2 Info................................................................................................................................. 366 7.3.3 Manual functions............................................................................................................ 367 7.3.4 Dashboard...................................................................................................................... 369 7.3.5 Axes............................................................................................................................... 372 7.3.6 Extruder.......................................................................................................................... 377 7.3.7 Parameter...................................................................................................................... 383 7.3.8 Process.......................................................................................................................... 389 7.3.9 System........................................................................................................................... 395 7.3.10 Temperature................................................................................................................... 412 7.3.11 WTC............................................................................................................................... 426 7.4 Localization................................................................................................................................... 436 7.5 View.............................................................................................................................................. 436 8 Samples / instructions.......................................................................................................................... 440 8.1 PLC samples / instructions............................................................................................................ 440 8.1.1 General.......................................................................................................................... 440 8.1.2 Object orientation........................................................................................................... 443 8.1.3 Axes............................................................................................................................... 450 8.1.4 Data management.......................................................................................................... 455 8.1.5 Temperature control....................................................................................................... 456 8.1.6 Central operating function.............................................................................................. 462 8.2 Commissioning of the temperature control................................................................................... 464 8.3 Creating and using the Zone Image Layout Config server symbol.................................................. 469 8.4 Logging user changes................................................................................................................... 470 8.5 Optimizing mappings in the Twin CAT HMI project........................................................................ 471 8.6 Using the CP2219-1025-0030 Industrial Panel PC....................................................................... 473 8.7 Commissioning RFID.................................................................................................................... 476 9 Appendix................................................................................................................................................ 479 9.1 PLC-API (obsolete)....................................................................................................................... 479 9.1.1 F_Try Devide()................................................................................................................ 479 9.1.2 FB_Trafo Table Generator............................................................................................... 480 9.1.3 FB_Monitoring Zone........................................................................................................ 486 9.1.4 FB_Temp Ctrl.................................................................................................................. 487 9.1.5 FB_Temp Ctrl Hmi........................................................................................................... 494 9.1.6 FB_Temp Group............................................................................................................. 495 9.1.7 FB_Temp Group Hmi....................................................................................................... 496 9.1.8 FB_Temp Group Op Mode Hmi......................................................................................... 498 9.1.9 FB_Temp Zone............................................................................................................... 498 9.1.10 FB_Temp Zone Hmi......................................................................................................... 499 9.1.11 FB_Axis Specific............................................................................................................. 500 9.1.12 FB_Wtc Time Master....................................................................................................... 501 6 Version: 1.4.0 TF85xx
## Page 7

Table of contents 9.1.13 FB_Wtc Accu Master....................................................................................................... 502 9.1.14 FB_Manual Ptp............................................................................................................... 503 9.1.15 Plastic Status Hmi............................................................................................................ 504 9.1.16 FB_Base Camming Hmi................................................................................................... 504 9.1.17 FB_Homing.................................................................................................................... 508 TF85xx Version: 1.4.0 7
## Page 8

Table of contents 8 Version: 1.4.0 TF85xx
## Page 9

Foreword 1 Foreword 1.1 Notes on the documentation This description is intended exclusively for trained specialists in control and automation technology who are familiar with the applicable national standards. The documentation and the following notes and explanations must be complied with when installing and commissioning the components. The trained specialists must always use the current valid documentation. The trained specialists must ensure that the application and use of the products described is in line with all safety requirements, including all relevant laws, regulations, guidelines, and standards. Disclaimer The documentation has been compiled with care. The products described are, however, constantly under development. We reserve the right to revise and change the documentation at any time and without notice. Claims to modify products that have already been supplied may not be made on the basis of the data, diagrams, and descriptions in this documentation. Trademarks Beckhoff®, ATRO® , Ether CAT®, Ether CAT G®, Ether CAT G10®, Ether CAT P®, MX-System®, Safety over Ether CAT®, TC/BSD®, Twin CAT®, Twin CAT/BSD®, Twin SAFE®, XFC®, XPlanar®, and XTS® are registered and licensed trademarks of Beckhoff Automation Gmb H. If third parties make use of the designations or trademarks contained in this publication for their own purposes, this could infringe upon the rights of the owners of the said designations. Ether CAT® is a registered trademark and patented technology, licensed by Beckhoff Automation Gmb H, Germany. Copyright © Beckhoff Automation Gmb H & Co. KG, Germany. The distribution and reproduction of this document, as well as the use and communication of its contents without express authorization, are prohibited. Offenders will be held liable for the payment of damages. All rights reserved in the event that a patent, utility model, or design are registered. Third-party trademarks Trademarks of third parties may be used in this documentation. You can find the trademark notices here: https://www.beckhoff.com/trademarks. 1.2 For your safety Safety regulations Read the following explanations for your safety. Always observe and follow product-specific safety instructions, which you may find at the appropriate places in this document. Exclusion of liability All the components are supplied in particular hardware and software configurations which are appropriate for the application. Modifications to hardware or software configurations other than those described in the documentation are not permitted, and nullify the liability of Beckhoff Automation Gmb H & Co. KG. TF85xx Version: 1.4.0 9
## Page 10

Foreword Personnel qualification This description is only intended for trained specialists in control, automation, and drive technology who are familiar with the applicable national standards. Signal words The signal words used in the documentation are classified below. In order to prevent injury and damage to persons and property, read and follow the safety and warning notices. Personal injury warnings DANGER Hazard with high risk of death or serious injury. WARNING Hazard with medium risk of death or serious injury. CAUTION There is a low-risk hazard that could result in medium or minor injury. Warning of damage to property or environment NOTICE The environment, equipment, or data may be damaged. Information on handling the product This information includes, for example: recommendations for action, assistance or further information on the product. 10 Version: 1.4.0 TF85xx
## Page 11

Foreword 1.3 Notes on information security The products of Beckhoff Automation Gmb H & Co. KG (Beckhoff), insofar as they can be accessed online, are equipped with security functions that support the secure operation of plants, systems, machines and networks. Despite the security functions, the creation, implementation and constant updating of a holistic security concept for the operation are necessary to protect the respective plant, system, machine and networks against cyber threats. The products sold by Beckhoff are only part of the overall security concept. The customer is responsible for preventing unauthorized access by third parties to its equipment, systems, machines and networks. The latter should be connected to the corporate network or the Internet only if appropriate protective measures have been set up. In addition, the recommendations from Beckhoff regarding appropriate protective measures should be observed. Further information regarding information security and industrial security can be found in our https://www.beckhoff.com/secguide. Beckhoff products and solutions undergo continuous further development. This also applies to security functions. In light of this continuous further development, Beckhoff expressly recommends that the products are kept up to date at all times and that updates are installed for the products once they have been made available. Using outdated or unsupported product versions can increase the risk of cyber threats. To stay informed about information security for Beckhoff products, subscribe to the RSS feed at https:// www.beckhoff.com/secinfo. 1.4 Documentation issue status Version Change 1.4.x New: Installation [} 16] FB_App Message/Announce Alarm Arg() [} 44] FB_App Message/E_Alarm State [} 47] FB_Ptp Motion/Move To Point() [} 241] Commissioning RFID [} 476] 1.3.x New: FB_Wtc Accumulator Hmi [} 95] FB_Support Air [} 99] FB_Support Air Hmi [} 101] FB_Md Carriage [} 129] FB_Referencing [} 189] FB_Referencing Hmi [} 196] FB_Cam Axis [} 207] FB_Cam Axis Hmi [} 210] FB_Temp Config Query Hmi [} 298] F_Update Local Systemtime [} 309] FB_Handshake Hmi [} 331] FB_List Query Hmi [} 333] Math [} 341] Table Generator [} 343] Trigger [} 349] Version [} 351] TF85xx Version: 1.4.0 11
## Page 12

Foreword Version Change Dashboard [} 369] 1.2.x New: RFID [} 410] FB_Csv Table Generator [} 345] FB_File Table Generator [} 343] Operation Data - Production data and statistics [} 250]: some FBs new Motion - Motion objects [} 178]: some FBs new Components [} 122] Alarms - Handling of the Tc3_Event Logger [} 42] – many new features 12 Version: 1.4.0 TF85xx
## Page 13

Introduction 2 Introduction The Twin CAT 3 Plastic Application represents the third implementation level of the industry solution for plastics machinery from Beckhoff Automation. In this level, the technology-specific functions of the Twin CAT 3 Plastic Framework (second level) are implemented in production-specific execution. Various production part processes can be listed as examples of production-specific functions: • Blow molding application: wall thickness control (WTC) • Injection molding application: injection process (Injection Unit) • Extrusion application: constant extrusion (extruder) In the Twin CAT 3 Plastic Application, precisely these production part processes are implemented and preconfigured as examples. The source code for the Plastic Application is provided free of charge, which makes it possible to edit and extend the solution in any way. Therefore, the Base Application is ideal as a basis for starting a new project. Concrete structure In addition to the vertical division into Sample Code and Plastic Base Application, the project can also be differentiated horizontally: PLC and HMI. TF85xx Version: 1.4.0 13
## Page 14

Introduction For the horizontal division, there are two projects on the PLC side, which implement the functions of the Plastic Application in a coordinated manner. In the vertical distinction, both projects are divided into a general part (Plastic Base Application) and a machine-specific part (Type specific PLC project). This division ensures that even after the start of a project, the further development of the Plastic Application can be benefited from. Editing the Plastic Base Application not recommended It is possible to import and then edit the Plastic Base Application. However, the option of support from Beckhoff Automation in terms of adaptations and extensions is thereby forfeited. Normally, you only work in the machine-specific part (Sample Code) and use the Plastic Base Application as a library. Currently, the Plastic Application supports the following machine types: • Blow molding machines (BMM) • Extrusion machines (EXTR) • Temperature stand-alone applications (TEMP) Further machine types are planned for future development. 14 Version: 1.4.0 TF85xx
## Page 15

Version of the documented software 3 Version of the documented software Project: Twin CAT 3 Plastic Application V12.12.0 Dependencies: Name License number Version Twin CAT 3 TC1200 >= 3.1.4024.42 (min.) >= 3.1.4024.66 (4024 recommended) >= 3.1.4026.16 (4026 recommended) Twin CAT 3 HMI TF2000 12.762.46 (recommended) 14.1.133 (released) Plastic Processing Framework TF8540 3.3.0.0 (Temperature Control) TC3 Plastic TC HMI Controls TF8550 12.18.0 TC3 Plastic Technology Functions TF8560 12.10.0 Twin CAT HMI Version Only use the minor version of the Twin CAT 3 HMI specified here. Experience shows that minor updates may cause incompatibilities with the Twin CAT Plastic Application HMI project. If you have questions about specific versions, please contact Branche Plastic@beckhoff.com New version key from V12.8.1 From version v12.8.1, a new version key applies for the PLC libraries Plastic Technology Functions (TF8560) and Plastic Base Application. All digits of the version number are shifted one position to the left so that the leading V3.x.x.x is omitted. Furthermore, as already applied to the Plastic TC HMI Controls (TF8550), only every even minor version is released. For odd-numbered minor versions, this is a pre-release version. TF85xx Version: 1.4.0 15
## Page 16

Installation 4 Installation The Plastic Application can be installed under Twin CAT 4026 via the Twin CAT Package Manager. A separate workload is available for this. The Plastic Application Workload installs the workloads for the three plastic products: • TF8540 – Plastic Processing Framework • TF8550 – Plastic HMI Framework • TF8560 – Plastic Technology Functions In addition, the type-specific project templates are installed as the following packages: Twin CAT 3.1.4024 and Twin CAT HMI v12.x For use under Twin CAT 4024 (or Twin CAT HMI 12.x), please contact Branche Plastic@beckhoff.com 4.1 Creating a PLC project The Plastic Application Templates can be used to create projects in Twin CAT version 4026 via the Visual Studio dialog. The following instructions show an example of how a new Twin CAT project can be created. ü To create a project, the workloads or packages must already have been installed via the Twin CAT Package Manager. 1. Open the Twin CAT XAE Shell (or the Visual Studio version in which you have integrated your Twin CAT installation). 16 Version: 1.4.0 TF85xx
## Page 17

Installation 2. In the menu under File (1) > New, select the option to create a new project (2). 1 2 3. In the following dialog, scroll (3) in the list of project variants to the Twin CAT XAE Plastic Application projects. 4. Select the preferred variant (4) for your development. 4 3 5 5. Press Next (5) to create the project. TF85xx Version: 1.4.0 17
## Page 18

Installation 6. Assign a project name (6) and confirm the creation of the project with Create (7). 6 7 ð You have successfully created your Twin CAT project. 4.2 Creating an HMI project The Plastic Application Templates can be used to create projects in Twin CAT version 4026 via the Visual Studio dialog. The following instructions show an example of how a new HMI project can be created. ü To create a project, the workloads or packages must already have been installed via the Twin CAT Package Manager. 18 Version: 1.4.0 TF85xx
## Page 19

Installation 1. Open the Twin CAT XAE Shell (or the Visual Studio version in which you have integrated your Twin CAT installation). 2. In the menu under File (1) > New, select the option to create a new project (2). 1 2 3. In the following dialog, scroll (3) in the list of project variants to the Twin CAT HMI Plastic Application projects. 4. Select the preferred variant (4) for your development. 4 3 5 5. Press Next (5) to create the project. TF85xx Version: 1.4.0 19
## Page 20

Installation 6. Assign a project name (6) and confirm the creation of the project with Create (7). 6 7 ð You have successfully created your Twin CAT HMI project. Server not yet initialized The Twin CAT HMI project is created without server configuration. Automatic initialization (see TF8550 Init Template) starts as soon as you load a view in the Designer for the first time or start the Twin CAT HMI Liveview. 20 Version: 1.4.0 TF85xx
## Page 21

Installation 4.3 Setup of PLC debugging The uncompiled version is required for debugging the Twin CAT 3 Plastic Base Application. The PLC resource can be used for this. This example shows you how to add the PLC resource to your project and then debug it. ü You must have previously created a Twin CAT 3 project from a Plastic Application template [} 16] or a general Twin CAT 3 project. 1. Right-click on the PLC node in your Twin CAT 3 project and then select Add New Item. TF85xx Version: 1.4.0 21
## Page 22

Installation 2. In the following dialog, select Plastic Resources from the list. Assign a suitable name for identification in your project. 22 Version: 1.4.0 TF85xx
## Page 23

Installation 3. Navigate to the Debugging folder in the newly added PLC project. ð You have successfully integrated the uncompiled library of the Plastic Base Application into your project. You can now use the library for a debugging process. 4. In your PLC in which the Tc3_Plastic Base Application is used, expand the References node and select the Tc3_Plastic Base Application. 5. Then select an item from the library by double-clicking on it. DISCLAIMER is selected as an example in these instructions. TF85xx Version: 1.4.0 23
## Page 24

Installation 6. A dialog will appear asking you to select an uncompiled version of the Plastic Base Application. Confirm by pressing Yes. 7. Navigate to the path of the previously added PLC resource and select the Tc3_Plastic Base Application.library file. If you are using the Tc3_Plastic Base Application Electric, you will also find the corresponding file in this folder. 8. The source code of the element you selected previously will then open. You can close this again immediately. ð The non-compiled library is loaded for debugging purposes. You must repeat these steps when you reopen the Twin CAT project. 24 Version: 1.4.0 TF85xx
## Page 25

Installation 9. To start a debugging process, log into your running PLC project (1) and select a code segment in which you want to start a debugging process (here FB_Machine. Cyclic() (2) as an example). 1 2 10. Set a breakpoint at a suitable point (e.g. for a library function from the Tc3_Plastic Base Application) with F9. TF85xx Version: 1.4.0 25
## Page 26

Installation 11. Then press F11 to jump to the library function. If there are several function calls in the code line, you may have to press F11 several times to access the desired function. ð You now have access to the called function and have successfully performed a debugging in the Tc3_Plastic Base Application. 26 Version: 1.4.0 TF85xx
## Page 27

PLC concept and strategy 5 PLC concept and strategy The PLC of the Plastic Application implements the control functions of the Plastic Framework (TF8540 & TF8560) in a manufacturing-oriented approach. The framework (in particular TF8560) itself is detached from this approach and implements core functions (Core Functions) for plastics technology. For example, a general point to point movement or cam plates are provided. In addition, the general axis interface I_Axis Base offers the possibility to implement the production-oriented application algorithms without specifying the drive technology. This results in the classes (FBs) of the Plastic Base Application library. As an example of the concept, the wall thickness control (WTC) can be considered here: This component of a blow molding machine is fundamentally based on the cam core function provided by TF8560 (Camming). For the user, this is often of secondary importance, since he wants to integrate the functions based on it, such as Start wall thickness profile or Move to test position, into his procedure. This step is pre-implemented by the Plastic Base Application so that the scope of tasks to be completed to the finished machine is minimized as much as possible. Other concept points are discussed in more detail in the following subsections: Topic Description PLC and HMI [} 27] Communication path between PLC and HMI Inheritance [} 28] Use of inheritance for more efficient use of redundant code and easier function extension Interfaces [} 29] Structure of interface in Plastic Base Application and programming with interfaces to extend control flexibility Guidelines & Compatibility Scheme of designations to ensure compatibility [} 29] Initialization & Cycle Initialization of references, parameters and data Methods [} 31] Data handling [} 33] Data handling at machine and product level Project structure [} 34] Explanation of the Twin CAT project 5.1 HMI interface The communication between PLC and HMI is conceptually considered in the Plastic Application. This ensures that controlled access of the HMI to the PLC is possible. In addition, it is also quickly apparent in PLC programming that the respective sections are input and/or output values of the HMI. The concept is for each class with information exchange to be given a second class, which assumes precisely this function. This results in the parallel-class model. In addition to the main class (FB_Xyz), there is a parallel class of type FB_Xyz Hmi for each added class. The parallel class is linked to the main class via an interface. In the instantiation, the instance of the parallel class must be passed to the instance of the main class for this purpose. Depending on the use case, the main class of the parallel class can also be passed in this step. TF85xx Version: 1.4.0 27
## Page 28

PLC concept and strategy This arrangement results in a division of control data and user input/display values. In addition, controls from the T8550 Plastic TC HMI Controls are implicitly supported, greatly improving the integrity of the project. In the same way, recipe management can be optimally linked to and used with the PLC. 5.2 Modification and extension by inheritance In the vertical division of the project structure into Plastic Base Application and Sample Code, the extension is implemented using IEC 61131-3 inheritance. This means that the machine-specific part (Sample Code) is freely adaptable, but can build on the implemented algorithms of the Plastic Base Application. The consistent use of inheritance for changes to the machine controller also enables updates to the Plastic Base Application to be applied directly by Beckhoff Automation. Editing the Plastic Base Application not recommended It is possible to import and then edit the Plastic Base Application. However, the option of support from Beckhoff Automation in terms of adaptations and extensions is thereby forfeited. Normally, you only work in the machine-specific part (Sample Code) and use the Plastic Base Application as a library. Concept of object-oriented programming It is recommended to deal in detail with the concept of object-oriented programming according to IEC 61131-3 in order to be able to use the advantages effectively. Further information on object- oriented programming can be found in the documentation for Twin CAT 3 PLC programming In Plastic Application, there are a total of four cases where an inheriting class (EXTENDS) can extend, modify or remove the inherited class: • Runtime memory in the class variable declaration ◦ Extension possible with EXTENDS • Add, overwrite and extend properties or methods ◦ Extension possible with SUPER^. call • Extend, modify and disable inner procedures ◦ Extension possible with FB_Adaptable Sequence [} 317] • Extend and modify HMI parallel class ◦ Extending the interface and the parallel class with EXTENDS possible 28 Version: 1.4.0 TF85xx
## Page 29

PLC concept and strategy 5.3 Use of interfaces The Plastic Base application, like the TF8560 Plastic Technology Functions, is based on working with interfaces. For this purpose, a standard interface exists on the part of the Plastic Base Application for almost every class, which provides access to the relevant properties and methods. For many practical use cases in programming, access via an interface turns out to be much clearer. For example, methods for internal communication between two classes as well as other properties are not visible. When extending a class using inheritance (see section Inheritance [} 28]), it is also possible to extend the corresponding standard interface. This can be accomplished in a comparable way to inheriting a class with the keyword EXTENDS. 5.4 Guidelines and compatibility Backward compatibility is always considered in the development of the Plastic Base Application. On the other hand, changes that involve the removal of old items are only handled as an addition. This means that items that are renamed, changed, or redesigned are always added to the project, and the old version remains in the project with the "Obsolete" label. However, updates with new features and items can conflict with the existing end application. It is recommended that you follow the following guidelines to ensure compatibility: Prefixes In the Plastic Base Application, internal variables of a class are given a data type-dependent prefix. This allows a distinction to be made between variables and properties. A list of the usual prefixes can be found in the TE1000 XAE PLC documentation. The following prefixes are used differently to this definition: Type Prefix Instead of Description Declaration example(s) INTERFACE i ip Instance of a safely assigned i Cylinder: interface. I_Cylinder; An interface for Cyclic() methods is safe if a check is performed by the Init() method. INTERFACE iq I Instance of an optionally assigned iq Option: I_Option; interface. This must be checked for <> 0 before each access in a Cyclic() method. WORD w n Instance of a bitwise coded integer w Status: WORD; TF85xx Version: 1.4.0 29
## Page 30

PLC concept and strategy Type Prefix Instead of Description Declaration example(s) GVL - (none) GVL_ Global variable list as declaration Carriage. space for global instances (e.g.:) Temperature. Hmi Communication. Use of a property Properties in object-oriented PLC programming consist of a Get and a Set method. In principle, this means that each property could also be programmed using two methods. For this reason, the Plastic base application defines some scenarios for selecting the action object to be used: Scenario Sample Note Access to an actual fb Object. Act Value (Get) Actual values can only be read state Access to a setting fb Object. Parameter (Get, Set) Parameters can be read and (possibly value conditionally) written Access to a sub- fb Object. Sub Object (Get) Access to sub-objects is controlled via object fb Object. Sub Object. Propert INTERFACE. It must be guaranteed that the y returned INTERFACE is set (fb Object. Sub Object <> 0). Interface to the HMI fb Object Hmi. Value (Get) Properties offer the option of calculating values fb Object Hmi. Parameter (Get, for the HMI according to requirements. This Set) eliminates the need to copy values, especially fb Object Hmi. Cmd (Get, Set) for use in the HMI. The following guidelines should be considered in all scenarios: • The basic rule for Plastic Base Application properties is that they represent passive access to an object. This means that a Set or Get should not result in any immediate action. • If a property is to be used to access a structured sub-object, the property must allow reference access. It must be ensured that a valid instance is always returned for this reference access. • Since no prefix is used when naming a property, the data type of the property can be specified by using a specific name. Examples: ◦ Has, Is or Enable indicates a Boolean property. ◦ Number, Idx, ID indicates an integer property. ◦ Value indicates a floating point property. ◦ Name indicates a string property. ◦ _Property indicates a property reserved for internal purposes. • Adding the attribute {attribute "monitoring" := "call"} to the declaration of a property allows the current value of the property to be displayed live in the PLC's online view. This attribute is also a prerequisite for accessing a property from the HMI. • As obsolete variables are converted to properties, address accesses to the variables of a class should be avoided. In this case, an address access would cause a compilation error and a necessary change. Deviations from the guidelines possible Different usage scenarios may occur in the Plastic Base Application for practical and/or historical reasons. The following cases, for example, were selected for simplification (practicability): • FB_Motion [} 178]. Motion and FB_Axis [} 187]. Axis, which can return access to any unset INTERFACEs. • FB_Monitoring [} 49]. Input and FB_Setpoint [} 55]. Output, which expect optional I/O elements as properties. 30 Version: 1.4.0 TF85xx
## Page 31

PLC concept and strategy Use of a method In contrast to the properties of the Plastic Base Application, methods are fundamentally used for triggering active functions. Accordingly, a list of scenarios can also be compiled for methods: Scenario Sample Note Executing a command fb Object. Do Something(b Cmd) A command can be actively enabled and disabled by passing a b Cmd flag. Call for a one-time fb Object. Clear() This type of method is designed for an event- action fb Object. Init() based (one-time) call. Index-based access fb Object. Sub Objects(i) Access to sub-objects is controlled via to a sub-object fb Object. Sub Objects(i). Pro INTERFACE. It must be guaranteed that the perty returned INTERFACE is set (fb Object. Sub Objects(i) <> 0). In addition, a method can be used to prevent the index limits from being exceeded. Cyclic processing fb Object. Cyclic() Cyclic program code whose cyclic call can also be carried out via a INTERFACE. Cyclic subroutines fb Object._Sub Routine() Division of the cyclic program code into individual routines. These methods can only be called within the class and inheriting classes using the access modifier PROTECTED. Help Functions fb Object._Determ Smth() Class-internal auxiliary functions avoid multiple occurrences of identical code. A method with the access modifier PROTECTED, which can only be called within the class and inheriting classes, is used for this purpose. Initializing a reference fb Object. Set Ref(i Obj) Enables a successful reference initialization to be checked. 5.5 Initialization and cycle methods Since the Plastic Base Application concept frequently works with reference values such as interfaces, it must be ensured that the reference values used have a valid assignment. In order not to additionally burden the runtime by the constant validation of these assignments, the Plastic Base Application implements a concept for the initialization of an object. The access of invalid reference values mainly concerns the call of cycle methods of a Plastic Base Application object. For this reason, an object must have been successfully initialized before the cycle method may be executed. TF85xx Version: 1.4.0 31
## Page 32

PLC concept and strategy Handling with the FB_Base Runtime class recommended All the initialization steps and cycle calls described below can be implemented using FB_Base Runtime. This means that objects only have to be passed to the runtime. If the initialization steps fail, corresponding information is output via the Tc Event Logger. Set HMI() method By means of the Set HMI() method an HMI parallel class can be passed to the main class. The method must always be executed before the Init() method, unless the class also works without HMI parallel class. Error code Abbreviation Description 0x701 Srv Not Supported The class does not support HMI parallel class. 0x71B Invalid Interface The passed interface is invalid. Init() method The Init() method is used to check the initialization state in addition to setting and configuring reference value assignments. Accordingly, when initializing an object, the HRESULT return value of the method must be checked. If the execution of the Init() method is unsuccessful, an error exists in the structure of the program codes. This error must be solved on code level. Use of the Base State Redundantly to the return value of the Init() method, the Base State of the base class FB_Base can also be checked for a value greater than E_Base State.e Init. Cyclic() method The Cyclic() cycle method acts as an object-oriented version of a class instance call. I.e., the method is usually called once per cycle to process procedures and/or updates. The routines implemented in the Cyclic() method are mostly medium priority mechanisms. Therefore, this method is suitable for the implementation of a predefined command sequence or the processing of control commands from the HMI (e.g. the implementation of manual functions). 32 Version: 1.4.0 TF85xx
## Page 33

PLC concept and strategy Param Init() method The Param Init() method is used to initialize parameters. I.e., in this method, hardcoded default values are defined with which commissioning is started without preconfigured machine data. Since asynchronous communication may also be required in this method, execution may continue over several cycles until the HRESULT return value signals the success of the operation. It is recommended to add a timeout to detect a failure of the execution. Loading the machine data If loading machine data from a file is desired when starting the machine, this is not possible in the Param Init() method. Therefore, implement a separate procedure that starts following the successful execution of Param Init(). This is implemented by the FB_Base Runtime class in the Plastic Application project. Core Cyclic() method The special modification of a Cyclic() method as Core Cyclic() can be found again with individual classes such as FB_Axis. This method handles particularly real-time critical tasks such as calling the cycle method of a TF8560 axis. Since such an axis also contains control algorithms, it is recommended to choose the cycle time as small as possible (standard 2 ms). 5.6 Data handling The concept for the Plastic Application data handling is split into several levels. Essentially, the Plastic Base Application implements three levels for loading parameters and other data. These levels are executed one after the other during the start-up phase and can partly be executed again after the start. Standard parameterization (in code)- Param Init() After successful execution of the Init() method, the default parameters defined in the code are loaded. Therefore, this level is considered to be the foundation, but can be overwritten by any subsequent instance. TF85xx Version: 1.4.0 33
## Page 34

PLC concept and strategy Design-\commissioning-dependent data in a binary file - Machine Data (machine data) Machine data includes data that is set only once during the construction, commissioning or modification of the machine. Since this data can influence the machine behavior, the file is stored in binary format and roughly secured against external manipulation by a CRC checksum. The management of the machine data is completely handled by the PLC, but can be set and/or loaded/saved through the HMI. The implemented machine data handling is based on the TF8560 utilities. The PLC code part is split into two classes: containers and components. Containers are integrated into many objects of the Plastic Base Application and serve as a collection object for the data of a file. A class that contains machine data either has its own container or has a component that can be added to a container. The classes with their own container inherit from the class FB_Base Md and provide an interface to it. In the inheritance structure, multiple components (per inheritance level) are added to the container. This also allows the scope of the machine data to be further expanded in the end application. Since the indices of the parameters must not be chosen arbitrarily for this purpose, the parameters are stored in the Plastic Base Application according to a defined scheme. This also ensures that the parameters can be prepared outside the controller in a program that will be provided in the future. Product data / machine data - HMI-Recipe The parameters to be regularly reset for the variation of the production process are summarized under the recipe data. This includes, for example, the set temperatures of the temperature zones, timings, production speeds, etc... The recipe data is managed collectively by the HMI and can be expanded as required in engineering. For more detailed information on recipe management, please refer to the chapter Recipe management [} 398]. 5.7 Project structure The individual components of the project tree are discussed in more detail below. System > License Licenses may be excluded from the project under the following conditions: Number Context Exclusion option TC1200 PLC project / TF2000 Twin CAT HMI Remove manually from the license list and do not use a Twin CAT HMI server. Not recommended, as Plastic Application is primarily designed for Twin CAT HMI. TF5000 Electric NC axes Removing NC task under MOTION. TF5050 Electric NC transformer axes Removing NC transformer axes from the PLC. TF5810 Hydraulic axes Remove the hydraulic axes from the PLC. The Tc3_Plastic Base Application Electric library avoids a required reference TF8540 Temperature control Remove the instance of FB_Temperature from the project. 34 Version: 1.4.0 TF85xx
## Page 35

PLC concept and strategy Number Context Exclusion option TF8550 Plastic HMI Controls Remove manually from the license list and do not remove any Plastic Nu Get packages in the HMI. TF8560 Plastic technology functions / (used consistently in the Plastic Application). System > Tasks The four created tasks follow the following strategies: • Administrative Task - General control tasks of medium priority ◦ Standard cycle time: 10 ms ◦ Calling the HMI <> PLC Recipe communication ◦ Storage and loading routines ◦ Communication commissioning tool of hydraulic axes ◦ Cyclic processing of application routines like: manual functions, process sequence, etc.. • Motion Task - Real-time critical routines ◦ Standard cycle time: 2 ms (= NC task) ◦ Cycle methods of the motion axes ◦ Internal control mechanisms • Temperature Task - Inertial temperature control ◦ Standard cycle time: 25 ms ◦ Calling the temperature control • Sim Task -Simulation ◦ Standard cycle time: 2 ms ◦ Calling the cycle methods of the simulation NOTICE Correct cycle time for temperature control The cycle time of the temperature control should be asynchronous to the frequency of the AC supply voltage. A synchronous cycle time promotes instability of the control! TF85xx Version: 1.4.0 35
## Page 36

PLC concept and strategy System > Real-Time In principle, systems from Twin CAT 3 platform level 50 Performance Plus are the minimum requirement for the Plastic Application. The PLC tasks can be split according to the number of cores and the single core performance of the CPU. For development systems, the project configuration can be adopted; for end devices, the following configurations have been tested in the field: CP/ IPC / CX Restrictions on blow molding application CP2219-1025-0030 (video) None C6030 (Basis) CX2043 CX2033 Restricted use: CX5340 • Integration of further axes not recommended • High ADS query rates not recommended CX5240 Limited recommended for extruder applications. System > Type System The Type System contains the used Event Classes. These Event Classes contain the respective events that are used in the Plastic Application. 36 Version: 1.4.0 TF85xx
## Page 37

PLC concept and strategy Motion All exemplarily implemented NC axes (electrical) are created in the NC task. The designations of the axes are based on the manufacturing significance. PLC > Version The currently used version of the project can be determined as follows: • PLC > PLC > PLC Project > Properties (right click) > Common > Version: TF85xx Version: 1.4.0 37
## Page 38

PLC concept and strategy PLC > Library references The following libraries are installed in the project in addition to some general libraries from the general Twin CAT pool: • Tc2_Pfw Lib_Processing ◦ Temperature control algorithms • Tc3_Plastic Base Application ◦ Collection of application-oriented classes, explained in this documentation • Tc3_Plastic Functions ◦ Abstracted axis interface, inverter axes, actuators and other technology functions • Tc3_Plastic Hydraulic ◦ Hydraulic axes compatible with virtual axis interface • Tc3_Plastic Nc ◦ Electric NC-based axes compatible with the virtual axis interface Error despite existing library For compatibility and maintenance purposes, the versions of the included libraries are fixed. If you have already worked with the mentioned libraries in past versions, you have to install the updated versions. These can be found in the delivered project folder at Dependencies. NOTICE Adaptation to an older version not permitted Do not change the library versions set in the project to an older version. Incompatibilities and unpredictable behavior of the software may occur! 38 Version: 1.4.0 TF85xx
## Page 39

PLC concept and strategy PLC > Code The control code is divided into three main folders. > _Tasks: Instantiation of the runtime and definition of the task calls > Application: Application programs • Axes: Instantiations of the axes • Machine: Instantiations of general machine components • Operation Modes: Operation mode class • Sequence: Sequence program and operation mode-dependent manual functions • GVL application: Instances for sequence program, operation mode, operating data, etc.. • FB_Machine: Main program for linking subprograms ◦ _Build: Build method, called outside the runtime context ◦ _Build_Xyz: Machine type-specific build definition ◦ Alarm Samples: Sample of the use of alarms ◦ Blow Molding: Specific links for blow molding machines ◦ Cyclic: Cycle method, can be regarded as a MAIN program ◦ Experimental: Test method for exemplary test procedures ◦ Grouping Confirm: Handshake for using the FB_Temperature [} 273]. Groups(x) [} 282]. Enable Config Confirmation ◦ Init: Initializes interfaces of the class ◦ Init Trend: Defines the configuration of the FB_Trend Hmi [} 336] instance ◦ Md: Handshake for saving and loading the machine data overview [} 384] ◦ Param Init: Parameter initialization (here for temperature and monitoring) ◦ Reset: Acknowledgement of errors TF85xx Version: 1.4.0 39
## Page 40

PLC concept and strategy ◦ Set HMI: Sets the interface to FB_Machine Hmi ◦ Timer Sample: Sample of the use of timers in the COP programming language • FB_Machine Hmi: HMI elements of the main program • I_Machine Hmi: Interface of the HMI elements of the main program > Version: Automatically generated GVL with the used project version Further information about the PLC code • Class overview [} 42] • Extension by inheritance [} 28] PLC > Sim Plc In the second PLC (Sim Plc) a machine simulation is implemented. This can be connected to the main control via mapping (comparable to the I/O of a machine). This allows the PLC to be implemented without including simulation elements. In addition, simulation can also be extended with the elements of PLC programming. This offers the advantage that the control PLC from project preparation does not have to be adapted to operation with a real machine. Only the mapping to I/O components is required. Switching from simulation <-> real operation The project can be switched from simulation to real operation (and vice versa) via the mapping export/import. This function can be used by right-clicking on the Twin CAT project junction "Mappings". 40 Version: 1.4.0 TF85xx
## Page 41

PLC concept and strategy I/O > Devices > CP22xx_1025 The I/O part of the project includes the mapping of the operating elements of the Blow Molding Beckhoff panel CP2219-1025-0030. The following figure shows how the FB_CP22xx_1025 [} 322] must be connected to the I/O. TF85xx Version: 1.4.0 41
## Page 42

PLC-API - Class overview 6 PLC-API - Class overview 6.1 Alarms - Handling of the Tc3_Event Logger 6.1.1 FB_Alarm Handler The class implements a handling of pending alarms to influence the process sequence. This means, for example, that an alarm with the severity "Error" can be responded to by stopping the machine directly. The handler can also be used to optimize the acknowledgement of alarms: If an alarm occurs again after a Reset() within the Alarm Clearing Delay, it is not cleared. Syntax: FUNCTION_BLOCK FB_Alarm Handler EXTENDS FB_Listener Base2 Properties Name Type Access Initial value Description Alarm Clearing Delay LREAL Get, Set 10 * Time that an alarm may not Cycle Time occur again until it is cleared. FB_Alarm Handler Alarm Critical BOOL Get FALSE A critical alarm is present. Alarm Error BOOL Get FALSE There is an error alarm. Alarm Warning BOOL Get FALSE There is a warning alarm. Alarm Info BOOL Get FALSE There is an information alarm. Error BOOL Get FALSE The handler is in an error state. Tc3_Event Logger. FB_Listener Base2 Further characteristics <> <> <> Implemented by FB_Listener Base2 Methods Name Description Clear Alarms() Confirms and clears all pending alarms. Tc3_Event Logger. FB_Listener Base2 Other methods Implemented by FB_Listener Base2 Interfaces Type Description I_Alarm Handler Standard interface on FB_Alarm Handler I_One Task Interface Runtime interface for a PLC task I_Base Standard interface on FB_Base Further interfaces Implemented by FB_Listener Base2 42 Version: 1.4.0 TF85xx
## Page 43

PLC-API - Class overview Requirements Development Environment Target platform PLC libraries to include Twin CAT 4026 >= v3.1.4026.16 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.12.0.0) Twin CAT 4024 >= v3.1.4024.66 6.1.2 FB_App Message This class is part of the FB_Base class and provides an interface to the Event Logger for almost every Twin CAT 3 Plastic Base Application object. Syntax: FUNCTION_BLOCK FB_App Message EXTENDS FB_Tc Message Methods Name Description Clear Alarm(st Event Entry) Clears a specific alarm. FB_App Message Announce Alarm Arg() [} 44] Announces an alarm that is to be triggered with several arguments. Get Alarm State(st Alarm Entry) Returns the E_Alarm State [} 47] of the transferred alarm. Confirm Alarm(st Event Entry) Acknowledges a specific alarm. Reset() Resets all alarms generated by this instance. Send Alarm() [} 44] Triggers an alarm. Send Equal Message() [} 45] Logs a message in the Event Logger. Send Hresult() [} 46] Logs a message in the Event Logger with the hexadecimal representation of the error code. Send Message() [} 46] Logs a message in Event Logger, unless the message has been sent before. Tc3_Event Logger. FB_Tc Message Other methods Implemented by FB_Tc Message Interfaces Type Description I_App Message Standard interface on FB_App Message. Further interfaces Implemented by FB_Tc Message Requirements Development Environment Target platform PLC libraries to include Twin CAT 4026 >= v3.1.4026.16 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.12.0.0) Twin CAT 4024 >= v3.1.4024.66 TF85xx Version: 1.4.0 43
## Page 44

PLC-API - Class overview 6.1.2.1 Announce Alarm Arg() Announces arguments for an upcoming alarm of the transferred type. The order of the arguments is determined by the order of the calls as follows: 1. Call: fb Message. Announce Alarm Arg(st Event, 'Argument1', TRUE) 2. Call: fb Message. Announce Alarm Arg(st Event, 'Argument2', TRUE) 3. Call: fb Message. Send Alarm(st Event, 'Argument3', TRUE) ð In the event text of st Event, {0} is replaced with 'Argument1', {1} with 'Argument2' and {2} with 'Argument3'. The order of the calls determines which argument is used for which placeholder. Syntax: METHOD Announce Alarm Arg : HRESULT VAR_INPUT st Event Entry: Tc Event Entry; // Tc Event Entry that should receive the announced argument s String: STRING(255); // STRING argument b With Confirm: BOOL; // additional flag to set confirm necessity END_VAR Inputs Name Type Description st Event Entry Tc Event Entry Event from an event configuration. s String STRING(255) Additional information that will be attached to the event. b With Confirm BOOL The event requires an acknowledgement. Outputs Name Type Description Announce Alarm Arg HRESULT Return value with feedback on the success of the execution Requirements Development Environment Target platform PLC libraries to include Twin CAT 4026 >= v3.1.4026.16 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.12.0.0) Twin CAT 4024 >= v3.1.4024.66 6.1.2.2 Send Alarm() Triggers an alarm. Syntax: METHOD Send Alarm : HRESULT VAR_INPUT st Event Entry: Tc Event Entry; // Tc Event Entry to be created and send s String: STRING(255); // additional STRING attribute b With Confirm: BOOL; // additional Flag to set confirm necessity END_VAR 44 Version: 1.4.0 TF85xx
## Page 45

PLC-API - Class overview Inputs Name Type Description st Event Entry Tc Event Entry Event from an event configuration. s String STRING(255) Additional information that will be attached to the event. b With Confirm BOOL The event requires an acknowledgement. Outputs Name Type Description Send Alarm HRESULT Return value with feedback on the success of the execution Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 6.1.2.3 Send Equal Message() Logs a message in the Event Logger. Syntax: METHOD Send Equal Message : HRESULT VAR_INPUT st Event Entry: Tc Event Entry; // Tc Event Entry to be created and send s String: STRING(255); // additional STRING attribute END_VAR Inputs Name Type Description st Event Entry Tc Event Entry Event from an event configuration. s String STRING(255) Additional information that will be attached to the event. Outputs Name Type Description Send Equal Message HRESULT Return value with feedback on the success of the execution. Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) TF85xx Version: 1.4.0 45
## Page 46

PLC-API - Class overview 6.1.2.4 Send Hresult() Logs a message in the Event Logger with the hexadecimal representation of the error code. Syntax: METHOD Send Equal Message : HRESULT VAR_INPUT st Event Entry: Tc Event Entry; // Tc Event Entry to be created and send hr: HRESULT; // Hresult for additional event END_VAR Inputs Name Type Description st Event Entry Tc Event Entry Event from an event configuration. hr HRESULT Error code to be displayed. Outputs Name Type Description Send Hresult HRESULT Return value with feedback on the success of the execution. Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.42 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.6.2) 6.1.2.5 Send Message() Logs a message in Event Logger, unless the message has been sent before. Syntax: METHOD Send Message : HRESULT VAR_INPUT st Event Entry: Tc Event Entry; // Tc Event Entry to be created and send s String: STRING(255); // additional STRING attribute END_VAR Inputs Name Type Description st Event Entry Tc Event Entry Event from an event configuration. s String STRING(255) Additional information that will be attached to the event. 46 Version: 1.4.0 TF85xx
## Page 47

PLC-API - Class overview Outputs Name Type Description Send Message HRESULT Return value with feedback on the success of the execution. Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 6.1.2.6 E_Alarm State Alarm state of an alarm triggered by FB_App Message. Syntax: TYPE E_Alarm State : Tc Event Confirmation State; END_TYPE Values Name Value Description Reset 4 The alarm is currently not active. Not Supported 0 The alarm is active but does not require confirmation. Wait For Confirmation 2 The alarm is active and not yet confirmed. Confirmed 3 The alarm is (still) active, but has already been confirmed. Not Required 1 Alarm is not active Notice This state does not occur when triggered by fb Message. Description is context-related The states described in the table are context-related to the use by FB_App Message [} 43]. The general description of the Tc Event Confirmation State can be found in the Tc3_Event Logger documentation. Requirements Development Environment Target platform PLC libraries to include Twin CAT 4026 >= v3.1.4026.16 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.12.0.0) Twin CAT 4024 >= v3.1.4024.66 6.2 Analog - analog value scaling 6.2.1 FB_Scale Analog Hmi Implements functions for scaling analog values with parameterization via the HMI. Syntax: FUNCTION_BLOCK FB_Scale Analog Hmi EXTENDS FB_Scale Hmi TF85xx Version: 1.4.0 47
## Page 48

PLC-API - Class overview Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Scale Analog Hmi Scaling Electrical Max LREAL Get, Set 10.0 Maximum of the electrical voltage input. Scaling Electrical Min LREAL Get, Set 0.0 Minimum of the electrical voltage input. Scaling Raw Max LREAL Get, Set 32767 Maximum of the raw analog measured value (bit). Scaling Raw Min LREAL Get, Set 0 Minimum of the raw analog measured value (bit). Scaling Value Max LREAL Get, Set 100.0 Maximum of the scaled end unit. Scaling Value Min LREAL Get, Set 0.0 Minimum of the scaled end unit. Unit Group Electrical STRING(64) Get, Set ‘‘ Physical quantity in which the electrical measurement is measured. Unit Group Value STRING(64) Get, Set ‘‘ Physical quantity in which the scaled end value is measured. FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Methods Name Description Reset() Resets the error state of the class. FB_Scale Analog Hmi Electrical To Raw(f Electrical) Scales the electrical voltage to the raw analog measured value (bit/ numeric). Electrical To Value(f Electrical) Scales the electrical voltage to the unit of the final scaling. Raw To Electrical(n Raw) Scales the raw analog measured value (bit/numeric) to the electrical voltage. Raw To Value(n Raw) Scales the raw analog measured value (bit/numeric) to the unit of the final scaling. Value To Electrical(f Value) Scales the unit of the final scaling to the electrical voltage. Value To Raw(f Value) Scales the unit of the final scaling to the raw analog measured value (bit/ numeric). FB_Scale Hmi [PROTECTED] Xto Y(...) Scales a value x to a value y, using the minimum and maximum value of both scales. FB_Base Hmi Init(ip Base) Default initialization method to pass the base class. 48 Version: 1.4.0 TF85xx
## Page 49

PLC-API - Class overview Interfaces Type Description I_Base Standard interface on FB_Base. I_Scale Analog Hmi Standard interface on FB_Scale Annalog Hmi. I_Scale Analog Scalings Interface to the scaling minima and maxima. I_Base Hmi Standard interface on FB_Base Hmi. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.8.1.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.2.2 FB_Monitoring Implements a monitoring function for analog signals. The threshold values for monitoring can be set variably via the HMI object [} 53]. Syntax: FUNCTION_BLOCK FB_Monitoring EXTENDS FB_Base Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Monitoring Attachable Md Interface I_Md Component Get <Local> Interface to the machine data component Auto Clear Alarms BOOL Get, Set FALSE Triggered alarms are automatically cleared after the cause has been eliminated. Enable Alarms BOOL Get, Set FALSE Falling below/exceeding triggers pre-implemented TC3 Event Logger alarms. Input I_Input Base Get, Set NULL Interface of the analog signal to be read Value LREAL Get, Set 0 Returns the scaled analog value. Can be set if no input has been assigned. FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. TF85xx Version: 1.4.0 49
## Page 50

PLC-API - Class overview Name Type Access Initial value Description Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Methods Name Description Reset() Resets the error state of the class. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Possible events ID Description Alarm/Message 200 Writing a property for this class is not possible Message 300x Exceeding/falling below the set tolerances Alarm Interfaces Type Description I_Base Standard interface on FB_Base. I_Monitoring Standard interface on FB_Monitoring I_Attachable Md Interface Interface for containerless machine data components I_One Task Interface Runtime interface for a PLC task I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.42 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.6.0) 6.2.2.1 FB_Monitoring Temp 50 Version: 1.4.0 TF85xx
## Page 51

PLC-API - Class overview Implements monitoring of a temperature channel with direct connection to TF8540. The adjustable limits are synchronized with the temperature zone. Syntax: FUNCTION_BLOCK FB_Monitoring Temp EXTENDS FB_Monitoring Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Monitoring Temp Temp Channel I_Temp Channel [} 291] Get, Set NULL Assigned temperature channel FB_Monitoring Attachable Md Interface I_Md Component Get <Local> Interface to the machine data component Auto Clear Alarms BOOL Get, Set FALSE Triggered alarms are automatically cleared after the cause has been eliminated. Enable Alarms BOOL Get, Set FALSE Falling below/exceeding triggers pre-implemented TC3 Event Logger alarms. Input I_Input Base Get, Set NULL Interface of the analog signal to be read Value LREAL Get, Set 0 Returns the scaled analog value. Can be set if no input has been assigned. FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Interfaces Type Description I_Base Standard interface on FB_Base. I_Monitoring Temp Standard interface on FB_Monitoring Temp I_Monitoring Standard interface on FB_Monitoring I_Attachable Md Interface Interface for containerless machine data components I_One Task Interface Runtime interface for a PLC task I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Type Description I_Monitoring Temp Standard interface on FB_Monitoring Temp TF85xx Version: 1.4.0 51
## Page 52

PLC-API - Class overview Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.42 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.6.0) 6.2.2.2 FB_Monitoring IPC Implements the monitoring of the CPU temperature of a Beckhoff IPC. Syntax: FUNCTION_BLOCK FB_Monitoring IPC EXTENDS FB_Monitoring Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Monitoring IPC Refresh Rate LREAL Get, Set 5.0 Rate [s] of the asynchronous request of the IPC value FB_Monitoring Attachable Md Interface I_Md Component Get <Local> Interface to the machine data component Auto Clear Alarms BOOL Get, Set FALSE Triggered alarms are automatically cleared after the cause has been eliminated. Enable Alarms BOOL Get, Set FALSE Falling below/exceeding triggers pre-implemented TC3 Event Logger alarms. Input I_Input Base Get, Set NULL Interface of the analog signal to be read Value LREAL Get, Set 0 Returns the scaled analog value. Can be set if no input has been assigned. FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Interfaces Type Description I_Base Standard interface on FB_Base. I_Monitoring IPC Standard interface on FB_Monitoring IPC I_Monitoring Standard interface on FB_Monitoring 52 Version: 1.4.0 TF85xx
## Page 53

PLC-API - Class overview Type Description I_Attachable Md Interface Interface for containerless machine data components I_One Task Interface Runtime interface for a PLC task I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 6.2.3 FB_Monitoring Hmi HMI parallel class to the FB_Monitoring. Syntax: FUNCTION_BLOCK FB_Monitoring Hmi EXTENDS FB_Scale Analog Hmi Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Monitoring Hmi Actual Value LREAL Get, Set 0.0 Current value of the monitored analog signal. Actual Value Max LREAL Get, Set 0.0 Maximum of the current value. Actual Value Min LREAL Get, Set 0.0 Minimum of the current value. Actual Value Reset BOOL Get, Set FALSE A TRUE resets the determined minimum and maximum of the current value. Exceeded Limit HH BOOL Get, Set FALSE Indicator for exceeding the critical limit value Limit HH. Exceeded Limit H BOOL Get, Set FALSE Indicator for exceeding the warning limit value Limit H. Exceeded Limit L BOOL Get, Set FALSE Indicator for falling below the warning limit value Limit L. Exceeded Limit LL BOOL Get, Set FALSE Indicator for falling below the critical limit value Limit LL. Limit HH LREAL Get, Set 80.0 Upper critical limit value to be monitored. Limit H LREAL Get, Set 60.0 Upper warning limit value to be monitored. Limit L LREAL Get, Set 20.0 Lower warning limit value to be monitored. Limit LL LREAL Get, Set 10.0 Lower critical limit value to be monitored. FB_Scale Analog Hmi TF85xx Version: 1.4.0 53
## Page 54

PLC-API - Class overview Name Type Access Initial value Description Scaling Electrical Max LREAL Get, Set 10.0 Maximum of the electrical voltage input. Scaling Electrical Min LREAL Get, Set 0.0 Minimum of the electrical voltage input. Scaling Raw Max LREAL Get, Set 32767 Maximum of the raw analog measured value (bit). Scaling Raw Min LREAL Get, Set 0 Minimum of the raw analog measured value (bit). Scaling Value Max LREAL Get, Set 100.0 Maximum of the scaled end unit. Scaling Value Min LREAL Get, Set 0.0 Minimum of the scaled end unit. Unit Group Electrical STRING(64) Get, Set ‘‘ Physical quantity in which the electrical measurement is measured. Unit Group Value STRING(64) Get, Set ‘‘ Physical quantity in which the scaled end value is measured. FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Methods Name Description Reset() Resets the error state of the class. FB_Scale Analog Hmi Electrical To Raw(f Electrical) Scales the electrical voltage to the raw analog measured value (bit/ numeric). Electrical To Value(f Electrical) Scales the electrical voltage to the unit of the final scaling. Raw To Electrical(n Raw) Scales the raw analog measured value (bit/numeric) to the electrical voltage. Raw To Value(n Raw) Scales the raw analog measured value (bit/numeric) to the unit of the final scaling. Value To Electrical(f Value) Scales the unit of the final scaling to the electrical voltage. Value To Raw(f Value) Scales the unit of the final scaling to the raw analog measured value (bit/ numeric). FB_Scale Hmi [PROTECTED] Xto Y(...) Scales a value x to a value y, using the minimum and maximum value of both scales. FB_Base Hmi Init(ip Base) Default initialization method to pass the base class. Interfaces Type Description I_Base Standard interface on FB_Base. I_Monitoring Hmi Standard interface on FB_Monitoring Hmi. 54 Version: 1.4.0 TF85xx
## Page 55

PLC-API - Class overview Type Description I_Scale Analog Hmi Standard interface on FB_Scale Annalog Hmi. I_Scale Analog Scalings Interface to the scaling minima and maxima. I_Base Hmi Standard interface on FB_Base Hmi. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 6.2.4 FB_Setpoints Implements scaling of analog setpoints that can be adjusted via the HMI. Syntax: FUNCTION_BLOCK FB_Setpoints EXTENDS FB_Base Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Setpoints Attachable Md Interface I_Md Component Get <Local> Interface to the machine data component Output I_Output Base Get, Set NULL Interface of the analog output to be assigned FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Methods Name Description Reset() Resets the error state of the class. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. TF85xx Version: 1.4.0 55
## Page 56

PLC-API - Class overview Name Description Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Interfaces Type Description I_Base Standard interface on FB_Base. I_Setpoints Standard interface on FB_Setpoints I_Attachable Md Interface Interface for containerless machine data components I_One Task Interface Runtime interface for a PLC task I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.42 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.6.0) 6.2.5 FB_Setpoints Hmi HMI parallel class to the FB_Setpoints. Syntax: FUNCTION_BLOCK FB_Setpoints Hmi EXTENDS FB_Scale Analog Hmi Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Setpoints Hmi Setpoint LREAL Get, Set 25.0 Setpoint to be output FB_Scale Analog Hmi Scaling Electrical Max LREAL Get, Set 10.0 Maximum of the electrical voltage input. Scaling Electrical Min LREAL Get, Set 0.0 Minimum of the electrical voltage input. Scaling Raw Max LREAL Get, Set 32767 Maximum of the raw analog measured value (bit). Scaling Raw Min LREAL Get, Set 0 Minimum of the raw analog measured value (bit). 56 Version: 1.4.0 TF85xx
## Page 57

PLC-API - Class overview Name Type Access Initial value Description Scaling Value Max LREAL Get, Set 100.0 Maximum of the scaled end unit. Scaling Value Min LREAL Get, Set 0.0 Minimum of the scaled end unit. Unit Group Electrical STRING(64) Get, Set ‘‘ Physical quantity in which the electrical measurement is measured. Unit Group Value STRING(64) Get, Set ‘‘ Physical quantity in which the scaled end value is measured. FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Methods Name Description Reset() Resets the error state of the class. FB_Scale Analog Hmi Electrical To Raw(f Electrical) Scales the electrical voltage to the raw analog measured value (bit/ numeric). Electrical To Value(f Electrical) Scales the electrical voltage to the unit of the final scaling. Raw To Electrical(n Raw) Scales the raw analog measured value (bit/numeric) to the electrical voltage. Raw To Value(n Raw) Scales the raw analog measured value (bit/numeric) to the unit of the final scaling. Value To Electrical(f Value) Scales the unit of the final scaling to the electrical voltage. Value To Raw(f Value) Scales the unit of the final scaling to the raw analog measured value (bit/ numeric). FB_Scale Hmi [PROTECTED] Xto Y(...) Scales a value x to a value y, using the minimum and maximum value of both scales. FB_Base Hmi Init(ip Base) Default initialization method to pass the base class. Interfaces Type Description I_Base Standard interface on FB_Base. I_Setpoints Hmi Standard interface on FB_Setpoints Hmi. I_Scale Analog Hmi Standard interface on FB_Scale Annalog Hmi. I_Scale Analog Scalings Interface to the scaling minima and maxima. I_Base Hmi Standard interface on FB_Base Hmi. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. TF85xx Version: 1.4.0 57
## Page 58

PLC-API - Class overview Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 6.3 Base - Base classes 6.3.1 FB_Base FB_Base is the base class for most of the available classes of the Plastic Base Application. Internal functions: • Standard Error and Reset • Creation of an instance default name • Provision of the event interface Syntax: FUNCTION_BLOCK FB_Base Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Methods Name Description Reset() Resets the error state of the class. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() 58 Version: 1.4.0 TF85xx
## Page 59

PLC-API - Class overview Name Description [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Interfaces Type Description I_Base Standard interface on FB_Base. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.3.1.1 E_Base State Base State for the state of a Plastic Base Application object. Syntax: {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Base State : ( e Failed := -9999, // Init routine failed e Reinit := -100, // Object has to be reinitialized e Not Handled := 0, // It starts Here e Init, // FB_Init is succeeded e Ready, // Init is succeeded e Idle, // Param Init is succeeded e Busy, // implementation usable busy flag e Error := 1000 // implementation usable error flag ); END_TYPE Values Name Description e Failed Init procedure failed. e Reinit Object must be re-initialized. e Not Handled Object was not handled. e Init FB_init was executed successfully. e Ready Init was executed successfully. e Idle Param Init was executed successfully. e Busy Implementation-available busy flag. e Error Implementation-available error flag. Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) TF85xx Version: 1.4.0 59
## Page 60

PLC-API - Class overview 6.3.2 FB_Base Hmi FB_Base Hmi is the base class of all HMI parallel classes. The provided Init(ip Base) method predefines that the parallel object is passed via the I_Base interface. Syntax: FUNCTION_BLOCK FB_Base Hmi EXTENDS FB_Base Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Methods Name Description Reset() Resets the error state of the class. FB_Base Hmi Init(ip Base) Default initialization method to pass the base class. Interfaces Type Description I_Base Standard interface on FB_Base. I_Base Hmi Standard interface on FB_Base Hmi. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 6.3.3 FB_Base Md 60 Version: 1.4.0 TF85xx
## Page 61

PLC-API - Class overview Extends the base class FB_Base by the functions of the machine data handling. The structure of the machine data is explained in more detail in the chapter Machine data [} 115]. Syntax: FUNCTION_BLOCK FB_Base Md EXTENDS FB_Base Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Base Md Machine Data I_Md Base Container Get - Interface for machine data handling. [} 117] FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Methods Name Description Reset() Resets the error state of the class. FB_Base Md [PROTECTED] Add Md Comp() Adds a component of type I_Md Component to the machine data container. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Cycle methods Name Description Cyclic() Cycle method - Call once per PLC cycle (default 10 ms) TF85xx Version: 1.4.0 61
## Page 62

PLC-API - Class overview Interfaces Type Description I_Base Standard interface on FB_Base. I_Base Md Standard interface on FB_Base Md. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 6.3.4 FB_Base Md Hmi HMI class in parallel with the base machine data class FB_Base Md. Is necessary for loading and saving the machine data via the HMI. Syntax: FUNCTION_BLOCK FB_Base Md Hmi EXTENDS FB_Base Hmi Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Local HMI variables Name Data type Description fb Param Handle FB_Md Handle Hmi Handling interface for loading and saving machine data. Methods Name Description Reset() Resets the error state of the class. FB_Base Hmi Init(ip Base) Default initialization method to pass the base class. FB_Base 62 Version: 1.4.0 TF85xx
## Page 63

PLC-API - Class overview Name Description Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Interfaces Type Description I_Base Standard interface on FB_Base. I_Base Md Hmi Standard interface on FB_Base Md Hmi. I_Base Hmi Standard interface on FB_Base Hmi. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 6.4 Blow Molding - Blow molding specific classes 6.4.1 FB_Blowing Implements a typical blowing sequence in two blowing phases with adjustable pressure. Syntax: FUNCTION_BLOCK FB_Blowing EXTENDS FB_Base Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Blowing Attachable Md Inteface I_Md Component Get <Local> Interface to the machine data component for saving the blow valve analog scaling. TF85xx Version: 1.4.0 63
## Page 64

PLC-API - Class overview Name Type Access Initial value Description Done BOOL Get FALSE The blowing process was carried out successfully. Enable Output BOOL Get, Set FALSE Releases the output of the blowing pressure. Output I_Output Base Get, Set NULL Represents the interface to the output device. Analog and digital output elements can be connected. FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Methods Name Description Reset() Resets the error state of the class. FB_Blowing Start() Starts the blowing process. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Procedure controlling methods (FB_Adaptable Sequence [} 317]) Name Description Blow Seq() [} 65] Procedure for blowing pressure output Interfaces Type Description I_Base Standard interface on FB_Base. I_Blowing Standard interface on FB_Blowing I_Attachable Md Interface Interface for containerless machine data components I_One Task Interface Runtime interface for a PLC task. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. 64 Version: 1.4.0 TF85xx
## Page 65

PLC-API - Class overview Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.8.1.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.4.1.1 Blow Seq() Instance type Instance Name Master fb Blow Seq Slaves a Base Seq Members[E_Blowing Sequence.e Length] State diagram: Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 6.4.2 FB_Interval Blowing Extends the FB_Blowing class with an alternating blowing interval during the main blowing phase. Syntax: FUNCTION_BLOCK FB_Interval Blowing EXTENDS FB_Blowing Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Interval Blowing Enable Interval BOOL Get, Set FALSE Turns on the interval extension. FB_Blowing Attachable Md Inteface I_Md Component Get <Local> Interface to the machine data component for saving the blow valve analog scaling. TF85xx Version: 1.4.0 65
## Page 66

PLC-API - Class overview Name Type Access Initial value Description Done BOOL Get FALSE The blowing process was carried out successfully. Enable Output BOOL Get, Set FALSE Releases the output of the blowing pressure. Output I_Output Base Get, Set NULL Represents the interface to the output device. Analog and digital output elements can be connected. FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Methods Name Description Reset() Resets the error state of the class. FB_Blowing Start() Starts the blowing process. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Procedure controlling methods (FB_Adaptable Sequence [} 317]) Name Description Blow Seq() [} 67] Procedure for blowing pressure output (advanced) Interfaces Type Description I_Base Standard interface on FB_Base. I_Interval Blowing Standard interface on FB_Interval Blowing I_Blowing Standard interface on FB_Blowing I_Attachable Md Interface Interface for containerless machine data components I_One Task Interface Runtime interface for a PLC task. I_Base Empty For extension without standard interface. 66 Version: 1.4.0 TF85xx
## Page 67

PLC-API - Class overview Type Description I_Base Dev Covers all methods and properties of the base class. Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 6.4.2.1 Blow Seq() Instance type Instance Name Master fb Blow Seq Slaves fb State Blowing fb State Interval1 fb State Inverval2 State diagram: Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 6.4.3 FB_Blowpin Implements blowpin-specific functions. Syntax: FUNCTION_BLOCK FB_Blowpin EXTENDS FB_Ptp Motion Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Blowpin TF85xx Version: 1.4.0 67
## Page 68

PLC-API - Class overview Name Type Access Initial value Description Disable Holding Torque1 BOOL Get, Set FALSE Locks the holding torque for NC blowpin axes. Alternative: . Use Clamping FB_Ptp Motion Clamp Only Last Seg BOOL Get, Set TRUE Clamping is only possible in the last segment. Ptp Move Finished BOOL Get FALSE The PTP movement was executed successfully. Stack Segment Count BOOL Get, Set TRUE Aborted segments are taken into account in the subsequent command. Use Clamping BOOL Get, Set TRUE Commanded PTP movements should use the set clamping. Use Manual Speed BOOL Get, Set FALSE Commanded PTP movements should be executed at manual speed. FB_Axis Axis I_Axis Base Get NULL Interface to the assigned TF8560 axis. Referencing I_Referencing [} 189] Get <Local> Functions for referencing the axis. FB_Motion Motion I_Motion Base Get NULL Interface to the assigned TF8560 motion object. Error Alarm TL Tc Event Severity Get, Set Error (3) Severity of the alarm that the axis triggers in the error state. Specific I_Motion Specific Get - Technology-specific functions/ values [} 180] FB_Base Md Machine Data I_Md Base Container Get - Interface for machine data handling. [} 117] FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > 1 Obsolete Methods Name Description Reset() Resets the error state of the class. FB_Ptp Motion [PROTECTED] Forms the difference of two segment positions. Cmp Seg Pos(i Seg1, i Seg2) Continue Ptp(b Command) Continues a paused Move Ptp() command. Move Ptp() [} 241] Starts/stops a PTP movement with the parameterization from the HMI. Move To Point() [} 241] Starts/stops a point movement with parameterization from the HMI. 68 Version: 1.4.0 TF85xx
## Page 69

PLC-API - Class overview Name Description Reset Ptp() Resets the saved progress of the Move Ptp() command. FB_Axis Set Position(b Command) Setting the axis position with the FB_Axis Hmi. Setposition. FB_Motion Check Axis State() [} 180] Checks the current state of the axis. Feed Enable(b Feed Enable P, Enable of a direction of movement. b Feed Enable N) Jog Negative(b Command) Starts/stops a jog movement in negative direction. Jog Positive(b Command) Starts/stops a jog movement in positive direction. Power(b Command) Switching on the drive control. Set Motion Ref(i Motion) Assignment method for the TF8560 motion object. FB_Base Md [PROTECTED] Add Md Comp() Adds a component of type I_Md Component to the machine data container. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Procedure controlling methods (FB_Adaptable Sequence [} 317]) Name Description Ptp Seq() [} 70] Procedure for loading a PTP movement (extended). Possible events ID Description Alarm/Message 11 Object error state Alarm 21 Command rejected Alarm 200x PTP command error Message 10 Axis Errors Alarm 20 Axis command rejected Alarm Machine data Component Description Index range Number of in- stances FB_Md File Info [} 133] File information 0x0000 Fxxx 1 FB_Md Blowpin [} 127] Parameters for blow pin applications 0x0001 0xxx 1 FB_Md Ptp Motion [} 138] Parameters for linear motion 0x0000 20xx 1 TF85xx Version: 1.4.0 69
## Page 70

PLC-API - Class overview Component Description Index range Number of in- stances FB_Md Axis [} 133] General axis parameters 0x0000 0xxx 1 0x0000 1xxx FB_Md Nc [} 137] NC specific parameters, only if 0x0000 22xx 1 (0) Specific. Nc. Is Nc = TRUE FB_Md Trafo [} 156] Transformation-specific parameters, only if 0x0000 23xx 1 (0) Specific. Trafo. Is Trafo = TRUE FB_Md Homing [} 135] Parameters for homing the axis 0x0000 3xxx 1 Interfaces Type Description I_Base Standard interface on FB_Base. I_Blowpin Standard interface on FB_Blowpin. I_Ptp Motion Standard interface on FB_Ptp Motion. I_Axis Standard interface on FB_Axis. I_Motion Standard interface on FB_Motion I_Two Task Interface Runtime interface for two PLC tasks. I_Base Md Standard interface on FB_Base Md. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.4.3.1 Ptp Seq() Blowpin PTP variant only active for NC axes fb Seq Provide Clamping is only inserted when using an NC axis. For hydraulic axes, the normal clamping of the FB_Ptp Motion class is used. Instance type Instance Name Master fb Ptp Seq Slaves fb Seq Provide Clamping State diagram: 70 Version: 1.4.0 TF85xx
## Page 71

PLC-API - Class overview Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.42 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.4) 6.4.4 FB_Blowpin Hmi HMI parallel class of FB_Blowpin class. Syntax: FUNCTION_BLOCK FB_Blowpin Hmi EXTENDS FB_Ptp Motion Hmi Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Blowpin Hmi Clamping Duration Max LREAL Get, Set 30.0 [s] Maximum adjustable time for clamping. Clamping Ramp Max LREAL Get, Set 5.0 Maximum adjustable ramp between Holding Torque1 and Holding Torque2. Holding Torque1 LREAL Get, Set 80.0 [%] Initial holding torque during clamping. Holding Torque2 LREAL Get, Set 20.0 [%] Second, downstream holding torque during clamping. Holding Torque Ramp1 LREAL Get, Set 1.0 Reserved (theoretical ramp to the initial holding torque) Holding Torque Ramp2 LREAL Get, Set 1.0 Transition ramp between the initial and second holding torque. Holding Torque Time1 LREAL Get, Set 1.5 [s] Duration of the initial holding torque. Holding Torque Time2 LREAL Get, Set 10.0 [s] Duration of the second holding torque. Manual Up Down I_Manual Function Hmi Get <Local> HMI for the implementation of a manual function. [} 163] Use Holding Torque BOOL Get, Set FALSE Reserved FB_Ptp Motion Hmi Active Move INT Get, Set 0 Index of the active cluster. Active Segment INT Get, Set 0 Index of the active segment. Axis Move REFERENCE TO Get <Local> Motion configuration object. FB_Axis Move Hmi [} 245] Enable Recipe BOOL Get, Set FALSE Enables recipe handling via I_Recipe [} 267]. FB_Axis Hmi Encoder Zero Shift LREAL Get, (Set) 0.0 Zero offset shift of the axis. TF85xx Version: 1.4.0 71
## Page 72

PLC-API - Class overview Name Type Access Initial value Description Limiting Reference LREAL Get 100.0 [%] Reference value (maximum) for commanded limiting values (pressure or torque limit). Max Acceleration LREAL Get 0.0 Maximum acceleration of the axis. Max Deceleration LREAL Get 0.0 Maximum deceleration of the axis. Max Jerk LREAL Get 0.0 Maximum jerk of the axis. Max Position LREAL Get 0.0 Maximum position of the axis. Max Velocity LREAL Get 0.0 Maximum velocity of the axis. Min Postion LREAL Get 0.0 Minimum position of the axis. Min Velocity LREAL Get 0.0 Minimum velocity of the axis. Referencing I_Referencing Hmi Get <Local> Parameter sets and commands for referencing the [} 196] axis. Set Position LREAL Get, Set 0.0 Position used when calling FB_Axis [} 187]. Set Position(). Unit Group STRING(64) Get, Set ‘Length‘ Physical quantity with which the axis is parameterized and operated. FB_Motion Hmi Act Position LREAL Get 0.0 Current position of the connected motion object Act Velocity LREAL Get 0.0 Current velocity of the connected motion object Jog Limiting Negative LREAL Get, Set 0.0 Limitation of the jog command via the FB_Motion [} 178]. Jog Negative() method Ignored for operation with an actuator. Jog Limiting Positive LREAL Get, Set 0.0 Limitation of the jog command via the FB_Motion [} 178]. Jog Positive() method Ignored for operation with an actuator. Jog Velocity Negative LREAL Get, Set 0.0 Velocity of the jog command via the FB_Motion [} 178]. Jog Negative() method Ignored for operation with an actuator. Jog Velocity Positive LREAL Get, Set 0.0 Velocity of the jog command via the FB_Motion [} 178]. Jog Negative() method Ignored for operation with an actuator. Manual Power I_Manual Function Hmi Get, Set <Local> Interface for a manual function to switch on the motion object. [} 163] Specific REFERENCE TO Get <Local> Access to the technology- FB_Motion Specific Hmi specific functions FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. 72 Version: 1.4.0 TF85xx
## Page 73

PLC-API - Class overview Name Type Access Initial value Description Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Local HMI variables Name Data type Description fb Param Handle FB_Md Handle Hmi Handling interface for loading and saving machine data. FB_Blowpin Hmi fb Manual Up Down FB_Manual Function Hmi HMI for the implementation of a manual function. [} 163] fb Param Blowpin FB_Md Blowpin Hmi Entries in the HMI parameter list under blow pin FB_Ptp Motion Hmi a Recipe ARRAY[] OF Structured recipe values for the motion configuration. FB_Move Cluster Recipe [} 267] fb Axis Move FB_Axis Move Hmi [} 245] Motion configuration object. fb Param Ptp Motion FB_Md Ptp Motion Hmi Entries in the HMI parameter list under Linear motion. FB_Axis Hmi fb Param Axis FB_Md Axis Hmi Entries in the HMI parameter list under Axis. fb Param Homing FB_Md Homing Hmi Entries in the HMI parameter list under Homing. fb Referencing FB_Referencing Hmi Parameter sets and commands for referencing. FB_Motion Hmi fb Manual Power FB_Manual Function Hmi Interface for a manual function to switch on the motion object. [} 163] fb Specific FB_Motion Specific Hmi Technology-specific functions of the motion object. Methods Name Description Reset() Resets the error state of the class. FB_Ptp Motion Hmi Moves(x) Returns an interface to the x-th Move-Cluster [} 246]. FB_Base Hmi Init(ip Base) Default initialization method to pass the base class. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() TF85xx Version: 1.4.0 73
## Page 74

PLC-API - Class overview Name Description [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Exceptions avoidance The list access functions (e.g. Channels(x), Groups(x), etc...) return a pseudo variable if the requested index is invalid. In addition, a message is thrown in the Event Logger. Interfaces Type Description I_Base Standard interface on FB_Base. I_Blowpin Hmi Standard interface on FB_Blowpin Hmi. I_Ptp Motion Hmi Standard interface on FB_Ptp Motion Hmi. I_Recipe Interface for managing structured recipe values. I_Axis Hmi Standard interface on FB_Axis Hmi. I_Motion Hmi Standard interface on FB_Motion Hmi. I_Base Md Hmi Standard interface on FB_Base Md Hmi. I_Base Hmi Standard interface on FB_Base Hmi. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.4.5 FB_Blow Molding Extruder Implements specific functions for extruders in the blow molding process. Syntax: FUNCTION_BLOCK FB_Blow Molding Extruder EXTENDS FB_Extruder Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Blow Molding Extruder Parison Length Control I_Parison Length Control Get - Interface to the integrated parison length control [} 77] FB_Extruder Guiding Value LREAL Get 0.0 Contains the current turn rate for a master/slave connection of two FB_Extruder objects. 74 Version: 1.4.0 TF85xx
## Page 75

PLC-API - Class overview Name Type Access Initial value Description Master Extruder I_Extruder Get, Set NULL Used to assign a master extruder. FB_Axis Axis I_Axis Base Get NULL Interface to the assigned TF8560 axis. Referencing I_Referencing [} 189] Get <Local> Functions for referencing the axis. FB_Motion Motion I_Motion Base Get NULL Interface to the assigned TF8560 motion object. Error Alarm TL Tc Event Severity Get, Set Error (3) Severity of the alarm that the axis triggers in the error state. Specific I_Motion Specific Get - Technology-specific functions/ values [} 180] FB_Base Md Machine Data I_Md Base Container Get - Interface for machine data handling. [} 117] FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > 1 Obsolete Methods Name Description Reset() Resets the error state of the class. FB_Extruder Do Basic Rpm(b Execute) Starts a rotary motion with the base speed set in the HMI. Do Nominal Rpm(b Execute) Starts a rotary motion at the production speed set in the HMI. Do Turnrate Down(b Execute) Reduces the speed (continuously). Do Turnrate Up(b Execute) Increases the speed (continuously). FB_Axis Set Position(b Command) Setting the axis position with the FB_Axis Hmi. Setposition. FB_Motion Check Axis State() [} 180] Checks the current state of the axis. Feed Enable(b Feed Enable P, Enable of a direction of movement. b Feed Enable N) Jog Negative(b Command) Starts/stops a jog movement in negative direction. Jog Positive(b Command) Starts/stops a jog movement in positive direction. Power(b Command) Switching on the drive control. Set Motion Ref(i Motion) Assignment method for the TF8560 motion object. FB_Base Md [PROTECTED] Add Md Comp() Adds a component of type I_Md Component to the machine data container. FB_Base TF85xx Version: 1.4.0 75
## Page 76

PLC-API - Class overview Name Description Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() 1 Obsolete Procedure controlling methods (FB_Adaptable Sequence [} 317]) Name Description Power States() [} 234] Procedure for executing the continuous rotary motion Possible events ID Description Alarm/Message 11 Object error state Alarm 21 Command rejected Alarm 100x Axis switch on/off failed. Message 5000 Start of constant feed (Velocity Feed) failed. Message 10 Axis Errors Alarm 20 Axis command rejected Alarm Machine data Component Description Index range Number of in- stances FB_Md File Info [} 133] File information 0x0000 Fxxx 1 FB_Md Continuous Motio Parameters for continuous motion 0x0000 24xx 1 n [} 132] FB_Md Axis [} 133] General axis parameters 0x0000 0xxx 1 0x0000 1xxx FB_Md Nc [} 137] NC specific parameters, only if 0x0000 22xx 1 (0) Specific. Nc. Is Nc = TRUE FB_Md Trafo [} 156] Transformation-specific parameters, only if 0x0000 23xx 1 (0) Specific. Trafo. Is Trafo = TRUE FB_Md Homing [} 135] Parameters for homing the axis 0x0000 3xxx 1 Interfaces Type Description I_Base Standard interface on FB_Base. I_Blow Molding Extruder Standard interface on FB_Blow Molding Extruder 76 Version: 1.4.0 TF85xx
## Page 77

PLC-API - Class overview Type Description I_Extruder Standard interface on FB_Extruder. I_Axis Standard interface on FB_Axis. I_Motion Standard interface on FB_Motion I_Two Task Interface Runtime interface for two PLC tasks. I_Base Md Standard interface on FB_Base Md. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 6.4.5.1 FB_Parison Length Control Implements parison length control in the typical use case of the blow molding process. Syntax: FUNCTION_BLOCK FB_Parison Length Control EXTENDS FB_Base Properties Name Type Access Initial value Description Photocell BOOL Set FALSE Input for the signal of the photocell Turnrate Down BOOL Get FALSE Control output for lowering the turnrate Turnrate Up BOOL Get FALSE Control output for raising the turnrate Wtc Start BOOL Get, Set FALSE Input signal for the start of a new cycle Methods Name Description Activate() Activates the parison length control. Interfaces Type Description I_Parison Length Control Standard interface on FB_Parison Length Control Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) TF85xx Version: 1.4.0 77
## Page 78

PLC-API - Class overview 6.4.6 FB_Blow Molding Extruder Hmi HMI parallel class of FB_Blow Molding Extruder class. Syntax: FUNCTION_BLOCK FB_Blow Molding Extruder Hmi EXTENDS FB_Extruder Hmi Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Blow Molding Extruder Hmi Parison Length Control H I_Parison Length Contro Get <Local> HMI for parison length control mi l Hmi FB_Extruder Hmi Base Turnrate LREAL Get, Set 20.0 Basic turnrate, commanded by FB_Extruder [} 231]. Do Basic Rpm(). Do Basic Rpm BOOL Get, Set FALSE Placeholder: Control signal for ramping to basic turnrate. The signal must be processed by the application. Do Nominal Rpm BOOL Get, Set FALSE Placeholder: Control signal for ramping to production turnrate. The signal must be processed by the application. Do Turnrate Down BOOL Get, Set FALSE Placeholder: Control signal for jog-driven turnrate reduction. The signal must be processed by the application. Do Turnrate Up BOOL Get, Set FALSE Placeholder: Control signal for jog-driven turnrate increase. The signal must be processed by the application. Gear Factor LREAL Get, Set 1.5 Gear factor for operation as a slave extruder. Production Turnrate LREAL Get, Set 150.0 Production turnrate, commanded by FB_Extruder [} 231]. Do Basic Rpm(). Ramp Time LREAL Get, Set 60.0 Time required by the extruder to ramp from 0 to maximum velocity. Set Velocity LREAL Get 0.0 Set velocity of the extruder, which is specified by the setpoint generation. FB_Axis Hmi 78 Version: 1.4.0 TF85xx
## Page 79

PLC-API - Class overview Name Type Access Initial value Description Encoder Zero Shift LREAL Get, (Set) 0.0 Zero offset shift of the axis. Limiting Reference LREAL Get 100.0 [%] Reference value (maximum) for commanded limiting values (pressure or torque limit). Max Acceleration LREAL Get 0.0 Maximum acceleration of the axis. Max Deceleration LREAL Get 0.0 Maximum deceleration of the axis. Max Jerk LREAL Get 0.0 Maximum jerk of the axis. Max Position LREAL Get 0.0 Maximum position of the axis. Max Velocity LREAL Get 0.0 Maximum velocity of the axis. Min Postion LREAL Get 0.0 Minimum position of the axis. Min Velocity LREAL Get 0.0 Minimum velocity of the axis. Referencing I_Referencing Hmi Get <Local> Parameter sets and commands for referencing the [} 196] axis. Set Position LREAL Get, Set 0.0 Position used when calling FB_Axis [} 187]. Set Position(). Unit Group STRING(64) Get, Set ‘Length‘ Physical quantity with which the axis is parameterized and operated. FB_Motion Hmi Act Position LREAL Get 0.0 Current position of the connected motion object Act Velocity LREAL Get 0.0 Current velocity of the connected motion object Jog Limiting Negative LREAL Get, Set 0.0 Limitation of the jog command via the FB_Motion [} 178]. Jog Negative() method Ignored for operation with an actuator. Jog Limiting Positive LREAL Get, Set 0.0 Limitation of the jog command via the FB_Motion [} 178]. Jog Positive() method Ignored for operation with an actuator. Jog Velocity Negative LREAL Get, Set 0.0 Velocity of the jog command via the FB_Motion [} 178]. Jog Negative() method Ignored for operation with an actuator. Jog Velocity Positive LREAL Get, Set 0.0 Velocity of the jog command via the FB_Motion [} 178]. Jog Negative() method Ignored for operation with an actuator. Manual Power I_Manual Function Hmi Get, Set <Local> Interface for a manual function to switch on the motion object. [} 163] Specific REFERENCE TO Get <Local> Access to the technology- FB_Motion Specific Hmi specific functions FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. TF85xx Version: 1.4.0 79
## Page 80

PLC-API - Class overview Name Type Access Initial value Description Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Local HMI variables Name Data type Description fb Param Handle FB_Md Handle Hmi Handling interface for loading and saving machine data. FB_Blow Molding Extruder Hmi fb Parison Length Control H FB_Parison Length Contro HMI for parison length control mi l Hmi FB_Extruder Hmi fb Param Continuous Motion FB_Md Continuous Motion Entries in the HMI parameter list under Continuous motion FB_Axis Hmi fb Param Axis FB_Md Axis Hmi Entries in the HMI parameter list under Axis. fb Param Homing FB_Md Homing Hmi Entries in the HMI parameter list under Homing. fb Referencing FB_Referencing Hmi Parameter sets and commands for referencing. FB_Motion Hmi fb Manual Power FB_Manual Function Hmi Interface for a manual function to switch on the motion object. [} 163] fb Specific FB_Motion Specific Hmi Technology-specific functions of the motion object. Methods Name Description Reset() Resets the error state of the class. FB_Base Hmi Init(ip Base) Default initialization method to pass the base class. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Interfaces Type Description I_Base Standard interface on FB_Base. 80 Version: 1.4.0 TF85xx
## Page 81

PLC-API - Class overview Type Description I_Blow Molding Extruder Hmi Standard interface on FB_Blow Molding Extruder Hmi. I_Extruder Hmi Standard interface on FB_Extruder Hmi. I_Axis Hmi Standard interface on FB_Axis Hmi. I_Motion Hmi Standard interface on FB_Motion Hmi. I_Base Md Hmi Standard interface on FB_Base Md Hmi. I_Base Hmi Standard interface on FB_Base Hmi. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 6.4.7 FB_Wtc Implements wall thickness control for the extruded hose in blow molding applications. Internal functions: • Automatic coupling to a cam plate when switching on ◦ Close integration with the TF8550 Curve Editor ◦ Flexible change of curve possible with I_Curve Hmi [} 215] • Decoupling from the curve possible through: ◦ Die Wait Position for a waiting position (e.g. in accumulator mode) ◦ Testposition for spontaneous movement to a position ◦ Referencing. Enable for the execution of referencing processes • Synchronization to a WTC master ◦ Time-based with FB_Wtc Timer [} 88] ◦ Path-based with an FB_Wtc Accumulator [} 91] Syntax: FUNCTION_BLOCK FB_Wtc EXTENDS FB_Cam Axis Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Wtc Instant Curve Activation BOOL Get, Set TRUE If not TRUE, a new curve is only accepted when the master is in the first 10 % of its value range. FB_Cam Axis TF85xx Version: 1.4.0 81
## Page 82

PLC-API - Class overview Name Type Access Initial value Description Enable Envelope Curve Al BOOL Get, Set FALSE Enables monitoring of the arms actual curve in relation to the configured envelope. FB_Axis Axis I_Axis Base Get NULL Interface to the assigned TF8560 axis. Referencing I_Referencing [} 189] Get <Local> Functions for referencing the axis. FB_Motion Motion I_Motion Base Get NULL Interface to the assigned TF8560 motion object. Error Alarm TL Tc Event Severity Get, Set Error (3) Severity of the alarm that the axis triggers in the error state. Specific I_Motion Specific Get - Technology-specific functions/ values [} 180] FB_Base Md Machine Data I_Md Base Container Get - Interface for machine data handling. [} 117] FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > 1 Is obsolete Methods Name Description Reset() Resets the error state of the class. FB_Wtc Cam In(b Cmd) Loads the current curve and starts camming. Die Wait Position(b Cmd) Commands the WTC to the waiting position. Power(b Cmd) Activates the axis including the connection to the cam plate. Set Master(i Master) Sets the current master to be used by the WTC. Notice If the WTC is not in the idle state, the new master is considered requested and is only assigned when idle. Testposition(b Cmd) Commands the WTC to the test position. FB_Cam Axis Set Curve(i Curve) Assign the curve to be used FB_Axis Set Position(b Command) Setting the axis position with the FB_Axis Hmi. Setposition. FB_Motion Check Axis State() [} 180] Checks the current state of the axis. Feed Enable(b Feed Enable P, Enable of a direction of movement. b Feed Enable N) Jog Negative(b Command) Starts/stops a jog movement in negative direction. Jog Positive(b Command) Starts/stops a jog movement in positive direction. 82 Version: 1.4.0 TF85xx
## Page 83

PLC-API - Class overview Name Description Power(b Command) Switching on the drive control. Set Motion Ref(i Motion) Assignment method for the TF8560 motion object. FB_Base Md [PROTECTED] Add Md Comp() Adds a component of type I_Md Component to the machine data container. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Procedure controlling methods (FB_Adaptable Sequence [} 317]) Name Description Wtc States() [} 84] Procedure for executing commands and coupling and decoupling from the cam plate. Possible events ID Description Alarm/Message 11 Object error state Alarm 21 Command rejected Alarm 100x Axis switch on/off failed. Message 300x Failed to switch on/off the cam plate. Message 301x Envelope limit exceeded Alarm 10 Axis Errors Alarm 20 Axis command rejected Alarm Machine data Component Description Index range Number of in- stances FB_Md File Info [} 133] File information 0x0000 Fxxx 1 FB_Md Wtc [} 160] Parameters for WTC applications 0x0001 3xxx 1 FB_Md Wtc Timer [} 161] Parameter for a WTC timer, only if 0x0001 31xx 1 (0) Set Master() was executed with a FB_Wtc Timer [} 88] FB_Md Axis [} 133] General axis parameters 0x0000 0xxx 1 0x0000 1xxx FB_Md Nc [} 137] NC specific parameters, only if 0x0000 22xx 1 (0) Specific. Nc. Is Nc = TRUE FB_Md Trafo [} 156] Transformation-specific parameters, only if 0x0000 23xx 1 (0) Specific. Trafo. Is Trafo = TRUE TF85xx Version: 1.4.0 83
## Page 84

PLC-API - Class overview Component Description Index range Number of in- stances FB_Md Homing [} 135] Parameters for homing the axis 0x0000 3xxx 1 Interfaces Type Description I_Base Standard interface on FB_Base. I_Wtc Standard interface on FB_Wtc. I_Axis Standard interface on FB_Axis. I_Motion Standard interface on FB_Motion I_Two Task Interface Runtime interface for two PLC tasks. I_Base Md Standard interface on FB_Base Md. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Requirements Development Environment Target platform PLC libraries to include Twin CAT 4026 >= v3.1.4026.16 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.12.0.0) Twin CAT 4024 >= v3.1.4024.66 6.4.7.1 Wtc States() Instance type Instance Name Master fb Wtc States Slaves a Base Seq Members[E_Wtc State.e Length] State diagram: Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.42 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.6.2) 84 Version: 1.4.0 TF85xx
## Page 85

PLC-API - Class overview 6.4.8 FB_Wtc Hmi HMI parallel class of FB_Wtc class. Syntax: FUNCTION_BLOCK FB_Wtc Hmi EXTENDS FB_Cam Axis Hmi Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Wtc Hmi Calc Tool Stroke BOOL Get, Set FALSE The stroke of the die is calculated automatically from the min. and max. positions. Converging BOOL Get, Set FALSE Convergent die shape: When moving in the direction of material flow, the die closes. Delay Die Wait Position LREAL Get, Set 0.0 [s] Delay of the FB_Wtc [} 81]. Die Wait Position() command for the wait position. Die Move BOOL Get, Set FALSE Die movement: The die is adjusted by the movement of the sleeve. Die Wait Position LREAL Get, Set 0.0 Wait position of the FB_Wtc [} 81]. Die Wait Position() command. Diverging BOOL Get, Set FALSE Diverging die shape: When moving in the direction of material flow, the die opens. Do The Wait Position BOOL Get, Set FALSE Command to move to the waiting position. Do Testposition BOOL Get, Set FALSE Command to move into the test position. Pin Move BOOL Get, Set 0.0 Pin movement: The die is adjusted by moving the inner pin. Test position LREAL Get, Set 0.0 Test position of the FB_Wtc [} 81]. Do Test Position() command. Tool Stroke LREAL Get, Set 0.0 Available stroke of the die. See Calc Tool Stroke Do Setup Mode BOOL Get, Set FALSE Reserved Alternative: Referencing. Enable(Get) FB_Cam Axis Hmi Native Curve I_Curve Hmi [} 213] Get <Local> Internal instance of FB_Curve Hmi for linking to other camming instances FB_Axis Hmi TF85xx Version: 1.4.0 85
## Page 86

PLC-API - Class overview Name Type Access Initial value Description Encoder Zero Shift LREAL Get, (Set) 0.0 Zero offset shift of the axis. Limiting Reference LREAL Get 100.0 [%] Reference value (maximum) for commanded limiting values (pressure or torque limit). Max Acceleration LREAL Get 0.0 Maximum acceleration of the axis. Max Deceleration LREAL Get 0.0 Maximum deceleration of the axis. Max Jerk LREAL Get 0.0 Maximum jerk of the axis. Max Position LREAL Get 0.0 Maximum position of the axis. Max Velocity LREAL Get 0.0 Maximum velocity of the axis. Min Postion LREAL Get 0.0 Minimum position of the axis. Min Velocity LREAL Get 0.0 Minimum velocity of the axis. Referencing I_Referencing Hmi Get <Local> Parameter sets and commands for referencing the [} 196] axis. Set Position LREAL Get, Set 0.0 Position used when calling FB_Axis [} 187]. Set Position(). Unit Group STRING(64) Get, Set ‘Length‘ Physical quantity with which the axis is parameterized and operated. FB_Motion Hmi Act Position LREAL Get 0.0 Current position of the connected motion object Act Velocity LREAL Get 0.0 Current velocity of the connected motion object Jog Limiting Negative LREAL Get, Set 0.0 Limitation of the jog command via the FB_Motion [} 178]. Jog Negative() method Ignored for operation with an actuator. Jog Limiting Positive LREAL Get, Set 0.0 Limitation of the jog command via the FB_Motion [} 178]. Jog Positive() method Ignored for operation with an actuator. Jog Velocity Negative LREAL Get, Set 0.0 Velocity of the jog command via the FB_Motion [} 178]. Jog Negative() method Ignored for operation with an actuator. Jog Velocity Positive LREAL Get, Set 0.0 Velocity of the jog command via the FB_Motion [} 178]. Jog Negative() method Ignored for operation with an actuator. Manual Power I_Manual Function Hmi Get, Set <Local> Interface for a manual function to switch on the motion object. [} 163] Specific REFERENCE TO Get <Local> Access to the technology- FB_Motion Specific Hmi specific functions FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. 86 Version: 1.4.0 TF85xx
## Page 87

PLC-API - Class overview Name Type Access Initial value Description Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Local HMI variables Name Data type Description fb Param Handle FB_Md Handle Hmi Handling interface for loading and saving machine data. FB_Wtc Hmi fb Param Wtc FB_Md Wtc Hmi Entries in the HMI parameter list under WTC. fb Patam Wtc Timer FB_Md Wtc Timer Hmi Entries in the HMI parameter list under WTC Timer. Notice Only available if the FB_Wtc [} 81]. Set Master() method was executed once with an FB_Wtc Timer [} 88]. FB_Cam Axis Hmi fb Native Curve FB_Native Curve Hmi Internal curve for connection with the TF8550 Curve Editor a Set Curve ARRAY[] OF ST_CPoint Set curve transmitted by the HMI. [} 507] a Act Curve ARRAY[] OF ST_CPoint Actual curve that the axis has actually traveled and should be displayed. [} 507] FB_Axis Hmi fb Param Axis FB_Md Axis Hmi Entries in the HMI parameter list under Axis. fb Param Homing FB_Md Homing Hmi Entries in the HMI parameter list under Homing. fb Referencing FB_Referencing Hmi Parameter sets and commands for referencing. FB_Motion Hmi fb Manual Power FB_Manual Function Hmi Interface for a manual function to switch on the motion object. [} 163] fb Specific FB_Motion Specific Hmi Technology-specific functions of the motion object. Methods Name Description Reset() Resets the error state of the class. FB_Base Hmi Init(ip Base) Default initialization method to pass the base class. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() TF85xx Version: 1.4.0 87
## Page 88

PLC-API - Class overview Name Description [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Interfaces Type Description I_Base Standard interface on FB_Base. I_Wtc Hmi Standard interface on FB_Wtc Hmi. I_Cam Axis Hmi Standard interface on FB_Cam Axis Hmi I_Axis Hmi Standard interface on FB_Axis Hmi. I_Motion Hmi Standard interface on FB_Motion Hmi. I_Base Md Hmi Standard interface on FB_Base Md Hmi. I_Base Hmi Standard interface on FB_Base Hmi. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Requirements Development Environment Target platform PLC libraries to include Twin CAT 4026 >= v3.1.4026.16 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.12.0.0) Twin CAT 4024 >= v3.1.4024.66 6.4.9 FB_Wtc Timer Implements a timer as master for WTC camming. Syntax: FUNCTION_BLOCK FB_Wtc Timer EXTENDS FB_Base Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Wtc Timer Actual Time LREAL Get 0.0 [s] Elapsed time since start of WTC cycle in seconds. Actual Time Latched LREAL Get 0.0 [s] Stored time of the last WTC cycle in seconds. Attachable Md Interface I_Md Component Get - Interface to the machine data component. Guiding Value LREAL Get 0.0 Time as a scaled camming master value. Depends on FB_Wtc Timer Hmi [} 90]. Master Time and Guiding Max. Guiding Max LREAL Get, Set 400.0 Maximum guiding value of the timer as camming master. 88 Version: 1.4.0 TF85xx
## Page 89

PLC-API - Class overview Name Type Access Initial value Description Max Measure Time LREAL Get 0.0 [s] Maximum overflow time of the timer. Max Measure Time Factor LREAL Get, Set 1.5 Overflow factor for the set target time. Profile Started BOOL Get FALSE TRUE if the timer has been started. Use Triggered Start BOOL Get, Set FALSE The Start() command is only accepted with a rising edge. First Start1 BOOL Get FALSE WTC is in its first cycle since the last launch. FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > 1Obsolete Methods Name Description Reset() Resets the error state of the class. FB_Wtc Timer Profile Start Ack(b Ack) Resets the Profile Started feedback signal. Start(b Command) Starts the timer. If the timer is already running, the elapsed time is reset. Notice The timer is reset with each call. To use edge-triggered behavior, Use Triggered Start must be enabled. Stop(b Command) Stops the timer at the current time value. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Interfaces Type Description I_Base Standard interface on FB_Base. I_Wtc Timer Standard interface on FB_Wtc Timer. I_Wtc Master General interface of a WTC master axis. TF85xx Version: 1.4.0 89
## Page 90

PLC-API - Class overview Type Description I_Two Task Interface Runtime interface for two PLC tasks. I_Attachable Md Interface Interface for containerless machine data components. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Requirements Development Environment Target platform PLC libraries to include Twin CAT 4026 >= v3.1.4026.16 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.12.0.0) Twin CAT 4024 >= v3.1.4024.66 6.4.10 FB_Wtc Timer Hmi HMI parallel class of the FB_Wtc Timer. Syntax: FUNCTION_BLOCK FB_Wtc Timer Hmi EXTENDS FB_Base Hmi Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Wtc Timer Hmi Actual Time LREAL Get, (Set) 0.0 Elapsed time since the timer was started. Auto Start BOOL Get, Set FALSE The timer restarts automatically after Master Time has expired. Auto Time BOOL Get, Set FALSE When the timer is restarted using FB_Wtc Timer [} 88]. Start(), Latched Time is adopted as the new Master Time. Latched Time LREAL Get, (Set) 0.0 Elapsed time reached before the last start signal. Master Time LREAL Get, Set 20.0 Set time value for the complete passage of the coupled WTC cam plate. Master Time Max LREAL Get, Set 60.0 Maximum for limiting the adjustable Master Time Master Time Min LREAL Get, Set 10.0 Minimum for limiting the adjustable Master Time FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. 90 Version: 1.4.0 TF85xx
## Page 91

PLC-API - Class overview Name Type Access Initial value Description [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Methods Name Description Reset() Resets the error state of the class. FB_Base Hmi Init(ip Base) Default initialization method to pass the base class. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Interfaces Type Description I_Base Standard interface on FB_Base. I_Wtc Timer Hmi Standard interface on FB_Wtc Timer Hmi. I_Wtc Master Hmi General HMI of a WTC master axis. I_Base Hmi Standard interface on FB_Base Hmi. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.4.11 FB_Wtc Accumulator Implements an accumulator as the master for a WTC. Internal functions: • Various push-out modes • Push-out by cam plate from velocity via position TF85xx Version: 1.4.0 91
## Page 92

PLC-API - Class overview • Passive and active filling Syntax: FUNCTION_BLOCK FB_Wtc Accumulator EXTENDS FB_Cam Axis Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Wtc Accumulator Abort On Missing Volume BOOL Get, Set TRUE The accumulator cancels the command to push-out if the filling volume is not reached. Fillin Busy BOOL Get FALSE The accumulator is filled. Filling Done BOOL Get FALSE Filling of the accumulator has been completed. Fill Volume Reached BOOL Get FALSE The filling volume has been reached. Guiding Value LREAL Get 0.0 Position as a scaled camming master value. Depends on FB_Wtc Accumulator Hmi [} 95]. Pushout Mode and Guiding Max. Guiding Max LREAL Get, Set 400 Maximum guiding value of the accumulator as camming master. Pushout Aborted BOOL Get FALSE The push-out process was aborted. Pushout Busy BOOL Get FALSE The push-out process is running. Pushout Done BOOL Get FALSE The push-out process is complete. Use Passive Filling BOOL Get, Set TRUE Use passive filling: The controller enable is canceled for the filling process, as the accumulator is filled by the back pressure of the extruder. FB_Cam Axis Enable Envelope Curve Al BOOL Get, Set FALSE Enables monitoring of the arms actual curve in relation to the configured envelope. FB_Axis Axis I_Axis Base Get NULL Interface to the assigned TF8560 axis. Referencing I_Referencing [} 189] Get <Local> Functions for referencing the axis. FB_Motion Motion I_Motion Base Get NULL Interface to the assigned TF8560 motion object. Error Alarm TL Tc Event Severity Get, Set Error (3) Severity of the alarm that the axis triggers in the error state. Specific I_Motion Specific Get - Technology-specific functions/ values [} 180] 92 Version: 1.4.0 TF85xx
## Page 93

PLC-API - Class overview Name Type Access Initial value Description FB_Base Md Machine Data I_Md Base Container Get - Interface for machine data handling. [} 117] FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > 1 Is obsolete Methods Name Description Reset() Resets the error state of the class. FB_Wtc Accumulator Filling(b Command) Starts the filling process of the accumulator. Pushout(b Command) Starts the push-out process of the filling volume. FB_Cam Axis Set Curve(i Curve) Assign the curve to be used FB_Axis Set Position(b Command) Setting the axis position with the FB_Axis Hmi. Setposition. FB_Motion Check Axis State() [} 180] Checks the current state of the axis. Feed Enable(b Feed Enable P, Enable of a direction of movement. b Feed Enable N) Jog Negative(b Command) Starts/stops a jog movement in negative direction. Jog Positive(b Command) Starts/stops a jog movement in positive direction. Power(b Command) Switching on the drive control. Set Motion Ref(i Motion) Assignment method for the TF8560 motion object. FB_Base Md [PROTECTED] Add Md Comp() Adds a component of type I_Md Component to the machine data container. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() 1 Is obsolete TF85xx Version: 1.4.0 93
## Page 94

PLC-API - Class overview Procedure controlling methods (FB_Adaptable Sequence [} 317]) Name Description Accu States() [} 94] Procedure for processing the states of the accumulator. Possible events ID Description Alarm/Message 11 Object error state Alarm 21 Command rejected Alarm 1002 Switching off failed Message 7000 Insufficient filling volume Alarm 301x Envelope limit exceeded Alarm 10 Axis Errors Alarm 20 Axis command rejected Alarm Interfaces Type Description I_Base Standard interface on FB_Base. I_Wtc Accumulator Standard interface on FB_Wtc Accumulator. I_Wtc Master General interface of a WTC master axis. I_Cam Axis Standard interface on FB_Md Axis. I_Axis Standard interface on FB_Axis. I_Motion Standard interface on FB_Motion I_Two Task Interface Runtime interface for two PLC tasks. I_Base Md Standard interface on FB_Base Md. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Prerequisites Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.10.2.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.4.11.1 Accu States() Instance type Instance Name Master fb Accu States Slaves a Base Seq Members[E_Wtc Accu State.e Length] 94 Version: 1.4.0 TF85xx
## Page 95

PLC-API - Class overview State diagram: Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.4.12 FB_Wtc Accumulator Hmi HMI parallel class of FB_Wtc Accumulator class. Syntax: FUNCTION_BLOCK FB_Accumulator Hmi EXTENDS FB_Base Camming Hmi Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Wtc Accumulator Hmi Act Start Volume LREAL Get, (Set) 0.0 Last used start volume (depending on Pushout Mode). Act Target Volume LREAL Get, (Set) 0.0 Last used target volume (depending on Pushout Mode). Buffer Volume LREAL Get, Set 5.0 Buffer volume, which is always kept in stock. Delay Pushout I_Timer Hmi [} 300] Get <Local> Delay between starting and executing the push-out process. Filling Done BOOL Get FALSE The filling process is complete. TF85xx Version: 1.4.0 95
## Page 96

PLC-API - Class overview Name Type Access Initial value Description Fill Velocity LREAL Get, Set 10.0 Filling velocity for an active filling process. Manual Fill Push I_Manual Function Hmi Get <Local> HMI for the implementation of a manual function. [} 163] Pushout Done BOOL Get FALSE The push-out process is complete. Pushout Limiting LREAL Get, Set 0.0 Limitation (pressure/torque) for the push-out process. Pushout Mode E_Pushout Mode [} 98] Get, Set e Adapted Mode of the push-out process. Pushout Volume LREAL Get, Set 50.0 The volume to be pushed out for a push-out process. The filling volume results from Pushout Volume and Buffer Volume. FB_Cam Axis Hmi Native Curve I_Curve Hmi [} 213] Get <Local> Internal instance of FB_Curve Hmi for linking to other camming instances FB_Axis Hmi Encoder Zero Shift LREAL Get, (Set) 0.0 Zero offset shift of the axis. Limiting Reference LREAL Get 100.0 [%] Reference value (maximum) for commanded limiting values (pressure or torque limit). Max Acceleration LREAL Get 0.0 Maximum acceleration of the axis. Max Deceleration LREAL Get 0.0 Maximum deceleration of the axis. Max Jerk LREAL Get 0.0 Maximum jerk of the axis. Max Position LREAL Get 0.0 Maximum position of the axis. Max Velocity LREAL Get 0.0 Maximum velocity of the axis. Min Postion LREAL Get 0.0 Minimum position of the axis. Min Velocity LREAL Get 0.0 Minimum velocity of the axis. Referencing I_Referencing Hmi Get <Local> Parameter sets and commands for referencing the [} 196] axis. Set Position LREAL Get, Set 0.0 Position used when calling FB_Axis [} 187]. Set Position(). Unit Group STRING(64) Get, Set ‘Length‘ Physical quantity with which the axis is parameterized and operated. FB_Motion Hmi Act Position LREAL Get 0.0 Current position of the connected motion object Act Velocity LREAL Get 0.0 Current velocity of the connected motion object Jog Limiting Negative LREAL Get, Set 0.0 Limitation of the jog command via the FB_Motion [} 178]. Jog Negative() method Ignored for operation with an actuator. 96 Version: 1.4.0 TF85xx
## Page 97

PLC-API - Class overview Name Type Access Initial value Description Jog Limiting Positive LREAL Get, Set 0.0 Limitation of the jog command via the FB_Motion [} 178]. Jog Positive() method Ignored for operation with an actuator. Jog Velocity Negative LREAL Get, Set 0.0 Velocity of the jog command via the FB_Motion [} 178]. Jog Negative() method Ignored for operation with an actuator. Jog Velocity Positive LREAL Get, Set 0.0 Velocity of the jog command via the FB_Motion [} 178]. Jog Negative() method Ignored for operation with an actuator. Manual Power I_Manual Function Hmi Get, Set <Local> Interface for a manual function to switch on the motion object. [} 163] Specific REFERENCE TO Get <Local> Access to the technology- FB_Motion Specific Hmi specific functions FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Local HMI variables Name Data type Description fb Param Handle FB_Md Handle Hmi Handling interface for loading and saving machine data. FB_Wtc Accumulator Hmi fb Delay Pushout FB_Timer Hmi [} 300] Set curve transmitted by the HMI. fb Manual Fill Push FB_Manual Function Hmi HMI for the implementation of a manual function. [} 163] FB_Cam Axis Hmi fb Native Curve FB_Native Curve Hmi Internal curve for connection with the TF8550 Curve Editor a Set Curve ARRAY[] OF ST_CPoint Set curve transmitted by the HMI. [} 507] a Act Curve ARRAY[] OF ST_CPoint Actual curve that the axis has actually traveled and should be displayed. [} 507] FB_Axis Hmi fb Param Axis FB_Md Axis Hmi Entries in the HMI parameter list under Axis. fb Param Homing FB_Md Homing Hmi Entries in the HMI parameter list under Homing. fb Referencing FB_Referencing Hmi Parameter sets and commands for referencing. FB_Motion Hmi fb Manual Power FB_Manual Function Hmi Interface for a manual function to switch on the motion object. [} 163] TF85xx Version: 1.4.0 97
## Page 98

PLC-API - Class overview Name Data type Description fb Specific FB_Motion Specific Hmi Technology-specific functions of the motion object. Methods Name Description Reset() Resets the error state of the class. FB_Base Hmi Init(ip Base) Default initialization method to pass the base class. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Interfaces Type Description I_Base Standard interface on FB_Base. I_Wtc Accumulator Hmi Standard interface on FB_Wtc Accumulator Hmi. I_Wtc Master Hmi General HMI interface of a WTC master axis. I_Cam Axis Hmi Standard interface on FB_Cam Axis Hmi I_Axis Hmi Standard interface on FB_Axis Hmi. I_Motion Hmi Standard interface on FB_Motion Hmi. I_Base Md Hmi Standard interface on FB_Base Md Hmi. I_Base Hmi Standard interface on FB_Base Hmi. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) Also see about this 2 FB_Wtc Accumulator Hmi [} 97] 6.4.12.1 E_Pushout Mode Push-out mode for the push-out process of a WTC accumulator. 98 Version: 1.4.0 TF85xx
## Page 99

PLC-API - Class overview Syntax: {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Pushout Mode : ( e Invalid := 0, e Exact, e Adapted, e Spare First, e Spare Last, e Complete ); END_TYPE Values Name Description e Invalid Invalid setting. e Exact The precisely configured volume is pushed out. Notice If the option Abort On Missing Volume is not used, the fill level must be checked in the sequence program. e Adapted The available volume (except buffer) is pushed out. e Spare First The excess is pushed out first and then the exact volume. e Spare Last The exact volume is pushed out first and then the excess. e Complete The entire volume is pushed out. The "entire" volume includes the Buffer Volume . Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.4.13 FB_Support Air Implements a support air function using a cam plate and a WTC master. Internal functions: • Switching between curve mode and constant value output • Constant value output with: ◦ Unconnected curve ◦ FB_Support Air Hmi [} 101] not set. Enable Curve Signal ◦ Master -> Guiding Value > 0 and Guiding Value < Guiding Max • Sensor-supported actual curve with mapped feedback signal of the Output object Syntax: FUNCTION_BLOCK FB_Support Air EXTENDS FB_Setpoints TF85xx Version: 1.4.0 99
## Page 100

PLC-API - Class overview Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Support Air Enable Envelope Curve Al BOOL Get, Set FALSE Enables monitoring of the arms actual curve in relation to the configured envelope. FB_Setpoints Attachable Md Interface I_Md Component Get <Local> Interface to the machine data component Output I_Output Base Get, Set NULL Interface of the analog output to be assigned FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Methods Name Description Reset() Resets the error state of the class. FB_Support Air Set Curve(i Curve) Assign a curve compatible with I_Curve Hmi [} 215] that describes the curve of the pressure setpoint. Set Master(i Master) Sets the WTC camming master to be used by the support air. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Possible events ID Description Alarm/Message 301x Envelope limit exceeded Alarm 100 Version: 1.4.0 TF85xx
## Page 101

PLC-API - Class overview Interfaces Type Description I_Base Standard interface on FB_Base. I_Support Air Standard interface on FB_Support Air I_Setpoints Standard interface on FB_Setpoints I_Attachable Md Interface Interface for containerless machine data components I_One Task Interface Runtime interface for a PLC task I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Requirements Development Environment Target platform PLC libraries to include Twin CAT 4026 >= v3.1.4026.16 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.12.0.0) Twin CAT 4024 >= v3.1.4024.66 6.4.14 FB_Support Air Hmi HMI parallel class to the FB_Support Air. Syntax: FUNCTION_BLOCK FB_Support Air Hmi EXTENDS FB_Setpoints Hmi Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Support Air Hmi Enable Curve BOOL Get, Set TRUE Enables cam plate operation. FB_Setpoints Hmi Setpoint LREAL Get, Set 25.0 Setpoint to be output FB_Scale Analog Hmi Scaling Electrical Max LREAL Get, Set 10.0 Maximum of the electrical voltage input. Scaling Electrical Min LREAL Get, Set 0.0 Minimum of the electrical voltage input. Scaling Raw Max LREAL Get, Set 32767 Maximum of the raw analog measured value (bit). Scaling Raw Min LREAL Get, Set 0 Minimum of the raw analog measured value (bit). Scaling Value Max LREAL Get, Set 100.0 Maximum of the scaled end unit. Scaling Value Min LREAL Get, Set 0.0 Minimum of the scaled end unit. Unit Group Electrical STRING(64) Get, Set ‘‘ Physical quantity in which the electrical measurement is measured. TF85xx Version: 1.4.0 101
## Page 102

PLC-API - Class overview Name Type Access Initial value Description Unit Group Value STRING(64) Get, Set ‘‘ Physical quantity in which the scaled end value is measured. FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Methods Name Description Reset() Resets the error state of the class. FB_Scale Analog Hmi Electrical To Raw(f Electrical) Scales the electrical voltage to the raw analog measured value (bit/ numeric). Electrical To Value(f Electrical) Scales the electrical voltage to the unit of the final scaling. Raw To Electrical(n Raw) Scales the raw analog measured value (bit/numeric) to the electrical voltage. Raw To Value(n Raw) Scales the raw analog measured value (bit/numeric) to the unit of the final scaling. Value To Electrical(f Value) Scales the unit of the final scaling to the electrical voltage. Value To Raw(f Value) Scales the unit of the final scaling to the raw analog measured value (bit/ numeric). FB_Scale Hmi [PROTECTED] Xto Y(...) Scales a value x to a value y, using the minimum and maximum value of both scales. FB_Base Hmi Init(ip Base) Default initialization method to pass the base class. Interfaces Type Description I_Base Standard interface on FB_Base. I_Support Air Hmi Standard interface on FB_Support Air Hmi. I_Setpoints Hmi Standard interface on FB_Setpoints Hmi. I_Scale Analog Hmi Standard interface on FB_Scale Annalog Hmi. I_Scale Analog Scalings Interface to the scaling minima and maxima. I_Base Hmi Standard interface on FB_Base Hmi. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Prerequisites Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.10.2.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 102 Version: 1.4.0 TF85xx
## Page 103

PLC-API - Class overview 6.5 Logging - Recording user input 6.5.1 CSV 6.5.1.1 FB_Csv Base The base class for CSV-based classes. Class is abstract Since the class is defined as ABSTRACT, the class cannot be instantiated and must be implemented using inheritance. Syntax: FUNCTION_BLOCK ABSTRACT FB_Csv Base EXTENDS FB_Base Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Csv Base Busy BOOL Get FALSE The function is currently being executed. Error Id UDINT Get FALSE ADS error code of the error that has occurred. File Mode E_File Mode [} 105] Get, Set e Mode Text Ap Mode in which the CSV files pend are used. File Name T_Max String Get, Set ‘.csv‘ File name in the Plastic Base Application Standard directory. Net Id AMSNETID Get, Set [0,0,0,0,0,0] AMS (ADS) network ID. Net Id String T_Ams Net ID Get, Set ‘0.0.0.0.0.0‘ AMS (ADS) network ID. Timeout LREAL Get, Set 0.0 [s] Time-out period of the system response of this function. FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Methods Name Description Reset() Resets the error state of the class. FB_Base Get HMI() Returns the assigned HMI object. TF85xx Version: 1.4.0 103
## Page 104

PLC-API - Class overview Name Description Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Cycle methods Name Description Cyclic() Cycle method - 1 time per cycle (default 10 ms). Procedure controlling methods (FB_Adaptable Sequence [} 317]) Type Description Csv States() [} 104] Procedure for processing CSV commands. Possible events ID Description Alarm/Message 8001 CSV object is in error state Alarm Interfaces Type Description I_Base Standard interface on FB_Base. I_Csv Base Standard interface on FB_Csv Base. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.5.1.1.1 Csv States() Instance type Instance Name Master fb Csv States Slaves a Base Seq Members[E_Csv States.e Length] 104 Version: 1.4.0 TF85xx
## Page 105

PLC-API - Class overview State diagram: Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.5.1.1.2 E_File Mode Enumeration of file modes for CSV-based functions. Syntax: {attribute 'qualified_only'} {attribute 'strict'} TYPE E_File Mode : ( e Mode Text Append := FOPEN_MODEAPPEND OR FOPEN_MODETEXT, e Mode Text Read := FOPEN_MODEREAD OR FOPEN_MODETEXT )UDINT; END_TYPE Values Name Description e Mode Text Append Open file in text mode and append information. e Mode Text Read Open and read file in text mode. Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.5.1.1.3 I_Csv Field Interface to a CSV field of the internal buffer of FB_Csv Base. Syntax: INTERFACE I_Csv Field TF85xx Version: 1.4.0 105
## Page 106

PLC-API - Class overview Properties Name Type Access Initial value Description New Line BOOL Get, Set FALSE The CSV field is in a new line. Next I_Csv Field Get <Local> + 1 Interface to the next CSV field. Value LREAL Get, Set T_Max String Value of the CSV field. Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.5.1.2 FB_Csv Logger Implements the logging of values in a CSV file. Syntax: FUNCTION_BLOCK FB_Csv Logger EXTENDS FB_Csv Base Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Csv Base Busy BOOL Get FALSE The function is currently being executed. Error Id UDINT Get FALSE ADS error code of the error that has occurred. File Mode E_File Mode [} 105] Get, Set e Mode Text Ap Mode in which the CSV files pend are used. File Name T_Max String Get, Set ‘.csv‘ File name in the Plastic Base Application Standard directory. Net Id AMSNETID Get, Set [0,0,0,0,0,0] AMS (ADS) network ID. Net Id String T_Ams Net ID Get, Set ‘0.0.0.0.0.0‘ AMS (ADS) network ID. Timeout LREAL Get, Set 0.0 [s] Time-out period of the system response of this function. FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > 106 Version: 1.4.0 TF85xx
## Page 107

PLC-API - Class overview Methods Name Description Reset() Resets the error state of the class. FB_Csv Logger Field(s Value) Logging of a textual value in ASCII format. This function can be called in a chain. Float(f Value, n Decimals) Logging a floating point value, specifying the decimal places. This function can be called in a chain. New Line() Logging a line break. This function can be called in a chain. Timestamp() Logging the current system time. This function can be called in a chain. WField(s Value) Logging a textual value in Unicode format. This function can be called in a chain. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Cycle methods Name Description Cyclic() Cycle method - 1 time per cycle (default 10 ms). Procedure controlling methods (FB_Adaptable Sequence [} 317]) Type Description Csv States() [} 108] Procedure for processing CSV commands (extended). Possible events ID Description Alarm/Message 8001 CSV object is in error state Alarm Interfaces Type Description I_Base Standard interface on FB_Base. I_Csv Logger Standard interface on FB_Csv Logger. I_Csv Logger Cmd Chaining interface for logging commands. TF85xx Version: 1.4.0 107
## Page 108

PLC-API - Class overview Type Description I_Csv Base Standard interface on FB_Csv Base. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.8.1.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.5.1.2.1 Csv States() Instance type Instance Name Master fb Csv States Slaves a Base Seq Members[E_Csv States.e Length] State diagram: Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.5.1.3 FB_Csv Reader Implements the reading of values from a CSV file. Syntax: FUNCTION_BLOCK FB_Csv Reader EXTENDS FB_Csv Base 108 Version: 1.4.0 TF85xx
## Page 109

PLC-API - Class overview Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Csv Reader Done BOOL Get FALSE The read process has reached the end of the file. Expect Missing File BOOL Get, Set FALSE Suppresses the alarm that would be triggered when reading a non-existent file. Field T_Max String Get ‘‘ Read value as a textual string. Float LREAL Get 0.0 Read value as a floating-point number. New Line BOOL Get FALSE Read value appears in a new line. Num Fields UDINT Get UDINT Number of values already loaded. FB_Csv Base Busy BOOL Get FALSE The function is currently being executed. Error Id UDINT Get FALSE ADS error code of the error that has occurred. File Mode E_File Mode [} 105] Get, Set e Mode Text Ap Mode in which the CSV files pend are used. File Name T_Max String Get, Set ‘.csv‘ File name in the Plastic Base Application Standard directory. Net Id AMSNETID Get, Set [0,0,0,0,0,0] AMS (ADS) network ID. Net Id String T_Ams Net ID Get, Set ‘0.0.0.0.0.0‘ AMS (ADS) network ID. Timeout LREAL Get, Set 0.0 [s] Time-out period of the system response of this function. FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Methods Name Description Reset() Resets the error state of the class. FB_Csv Logger Init() Initializes the class. Next() Loads the next value for reading and returns this as the return value. Read(b Execute) Triggers the read process of the file. FB_Base Get HMI() Returns the assigned HMI object. TF85xx Version: 1.4.0 109
## Page 110

PLC-API - Class overview Name Description Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Cycle methods Name Description Cyclic() Cycle method - 1 time per cycle (default 10 ms). Procedure controlling methods (FB_Adaptable Sequence [} 317]) Type Description Csv States() [} 110] Procedure for processing CSV commands (extended). Possible events ID Description Alarm/Message 8001 CSV object is in error state Alarm Interfaces Type Description I_Base Standard interface on FB_Base. I_Csv Reader Standard interface on FB_Csv Reader. I_Csv Base Standard interface on FB_Csv Base. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Requirements Development Environment Target platform PLC libraries to include Twin CAT 4026 >= v3.1.4026.16 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.12.0.0) Twin CAT 4024 >= v3.1.4024.66 6.5.1.3.1 Csv States() Instance type Instance Name Master fb Csv States Slaves fb State Done, a Base Seq Members[E_Csv States.e Length] 110 Version: 1.4.0 TF85xx
## Page 111

PLC-API - Class overview State diagram: Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.5.2 User Logging 6.5.2.1 FB_User Logging Implements the logic of the logging database of the TF8550 User Logging. Internal functions: • Automatically creates one file per day. • Limits the maximum number of logging entries. Syntax: FUNCTION_BLOCK FB_User Logging EXTENDS FB_Csv Logger Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Csv Base Busy BOOL Get FALSE The function is currently being executed. Error Id UDINT Get FALSE ADS error code of the error that has occurred. File Mode E_File Mode [} 105] Get, Set e Mode Text Ap Mode in which the CSV files pend are used. File Name T_Max String Get, Set ‘.csv‘ File name in the Plastic Base Application Standard directory. Net Id AMSNETID Get, Set [0,0,0,0,0,0] AMS (ADS) network ID. TF85xx Version: 1.4.0 111
## Page 112

PLC-API - Class overview Name Type Access Initial value Description Net Id String T_Ams Net ID Get, Set ‘0.0.0.0.0.0‘ AMS (ADS) network ID. Timeout LREAL Get, Set 0.0 [s] Time-out period of the system response of this function. FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Methods Name Description Reset() Resets the error state of the class. FB_Csv Logger Field(s Value) Logging of a textual value in ASCII format. This function can be called in a chain. Float(f Value, n Decimals) Logging a floating point value, specifying the decimal places. This function can be called in a chain. New Line() Logging a line break. This function can be called in a chain. Timestamp() Logging the current system time. This function can be called in a chain. WField(s Value) Logging a textual value in Unicode format. This function can be called in a chain. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Cycle methods Name Description Cyclic() Cycle method - 1 time per cycle (default 10 ms) Procedure controlling methods (FB_Adaptable Sequence [} 317]) Type Description Csv States() [} 113] Procedure for processing the logging (extended) 112 Version: 1.4.0 TF85xx
## Page 113

PLC-API - Class overview Possible events ID Description Alarm/Message 8001 CSV object is in error state Alarm Interfaces Type Description I_Base Standard interface on FB_Base. I_User Logging Standard interface on FB_User Logging. I_Csv Logger Standard interface on FB_Csv Logger. I_Csv Logger Cmd Chaining interface for logging commands. I_Csv Base Standard interface on FB_Csv Base. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.5.2.1.1 Csv States() Instance type Instance Name Master fb Csv States Slaves a Base Seq Members[E_Csv States.e Length] a User Log Seq[E_User Log States.e Length] State diagram: TF85xx Version: 1.4.0 113
## Page 114

PLC-API - Class overview Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.5.2.2 FB_User Logging Hmi HMI parallel class to the FB_User Logging. Syntax: FUNCTION_BLOCK FB_User Logging Hmi EXTENDS FB_Base Hmi Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_User Logging Hmi Max Days UDINT Get, Set 360 Maximum number of days (files). Max Memory LREAL Get, Set 1000 [MB] Maximum memory size of the logging files. Sub Directory STRING Get, Set ‘User Log‘ Subdirectory of the logging files in the Plastic Base Application standard directory. FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Methods Name Description Reset() Resets the error state of the class. FB_User Logging Hmi Logg(...) Logging a changed parameter from the HMI. This method can be called from the HMI. Logg U(…) Logging a changed parameter from the HMI. This method extends Logg() with an additional input parameter for the physical unit. This method can be called from the HMI. FB_Base Hmi Init(ip Base) Default initialization method to pass the base class. 114 Version: 1.4.0 TF85xx
## Page 115

PLC-API - Class overview Interfaces Type Description I_Base Standard interface on FB_Base. I_User Logging Hmi Standard interface on FB_User Logging Hmi. I_Base Hmi Standard interface on FB_Base Hmi. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Requirements Development Environment Target platform PLC libraries to include Twin CAT 4026 >= v3.1.4026.16 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.12.0.0) Twin CAT 4024 >= v3.1.4024.66 6.6 Machine Data - Machine data Base The \Machine Data\Base [} 117]\ subfolder contains the base classes of the machine data handling. Classes Name Description FB_Md Base Container [} 117] Represents the base container for machine data. FB_Md Base Component Represents the base class for machine components. [} 119] Components The \Machine Data\Components [} 122]\ subfolder contains all the machine data components that have already been implemented. All included components inherit from the FB_Md Base Component [} 119] class and have an enumeration that defines the index (without offset) of the individual parameters. Classes Name Use Description FB_Md File Info [} 133] FB_Md Base Container [} 117] Contains the information of a saved file. FB_Md Actuator [} 122] FB_Actuator Functions [} 181] Contains actuator-specific parameters. FB_Md Analog Value [} 123] FB_Monitoring [} 49] Contains scaling parameters for analog values. FB_Setpoints [} 55] FB_Blowing [} 63] FB_Md Blowpin [} 127] FB_Blowpin [} 67] Contains blowpin-specific parameters. FB_Md Clamp [} 130] FB_Clamp [} 224] Contains clamp-specific parameters. FB_Md Wtc [} 160] FB_Wtc [} 81] Contains Wtc-specific parameters. FB_Md Wtc Timer [} 161] FB_Wtc Timer [} 88] Contains Wtc Timer-specific parameters. FB_Md Axis [} 125] FB_Axis [} 187] Contains general axis parameters. FB_Md Continuous Motion FB_Extruder [} 231] Contains parameters for axes with continuous rotary motion. [} 132] FB_Md Homing [} 135] FB_Homing [} 508] Contains setting parameters for homing procedures. TF85xx Version: 1.4.0 115
## Page 116

PLC-API - Class overview Name Use Description FB_Md Nc [} 137] FB_Nc Functions [} 183] Contains NC-specific parameters. FB_Md Ptp Motion [} 138] FB_Ptp Motion [} 237] Contains parameters for PTP-based motion. FB_Md Trafo [} 156] FB_Trafo Functions [} 184] Contains parameters for transforming axes. FB_Md Temp Channel [} 140] FB_Temp Channel [} 291] Contains parameters for a temperature channel. FB_Md Temp Group [} 143] FB_Temperature Group [} 282] Contains data of the temperature group. FB_Md Temp Grouping [} 145] FB_Temperature Group [} 282] Extends FB_Md Temp Channel with a read mode for reading the configuration files. FB_Md Temp Supply [} 150] FB_Temp Supply [} 293] Contains parameters for a temperature supply unit. FB_Md Temp Timer [} 151] FB_Temp Timer [} 297] Contains additional information for the Time Schedule of a temperature zone. FB_Md Temp Zone [} 153] FB_Temp Zone [} 498] Contains parameters of a TF8540 temperature zone. Is the basis for FB_Md Temp Channel. FB_Md Weekday Timing FB_Timer Weekday Hmi [} 304] Contains data about the Time Schedule of the Weekday Timer. [} 158] Create your own machine data components The standard of TF8560 machine data applies for creating your own machine data components. A new component must implement the abstract methods Md Next Parameter() and Md Set Parameter() and set some internal variables. For this it is recommended to use the existing classes as a template and to follow the instructions of the TF8560 documentation. Hmi In the \Machine Data\Hmi\ subfolder, classes are defined that summarize the data stored per component for the HMI. FB_Md Handle Hmi This class is used to provide the information in the machine data file and an interface for the HMI. Accordingly, load and save commands for the machine data can be triggered directly from the HMI. Provided classes of Plastic Base Application, which offer both machine data and a HMI class, offer the class as an instance fb Param Handle. Access to the Md-HMI function blocks is not recommended The Md-HMI function blocks are only to be used for the automated creation of parameter pages in the HMI. As these function blocks only provide reference access to other objects, it is recommended to use the parameters directly at the source locations. • The source location can be determined using the Md Xyz Parameter() methods of the associated MD function block. • Alternatively, the source locations can be viewed via the FB_Md Xyz [} 122] descriptions. • Example of correct source access: Instead of FB_Md Axis Hmi. Drive Reversed, use the axis interface I_Axis Base. Motion Params. Drive Reversed directly. Subitems The \Machine Data\Subitems\ subfolder contains several classes, interfaces and enumerations that contribute to the functionality of the machine data classes. 116 Version: 1.4.0 TF85xx
## Page 117

PLC-API - Class overview Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.6.1 Base 6.6.1.1 FB_Md Base Container The class extends the TF8560 FB_Md Container by the machine data encoding of the Twin CAT 3 Plastic Application. In addition, errors that occur can be evaluated using Boolean values and file storage is simplified. Syntax: FUNCTION_BLOCK FB_Md Base Container EXTENDS FB_Md Container Properties Name Type Access Initial value Description Aborted BOOL Get FALSE The error that occurred was caused by an abort Allow Folder Creation BOOL Get, Set TRUE Allows the container to create the folder structure for storing the machine data. Crc Invalid BOOL Get FALSE The error that occurred was caused by an incorrect CRC checksum. Created I_Time [} 307] Get - Time of the first creation of a file Details I_Md Base Container Det Get THIS^ Summarizes the properties of ails the file details. Error Details I_Md Base Container Err Get THIS^ Summarizes the properties of ors the error information. Error Id UDINT Get 0 Error ID of the last occurred error File Access Denied BOOL Get FALSE The error that occurred was caused by missing file access rights. File Notfound BOOL Get FALSE The error that occurred was caused by the absence of the file. Ignore Missmatches BOOL Get, Set FALSE Forces the container to load a file despite version collision. Last Stored I_Time [} 307] Get - Time of the last storage process Missmatch Base App BOOL Get FALSE The version conflict that has occurred is in the versions of the Twin CAT Base Application library. TF85xx Version: 1.4.0 117
## Page 118

PLC-API - Class overview Name Type Access Initial value Description Missmatch Detected BOOL Get FALSE The error that occurred was caused by a version conflict. Missmatch Idx Format BOOL Get FALSE The version of the index coding causes the version conflict that occurred. Settings I_Md Base Container Set Get THIS^ Summarizes the properties for tings setting the container. Store Count UDINT Get 0 Counts the iterations of file write operations since the file was created. Unknown Parameter BOOL Get FALSE The occurred error was caused by an unknown parameter in the file. Version Base App I_Lib Version [} 351] Get - Version of the Plastic Base Application library Version Base App Loaded I_Lib Version [} 351] Get - Version of the Plastic Base Application library from the loaded file Version Idx Format I_Idx Format Version Get - Index coding version Creation Date1 DATE_AND_TIME Get DT#1970-1-1- Date of the first creation of a 0:0:0 file Alternatively: Created. Dn T Store Date1 DATE_AND_TIME Get DT#1970-1-1- Date of the last saving 0:0:0 process Alternatively: Last Stored. Dn T Tc3_Plastic Functions. FB_Md Container Further characteristics <> <> <> Implemented by FB_Md Container 1 Obsolete Methods Name Description Add Component(i New) Adds another component to the container. Create Filepath(s Namespace) Creates a new file path based on the container name [INTERN] Compare File Version() Compares the passed versions with the defined version in the source code. [INTERN] Overwrite From File() Used by the FB_Md File Info class to update the loaded version in the container. Abort Loading()1 Aborts the loading of a file. Alternatively: . Abort() Abort Saving()1 Aborts the saving of a file. Alternatively: . Abort() Tc3_Plastic Functions. FB_Md Container Other methods Implemented by FB_Md Container. 1Obsolete 118 Version: 1.4.0 TF85xx
## Page 119

PLC-API - Class overview Machine data Component Description Index range Number of in- stances FB_Md File Info [} 133] File information 0x0000 Fxxx 1 Interfaces Type Description I_Md Base Container Standard interface on FB_Md Base Container I_Md Base Container Dev Extended interface with access to the methods marked as "[INTERN]" I_Md Base Container Details Interface to the properties with file-related information (e.g. Creation Date) I_Md Base Container Errors Interface to the properties with error information I_Md Base Container Settings Interface to the properties with settings of the container Prerequisites Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.10.2.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.6.1.2 FB_Md Base Component The class extends the standard component FB_Md Component of the TF8560 utilities by functions of the index coding of the Plastic Base Application. Syntax: FUNCTION_BLOCK FB_Md Base Component EXTENDS FB_Md Component Properties Name Type Access Initial value Description Connected BOOL Get FALSE Component is connected to its dependencies (except for the MD container). FB_Md Base Component Linked Container I_Md Base Container Get NULL Points to the container to which the component was [} 117] appended. Tc3_Plastic Functions. FB_Md Component Further characteristics <> <> <> Implemented by FB_Md Component Methods Name Description Add Next Component() Adds the subsequent component to the component (list). TF85xx Version: 1.4.0 119
## Page 120

PLC-API - Class overview Name Description FB_Md Base Component [PROTECTED] Used with inheriting classes to initialize the encoding offset after Config Comp Type(e Comp Type) E_Standard Comp Type. [PROTECTED] Used with the inheriting class to initialize the encoding offset. Config Comp Type Ex(…) [PROTECTED] Next String(…) Simplified method for reading a text-based machine data parameter. This method is used within the Md Next Parameter(...) Callback method. [PROTECTED] Set String(…) Simplified method for writing a text-based machine data parameter. This method is used within the Md Set Parameter(...) Callback method. Tc3_Plastic Functions. FB_Md Component Other methods Implemented by FB_Md Component. Event-driven methods (callback methods) Name Description Md Next Parameter(…) Container call for saving the parameters in a file, implemented by FB_Md Component. Md Set Parameter(…) Container call for loading the parameters into the runtime, implemented by FB_Md Component. Interfaces Type Description I_Md Component Standard interface on FB_Md Component I_Md Base Component Standard interface on FB_Md Base Component Further interfaces Implemented by FB_Md Component Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.8.1.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.6.1.3 FB_Md Collection The class can store a collection of components of a class type. When attaching the class to FB_Base Runtime, components of objects implementing the interface I_Attachable Md Interface can be collected and attached to the collection. Time of filling If the collection is operated as a participant of the FB_Base Runtime [} 270], this is filled after the Param Init but before the machine data is loaded. Accordingly, all elements that are attached to the runtime at the time of the successful Param Init are checked for transfer to the collection. Syntax: FUNCTION_BLOCK FB_Md Collection EXTENDS FB_Base 120 Version: 1.4.0 TF85xx
## Page 121

PLC-API - Class overview Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Md Collection Machine Data I_Md Base Container Get <Local> Interface to the internal machine data container [} 117] FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Methods Name Description Reset() Resets the error state of the class. FB_Md Collection Add Component(i Component) Adds a component to the collection: • Automatically increments Component Index of the attached components. Refuses components that do not match the prototype. [PROTECTED] Returns an ID used among the supported types. Check Type(i Component) Set Prototype(i Component) Fixes the type of the component to be collected by the runtime. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Interfaces Type Description I_Base Standard interface on FB_Base. I_Md Collection Standard interface on FB_Md Collection I_One Task Interface Runtime interface for a PLC task I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. TF85xx Version: 1.4.0 121
## Page 122

PLC-API - Class overview Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.42 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.6.0) 6.6.2 Components 6.6.2.1 FB_Md Actuator This machine data component contains parameters that are relevant for motion objects with linear Boolean actuators. Syntax: FUNCTION_BLOCK FB_Md Actuator EXTENDS FB_Md Base Component Machine data Index (Identifier) Parameter PLC storage location 0x0000 8010 Feedback Reversed Motion. Motion Params 0x0000 8011 Output Reversed Working directions 0x0000 81xx Base Pos Motion. Motion Params. Actuator Base 0x0000 82xx Work Pos Motion. Motion Params. Actuator Work Parameters per working direction 0x0000 8x10 Feedback Delay On In each case in the working direction 0x0000 8x11 Feedback Delay Off 0x0000 8x12 Invert Feedback 0x0000 8x13 Hold Output 0x0000 8x14 Timeout 0x0000 8x15 Use Impulse 0x0000 8x16 Latch Feedback 0x0000 8x20 Return Time 0x0000 8x21 Return Time Ena Properties Name Type Access Initial value Description Connected BOOL Get FALSE Component is connected to its dependencies (except for the MD container). FB_Md Base Component Linked Container I_Md Base Container Get NULL Points to the container to which the component was [} 117] appended. Tc3_Plastic Functions. FB_Md Component 122 Version: 1.4.0 TF85xx
## Page 123

PLC-API - Class overview Name Type Access Initial value Description Further characteristics <> <> <> Implemented by FB_Md Component Methods Name Description Add Next Component() Adds the subsequent component to the component (list). FB_Md Actuator Connect(ip Actr Functions, Connects the component with the necessary dependencies. ip Actr Functions Hmi) FB_Md Base Component [PROTECTED] Used with inheriting classes to initialize the encoding offset after Config Comp Type(e Comp Type) E_Standard Comp Type. [PROTECTED] Used with the inheriting class to initialize the encoding offset. Config Comp Type Ex(…) [PROTECTED] Next String(…) Simplified method for reading a text-based machine data parameter. This method is used within the Md Next Parameter(...) Callback method. [PROTECTED] Set String(…) Simplified method for writing a text-based machine data parameter. This method is used within the Md Set Parameter(...) Callback method. Tc3_Plastic Functions. FB_Md Component Other methods Implemented by FB_Md Component. Event-driven methods (callback methods) Name Description Md Next Parameter(…) Container call for saving the parameters in a file, implemented by FB_Md Component. Md Set Parameter(…) Container call for loading the parameters into the runtime, implemented by FB_Md Component. Interfaces Type Description I_Md Component Standard interface on FB_Md Component I_Md Actuator Standard interface on FB_Md Actuator. I_Md Base Component Standard interface on FB_Md Base Component Further interfaces Implemented by FB_Md Component Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.6.2.2 FB_Md Analog Value TF85xx Version: 1.4.0 123
## Page 124

PLC-API - Class overview This machine data component contains parameters that are relevant for analog scaled I/Os. Syntax: FUNCTION_BLOCK FB_Md Analog Value EXTENDS FB_Md Base Component Machine data Index (Identifier) Parameter PLC storage location 0x0000 6010 Scaling Raw Min FB_Scale Analog Hmi [} 47] 0x0000 6011 Scaling Raw Max 0x0000 6020 Scaling Value Min 0x0000 6021 Scaling Value Max 0x0000 6030 Scaling Electrical Min 0x0000 6031 Scaling Electrical Max 0x0000 604x Unit Value (16 indices) 0x0000 605x Unit Electrical (16 indices) 0x0000 6110 Limit L FB_Monitoring Hmi [} 53] 0x0000 6111 Limit LL 0x0000 6112 Limit H 0x0000 6113 Limit HH Properties Name Type Access Initial value Description Connected BOOL Get FALSE Component is connected to its dependencies (except for the MD container). FB_Md Analog Value Connected Monitoring BOOL Get FALSE Component is connected to a Monitoring class to save additional parameters. FB_Md Base Component Linked Container I_Md Base Container Get NULL Points to the container to which the component was [} 117] appended. Tc3_Plastic Functions. FB_Md Component Further characteristics <> <> <> Implemented by FB_Md Component Methods Name Description Add Next Component() Adds the subsequent component to the component (list). FB_Md Analog Value Connect(ip Scalings) Connects the component with the necessary dependencies. Connect Monitoring(ip Monitori Connects the component to other optional dependencies. ng) FB_Md Base Component [PROTECTED] Used with inheriting classes to initialize the encoding offset after Config Comp Type(e Comp Type) E_Standard Comp Type. 124 Version: 1.4.0 TF85xx
## Page 125

PLC-API - Class overview Name Description [PROTECTED] Used with the inheriting class to initialize the encoding offset. Config Comp Type Ex(…) [PROTECTED] Next String(…) Simplified method for reading a text-based machine data parameter. This method is used within the Md Next Parameter(...) Callback method. [PROTECTED] Set String(…) Simplified method for writing a text-based machine data parameter. This method is used within the Md Set Parameter(...) Callback method. Tc3_Plastic Functions. FB_Md Component Other methods Implemented by FB_Md Component. Event-driven methods (callback methods) Name Description Md Next Parameter(…) Container call for saving the parameters in a file, implemented by FB_Md Component. Md Set Parameter(…) Container call for loading the parameters into the runtime, implemented by FB_Md Component. Interfaces Type Description I_Md Component Standard interface on FB_Md Component I_Md Analog Value Standard interface on FB_Md Analog Value. I_Md Base Component Standard interface on FB_Md Base Component Further interfaces Implemented by FB_Md Component Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 6.6.2.3 FB_Md Axis This machine data component contains the writeable parameters of a TF8560 axis. Syntax: FUNCTION_BLOCK FB_Md Axis EXTENDS FB_Md Base Component Machine data Index (Identifier) Parameter PLC storage location 0x0000 03E8 Soft End Min Ena Axis. Motion Params 0x0000 03E9 Soft End Min 0x0000 03EA Sot End Max Ena 0x0000 03EB Soft End Max 0x0000 044C Velo Max Application TF85xx Version: 1.4.0 125
## Page 126

PLC-API - Class overview Index (Identifier) Parameter PLC storage location 0x0000 044D Velo Max System 0x0000 044F Velo Min Application 0x0000 04B0 Max Acceleration 0x0000 04B1 Max Deceleration 0x0000 04B2 Encoder Reversed 0x0000 07D1 Encoder Weighting 0x0000 07D2 Encoder Interpolation 0x0000 07D3 Encoder Zero Shift 0x0000 07D4 Drive Reversed 0x0000 0FA1 Lag Kp 0x0000 0FA2 Creep Distance P 0x0000 0FA3 Creep Distance M 0x0000 0FA4 Creep Speed P 0x0000 0FA5 Creep Speed M 0x0000 0FA6 Brake Distance P 0x0000 0FA7 Brake Distance M 0x0000 0FA8 Auto Brake Calculation 0x0000 0FA9 Asym Targeting 0x0000 1388 Lag Monitored 0x0000 1389 Lag Limit 0x0000 138A Lag Filter 0x0000 138B Velo Lag Monitored 0x0000 138C Velo Lag Limit 0x0000 1770 Scaling Oil Pressure 0x0000 181x Unit Group (16 indices) FB_Axis Hmi [} 192] Properties Name Type Access Initial value Description Connected BOOL Get FALSE Component is connected to its dependencies (except for the MD container). FB_Md Base Component Linked Container I_Md Base Container Get NULL Points to the container to which the component was [} 117] appended. Tc3_Plastic Functions. FB_Md Component Further characteristics <> <> <> Implemented by FB_Md Component Methods Name Description Add Next Component() Adds the subsequent component to the component (list). FB_Md Axis Connect(ip Axis, ip Axis Hmi) Connects the component with the necessary dependencies. FB_Md Base Component 126 Version: 1.4.0 TF85xx
## Page 127

PLC-API - Class overview Name Description [PROTECTED] Used with inheriting classes to initialize the encoding offset after Config Comp Type(e Comp Type) E_Standard Comp Type. [PROTECTED] Used with the inheriting class to initialize the encoding offset. Config Comp Type Ex(…) [PROTECTED] Next String(…) Simplified method for reading a text-based machine data parameter. This method is used within the Md Next Parameter(...) Callback method. [PROTECTED] Set String(…) Simplified method for writing a text-based machine data parameter. This method is used within the Md Set Parameter(...) Callback method. Tc3_Plastic Functions. FB_Md Component Other methods Implemented by FB_Md Component. Event-driven methods (callback methods) Name Description Md Next Parameter(…) Container call for saving the parameters in a file, implemented by FB_Md Component. Md Set Parameter(…) Container call for loading the parameters into the runtime, implemented by FB_Md Component. Interfaces Type Description I_Md Component Standard interface on FB_Md Component I_Md Axis Standard interface on FB_Md Axis. I_Md Base Component Standard interface on FB_Md Base Component Further interfaces Implemented by FB_Md Component Requirements Development Environment Target platform PLC libraries to include Twin CAT 4026 >= v3.1.4026.16 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.12.0.0) Twin CAT 4024 >= v3.1.4024.66 6.6.2.4 FB_Md Blowpin This machine data component contains parameters that are specifically relevant for a blow pin. Syntax: FUNCTION_BLOCK FB_Md Blowpin EXTENDS FB_Md Base Component Machine data Index (Identifier) Parameter PLC storage location 0x0001 0010 Clamping Distance FB_Blowpin Hmi [} 71]. Moves 0x0001 0011 Clamping Velocity [} 246](1) 0x0001 0012 Clamping Duration Max FB_Blowpin Hmi [} 71] TF85xx Version: 1.4.0 127
## Page 128

PLC-API - Class overview Index (Identifier) Parameter PLC storage location 0x0001 0013 Clamping Ramp Max Properties Name Type Access Initial value Description Connected BOOL Get FALSE Component is connected to its dependencies (except for the MD container). FB_Md Base Component Linked Container I_Md Base Container Get NULL Points to the container to which the component was [} 117] appended. Tc3_Plastic Functions. FB_Md Component Further characteristics <> <> <> Implemented by FB_Md Component Methods Name Description Add Next Component() Adds the subsequent component to the component (list). FB_Md Ptp Motion Connect(ip Blowpin, Connects the component with the necessary dependencies. ip Blowpin Hmi) FB_Md Base Component [PROTECTED] Used with inheriting classes to initialize the encoding offset after Config Comp Type(e Comp Type) E_Standard Comp Type. [PROTECTED] Used with the inheriting class to initialize the encoding offset. Config Comp Type Ex(…) [PROTECTED] Next String(…) Simplified method for reading a text-based machine data parameter. This method is used within the Md Next Parameter(...) Callback method. [PROTECTED] Set String(…) Simplified method for writing a text-based machine data parameter. This method is used within the Md Set Parameter(...) Callback method. Tc3_Plastic Functions. FB_Md Component Other methods Implemented by FB_Md Component. Event-driven methods (callback methods) Name Description Md Next Parameter(…) Container call for saving the parameters in a file, implemented by FB_Md Component. Md Set Parameter(…) Container call for loading the parameters into the runtime, implemented by FB_Md Component. Interfaces Type Description I_Md Component Standard interface on FB_Md Component I_Md Blowpin Standard interface on FB_Md Blowpin I_Md Base Component Standard interface on FB_Md Base Component Further interfaces Implemented by FB_Md Component 128 Version: 1.4.0 TF85xx
## Page 129

PLC-API - Class overview Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 6.6.2.5 FB_Md Carriage This machine data component contains parameters that are specifically relevant for a trolley unit. Syntax: FUNCTION_BLOCK FB_Md Carriage EXTENDS FB_Md Base Component Machine data Index (Identifier) Parameter PLC storage location 0x0001 2010 Smooth Start FB_Carriage Hmi [} 220] 0x0001 2011 Smooth Start Factor 0x0001 2012 Smooth Start Threshold 0x0001 2020 Dynamic Scaler Properties Name Type Access Initial value Description Connected BOOL Get FALSE Component is connected to its dependencies (except for the MD container). FB_Md Base Component Linked Container I_Md Base Container Get NULL Points to the container to which the component was [} 117] appended. Tc3_Plastic Functions. FB_Md Component Further characteristics <> <> <> Implemented by FB_Md Component Methods Name Description Add Next Component() Adds the subsequent component to the component (list). FB_Md Carriage Connect(ip Carriage, Connects the component with the necessary dependencies. ip Carriage Hmi) FB_Md Base Component [PROTECTED] Used with inheriting classes to initialize the encoding offset after Config Comp Type(e Comp Type) E_Standard Comp Type. [PROTECTED] Used with the inheriting class to initialize the encoding offset. Config Comp Type Ex(…) [PROTECTED] Next String(…) Simplified method for reading a text-based machine data parameter. This method is used within the Md Next Parameter(...) Callback method. TF85xx Version: 1.4.0 129
## Page 130

PLC-API - Class overview Name Description [PROTECTED] Set String(…) Simplified method for writing a text-based machine data parameter. This method is used within the Md Set Parameter(...) Callback method. Tc3_Plastic Functions. FB_Md Component Other methods Implemented by FB_Md Component. Event-driven methods (callback methods) Name Description Md Next Parameter(…) Container call for saving the parameters in a file, implemented by FB_Md Component. Md Set Parameter(…) Container call for loading the parameters into the runtime, implemented by FB_Md Component. Interfaces Type Description I_Md Component Standard interface on FB_Md Component I_Md Carriage Standard interface on FB_Md Carriage. I_Md Base Component Standard interface on FB_Md Base Component Further interfaces Implemented by FB_Md Component Prerequisites Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.10.2.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.6.2.6 FB_Md Clamp This machine data component contains parameters that are specifically relevant for a clamp. Syntax: FUNCTION_BLOCK FB_Md Clamp EXTENDS FB_Md Base Component Machine data Index (Identifier) Parameter PLC storage location 0x0001 1011 Lock Velocity FB_Clamp Hmi [} 224] 0x0001 1012 Lock Limiting 0x0001 1013 Lock Distance 0x0001 1020 Unlock Position 0x0001 1021 Unlock Velocity 0x0001 1022 Unlock Limiting 0x0001 1010 Lock Position1 1Obsolete 130 Version: 1.4.0 TF85xx
## Page 131

PLC-API - Class overview Properties Name Type Access Initial value Description Connected BOOL Get FALSE Component is connected to its dependencies (except for the MD container). FB_Md Base Component Linked Container I_Md Base Container Get NULL Points to the container to which the component was [} 117] appended. Tc3_Plastic Functions. FB_Md Component Further characteristics <> <> <> Implemented by FB_Md Component Methods Name Description Add Next Component() Adds the subsequent component to the component (list). FB_Md Clamp Connect(ip Clamp, Connects the component with the necessary dependencies. ip Clamp Hmi) FB_Md Base Component [PROTECTED] Used with inheriting classes to initialize the encoding offset after Config Comp Type(e Comp Type) E_Standard Comp Type. [PROTECTED] Used with the inheriting class to initialize the encoding offset. Config Comp Type Ex(…) [PROTECTED] Next String(…) Simplified method for reading a text-based machine data parameter. This method is used within the Md Next Parameter(...) Callback method. [PROTECTED] Set String(…) Simplified method for writing a text-based machine data parameter. This method is used within the Md Set Parameter(...) Callback method. Tc3_Plastic Functions. FB_Md Component Other methods Implemented by FB_Md Component. Event-driven methods (callback methods) Name Description Md Next Parameter(…) Container call for saving the parameters in a file, implemented by FB_Md Component. Md Set Parameter(…) Container call for loading the parameters into the runtime, implemented by FB_Md Component. Interfaces Type Description I_Md Component Standard interface on FB_Md Component I_Md Clamp Standard interface on FB_Md Clamp. I_Md Base Component Standard interface on FB_Md Base Component Further interfaces Implemented by FB_Md Component TF85xx Version: 1.4.0 131
## Page 132

PLC-API - Class overview Prerequisites Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.10.2.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.6.2.7 FB_Md Continuous Motion This machine data component contains parameters that are relevant for continuous motion such as an extruder. Syntax: FUNCTION_BLOCK FB_Md Continuous Motion EXTENDS FB_Md Base Component Machine data Index (Identifier) Parameter PLC storage location 0x0000 2410 Ramp Time FB_Extruder Hmi [} 234] 0x0000 2411 Consider Ramp Amp1 1Obsolete Properties Name Type Access Initial value Description Connected BOOL Get FALSE Component is connected to its dependencies (except for the MD container). FB_Md Base Component Linked Container I_Md Base Container Get NULL Points to the container to which the component was [} 117] appended. Tc3_Plastic Functions. FB_Md Component Further characteristics <> <> <> Implemented by FB_Md Component Methods Name Description Add Next Component() Adds the subsequent component to the component (list). FB_Md Continuous Motion Connect(ip Extruder, Connects the component with the necessary dependencies. ip Extruder Hmi) FB_Md Base Component [PROTECTED] Used with inheriting classes to initialize the encoding offset after Config Comp Type(e Comp Type) E_Standard Comp Type. [PROTECTED] Used with the inheriting class to initialize the encoding offset. Config Comp Type Ex(…) 132 Version: 1.4.0 TF85xx
## Page 133

PLC-API - Class overview Name Description [PROTECTED] Next String(…) Simplified method for reading a text-based machine data parameter. This method is used within the Md Next Parameter(...) Callback method. [PROTECTED] Set String(…) Simplified method for writing a text-based machine data parameter. This method is used within the Md Set Parameter(...) Callback method. Tc3_Plastic Functions. FB_Md Component Other methods Implemented by FB_Md Component. Event-driven methods (callback methods) Name Description Md Next Parameter(…) Container call for saving the parameters in a file, implemented by FB_Md Component. Md Set Parameter(…) Container call for loading the parameters into the runtime, implemented by FB_Md Component. Interfaces Type Description I_Md Component Standard interface on FB_Md Component I_Md Continuous Motion Standard interface on FB_Md Continuous Motion. I_Md Base Component Standard interface on FB_Md Base Component Further interfaces Implemented by FB_Md Component Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.8.1.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.6.2.8 FB_Md File Info This machine data component contains information about the previous saving processes of a machine data file. Syntax: FUNCTION_BLOCK FB_Md File Info EXTENDS FB_Md Base Component Machine data Index (Identifier) Parameter PLC storage location 0x0000 F010 Index Format Major - 1st version digit FB_Md Base Component [} 117] Version 0x0000 F011 Minor - 2nd version digit 0x0000 F012 Tag - Textual identifier 0x0000 F020 Base Application Major - 1st version digit Version 0x0000 F021 Minor - 2nd version digit TF85xx Version: 1.4.0 133
## Page 134

PLC-API - Class overview Index (Identifier) Parameter PLC storage location 0x0000 F022 Build - 3rd version digit 0x0000 F023 Revision - 4th version digit 0x0000 F030 Store Count 0x0000 F040 Store Date 0x0000 F050 Creation Date Properties Name Type Access Initial value Description Connected BOOL Get FALSE Component is connected to its dependencies (except for the MD container). FB_Md Base Component Linked Container I_Md Base Container Get NULL Points to the container to which the component was [} 117] appended. Tc3_Plastic Functions. FB_Md Component Further characteristics <> <> <> Implemented by FB_Md Component Methods Name Description Add Next Component() Adds the subsequent component to the component (list). FB_Md File Info Connect(ip Container) Connects the component with the necessary dependencies. FB_Md Base Component [PROTECTED] Used with inheriting classes to initialize the encoding offset after Config Comp Type(e Comp Type) E_Standard Comp Type. [PROTECTED] Used with the inheriting class to initialize the encoding offset. Config Comp Type Ex(…) [PROTECTED] Next String(…) Simplified method for reading a text-based machine data parameter. This method is used within the Md Next Parameter(...) Callback method. [PROTECTED] Set String(…) Simplified method for writing a text-based machine data parameter. This method is used within the Md Set Parameter(...) Callback method. Tc3_Plastic Functions. FB_Md Component Other methods Implemented by FB_Md Component. Event-driven methods (callback methods) Name Description Md Next Parameter(…) Container call for saving the parameters in a file, implemented by FB_Md Component. Md Set Parameter(…) Container call for loading the parameters into the runtime, implemented by FB_Md Component. Interfaces Type Description I_Md Component Standard interface on FB_Md Component 134 Version: 1.4.0 TF85xx
## Page 135

PLC-API - Class overview Type Description I_Md File Info Standard interface on FB_Md File Info. I_Md Base Component Standard interface on FB_Md Base Component Further interfaces Implemented by FB_Md Component Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 6.6.2.9 FB_Md Homing This machine data component contains parameters that are relevant for homing an axis. Syntax: FUNCTION_BLOCK FB_Md Homing EXTENDS FB_Md Base Component Machine data Index (Identifier) Parameter PLC storage location 0x0000 3001 Setup. Enable Md Auto Save FB_Axis Homing Setup Hmi [} 508] 0x0000 3010 Setup. Time Limit Max 0x0000 3011 Setup. Detection Velo Time Max 0x0000 3020 Setup. Distance Max 0x0000 3021 Setup. Position Min 0x0000 3022 Setup. Position Max Groups (homing procedure) 0x0000 31xx Homing Abs Switch FB_Axis Homing Abs Switch Hmi [} 508] 0x0000 32xx Homing Block FB_Axis Homing Block Hmi [} 508] 0x0000 33xx Homing Block Detect FB_Axis Homing Block Detect Hmi [} 508] 0x0000 3Fxx Homing Finish FB_Axis Homing Finish Hmi [} 508] Parameters per group 0x0000 3x10 Homing. Acceleration Each in the group 0x0000 3x11 Homing. Deceleration 0x0000 3x12 Homing. Jerk 0x0000 3x13 Homing. Velocity 0x0000 3x14 Homing. Distance 0x0000 3x20 Homing. Time Limit 0x0000 3x21 Homing. Torque Limit 0x0000 3x22 Homing. Distance Limit 0x0000 3x23 Homing. Detect. Velocity Limit 0x0000 3x23 Homing. Detect. Velocity Time TF85xx Version: 1.4.0 135
## Page 136

PLC-API - Class overview Index (Identifier) Parameter PLC storage location 0x0000 3x30 Homing. Torque Tolerance 0x0000 3x40 Homing. Set Position 0x0000 3x50 Homing. Direction 0x0000 3x51 Homing. Switch Mode 0x0000 3x60 Homing. Option. Disable Drive Access 0x0000 3x61 Homing. Option. Lag Error Detection 0x0000 3x62 Homing. Option. Instant Lag Reduction 0x0000 3x63 Homing. Option. Torque Polarity Inverted Properties Name Type Access Initial value Description Connected BOOL Get FALSE Component is connected to its dependencies (except for the MD container). FB_Md Base Component Linked Container I_Md Base Container Get NULL Points to the container to which the component was [} 117] appended. Tc3_Plastic Functions. FB_Md Component Further characteristics <> <> <> Implemented by FB_Md Component Methods Name Description Add Next Component() Adds the subsequent component to the component (list). FB_Md Homing Connect(ip Axis Base, Connects the component with the necessary dependencies. ip Axis Hmi) FB_Md Base Component [PROTECTED] Used with inheriting classes to initialize the encoding offset after Config Comp Type(e Comp Type) E_Standard Comp Type. [PROTECTED] Used with the inheriting class to initialize the encoding offset. Config Comp Type Ex(…) [PROTECTED] Next String(…) Simplified method for reading a text-based machine data parameter. This method is used within the Md Next Parameter(...) Callback method. [PROTECTED] Set String(…) Simplified method for writing a text-based machine data parameter. This method is used within the Md Set Parameter(...) Callback method. Tc3_Plastic Functions. FB_Md Component Other methods Implemented by FB_Md Component. Event-driven methods (callback methods) Name Description Md Next Parameter(…) Container call for saving the parameters in a file, implemented by FB_Md Component. Md Set Parameter(…) Container call for loading the parameters into the runtime, implemented by FB_Md Component. 136 Version: 1.4.0 TF85xx
## Page 137

PLC-API - Class overview Interfaces Type Description I_Md Component Standard interface on FB_Md Component I_Md Homing Standard interface on FB_Md Homing. I_Md Base Component Standard interface on FB_Md Base Component Further interfaces Implemented by FB_Md Component Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 6.6.2.10 FB_Md Nc This machine data component contains parameters that are relevant for NC-based axes. Syntax: FUNCTION_BLOCK FB_Md Nc EXTENDS FB_Md Base Component Machine data Index (Identifier) Parameter PLC storage location 0x0000 2210 Limiting. Capacity FB_Nc Functions [} 183]Hmi 0x0000 2211 Limiting. Reference Value Axis. Limiting 0x0000 2213 Limiting. Idle Value 0x0000 2214 Limiting. Max Value Properties Name Type Access Initial value Description Connected BOOL Get FALSE Component is connected to its dependencies (except for the MD container). FB_Md Base Component Linked Container I_Md Base Container Get NULL Points to the container to which the component was [} 117] appended. Tc3_Plastic Functions. FB_Md Component Further characteristics <> <> <> Implemented by FB_Md Component Methods Name Description Add Next Component() Adds the subsequent component to the component (list). FB_Md Nc TF85xx Version: 1.4.0 137
## Page 138

PLC-API - Class overview Name Description Connect(ip Nc Functions, Connects the component with the necessary dependencies ip Nc Functions Hmi) FB_Md Base Component [PROTECTED] Used with inheriting classes to initialize the encoding offset after Config Comp Type(e Comp Type) E_Standard Comp Type. [PROTECTED] Used with the inheriting class to initialize the encoding offset. Config Comp Type Ex(…) [PROTECTED] Next String(…) Simplified method for reading a text-based machine data parameter. This method is used within the Md Next Parameter(...) Callback method. [PROTECTED] Set String(…) Simplified method for writing a text-based machine data parameter. This method is used within the Md Set Parameter(...) Callback method. Tc3_Plastic Functions. FB_Md Component Other methods Implemented by FB_Md Component. Event-driven methods (callback methods) Name Description Md Next Parameter(…) Container call for saving the parameters in a file, implemented by FB_Md Component. Md Set Parameter(…) Container call for loading the parameters into the runtime, implemented by FB_Md Component. Interfaces Type Description I_Md Component Standard interface on FB_Md Component I_Md Nc Standard interface on FB_Md Nc. I_Md Base Component Standard interface on FB_Md Base Component Further interfaces Implemented by FB_Md Component Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 6.6.2.11 FB_Md Ptp Motion This machine data component contains parameters that are relevant for linear motion. Syntax: FUNCTION_BLOCK FB_Md Ptp Motion EXTENDS FB_Md Base Component Machine data Index (Identifier) Parameter PLC storage location 0x0000 2010 Jog Velocity Pos FB_Motion Hmi [} 185] 138 Version: 1.4.0 TF85xx
## Page 139

PLC-API - Class overview Index (Identifier) Parameter PLC storage location 0x0000 2011 Jog Velocity Neg 0x0000 2030 Tool Adaption. Offset Axis. Motion Params 0x0000 2031 Tool Adaption. Inverted Properties Name Type Access Initial value Description Connected BOOL Get FALSE Component is connected to its dependencies (except for the MD container). FB_Md Base Component Linked Container I_Md Base Container Get NULL Points to the container to which the component was [} 117] appended. Tc3_Plastic Functions. FB_Md Component Further characteristics <> <> <> Implemented by FB_Md Component Methods Name Description Add Next Component() Adds the subsequent component to the component (list). FB_Md Ptp Motion Connect(ip Axis, ip Axis Hmi) Connects the component with the necessary dependencies. FB_Md Base Component [PROTECTED] Used with inheriting classes to initialize the encoding offset after Config Comp Type(e Comp Type) E_Standard Comp Type. [PROTECTED] Used with the inheriting class to initialize the encoding offset. Config Comp Type Ex(…) [PROTECTED] Next String(…) Simplified method for reading a text-based machine data parameter. This method is used within the Md Next Parameter(...) Callback method. [PROTECTED] Set String(…) Simplified method for writing a text-based machine data parameter. This method is used within the Md Set Parameter(...) Callback method. Tc3_Plastic Functions. FB_Md Component Other methods Implemented by FB_Md Component. Event-driven methods (callback methods) Name Description Md Next Parameter(…) Container call for saving the parameters in a file, implemented by FB_Md Component. Md Set Parameter(…) Container call for loading the parameters into the runtime, implemented by FB_Md Component. Interfaces Type Description I_Md Component Standard interface on FB_Md Component I_Md Ptp Motion Standard interface on FB_Md Ptp Motion. I_Md Base Component Standard interface on FB_Md Base Component TF85xx Version: 1.4.0 139
## Page 140

PLC-API - Class overview Type Description Further interfaces Implemented by FB_Md Component Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 6.6.2.12 FB_Md Temp Channel This machine data component contains parameters that are relevant for a temperature channel. Syntax: FUNCTION_BLOCK FB_Md Temp Channel EXTENDS FB_Md Temp Zone Machine data Index (Identifier) Parameter PLC storage location 0x0000 4010 Group ID (Module ID) FB_Temperature [} 273]. Channel( [} 291]x) [} 291] 0x0000 4040 Tuning Last Execution FB_Temperature 0x0000 4041 Tuning Required [} 273]. Channel( [} 291]x) 0x0000 4050 Config ID [} 291] 0x0000 4051 Channel Idx 0x0000 4011 Zone ID FB_Temperature 0x0000 4012 Supply ID [} 273]. Channel( [} 291]x) 0x0000 4013 Extruder ID [} 291] 0x0000 4020 Output Sel_C 0x0000 4021 Output Sel_H 0x0000 4022 Output Delay 0x0000 403x Zone Name (15 indices) 0x0000 4040 Tuning Last Execution 0x0000 4041 Tuning Required 0x0000 4050 Config ID 0x0000 4051 Channel Idx 0x0000 4100 Temp Sens Term 0x0000 4101 Sensor Type 0x0000 4102 Term Channel 0x0000 4103 Tuning Method 0x0000 4110 Cold Junction. Comp Mode 0x0000 4111 Cold Junction. Comp Zone 0x0000 4112 Cooler Swap Idx 0x0000 4113 Heater Swap Idx 0x0000 4114 Sens Term Swap Idx 140 Version: 1.4.0 TF85xx
## Page 141

PLC-API - Class overview Index (Identifier) Parameter PLC storage location 0x0000 4160 Sensor Offset 0x0000 4161 Sensor Lower Range 0x0000 4162 Sensor Upper Range 0x0000 4163 Act Temp Gain 0x0000 4164 Act Temp Offset 0x0000 4165 Act Temp Filter 0x0000 4200 In Use 0x0000 4201 Enable 0x0000 4202 Use Cooling 0x0000 4203 Tune Cooling 0x0000 4204 Forced Cooling Enabled 0x0000 4205 Extruder Comp Ena 0x0000 4206 Enable Error Heating 0x0000 4207 No Fan While Trackdown 0x0000 4208 Open Loop Heating 0x0000 4209 Tune Extruder Comp 0x0000 420A Tune Heater Load 0x0000 420B Tune Idle Load 0x0000 420C Enable Act Temp Filter 0x0000 4210 Hibernate ICtrl Heat 0x0000 4211 Hibernate ICtrl Cool 0x0000 4212 High Precision 0x0000 4213 Disable Auto Step 0x0000 4214 Disable Terminal Com 0x0000 4215 Disable Dpart For Cooling 0x0000 4216 Disable Fan For Adapting 0x0000 4300 Kp (Heat/Cool) 0x0000 4301 0x0000 4302 Td (Heat/Cool) 0x0000 4303 0x0000 4304 Tn (Heat/Cool) 0x0000 4305 0x0000 4306 Tv (Heat/Cool) 0x0000 4307 0x0000 4308 Kff (Heat/Cool) 0x0000 4309 0x0000 430A ICtrl Limit 0x0000 430C Gain PID (Heat/Cool) 0x0000 430D 0x0000 4320 Tune End 0x0000 4321 Tune Kp 0x0000 4322 Tune Td 0x0000 4323 Tune Tn 0x0000 4324 Tune Tv 0x0000 4325 Tune Y 0x0000 4326 Overshoot 0x0000 4327 d Tmax TF85xx Version: 1.4.0 141
## Page 142

PLC-API - Class overview Index (Identifier) Parameter PLC storage location 0x0000 4328 Tune Tracking Td 0x0000 4329 Tracking Rate 0x0000 432A Weighting Cooling 0x0000 432B Error Heating Factor 0x0000 432C Tune End Min 0x0000 432D Tune Min Temp Delta 0x0000 4340 Ramping Rate 0x0000 4341 Ramping Tolerance 0x0000 4342 Ramping Rate Cooling 0x0000 4350 Tracking Td 0x0000 4351 Settling Time 0x0000 4352 Load Idle 0x0000 4360 Forced Cooling Off Time 0x0000 4361 Forced Cooling On Time 0x0000 4370 Extruder Comp 0x0000 4400 Supply Load Heater 0x0000 4401 Supply Load 0x0000 4402 Supply Load Cooler 0x0000 4410 Absolute High 0x0000 4411 Absolute Low 0x0000 4500 Pwm Min On Time 0x0000 4501 Pwm Max On Time 0x0000 4503 Pwm Factor Cooling Properties Name Type Access Initial value Description Connected BOOL Get FALSE Component is connected to its dependencies (except for the MD container). FB_Md Base Component Linked Container I_Md Base Container Get NULL Points to the container to which the component was [} 117] appended. Tc3_Plastic Functions. FB_Md Component Further characteristics <> <> <> Implemented by FB_Md Component Methods Name Description Add Next Component() Adds the subsequent component to the component (list). FB_Md Temp Channel Connect Channel(ip Channel) Connects the component with the necessary dependency. FB_Md Base Component [PROTECTED] Used with inheriting classes to initialize the encoding offset after Config Comp Type(e Comp Type) E_Standard Comp Type. [PROTECTED] Used with the inheriting class to initialize the encoding offset. Config Comp Type Ex(…) 142 Version: 1.4.0 TF85xx
## Page 143

PLC-API - Class overview Name Description [PROTECTED] Next String(…) Simplified method for reading a text-based machine data parameter. This method is used within the Md Next Parameter(...) Callback method. [PROTECTED] Set String(…) Simplified method for writing a text-based machine data parameter. This method is used within the Md Set Parameter(...) Callback method. Tc3_Plastic Functions. FB_Md Component Other methods Implemented by FB_Md Component. Event-driven methods (callback methods) Name Description Md Next Parameter(…) Container call for saving the parameters in a file, implemented by FB_Md Component. Md Set Parameter(…) Container call for loading the parameters into the runtime, implemented by FB_Md Component. Interfaces Type Description I_Md Component Standard interface on FB_Md Component I_Md Temp Channel Standard interface on FB_Md Temp Channel. I_Md Temp Zone Standard interface on FB_Md Temp Zone. I_Md Base Component Standard interface on FB_Md Base Component Further interfaces Implemented by FB_Md Component Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.42 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.6.0) Also see about this 2 FB_Temp Channel [} 291] 2 FB_Temperature [} 273] 6.6.2.13 FB_Md Temp Group This machine data component contains parameters that are relevant for a temperature group configuration. Syntax: FUNCTION_BLOCK FB_Md Temp Group EXTENDS FB_Md Base Component Machine data Index (Identifier) Parameter PLC storage location 0x0000 4E1x Group Name (16 indices) FB_Temperature Hmi [} 280]. Groups [} 287](x) or <Local> (Read Mode) TF85xx Version: 1.4.0 143
## Page 144

PLC-API - Class overview Index (Identifier) Parameter PLC storage location 0x0000 4E3x Config Hash (4 indices) FB_Temperature [} 273]. Groups [} 282](x) or <Local> (Read Mode) 0x0000 4E5x Config Note (16 indices) FB_Temperature Hmi [} 280]. Groups [} 287](x) or <Local> (Read Mode) 0x0000 4E60 Start Scheduled FB_Temperature Hmi [} 280]. Groups [} 287](x) 0x0000 4E61 Zones Count FB_Temperature [} 273]. Groups [} 282](x) or <Local> (Read Mode) Properties Name Type Access Initial value Description Connected BOOL Get FALSE Component is connected to its dependencies (except for the MD container). FB_Md Temp Group Abort After Local Data BOOL Get, Set FALSE The component actively cancels the loading process of the container as soon as the values stored locally in the Read Mode have been loaded from the file. Config Hash T_SHA256 [} 300] Get, (Set) 0x0 Hash value of the group configuration read in Read Mode. Config Note STRING(128) Get ‘‘ Descriptive note of the group configuration read in Read Mode. Group Name STRING(128) Get ‘‘ Name of the group in the group configuration read in Read Mode. Read Mode BOOL Get, Set FALSE The class does not transfer the data during the loading process, but saves it locally. Zones Count LREAL Get 0 Number of zones of the group configuration read in Read Mode. FB_Md Base Component Linked Container I_Md Base Container Get NULL Points to the container to which the component was [} 117] appended. Tc3_Plastic Functions. FB_Md Component Further characteristics <> <> <> Implemented by FB_Md Component Methods Name Description Add Next Component() Adds the subsequent component to the component (list). FB_Md Temp Group 144 Version: 1.4.0 TF85xx
## Page 145

PLC-API - Class overview Name Description Clear Read Values Recurse() Sets the data loaded in Read Mode to the initial value. The method calls itself recursively for all subsequent elements in the linked container. Connect(ip Temp Group, Connects the component with the necessary dependencies. ip Temp Group Hmi) Read Mode Recurse(b Read Mode) Sets the Read Mode equal to the input variable. The method calls itself recursively for all subsequent elements in the linked container. FB_Md Base Component [PROTECTED] Used with inheriting classes to initialize the encoding offset after Config Comp Type(e Comp Type) E_Standard Comp Type. [PROTECTED] Used with the inheriting class to initialize the encoding offset. Config Comp Type Ex(…) [PROTECTED] Next String(…) Simplified method for reading a text-based machine data parameter. This method is used within the Md Next Parameter(...) Callback method. [PROTECTED] Set String(…) Simplified method for writing a text-based machine data parameter. This method is used within the Md Set Parameter(...) Callback method. Tc3_Plastic Functions. FB_Md Component Other methods Implemented by FB_Md Component. Event-driven methods (callback methods) Name Description Md Next Parameter(…) Container call for saving the parameters in a file, implemented by FB_Md Component. Md Set Parameter(…) Container call for loading the parameters into the runtime, implemented by FB_Md Component. Interfaces Type Description I_Md Component Standard interface on FB_Md Component I_Md Temp Group Standard interface on FB_Md Temp Group. I_Md Read Mode Interface to an MD component with Read Mode. I_Md Base Component Standard interface on FB_Md Base Component Further interfaces Implemented by FB_Md Component Prerequisites Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.10.2.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.6.2.14 FB_Md Temp Grouping TF85xx Version: 1.4.0 145
## Page 146

PLC-API - Class overview This machine data component contains parameters that are relevant for managing the temperature channels in a group. This creates compatibility with FB_Md Temp Channel [} 140] so that parameters of a temperature channel can be loaded. Syntax: FUNCTION_BLOCK FB_Md Temp Grouping EXTENDS FB_Md Temp Channel Machine data Index (Identifier) Parameter PLC storage location 0x0000 4010 Group ID (Module ID) FB_Temperature [} 273]. Channel( [} 291]x) [} 291] 0x0000 4040 Tuning Last Execution FB_Temperature 0x0000 4041 Tuning Required [} 273]. Channel( [} 291]x) 0x0000 4050 Config ID [} 291] 0x0000 4051 Channel Idx 0x0000 4011 Zone ID FB_Temperature 0x0000 4012 Supply ID [} 273]. Channel( [} 291]x) 0x0000 4013 Extruder ID [} 291] 0x0000 4020 Output Sel_C 0x0000 4021 Output Sel_H 0x0000 4022 Output Delay 0x0000 403x Zone Name (15 indices) 0x0000 4040 Tuning Last Execution 0x0000 4041 Tuning Required 0x0000 4050 Config ID 0x0000 4051 Channel Idx 0x0000 4100 Temp Sens Term 0x0000 4101 Sensor Type 0x0000 4102 Term Channel 0x0000 4103 Tuning Method 0x0000 4110 Cold Junction. Comp Mode 0x0000 4111 Cold Junction. Comp Zone 0x0000 4112 Cooler Swap Idx 0x0000 4113 Heater Swap Idx 0x0000 4114 Sens Term Swap Idx 0x0000 4160 Sensor Offset 0x0000 4161 Sensor Lower Range 0x0000 4162 Sensor Upper Range 0x0000 4163 Act Temp Gain 0x0000 4164 Act Temp Offset 0x0000 4165 Act Temp Filter 0x0000 4200 In Use 0x0000 4201 Enable 0x0000 4202 Use Cooling 0x0000 4203 Tune Cooling 0x0000 4204 Forced Cooling Enabled 0x0000 4205 Extruder Comp Ena 146 Version: 1.4.0 TF85xx
## Page 147

PLC-API - Class overview Index (Identifier) Parameter PLC storage location 0x0000 4206 Enable Error Heating 0x0000 4207 No Fan While Trackdown 0x0000 4208 Open Loop Heating 0x0000 4209 Tune Extruder Comp 0x0000 420A Tune Heater Load 0x0000 420B Tune Idle Load 0x0000 420C Enable Act Temp Filter 0x0000 4210 Hibernate ICtrl Heat 0x0000 4211 Hibernate ICtrl Cool 0x0000 4212 High Precision 0x0000 4213 Disable Auto Step 0x0000 4214 Disable Terminal Com 0x0000 4215 Disable Dpart For Cooling 0x0000 4216 Disable Fan For Adapting 0x0000 4300 Kp (Heat/Cool) 0x0000 4301 0x0000 4302 Td (Heat/Cool) 0x0000 4303 0x0000 4304 Tn (Heat/Cool) 0x0000 4305 0x0000 4306 Tv (Heat/Cool) 0x0000 4307 0x0000 4308 Kff (Heat/Cool) 0x0000 4309 0x0000 430A ICtrl Limit 0x0000 430C Gain PID (Heat/Cool) 0x0000 430D 0x0000 4320 Tune End 0x0000 4321 Tune Kp 0x0000 4322 Tune Td 0x0000 4323 Tune Tn 0x0000 4324 Tune Tv 0x0000 4325 Tune Y 0x0000 4326 Overshoot 0x0000 4327 d Tmax 0x0000 4328 Tune Tracking Td 0x0000 4329 Tracking Rate 0x0000 432A Weighting Cooling 0x0000 432B Error Heating Factor 0x0000 432C Tune End Min 0x0000 432D Tune Min Temp Delta 0x0000 4340 Ramping Rate 0x0000 4341 Ramping Tolerance 0x0000 4342 Ramping Rate Cooling 0x0000 4350 Tracking Td 0x0000 4351 Settling Time 0x0000 4352 Load Idle TF85xx Version: 1.4.0 147
## Page 148

PLC-API - Class overview Index (Identifier) Parameter PLC storage location 0x0000 4360 Forced Cooling Off Time 0x0000 4361 Forced Cooling On Time 0x0000 4370 Extruder Comp 0x0000 4400 Supply Load Heater 0x0000 4401 Supply Load 0x0000 4402 Supply Load Cooler 0x0000 4410 Absolute High 0x0000 4411 Absolute Low 0x0000 4500 Pwm Min On Time 0x0000 4501 Pwm Max On Time 0x0000 4503 Pwm Factor Cooling 0x0000 4010 Group ID (Module ID) <Local> (Read Mode) 0x0000 4050 Config ID 0x0000 4051 Channel Idx Properties Name Type Access Initial value Description Connected BOOL Get FALSE Component is connected to its dependencies (except for the MD container). FB_Md Temp Grouping Channel Idx INT Get 0 Channel index that was read in Read Mode. Config ID UDINT Get 0 ID of the group configuration (incremental) that was read in Read Mode. Group ID INT Get 0 Index (ID) of the group that was read in Read Mode. Overflow Mode BOOL Get, Set FALSE Overflow mode: The component can read Read Mode data without a connected channel Read Mode BOOL Get, Set FALSE The class does not transfer the data during the loading process, but saves it locally. FB_Md Base Component Linked Container I_Md Base Container Get NULL Points to the container to which the component was [} 117] appended. Tc3_Plastic Functions. FB_Md Component Further characteristics <> <> <> Implemented by FB_Md Component Methods Name Description Add Next Component() Adds the subsequent component to the component (list). FB_Md Temp Grouping 148 Version: 1.4.0 TF85xx
## Page 149

PLC-API - Class overview Name Description Clear Chain() Overwritten FB_Md Component method, which additionally disables Overflow Mode and Read Mode and triggers the method Clear Read Values Recurse(). Clear Read Values Recurse() Sets the data loaded in Read Mode to the initial value The method calls itself recursively for all subsequent elements in the linked container. Read Mode Recurse(b Read Mode) Sets the Read Mode equal to the input variable The method calls itself recursively for all subsequent elements in the linked container. Sync Config() Adopts the configuration from the Read Mode. FB_Md Temp Channel Connect Channel(ip Channel) Connects the component with the necessary dependency. FB_Md Base Component [PROTECTED] Used with inheriting classes to initialize the encoding offset after Config Comp Type(e Comp Type) E_Standard Comp Type. [PROTECTED] Used with the inheriting class to initialize the encoding offset. Config Comp Type Ex(…) [PROTECTED] Next String(…) Simplified method for reading a text-based machine data parameter. This method is used within the Md Next Parameter(...) Callback method. [PROTECTED] Set String(…) Simplified method for writing a text-based machine data parameter. This method is used within the Md Set Parameter(...) Callback method. Tc3_Plastic Functions. FB_Md Component Other methods Implemented by FB_Md Component. Event-driven methods (callback methods) Name Description Md Next Parameter(…) Container call for saving the parameters in a file, implemented by FB_Md Component. Md Set Parameter(…) Container call for loading the parameters into the runtime, implemented by FB_Md Component. Interfaces Type Description I_Md Component Standard interface on FB_Md Component I_Md Temp Grouping Standard interface on FB_Md Temp Grouping. I_Md Read Mode Interface to an MD component with Read Mode. I_Md Temp Channel Standard interface on FB_Md Temp Channel. I_Md Temp Zone Standard interface on FB_Md Temp Zone. I_Md Base Component Standard interface on FB_Md Base Component Further interfaces Implemented by FB_Md Component Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.42 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.6.0) Also see about this 2 FB_Temp Channel [} 291] TF85xx Version: 1.4.0 149
## Page 150

PLC-API - Class overview 2 FB_Temperature [} 273] 2 FB_Md Base Container [} 117] 6.6.2.15 FB_Md Temp Supply This machine data component contains parameters that are relevant for a supply group. Syntax: FUNCTION_BLOCK FB_Md Temp Supply EXTENDS FB_Md Base Component Machine data Index (Identifier) Parameter PLC storage location 0x0000 4C10 Pwm Cycle Time FB_Temperature [} 273]. Supply [} 293](x). Line [} 294](x) 0x0000 4C11 Use Supply Pwm Params THIS^ 0x0000 4C12 Pwm Min On Time FB_Temperature [} 273]. Supply 0x0000 4C13 Pwm Max On Time [} 293](x). Line [} 294](x) 0x0000 4C14 Pwm Max On C 0x0000 4C15 Pwm Max Ramp Load 0x0000 4C16 Pwm Factor C Properties Name Type Access Initial value Description Connected BOOL Get FALSE Component is connected to its dependencies (except for the MD container). FB_Md Temp Supply Use Supply Pwm Params BOOL Get, Set FALSE If this property is not TRUE, the parameters are not saved so that the parameters of the individual zones are used. FB_Md Base Component Linked Container I_Md Base Container Get NULL Points to the container to which the component was [} 117] appended. Tc3_Plastic Functions. FB_Md Component Further characteristics <> <> <> Implemented by FB_Md Component Methods Name Description Add Next Component() Adds the subsequent component to the component (list). FB_Md Temp Supply Connect(Supply Idx) Connects the component to the supply group. FB_Md Base Component 150 Version: 1.4.0 TF85xx
## Page 151

PLC-API - Class overview Name Description [PROTECTED] Used with inheriting classes to initialize the encoding offset after Config Comp Type(e Comp Type) E_Standard Comp Type. [PROTECTED] Used with the inheriting class to initialize the encoding offset. Config Comp Type Ex(…) [PROTECTED] Next String(…) Simplified method for reading a text-based machine data parameter. This method is used within the Md Next Parameter(...) Callback method. [PROTECTED] Set String(…) Simplified method for writing a text-based machine data parameter. This method is used within the Md Set Parameter(...) Callback method. Tc3_Plastic Functions. FB_Md Component Other methods Implemented by FB_Md Component. Event-driven methods (callback methods) Name Description Md Next Parameter(…) Container call for saving the parameters in a file, implemented by FB_Md Component. Md Set Parameter(…) Container call for loading the parameters into the runtime, implemented by FB_Md Component. Interfaces Type Description I_Md Component Standard interface on FB_Md Component I_Md Temp Supply Standard interface on FB_Md Temp Supply. I_Md Base Component Standard interface on FB_Md Base Component Further interfaces Implemented by FB_Md Component Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.42 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.6.0) 6.6.2.16 FB_Md Temp Timer This machine data component contains parameters that are relevant for the temperature control timer. Syntax: FUNCTION_BLOCK FB_Md Ptp Motion EXTENDS FB_Md Base Component Machine data Index (Identifier) Parameter PLC storage location 0x0000 4D1x Members (32 indices) FB_Temp Schedule Hmi 0x0000 4D2x [} 296]. Timers [} 297](x) 0x0000 4D30 Standby TF85xx Version: 1.4.0 151
## Page 152

PLC-API - Class overview Properties Name Type Access Initial value Description Connected BOOL Get FALSE Component is connected to its dependencies (except for the MD container). FB_Md Base Component Linked Container I_Md Base Container Get NULL Points to the container to which the component was [} 117] appended. Tc3_Plastic Functions. FB_Md Component Further characteristics <> <> <> Implemented by FB_Md Component Methods Name Description Add Next Component() Adds the subsequent component to the component (list). FB_Md Temp Timer Connect(ip Axis, ip Axis Hmi) Connects the component with the necessary dependencies. FB_Md Base Component [PROTECTED] Used with inheriting classes to initialize the encoding offset after Config Comp Type(e Comp Type) E_Standard Comp Type. [PROTECTED] Used with the inheriting class to initialize the encoding offset. Config Comp Type Ex(…) [PROTECTED] Next String(…) Simplified method for reading a text-based machine data parameter. This method is used within the Md Next Parameter(...) Callback method. [PROTECTED] Set String(…) Simplified method for writing a text-based machine data parameter. This method is used within the Md Set Parameter(...) Callback method. Tc3_Plastic Functions. FB_Md Component Other methods Implemented by FB_Md Component. Event-driven methods (callback methods) Name Description Md Next Parameter(…) Container call for saving the parameters in a file, implemented by FB_Md Component. Md Set Parameter(…) Container call for loading the parameters into the runtime, implemented by FB_Md Component. Interfaces Type Description I_Md Component Standard interface on FB_Md Component I_Md Temp Timer Standard interface on FB_Md Temp Timer. I_Md Base Component Standard interface on FB_Md Base Component Further interfaces Implemented by FB_Md Component 152 Version: 1.4.0 TF85xx
## Page 153

PLC-API - Class overview Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.42 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.6.0) 6.6.2.17 FB_Md Temp Zone This machine data component contains parameters that are relevant for a TF8540 temperature zone. The global structure aaa Pfw Temp Mparam From Hmi[x] is mapped. Syntax: FUNCTION_BLOCK FB_Md Temp Zone EXTENDS FB_Md Base Component Machine data Index (Identifier) Parameter PLC storage location 0x0000 4010 Group ID (Module ID) FB_Temperature [} 273]. Channel( [} 291]x) [} 291] 0x0000 4030 Save Zone Name <Local> 0x0000 4040 Tuning Last Execution 0x0000 4041 Tuning Required 0x0000 4011 Zone ID FB_Temperature 0x0000 4012 Supply ID [} 273]. Channel( [} 291]x) 0x0000 4013 Extruder ID [} 291] 0x0000 4020 Output Sel_C 0x0000 4021 Output Sel_H 0x0000 4022 Output Delay 0x0000 403x Zone Name (15 indices) 0x0000 4040 Tuning Last Execution 0x0000 4041 Tuning Required 0x0000 4050 Config ID 0x0000 4051 Channel Idx 0x0000 4100 Temp Sens Term 0x0000 4101 Sensor Type 0x0000 4102 Term Channel 0x0000 4103 Tuning Method 0x0000 4110 Cold Junction. Comp Mode 0x0000 4111 Cold Junction. Comp Zone 0x0000 4112 Cooler Swap Idx 0x0000 4113 Heater Swap Idx 0x0000 4114 Sens Term Swap Idx 0x0000 4160 Sensor Offset 0x0000 4161 Sensor Lower Range 0x0000 4162 Sensor Upper Range TF85xx Version: 1.4.0 153
## Page 154

PLC-API - Class overview Index (Identifier) Parameter PLC storage location 0x0000 4163 Act Temp Gain 0x0000 4164 Act Temp Offset 0x0000 4165 Act Temp Filter 0x0000 4200 In Use 0x0000 4201 Enable 0x0000 4202 Use Cooling 0x0000 4203 Tune Cooling 0x0000 4204 Forced Cooling Enabled 0x0000 4205 Extruder Comp Ena 0x0000 4206 Enable Error Heating 0x0000 4207 No Fan While Trackdown 0x0000 4208 Open Loop Heating 0x0000 4209 Tune Extruder Comp 0x0000 420A Tune Heater Load 0x0000 420B Tune Idle Load 0x0000 420C Enable Act Temp Filter 0x0000 4210 Hibernate ICtrl Heat 0x0000 4211 Hibernate ICtrl Cool 0x0000 4212 High Precision 0x0000 4213 Disable Auto Step 0x0000 4214 Disable Terminal Com 0x0000 4215 Disable Dpart For Cooling 0x0000 4216 Disable Fan For Adapting 0x0000 4300 Kp (Heat/Cool) 0x0000 4301 0x0000 4302 Td (Heat/Cool) 0x0000 4303 0x0000 4304 Tn (Heat/Cool) 0x0000 4305 0x0000 4306 Tv (Heat/Cool) 0x0000 4307 0x0000 4308 Kff (Heat/Cool) 0x0000 4309 0x0000 430A ICtrl Limit 0x0000 430C Gain PID (Heat/Cool) 0x0000 430D 0x0000 4320 Tune End 0x0000 4321 Tune Kp 0x0000 4322 Tune Td 0x0000 4323 Tune Tn 0x0000 4324 Tune Tv 0x0000 4325 Tune Y 0x0000 4326 Overshoot 0x0000 4327 d Tmax 0x0000 4328 Tune Tracking Td 0x0000 4329 Tracking Rate 0x0000 432A Weighting Cooling 154 Version: 1.4.0 TF85xx
## Page 155

PLC-API - Class overview Index (Identifier) Parameter PLC storage location 0x0000 432B Error Heating Factor 0x0000 432C Tune End Min 0x0000 432D Tune Min Temp Delta 0x0000 4340 Ramping Rate 0x0000 4341 Ramping Tolerance 0x0000 4342 Ramping Rate Cooling 0x0000 4350 Tracking Td 0x0000 4351 Settling Time 0x0000 4352 Load Idle 0x0000 4360 Forced Cooling Off Time 0x0000 4361 Forced Cooling On Time 0x0000 4370 Extruder Comp 0x0000 4400 Supply Load Heater 0x0000 4401 Supply Load 0x0000 4402 Supply Load Cooler 0x0000 4410 Absolute High 0x0000 4411 Absolute Low 0x0000 4500 Pwm Min On Time 0x0000 4501 Pwm Max On Time 0x0000 4503 Pwm Factor Cooling Properties Name Type Access Initial value Description Connected BOOL Get FALSE Component is connected to its dependencies (except for the MD container). FB_Md Temp Zone Save Zone Name BOOl Get, Set FALSE If TRUE, the zone name is saved in the machine data file. Tuning Last Execution DATE_AND_TIME Get, Set DT#1970-01-0 Date of the last successful 1T00:00:00Z execution of a tuning. Tuning Required BOOL Get, Set FALSE The current configuration requires autotuning. FB_Md Base Component Linked Container I_Md Base Container Get NULL Points to the container to which the component was [} 117] appended. Tc3_Plastic Functions. FB_Md Component Further characteristics <> <> <> Implemented by FB_Md Component Methods Name Description Add Next Component() Adds the subsequent component to the component (list). FB_Md Temp Zone Connect(Zone Idx) Connects the component with the necessary dependencies. FB_Md Base Component TF85xx Version: 1.4.0 155
## Page 156

PLC-API - Class overview Name Description [PROTECTED] Used with inheriting classes to initialize the encoding offset after Config Comp Type(e Comp Type) E_Standard Comp Type. [PROTECTED] Used with the inheriting class to initialize the encoding offset. Config Comp Type Ex(…) [PROTECTED] Next String(…) Simplified method for reading a text-based machine data parameter. This method is used within the Md Next Parameter(...) Callback method. [PROTECTED] Set String(…) Simplified method for writing a text-based machine data parameter. This method is used within the Md Set Parameter(...) Callback method. Tc3_Plastic Functions. FB_Md Component Other methods Implemented by FB_Md Component. Event-driven methods (callback methods) Name Description Md Next Parameter(…) Container call for saving the parameters in a file, implemented by FB_Md Component. Md Set Parameter(…) Container call for loading the parameters into the runtime, implemented by FB_Md Component. Interfaces Type Description I_Md Component Standard interface on FB_Md Component I_Md Temp Zone Standard interface on FB_Md Temp Zone. I_Md Base Component Standard interface on FB_Md Base Component Further interfaces Implemented by FB_Md Component Requirements Development Environment Target platform PLC libraries to include Twin CAT 4026 >= v3.1.4026.16 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.12.0.0) Twin CAT 4024 >= v3.1.4024.66 Also see about this 2 FB_Motion Hmi [} 185] 6.6.2.18 FB_Md Trafo This machine data component contains parameters that are relevant for transforming axes. Syntax: FUNCTION_BLOCK FB_Md Trafo EXTENDS FB_Md Base Component 156 Version: 1.4.0 TF85xx
## Page 157

PLC-API - Class overview Machine data Index (Identifier) Parameter PLC storage location 0x0000 2310 Generate Table. Drive Low End FB_Trafo Functions 0x0000 2311 Generate Table. Drive High End [} 184]. Table Generator 0x0000 232x Generate Table. Params (16 indices) FB_Trafo Functions [} 184]. Param List [} 334] 0x0000 2330 Transformation. Lower Limit Axis Trafo. Transformation 0x0000 2331 Transformation. Upper Limit 0x0000 2340 Synchronisation (full transformation) Axis Trafo 0x0000 2341 Drive. Soft End Min Axis Trafo. Drive Side Base. Motion 0x0000 2342 Drive. Soft End Min Ena Params 0x0000 2343 Drive. Soft End Max 0x0000 2344 Drive. Soft End Max Ena 0x0000 2350 Load. Lag Monitored Axis Trafo. Load Side Base. Motion P 0x0000 2351 Load. Lag Limit arams 0x0000 2352 Load. Lag Filter Properties Name Type Access Initial value Description Connected BOOL Get FALSE Component is connected to its dependencies (except for the MD container). FB_Md Base Component Linked Container I_Md Base Container Get NULL Points to the container to which the component was [} 117] appended. Tc3_Plastic Functions. FB_Md Component Further characteristics <> <> <> Implemented by FB_Md Component Methods Name Description Add Next Component() Adds the subsequent component to the component (list). FB_Md Trafo Connect(ip Trafo Functions, Connects the component with the necessary dependencies. ip Trafo Functions Hmi) FB_Md Base Component [PROTECTED] Used with inheriting classes to initialize the encoding offset after Config Comp Type(e Comp Type) E_Standard Comp Type. [PROTECTED] Used with the inheriting class to initialize the encoding offset. Config Comp Type Ex(…) [PROTECTED] Next String(…) Simplified method for reading a text-based machine data parameter. This method is used within the Md Next Parameter(...) Callback method. [PROTECTED] Set String(…) Simplified method for writing a text-based machine data parameter. This method is used within the Md Set Parameter(...) Callback method. Tc3_Plastic Functions. FB_Md Component TF85xx Version: 1.4.0 157
## Page 158

PLC-API - Class overview Name Description Other methods Implemented by FB_Md Component. Event-driven methods (callback methods) Name Description Md Next Parameter(…) Container call for saving the parameters in a file, implemented by FB_Md Component. Md Set Parameter(…) Container call for loading the parameters into the runtime, implemented by FB_Md Component. Interfaces Type Description I_Md Component Standard interface on FB_Md Component I_Md Trafo Standard interface on FB_Md Trafo. I_Md Base Component Standard interface on FB_Md Base Component Further interfaces Implemented by FB_Md Component Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 6.6.2.19 FB_Md Weekday Timing This machine data component contains parameters that are relevant for a weekly timer. Syntax: FUNCTION_BLOCK FB_Md Weekday Timing EXTENDS FB_Md Base Component Machine data Index (Identifier) Parameter PLC storage location 0x0000 7110 Weekday FB_Weekday Timer Hmi [} 304] 0x0000 7111 End Weekday 0x0000 7120 Start Time 0x0000 7121 End Time Properties Name Type Access Initial value Description Connected BOOL Get FALSE Component is connected to its dependencies (except for the MD container). FB_Md Base Component 158 Version: 1.4.0 TF85xx
## Page 159

PLC-API - Class overview Name Type Access Initial value Description Linked Container I_Md Base Container Get NULL Points to the container to which the component was [} 117] appended. Tc3_Plastic Functions. FB_Md Component Further characteristics <> <> <> Implemented by FB_Md Component Methods Name Description Add Next Component() Adds the subsequent component to the component (list). FB_Md Weekday Timing Connect(ip Timer Hmi) Connects the component with the necessary dependencies. FB_Md Base Component [PROTECTED] Used with inheriting classes to initialize the encoding offset after Config Comp Type(e Comp Type) E_Standard Comp Type. [PROTECTED] Used with the inheriting class to initialize the encoding offset. Config Comp Type Ex(…) [PROTECTED] Next String(…) Simplified method for reading a text-based machine data parameter. This method is used within the Md Next Parameter(...) Callback method. [PROTECTED] Set String(…) Simplified method for writing a text-based machine data parameter. This method is used within the Md Set Parameter(...) Callback method. Tc3_Plastic Functions. FB_Md Component Other methods Implemented by FB_Md Component. Event-driven methods (callback methods) Name Description Md Next Parameter(…) Container call for saving the parameters in a file, implemented by FB_Md Component. Md Set Parameter(…) Container call for loading the parameters into the runtime, implemented by FB_Md Component. Interfaces Type Description I_Md Component Standard interface on FB_Md Component I_Md Weekday Timing Standard interface on FB_Md Weekday Timing. I_Md Base Component Standard interface on FB_Md Base Component Further interfaces Implemented by FB_Md Component Requirements Development Environment Target platform PLC libraries to include Twin CAT 4026 >= v3.1.4026.16 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.12.0.0) Twin CAT 4024 >= v3.1.4024.66 TF85xx Version: 1.4.0 159
## Page 160

PLC-API - Class overview 6.6.2.20 FB_Md Wtc This machine data component contains parameters that are relevant for a WTC axis. Syntax: FUNCTION_BLOCK FB_Md Wtc EXTENDS FB_Md Base Component Machine data Index (Identifier) Parameter PLC storage location 0x0001 3010 Tool Stroke FB_Wtc Hmi [} 85] 0x0001 3011 Calc Tool Stroke 0x0001 3020 Camming Synchronize Axis. Camming 0x0001 3021 Instant Curve Activation FB_Wtc Hmi [} 85] Properties Name Type Access Initial value Description Connected BOOL Get FALSE Component is connected to its dependencies (except for the MD container). FB_Md Base Component Linked Container I_Md Base Container Get NULL Points to the container to which the component was [} 117] appended. Tc3_Plastic Functions. FB_Md Component Further characteristics <> <> <> Implemented by FB_Md Component Methods Name Description Add Next Component() Adds the subsequent component to the component (list). FB_Md Wtc Connect(ip Wtc, ip Wtc Hmi) Connects the component with the necessary dependencies. FB_Md Base Component [PROTECTED] Used with inheriting classes to initialize the encoding offset after Config Comp Type(e Comp Type) E_Standard Comp Type. [PROTECTED] Used with the inheriting class to initialize the encoding offset. Config Comp Type Ex(…) [PROTECTED] Next String(…) Simplified method for reading a text-based machine data parameter. This method is used within the Md Next Parameter(...) Callback method. [PROTECTED] Set String(…) Simplified method for writing a text-based machine data parameter. This method is used within the Md Set Parameter(...) Callback method. Tc3_Plastic Functions. FB_Md Component Other methods Implemented by FB_Md Component. 160 Version: 1.4.0 TF85xx
## Page 161

PLC-API - Class overview Event-driven methods (callback methods) Name Description Md Next Parameter(…) Container call for saving the parameters in a file, implemented by FB_Md Component. Md Set Parameter(…) Container call for loading the parameters into the runtime, implemented by FB_Md Component. Interfaces Type Description I_Md Component Standard interface on FB_Md Component I_Md Wtc Standard interface on FB_Md Wtc. I_Md Base Component Standard interface on FB_Md Base Component Further interfaces Implemented by FB_Md Component Requirements Development Environment Target platform PLC libraries to include Twin CAT 4026 >= v3.1.4026.16 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.12.0.0) Twin CAT 4024 >= v3.1.4024.66 6.6.2.21 FB_Md Wtc Timer This machine data component contains parameters that are relevant for a WTC Timer Master. Syntax: FUNCTION_BLOCK FB_Md Wtc Timer EXTENDS FB_Md Base Component Machine data Index (Identifier) Parameter PLC storage location 0x0001 3110 Cycle Time Min FB_Wtc Timer Hmi [} 90] 0x0001 3111 Cycle Time Max 0x0001 3120 Max Measure Time Factor FB_Wtc Timer [} 88] Properties Name Type Access Initial value Description Connected BOOL Get FALSE Component is connected to its dependencies (except for the MD container). FB_Md Base Component Linked Container I_Md Base Container Get NULL Points to the container to which the component was [} 117] appended. Tc3_Plastic Functions. FB_Md Component TF85xx Version: 1.4.0 161
## Page 162

PLC-API - Class overview Name Type Access Initial value Description Further characteristics <> <> <> Implemented by FB_Md Component Methods Name Description Add Next Component() Adds the subsequent component to the component (list). FB_Md Wtc Timer Connect(ip Timer, Connects the component with the necessary dependencies. ip Timer Hmi) FB_Md Base Component [PROTECTED] Used with inheriting classes to initialize the encoding offset after Config Comp Type(e Comp Type) E_Standard Comp Type. [PROTECTED] Used with the inheriting class to initialize the encoding offset. Config Comp Type Ex(…) [PROTECTED] Next String(…) Simplified method for reading a text-based machine data parameter. This method is used within the Md Next Parameter(...) Callback method. [PROTECTED] Set String(…) Simplified method for writing a text-based machine data parameter. This method is used within the Md Set Parameter(...) Callback method. Tc3_Plastic Functions. FB_Md Component Other methods Implemented by FB_Md Component. Event-driven methods (callback methods) Name Description Md Next Parameter(…) Container call for saving the parameters in a file, implemented by FB_Md Component. Md Set Parameter(…) Container call for loading the parameters into the runtime, implemented by FB_Md Component. Interfaces Type Description I_Md Component Standard interface on FB_Md Component I_Md Wtc Timer Standard interface on FB_Md Wtc Timer. I_Md Base Component Standard interface on FB_Md Base Component Further interfaces Implemented by FB_Md Component Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 162 Version: 1.4.0 TF85xx
## Page 163

PLC-API - Class overview 6.7 Manual Function - Manual functions 6.7.1 FB_Manual Function Hmi The class is used to connect to a TF8550 Manual Operation control. Syntax: FUNCTION_BLOCK FB_Manual Function Hmi EXTENDS FB_Base Hmi Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Manual Function Hmi Cmd I_Manual Function Cmd Get - Commands from the HMI. Hmi [} 164] Do Select BOOL Get, Set FALSE Manual function should be selected for the central operating function. Is Selectable BOOL Get, Set FALSE The central operating function can be selected to take over control. Is Selected BOOL Get, Set FALSE The central operating function is connected and controls this manual function. Select Cmd T_Manual Select Cmd Get, Set 0x0 Command of the central operating function. [} 166] Select State T_Manual Select State Get, Set 0x0 State of the central operating function. [} 166] Select Supported BOOL Get, Set FALSE A central operating function is available for this manual function. State I_Manual Function State Get - Feedback signals to the HMI. Hmi [} 165] FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Central operating function The "Central operating function" provides for the use of an incremental encoder to operate the manual function. This is available, for example, in the class for the Beckhoff Blow Molding Panel PC (FB_CP22xx-1025 [} 322]). Use with another input device is also conceivable, but must be implemented in the project on a user-defined basis. TF85xx Version: 1.4.0 163
## Page 164

PLC-API - Class overview Local HMI variables Name Data type Description fb Cmd FB_Manual Function Cmd H Commands from the HMI. mi [} 164] fb State FB_Manual Function State Feedback signals to the HMI. Hmi [} 165] Methods Name Description Reset() Resets the error state of the class. FB_Base Hmi Init(ip Base) Default initialization method to pass the base class. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Interfaces Type Description I_Base Standard interface on FB_Base. I_Manual Function Hmi Standard interface on FB_Manual Function Hmi. I_Base Hmi Standard interface on FB_Base Hmi. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.7.1.1 FB_Manual Function Cmd Hmi Summarizes the commands of the HMI in FB_Manual Function Hmi. 164 Version: 1.4.0 TF85xx
## Page 165

PLC-API - Class overview Syntax: FUNCTION_BLOCK FB_Manual Function Cmd Hmi Properties Name Type Access Initial value Description To Base Pos BOOL Get, Set FALSE Command to move to the base position To Work Pos BOOL Get, Set FALSE Command for controlling the working position Interfaces Type Description I_Manual Function Cmd Hmi Standard interface on FB_Manual Function Cmd Hmi Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 6.7.1.2 FB_Manual Function State Hmi Summarizes the feedback signals of the HMI in FB_Manual Function Hmi. Internal functions: • The Moving To Xy properties set automatically when the respective signal of the FB_Manual Function Cmd [} 164] is set. Syntax: FUNCTION_BLOCK FB_Manual Function Cmd Hmi Properties Name Type Access Initial value Description Base State T_Plastic Status [} 342] Get 0x00 Status of the base position. Enable Base Pos BOOL Get, Set FALSE Enables the base position button. Enable Work Pos BOOL Get, Set FALSE Enables the working position button. Fault Base Pos BOOL Get, Set FALSE Indicates a fault in the base position. Fault Work Pos BOOL Get, Set FALSE Indicates a fault in the working position. In Base Pos BOOL Get, Set FALSE Indicates that the base position has been reached. In Work Pos BOOL Get, Set FALSE Indicates that the working position has been reached. TF85xx Version: 1.4.0 165
## Page 166

PLC-API - Class overview Name Type Access Initial value Description Moving To Base Pos BOOL Get, Set FALSE Signals the mowing to the base position. Moving To Work Pos BOOL Get, Set FALSE Signals the moving to the working position. Work State T_Plastic Status [} 342] Get 0x00 Status of the working position. Interfaces Type Description I_Manual Function State Hmi Standard interface on FB_Manual Function State Hmi. Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.7.1.3 T_Manual Select Cmd Command variable for the choice of a central operating function. Syntax: TYPE T_Manual Select Cmd : BYTE; END_TYPE Values bit Description 0 Selecting 1 Reserved 2 Reserved 3 Reserved 4 Reserved 5 Reserved 6 Reserved 7 Reserved Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.7.1.4 T_Manual Select State Status variable for using a central operating function. Syntax: TYPE T_Manual Select State : BYTE; END_TYPE 166 Version: 1.4.0 TF85xx
## Page 167

PLC-API - Class overview Values bit Description 0 A central operating function is available. 1 The central operating function can be selected. 2 The central operating function is connected and controls this manual function. 3 Reserved 4 Reserved 5 Reserved 6 Reserved 7 Reserved Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.7.2 FB_Manual Implements an abstract basis for standardized manual functions. Class is abstract Since the class is defined as ABSTRACT, the class cannot be instantiated and must be implemented using inheritance. Internal functions: • Provides triggers for the buttons in both directions Syntax: FUNCTION_BLOCK ABSTRACT FB_Manual EXTENDS FB_Base Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Manual Enable BOOL Get, Set FALSE Releases the manual function. Trig Cmd Base Pos I_Trigger [} 350] Get - Trigger on the base position command. Trig Cmd Work Pos I_Trigger [} 350] Get - Trigger on the working position command. FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. TF85xx Version: 1.4.0 167
## Page 168

PLC-API - Class overview Name Type Access Initial value Description Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Methods Name Description Reset() Resets the error state of the class. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Cycle methods Name Description Cyclic() Cycle method Interfaces Type Description I_Base Standard interface on FB_Base. I_Manual Function Universal interface to a manual function. I_Manual Dev Extended interface to a manual function. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.7.3 FB_Manual Motion Implements an abstract basis for standardized manual motion functions. 168 Version: 1.4.0 TF85xx
## Page 169

PLC-API - Class overview Class is abstract Since the class is defined as ABSTRACT, the class cannot be instantiated and must be implemented using inheritance. Internal functions: • Signals the error state of a motion object. Syntax: FUNCTION_BLOCK ABSTRACT FB_Manual Motion EXTENDS FB_Manual Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Manual Enable BOOL Get, Set FALSE Releases the manual function. Trig Cmd Base Pos I_Trigger [} 350] Get - Trigger on the base position command. Trig Cmd Work Pos I_Trigger [} 350] Get - Trigger on the working position command. FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Methods Name Description Reset() Resets the error state of the class. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Cycle methods Name Description Cyclic() Cycle method TF85xx Version: 1.4.0 169
## Page 170

PLC-API - Class overview Interfaces Type Description I_Base Standard interface on FB_Base. I_Manual Function Universal interface to a manual function. I_Manual Dev Extended interface to a manual function. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.7.4 FB_Manual Base Work Implements a ready-made version of a manual function for controlling the end positions of a motion object. Internal functions: • Signals the active movement of a motion object. • Signals that the end position of a motion object has been reached. Syntax: FUNCTION_BLOCK FB_Manual Base Work EXTENDS FB_Manual Motion Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Manual Enable BOOL Get, Set FALSE Releases the manual function. Trig Cmd Base Pos I_Trigger [} 350] Get - Trigger on the base position command. Trig Cmd Work Pos I_Trigger [} 350] Get - Trigger on the working position command. FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > 170 Version: 1.4.0 TF85xx
## Page 171

PLC-API - Class overview Methods Name Description Reset() Resets the error state of the class. FB_Manual Base Work Init(i Motion, Initializes the manual function with a motion object and the associated i Manual Function Hmi) HMI. Set Work Base Pos() [} 171] Configuration of the end positions to display the status. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Cycle methods Name Description Cyclic() Cycle method Interfaces Type Description I_Base Standard interface on FB_Base. I_Manual Base Work Standard interface on FB_Manual Base Work. I_Manual Function Universal interface to a manual function. I_Manual Dev Extended interface to a manual function. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.7.4.1 Set Work Base Pos() Configures the end positions for indication in the TF8550 Manual Operation control. TF85xx Version: 1.4.0 171
## Page 172

PLC-API - Class overview Syntax: METHOD Set Work Base Pos VAR_INPUT f Work Pos: LREAL; // Workpos to watch f Base Pos: LREAL; // Basepos to watch f Tolerance: LREAL; // > 0 for reacting on actuals with tolerance, = 0 for reacting on setpoints END_VAR Inputs Name Type Description f Work Pos LREAL Target position of the working position. f Base Pos LREAL Target position of the base position. f Tolerance LREAL > 0 to indicate an active movement per actual position. = 0 to indicate an active movement above the set position. Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.7.5 FB_Manual Power Implements a predefined version of a manual function for switching on the axis control. Internal functions: • Switches the power enable depending on the current Power. Status. • Automatically gives both or the configured direction enables. Syntax: FUNCTION_BLOCK FB_Manual Power EXTENDS FB_Manual Motion Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Manual Enable BOOL Get, Set FALSE Releases the manual function. Trig Cmd Base Pos I_Trigger [} 350] Get - Trigger on the base position command. Trig Cmd Work Pos I_Trigger [} 350] Get - Trigger on the working position command. FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. 172 Version: 1.4.0 TF85xx
## Page 173

PLC-API - Class overview Name Type Access Initial value Description Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Methods Name Description Reset() Resets the error state of the class. FB_Manual Power Init(ip Axis, ip Axis Hmi) Initializes the manual function with the interfaces of an axis. Set Feed Enable Use() Configures the direction enable of the axis control. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Cycle methods Name Description Cyclic() Cycle method Interfaces Type Description I_Base Standard interface on FB_Base. I_Manual Function Universal interface to a manual function. I_Manual Dev Extended interface to a manual function. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) TF85xx Version: 1.4.0 173
## Page 174

PLC-API - Class overview 6.7.6 FB_Manual Turnrate Implements a standard limit and display for tactile manual functions to adjust the turn rate of an axis. Internal functions: • Forwards the signal of the pressed button. • Limits the pressing of buttons to adjustable limits. Syntax: FUNCTION_BLOCK FB_Manual Turnrate EXTENDS FB_Manual Motion Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Manual Turnrate Cmd Faster BOOL Get FALSE Passes the command of the pressed button in the working position. Cmd Slower BOOL Get FALSE Passes the command of the pressed button in the base position. FB_Manual Enable BOOL Get, Set FALSE Releases the manual function. Trig Cmd Base Pos I_Trigger [} 350] Get - Trigger on the base position command. Trig Cmd Work Pos I_Trigger [} 350] Get - Trigger on the working position command. FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Methods Name Description Reset() Resets the error state of the class. FB_Manual Turnrate Init(ip Axis, Initializes the manual function with the interface to an axis and the HMI. ip Manual Function Hmi) Set Turnrate Limits() Configures the minimum and maximum number of revolutions and the use of the limit options. FB_Base Get HMI() Returns the assigned HMI object. 174 Version: 1.4.0 TF85xx
## Page 175

PLC-API - Class overview Name Description Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Cycle methods Name Description Cyclic() Cycle method Interfaces Type Description I_Base Standard interface on FB_Base. I_Manual Function Universal interface to a manual function. I_Manual Dev Extended interface to a manual function. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.7.7 FB_Manual Wheel Implements the handling of a central operating unit as incremental encoder of a Beckhoff Blow Molding Panel, implemented as FB_CP22xx-1025 [} 322]. Syntax: FUNCTION_BLOCK FB_Manual Wheel EXTENDS FB_Base Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Manual Wheel TF85xx Version: 1.4.0 175
## Page 176

PLC-API - Class overview Name Type Access Initial value Description Enable BOOL Get, Set FALSE Enables the manual function. External States I_Adaptable Seq Ext Get, Set NULL Interface to an object with the implementation of the control. [} 322] FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Methods Name Description Reset() Resets the error state of the class. FB_Manual Wheel Append Manual(i Manual) Append a manual function for selection management. Init(i Wheel) Initialization with the wheel [} 326] of an FB_CP22xx-1025 [} 322]. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Cycle methods Name Description Cyclic() Cycle method Procedure controlling methods (FB_Adaptable Sequence [} 317]) Name Description States() [} 177] Procedure for selecting and changing the operation via the incremental encoder Event-driven methods (callback methods) Name Description Ext Adapt Seq() Dummy method() for the support of the interface I_Adaptable Seq Ext [} 322]. 176 Version: 1.4.0 TF85xx
## Page 177

PLC-API - Class overview Interfaces Type Description I_Base Standard interface on FB_Base. I_Adaptable Seq Ext Interface for providing external implementation of the control. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.7.7.1 States() Instance type Instance Name Master fb List Slaves fb Ready, fb Idle, External States State diagram: Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) TF85xx Version: 1.4.0 177
## Page 178

PLC-API - Class overview 6.8 Motion - Motion objects 6.8.1 FB_Motion Represents the standard class for all motion objects, based on TF8560 motion objects. Syntax: FUNCTION_BLOCK FB_Motion EXTENDS FB_Base Md Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Motion Motion I_Motion Base Get NULL Interface to the assigned TF8560 motion object. Error Alarm TL Tc Event Severity Get, Set Error (3) Severity of the alarm that the axis triggers in the error state. Specific I_Motion Specific Get - Technology-specific functions/ values [} 180] FB_Base Md Machine Data I_Md Base Container Get - Interface for machine data handling. [} 117] FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Methods Name Description Reset() Resets the error state of the class. FB_Motion Check Axis State() [} 180] Checks the current state of the axis. Feed Enable(b Feed Enable P, Enable of a direction of movement. b Feed Enable N) Jog Negative(b Command) Starts/stops a jog movement in negative direction. Jog Positive(b Command) Starts/stops a jog movement in positive direction. Power(b Command) Switching on the drive control. Set Motion Ref(i Motion) Assignment method for the TF8560 motion object. FB_Base Md [PROTECTED] Add Md Comp() Adds a component of type I_Md Component to the machine data container. 178 Version: 1.4.0 TF85xx
## Page 179

PLC-API - Class overview Name Description FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Cycle methods Name Description Cyclic() Cycle method - Call once per PLC cycle (default 10 ms) Core Cyclic() Cycle method with short cycle time (default: 2 ms). Possible events ID Description Alarm/Message 11 Object error state Alarm 21 Command rejected Alarm Machine data Component Description Index range Number of in- stances FB_Md File Info [} 133] File information 0x0000 Fxxx 1 FB_Md Actuator [} 122] Actuator-specific parameters, only if 0x0000 8xxx 1 Specific. Actuator. Is Actuator = TRUE Interfaces Type Description I_Base Standard interface on FB_Base. I_Motion Standard interface on FB_Motion I_Two Task Interface Runtime interface for two PLC tasks. I_Base Md Standard interface on FB_Base Md. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. TF85xx Version: 1.4.0 179
## Page 180

PLC-API - Class overview Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.8.1.1 Check Axis State() Checks the current state of the TF8560 axis. Syntax: METHOD Check Axis State : BOOL VAR_INPUT e State: BOOL; b Send Event: BOOL; END_VAR Inputs Name Type Description e State E_Axis State Axis condition to be checked b Send Event BOOL Logging an event when the checked state does not match. Outputs Name Type Description Check Axis State BOOL Is TRUE if the axis state matches. Possible events ID Description Alarm/Message 1000 Axis is not in state ‘{0}’ Message Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 6.8.1.2 FB_Motion Specific The class implements technology-specific functions of a TF8560 motion object. Syntax: FUNCTION_BLOCK FB_Motion Specific EXTENDS FB_Base 180 Version: 1.4.0 TF85xx
## Page 181

PLC-API - Class overview Properties Name Type Access Initial value Description Actuator [} 181] I_Actuator Functions Get - Actuator-specific (binary) functions Hydraulic [} 182] I_Hydraulic Functions Get - Hydraulic-specific functions Inverter [} 182] I_Inverter Functions Get - Inverter-specific (turnrate- based) functions Nc [} 183] I_Nc Functions Get - NC-specific (servo-electric) functions Trafo [} 184] I_Trafo Functions Get - Transformation-specific functions Interfaces Type Description I_Motion Specific Standard interface on FB_Motion Specific Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.8.1.2.1 FB_Actuator Functions Implements specific functions for a TF8560 actuator. Syntax: FUNCTION_BLOCK FB_Actuator Functions EXTENDS FB_Base Properties Name Type Access Initial value Description Attachable Md Interface I_Md Component Get - Interface to the machine data component Is Actuator BOOL Get FALSE Actuator functions are supported by the assigned object type. Is Base BOOL Get FALSE Actuator is in the base position Is Work BOOL Get FALSE Actuator is in the working position Interfaces Type Description I_Actuator Functions Standard interfaces on FB_Actuator Functions TF85xx Version: 1.4.0 181
## Page 182

PLC-API - Class overview Type Description I_Attachable Md Interface Interface for containerless machine data components Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.8.1.2.2 FB_Hydraulic Functions Implements hydraulic-specific functions of a TF8560 axis. Syntax: FUNCTION_BLOCK FB_Hydraulic Functions EXTENDS FB_Base Properties Name Type Access Initial value Description Auto Ident Finished BOOL Get FALSE The executed characteristic curve measurement was completed successfully. Is Hydraulic BOOL Get FALSE Hydraulic functions are supported by the assigned axis type. Methods Name Description Auto Ident() Characteristic measurement of a hydraulic axis. Interfaces Type Description I_Hydraulic Functions Standard interface on FB_Hydraulic Functions Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 6.8.1.2.3 FB_Inverter Functions Implements inverter-specific functions of a turnrate-based TF8560 axis. 182 Version: 1.4.0 TF85xx
## Page 183

PLC-API - Class overview Syntax: FUNCTION_BLOCK FB_Inverter Functions EXTENDS FB_Base Properties Name Type Access Initial value Description Is Inverter BOOL Get FALSE Inverter functions are supported by the assigned axis type. Interfaces Type Description I_Inverter Functions Standard interface on FB_Inverter Functions Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.8.1.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.8.1.2.4 FB_Nc Functions Implements specific functions for an NC-based TF8560 axis. Syntax: FUNCTION_BLOCK FB_Nc Functions EXTENDS FB_Base Properties Name Type Access Initial value Description Attachable Md Interface I_Md Component Get - Interface to the machine data component Is Nc BOOL Get FALSE NC functions are supported by the assigned axis type. Interfaces Type Description I_Nc Functions Standard interface on FB_Nc Functions I_Attachable Md Interface Interface for containerless machine data components Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) TF85xx Version: 1.4.0 183
## Page 184

PLC-API - Class overview 6.8.1.2.5 FB_Trafo Functions Implements specific functions for a transforming TF8560 axis. Syntax: FUNCTION_BLOCK FB_Trafo Functions EXTENDS FB_Base Properties Name Type Access Initial value Description Attachable Md Interface I_Md Component Get - Interface to the machine data component Is Trafo BOOL Get FALSE Transformer functions are supported by the assigned axis type. Lower Limit LREAL Get, Set 0.0 Lower limit of the real transformation Param List I_Parameter Get - Internal list for storing the Table Generator parameters in the machine data Table I_Camming Look Up Get - Interface to the instance of the table Table Generator I_Trafo Table Generator Get, Set NULL Interface to a Table Generator class to be assigned Upper Limit LREAL Get, Set 0.0 Upper limit of the real transformation Methods Name Description Assign Table To Axis() Assigns the internal table to the axis instance (means activating the transformation curve) Conv Drive Ends To Load Ends() Calculates the resulting software end positions of the load side using the transformation table Copy Table Drive Ends() Copies the start and end position of the Table Generator class to the software end positions of the drive axis. Fill Debug Table() Copies the contents of the internal table into a two-dimensional array Param List To Table Generator() Copies the internal parameter list to the parameters of the Table Generator Table Generator To Param List() Copies the parameters of the Table Generator into the internal parameter list Possible events ID Description Alarm/Message 201 Calling the Table Generator property without previous assignment Message 184 Version: 1.4.0 TF85xx
## Page 185

PLC-API - Class overview Interfaces Type Description I_Trafo Functions Standard interface on FB_Trafo Functions I_Attachable Md Interface Interface for containerless machine data components Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.42 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.5) 6.8.2 FB_Motion Hmi HMI class parallel to the standard class FB_Motion for motion objects Syntax: FUNCTION_BLOCK FB_Motion Hmi EXTENDS FB_Base Md Hmi Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Motion Hmi Act Position LREAL Get 0.0 Current position of the connected motion object Act Velocity LREAL Get 0.0 Current velocity of the connected motion object Jog Limiting Negative LREAL Get, Set 0.0 Limitation of the jog command via the FB_Motion [} 178]. Jog Negative() method Ignored for operation with an actuator. Jog Limiting Positive LREAL Get, Set 0.0 Limitation of the jog command via the FB_Motion [} 178]. Jog Positive() method Ignored for operation with an actuator. Jog Velocity Negative LREAL Get, Set 0.0 Velocity of the jog command via the FB_Motion [} 178]. Jog Negative() method Ignored for operation with an actuator. Jog Velocity Positive LREAL Get, Set 0.0 Velocity of the jog command via the FB_Motion [} 178]. Jog Negative() method Ignored for operation with an actuator. TF85xx Version: 1.4.0 185
## Page 186

PLC-API - Class overview Name Type Access Initial value Description Manual Power I_Manual Function Hmi Get, Set <Local> Interface for a manual function to switch on the motion object. [} 163] Specific REFERENCE TO Get <Local> Access to the technology- FB_Motion Specific Hmi specific functions FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Local HMI variables Name Data type Description fb Param Handle FB_Md Handle Hmi Handling interface for loading and saving machine data. FB_Motion Hmi fb Manual Power FB_Manual Function Hmi Interface for a manual function to switch on the motion object. [} 163] fb Specific FB_Motion Specific Hmi Technology-specific functions of the motion object. Methods Name Description Reset() Resets the error state of the class. FB_Base Hmi Init(ip Base) Default initialization method to pass the base class. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Interfaces Type Description I_Base Standard interface on FB_Base. I_Motion Hmi Standard interface on FB_Motion Hmi. I_Base Md Hmi Standard interface on FB_Base Md Hmi. I_Base Hmi Standard interface on FB_Base Hmi. 186 Version: 1.4.0 TF85xx
## Page 187

PLC-API - Class overview Type Description I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.8.3 FB_Axis Represents the standard class for all axis objects based on TF8560 axes. Syntax: FUNCTION_BLOCK FB_Axis EXTENDS FB_Motion Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Axis Axis I_Axis Base Get NULL Interface to the assigned TF8560 axis. Referencing I_Referencing [} 189] Get <Local> Functions for referencing the axis. Homing1 I_Homing [} 508] Get <Local> Homing functions. Alternatively: . Referencing . Homing Base Axis Interfaces1 I_Axis Base Get NULL Alias of . Axis FB_Motion Motion I_Motion Base Get NULL Interface to the assigned TF8560 motion object. Error Alarm TL Tc Event Severity Get, Set Error (3) Severity of the alarm that the axis triggers in the error state. Specific I_Motion Specific Get - Technology-specific functions/ values [} 180] FB_Base Md Machine Data I_Md Base Container Get - Interface for machine data handling. [} 117] FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. TF85xx Version: 1.4.0 187
## Page 188

PLC-API - Class overview Name Type Access Initial value Description [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > 1Obsolete Methods Name Description Reset() Resets the error state of the class. FB_Axis Set Position(b Command) Setting the axis position with the FB_Axis Hmi. Setposition. Set Axis Ref(i Axis Base)1 Assignment method for the TF8560 axis. Alternatively: . Set Motion Ref(). FB_Motion Check Axis State() [} 180] Checks the current state of the axis. Feed Enable(b Feed Enable P, Enable of a direction of movement. b Feed Enable N) Jog Negative(b Command) Starts/stops a jog movement in negative direction. Jog Positive(b Command) Starts/stops a jog movement in positive direction. Power(b Command) Switching on the drive control. Set Motion Ref(i Motion) Assignment method for the TF8560 motion object. FB_Base Md [PROTECTED] Add Md Comp() Adds a component of type I_Md Component to the machine data container. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() 1 Is obsolete Possible events ID Description Alarm/Message 11 Object error state Alarm 21 Command rejected Alarm 10 Axis Errors Alarm 20 Axis command rejected Alarm 188 Version: 1.4.0 TF85xx
## Page 189

PLC-API - Class overview Machine data Component Description Index range Number of in- stances FB_Md File Info [} 133] File information 0x0000 Fxxx 1 FB_Md Axis [} 133] General axis parameters 0x0000 0xxx 1 0x0000 1xxx FB_Md Nc [} 137] NC specific parameters, only if 0x0000 22xx 1 (0) Specific. Nc. Is Nc = TRUE FB_Md Trafo [} 156] Transformation-specific parameters, only if 0x0000 23xx 1 (0) Specific. Trafo. Is Trafo = TRUE FB_Md Homing [} 135] Parameters for homing the axis 0x0000 3xxx 1 Interfaces Type Description I_Base Standard interface on FB_Base. I_Axis Standard interface on FB_Axis. I_Motion Standard interface on FB_Motion I_Two Task Interface Runtime interface for two PLC tasks. I_Base Md Standard interface on FB_Base Md. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Prerequisites Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.10.2.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.8.3.1 FB_Referencing The Homing class implements standard procedures for referencing an axis. Syntax: FUNCTION_BLOCK FB_Referencing EXTENDS FB_Base Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Referencing Attachable Md Interface I_Md Component Get - Interface to the machine data component TF85xx Version: 1.4.0 189
## Page 190

PLC-API - Class overview Name Type Access Initial value Description Enable BOOL Get, Set FALSE If TRUE, commands are executed directly via FB_Referencing Hmi. External States I_Adaptable Seq Ext Get, Set NULL Interface to an object with additional homing procedure steps Homing I_Homing Get, Set THIS^ Subcategory of homing functions. Input Abs Switch I_Input Base Get, Set NULL I/O object for an absolute switch. Input Negative Limit Switc I_Input Base Get, Set NULL I/O object for an end position h sensor in the negative direction. Input Positive Limit Switch I_Input Base Get, Set NULL I/O object for an end position sensor in the positive direction. Absolute Switch1 BOOL Set FALSE Input value of an absolute position switch Alternatively: Input Abs Switch FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Methods Name Description Reset() Resets the error state of the class. FB_Referencing Do Abort() Aborts the currently active referencing. Do Abs Switch() Starts referencing the axis using an absolute position switch. Do Abs Switch Detect() Starts the detection of the position of an absolute position switch. Do Abs Switch Sequence() Starts a sequence of Do Abs Switch() and Do Finish(). Do Block() Starts referencing against an end stop. Do Block Detect() Starts the detection of the position at an end stop. Do Block Sequence() Starts a sequence of Do Block(), Do Block Detect() and Do Finish(). Do Finish() Starts the termination of homing. Notice This step is essential for successfully completing a homing process. Do Limit Switch() Starts referencing the axis against a limit switch. Do Limit Switch Detect() Starts the detection of the position of a limit switch. Do Limit Switch Sequence() Starts a sequence of Do Limit Switch(), Do Limit Switch Detect () and Do Finish(). Do Set Zero() Sets the current position of the axis to 0. FB_Base Get HMI() Returns the assigned HMI object. 190 Version: 1.4.0 TF85xx
## Page 191

PLC-API - Class overview Name Description Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Procedure controlling methods (FB_Adaptable Sequence [} 317]) Name Description Homing States() [} 192] State machine of the homing procedures Event-driven methods (callback methods) Name Description Ext Adapt Seq() Dummy method() for use without "External States" Possible events ID Description Alarm/Message 4000 Homing not allowed Alarm 4001 Homing failed Alarm 4002 Save homing was successful Message 4003 Save homing was not successful Message Interfaces Type Description I_Base Standard interface on FB_Base. I_Referencing Standard interface on FB_Referencing I_Attachable Md Interface Interface for containerless machine data components I_Adaptable Seq Ext Interface for providing external homing procedures I_Homing1 Compatibility with the obsolete interface on FB_Homing I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Prerequisites Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.10.2.0) (recommended) Twin CAT >= v3.1.4024.42 (required) TF85xx Version: 1.4.0 191
## Page 192

PLC-API - Class overview 6.8.3.1.1 Homing States() Instance type Instance name Master fb Homing States Slaves a Base Seq Members[E_Homing State.e Length] State diagram: Prerequisites Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.10.2.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.8.4 FB_Axis Hmi HMI class parallel to the standard class FB_Axis for axes Syntax: FUNCTION_BLOCK FB_Axis Hmi EXTENDS FB_Motion Hmi 192 Version: 1.4.0 TF85xx
## Page 193

PLC-API - Class overview Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Axis Hmi Encoder Zero Shift LREAL Get, (Set) 0.0 Zero offset shift of the axis. Limiting Reference LREAL Get 100.0 [%] Reference value (maximum) for commanded limiting values (pressure or torque limit). Max Acceleration LREAL Get 0.0 Maximum acceleration of the axis. Max Deceleration LREAL Get 0.0 Maximum deceleration of the axis. Max Jerk LREAL Get 0.0 Maximum jerk of the axis. Max Position LREAL Get 0.0 Maximum position of the axis. Max Velocity LREAL Get 0.0 Maximum velocity of the axis. Min Postion LREAL Get 0.0 Minimum position of the axis. Min Velocity LREAL Get 0.0 Minimum velocity of the axis. Referencing I_Referencing Hmi Get <Local> Parameter sets and commands for referencing the [} 196] axis. Set Position LREAL Get, Set 0.0 Position used when calling FB_Axis [} 187]. Set Position(). Unit Group STRING(64) Get, Set ‘Length‘ Physical quantity with which the axis is parameterized and operated. Axis Homing Abs Switch1 REFERENCE TO Get <Local> Parameter set for homing via FB_Homing Absolute S absolute switch. witch Hmi Alternatively: . Referencing . Homing Abs Switch Axis Homing Block1 REFERENCE TO Get <Local> Parameter set for homing via FB_Homing Block Hmi end stop. Alternatively: . Referencing . Homing Block Axis Homing Block Detect REFERENCE TO Get <Local> Parameter set for calibrating 1 FB_Homing Block Detec an end stop position. t Hmi Alternatively: . Referencing . Homing Block Detect Axis Homing Busy1 BOOL Get, (Set) FALSE Homing or calibration is active (axis is in homing state). Alternatively: . Referencing . Busy Axis Homing Finish1 REFERENCE TO Get <Local> Parameter set for completing FB_Homing Finish Hmi homing. Alternatively: . Referencing . Homing Finish Axis Homing Setup1 REFERENCE TO Get <Local> Parameter set for general FB_Referencing Hmi settings and homing commands. Alternatively: . Referencing Axis Is Homed1 BOOL Get, (Set) FALSE Axis was successfully homed. Alternatively: . Referencing . Is Homed FB_Motion Hmi TF85xx Version: 1.4.0 193
## Page 194

PLC-API - Class overview Name Type Access Initial value Description Act Position LREAL Get 0.0 Current position of the connected motion object Act Velocity LREAL Get 0.0 Current velocity of the connected motion object Jog Limiting Negative LREAL Get, Set 0.0 Limitation of the jog command via the FB_Motion [} 178]. Jog Negative() method Ignored for operation with an actuator. Jog Limiting Positive LREAL Get, Set 0.0 Limitation of the jog command via the FB_Motion [} 178]. Jog Positive() method Ignored for operation with an actuator. Jog Velocity Negative LREAL Get, Set 0.0 Velocity of the jog command via the FB_Motion [} 178]. Jog Negative() method Ignored for operation with an actuator. Jog Velocity Positive LREAL Get, Set 0.0 Velocity of the jog command via the FB_Motion [} 178]. Jog Negative() method Ignored for operation with an actuator. Manual Power I_Manual Function Hmi Get, Set <Local> Interface for a manual function to switch on the motion object. [} 163] Specific REFERENCE TO Get <Local> Access to the technology- FB_Motion Specific Hmi specific functions FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Local HMI variables Name Data type Description fb Param Handle FB_Md Handle Hmi Handling interface for loading and saving machine data. FB_Axis Hmi fb Param Axis FB_Md Axis Hmi Entries in the HMI parameter list under Axis. fb Param Homing FB_Md Homing Hmi Entries in the HMI parameter list under Homing. fb Referencing FB_Referencing Hmi Parameter sets and commands for referencing. fb Axis Homing Abs Switch1 REFERENCE TO Parameter set for homing via absolute switch. FB_Homing Absolute Swit Alternatively: ch Hmi fb Referencing.fb Homing Abs Switch fb Axis Homing Block1 REFERENCE TO Parameter set for homing via end stop. FB_Homing Block Hmi Alternatively: fb Referencing.fb Homing Block 194 Version: 1.4.0 TF85xx
## Page 195

PLC-API - Class overview Name Data type Description fb Axis Homing Block Detect1 REFERENCE TO Parameter set for calibrating an end stop position. FB_Homing Block Detect H Alternatively: mi fb Referencing.fb Homing Block Detect fb Axis Homing Finish1 REFERENCE TO Parameter set for completing homing. FB_Homing Finish Hmi Alternatively: fb Referencing.fb Homing Finish fb Axis Homing Setup1 REFERENCE TO Parameter set for general settings and homing FB_Referencing Hmi commands. Alternatively: fb Referencing FB_Motion Hmi fb Manual Power FB_Manual Function Hmi Interface for a manual function to switch on the motion object. [} 163] fb Specific FB_Motion Specific Hmi Technology-specific functions of the motion object. 1Obsolete Methods Name Description Reset() Resets the error state of the class. FB_Base Hmi Init(ip Base) Default initialization method to pass the base class. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Interfaces Type Description I_Base Standard interface on FB_Base. I_Axis Hmi Standard interface on FB_Axis Hmi. I_Motion Hmi Standard interface on FB_Motion Hmi. I_Base Md Hmi Standard interface on FB_Base Md Hmi. I_Base Hmi Standard interface on FB_Base Hmi. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. TF85xx Version: 1.4.0 195
## Page 196

PLC-API - Class overview Prerequisites Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.10.2.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.8.4.1 FB_Referencing Hmi HMI class parallel to the referencing class of an axis. Syntax: FUNCTION_BLOCK FB_Referencing Hmi EXTENDS FB_Base Hmi Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Referencing Hmi Busy BOOL Get, (Set) FALSE The axis is referencing and/or is in the active referencing state. Detection Velo Time Max LREAL Get, Set 10.0 [s] Maximum adjustable duration of the detection velocity Distance Max LREAL Get, Set 800.0 Maximum adjustable distance Do Homing Abort BOOL Get, Set FALSE Aborts the current homing process. Do Homing Abs Switch BOOL Get, Set FALSE Starting homing to an absolute switch Do Homing Abs Switch De BOOL Get, Set FALSE Start calibration of the tect absolute switch position. Do Homing Abs Switch De BOOL Get, Set FALSE Start a sequence from tect Abs Switch and Finish. Do Homing Block BOOL Get, Set FALSE Start homing to an end stop. Do Homing Block Detect BOOL Get, Set FALSE Start the calibration of an end stop position. Do Homing Block Sequen BOOL Get, Set FALSE Start a sequence from Block, ce Block Detect and Finish. Do Homing Finish BOOL Get, Set FALSE Complete the homing process. Do Homing Limit Switch BOOL Get, Set FALSE Start homing to an end position sensor. Do Homing Limit Switch D BOOL Get, Set FALSE Start the calibration of an end etect position sensor. Do Homing Limit Switch S BOOL Get, Set FALSE Start a sequence from equence Limit Switch, Limit Switch Detect and Finish. Do Set Zero BOOL Get, Set FALSE Sets the current axis position to 0. 196 Version: 1.4.0 TF85xx
## Page 197

PLC-API - Class overview Name Type Access Initial value Description Enable BOOL Get, (Set) FALSE The homing of the axis is enabled by the PLC. Enable Auto Save BOOL Get, Set FALSE Once a homing process has been successfully completed, the axis parameters should be saved in the machine data. Homing Abs Switch I_Homing Switch Hmi Get <Local> Parameter set for homing via absolute switch. [} 206] Homing Abs Switch Detec I_Homing Switch Detect Get <Local> Parameter set for calibrating t an absolute switch. Hmi [} 205] Homing Block I_Homing Block Hmi Get <Local> Parameter set for homing via end stop. [} 202] Homing Block Detect I_Homing Block Detect H Get <Local> Parameter set for calibrating an end stop position. mi [} 201] Homing Finish I_Homing Finish Hmi Get <Local> Parameter set for finishing a homing process. [} 203] Homing Limit Switch I_Homing Switch Hmi Get <Local> Parameter set for homing via end position sensor. [} 206] Homing Limit Switch Dete I_Homing Switch Detect Get <Local> Parameter set for calibrating ct an end position sensor. Hmi [} 205] Is Homed BOOL Get, Set FALSE The last completed homing process was successful. Position Max LREAL Get, Set 500.0 Maximum adjustable position. Position Min LREAL Get, Set 0.0 Minimum adjustable position. Time Limit Max LREAL Get, Set 30.0 Maximum adjustable time limit. FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Local HMI variables Name Data type Description fb Homing Block FB_Homing Block Hmi Parameter set for homing via end stop. [} 202] fb Homing Block Detect FB_Homing Block Detect H Parameter set for calibrating an end stop position. mi [} 201] fb Homing Abs Switch FB_Homing Switch Hmi Parameter set for homing via absolute switch. [} 206] fb Homing Abs Switch Detect FB_Homing Switch Detect Parameter set for calibrating an absolute switch. Hmi [} 205] fb Homing Limit Switch FB_Homing Switch Hmi Parameter set for homing via end position sensor. [} 206] TF85xx Version: 1.4.0 197
## Page 198

PLC-API - Class overview Name Data type Description fb Homing Limit Switch Dete FB_Homing Switch Detect Parameter set for calibrating an end position sensor. ct Hmi [} 205] fb Homing Finish FB_Homing Finish Hmi Parameter set for finishing a homing process. [} 203] Methods Name Description Reset() Resets the error state of the class. FB_Base Hmi Init(ip Base) Default initialization method to pass the base class. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Interfaces Type Description I_Base Standard interface on FB_Base. I_Referencing Hmi Standard interface on FB_Referencing Hmi. I_Base Hmi Standard interface on FB_Base Hmi. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Prerequisites Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.10.2.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.8.4.1.1 FB_Homing Base Hmi This class summarizes all parameters that are required in all homing type referencing methods. 198 Version: 1.4.0 TF85xx
## Page 199

PLC-API - Class overview Class is abstract Since the class is defined as ABSTRACT, the class cannot be instantiated and must be implemented using inheritance. Syntax: FUNCTION_BLOCK ABSTRACT FB_Homing Base Hmi Properties Name Type Access Initial value Description Acceleration LREAL Get, Set 0.0 Acceleration of the process. FB_Homing Base Hmi Deceleration LREAL Get, Set 0.0 Delay of the process. Direction E_Adaptable Homing Dir Get e Positive Direction of the velocity. ection Distance Limit LREAL Get, Set 500.0 Maximum distance that can be traveled without the process being interrupted. Jerk LREAL Get, Set 0.0 Jerk of the process. Options Disable Drive Acc BOOL Get, Set FALSE If TRUE, communication with ess the drive hardware is suppressed. Time Limit LREAL Get, Set 20.0 [s] Maximum time until the process is aborted. Torque Limit LREAL Get, Set 25.0 Active torque limitation during the process. Velocity LREAL Get, Set 20.0 Velocity of the process. Interfaces Type Description I_Homing Base Hmi Standard interface on FB_Homing Base Hmi. Prerequisites Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.10.2.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.8.4.1.2 FB_Homing Block Base Hmi This class extends the basic parameters of the homing type referencing methods specifically for applications with an end stop. Class is abstract Since the class is defined as ABSTRACT, the class cannot be instantiated and must be implemented using inheritance. TF85xx Version: 1.4.0 199
## Page 200

PLC-API - Class overview Syntax: FUNCTION_BLOCK ABSTRACT FB_Homing Block Base Hmi EXTENDS FB_Homing Base Hmi Properties Name Type Access Initial value Description Acceleration LREAL Get, Set 0.0 Acceleration of the process. FB_Homing Block Base Hmi Detection Velocity Limit LREAL Get, Set 5.0 Velocity that must be permanently undershot at the end stop. Detection Velocity Time LREAL Get, Set 0.5 Time that must be spent at the end stop. Options Instant Lag Redu BOOL Get, Set TRUE Any lag error building up at ction the end stop is instantly reduced. Options Torque Polarity In BOOL Get, Set FALSE The sign of the torque should verted be interpreted inverted. Torque Tolerance LREAL Get, Set 5.0 Tolerance window around Torque Limit. FB_Homing Base Hmi Deceleration LREAL Get, Set 0.0 Delay of the process. Direction E_Adaptable Homing Dir Get e Positive Direction of the velocity. ection Distance Limit LREAL Get, Set 500.0 Maximum distance that can be traveled without the process being interrupted. Jerk LREAL Get, Set 0.0 Jerk of the process. Options Disable Drive Acc BOOL Get, Set FALSE If TRUE, communication with ess the drive hardware is suppressed. Time Limit LREAL Get, Set 20.0 [s] Maximum time until the process is aborted. Torque Limit LREAL Get, Set 25.0 Active torque limitation during the process. Velocity LREAL Get, Set 20.0 Velocity of the process. Interfaces Type Description I_Homing Base Hmi Standard interface on FB_Homing Base Hmi. I_Homing Block Base Hmi Standard interfaces on FB_Homing Block Base Hmi. Prerequisites Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.10.2.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 200 Version: 1.4.0 TF85xx
## Page 201

PLC-API - Class overview 6.8.4.1.3 FB_Homing Block Detect Hmi This class provides the parameters for measuring an end stop. Syntax: FUNCTION_BLOCK FB_Homing Block Detect Hmi EXTENDS FB_ Homing Block Base Hmi Properties Name Type Access Initial value Description Acceleration LREAL Get, Set 0.0 Acceleration of the process. FB_Homing Block Detect Hmi Options Set Soft End BOOL Get, Set FALSE Option to automatically set the software end position at the measured position. Recorded Position LREAL Get 0.0 Measured value of the detected end stop. FB_Homing Block Base Hmi Detection Velocity Limit LREAL Get, Set 5.0 Velocity that must be permanently undershot at the end stop. Detection Velocity Time LREAL Get, Set 0.5 Time that must be spent at the end stop. Options Instant Lag Redu BOOL Get, Set TRUE Any lag error building up at ction the end stop is instantly reduced. Options Torque Polarity In BOOL Get, Set FALSE The sign of the torque should verted be interpreted inverted. Torque Tolerance LREAL Get, Set 5.0 Tolerance window around Torque Limit. FB_Homing Base Hmi Deceleration LREAL Get, Set 0.0 Delay of the process. Direction E_Adaptable Homing Dir Get e Positive Direction of the velocity. ection Distance Limit LREAL Get, Set 500.0 Maximum distance that can be traveled without the process being interrupted. Jerk LREAL Get, Set 0.0 Jerk of the process. Options Disable Drive Acc BOOL Get, Set FALSE If TRUE, communication with ess the drive hardware is suppressed. Time Limit LREAL Get, Set 20.0 [s] Maximum time until the process is aborted. Torque Limit LREAL Get, Set 25.0 Active torque limitation during the process. Velocity LREAL Get, Set 20.0 Velocity of the process. Interfaces Type Description I_Homing Base Hmi Standard interface on FB_Homing Base Hmi. TF85xx Version: 1.4.0 201
## Page 202

PLC-API - Class overview Type Description I_Homing Block Detect Hmi Standard interface on FB_Homing Block Detect Hmi. I_Homing Block Base Hmi Standard interfaces on FB_Homing Block Base Hmi. Prerequisites Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.10.2.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.8.4.1.4 FB_Homing Block Hmi This class provides the parameters for homing an end stop. Syntax: FUNCTION_BLOCK FB_Homing Block Detect Hmi EXTENDS FB_ Homing Block Base Hmi Properties Name Type Access Initial value Description Acceleration LREAL Get, Set 0.0 Acceleration of the process. FB_Homing Block Hmi Set Position LREAL Get, Set 0.0 Position to be set at the determined position at the end stop. FB_Homing Block Base Hmi Detection Velocity Limit LREAL Get, Set 5.0 Velocity that must be permanently undershot at the end stop. Detection Velocity Time LREAL Get, Set 0.5 Time that must be spent at the end stop. Options Instant Lag Redu BOOL Get, Set TRUE Any lag error building up at ction the end stop is instantly reduced. Options Torque Polarity In BOOL Get, Set FALSE The sign of the torque should verted be interpreted inverted. Torque Tolerance LREAL Get, Set 5.0 Tolerance window around Torque Limit. FB_Homing Base Hmi Deceleration LREAL Get, Set 0.0 Delay of the process. Direction E_Adaptable Homing Dir Get e Positive Direction of the velocity. ection Distance Limit LREAL Get, Set 500.0 Maximum distance that can be traveled without the process being interrupted. Jerk LREAL Get, Set 0.0 Jerk of the process. Options Disable Drive Acc BOOL Get, Set FALSE If TRUE, communication with ess the drive hardware is suppressed. 202 Version: 1.4.0 TF85xx
## Page 203

PLC-API - Class overview Name Type Access Initial value Description Time Limit LREAL Get, Set 20.0 [s] Maximum time until the process is aborted. Torque Limit LREAL Get, Set 25.0 Active torque limitation during the process. Velocity LREAL Get, Set 20.0 Velocity of the process. Interfaces Type Description I_Homing Base Hmi Standard interface on FB_Homing Base Hmi. I_Homing Block Hmi Standard interface on FB_Homing Block Hmi. I_Homing Block Base Hmi Standard interfaces on FB_Homing Block Base Hmi. Prerequisites Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.10.2.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.8.4.1.5 FB_Homing Finish Hmi This class extends the basic parameters of the homing type referencing methods specifically for applications with an end stop. Syntax: FUNCTION_BLOCK FB_Homing Finish Hmi EXTENDS FB_Homing Base Hmi Properties Name Type Access Initial value Description Acceleration LREAL Get, Set 0.0 Acceleration of the process. FB_Homing Finish Hmi Distance LREAL Get, Set 0.0 Distance to be traveled to complete the process. FB_Homing Base Hmi Deceleration LREAL Get, Set 0.0 Delay of the process. Direction E_Adaptable Homing Dir Get e Positive Direction of the velocity. ection Distance Limit LREAL Get, Set 500.0 Maximum distance that can be traveled without the process being interrupted. Jerk LREAL Get, Set 0.0 Jerk of the process. Options Disable Drive Acc BOOL Get, Set FALSE If TRUE, communication with ess the drive hardware is suppressed. Time Limit LREAL Get, Set 20.0 [s] Maximum time until the process is aborted. TF85xx Version: 1.4.0 203
## Page 204

PLC-API - Class overview Name Type Access Initial value Description Torque Limit LREAL Get, Set 25.0 Active torque limitation during the process. Velocity LREAL Get, Set 20.0 Velocity of the process. Interfaces Type Description I_Homing Base Hmi Standard interface on FB_Homing Base Hmi. I_Homing Finish Hmi Standard interface on FB_Homing Finish Hmi. Prerequisites Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.10.2.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.8.4.1.6 FB_Homing Switch Base Hmi This class extends the basic parameters of the homing type referencing methods specifically for applications with a homing switch/sensor. Class is abstract Since the class is defined as ABSTRACT, the class cannot be instantiated and must be implemented using inheritance. Syntax: FUNCTION_BLOCK ABSTRACT FB_Homing Switch Base Hmi EXTENDS FB_Homing Base Hmi Properties Name Type Access Initial value Description Acceleration LREAL Get, Set 0.0 Acceleration of the process. FB_Homing Switch Base Hmi Options Lag Error Detecti BOOL Get, Set 5.0 If TRUE, the lag error on monitoring for the process is not switched off. Switch Mode E_Adaptable Switch Mo Get, Set e On Interpretation mode of the de switch. FB_Homing Base Hmi Deceleration LREAL Get, Set 0.0 Delay of the process. Direction E_Adaptable Homing Dir Get e Positive Direction of the velocity. ection Distance Limit LREAL Get, Set 500.0 Maximum distance that can be traveled without the process being interrupted. Jerk LREAL Get, Set 0.0 Jerk of the process. 204 Version: 1.4.0 TF85xx
## Page 205

PLC-API - Class overview Name Type Access Initial value Description Options Disable Drive Acc BOOL Get, Set FALSE If TRUE, communication with ess the drive hardware is suppressed. Time Limit LREAL Get, Set 20.0 [s] Maximum time until the process is aborted. Torque Limit LREAL Get, Set 25.0 Active torque limitation during the process. Velocity LREAL Get, Set 20.0 Velocity of the process. Interfaces Type Description I_Homing Base Hmi Standard interface on FB_Homing Base Hmi. I_Homing Switch Base Hmi Standard interface on FB_Homing Switch Base Hmi. Prerequisites Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.10.2.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.8.4.1.7 FB_Homing Switch Detect Hmi This class provides the parameters for measuring an end position sensor/switch. Syntax: FUNCTION_BLOCK FB_Homing Switch Detect Hmi EXTENDS FB_Homing Switch Base Hmi Properties Name Type Access Initial value Description Acceleration LREAL Get, Set 0.0 Acceleration of the process. FB_Homing Switch Detect Hmi Recorded Position LREAL Get 0.0 Measured value of the detected end position sensor/ switch. FB_Homing Switch Base Hmi Options Lag Error Detecti BOOL Get, Set 5.0 If TRUE, the lag error on monitoring for the process is not switched off. Switch Mode E_Adaptable Switch Mo Get, Set e On Interpretation mode of the de switch. FB_Homing Base Hmi Deceleration LREAL Get, Set 0.0 Delay of the process. Direction E_Adaptable Homing Dir Get e Positive Direction of the velocity. ection TF85xx Version: 1.4.0 205
## Page 206

PLC-API - Class overview Name Type Access Initial value Description Distance Limit LREAL Get, Set 500.0 Maximum distance that can be traveled without the process being interrupted. Jerk LREAL Get, Set 0.0 Jerk of the process. Options Disable Drive Acc BOOL Get, Set FALSE If TRUE, communication with ess the drive hardware is suppressed. Time Limit LREAL Get, Set 20.0 [s] Maximum time until the process is aborted. Torque Limit LREAL Get, Set 25.0 Active torque limitation during the process. Velocity LREAL Get, Set 20.0 Velocity of the process. Interfaces Type Description I_Homing Base Hmi Standard interface on FB_Homing Base Hmi. I_Homing Switch Detect Hmi Standard interface on FB_Homing Switch Detect Hmi. I_Homing Switch Base Hmi Standard interface on FB_Homing Switch Base Hmi. Prerequisites Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.10.2.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.8.4.1.8 FB_Homing Switch Hmi This class provides the parameters for homing using an end position sensor/switch. Syntax: FUNCTION_BLOCK FB_Homing Switch Hmi EXTENDS FB_Homing Switch Base Hmi Properties Name Type Access Initial value Description Acceleration LREAL Get, Set 0.0 Acceleration of the process. FB_Homing Switch Hmi Set Position LREAL Get, Set 0.0 Position to be set at the determined position on the end position sensor/switch. FB_Homing Switch Base Hmi Options Lag Error Detecti BOOL Get, Set 5.0 If TRUE, the lag error on monitoring for the process is not switched off. Switch Mode E_Adaptable Switch Mo Get, Set e On Interpretation mode of the de switch. 206 Version: 1.4.0 TF85xx
## Page 207

PLC-API - Class overview Name Type Access Initial value Description FB_Homing Base Hmi Deceleration LREAL Get, Set 0.0 Delay of the process. Direction E_Adaptable Homing Dir Get e Positive Direction of the velocity. ection Distance Limit LREAL Get, Set 500.0 Maximum distance that can be traveled without the process being interrupted. Jerk LREAL Get, Set 0.0 Jerk of the process. Options Disable Drive Acc BOOL Get, Set FALSE If TRUE, communication with ess the drive hardware is suppressed. Time Limit LREAL Get, Set 20.0 [s] Maximum time until the process is aborted. Torque Limit LREAL Get, Set 25.0 Active torque limitation during the process. Velocity LREAL Get, Set 20.0 Velocity of the process. Interfaces Type Description I_Homing Base Hmi Standard interface on FB_Homing Base Hmi. I_Homing Switch Hmi Standard interface on FB_Homing Switch Hmi. I_Homing Switch Base Hmi Standard interface on FB_Homing Switch Base Hmi. Prerequisites Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.10.2.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.8.5 FB_Cam Axis This class (FB) defines a uniform coupling of cam plates to an axis via the TF8550 Curve Editor. Any instance can be assigned for operation during runtime. Class is abstract Since the class is defined as ABSTRACT, the class cannot be instantiated and must be implemented using inheritance. Syntax: FUNCTION_BLOCK ABSTRACT FB_Cam Axis EXTENDS FB_Axis Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. TF85xx Version: 1.4.0 207
## Page 208

PLC-API - Class overview Name Type Access Initial value Description FB_Cam Axis Enable Envelope Curve Al BOOL Get, Set FALSE Enables monitoring of the arms actual curve in relation to the configured envelope. FB_Axis Axis I_Axis Base Get NULL Interface to the assigned TF8560 axis. Referencing I_Referencing [} 189] Get <Local> Functions for referencing the axis. FB_Motion Motion I_Motion Base Get NULL Interface to the assigned TF8560 motion object. Error Alarm TL Tc Event Severity Get, Set Error (3) Severity of the alarm that the axis triggers in the error state. Specific I_Motion Specific Get - Technology-specific functions/ values [} 180] FB_Base Md Machine Data I_Md Base Container Get - Interface for machine data handling. [} 117] FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > 1 Obsolete Methods Name Description Reset() Resets the error state of the class. FB_Cam Axis Set Curve(i Curve) Assign the curve to be used FB_Axis Set Position(b Command) Setting the axis position with the FB_Axis Hmi. Setposition. FB_Motion Check Axis State() [} 180] Checks the current state of the axis. Feed Enable(b Feed Enable P, Enable of a direction of movement. b Feed Enable N) Jog Negative(b Command) Starts/stops a jog movement in negative direction. Jog Positive(b Command) Starts/stops a jog movement in positive direction. Power(b Command) Switching on the drive control. Set Motion Ref(i Motion) Assignment method for the TF8560 motion object. FB_Base Md [PROTECTED] Add Md Comp() Adds a component of type I_Md Component to the machine data container. FB_Base Get HMI() Returns the assigned HMI object. 208 Version: 1.4.0 TF85xx
## Page 209

PLC-API - Class overview Name Description Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() 1 Is obsolete Possible events ID Description Alarm/Message 11 Object error state Alarm 21 Command rejected Alarm 301x Envelope limit exceeded Alarm 10 Axis Errors Alarm 20 Axis command rejected Alarm Machine data Component Description Index range Number of in- stances FB_Md File Info [} 133] File information 0x0000 Fxxx 1 FB_Md Axis [} 133] General axis parameters 0x0000 0xxx 1 0x0000 1xxx FB_Md Nc [} 137] NC specific parameters, only if 0x0000 22xx 1 (0) Specific. Nc. Is Nc = TRUE FB_Md Trafo [} 156] Transformation-specific parameters, only if 0x0000 23xx 1 (0) Specific. Trafo. Is Trafo = TRUE FB_Md Homing [} 135] Parameters for homing the axis 0x0000 3xxx 1 Interfaces Type Description I_Base Standard interface on FB_Base. I_Cam Axis Standard interface on FB_Md Axis. I_Axis Standard interface on FB_Axis. I_Motion Standard interface on FB_Motion I_Two Task Interface Runtime interface for two PLC tasks. I_Base Md Standard interface on FB_Base Md. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. TF85xx Version: 1.4.0 209
## Page 210

PLC-API - Class overview Requirements Development Environment Target platform PLC libraries to include Twin CAT 4026 >= v3.1.4026.16 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.12.0.0) Twin CAT 4024 >= v3.1.4024.66 6.8.6 FB_Cam Axis Hmi Extends the FB_Axis Hmi [} 192] class for camming based axes with the necessary interface to the TF8550 Curve Editor via FB_Curve Hmi. Class is abstract Since the class is defined as ABSTRACT, the class cannot be instantiated and must be implemented using inheritance. Syntax: FUNCTION_BLOCK ABSTRACT FB_Cam Axis Hmi EXTENDS FB_Axis Hmi Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Cam Axis Hmi Native Curve I_Curve Hmi [} 213] Get <Local> Internal instance of FB_Curve Hmi for linking to other camming instances Activate Curve1 BOOL Get, Set FALSE Command of the HMI to take over the cam plate on control level. Alternative: Native Curve. Activate Current Index1 UDINT Get 0 Indicates the current index of the cam plate where the drive position is located. Alternative: Native Curve. Current Ind ex FB_Axis Hmi Encoder Zero Shift LREAL Get, (Set) 0.0 Zero offset shift of the axis. Limiting Reference LREAL Get 100.0 [%] Reference value (maximum) for commanded limiting values (pressure or torque limit). Max Acceleration LREAL Get 0.0 Maximum acceleration of the axis. Max Deceleration LREAL Get 0.0 Maximum deceleration of the axis. Max Jerk LREAL Get 0.0 Maximum jerk of the axis. Max Position LREAL Get 0.0 Maximum position of the axis. Max Velocity LREAL Get 0.0 Maximum velocity of the axis. 210 Version: 1.4.0 TF85xx
## Page 211

PLC-API - Class overview Name Type Access Initial value Description Min Postion LREAL Get 0.0 Minimum position of the axis. Min Velocity LREAL Get 0.0 Minimum velocity of the axis. Referencing I_Referencing Hmi Get <Local> Parameter sets and commands for referencing the [} 196] axis. Set Position LREAL Get, Set 0.0 Position used when calling FB_Axis [} 187]. Set Position(). Unit Group STRING(64) Get, Set ‘Length‘ Physical quantity with which the axis is parameterized and operated. FB_Motion Hmi Act Position LREAL Get 0.0 Current position of the connected motion object Act Velocity LREAL Get 0.0 Current velocity of the connected motion object Jog Limiting Negative LREAL Get, Set 0.0 Limitation of the jog command via the FB_Motion [} 178]. Jog Negative() method Ignored for operation with an actuator. Jog Limiting Positive LREAL Get, Set 0.0 Limitation of the jog command via the FB_Motion [} 178]. Jog Positive() method Ignored for operation with an actuator. Jog Velocity Negative LREAL Get, Set 0.0 Velocity of the jog command via the FB_Motion [} 178]. Jog Negative() method Ignored for operation with an actuator. Jog Velocity Positive LREAL Get, Set 0.0 Velocity of the jog command via the FB_Motion [} 178]. Jog Negative() method Ignored for operation with an actuator. Manual Power I_Manual Function Hmi Get, Set <Local> Interface for a manual function to switch on the motion object. [} 163] Specific REFERENCE TO Get <Local> Access to the technology- FB_Motion Specific Hmi specific functions FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > 1 obsolete TF85xx Version: 1.4.0 211
## Page 212

PLC-API - Class overview Local HMI variables Name Data type Description fb Param Handle FB_Md Handle Hmi Handling interface for loading and saving machine data. FB_Cam Axis Hmi fb Native Curve FB_Native Curve Hmi Internal curve for connection with the TF8550 Curve Editor a Set Curve ARRAY[] OF ST_CPoint Set curve transmitted by the HMI. [} 507] a Act Curve ARRAY[] OF ST_CPoint Actual curve that the axis has actually traveled and should be displayed. [} 507] FB_Axis Hmi fb Param Axis FB_Md Axis Hmi Entries in the HMI parameter list under Axis. fb Param Homing FB_Md Homing Hmi Entries in the HMI parameter list under Homing. fb Referencing FB_Referencing Hmi Parameter sets and commands for referencing. FB_Motion Hmi fb Manual Power FB_Manual Function Hmi Interface for a manual function to switch on the motion object. [} 163] fb Specific FB_Motion Specific Hmi Technology-specific functions of the motion object. Methods Name Description Reset() Resets the error state of the class. FB_Base Hmi Init(ip Base) Default initialization method to pass the base class. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Interfaces Type Description I_Base Standard interface on FB_Base. I_Cam Axis Hmi Standard interface on FB_Cam Axis Hmi I_Axis Hmi Standard interface on FB_Axis Hmi. I_Motion Hmi Standard interface on FB_Motion Hmi. I_Base Md Hmi Standard interface on FB_Base Md Hmi. I_Base Hmi Standard interface on FB_Base Hmi. 212 Version: 1.4.0 TF85xx
## Page 213

PLC-API - Class overview Type Description I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Prerequisites Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.10.2.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.8.6.1 FB_Base Curve Hmi This base class (FB) is a TF8550 Curve Editor based cam plate. It represents a common basis for the internal cam plate of an FB_Cam Axis Hmi [} 210] and a stand-alone FB_Curve Hmi [} 215] instance. Class is abstract Since the class is defined as ABSTRACT, the class cannot be instantiated and must be implemented using inheritance. Syntax: FUNCTION_BLOCK ABSTRACT FB_Base Curve Hmi EXTENDS FB_Base Hmi Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Base Curve Hmi Activate BOOL Get, Set FALSE Activation bit for adopting the curve transmitted by the HMI Base Max UDINT Get 400 Number of master curve points used. 0-based index for use in the HMI. Current Index UDINT Get 0 Currently active master curve point. 0-based index for use in the HMI. Current Point UDINT Get, Set 1 Currently active master curve point. 1-based index for use in the PLC. Current Value LREAL Get, Set 0.0 Current value of the object on this cam plate. Points UDINT Get, Set 401 Number of master curve points used. 1-based index for use in the PLC. TF85xx Version: 1.4.0 213
## Page 214

PLC-API - Class overview Name Type Access Initial value Description Value Max LREAL Get, Set 0.0 Maximum possible value for the object operated with this cam plate. Value Min LREAL Get, Set 0.0 Minimum possible value for the object operated with this cam plate. FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Methods Name Description Reset() Resets the error state of the class. FB_Base Curve Hmi Act Point(x) Access to x-th value of the actual curve. The method returns an interface to a . Value property. You can also write to it to assign a value to the curve. Check Display(i Disp) Checks whether the transferred object is authorized to describe the actual values of the curve. Copy(i Copy) Copies the transferred curve to this instance of the curve. Set Display(i Disp) Sets the authorization for actual value display by reference to an object instance (I_Base [} 58] compatible). If the method is called without a transfer value, the authorization is canceled. Set Point(x) Access to x-th value of the set curve. The method returns an interface to a . Value property. You can also write to it to assign a value to the curve. FB_Base Hmi Init(ip Base) Default initialization method to pass the base class. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Interfaces Type Description I_Base Standard interface on FB_Base. 214 Version: 1.4.0 TF85xx
## Page 215

PLC-API - Class overview Type Description I_Curve Hmi Standard interface for TF8550 Curve Editor based cam plates. I_Base Hmi Standard interface on FB_Base Hmi. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Prerequisites Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.10.2.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.8.6.2 FB_Curve Hmi This class (FB) implements a stand-alone TF8550 Curve Editor based cam plate. Syntax: FUNCTION_BLOCK FB_Curve Hmi EXTENDS FB_Base Curve Hmi Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Base Curve Hmi Activate BOOL Get, Set FALSE Activation bit for adopting the curve transmitted by the HMI Base Max UDINT Get 400 Number of master curve points used. 0-based index for use in the HMI. Current Index UDINT Get 0 Currently active master curve point. 0-based index for use in the HMI. Current Point UDINT Get, Set 1 Currently active master curve point. 1-based index for use in the PLC. Current Value LREAL Get, Set 0.0 Current value of the object on this cam plate. Points UDINT Get, Set 401 Number of master curve points used. 1-based index for use in the PLC. Value Max LREAL Get, Set 0.0 Maximum possible value for the object operated with this cam plate. TF85xx Version: 1.4.0 215
## Page 216

PLC-API - Class overview Name Type Access Initial value Description Value Min LREAL Get, Set 0.0 Minimum possible value for the object operated with this cam plate. FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Local HMI variables Name Data type Description a Set Curve ARRAY[] OF LREAL Set curve transmitted by the HMI. a Act Curve ARRAY[] OF LREAL Actual curve that the operated object has actually implemented and should be displayed. Methods Name Description Reset() Resets the error state of the class. FB_Base Curve Hmi Act Point(x) Access to x-th value of the actual curve. The method returns an interface to a . Value property. You can also write to it to assign a value to the curve. Check Display(i Disp) Checks whether the transferred object is authorized to describe the actual values of the curve. Copy(i Copy) Copies the transferred curve to this instance of the curve. Set Display(i Disp) Sets the authorization for actual value display by reference to an object instance (I_Base [} 58] compatible). If the method is called without a transfer value, the authorization is canceled. Set Point(x) Access to x-th value of the set curve. The method returns an interface to a . Value property. You can also write to it to assign a value to the curve. FB_Base Hmi Init(ip Base) Default initialization method to pass the base class. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() 216 Version: 1.4.0 TF85xx
## Page 217

PLC-API - Class overview Interfaces Type Description I_Base Standard interface on FB_Base. I_Curve Hmi Standard interface for TF8550 Curve Editor based cam plates. I_Base Hmi Standard interface on FB_Base Hmi. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Prerequisites Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.10.2.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.8.7 FB_Carriage Implements additional functions for the operation of a trolley movement (e.g. using a crank drive). Syntax: FUNCTION_BLOCK FB_Carriage EXTENDS FB_Ptp Motion Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Ptp Motion Clamp Only Last Seg BOOL Get, Set TRUE Clamping is only possible in the last segment. Ptp Move Finished BOOL Get FALSE The PTP movement was executed successfully. Stack Segment Count BOOL Get, Set TRUE Aborted segments are taken into account in the subsequent command. Use Clamping BOOL Get, Set TRUE Commanded PTP movements should use the set clamping. Use Manual Speed BOOL Get, Set FALSE Commanded PTP movements should be executed at manual speed. FB_Axis Axis I_Axis Base Get NULL Interface to the assigned TF8560 axis. Referencing I_Referencing [} 189] Get <Local> Functions for referencing the axis. FB_Motion Motion I_Motion Base Get NULL Interface to the assigned TF8560 motion object. TF85xx Version: 1.4.0 217
## Page 218

PLC-API - Class overview Name Type Access Initial value Description Error Alarm TL Tc Event Severity Get, Set Error (3) Severity of the alarm that the axis triggers in the error state. Specific I_Motion Specific Get - Technology-specific functions/ values [} 180] FB_Base Md Machine Data I_Md Base Container Get - Interface for machine data handling. [} 117] FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > 1 Obsolete Methods Name Description Reset() Resets the error state of the class. FB_Ptp Motion [PROTECTED] Forms the difference of two segment positions. Cmp Seg Pos(i Seg1, i Seg2) Continue Ptp(b Command) Continues a paused Move Ptp() command. Move Ptp() [} 241] Starts/stops a PTP movement with the parameterization from the HMI. Move To Point() [} 241] Starts/stops a point movement with parameterization from the HMI. Reset Ptp() Resets the saved progress of the Move Ptp() command. FB_Axis Set Position(b Command) Setting the axis position with the FB_Axis Hmi. Setposition. FB_Motion Check Axis State() [} 180] Checks the current state of the axis. Feed Enable(b Feed Enable P, Enable of a direction of movement. b Feed Enable N) Jog Negative(b Command) Starts/stops a jog movement in negative direction. Jog Positive(b Command) Starts/stops a jog movement in positive direction. Power(b Command) Switching on the drive control. Set Motion Ref(i Motion) Assignment method for the TF8560 motion object. FB_Base Md [PROTECTED] Add Md Comp() Adds a component of type I_Md Component to the machine data container. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. 218 Version: 1.4.0 TF85xx
## Page 219

PLC-API - Class overview Name Description Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() 1Obsolete Procedure controlling methods (FB_Adaptable Sequence [} 317]) Name Description Ptp Seq() [} 220] Procedure for loading a PTP movement. Possible events ID Description Alarm/Message 11 Object error state Alarm 21 Command rejected Alarm 200x PTP command error Message 10 Axis Errors Alarm 20 Axis command rejected Alarm Machine data Component Description Index range Number of in- stances FB_Md File Info [} 133] File information 0x0000 Fxxx 1 FB_Md Carriage [} 129] Parameters for a trolley unit 0x0001 20xx 1 FB_Md Ptp Motion [} 138] Parameters for linear motion 0x0000 20xx 1 FB_Md Axis [} 133] General axis parameters 0x0000 0xxx 1 0x0000 1xxx FB_Md Nc [} 137] NC specific parameters, only if 0x0000 22xx 1 (0) Specific. Nc. Is Nc = TRUE FB_Md Trafo [} 156] Transformation-specific parameters, only if 0x0000 23xx 1 (0) Specific. Trafo. Is Trafo = TRUE FB_Md Homing [} 135] Parameters for homing the axis 0x0000 3xxx 1 Interfaces Type Description I_Base Standard interface on FB_Base. I_Carriage Standard interface on FB_Carriage I_Ptp Motion Standard interface on FB_Ptp Motion. I_Axis Standard interface on FB_Axis. I_Motion Standard interface on FB_Motion I_Two Task Interface Runtime interface for two PLC tasks. I_Base Md Standard interface on FB_Base Md. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. TF85xx Version: 1.4.0 219
## Page 220

PLC-API - Class overview Prerequisites Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.10.2.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.8.7.1 Ptp Seq() Instance type Instance name Master fb Ptp Seq Slaves fb Smooth Start fb Dynamic Scaler State diagram: Base Seqeuence: FB_Ptp Motion [} 237]. Ptp Seq() [} 240] Prerequisites Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.10.2.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.8.8 FB_Carriage Hmi HMI parallel class of FB_Carriage class. Syntax: FUNCTION_BLOCK FB_Clamp Hmi EXTENDS FB_Ptp Motion Hmi Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Carriage Hmi 220 Version: 1.4.0 TF85xx
## Page 221

PLC-API - Class overview Name Type Access Initial value Description Enable Dynamic Scaler BOOL Get, Set FALSE Function for adapting the axis dynamics to the commanded target velocity. Enable Smooth Start BOOL Get, Set FALSE Function for smooth start outside the end positions. Useful for operating a crank drive. Manual For Back I_Manual Function Hmi Get <Local> HMI for the implementation of a manual function. [} 163] Smooth Start Factor LREAL Get, Set 0.25 Factor that is applied to the maximum dynamics in the event of a smooth start. Notice The Deceleration is not affected by the smooth start. Smooth Start Threshold LREAL Get, Set 10.0 Threshold value of the distance to the end position from which the smoth start becomes active. FB_Ptp Motion Hmi Active Move INT Get, Set 0 Index of the active cluster. Active Segment INT Get, Set 0 Index of the active segment. Axis Move REFERENCE TO Get <Local> Motion configuration object. FB_Axis Move Hmi [} 245] Enable Recipe BOOL Get, Set FALSE Enables recipe handling via I_Recipe [} 267]. FB_Axis Hmi Encoder Zero Shift LREAL Get, (Set) 0.0 Zero offset shift of the axis. Limiting Reference LREAL Get 100.0 [%] Reference value (maximum) for commanded limiting values (pressure or torque limit). Max Acceleration LREAL Get 0.0 Maximum acceleration of the axis. Max Deceleration LREAL Get 0.0 Maximum deceleration of the axis. Max Jerk LREAL Get 0.0 Maximum jerk of the axis. Max Position LREAL Get 0.0 Maximum position of the axis. Max Velocity LREAL Get 0.0 Maximum velocity of the axis. Min Postion LREAL Get 0.0 Minimum position of the axis. Min Velocity LREAL Get 0.0 Minimum velocity of the axis. Referencing I_Referencing Hmi Get <Local> Parameter sets and commands for referencing the [} 196] axis. Set Position LREAL Get, Set 0.0 Position used when calling FB_Axis [} 187]. Set Position(). Unit Group STRING(64) Get, Set ‘Length‘ Physical quantity with which the axis is parameterized and operated. FB_Motion Hmi Act Position LREAL Get 0.0 Current position of the connected motion object TF85xx Version: 1.4.0 221
## Page 222

PLC-API - Class overview Name Type Access Initial value Description Act Velocity LREAL Get 0.0 Current velocity of the connected motion object Jog Limiting Negative LREAL Get, Set 0.0 Limitation of the jog command via the FB_Motion [} 178]. Jog Negative() method Ignored for operation with an actuator. Jog Limiting Positive LREAL Get, Set 0.0 Limitation of the jog command via the FB_Motion [} 178]. Jog Positive() method Ignored for operation with an actuator. Jog Velocity Negative LREAL Get, Set 0.0 Velocity of the jog command via the FB_Motion [} 178]. Jog Negative() method Ignored for operation with an actuator. Jog Velocity Positive LREAL Get, Set 0.0 Velocity of the jog command via the FB_Motion [} 178]. Jog Negative() method Ignored for operation with an actuator. Manual Power I_Manual Function Hmi Get, Set <Local> Interface for a manual function to switch on the motion object. [} 163] Specific REFERENCE TO Get <Local> Access to the technology- FB_Motion Specific Hmi specific functions FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Local HMI variables Name Data type Description fb Param Handle FB_Md Handle Hmi Handling interface for loading and saving machine data. FB_Carriage Hmi fb Manual For Back FB_Manual Function Hmi HMI for the implementation of a manual function. [} 163] fb Param Carriage FB_Md Carriage Hmi Entries in the HMI parameter list under Trolley. FB_Ptp Motion Hmi a Recipe ARRAY[] OF Structured recipe values for the motion configuration. FB_Move Cluster Recipe [} 267] fb Axis Move FB_Axis Move Hmi [} 245] Motion configuration object. fb Param Ptp Motion FB_Md Ptp Motion Hmi Entries in the HMI parameter list under Linear motion. FB_Axis Hmi 222 Version: 1.4.0 TF85xx
## Page 223

PLC-API - Class overview Name Data type Description fb Param Axis FB_Md Axis Hmi Entries in the HMI parameter list under Axis. fb Param Homing FB_Md Homing Hmi Entries in the HMI parameter list under Homing. fb Referencing FB_Referencing Hmi Parameter sets and commands for referencing. FB_Motion Hmi fb Manual Power FB_Manual Function Hmi Interface for a manual function to switch on the motion object. [} 163] fb Specific FB_Motion Specific Hmi Technology-specific functions of the motion object. Methods Name Description Reset() Resets the error state of the class. FB_Ptp Motion Hmi Moves(x) Returns an interface to the x-th Move-Cluster [} 246]. FB_Base Hmi Init(ip Base) Default initialization method to pass the base class. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Exceptions avoidance The list access functions (e.g. Channels(x), Groups(x), etc...) return a pseudo variable if the requested index is invalid. In addition, a message is thrown in the Event Logger. Interfaces Type Description I_Base Standard interface on FB_Base. I_Clamp Hmi Standard interface on FB_Clamp Hmi. I_Ptp Motion Hmi Standard interface on FB_Ptp Motion Hmi. I_Recipe Interface for managing structured recipe values. I_Axis Hmi Standard interface on FB_Axis Hmi. I_Motion Hmi Standard interface on FB_Motion Hmi. I_Base Md Hmi Standard interface on FB_Base Md Hmi. I_Base Hmi Standard interface on FB_Base Hmi. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. TF85xx Version: 1.4.0 223
## Page 224

PLC-API - Class overview Prerequisites Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.10.2.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.8.9 FB_Clamp Implements specific functions for a clamp. • Adds a closing segment to the PTP movement, which is permanently parameterized in the machine data. Clamp locking only active with NC transformer axes The use of a lock segment is only inserted with an NC transformer axis! For hydraulic axes, the normal clamping of the FB_Ptp Motion [} 237] class is used. Syntax: FUNCTION_BLOCK FB_Clamp EXTENDS FB_Ptp Motion Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Clamp Locking Available BOOL Get FALSE Locking of the clamp is available. Disable Lock Segment1 BOOL Get, Set FALSE Disables the use of the locking point segment for NC clamp axes. Alternatively: Use Clamping FB_Ptp Motion Clamp Only Last Seg BOOL Get, Set TRUE Clamping is only possible in the last segment. Ptp Move Finished BOOL Get FALSE The PTP movement was executed successfully. Stack Segment Count BOOL Get, Set TRUE Aborted segments are taken into account in the subsequent command. Use Clamping BOOL Get, Set TRUE Commanded PTP movements should use the set clamping. Use Manual Speed BOOL Get, Set FALSE Commanded PTP movements should be executed at manual speed. FB_Axis Axis I_Axis Base Get NULL Interface to the assigned TF8560 axis. Referencing I_Referencing [} 189] Get <Local> Functions for referencing the axis. 224 Version: 1.4.0 TF85xx
## Page 225

PLC-API - Class overview Name Type Access Initial value Description FB_Motion Motion I_Motion Base Get NULL Interface to the assigned TF8560 motion object. Error Alarm TL Tc Event Severity Get, Set Error (3) Severity of the alarm that the axis triggers in the error state. Specific I_Motion Specific Get - Technology-specific functions/ values [} 180] FB_Base Md Machine Data I_Md Base Container Get - Interface for machine data handling. [} 117] FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > 1Obsolete Methods Name Description Reset() Resets the error state of the class. FB_Ptp Motion [PROTECTED] Forms the difference of two segment positions. Cmp Seg Pos(i Seg1, i Seg2) Continue Ptp(b Command) Continues a paused Move Ptp() command. Move Ptp() [} 241] Starts/stops a PTP movement with the parameterization from the HMI. Move To Point() [} 241] Starts/stops a point movement with parameterization from the HMI. Reset Ptp() Resets the saved progress of the Move Ptp() command. FB_Axis Set Position(b Command) Setting the axis position with the FB_Axis Hmi. Setposition. FB_Motion Check Axis State() [} 180] Checks the current state of the axis. Feed Enable(b Feed Enable P, Enable of a direction of movement. b Feed Enable N) Jog Negative(b Command) Starts/stops a jog movement in negative direction. Jog Positive(b Command) Starts/stops a jog movement in positive direction. Power(b Command) Switching on the drive control. Set Motion Ref(i Motion) Assignment method for the TF8560 motion object. FB_Base Md [PROTECTED] Add Md Comp() Adds a component of type I_Md Component to the machine data container. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. TF85xx Version: 1.4.0 225
## Page 226

PLC-API - Class overview Name Description Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Procedure controlling methods (FB_Adaptable Sequence [} 317]) Name Description Ptp Seq() [} 227] Procedure for loading a PTP movement (extended) Possible events ID Description Alarm/Message 11 Object error state Alarm 21 Command rejected Alarm 200x PTP command error Message 10 Axis Errors Alarm 20 Axis command rejected Alarm Machine data Component Description Index range Number of in- stances FB_Md File Info [} 133] File information 0x0000 Fxxx 1 FB_Md Clamp [} 130] Parameters for operation as a clamp 0x0001 1xxx 1 FB_Md Ptp Motion [} 138] Parameters for linear motion 0x0000 20xx 1 FB_Md Axis [} 133] General axis parameters 0x0000 0xxx 1 0x0000 1xxx FB_Md Nc [} 137] NC specific parameters, only if 0x0000 22xx 1 (0) Specific. Nc. Is Nc = TRUE FB_Md Trafo [} 156] Transformation-specific parameters, only if 0x0000 23xx 1 (0) Specific. Trafo. Is Trafo = TRUE FB_Md Homing [} 135] Parameters for homing the axis 0x0000 3xxx 1 Interfaces Type Description I_Base Standard interface on FB_Base. I_Clamp Standard interface on FB_Clamp. I_Ptp Motion Standard interface on FB_Ptp Motion. I_Axis Standard interface on FB_Axis. I_Motion Standard interface on FB_Motion I_Two Task Interface Runtime interface for two PLC tasks. I_Base Md Standard interface on FB_Base Md. I_Base Empty For extension without standard interface. 226 Version: 1.4.0 TF85xx
## Page 227

PLC-API - Class overview Type Description I_Base Dev Covers all methods and properties of the base class. Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.8.9.1 Ptp Seq() Clamp locking only active with NC transformer axes The use of a lock segment is only inserted with an NC transformer axis! For hydraulic axes, the normal clamping of the FB_Ptp Motion [} 237] class is used. Instance type Instance Name Master fb Ptp Seq Slaves fb Provide Lock Segment State diagram: Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.8.10 FB_Clamp Hmi HMI parallel class of FB_Clamp class. Clamp locking only active with NC transformer axes The use of a lock segment is only inserted with an NC transformer axis! For hydraulic axes, the normal clamping of the FB_Ptp Motion [} 237] class is used. TF85xx Version: 1.4.0 227
## Page 228

PLC-API - Class overview Syntax: FUNCTION_BLOCK FB_Clamp Hmi EXTENDS FB_Ptp Motion Hmi Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Clamp Hmi Lock Distance LREAL Get, Set 3.5 Locking distance from the last segment of Moves(1) in its parameterized direction. Lock Limiting LREAL Get, Set 100.0 [%] Limitation (e.g. torque) of the locking Lock Velocity LREAL Get, Set 5.0 Velocity at which the system moves to the locking position after the last PTP point. Manual Close Open I_Manual Function Hmi Get <Local> HMI for the implementation of a manual function. [} 163] Unlock Limiting LREAL Get, Set 100.0 [%] Limitation (e.g. torque) of the unlocking Unlock Position LREAL Get, Set 0.0 Unlocking position from which the regular PTP segments take over. Unlock Velocity LREAL Get, Set 1.0 Velocity at which the system is moved to the unlocking position. Lock Position1 LREAL Get, Set 3.5 Locking position. The sign is interpreted inverted. Alternatively: Lock Distance FB_Ptp Motion Hmi Active Move INT Get, Set 0 Index of the active cluster. Active Segment INT Get, Set 0 Index of the active segment. Axis Move REFERENCE TO Get <Local> Motion configuration object. FB_Axis Move Hmi [} 245] Enable Recipe BOOL Get, Set FALSE Enables recipe handling via I_Recipe [} 267]. FB_Axis Hmi Encoder Zero Shift LREAL Get, (Set) 0.0 Zero offset shift of the axis. Limiting Reference LREAL Get 100.0 [%] Reference value (maximum) for commanded limiting values (pressure or torque limit). Max Acceleration LREAL Get 0.0 Maximum acceleration of the axis. Max Deceleration LREAL Get 0.0 Maximum deceleration of the axis. Max Jerk LREAL Get 0.0 Maximum jerk of the axis. Max Position LREAL Get 0.0 Maximum position of the axis. Max Velocity LREAL Get 0.0 Maximum velocity of the axis. Min Postion LREAL Get 0.0 Minimum position of the axis. Min Velocity LREAL Get 0.0 Minimum velocity of the axis. 228 Version: 1.4.0 TF85xx
## Page 229

PLC-API - Class overview Name Type Access Initial value Description Referencing I_Referencing Hmi Get <Local> Parameter sets and commands for referencing the [} 196] axis. Set Position LREAL Get, Set 0.0 Position used when calling FB_Axis [} 187]. Set Position(). Unit Group STRING(64) Get, Set ‘Length‘ Physical quantity with which the axis is parameterized and operated. FB_Motion Hmi Act Position LREAL Get 0.0 Current position of the connected motion object Act Velocity LREAL Get 0.0 Current velocity of the connected motion object Jog Limiting Negative LREAL Get, Set 0.0 Limitation of the jog command via the FB_Motion [} 178]. Jog Negative() method Ignored for operation with an actuator. Jog Limiting Positive LREAL Get, Set 0.0 Limitation of the jog command via the FB_Motion [} 178]. Jog Positive() method Ignored for operation with an actuator. Jog Velocity Negative LREAL Get, Set 0.0 Velocity of the jog command via the FB_Motion [} 178]. Jog Negative() method Ignored for operation with an actuator. Jog Velocity Positive LREAL Get, Set 0.0 Velocity of the jog command via the FB_Motion [} 178]. Jog Negative() method Ignored for operation with an actuator. Manual Power I_Manual Function Hmi Get, Set <Local> Interface for a manual function to switch on the motion object. [} 163] Specific REFERENCE TO Get <Local> Access to the technology- FB_Motion Specific Hmi specific functions FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Local HMI variables Name Data type Description fb Param Handle FB_Md Handle Hmi Handling interface for loading and saving machine data. FB_Clamp Hmi TF85xx Version: 1.4.0 229
## Page 230

PLC-API - Class overview Name Data type Description fb Manual Close Open FB_Manual Function Hmi HMI for the implementation of a manual function. [} 163] fb Param Clamp FB_Md Clamp Hmi Entries in the HMI parameter list under Clamp. FB_Ptp Motion Hmi a Recipe ARRAY[] OF Structured recipe values for the motion configuration. FB_Move Cluster Recipe [} 267] fb Axis Move FB_Axis Move Hmi [} 245] Motion configuration object. fb Param Ptp Motion FB_Md Ptp Motion Hmi Entries in the HMI parameter list under Linear motion. FB_Axis Hmi fb Param Axis FB_Md Axis Hmi Entries in the HMI parameter list under Axis. fb Param Homing FB_Md Homing Hmi Entries in the HMI parameter list under Homing. fb Referencing FB_Referencing Hmi Parameter sets and commands for referencing. FB_Motion Hmi fb Manual Power FB_Manual Function Hmi Interface for a manual function to switch on the motion object. [} 163] fb Specific FB_Motion Specific Hmi Technology-specific functions of the motion object. Methods Name Description Reset() Resets the error state of the class. FB_Ptp Motion Hmi Moves(x) Returns an interface to the x-th Move-Cluster [} 246]. FB_Base Hmi Init(ip Base) Default initialization method to pass the base class. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Exceptions avoidance The list access functions (e.g. Channels(x), Groups(x), etc...) return a pseudo variable if the requested index is invalid. In addition, a message is thrown in the Event Logger. Interfaces Type Description I_Base Standard interface on FB_Base. I_Clamp Hmi Standard interface on FB_Clamp Hmi. 230 Version: 1.4.0 TF85xx
## Page 231

PLC-API - Class overview Type Description I_Ptp Motion Hmi Standard interface on FB_Ptp Motion Hmi. I_Recipe Interface for managing structured recipe values. I_Axis Hmi Standard interface on FB_Axis Hmi. I_Motion Hmi Standard interface on FB_Motion Hmi. I_Base Md Hmi Standard interface on FB_Base Md Hmi. I_Base Hmi Standard interface on FB_Base Hmi. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Prerequisites Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.10.2.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.8.11 FB_Extruder Inherits from the FB_Axis class and implements further functions for continuous motion of an extruder. Syntax: FUNCTION_BLOCK FB_Extruder EXTENDS FB_Axis Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Extruder Guiding Value LREAL Get 0.0 Contains the current turn rate for a master/slave connection of two FB_Extruder objects. Master Extruder I_Extruder Get, Set NULL Used to assign a master extruder. FB_Axis Axis I_Axis Base Get NULL Interface to the assigned TF8560 axis. Referencing I_Referencing [} 189] Get <Local> Functions for referencing the axis. FB_Motion Motion I_Motion Base Get NULL Interface to the assigned TF8560 motion object. Error Alarm TL Tc Event Severity Get, Set Error (3) Severity of the alarm that the axis triggers in the error state. Specific I_Motion Specific Get - Technology-specific functions/ values [} 180] FB_Base Md TF85xx Version: 1.4.0 231
## Page 232

PLC-API - Class overview Name Type Access Initial value Description Machine Data I_Md Base Container Get - Interface for machine data handling. [} 117] FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Methods Name Description Reset() Resets the error state of the class. FB_Extruder Do Basic Rpm(b Execute) Starts a rotary motion with the base speed set in the HMI. Do Nominal Rpm(b Execute) Starts a rotary motion at the production speed set in the HMI. Do Turnrate Down(b Execute) Reduces the speed (continuously). Do Turnrate Up(b Execute) Increases the speed (continuously). FB_Axis Set Position(b Command) Setting the axis position with the FB_Axis Hmi. Setposition. FB_Motion Check Axis State() [} 180] Checks the current state of the axis. Feed Enable(b Feed Enable P, Enable of a direction of movement. b Feed Enable N) Jog Negative(b Command) Starts/stops a jog movement in negative direction. Jog Positive(b Command) Starts/stops a jog movement in positive direction. Power(b Command) Switching on the drive control. Set Motion Ref(i Motion) Assignment method for the TF8560 motion object. FB_Base Md [PROTECTED] Add Md Comp() Adds a component of type I_Md Component to the machine data container. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() 232 Version: 1.4.0 TF85xx
## Page 233

PLC-API - Class overview Procedure controlling methods (FB_Adaptable Sequence [} 317]) Name Description Power States() [} 234] Procedure for executing the continuous rotary motion Possible events ID Description Alarm/Message 11 Object error state Alarm 21 Command rejected Alarm 100x Axis switch on/off failed. Message 5000 Start of constant feed (Velocity Feed) failed. Message 10 Axis Errors Alarm 20 Axis command rejected Alarm Machine data Component Description Index range Number of in- stances FB_Md File Info [} 133] File information 0x0000 Fxxx 1 FB_Md Continuous Motio Parameters for continuous motion 0x0000 24xx 1 n [} 132] FB_Md Axis [} 133] General axis parameters 0x0000 0xxx 1 0x0000 1xxx FB_Md Nc [} 137] NC specific parameters, only if 0x0000 22xx 1 (0) Specific. Nc. Is Nc = TRUE FB_Md Trafo [} 156] Transformation-specific parameters, only if 0x0000 23xx 1 (0) Specific. Trafo. Is Trafo = TRUE FB_Md Homing [} 135] Parameters for homing the axis 0x0000 3xxx 1 Interfaces Type Description I_Base Standard interface on FB_Base. I_Extruder Standard interface on FB_Extruder. I_Axis Standard interface on FB_Axis. I_Motion Standard interface on FB_Motion I_Two Task Interface Runtime interface for two PLC tasks. I_Base Md Standard interface on FB_Base Md. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.42 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.4) TF85xx Version: 1.4.0 233
## Page 234

PLC-API - Class overview 6.8.11.1 Power States() Instance type Instance Name Master fb Power States Slaves a Seq Base Members[E_Extruder Power States.e Length] State diagram: Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 6.8.12 FB_Extruder Hmi HMI parallel class of FB_Extruder class. Syntax: FUNCTION_BLOCK FB_Extruder Hmi EXTENDS FB_Axis Hmi Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Extruder Hmi Base Turnrate LREAL Get, Set 20.0 Basic turnrate, commanded by FB_Extruder [} 231]. Do Basic Rpm(). Do Basic Rpm BOOL Get, Set FALSE Placeholder: Control signal for ramping to basic turnrate. The signal must be processed by the application. Do Nominal Rpm BOOL Get, Set FALSE Placeholder: Control signal for ramping to production turnrate. The signal must be processed by the application. 234 Version: 1.4.0 TF85xx
## Page 235

PLC-API - Class overview Name Type Access Initial value Description Do Turnrate Down BOOL Get, Set FALSE Placeholder: Control signal for jog-driven turnrate reduction. The signal must be processed by the application. Do Turnrate Up BOOL Get, Set FALSE Placeholder: Control signal for jog-driven turnrate increase. The signal must be processed by the application. Gear Factor LREAL Get, Set 1.5 Gear factor for operation as a slave extruder. Production Turnrate LREAL Get, Set 150.0 Production turnrate, commanded by FB_Extruder [} 231]. Do Basic Rpm(). Ramp Time LREAL Get, Set 60.0 Time required by the extruder to ramp from 0 to maximum velocity. Set Velocity LREAL Get 0.0 Set velocity of the extruder, which is specified by the setpoint generation. FB_Axis Hmi Encoder Zero Shift LREAL Get, (Set) 0.0 Zero offset shift of the axis. Limiting Reference LREAL Get 100.0 [%] Reference value (maximum) for commanded limiting values (pressure or torque limit). Max Acceleration LREAL Get 0.0 Maximum acceleration of the axis. Max Deceleration LREAL Get 0.0 Maximum deceleration of the axis. Max Jerk LREAL Get 0.0 Maximum jerk of the axis. Max Position LREAL Get 0.0 Maximum position of the axis. Max Velocity LREAL Get 0.0 Maximum velocity of the axis. Min Postion LREAL Get 0.0 Minimum position of the axis. Min Velocity LREAL Get 0.0 Minimum velocity of the axis. Referencing I_Referencing Hmi Get <Local> Parameter sets and commands for referencing the [} 196] axis. Set Position LREAL Get, Set 0.0 Position used when calling FB_Axis [} 187]. Set Position(). Unit Group STRING(64) Get, Set ‘Length‘ Physical quantity with which the axis is parameterized and operated. FB_Motion Hmi Act Position LREAL Get 0.0 Current position of the connected motion object Act Velocity LREAL Get 0.0 Current velocity of the connected motion object Jog Limiting Negative LREAL Get, Set 0.0 Limitation of the jog command via the FB_Motion [} 178]. Jog Negative() method Ignored for operation with an actuator. TF85xx Version: 1.4.0 235
## Page 236

PLC-API - Class overview Name Type Access Initial value Description Jog Limiting Positive LREAL Get, Set 0.0 Limitation of the jog command via the FB_Motion [} 178]. Jog Positive() method Ignored for operation with an actuator. Jog Velocity Negative LREAL Get, Set 0.0 Velocity of the jog command via the FB_Motion [} 178]. Jog Negative() method Ignored for operation with an actuator. Jog Velocity Positive LREAL Get, Set 0.0 Velocity of the jog command via the FB_Motion [} 178]. Jog Negative() method Ignored for operation with an actuator. Manual Power I_Manual Function Hmi Get, Set <Local> Interface for a manual function to switch on the motion object. [} 163] Specific REFERENCE TO Get <Local> Access to the technology- FB_Motion Specific Hmi specific functions FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Local HMI variables Name Data type Description fb Param Handle FB_Md Handle Hmi Handling interface for loading and saving machine data. FB_Extruder Hmi fb Param Continuous Motion FB_Md Continuous Motion Entries in the HMI parameter list under Continuous motion FB_Axis Hmi fb Param Axis FB_Md Axis Hmi Entries in the HMI parameter list under Axis. fb Param Homing FB_Md Homing Hmi Entries in the HMI parameter list under Homing. fb Referencing FB_Referencing Hmi Parameter sets and commands for referencing. FB_Motion Hmi fb Manual Power FB_Manual Function Hmi Interface for a manual function to switch on the motion object. [} 163] fb Specific FB_Motion Specific Hmi Technology-specific functions of the motion object. Methods Name Description Reset() Resets the error state of the class. FB_Base Hmi Init(ip Base) Default initialization method to pass the base class. 236 Version: 1.4.0 TF85xx
## Page 237

PLC-API - Class overview Name Description FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Interfaces Type Description I_Base Standard interface on FB_Base. I_Extruder Hmi Standard interface on FB_Extruder Hmi. I_Axis Hmi Standard interface on FB_Axis Hmi. I_Motion Hmi Standard interface on FB_Motion Hmi. I_Base Md Hmi Standard interface on FB_Base Md Hmi. I_Base Hmi Standard interface on FB_Base Hmi. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 6.8.13 FB_Ptp Motion Implements a segment logic for PTP-based movements. The TF8550 Control Arrow Motion Graph is supported via the FB_Ptp Motion Hmi class. Syntax: FUNCTION_BLOCK FB_Ptp Motion EXTENDS FB_Axis Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Ptp Motion Clamp Only Last Seg BOOL Get, Set TRUE Clamping is only possible in the last segment. TF85xx Version: 1.4.0 237
## Page 238

PLC-API - Class overview Name Type Access Initial value Description Ptp Move Finished BOOL Get FALSE The PTP movement was executed successfully. Stack Segment Count BOOL Get, Set TRUE Aborted segments are taken into account in the subsequent command. Use Clamping BOOL Get, Set TRUE Commanded PTP movements should use the set clamping. Use Manual Speed BOOL Get, Set FALSE Commanded PTP movements should be executed at manual speed. Fixed Move Direction1 BOOL Get, Set TRUE Fixes the direction of movement for cluster 1 (negative) and 2 (positive). Alternatively: FB_Ptp Motion Hmi. Moves(<1| 2>). Direction [} 246] Ptp Move Stop Done1 BOOL Get FALSE The PTP movement was successfully stopped. FB_Axis Axis I_Axis Base Get NULL Interface to the assigned TF8560 axis. Referencing I_Referencing [} 189] Get <Local> Functions for referencing the axis. FB_Motion Motion I_Motion Base Get NULL Interface to the assigned TF8560 motion object. Error Alarm TL Tc Event Severity Get, Set Error (3) Severity of the alarm that the axis triggers in the error state. Specific I_Motion Specific Get - Technology-specific functions/ values [} 180] FB_Base Md Machine Data I_Md Base Container Get - Interface for machine data handling. [} 117] FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > 1 Obsolete Methods Name Description Reset() Resets the error state of the class. FB_Ptp Motion [PROTECTED] Forms the difference of two segment positions. Cmp Seg Pos(i Seg1, i Seg2) Continue Ptp(b Command) Continues a paused Move Ptp() command. Move Ptp() [} 241] Starts/stops a PTP movement with the parameterization from the HMI. 238 Version: 1.4.0 TF85xx
## Page 239

PLC-API - Class overview Name Description Move To Point() [} 241] Starts/stops a point movement with parameterization from the HMI. Reset Ptp() Resets the saved progress of the Move Ptp() command. FB_Axis Set Position(b Command) Setting the axis position with the FB_Axis Hmi. Setposition. FB_Motion Check Axis State() [} 180] Checks the current state of the axis. Feed Enable(b Feed Enable P, Enable of a direction of movement. b Feed Enable N) Jog Negative(b Command) Starts/stops a jog movement in negative direction. Jog Positive(b Command) Starts/stops a jog movement in positive direction. Power(b Command) Switching on the drive control. Set Motion Ref(i Motion) Assignment method for the TF8560 motion object. FB_Base Md [PROTECTED] Add Md Comp() Adds a component of type I_Md Component to the machine data container. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Procedure controlling methods (FB_Adaptable Sequence [} 317]) Name Description Ptp Seq() [} 240] Procedure for loading a PTP movement. Possible events ID Description Alarm/Message 11 Object error state Alarm 21 Command rejected Alarm 200x PTP command error Message 10 Axis Errors Alarm 20 Axis command rejected Alarm Machine data Component Description Index range Number of in- stances FB_Md File Info [} 133] File information 0x0000 Fxxx 1 FB_Md Ptp Motion [} 138] Parameters for linear motion 0x0000 20xx 1 TF85xx Version: 1.4.0 239
## Page 240

PLC-API - Class overview Component Description Index range Number of in- stances FB_Md Axis [} 133] General axis parameters 0x0000 0xxx 1 0x0000 1xxx FB_Md Nc [} 137] NC specific parameters, only if 0x0000 22xx 1 (0) Specific. Nc. Is Nc = TRUE FB_Md Trafo [} 156] Transformation-specific parameters, only if 0x0000 23xx 1 (0) Specific. Trafo. Is Trafo = TRUE FB_Md Homing [} 135] Parameters for homing the axis 0x0000 3xxx 1 Interfaces Type Description I_Base Standard interface on FB_Base. I_Ptp Motion Standard interface on FB_Ptp Motion. I_Axis Standard interface on FB_Axis. I_Motion Standard interface on FB_Motion I_Two Task Interface Runtime interface for two PLC tasks. I_Base Md Standard interface on FB_Base Md. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Requirements Development Environment Target platform PLC libraries to include Twin CAT 4026 >= v3.1.4026.16 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.12.0.0) Twin CAT 4024 >= v3.1.4024.66 6.8.13.1 Ptp Seq() Instance type Instance name Master fb Ptp Seq Slaves a Base Seq Members[E_Ptp Base Seq.e Length] State diagram: Requirements Development Environment Target platform PLC libraries to include Twin CAT 4026 >= v3.1.4026.16 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.12.0.0) Twin CAT 4024 >= v3.1.4024.66 240 Version: 1.4.0 TF85xx
## Page 241

PLC-API - Class overview 6.8.13.2 Move Ptp() Triggers the processing of the configured PTP segments. Syntax: METHOD Move Ptp : HRESULT VAR_INPUT b Command: BOOL; // TRUE to start move, FALSE to abort running move or rewind old command Move Idx: INT; // Selected cluster of segments (By default: Cluster 1 - negative direction / Cluster 2 - positive direction) Segment Count: INT; // Segments to move (0 to move all segments) END_VAR Inputs Name Type Description b Command BOOL TRUE to trigger a movement, FALSE to cancel a current movement or to cancel a pending command. Move Idx INT Selected cluster (grouped PTP segments). In the default initialization, cluster 1 comprises the movements in the negative direction and cluster 2 those in the positive direction. Segment Count INT Number of segments to be driven. A 0 ensures that all segments of a cluster are driven. Outputs Name Type Description Move Ptp HRESULT Return value with feedback on the success of the execution. Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.42 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.5) 6.8.13.3 Move To Point() Moves directly to the position of a configured PTP segment without processing the segments between the start position and the target point. Syntax: METHOD Move To Point : HRESULT VAR_INPUT b Command: BOOL; // TRUE to start move, FALSE to abort running move or rewind old command Move Idx: INT; // Selected cluster of segments (By default: Cluster 1 - negative direction / Cluster 2 - positive direction) TF85xx Version: 1.4.0 241
## Page 242

PLC-API - Class overview Target Segment: INT; // Destination segment of the selected cluster (0 to move to the last us ed segment in a cluster) END_VAR Inputs Name Type Description b Command BOOL TRUE to trigger a movement, FALSE to cancel a current movement or to cancel a pending command. Move Idx INT Selected cluster (grouped PTP segments). In the default initialization, cluster 1 comprises the movements in the negative direction and cluster 2 those in the positive direction. Target Segment INT Target segment within the selected cluster. If a 0 is transferred, the last segment is approached with In Use equal to TRUE. Outputs Name Type Description Move To Point HRESULT Return value with feedback on the success of the execution. Requirements Development Environment Target platform PLC libraries to include Twin CAT 4026 >= v3.1.4026.16 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.12.0.0) Twin CAT 4024 >= v3.1.4024.66 6.8.14 FB_Ptp Motion Hmi HMI parallel class of FB_Ptp Motion class. Syntax: FUNCTION_BLOCK FB_Ptp Motion Hmi EXTENDS FB_Axis Hmi Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Ptp Motion Hmi Active Move INT Get, Set 0 Index of the active cluster. Active Segment INT Get, Set 0 Index of the active segment. Axis Move REFERENCE TO Get <Local> Motion configuration object. FB_Axis Move Hmi [} 245] Enable Recipe BOOL Get, Set FALSE Enables recipe handling via I_Recipe [} 267]. 242 Version: 1.4.0 TF85xx
## Page 243

PLC-API - Class overview Name Type Access Initial value Description FB_Axis Hmi Encoder Zero Shift LREAL Get, (Set) 0.0 Zero offset shift of the axis. Limiting Reference LREAL Get 100.0 [%] Reference value (maximum) for commanded limiting values (pressure or torque limit). Max Acceleration LREAL Get 0.0 Maximum acceleration of the axis. Max Deceleration LREAL Get 0.0 Maximum deceleration of the axis. Max Jerk LREAL Get 0.0 Maximum jerk of the axis. Max Position LREAL Get 0.0 Maximum position of the axis. Max Velocity LREAL Get 0.0 Maximum velocity of the axis. Min Postion LREAL Get 0.0 Minimum position of the axis. Min Velocity LREAL Get 0.0 Minimum velocity of the axis. Referencing I_Referencing Hmi Get <Local> Parameter sets and commands for referencing the [} 196] axis. Set Position LREAL Get, Set 0.0 Position used when calling FB_Axis [} 187]. Set Position(). Unit Group STRING(64) Get, Set ‘Length‘ Physical quantity with which the axis is parameterized and operated. FB_Motion Hmi Act Position LREAL Get 0.0 Current position of the connected motion object Act Velocity LREAL Get 0.0 Current velocity of the connected motion object Jog Limiting Negative LREAL Get, Set 0.0 Limitation of the jog command via the FB_Motion [} 178]. Jog Negative() method Ignored for operation with an actuator. Jog Limiting Positive LREAL Get, Set 0.0 Limitation of the jog command via the FB_Motion [} 178]. Jog Positive() method Ignored for operation with an actuator. Jog Velocity Negative LREAL Get, Set 0.0 Velocity of the jog command via the FB_Motion [} 178]. Jog Negative() method Ignored for operation with an actuator. Jog Velocity Positive LREAL Get, Set 0.0 Velocity of the jog command via the FB_Motion [} 178]. Jog Negative() method Ignored for operation with an actuator. Manual Power I_Manual Function Hmi Get, Set <Local> Interface for a manual function to switch on the motion object. [} 163] Specific REFERENCE TO Get <Local> Access to the technology- FB_Motion Specific Hmi specific functions FB_Base TF85xx Version: 1.4.0 243
## Page 244

PLC-API - Class overview Name Type Access Initial value Description Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Local HMI variables Name Data type Description fb Param Handle FB_Md Handle Hmi Handling interface for loading and saving machine data. FB_Ptp Motion Hmi a Recipe ARRAY[] OF Structured recipe values for the motion configuration. FB_Move Cluster Recipe [} 267] fb Axis Move FB_Axis Move Hmi [} 245] Motion configuration object. fb Param Ptp Motion FB_Md Ptp Motion Hmi Entries in the HMI parameter list under Linear motion. FB_Axis Hmi fb Param Axis FB_Md Axis Hmi Entries in the HMI parameter list under Axis. fb Param Homing FB_Md Homing Hmi Entries in the HMI parameter list under Homing. fb Referencing FB_Referencing Hmi Parameter sets and commands for referencing. FB_Motion Hmi fb Manual Power FB_Manual Function Hmi Interface for a manual function to switch on the motion object. [} 163] fb Specific FB_Motion Specific Hmi Technology-specific functions of the motion object. Methods Name Description Reset() Resets the error state of the class. FB_Ptp Motion Hmi Moves(x) Returns an interface to the x-th Move-Cluster [} 246]. FB_Base Hmi Init(ip Base) Default initialization method to pass the base class. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() 244 Version: 1.4.0 TF85xx
## Page 245

PLC-API - Class overview Exceptions avoidance The list access functions (e.g. Channels(x), Groups(x), etc...) return a pseudo variable if the requested index is invalid. In addition, a message is thrown in the Event Logger. Interfaces Type Description I_Base Standard interface on FB_Base. I_Ptp Motion Hmi Standard interface on FB_Ptp Motion Hmi. I_Recipe Interface for managing structured recipe values. I_Axis Hmi Standard interface on FB_Axis Hmi. I_Motion Hmi Standard interface on FB_Motion Hmi. I_Base Md Hmi Standard interface on FB_Base Md Hmi. I_Base Hmi Standard interface on FB_Base Hmi. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.8.1.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.8.14.1 FB_Axis Move Hmi Combines all Move Clusters. Syntax: FUNCTION_BLOCK FB_Axis Move Hmi EXTENDS FB_Base Hmi Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Axis Move Hmi Moves [} 246] REFERENCE TO Get - Move Cluster ARRAY[2 [} 353]] OF FB_Move Cfg Hmi [} 246] FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. TF85xx Version: 1.4.0 245
## Page 246

PLC-API - Class overview Name Type Access Initial value Description [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Local HMI variables Name Data type Description fb Moves ARRAY[2 [} 353]] OF Move Cluster FB_Move Cfg Hmi [} 246] Methods Name Description Reset() Resets the error state of the class. FB_Base Hmi Init(ip Base) Default initialization method to pass the base class. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Interfaces Type Description I_Base Standard interface on FB_Base. I_Base Hmi Standard interface on FB_Base Hmi. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 6.8.14.1.1 FB_Move Cfg Hmi Summarizes the information of a Move Cluster. 246 Version: 1.4.0 TF85xx
## Page 247

PLC-API - Class overview Syntax: FUNCTION_BLOCK FB_Move Cfg Hmi EXTENDS FB_Base Hmi Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Move Cfg Hmi Cams [} 249] REFERENCE TO Get <Local> Cluster cams. ARRAY[5 [} 353]] OF FB_Cam Cfg Hmi [} 249] Clamping Duration LREAL Get, Set 5.0 [s] Clamping duration. Clamping Point LREAL Get, Set -1.0 Position from which clamping starts. Clamping Velocity LREAL Get, Set 0.0 Pre-controlled velocity at which the clamping is performed. Direction INT Get, Set 0 Intended direction of the cluster: • > 0 – Positive direction • = 0 – Undefined direction < 0 – Negative direction End Function INT Get, Set 0 ID of the Move Cluster start function. In Use BOOL Get, Set FALSE Cluster is used. Manual Velocity LREAL Get, Set 0.0 Manual velocity of the cluster. Segments [} 249] REFERENCE TO Get <Local> Segments of the cluster. ARRAY[6 [} 353]] OF FB_Seg Cfg Hmi [} 249] Start Function INT Get, Set 0 ID of the Move Cluster end function. Clamping Distance1 LREAL Get, Set 0.0 Position from which clamping starts. Alternatively: Clamping Point FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > 1Obsolete Local HMI variables Name Data type Description fb Segments ARRAY[6 [} 353]] OF Segments of the cluster. FB_Seg Cfg Hmi [} 249] TF85xx Version: 1.4.0 247
## Page 248

PLC-API - Class overview Name Data type Description fb Cams ARRAY[5 [} 353]] OF Cluster cams. FB_Cam Cfg Hmi [} 249] Methods Name Description Reset() Resets the error state of the class. FB_Move Cfg Hmi Get Clamping Lookup() Returns the set clamping point as a TF8560-compatible structure (ST_Look Up Clamping). Get Last Seg In Use() Returns the index of the last segment whose In Use property = TRUE. If no segment is in use, the function returns the value 0. Get Last Seg In Use Itf() Returns an interface to the last segment whose In Use property = TRUE. If no segment is in use, the function returns a pseudo variable. FB_Base Hmi Init(ip Base) Default initialization method to pass the base class. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Possible events ID Description Alarm/Message 203 Invalid index in method call Message Interfaces Type Description I_Base Standard interface on FB_Base. I_Move Cfg Hmi Standard interface on FB_Move Cfg Hmi. I_Base Hmi Standard interface on FB_Base Hmi. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Prerequisites Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.10.2.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 248 Version: 1.4.0 TF85xx
## Page 249

PLC-API - Class overview 6.8.14.1.1.1 FB_Cam Cfg Hmi Summarizes the information of a cam. Syntax: FUNCTION_BLOCK FB_Cam Cfg Hmi EXTENDS FB_Base Hmi Properties Name Type Access Initial value Description Cam Active BOOL Get, Set FALSE Cam is active. Hysteresis LREAL Get, Set 0.0 Threshold width. Threshold LREAL Get, Set 0.0 Threshold value Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 6.8.14.1.1.2 FB_Seg Cfg Hmi Summarizes the information of a segment. Syntax: FUNCTION_BLOCK FB_Seg Cfg Hmi EXTENDS FB_Base Hmi Properties Name Type Access Initial value Description Acceleration LREAL Get, Set 0.0 Acceleration of the segment. Decelration LREAL Get, Set 0.0 Deceleration of the segment. Ignore Once BOOL Get, Set FALSE Ignores the segment once (at the next command). In Use BOOL Get, Set FALSE Segment is used. Jerk LREAL Get, Set 0.0 Jerk of the segment. Limiting LREAL Get, Set 0.0 Pressure/torque limitation of the segment. Position LREAL Get, Set 0.0 Target position of the segment. Seg Function INT Get, Set 0 ID of the segment function. Velocity LREAL Get, Set 0.0 Velocity of the segment. Methods Name Description Get Ptp Lookup() Returns the segment as a variable of type ST_Look Up Ptp Point. TF85xx Version: 1.4.0 249
## Page 250

PLC-API - Class overview Interfaces Name Description I_Seg Cfg Hmi Standard interface on FB_Seg Cfg Hmi. Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.42 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.4) 6.9 Operation Data - Production data and statistics 6.9.1 FB_Production Counter Implements a general counter for production-dependent data such as a piece counter or a production time counter. Syntax: FUNCTION_BLOCK FB_Production Counter EXTENDS FB_Base Md Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Production Counter Saving Interval LREAL Get, Set 10.0 [min] Interval for saving the counter value in a machine data file. Since Last Reset I_Production Data Comp Get - Counter value since the last execution of the Reset() onent [} 252] method. Since Producing I_Production Data Comp Get - Counter value since the start of the current counting onent [} 252] process. Since Start I_Production Data Comp Get - Counter value since machine start. onent [} 252] Total I_Production Data Comp Get - Counter value since the beginning of the machine onent [} 252] production time. FB_Base Md Machine Data I_Md Base Container Get - Interface for machine data handling. [} 117] FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. 250 Version: 1.4.0 TF85xx
## Page 251

PLC-API - Class overview Name Type Access Initial value Description [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Methods Name Description Reset() Resets the error state of the class. FB_Production Counter New Part(b CLK) Logs a new part for the part counter. Producing(b Is Producing) Indicates that production is actively running. FB_Base Md [PROTECTED] Add Md Comp() Adds a component of type I_Md Component to the machine data container. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Cycle methods Name Description Cyclic() Cycle method - Call once per PLC cycle (default 10 ms) Machine data Component Description Index range Number of in- stances FB_Md File Info [} 133] File information 0x0000 Fxxx 1 FB_Production Counter Co Counter Total and Since Last Reset 0x0010 8xxx 2 mponent [} 252] Interfaces Type Description I_Base Standard interface on FB_Base. I_Production Counter Standard interface on FB_Production Counter. I_Base Md Standard interface on FB_Base Md. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. TF85xx Version: 1.4.0 251
## Page 252

PLC-API - Class overview Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 6.9.1.1 FB_Production Counter Component Contains the counter data for a defined period. Syntax: FUNCTION_BLOCK FB_Production Data Component EXTENDS FB_Md Base Component Machine data Index (Identifier) Parameter PLC storage location 0x0010 8010 Parts <Local> 0x0010 8011 Parts Per Hout 0x0010 8020 Operation Time 0x0010 8021 Time Per Cycle Properties Name Type Access Initial value Description Connected BOOL Get FALSE Component is connected to its dependencies (except for the MD container). FB_Production Data Component Operation Time LREAL Get, Set 0.0 Production time Parts ULINT Get, Set 0 Number of items Parts Per Hour LREAL Get, Set 0 Parts per hour. Time Per Cycle LREAL Get, Set 0.0 Production cycle time FB_Md Base Component Linked Container I_Md Base Container Get NULL Points to the container to which the component was [} 117] appended. Tc3_Plastic Functions. FB_Md Component Further characteristics <> <> <> Implemented by FB_Md Component Methods Name Description Add Next Component() Adds the subsequent component to the component (list). FB_Production Counter Component Connect() Connects references to the class. FB_Md Base Component [PROTECTED] Used with inheriting classes to initialize the encoding offset after Config Comp Type(e Comp Type) E_Standard Comp Type. 252 Version: 1.4.0 TF85xx
## Page 253

PLC-API - Class overview Name Description [PROTECTED] Used with the inheriting class to initialize the encoding offset. Config Comp Type Ex(…) [PROTECTED] Next String(…) Simplified method for reading a text-based machine data parameter. This method is used within the Md Next Parameter(...) Callback method. [PROTECTED] Set String(…) Simplified method for writing a text-based machine data parameter. This method is used within the Md Set Parameter(...) Callback method. Tc3_Plastic Functions. FB_Md Component Other methods Implemented by FB_Md Component. Event-driven methods (callback methods) Name Description Md Next Parameter(…) Container call for saving the parameters in a file, implemented by FB_Md Component. Md Set Parameter(…) Container call for loading the parameters into the runtime, implemented by FB_Md Component. Interfaces Type Description I_Md Component Standard interface on FB_Md Component I_Production Counter Component Standard interface on FB_Production Counter Component. I_Md Base Component Standard interface on FB_Md Base Component Further interfaces Implemented by FB_Md Component Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 6.9.2 FB_Energy Measurement Implements the measurement of a power measurement terminal over time. This allows the machine's energy consumption to be analyzed. Internal functions: • Calculates the energy used over several time periods. • Saves "energy meter readings" persistently in a machine data file. • Logs the hourly meter readings in a CSV file. Syntax: FUNCTION_BLOCK FB_Energy Measurement EXTENDS FB_Base Md TF85xx Version: 1.4.0 253
## Page 254

PLC-API - Class overview Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Energy Measurement Custom I_Energy Calc Query Get - Energy meter reading since the last execution of the reset [} 256] option. Max Memory LREAL Get, Set 0.05 [MB] Storage limitation for the hourly stored energy meter reading. Per Day I_Energy Calc Query Get - Energy meter reading of the day [} 256] Per Hour I_Energy Calc Query Get - Energy meter reading of the hour [} 256] Per Part I_Energy Calc Query Get - Energy meter reading per part [} 256] Saving Interval LREAL Get, Set 120.0 [s] Interval for saving the energy meter readings in a machine data file. FB_Base Md Machine Data I_Md Base Container Get - Interface for machine data handling. [} 117] FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Methods Name Description Reset() Resets the error state of the class. FB_Energy Measurement Add Input(i New) Adds an I/O element with energy measurement values. Input(x) Returns an interface to the xth I/O element of the energy measurement. New Part(b CLK) Logs a new part to evaluate the energy per part. Producing(b Is Producing) Indicates that production is active. FB_Base Md [PROTECTED] Add Md Comp() Adds a component of type I_Md Component to the machine data container. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. 254 Version: 1.4.0 TF85xx
## Page 255

PLC-API - Class overview Name Description Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Exceptions avoidance The list access functions (e.g. Channels(x), Groups(x), etc...) return a pseudo variable if the requested index is invalid. In addition, a message is thrown in the Event Logger. Cycle methods Name Description Cyclic() Cycle method - Call once per PLC cycle (default 10 ms) Possible events ID Description Alarm/Message 9000 Energy history not available Alarm 9001 Memory limitation failed Alarm Machine data Component Description Index range Number of in- stances FB_Md File Info [} 133] File information 0x0000 Fxxx 1 FB_Energy Calc [} 256] Counter Per Day, Per Hour and Custom 0x0010 9xxx 3 Interfaces Type Description I_Base Standard interface on FB_Base. I_Energy Measurement Standard interfaces on FB_Energy Measurement I_One Task Interface Runtime interface for a PLC task I_Base Md Standard interface on FB_Base Md. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Requirements Development Environment Target platform PLC libraries to include Twin CAT 4026 >= v3.1.4026.16 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.12.0.0) Twin CAT 4024 >= v3.1.4024.66 TF85xx Version: 1.4.0 255
## Page 256

PLC-API - Class overview 6.9.2.1 FB_Energy Calc Contains the energy meter data for a defined period. The current and previous time periods are always saved. Syntax: FUNCTION_BLOCK FB_Energy Calc EXTENDS FB_Md Base Component Machine data Index (Identifier) Parameter PLC storage location 0x0010 9010 Start Time <Local> 0x0010 9011 Energy Idle 0x0010 9012 Energy Production 0x0010 9020 Last Start Time 0x0010 9021 Last Energy Idle 0x0010 9022 Last Energy Production Properties Name Type Access Initial value Description Connected BOOL Get FALSE Component is connected to its dependencies (except for the MD container). FB_Energy Calc Active Power LREAL Get, Set 0.0 Currently active power consumption. Energy Idle LREAL Get 0.0 Energy outside of production. Energ Production LREAL Get 0.0 Energy during production. Last Energy Idle LREAL Get 0.0 Last energy outside of production. Last Energ Production LREAL Get 0.0 Last energy during production. Last Start Time I_Time [} 307] Get - Last start time. Next Day BOOL Get FALSE A new day has begun since the current start time. Next Hour BOOL Get FALSE A new hour has begun since the current start time. Production Active BOOL Get, Set FALSE Production is currently active. Start Time I_Time [} 307] Get - Start time (point) Component Type USINT Get 0 Type of component as identifier. Connected BOOL Get FALSE Component is connected with its access dependencies. FB_Md Base Component Linked Container I_Md Base Container Get NULL Points to the container to which the component was [} 117] appended. Tc3_Plastic Functions. FB_Md Component 256 Version: 1.4.0 TF85xx
## Page 257

PLC-API - Class overview Name Type Access Initial value Description Further characteristics <> <> <> Implemented by FB_Md Component Methods Name Description Add Next Component() Adds the subsequent component to the component (list). FB_Energy Calc Enable(b Execute) Switches the recording on. Init(i Time Ref) Initializes the class with the reference to a system time. Latch(b Cmd) Starts a new measurement start time. FB_Md Base Component [PROTECTED] Used with inheriting classes to initialize the encoding offset after Config Comp Type(e Comp Type) E_Standard Comp Type. [PROTECTED] Used with the inheriting class to initialize the encoding offset. Config Comp Type Ex(…) [PROTECTED] Next String(…) Simplified method for reading a text-based machine data parameter. This method is used within the Md Next Parameter(...) Callback method. [PROTECTED] Set String(…) Simplified method for writing a text-based machine data parameter. This method is used within the Md Set Parameter(...) Callback method. Tc3_Plastic Functions. FB_Md Component Other methods Implemented by FB_Md Component. Cycle methods Name Description Cyclic() Cycle method - Call once per PLC cycle (default 10 ms) Event-driven methods (callback methods) Name Description Md Next Parameter(…) Container call for saving the parameters in a file, implemented by FB_Md Component. Md Set Parameter(…) Container call for loading the parameters into the runtime, implemented by FB_Md Component. Interfaces Type Description I_Md Component Standard interface on FB_Md Component I_Energy Calc Standard interface on FB_Energy Calc. I_Energy Calc Query Reduced query interface to FB_Energy Calc. I_Md Base Component Standard interface on FB_Md Base Component Further interfaces Implemented by FB_Md Component TF85xx Version: 1.4.0 257
## Page 258

PLC-API - Class overview Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.9.2.2 FB_EL3443 Defines the standard scope of a Beckhoff EL3443 power measurement terminal. Syntax: FUNCTION_BLOCK FB_EL3443 EXTENDS FB_Input Base I/O variables Name Type Access Description fb L1 FB_Em Phase Guarded Input Information on phase L1. [} 260] fb L2 FB_Em Phase Guarded Input Information on phase L2. [} 260] fb L3 FB_Em Phase Guarded Input Information on phase L3. [} 260] f Power Factor REAL Input Power factor λ f Power Quality Factor REAL Input Quality of the power supply f Active Power REAL Input Active power P f Frequency REAL Input Frequency f L1L2_Voltage REAL Input Voltage between L1 and L2. f L2L3_Voltage REAL Input Voltage between L2 and L3. f L3L1_Voltage REAL Input Voltage between L3 and L1. Wc State BIT Input Working Counter State Ads Addr AMSADDR Input ADS address of the I/O element for asynchronous communication. Toggle BIT Input Bit switching with the update rate of the mapping. Info Data State UINT Input Numerical information on the state of the Ether CAT slave (see State). Properties Name Type Access Initial value Description Active Power LREAL Get 0.0 Active power P Frequency LREAL Get 0.0 Frequency L1 I_Em Phase [} 259] Get - Information on phase L1. L2 I_Em Phase [} 259] Get - Information on phase L2. L3 I_Em Phase [} 259] Get - Information on phase L3. 258 Version: 1.4.0 TF85xx
## Page 259

PLC-API - Class overview Name Type Access Initial value Description Power Factor LREAL Get 0.0 Power factor λ Power Quality Factor LREAL Get 0.0 Quality of the power supply. Voltage L1L2 LREAL Get 0.0 Voltage between L1 and L2. Voltage L2L3 LREAL Get 0.0 Voltage between L2 and L3. Voltage L3L1 LREAL Get 0.0 Voltage between L3 and L1. Interfaces Type Description I_EL3443 Standard interface on FB_EL3443. I_Input Energy General interface for power measuring elements. Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.9.2.2.1 FB_Em Phase Defines the minimum amount of information for a measured phase. Syntax: FUNCTION_BLOCK FB_Em Phase I/O variables Name Type Access Description f Current REAL Input Current of the phase. f Voltage REAL Input Voltage of the phase. Properties Name Type Access Initial value Description Current LREAL Get 0.0 Current of the phase. Voltage LREAL Get 0.0 Voltage of the phase. Interfaces Type Description I_Em Phase Standard interface on FB_Em Phase. TF85xx Version: 1.4.0 259
## Page 260

PLC-API - Class overview Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.9.2.2.2 FB_Em Phase Guarded Defines the extended scope of information for a measured phase. Syntax: FUNCTION_BLOCK FB_Em Phase Guarded EXTENDS FB_Em Phase I/O variables Name Type Access Description f Current REAL Input Current of the phase. f Voltage REAL Input Voltage of the phase. b Voltage Guard Warning BOOL Input Voltage guard warning b Voltage Guard Error BOOL Input Voltage guard error b Current Guard Warning BOOL Input Current guard warning b Current Guard Error BOOL Input Current guard error Properties Name Type Access Initial value Description Current LREAL Get 0.0 Current of the phase. Voltage LREAL Get 0.0 Voltage of the phase. Voltage Guard Warning BOOL Get FALSE Voltage guard warning Voltage Guard Error BOOL Get FALSE Voltage guard error Current Guard Warning BOOL Get FALSE Current guard warning Current Guard Error BOOL Get FALSE Current guard error Interfaces Type Description I_Em Phase Standard interface on FB_Em Phase. I_Em Phase Guarded Standard interface on FB_Em Phase Guarded. Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 260 Version: 1.4.0 TF85xx
## Page 261

PLC-API - Class overview 6.10 Recipe - recipe management The recipe management of the TF8550 Recipe Helper is based on the implementation of the FB_Plc State To Hmi [} 261] class and the implemented handshake procedure. For this purpose, the class is already instantiated in the GVL Hmi Communication. {attribute 'qualified_only'} VAR_GLOBAL // ============================================== // communication PLC <> HMI fb Plc State To Hmi: FB_Plc State To Hmi; // ============================================== END_VAR 6.10.1 FB_Plc State To Hmi Implements the handshake procedure for the TF8550 recipe management on the PLC side. Syntax: FUNCTION_BLOCK FB_Plc State To Hmi EXTENDS FB_Handshake Hmi Handshake signal properties Name Type Access Initial value Description PLC / HMI1 Reset BOOL Get, Set FALSE Request to reinitialize the HMI communication. FB_Plc State To Hmi Axes Initialised BOOL Get, Set FALSE Axes have been initialized, the PLC recipe may be initialized. Client ID UINT Get, Set 0 Alias to Companion ID. HMI Data Req Failed BOOL Get, Set FALSE Errors in communication. The PLC PLC is waiting for a reset. Data Request Plc BOOL Get, Set FALSE Requesting data during the PLC start-up phase or a product change. Data Request Plc Active H BOOL Get, Set FALSE Writing recipe data to the PLC HMI mi active. Data Request Plc Quit Hm BOOL Get, Set FALSE Writing of recipe data to the HMI i PLC completed. Data Valid Plc BOOL Get, Set FALSE The recipe data has been PLC loaded completely. Plc Initialized BOOL Get, Set FALSE Alias to Axes Initialized. PLC Product Change Confirm BOOL Get, Set FALSE The request to change the PLC Plc product is accepted. Product Change Enable BOOL Get, Set FALSE Signals the possibility to PLC change the recipe to the HMI. Product Request Hmi BOOL Get, Set FALSE Requests of a product change. HMI Save Data Quit Plc BOOL Get, Set FALSE Confirms the processing of a HMI recipe storage. TF85xx Version: 1.4.0 261
## Page 262

PLC-API - Class overview Name Type Access Initial value Description PLC / HMI1 Save Data Request Plc BOOL Get, Set FALSE Request to save the recipe. PLC FB_Handshake Hmi Companion ID UINT Get, Set 0 ID of the currently connected HMI HMI Companion. Live Sign HMI UINT Get, Set 0 Changing value of the HMI HMI client to signal an active connection. 1The PLC/HMI column describes the assignment of the write access. Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Plc State To Hmi Version Base Application STRING Get 'v0.0.0.0' Plastic Base Application version. Version TF8540 STRING Get 'v0.0.0.0' Version of the Temperature Control (TF8540, Plastic Processing Framework) Version TF8550 STRING Get, Set 'v0.0.0.0' Version of the Plastic HMI Packages (TF8550 Plastic HMI Framework) Version TF8560 STRING Get 'v0.0.0.0' Plastic Technology Functions version (TF8560). Version Plastic Functions STRING Get 'v0.0.0.0' Plastic Technology Functions 1 version (TF8560). FB_Handshake Hmi Companion Timeout LREAL Get, Set 5.0 Time after which the Companion is considered disconnected (no longer connected) if there is no sign of life. FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > 1Obsolete Methods Name Description Reset() Resets the error state of the class. FB_Plc State To Hmi Declare Beta()1 Adds a beta label to the display version of the Plastic Base Application. FB_Handshake Hmi Cyclic() Cycle method 262 Version: 1.4.0 TF85xx
## Page 263

PLC-API - Class overview Name Description FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() 1Is obsolete Interfaces Type Description I_Base Standard interface on FB_Base. I_Recipe State Interface for the handshake variables to be processed in the main procedure. I_Version Info Interface to the properties with version information. I_Handshake Hmi Standard interface on FB_Handshake Hmi I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Requirements Development Environment Target platform PLC libraries to include Twin CAT 4026 >= v3.1.4026.16 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.12.0.0) Twin CAT 4024 >= v3.1.4024.66 6.10.2 I_Recipe State Interface to the PLC variables of the TF8550 Beckhoff. Twin CAT. HMI. Plastic. Recipe Helper class FB_Plc State To Hmi Syntax: INTERFACE I_Recipe State EXTENDS I_Base Empty Properties Name Type Access Initial value Description Data Request Plc BOOL Get FALSE Requesting data during the start-up phase or a product change. Data Valid Plc BOOL Get FALSE The recipe data has been loaded completely. Plc Initialized BOOL Get, Set FALSE Data has been initialized, the recipe may be initialized. Product Change Enable BOOL Get, Set FALSE Signals the possibility to change the recipe to the HMI. TF85xx Version: 1.4.0 263
## Page 264

PLC-API - Class overview Name Type Access Initial value Description Reset BOOL Get, Set FALSE Request for reinitialization of the recipe Methods FB_Plc State To Hmi Declare Beta()1 Adds a beta label to the display version of the Plastic Base Application. Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 6.10.3 FB_Recipe Recipe management class for summarizing structured recipe values. These are used in integrated Tc HMI controls. Class is abstract Since the class is defined as ABSTRACT, the class cannot be instantiated and must be implemented using inheritance. Syntax: FUNCTION_BLOCK ABSTRACT FB_Recipe EXTENDS FB_Base Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Recipe Enable Recipe BOOL Get FALSE Enables the handling of this recipe management class. FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Methods Name Description Reset() Resets the error state of the class. FB_Recipe Lock() Locks the recipe variables • The next execution of . Update() writes the recipe values to the PLC. 264 Version: 1.4.0 TF85xx
## Page 265

PLC-API - Class overview Name Description • Can be called/executed from the HMI. Reset() Resets the lock state. Update() [ABSTRACT] Updates the recipe variables to the current PLC value. • Can be called/executed from the HMI. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Interfaces Type Description I_Base Standard interface on FB_Base. I_Recipe Standard interface on FB_Recipe. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.10.4 FB_Temp Recipe Recipe management class of temperature control. Syntax: FUNCTION_BLOCK FB_Temp Recipe EXTENDS FB_Recipe Local HMI variables Name Data type Description Setpoint LREAL Temperature set point Standby LREAL Temperature standby setpoint Threshold M LREAL Negative inner tolerance TF85xx Version: 1.4.0 265
## Page 266

PLC-API - Class overview Name Data type Description Threshold MM LREAL Negative external tolerance Threshold P LREAL Positive inner tolerance Threshold PP LREAL Positive external tolerance Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Recipe Enable Recipe BOOL Get FALSE Enables the handling of this recipe management class. FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Methods Name Description Reset() Resets the error state of the class. FB_Temp Recipe Init(i Channel) Initialization with the interface to a temperature channel. FB_Recipe Lock() Locks the recipe variables • The next execution of . Update() writes the recipe values to the PLC. • Can be called/executed from the HMI. Reset() Resets the lock state. Update() [ABSTRACT] Updates the recipe variables to the current PLC value. • Can be called/executed from the HMI. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() 266 Version: 1.4.0 TF85xx
## Page 267

PLC-API - Class overview Interfaces Type Description I_Base Standard interface on FB_Base. I_Recipe Standard interface on FB_Recipe. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.42 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.6.0) 6.10.5 FB_Move Cluster Recipe Recipe management class of a PTP axes. Syntax: FUNCTION_BLOCK FB_Move Cluster Recipe EXTENDS FB_Recipe Local HMI variables Name Data type Description Start Function INT ID of the start function of the cluster. End Function INT ID of the end function of the cluster. Segments ARRAY[] OF Array of segments of the cluster. FB_Move Seg Recip e [} 268] Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Recipe Enable Recipe BOOL Get FALSE Enables the handling of this recipe management class. FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > TF85xx Version: 1.4.0 267
## Page 268

PLC-API - Class overview Methods Name Description Reset() Resets the error state of the class. FB_Move Cluster Recipe Init(i Cluster) Initialization with the interface on a cluster. FB_Recipe Lock() Locks the recipe variables • The next execution of . Update() writes the recipe values to the PLC. • Can be called/executed from the HMI. Reset() Resets the lock state. Update() [ABSTRACT] Updates the recipe variables to the current PLC value. • Can be called/executed from the HMI. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Interfaces Type Description I_Base Standard interface on FB_Base. I_Recipe Standard interface on FB_Recipe. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.10.5.1 FB_Move Seg Recipe Recipe management class of a PTP segment. Syntax: FUNCTION_BLOCK FB_Move Seg Recipe EXTENDS FB_Recipe 268 Version: 1.4.0 TF85xx
## Page 269

PLC-API - Class overview Local HMI variables Name Data type Description Acceleration LREAL Acceleration of the segment. Deceleration LREAL Deceleration of the segment. In Use BOOL Segment is used. Jerk LREAL Jerk of the segment. Limiting LREAL Limitation (torque/pressure) of the segment. Position LREAL Target position of the segment. Segfunction INT ID of the segment function. Velocity LREAL Velocity of the segment. Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Recipe Enable Recipe BOOL Get FALSE Enables the handling of this recipe management class. FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Methods Name Description Reset() Resets the error state of the class. FB_Move Seg Recipe Init(i Segment) Initialization with the interface to a segment. FB_Recipe Lock() Locks the recipe variables • The next execution of . Update() writes the recipe values to the PLC. • Can be called/executed from the HMI. Reset() Resets the lock state. Update() [ABSTRACT] Updates the recipe variables to the current PLC value. • Can be called/executed from the HMI. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. TF85xx Version: 1.4.0 269
## Page 270

PLC-API - Class overview Name Description [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Interfaces Type Description I_Base Standard interface on FB_Base. I_Recipe Standard interface on FB_Recipe. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.11 Runtime - Handling of initialization and cycle calls Advantage / Benefit The FB_Base Runtime [} 270] class of the Plastic Base Application is used to simplify cycle calls and automated initialization of control objects. This greatly simplifies several steps such as creating, initializing, checking return values, generating error messages, cyclic calls, etc. Requirements For an object to be attached to the runtime, one of the following interfaces must be implemented. Interfaces Name Description I_Runtime Interface General interface for an attachable control object. I_One Task Interface Interface with an executable method. I_Two Task Interface Interface with two executable methods. I_Temp Task Interface Interface with a slow executable method. 6.11.1 FB_Base Runtime The class automates the initialization and cyclic calls of instantiated control objects such as axes, sequence algorithms, temperature controllers, etc. Internal functions: • Initialization (Init(), Param Init() and Md Init()) • Handling the Base State [} 59] 270 Version: 1.4.0 TF85xx
## Page 271

PLC-API - Class overview ◦ Setting e Idle and e Failed • Cycle calls (3-tasks) • Plc Mc Manager support function (when using hydraulic axes) • Software version check Syntax: FUNCTION_BLOCK FB_Base Runtime EXTENDS FB_Base Properties Name Type Access Initial value Description Disable Base State Handli BOOL Get, Set FALSE Locks the handling of the ng object Base State [} 59] by the runtime Disable Md Fill Collections BOOL Get, Set FALSE Locks the filling of attached FB_Md Collection [} 120] instances. Disable Md Init BOOL Get, Set FALSE Locks the automatic loading of the machine data by the runtime. Disable Recipe BOOL Get, Set FALSE Locks the recipe handling of objects that support the interface I_Recipe [} 264]. Md Init Executed BOOL Get FALSE Loading of the machine data was performed for all objects. Num Runtime Objects INT Get 0 Number of appended runtime objects. Methods Name Description Append() [} 272] Appends a control object to the runtime. Clear() Deletes the list of appended control objects. Md Load All() Starts the loading process of all appended control objects with machine data container. Md Save All() Starts the saving process of all appended control objects with machine data container. Set Param Init Timeout(i Object, Changes the timeout of the Param Init() function of an appended f Timeout) control object. Set Plc Mc Man(i Plc Mc Man) Assigns an external FB_Plc Mc Manager Support to which axes can be attached that are not attached to the runtime. Cycle methods Name Description Cycle time (rec- ommended) Core Cyclic() Fast cycle method for control objects with I_Two Task Interface. 2 ms Cyclic() Normal cycle method for control objects with I_One Task Interface or 10 ms I_Two Task Interface. Temperature Cyclic() Slow cycle method for control objects with I_Temp Task Interface. 25 ms The cycle methods must be called with programs (PRG) assigned to different tasks, so that the runtime can assign the appended objects to the individual tasks. TF85xx Version: 1.4.0 271
## Page 272

PLC-API - Class overview Possible events ID Description Alarm/Message 1xx Recipe Message 10xx Initialization Alarm + Message 11xx Parameterization Alarm + Message 12xx Version incompatibility Alarm 20xx Machine data Alarm + Message 8003 File path length Message Interfaces Type Description I_Base Runtime Standard interface on FB_Base Runtime. Requirements Development Environment Target platform PLC libraries to include Twin CAT 4026 >= v3.1.4026.16 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.12.0.0) Twin CAT 4024 >= v3.1.4024.66 6.11.1.1 Append() Appends a control object to the runtime. Syntax: METHOD Append : VOID VAR_INPUT i Obj: I_Runtime Interface; i Obj Hmi: I_Base Hmi; END_VAR Inputs Name Type Description i Obj I_Runtime Interface Object to be attached to the runtime. i Obj Hmi I_Base Hmi Associated HMI object which is to be linked to the object. Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 6.11.2 I_Runtime Interface Represents the general interface for a runtime-compatible control object. Syntax: INTERFACE I_Runtime Interface 272 Version: 1.4.0 TF85xx
## Page 273

PLC-API - Class overview Methods Name Description Init() Method for checking the initialization of an object Param Init() Method for standard parameterization of an object Set HMI(ip Base Hmi) Method for passing a parallel HMI object All methods are checked by the FB_Base Runtime class for the HRESULT return value. Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 6.12 Temperature - TF8540 Temperature Interface 6.12.1 FB_Temperature Main class of temperature control to manage all temperature channels and groups. Internal functions: • Handling of the Tc Pfw temperature control (TF8540) • Management of individual sub-elements such as: ◦ Temperature groups ◦ Supply channels ◦ Scheduler • Integrated data handling of grouping settings at runtime ◦ Saving controller parameter sets per group configuration ◦ Changing and restoring the group configuration Syntax: FUNCTION_BLOCK FB_Temperature EXTENDS FB_Base Md Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Temperature Auto Save Delay LREAL Get, Set 10.0 [s] Delay after which changes to the grouping are automatically saved. Disable Alarms BOOL Get, Set FALSE Suppresses TC3 Event Logger alarms that are triggered by errors in a temperature channel. TF85xx Version: 1.4.0 273
## Page 274

PLC-API - Class overview Name Type Access Initial value Description Disable Messages BOOL Get, Set FALSE Suppresses TC3 Event Logger messages from the TF8540 library. Enable Callback BOOL Get, Set TRUE Enables communication with the I/O components. Enable Config BOOL Get, Set TRUE Enables the configuration of all temperature channels. Enable Looptest BOOL Get, Set FALSE Enables current monitoring of all zones. Lib Scope Vars REFERENCE TO Get - Access to an overview of FB_Scope_Temp Ctrl V TF8540 live data. ariables Timer I_Temp Schedule [} 294] Get NULL Access to the connected scheduler. FB_Base Md Machine Data I_Md Base Container Get - Interface for machine data handling. [} 117] FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Methods Name Description Reset() Resets the error state of the class. FB_Temperature Channels [} 291](x) Returns an interface to the xth temperature channel of TF8540. Create Default Params() [} 276] Creates a default parameterization for all temperature channels. Enable All() [} 277] Enables all temperature channels on the PLC side. Groups [} 282](x) Returns an interface to the xth temperature group. Link Group() [} 277] Assigns a linear arrangement of temperature channels to a group. Link Supply() [} 278] Assigns a group to a supply channel. Link Zone() [} 279] Assigns a temperature channel to a group. Set Scheduler(i Scheduler) Assigns a schedule to the temperature control. Standby All() [} 279] Sets all temperature channels to standby. Supply [} 293](x) Returns an interface to the xth supply unit. Supply Lines [} 294](x) Returns an interface to the xth supply channel. Unlink Group(x) Removes all temperature channels from the xth group. FB_Base Md [PROTECTED] Add Md Comp() Adds a component of type I_Md Component to the machine data container. FB_Base Get HMI() Returns the assigned HMI object. 274 Version: 1.4.0 TF85xx
## Page 275

PLC-API - Class overview Name Description Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Exceptions avoidance The list access functions (e.g. Channels(x), Groups(x), etc...) return a pseudo variable if the requested index is invalid. In addition, a message is thrown in the Event Logger. Cycle methods Name Description Cyclic() Slow cycle method (default 25 ms) Possible events ID Description Alarm/Message 20x Invalid interface queried Message Machine data Component Description Index range Number of in- stances FB_Md File Info [} 133] File information 0x0000 Fxxx 1 FB_Md Temp Supply Parameters of the supply units 0x0000 4Cxx 4 (Default) [} 150] FB_Md Temp Group Grouping configuration 0x0000 4Exx 5 (Default) [} 143] [} 353] Interfaces Type Description I_Base Standard interface on FB_Base. I_Temperature Standard interface on FB_Temperature. I_Temp Task Interface Runtime interface for a slow PLC task. I_Base Md Standard interface on FB_Base Md. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. TF85xx Version: 1.4.0 275
## Page 276

PLC-API - Class overview Prerequisites Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.10.2.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.12.1.1 Create Default Params() Creates a default parameterization for all temperature channels Syntax: METHOD Create Default Params : HRESULT VAR_INPUT b All In Use: BOOL; e Sensor: E_Tc Pfw_Temp Sens Type; e Terminal: E_Tc Pfw_Terminal Type; n Ch Per Term: INT; e Out Heating: E_Tc Pfw_Tctrl Out Select; e Out Cooling: E_Tc Pfw_Tctrl Out Select; f Setpoint: LREAL; f Standby Setp: LREAL; f Pwm Cycle Time: LREAL; END_VAR Inputs Name Type Description Recommended standard b All In Use BOOL All channels are initialized as "In Use". FALSE e Sensor E_Tc Pfw_Temp S Sensor type - No Sensor in simulation mode e Tc Pfw Temp Sens T_No Sensor ens Type e Terminal E_Tc Pfw Terminal Terminal type - No Terminal in simulation e Tc Pfw Term T_No Terminal Type mode n Ch Per Ter INT Number of channels per terminal 8 m e Out Heatin E_Tc Pfw_Tctrl Ou Output type of the heating output - e Tc Pfw Tc Out_PWM g t Select No Signal, to disable the heating function (e.g. for measuring zones) e Out Coolin E_Tc Pfw_Tctrl Ou Cooling output type e Tc Pfw Tc Out_No Signal g t Select f Setpoint LREAL Temperature setpoint for all channels 180.0 f Standby Set LREAL Temperature setpoint for standby 18.0 p temperature of all channels f Pwm Cycle LREAL PWM cycle time for all outputs (duty Cycle = 1.0 Time f Pwm Cycle Time * 0.1) 276 Version: 1.4.0 TF85xx
## Page 277

PLC-API - Class overview Outputs Name Type Description Create Default Params HRESULT Return value with feedback on the success of the execution Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.42 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.6.0) 6.12.1.2 Enable All() Enables all temperature channels on the PLC side. Syntax: METHOD Enable All VAR_INPUT b Cmd: BOOL; b Groups: BOOL; END_VAR Inputs Name Type Description b Cmd BOOL TRUE to grant the release, FALSE to withdraw the release. b Groups BOOL The enable only takes into account channels that are assigned to a group. Outputs Name Type Description Enable All HRESULT Return value with feedback on the success of the execution Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.42 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.6.0) 6.12.1.3 Link Group() Assigns a number of temperature channels to a group. TF85xx Version: 1.4.0 277
## Page 278

PLC-API - Class overview Syntax: METHOD Link Group : HRESULT VAR_INPUT n Start Idx: INT; n End Idx: INT; n Group Idx: INT; b Overwrite: BOOL; END_VAR Inputs Name Type Description n Start Idx INT Index of the first channel to be assigned n End Idx INT Index of the last channel to be assigned n Group Idx INT Index of the group to which the channels are to be assigned b Overwrite1 BOOL Zones are assigned even if the group contains already assigned zones. 1 Obsolete and will be ignored Outputs Name Type Description Link Group HRESULT Return value with feedback on the success of the execution Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.42 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.6.0) 6.12.1.4 Link Supply() Assigns a supply unit to a group. Syntax: METHOD Link Supply : HRESULT VAR_INPUT n Group Idx: INT; n Supply Idx: INT; n Line: INT; END_VAR Inputs Name Type Description n Group Idx INT Index of the group to which a supply unit is to be assigned n Supply Idx INT Index of the supply unit to be assigned to the group n Line INT Supply channel to which the group members are connected • 1; 2; 3 - phase L1, L2 or L3 • 4 – Between phases without connection to N 278 Version: 1.4.0 TF85xx
## Page 279

PLC-API - Class overview Outputs Name Type Description Link Supply HRESULT Return value with feedback on the success of the execution Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.42 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.6.0) 6.12.1.5 Link Zone() Assigns a single temperature channel (zone) to a group. Syntax: METHOD Link Zone : HRESULT VAR_INPUT n Linear Idx: INT; n Group Idx: INT; n Group Member Idx: INT; b Overwrite: BOOL; END_VAR Inputs Name Type Description n Linear Idx INT Index of the channel to be assigned n Group Idx INT Index of the group to which the channel is to be assigned n Group Member Idx1 INT Index in the target group b Overwrite BOOL Zone is assigned even if the index is already occupied in the target group. 1 Obsolete, will be ignored Outputs Name Type Description Link Zone HRESULT Return value with feedback on the success of the execution Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.42 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.6.0) 6.12.1.6 Standby All() TF85xx Version: 1.4.0 279
## Page 280

PLC-API - Class overview Sets all temperature channels to standby temperature. Syntax: METHOD Standby All : HRESULT VAR_INPUT b Cmd: BOOL; b Groups: BOOL; END_VAR Inputs Name Type Description b Cmd BOOL TRUE to enable the standby temperature, FALSE to disable. b Groups BOOL The function only considers channels that are assigned to a group. Outputs Name Type Description Standby All HRESULT Return value with feedback on the success of the execution Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.42 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.6.0) 6.12.2 FB_Temperature Hmi HMI parallel class to the FB_Temperature. Syntax: FUNCTION_BLOCK FB_Temperature Hmi EXTENDS FB_Base Md Hmi Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Temperature Hmi Alarm Absolute High BOOL Get FALSE A channel (In Use = TRUE) has exceeded the absolute temperature maximum. Alarm Absolute Low BOOL Get FALSE One channel (In Use = TRUE) has fallen below the absolute temperature minimum. Alarm High High BOOL Get FALSE At least one channel with active control has exceeded the High High tolerance. 280 Version: 1.4.0 TF85xx
## Page 281

PLC-API - Class overview Name Type Access Initial value Description Alarm High BOOL Get FALSE At least one channel with active control has exceeded the High tolerance. Alarm Low BOOL Get FALSE At least one channel with active control has fallen below the Low tolerance. Alarm Low Low BOOL Get FALSE At least one channel with active control has fallen below the Low Low tolerance. Count Pfw Channels LREAL Get 20.0 Number of available TF8540 temperature channels. Enable Recipe BOOL Get, Set TRUE Enables recipe handling via I_Recipe [} 265]. Temp Ambient LREAL Get, Set 18.0 Standard ambient temperature (for simulation). FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Local HMI variables Name Data type Description fb Param Handle FB_Md Handle Hmi Handling interface for loading and saving machine data. a Channels ARRAY [] OF Array to the temperature channels. FB_Temp Channel Hmi [} 292] a Groups ARRAY [] OF Array to the groups. FB_Temperature Group H mi [} 287] a Recipe ARRAY [] OF Array of the recipe values of all temperature channels. FB_Temp Recipe [} 265] fb Param Temp Channel ARRAY [] OF Array to the machine data of a temperature channel. FB_Md Temp Channel Hmi Only intended for use with the Fill Param Table function. fb Param Temp Supply ARRAY [] OF Array to the machine data of a temperature supply FB_Md Temp Supply Hmi channel. Only intended for use with the Fill Param Table function. Methods Name Description Reset() Resets the error state of the class. FB_Temperature Hmi Groups(x) Returns an interface to the xth temperature group (HMI class). FB_Base Hmi TF85xx Version: 1.4.0 281
## Page 282

PLC-API - Class overview Name Description Init(ip Base) Default initialization method to pass the base class. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Exceptions avoidance The list access functions (e.g. Channels(x), Groups(x), etc...) return a pseudo variable if the requested index is invalid. In addition, a message is thrown in the Event Logger. Interfaces Type Description I_Base Standard interface on FB_Base. I_Temperature Hmi Standard interface on FB_Temperature Hmi. I_Recipe Interface for managing structured recipe values. I_Base Md Hmi Standard interface on FB_Base Md Hmi. I_Base Hmi Standard interface on FB_Base Hmi. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.12.3 FB_Temperature Group Class for group control of the temperature channels. The internal processing of the configuration can be traced using the state machine in Group States() [} 285]. Syntax: FUNCTION_BLOCK FB_Temperature Group EXTENDS FB_Base Md 282 Version: 1.4.0 TF85xx
## Page 283

PLC-API - Class overview Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Temperature Group Alarm Absolute High BOOL Get FALSE Group (at least one channel) has exceeded the absolute maximum temperature. Alarm Absolute Low BOOL Get FALSE Group (at least one channel) has fallen below the absolute temperature minimum. Alarm High High BOOL Get FALSE Group (at least one channel) has exceeded the High High tolerance. Alarms to the tolerance values are only active if the zones are actively controlled. Alarm High BOOL Get FALSE Group (at least one channel) has exceeded the High tolerance. Alarms to the tolerance values are only active if the zones are actively controlled. Alarm Low BOOL Get FALSE Group (at least one channel) has fallen below the Low tolerance. Alarms to the tolerance values are only active if the zones are actively controlled. Alarm Low Low BOOL Get FALSE Group (at least one channel) has fallen below the Low Low tolerance. Alarms to the tolerance values are only active if the zones are actively controlled. Alarm No Response BOOL Get FALSE Temperature value of the group (at least one channel) does not respond to the control. Attachable Md Interface I_Md Component Get - Interface to the machine data component. Config Hash T_SHA256 [} 300] Get 0x0 Hash value of the current group configuration. Config ID UINT Get 0 ID of the group configuration (incremental). Enable Config Confirmati BOOL Get FALSE Confirmation is required to on load a new configuration. Enable Limit Alarms BOOL Get, Set FALSE Exceeding a tolerance value/ limit triggers a TC3 Event Logger alarm. Fault BOOL Get FALSE Group (at least one channel) has an error. Index INT Get 0 Index (ID) of the group. Is Active BOOL Get FALSE Group (at least one channel) is actively controlled. TF85xx Version: 1.4.0 283
## Page 284

PLC-API - Class overview Name Type Access Initial value Description Is Enabled BOOL Get FALSE All channels of the group are enabled. Is Standby BOOL Get FALSE All channels of the group are in standby mode. Load Hash T_SHA256 [} 300] Get 0x0 Hash value of the last configuration loaded from a file. Zones Count INT Get 0 Number of zones in the group. FB_Base Md Machine Data I_Md Base Container Get - Interface for machine data handling. [} 117] FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Methods Name Description Reset() Resets the error state of the class. FB_Temperature Group Enable PLC(b Cmd) Enables all zones of the group on the PLC side. Force(b Heating, b Cooling) Forces all zones of the group to heating/cooling 100%. Update Group() Updates the internal listing of the assigned groups. Zones [} 290](x) Returns an interface to the xth zone of the group. FB_Base Md [PROTECTED] Add Md Comp() Adds a component of type I_Md Component to the machine data container. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Exceptions avoidance The list access functions (e.g. Channels(x), Groups(x), etc...) return a pseudo variable if the requested index is invalid. In addition, a message is thrown in the Event Logger. 284 Version: 1.4.0 TF85xx
## Page 285

PLC-API - Class overview Procedure controlling methods (FB_Adaptable Sequence [} 317]) Type Description Group States() [} 285] Procedure for loading, executing and saving tuning. Possible events ID Description Alarm/Message 20x Invalid interface queried Message 401x Temperature operation monitoring Alarm 402x Tuning parameters loading process Alarm + Message 403x Tuning parameters saving process Alarm + Message 404x File operation not available Alarm Machine data Component Description Index range Number of in- stances FB_Md File Info [} 133] File information 0x0000 Fxxx 1 FB_Md Temp Group Configuration data of the entire group 0x0000 4Exx 1 [} 143] FB_Md Temp Grouping Parameters of the configured zones of a 0x0000 4xxx Up to 20 [} 145] group (Default) Interfaces Type Description I_Base Standard interface on FB_Base. I_Temperature Group Standard interface on FB_Temperature Group. I_Attachable Md Interface Interface for containerless machine data components. I_Base Md Standard interface on FB_Base Md. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Prerequisites Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.10.2.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.12.3.1 Group States() Instance type Instance name Master fb Group States Slaves a Base Seq Members[E_Group States.e Length] TF85xx Version: 1.4.0 285
## Page 286

PLC-API - Class overview State diagram: Process description: 1. A group always remains in the Idle state until a grouping command is issued. ◦ It does not matter whether this is requested by the machine data, the PLC program or the HMI. 2. As soon as a grouping command is received, the group in the Config Md state starts to configure the internal FB_Md Temp Grouping [} 145] instances according to the grouping. 3. The Config Xy and Read Tuning Xy states are then loaded file by file from the target system and compared with the set grouping. ◦ Special case program start: [} 287] The last grouping used is loaded here when the program is started. 4. Once the grouping has been found on the target system, the system begins to load the stored parameters of this group configuration into the runtime memory. ◦ If the option Enable Config Confirmation is activated, the group waits with this process until a response is triggered by FB_Temperature Hmi [} 280]. Groups [} 287](x). Config Confirm or . Config Reject. 5. If no grouping data is found on the target system, the grouping set at the beginning is created and saved as a new configuration with a new Config ID. 6. If automatic tuning is activated by FB_Temperature Hmi [} 280]. Groups [} 287](x). Do Tune, the group is in tuning mode (within the Tuning Xy states). If a regrouping is requested in this state, the tuning process is aborted. ◦ After a successful tuning process, the determined controller parameters are automatically saved ◦ Selective Tuning: If individual zones of a group are switched on for the tuning start command, tuning is only carried out selectively. This means that zones can also be optimized later and individually. 286 Version: 1.4.0 TF85xx
## Page 287

PLC-API - Class overview Special case: Grouping by machine data Loading the machine data for the first time after starting the program is a special case: In the higher-level machine data of the FB_Temperature [} 273], the Config Hash is stored, which identifies the last grouping set on the target system. If the grouping is triggered by this recovery, the read process is repeated until the requested hash value is found in a file. If no file with the searched hash value is found, the previously set grouping is retained. Default parameterization All default parameters should be set in the Param Init(). At this point, default parameters are parameters that should be used on the target system the first time the software is started. • If the default parameters are to be applied from outside, i.e. without inheriting the FB_Temperature [} 273] class, the FB_Temperature [} 273]. Machine Data [} 117]. Store Count can be queried at <> 0. This ensures that the class has not yet started to load the machine data. • The Data handling [} 33], based on the Plastic Base Application concept, ensures that the default parameters are overwritten by the machine data of the target system. Prerequisites Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.10.2.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.12.4 FB_Temperature Group Hmi HMI parallel class to the FB_Temperature Group class. Syntax: FUNCTION_BLOCK FB_Temperature Group Hmi EXTENDS FB_Base Md Hmi Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Temperature Group Hmi Alarm Absolute High BOOL Get FALSE Group (at least one channel) has exceeded the absolute maximum temperature. Alarm Absolute Low BOOL Get FALSE Group (at least one channel) has fallen below the absolute temperature minimum. Alarm High High BOOL Get FALSE Group (at least one channel) has exceeded the High High tolerance. Alarms to the tolerance values are only active if the zones are actively controlled. TF85xx Version: 1.4.0 287
## Page 288

PLC-API - Class overview Name Type Access Initial value Description Alarm High BOOL Get FALSE Group (at least one channel) has exceeded the High tolerance. Alarms to the tolerance values are only active if the zones are actively controlled. Alarm Low BOOL Get FALSE Group (at least one channel) has fallen below the Low tolerance. Alarms to the tolerance values are only active if the zones are actively controlled. Alarm Low Low BOOL Get FALSE Group (at least one channel) has fallen below the Low Low tolerance. Alarms to the tolerance values are only active if the zones are actively controlled. Alarm State T_Plastic Status [} 342] Get 0 Alarm Status for display with a Tc HMI State Indicator. Boot As Scheduled BOOL Get, Set FALSE The temperature group is to start in the scheduled operation mode. Config Confirm BOOL Get, Set FALSE Confirm the configuration found. Config Confirm Required BOOL Get, Set FALSE A configuration found requires confirmation. Config Hash T_SHA256 [} 300] Get 0x0 Hash value of the loaded group configuration. Config Note STRING(127) Get, Set ‘‘ Note on the loaded group configuration. Config Query I_Temp Config Query Hm Get <Local> Iterative query of the group configurations stored on the i [} 298] target system. Config Reject BOOL Get, Set FALSE Reject the configuration found. Do Tune BOOL Get, Set FALSE Starts tuning of all active zones of the group. Group Name STRING Get, Set <Source Path> Alias of the . Name property. Index INT Get 0 Index (ID) of the group. Is Off BOOL Get FALSE Group is switched off. Is On BOOL Get FALSE Group is switched on. Is Scheduled BOOL Get FALSE Group is in scheduled operation mode. Is Standby BOOL Get FALSE Group is in standby mode. Name STRING Get, Set <Source Path> Temperature group name. Set Off BOOL Get, Set FALSE Switch off group. Set On BOOL Get, Set FALSE Switch on group. Set Scheduled BOOL Get, Set FALSE Set group to scheduled mode. Set Standby BOOL Get, Set FALSE Set group to standby mode. Tuning Active BOOL Get FALSE The tuning of the group is active. Tuning Done BOOL Get FALSE The tuning of the group is completed. 288 Version: 1.4.0 TF85xx
## Page 289

PLC-API - Class overview Name Type Access Initial value Description Tuning Failed BOOL Get FALSE The tuning of the group has failed. Zones Count INT Get 0 Number of zones in the group. FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Local HMI variables Name Data type Description fb Config Query FB_Temp Config Query Hmi Iterative query of the group configurations stored on the target system. [} 298] Methods Name Description Reset() Resets the error state of the class. FB_Temperature Group Hmi [INTERN] Queries whether a property to be saved persistently has been set (. Set). _Collect Remaining Save() [INTERN] Update State() Sets the active operation mode. FB_Base Hmi Init(ip Base) Default initialization method to pass the base class. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Interfaces Type Description I_Base Standard interface on FB_Base. I_Temperature Group Hmi Standard interface on FB_Temperature Group Hmi. I_Base Md Hmi Standard interface on FB_Base Md Hmi. I_Base Hmi Standard interface on FB_Base Hmi. I_Base Empty For extension without standard interface. TF85xx Version: 1.4.0 289
## Page 290

PLC-API - Class overview Type Description I_Base Dev Covers all methods and properties of the base class. Prerequisites Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.10.2.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.12.5 FB_Temp Channel Base Base class for a single temperature channel. Syntax: FUNCTION_BLOCK FB_Temp Channel Base EXTENDS FB_Base Hmi Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Temp Channel Base Index INT Get, Set 0 References a Plastic Base Application channel to a TF8540 zone. FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Class contains significantly more properties than listed The properties of the FB_Temp Channel Base class overlap with the TF8540 Global Variables aaa Pfw Temp To Hmi, aaa Pfw Temp Mparam From Hmi, aaa Pfw Temp Pparam From Hmi and st Pfw Temp Ctrl. For more information on overlapping features, it is recommended to use the TF8540 documentation. Interfaces Type Description I_Base Standard interface on FB_Base. I_Temp Zone Hmi Interface compatible with FB_Temp Zone HMI. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. 290 Version: 1.4.0 TF85xx
## Page 291

PLC-API - Class overview Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.42 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.6.0) 6.12.6 FB_Temp Channel Class for single control of a temperature channel. Syntax: FUNCTION_BLOCK FB_Temp Channel EXTENDS FB_Temp Channel Base Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Temp Channel Alarm No Response BOOL Get FALSE Temperature value of the channel does not respond to the control. Attachable Md Interface I_Md Component Get - Interface to the machine data component Config ID UINT Get, Set 0 ID of the active group configuration Enable Limit Alarms BOOL Get, Set FALSE Exceeding a tolerance value/ limit triggers a TC3 Event Logger alarm. Error BOOL Get FALSE Alias to 'Fault' Extruder ID INT Get, Set 0 ID of the extruder used Fault BOOL Get FALSE An error has occurred in this temperature channel Group ID INT Get, Set 0 ID of the assigned group Is Active BOOL Get FALSE Channel is actively controlled Is Enabled BOOL Get FALSE Channel is enabled Is Linked BOOL Get FALSE Channel is assigned to a group Is Standby BOOL Get FALSE Channel is in standby mode Supply ID INT Get 0 ID of the supply channel used Tuning Last Execution DATE_AND_TIME Get, Set DT#1900-01-0 Date of the last successful 1T00:00:00Z execution of a tuning Tuning Required BOOL Get, Set TRUE The current configuration requires autotuning FB_Temp Channel Base Index INT Get, Set 0 References a Plastic Base Application channel to a TF8540 zone. FB_Base TF85xx Version: 1.4.0 291
## Page 292

PLC-API - Class overview Name Type Access Initial value Description Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Methods Type Description Enable PLC() Enables the temperature channel on the PLC side Force() Forces the temperature channel to heating/cooling 100%. Standby() Sets the temperature channel to standby Possible events ID Description Alarm/Message 400x Temperature operation monitoring Alarm 4006 Selective tuning (included or excluded) Alarm 4007 4008 HMI enable without PLC enable Message 4042 Grouping without In Use = TRUE Alarm Interfaces Type Description I_Base Standard interface on FB_Base. I_Temp Channel Standard interface on FB_Temp Channel I_Attachable Md Interface Interface for containerless machine data components I_Temp Zone Compatible interface with FB_Temp Zone I_Temp Zone Hmi Interface compatible with FB_Temp Zone HMI. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Requirements Development Environment Target platform PLC libraries to include Twin CAT 4026 >= v3.1.4026.16 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.12.0.0) Twin CAT 4024 >= v3.1.4024.66 6.12.7 FB_Temp Channel Hmi HMI parallel class to the FB_Temp Channel class Syntax: FUNCTION_BLOCK FB_Temp Channel Hmi EXTENDS FB_Temp Channel Base 292 Version: 1.4.0 TF85xx
## Page 293

PLC-API - Class overview Properties Name Type Access Initial value Description Group ID INT Get, Set 0 ID of the assigned group Interfaces Type Description I_Temp Channel Hmi Standard interface on FB_Temp Channel Hmi Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.42 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.6.0) 6.12.8 FB_Temp Supply Implements a supply unit of temperature control. Syntax: FUNCTION_BLOCK FB_Temp Supply EXTENDS FB_Base Hmi Properties Name Type Access Initial value Description Index INT Get, Set 0 Supply unit index Methods Type Description Line(x) Returns the xth supply channel of the supply group. Exceptions avoidance The list access functions (e.g. Channels(x), Groups(x), etc...) return a pseudo variable if the requested index is invalid. In addition, a message is thrown in the Event Logger. Interfaces Type Description I_Temp Supply Standard interface on FB_Temp Supply. Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.42 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.6.0) TF85xx Version: 1.4.0 293
## Page 294

PLC-API - Class overview 6.12.9 FB_Temp Supply Line Implements a supply unit of temperature control. Syntax: FUNCTION_BLOCK FB_Temp Supply Line EXTENDS FB_Base Hmi Properties Name Type Access Initial value Description Act Supply Current LREAL Get 0.0 Actual current of the channel Act Supply Load LREAL Get 0.0 Actual output of the channel Attachable Md Interface I_Md Component Get - Interface to the machine data component Calc Error Current LREAL Get 0.0 Calculated error current of the channel Calc Supply Load LREAL Get 0.0 Calculated output of the channel Calc Supply Match LREAL Get 0.0 Deviation of the calculated and actual output of the channel. Frequency LREAL Get 0.0 Channel frequency Pwm Cycle Time LREAL Get, Set 0.0 Cycle time of the PWM signal Pwm Factor C INT Get, Set 0 Factor PWM cycle time from cooling to heating. Pwm Max On Time LREAL Get, Set 0.1 Maximum PWM switch-on time Pwm Max On Time C LREAL Get, Set 0.1 Maximum PWM switch-on time of the cooling system Pwm Max Ramp Load LREAL Get, Set 0.0 Reserved Pwm Min On Time LREAL Get, Set 0.0 Minimum PWM switch-on time Supply ID INT Get, Set 0 ID of the channel Interfaces Type Description I_Temp Supply Line Standard interface on FB_Temp Supply Line. I_Attachable Md Interface Interface for containerless machine data components. Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.42 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.6.0) 6.12.10 FB_Temp Schedule 294 Version: 1.4.0 TF85xx
## Page 295

PLC-API - Class overview Class for the use of weekday timers in connection with temperature control. Syntax: FUNCTION_BLOCK FB_Temp Schedule EXTENDS FB_Timer Weekday Master Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Timer Weekday Master Elapsed LREAL Get 0.0 Current time value in seconds Latched LREAL Get 0.0 Stored time value of the last execution in seconds Preset LREAL Get, Set 0.0 Preset time value in seconds Et TIME Get T#0ms Current time value in milliseconds In BOOL Get, Set FALSE Activation input L TIME Get T#0ms Stored time value of the last execution in milliseconds Pt TIME Get, Set T#0ms Preset time value in milliseconds Q BOOL Get FALSE Timer output FB_Base Md Machine Data I_Md Base Container Get - Interface for machine data handling. [} 117] FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Methods Name Description Reset() Resets the error state of the class. FB_Temp Schedule Member Schedule(x) Returns an interface to the first timer assigned to the group (member) x. Member Scheduled Active(x) Returns an interface to the first timer assigned to the group (member) x and currently active. FB_Base Md [PROTECTED] Add Md Comp() Adds a component of type I_Md Component to the machine data container. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. TF85xx Version: 1.4.0 295
## Page 296

PLC-API - Class overview Name Description Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Exceptions avoidance The list access functions (e.g. Channels(x), Groups(x), etc...) return a pseudo variable if the requested index is invalid. In addition, a message is thrown in the Event Logger. Machine data Component Description Index range Number of in- stances FB_Md File Info [} 133] File information 0x0000 Fxxx 1 FB_Md Temp Timer Temperature attributes of a timer 0x0000 4Dxx 30 (Default) [} 151] [} 353] FB_Md Weekday Timing Period of a weekly timer 0x0000 71xx 30 (Default) [} 158] [} 353] Interfaces Type Description I_Base Standard interface on FB_Base. I_Temp Schedule Standard interface on FB_Temp Schedule I_Timer Weekday Standard interface on FB_Timer Weekday Master I_One Task Interface Runtime interface for a PLC task I_Base Md Standard interface on FB_Base Md. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.42 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.6.0) 6.12.11 FB_Temp Schedule Hmi HMI parallel class to FB_Temp Schedule class. Syntax: FUNCTION_BLOCK FB_Temp Schedule Hmi EXTENDS FB_Base Md Hmi 296 Version: 1.4.0 TF85xx
## Page 297

PLC-API - Class overview Properties Name Type Access Initial value Description Timer 1 REFERENCE TO Get - Interface to the individual ARRAY[] OF dates of the schedule FB_Timer Weekday Hmi 1 Obsolete Methods Type Description Timers(x) Returns an interface to the xth timer Exceptions avoidance The list access functions (e.g. Channels(x), Groups(x), etc...) return a pseudo variable if the requested index is invalid. In addition, a message is thrown in the Event Logger. Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.42 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.6.0) 6.12.12 FB_Timer Temp Hmi Extension of FB_Timer Weekday Hmi with additional temperature-relevant attributes. Syntax: FUNCTION_BLOCK FB_Timer Temp Hmi EXTENDS FB_Timer Weekday Hmi Properties Name Type Access Initial value Description Attachable Md Interface I_Md Component Get - Interface to the machine data component Members Count INT Get 0 Number of assigned members (groups) Standby BOOL Get, Set FALSE Timer is to be evaluated as standby operation Methods Type Description Clear() Empties the list of members (groups) Exists(x) Checks whether member (group) x is assigned to the timer Members() [} 298] Returns an interface to the member Subscribe(x) Makes group x become a member of the timer TF85xx Version: 1.4.0 297
## Page 298

PLC-API - Class overview Interfaces Type Description I_Timer Temp Hmi Standard interface on FB_Timer Temp Hmi Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.42 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.6.0) 6.12.12.1 Members() Returns an interface to the idx member (group) Syntax: METHOD Members : I_Temperature Group VAR_INPUT idx: INT; i Temp: I_Temperature; END_VAR Inputs Name Type Description Idx INT Index of the member in the list all members i Temp I_Temperature Reference of the temperature control to determine the temperature group instance Outputs Name Type Description Members I_Temperature Group Requested temperature group Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.42 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.6.0) 6.12.13 FB_Temp Config Query Hmi This class (FB) is used to iteratively query the temperature configurations of a temperature group. Syntax: FUNCTION_BLOCK FB_Temp Config Query Hmi EXTENDS FB_List Query Hmi 298 Version: 1.4.0 TF85xx
## Page 299

PLC-API - Class overview Properties Name Type Access Initial value Description Invoke BOOL Get, Set FALSE Triggering the data request via the HMI FB_Temp Config Query Hmi Active BOOL Get, (Set) FALSE The configuration data set is currently being used by the group. Group Name STRING(128) Get, (Set) ‘Group Name of the group in the {Index}‘ configuration data set. Note STRING(128) Get, (Set) ‘‘ User-specific note to describe the configuration data set. Zones INT Get, (Set) 0 Number of zones that are grouped in the configuration data set. FB_List Query Hmi Current DINT Get 0 Counter of the current entry that was transmitted. Is incremented implicitly when Next() is called. Done BOOL Get, (Set) FALSE The PLC has transferred the last entry, the query process is complete. Results DINT Get, (Set) 0 Counter of the total number of results that have been loaded. Must run ahead of the Current counter. Select DINT Get, Set 0 Selection of a value read in the previous pass. The previous Current counter can be requested here for identification purposes, for example. A 0 is to be treated as no selection. Valid BOOL Get, (Set) FALSE The current data entry is fully loaded and ready for further processing by the HMI. Methods Type Description Next() Gives the signal to process another data entry. The method resets the Valid flag and increments the Current counter. FB_List Query Hmi Reset() Resets all values (except for Invoke) to the initial value. Interfaces Type Description I_List Query Hmi Standard interface on FB_List Query Hmi. I_Temp Config Query Hmi Standard interface on FB_Temp Config Query Hmi. TF85xx Version: 1.4.0 299
## Page 300

PLC-API - Class overview Prerequisites Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.10.2.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.12.14 T_SHA256 Data type that can store a hash value of type SHA-256 (256 bits). Syntax: TYPE T_SHA256 : ARRAY[0..3] OF LWORD; END_TYPE Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.42 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.6.0) 6.13 Time - Time-related functions 6.13.1 FB_Timer Hmi HMI interface for IEC 61131-3 timer for setting process timings with a TF8550 Timer Control. Syntax: FUNCTION_BLOCK FB_Timer Hmi EXTENDS FB_Base Hmi Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Timer Hmi Actual Value LREAL Get, Set 0.0 Current time value in seconds Latched Value LREAL Get, Set 0.0 Stored time value of the last execution in seconds Out BOOL Get, Set FALSE Timer output (depending on TON, TOF, TP) Set Value LREAL Get, Set 0.0 Preset time setpoint in seconds FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. 300 Version: 1.4.0 TF85xx
## Page 301

PLC-API - Class overview Name Type Access Initial value Description [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Methods Name Description Reset() Resets the error state of the class. FB_Base Hmi Init(ip Base) Default initialization method to pass the base class. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Interfaces I_Timer Hmi Standard interface on FB_Timer Hmi I_Base Hmi Standard interface on FB_Base Hmi. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 6.13.2 FB_Timer Ton Implements IEC 61131-3 timer function with integrated interface for PLC and HMI. Syntax: FUNCTION_BLOCK FB_Timer Ton EXTENDS FB_Base Properties Name Type Access Initial value Description Elapsed LREAL Get 0.0 Current time value in seconds TF85xx Version: 1.4.0 301
## Page 302

PLC-API - Class overview Name Type Access Initial value Description Latched LREAL Get 0.0 Stored time value of the last execution in seconds Preset LREAL Get, Set 0.0 Preset time value in seconds Et TIME Get T#0ms Current time value in milliseconds In BOOL Get, Set FALSE Activation input L TIME Get T#0ms Stored time value of the last execution in milliseconds Pt TIME Get, Set T#0ms Preset time value in milliseconds Q BOOL Get FALSE Timer output Interfaces Type Description I_Timer General interface for IEC 61131-3 timer Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 6.13.3 FB_Timer Tof Implements IEC 61131-3 timer function with integrated interface for PLC and HMI. Syntax: FUNCTION_BLOCK FB_Timer Tof EXTENDS FB_Base Properties Name Type Access Initial value Description Elapsed LREAL Get 0.0 Current time value in seconds Latched LREAL Get 0.0 Stored time value of the last execution in seconds Preset LREAL Get, Set 0.0 Preset time value in seconds Et TIME Get T#0ms Current time value in milliseconds In BOOL Get, Set FALSE Activation input L TIME Get T#0ms Stored time value of the last execution in milliseconds Pt TIME Get, Set T#0ms Preset time value in milliseconds Q BOOL Get FALSE Timer output 302 Version: 1.4.0 TF85xx
## Page 303

PLC-API - Class overview Interfaces Type Description I_Timer General interface for IEC 61131-3 timer Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 6.13.4 FB_Timer Tp Implements IEC 61131-3 timer function with integrated interface for PLC and HMI. Syntax: FUNCTION_BLOCK FB_Timer Tp EXTENDS FB_Base Properties Name Type Access Initial value Description Elapsed LREAL Get 0.0 Current time value in seconds Latched LREAL Get 0.0 Stored time value of the last execution in seconds Preset LREAL Get, Set 0.0 Preset time value in seconds Et TIME Get T#0ms Current time value in milliseconds In BOOL Get, Set FALSE Activation input L TIME Get T#0ms Stored time value of the last execution in milliseconds Pt TIME Get, Set T#0ms Preset time value in milliseconds Q BOOL Get FALSE Timer output Interfaces Type Description I_Timer General interface for IEC 61131-3 timer Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) TF85xx Version: 1.4.0 303
## Page 304

PLC-API - Class overview 6.13.5 FB_Timer Weekday Hmi HMI interface for a weekday timer for use with the TF8550 Control Process Scheduler. Syntax: FUNCTION_BLOCK FB_Timer Weekday Hmi EXTENDS FB_Timer Hmi Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Weekday Timer Hmi Attachable Md Interface I_Md Component Get - Interface to the machine data component. End Weekday E_Weekday [} 305] Get, Set e None Weekday of the end time. Duration LREAL Get 0.0 Time difference between start and end time. End Time LREAL Get, Set 0.0 End time in seconds. Start Time LREAL Get, Set 0.0 Start time in seconds. Weekday E_Weekday [} 305] Get, Set e None Weekday of the start time. FB_Timer Hmi Actual Value LREAL Get, Set 0.0 Current time value in seconds Latched Value LREAL Get, Set 0.0 Stored time value of the last execution in seconds Out BOOL Get, Set FALSE Timer output (depending on TON, TOF, TP) Set Value LREAL Get, Set 0.0 Preset time setpoint in seconds FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Methods Name Description Reset() Resets the error state of the class. FB_Base Hmi Init(ip Base) Default initialization method to pass the base class. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. 304 Version: 1.4.0 TF85xx
## Page 305

PLC-API - Class overview Name Description Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Interfaces I_Timer Weekday Standard interface on FB_Timer Weekday Master I_Timer Weekday Hmi Query Interface for internal queuing of multiple weekday timers I_Attachable Md Interface Interface for containerless machine data components I_Timer Hmi Standard interface on FB_Timer Hmi I_Base Hmi Standard interface on FB_Base Hmi. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Requirements Development Environment Target platform PLC libraries to include Twin CAT 4026 >= v3.1.4026.16 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.12.0.0) Twin CAT 4024 >= v3.1.4024.66 6.13.5.1 E_Weekday Enumeration of the weekdays on which a schedule is to start. Syntax: TYPE E_Weekday : ( // invalid - inactive e None := 2#0000_0000, // One day e Monday := 2#0000_0001, e Tuesday := 2#0000_0010, e Wednesday := 2#0000_0100, e Thursday := 2#0000_1000, e Friday := 2#0001_0000, e Saturday := 2#0010_0000, e Sunday := 2#0100_0000 Values Name Description e None Inactive or no weekday e Monday Monday e Tuesday Tuesday e Wednesday Wednesday e Thursday Thursday e Friday Friday e Saturday Saturday e Sunday Sunday TF85xx Version: 1.4.0 305
## Page 306

PLC-API - Class overview 6.13.6 FB_Timer Weekday Master Implements a weekday timer, compatible with IEC 61131-3 timers. Syntax: FUNCTION_BLOCK FB_Timer Weekday Master EXTENDS FB_Base Md Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Timer Weekday Master Elapsed LREAL Get 0.0 Current time value in seconds Latched LREAL Get 0.0 Stored time value of the last execution in seconds Preset LREAL Get, Set 0.0 Preset time value in seconds Et TIME Get T#0ms Current time value in milliseconds In BOOL Get, Set FALSE Activation input L TIME Get T#0ms Stored time value of the last execution in milliseconds Pt TIME Get, Set T#0ms Preset time value in milliseconds Q BOOL Get FALSE Timer output FB_Base Md Machine Data I_Md Base Container Get - Interface for machine data handling. [} 117] FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Methods Name Description Reset() Resets the error state of the class. FB_Base Md [PROTECTED] Add Md Comp() Adds a component of type I_Md Component to the machine data container. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. 306 Version: 1.4.0 TF85xx
## Page 307

PLC-API - Class overview Name Description Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Machine data Component Description Index range Number of in- stances FB_Md File Info [} 133] File information 0x0000 Fxxx 1 FB_Md Weekday Timing Period of a weekly timer 0x0000 71xx 30 (Default) [} 158] [} 353] Interfaces Type Description I_Base Standard interface on FB_Base. I_Timer Weekday Standard interface on FB_Timer Weekday Master I_One Task Interface Runtime interface for a PLC task I_Base Md Standard interface on FB_Base Md. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 6.13.7 FB_Time Class (FB) saves a point in time. The class makes it possible to interpret the time in various partial information and data types. Syntax: FUNCTION_BLOCK FB_Time Properties Name Type Access Initial value Description Day WORD Get 0 (1 - 32) Day of the month. Day Of Week WORD Get 0 (0 - 6) Day of the week TF85xx Version: 1.4.0 307
## Page 308

PLC-API - Class overview Name Type Access Initial value Description 0 = Sunday, 1 = Monday, etc… Dn T DATE_AND_TIME Get DT#1970-1-1- Time as IEC data type. 0:0:0 Filetime ULINT Get, Set 0 Time as T_FILETIME64. Hour WORD Get 0 (1 - 23) Hour of the day. Milisecond WORD Get 0 (1 – 999) Millisecond of the second. Minute WORD Get 0 (0 – 59) Minute of the hour. Month WORD Get 0 (1 – 12) Month of the year. Second WORD Get 0 (0 – 59) Second of the minute. Text STRING(24) Get „1601-00-00-0 Time as a textual string. 0:00:00“ Time Of Day LREAL Get 0 [s] Time of day in seconds. Time Of Week LREAL Get 0 [s] Time of the week in seconds (starting from Day Of Week = 0) Timestruct TIMESTRUCT Get, Set 0x0 Time as system time structure. Valid Time BOOL Get FALSE Time is valid (> 0). Weekday E_Weekday [} 305] Get e None Day of the week Week UINT Get 0 Calendar week (according to DIN 1355 / ISO 8601) Year WORD Get 0 (1970 – Year 2106) Methods Type Description Add Sec(f Seconds) Adds seconds to the time value of this class and returns an interface to it. Diff To(i Diff) Returns a timespan [s] between this and the transferred time. Diff To Now() Returns a timespan [s] between this time and the current local system time. Now() Sets this class equal to the current system time and returns an interface to it. Interfaces Type Description I_Time Standard interface on FB_Time. Requirements Development Environment Target platform PLC libraries to include Twin CAT 4026 >= v3.1.4026.16 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.12.0.0) Twin CAT 4024 >= v3.1.4024.66 308 Version: 1.4.0 TF85xx
## Page 309

PLC-API - Class overview 6.13.8 F_Get Cycle Time() Returns the cycle time of the calling task as LREAL floating point value in seconds. Syntax: FUNCTION F_Get Cycle Time : LREAL Outputs Name Type Description F_Get Cycle Time LREAL Cycle time in seconds as floating point value Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 6.13.9 F_Update Local Systemtime Updates the system time that can be retrieved via F_Get Local Systemtime [} 309] and F_Get Local Systemtime Ex [} 310]. This function only needs to be called cyclically if the application is operated without FB_Base Runtime [} 270]. Syntax: FUNCTION F_Update Local Systemtime Possible events ID Description Alarm/Message 30x Error when retrieving the local system time Message Prerequisites Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.10.2.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.13.10 F_Get Local Systemtime Returns the local system time, taking into account the time zone. Is suitable for creating system time-related timestamps. TF85xx Version: 1.4.0 309
## Page 310

PLC-API - Class overview Syntax: FUNCTION F_Get Local Systemtime : ULINT Outputs Name Type Description F_ ULINT System time, based on the definition of T_FILETIME Get Local Systemtime Possible events ID Description Alarm/Message 30x Error when retrieving the local system time Message Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.8.1.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.13.11 F_Get Local Systemtime Ex Returns the system time of a device with AMS-Net ID, taking into account the time zone. Is suitable for creating system time-related timestamps. Syntax: FUNCTION F_Get Local Systemtime Ex : ULINT Inputs Name Type Description s Net ID T_Ams Net ID Net-ID of the system to be read Outputs Name Type Description F_ ULINT System time, based on the definition of T_FILETIME Get Local Systemtime Ex Possible events ID Description Alarm/Message 30x Error when retrieving the local system time Message 310 Version: 1.4.0 TF85xx
## Page 311

PLC-API - Class overview Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.8.1.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.13.12 F_Seconds To Time() Converts a time in seconds of type LREAL to milliseconds of type TIME. Syntax: FUNCTION F_Seconds To Time : TIME VAR_INPUT f Time: LREAL; END_VAR Inputs Name Type Description f Time LREAL Time value in seconds as floating point number Outputs Name Type Description F_Seconds To Time TIME Time value in milliseconds Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 6.13.13 F_Time To Seconds() Converts a time in milliseconds of type TIME to seconds of type LREAL. Syntax: FUNCTION F_Seconds To Time : LREAL VAR_INPUT t Time: TIME; END_VAR Inputs Name Type Description t Time TIME Time value in milliseconds TF85xx Version: 1.4.0 311
## Page 312

PLC-API - Class overview Outputs Name Type Description F_Time To Seconds LREAL Time value in seconds as floating point number Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 6.14 Utilities 6.14.1 Files 6.14.1.1 FB_Limit Memory The class analyzes the size of files in a directory. By setting limits, the files can be cleaned up as required by deleting the oldest variants. Syntax: FUNCTION_BLOCK FB_Limit Memory EXTENDS FB_Base Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Limit Memory Busy BOOL Get FALSE The function is currently being executed. Done BOOL Get FALSE The execution was successful. Error Id UDINT Get FALSE ADS error code of the error that has occurred. Filter T_Max String Get, Set ‘‘ File filter that can contain placeholders (* and ?). Limits Exceeded BOOL Get FALSE The check has shown that the set limits have been exceeded. Max Files UDINT Get, Set 0 Maximum number of files in the directory. Max Memory LREAL Get, Set 0 [MB] Maximum memory size of the files in the directory. Memory Size LREAL Get 0 [MB] Current memory size of the files in the directory. Net Id AMSNETID Get, Set [0,0,0,0,0,0] AMS (ADS) network ID Net Id String T_Ams Net ID Get, Set ‘0.0.0.0.0.0‘ AMS (ADS) network ID Num Files UDINT Get 0 Current number of files in the directory. 312 Version: 1.4.0 TF85xx
## Page 313

PLC-API - Class overview Name Type Access Initial value Description Path T_Max String Get ‘‘ Path to the target directory. Timeout LREAL Get, Set 0.0 [s] Time-out period of the system response of this function. FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Methods Name Description Reset() Resets the error state of the class. FB_Limit Memory Check(b Execute) Checks the size of the directory. Check With Clean(b Execute) Triggers the commands Check() and Clean() in succession. Clean(b Execute) Cleans up the excess, starting with the oldest files. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Cycle methods Name Description Cyclic() Cycle method Procedure controlling methods (FB_Adaptable Sequence [} 317]) Name Description States() [} 314] Procedure for executing the file check and cleanup. Interfaces Type Description I_Base Standard interface on FB_Base. I_Limit Memory Standard interface on FB_Limit Memory. I_Base Empty For extension without standard interface. TF85xx Version: 1.4.0 313
## Page 314

PLC-API - Class overview Type Description I_Base Dev Covers all methods and properties of the base class. Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.14.1.1.1 States() Instance type Instance Name Master fb States Slaves a Base Seq Members[E_Limit Memory States.e Length] State diagram: Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.14.1.2 FB_Create Dir Recurse Implements the FB_Create Dir function and calls it several times until all components of the transferred path have been created. Syntax: FUNCTION_BLOCK FB_Create Dir Recurse EXTENDS FB_Base 314 Version: 1.4.0 TF85xx
## Page 315

PLC-API - Class overview Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Create Dir Recurse Busy BOOL Get FALSE The function is currently being executed. Error BOOL Get FALSE An error has occurred. Error Id UDINT Get FALSE ADS error code of the error that has occurred. Execute BOOL Get, Set FALSE Starts the execution of the function. Net Id AMSNETID Get, Set [0,0,0,0,0,0] AMS (ADS) network ID. Net Id String T_Ams Net ID Get, Set ‘0.0.0.0.0.0‘ AMS (ADS) network ID. Path Name T_Max String Get, Set ‘‘ Path to be created. Timeout LREAL Get, Set 0.0 [s] Time-out period of the system response of this function. FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Methods Name Description Reset() Resets the error state of the class. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Cycle methods Name Description Cyclic() Cycle method TF85xx Version: 1.4.0 315
## Page 316

PLC-API - Class overview Interfaces Type Description I_Base Standard interface on FB_Base. I_Create Dir Recurse Standard interfaces on FB_Create Dir Recurse. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.14.1.3 F_Base Directory Creates the path to the default directory of the Plastic Base Application. Syntax: FUNCTION F_Base Directory : T_Max String Outputs Name Type Description F_Base Directory T_Max String Path to the default directory. Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.14.1.4 F_Concat Filepaths Handles the merging of two file paths. This guarantees that a separator is inserted between the two paths. Accordingly, a missing or double separator is avoided. Syntax: FUNCTION F_Concat Filepaths : T_Max String 316 Version: 1.4.0 TF85xx
## Page 317

PLC-API - Class overview Inputs Name Type Description s Base T_Max String Base path (relative or absolute path possible). s Sub T_Max String Subpath (relative path) Outputs Name Type Description F_Concat Filepaths T_Max String Resulting overall path. Prerequisites Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.10.2.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.14.2 FB_Adaptable Sequence Allows variable extension of implemented procedures of a class. The class itself is used to manage all sequences and to indicate the state of a single sequence with reference to the management (master). Syntax: FUNCTION_BLOCK FB_Adaptable Sequence Properties Name Type Access Initial value Description Active Seq I_Adaptable Seq Itf Get THIS^ Interface to the current step of the procedure. Done BOOL Get, Set FALSE Indicates successful processing of a procedure step. Failed BOOL Get, Set FALSE Indicates the failed execution of a procedure step. Index BOOL Get 0 Index of the class in relation to the overall procedure. Is Active BOOL Get FALSE The class is active as the current sequence. Is Master BOOL Get TRUE The class is the management object of a procedure. Length INT Get 0 Length of the list of appended procedure steps. Next I_Adaptable Seq Itf Get NULL Interface to the next step of the procedure. Tag I_Flex Value [} 330] Get <Local> Arbitrary value for saving user-defined information. TF85xx Version: 1.4.0 317
## Page 318

PLC-API - Class overview Methods Name Description Append(i New) Appends a step to the procedure. Check() [} 318] Checks whether the current step of the procedure has been processed. Clear() [} 319] Deletes all sequences from the master. Exists() [} 319] Checks whether a sequence is included in the master. Idx() [} 320] Returns the xth step from the procedure. Insert() [} 320] Inserts a step in the procedure. Jump() [} 321] Requests jumping to a sequence that does not follow. Reset() Slave: Resets the state of the procedure step. Master: Resets the progress of the entire procedure. [INTERN] Set Master(ip Master) Assigns a master to the procedure step. Notice Used by the Insert() method and does not need to be called separately. Interfaces Type Description I_Adaptable Seq Itf Interface for implementation as slave. I_Adaptable Seq State Interface for reading the sequence state. I_Adaptable Seq Query Advanced interface for editing by the master. I_Adaptable Seq Master Interface for implementation as master. Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.14.2.1 Check() Checks whether the current step of the procedure has been processed. If this is the case, the method also causes switching to the next sequence. Use is already integrated This method is already implemented for existing instances in the Twin CAT 3 Plastic Base Application. It is not recommended to use this method for checking within a sequence. A call of the function is only necessary when a procedure is restarted. Syntax: METHOD Check : BOOL 318 Version: 1.4.0 TF85xx
## Page 319

PLC-API - Class overview Outputs Name Type Description Check BOOL TRUE if the current step has been completed and the next step is initiated. Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 6.14.2.2 Clear() Deletes all sequences from the master. Syntax: METHOD Clear : HRESULT Outputs Name Type Description Clear HRESULT Return value with feedback on the success of the execution Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 6.14.2.3 Exists() Checks whether a process step is included in the master. Syntax: METHOD Exists : HRESULT VAR_INPUT i Seq: I_Adaptable Seq Itf; END_VAR Inputs Name Type Description i Seq I_Adaptable Seq Itf Process step to be checked TF85xx Version: 1.4.0 319
## Page 320

PLC-API - Class overview Outputs Name Type Description Exists HRESULT Return value with feedback on the success of the check Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 6.14.2.4 Idx() Returns the xth step from the procedure. Syntax: METHOD Idx : I_Adaptable Seq Itf VAR_INPUT n Idx: INT; END_VAR Inputs Name Type Description n Idx INT The requested index Outputs Name Type Description Idx I_Adaptable Seq Itf Found step of the procedure Invalid indexes To avoid exceptions caused by an invalid value on input n Idx, the function returns the master in case of an error. Therefore, the method should be treated comparable to an array index by considering the total length of the sequence list. Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 6.14.2.5 Insert() Adds another step to the procedure. 320 Version: 1.4.0 TF85xx
## Page 321

PLC-API - Class overview Syntax: METHOD Insert : HRESULT VAR_INPUT i Current: I_Adaptable Seq Itf; i New: I_Adaptable Seq Itf; b Overwrite: BOOL; END_VAR Inputs Name Type Description i Current I_Adaptable Seq Itf The current participant to be moved behind the new participant. i New I_Adaptable Seq Itf New participant to be added b Overwrite BOOL TRUE if the current participant is not to be moved but replaced. Outputs Name Type Description Insert HRESULT Return value with feedback on the success of the execution Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 6.14.2.6 Jump() Requests jumping to a sequence that does not follow. Request does not lead directly to execution When the method is executed, only the request is stored in the master. To execute the jump, the Done or Failed property of the active process step must be set and the Check() method must be called. See the Check() [} 318] method for more important notes. Syntax: METHOD Jump : HRESULT VAR_INPUT i Target: I_Adaptable Seq Itf; END_VAR Inputs Name Type Description i Target I_Adaptable Seq Itf Sequence to be jumped to TF85xx Version: 1.4.0 321
## Page 322

PLC-API - Class overview Outputs Name Type Description Jump HRESULT Return value with feedback on the success of the request Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 6.14.2.7 I_Adaptable Seq Ext Allows the implementation of procedure steps outside the procedure-implementing class. Syntax: INTERFACE I_Adaptable Seq Ext EXTENDS I_Base Empty Event-driven methods (callback methods) Name Description Ext Adapt Seq(b Init, i Master) Called from the implemented procedure to process the procedure steps outside. Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.42 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.4) 6.14.3 FB_CP22xx_1025 The class implements the I/O functions of the Beckhoff Blow Molding Panel CP2219-1025-0030. Internal functions: • Handling of the push buttons (incl. control of the colors). • Processing the incremental encoder (incl. LED ring). ◦ See the explanation on integration into the application [} 462]. • Control of the info LED. Syntax: FUNCTION_BLOCK FB_CP22xx_1025 EXTENDS FB_Base Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_CP22xx_1025 322 Version: 1.4.0 TF85xx
## Page 323

PLC-API - Class overview Name Type Access Initial value Description Button1 I_Button RGB [} 325] Get <Local> Push button 1 (Start) Button2 I_Button RGB [} 325] Get <Local> Push button 2 (stop) Button3 I_Button RGB [} 325] Get <Local> Push button 3 (acknowledge) EStop I_Button [} 324] Get <Local> Emergency stop Status I_RGBLed [} 329] Get <Local> Status LED Wheel I_CP22xx_Wheel [} 326] Get <Local> Incremental encoder FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Methods Name Description Reset() Resets the error state of the class. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Cycle methods Name Description Cyclic() Cycle method - Call once per PLC cycle (default 10 ms). Interfaces Type Description I_Base Standard interface on FB_Base. I_CP22xx_1025 Standard interface on FB_CP22xx_1025. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. TF85xx Version: 1.4.0 323
## Page 324

PLC-API - Class overview Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.14.3.1 FB_Button Implements a push button from a control panel. Syntax: FUNCTION_BLOCK FB_Button EXTENDS FB_Base Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Button Press I_Input Digital Get <Local> Digital input for button actuation. FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Methods Name Description Reset() Resets the error state of the class. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() 324 Version: 1.4.0 TF85xx
## Page 325

PLC-API - Class overview Cycle methods Name Description Cyclic() Cycle method - Call once per PLC cycle (default 10 ms). Interfaces Type Description I_Base Standard interface on FB_Base. I_Button Standard interface on FB_Button. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.14.3.2 FB_Button RGB Implements a push button from a control panel with RGB indicator light. Syntax: FUNCTION_BLOCK FB_Button RGB EXTENDS FB_Button Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Button RGB Lamp I_RGBLed [} 329] Get <Local> Indicator lamp as RGB LED. FB_Button Press I_Input Digital Get <Local> Digital input for button actuation. FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > TF85xx Version: 1.4.0 325
## Page 326

PLC-API - Class overview Methods Name Description Reset() Resets the error state of the class. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Cycle methods Name Description Cyclic() Cycle method - Call once per PLC cycle (default 10 ms). Interfaces Type Description I_Base Standard interface on FB_Base. I_Button RGB Standard interface on FB_Button RGB. I_Button Standard interface on FB_Button. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.14.3.3 FB_CP22xx_Wheel Implements the CP22xx_1025 specific incremental encoder including the 10-segment LED ring. Syntax: FUNCTION_BLOCK FB_CP22xx_Wheel EXTENDS FB_Scale Hmi 326 Version: 1.4.0 TF85xx
## Page 327

PLC-API - Class overview Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_CP22xx_Wheel Enc I_CP22xx_Wheel Enc Get THIS^ Selective access to the encoder functions. Fill Mode BOOL Get, Set FALSE The LEDs fill up from Guiding Mid to Guiding Value. Guiding Max LREAL Get, Set 100.0 Maximum value of the Guiding Value. Guiding Mid LREAL Get, Set 0.0 Value from which the LEDs fill. Only active with Fill Mode. Guiding Mid Window LREAL Get, Set 1.0 Tolerance window in which the LEDs indicate a center position. Only active with Fill Mode. Guiding Min LREAL Get, Set 0.0 Minimum value of the Guiding Value. Guiding Value LREAL Get, Set 0.0 Control value for the LED display. Leds I_CP22xx_Wheel Led Get THIS^ Selective access to the LED functions. Limit Overflow BOOL Get, Set FALSE Limits the current position to the limit values. The internal overflow is deleted directly. Modulo Factor LREAL Get, Set 24.0 Mask of the modulo position. By default, the factor is set to one revolution of the encoder. Modulo Pos LREAL Get, Set 0.0 Modulo position Position LREAL Get 0.0 Current position of the encoder. Position Max LREAL Get, Set 0.0 Maximum position of the encoder Only active with Limit Overflow Position Min LREAL Get, Set Minimum position of the encoder. Only active with Limit Overflow. Position Offset LREAL Get, Set 0.0 Position offset of the encoder . Position Raw UDINT Get, Set 0.0 Raw position of the encoder. Position Scale LREAL Get, Set 0.25 Scaling factor of the encoder position. Press I_Input Digital Get <Local> Digital input from pressing the incremental encoder. Velocity LREAL Get 0.0 Current velocity of the encoder (filtered). FB_Base TF85xx Version: 1.4.0 327
## Page 328

PLC-API - Class overview Name Type Access Initial value Description Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Methods Name Description Reset() Resets the error state of the class. FB_CP22xx_Wheel Set Position(f Set Pos) Sets the encoder position to the transferred position value. Set Zero() Sets the encoder position to 0. FB_Scale Hmi [PROTECTED] Xto Y(...) Scales a value x to a value y, using the minimum and maximum value of both scales. FB_Base Hmi Init(ip Base) Default initialization method to pass the base class. FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Cycle methods Name Description Cyclic() Cycle method - Call once per PLC cycle (default 10 ms). Interfaces Type Description I_Base Standard interface on FB_Base. I_CP22xx_Wheel Sum interface on FB_CP22xx_Wheel. I_CP22xx_Wheel Enc Encoder functions of the FB_CP22xx_Wheel. I_CP22xx_Wheel Led LED functions of the FB_CP22xx_Wheel. I_Base Hmi Standard interface on FB_Base Hmi. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. 328 Version: 1.4.0 TF85xx
## Page 329

PLC-API - Class overview Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.14.3.4 FB_RGBLed Implements an RGB LED with digitally controlled colors. Syntax: FUNCTION_BLOCK FB_RGBLed EXTENDS FB_Base Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_RGBLed Black BOOL Get, Set TRUE LED is off. Blue BOOL Get, Set FALSE LED lights up blue. Cyan BOOL Get, Set FALSE LED lights up cyan. Green BOOL Get, Set FALSE LED lights up green. Led Blue I_Input Digital Get <Local> Digital output of the blue component of the RGB LED. Led Green I_Input Digital Get <Local> Digital output of the green component of the RGB LED. Led Red I_Input Digital Get <Local> Digital output of the red component of the RGB LED. Pink BOOL Get, Set FALSE LED lights up pink. Red BOOL Get, Set FALSE LED lights up red. White BOOL Get, Set FALSE LED lights up white. Yellow BOOL Get, Set FALSE LED lights up yellow. FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Methods Name Description Reset() Resets the error state of the class. FB_Base Get HMI() Returns the assigned HMI object. TF85xx Version: 1.4.0 329
## Page 330

PLC-API - Class overview Name Description Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Cycle methods Name Description Cyclic() Cycle method - Call once per PLC cycle (default 10 ms). Interfaces Type Description I_Base Standard interface on FB_Base. I_RGBLed Standard interface on FB_RGBLed. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.14.4 FB_Flex Value Class (FB) comparable to the structured data type ST_Flex Value from TF8560. Represents a variable without a specified data type. Syntax: FUNCTION_BLOCK FB_Flex Value Properties Name Type Access Initial value Description Value U_Flex Value Get 0 Value as Union (all types). Value Type E_Flex Value Get e BOOL Last assigned value data type (except if assigned via structure). 330 Version: 1.4.0 TF85xx
## Page 331

PLC-API - Class overview Name Type Access Initial value Description _BOOL BOOL Get, Set FALSE Value as BOOL. _IBASE I_Base [} 58] Get, Set NULL Value as interface I_Base. _INT INT Get, Set 0 Value as INT. _LREAL LREAL Get, Set 0.0 Value as LREAL. _UINT UINT Get, Set 0 Value as UINT NOTICE Online Change handling The interpretation of the _IBASE value is not handled during an Online Change! It must be ensured that the return value of the interface is a valid instance of a class! Interfaces Type Description I_Flex Value Standard interface on FB_Flex Value. Prerequisites Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.10.2.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.14.5 FB_Handshake Hmi Implements a general handshake procedure with life sign mechanism and companion identification. Class is abstract Since the class is defined as ABSTRACT, the class cannot be instantiated and must be implemented using inheritance. Syntax: FUNCTION_BLOCK ABSTRACT FB_Handshake Hmi EXTENDS FB_Base Hmi Handshake signal properties Name Type Access Initial value Description PLC / HMI1 Reset BOOL Get, Set FALSE Request to reinitialize the HMI communication. FB_Handshake Hmi Companion ID UINT Get, Set 0 ID of the currently connected HMI HMI Companion. Live Sign HMI UINT Get, Set 0 Changing value of the HMI HMI client to signal an active connection. 1The PLC/HMI column describes the assignment of the write access. TF85xx Version: 1.4.0 331
## Page 332

PLC-API - Class overview Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Handshake Hmi Companion Timeout LREAL Get, Set 5.0 Time after which the Companion is considered disconnected (no longer connected) if there is no sign of life. FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Methods Name Description Reset() Resets the error state of the class. FB_Handshake Hmi Cyclic() Cycle method FB_Base Get HMI() Returns the assigned HMI object. Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Interfaces Type Description I_Base Standard interface on FB_Base. I_Handshake Hmi Standard interface on FB_Handshake Hmi I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. 332 Version: 1.4.0 TF85xx
## Page 333

PLC-API - Class overview Prerequisites Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.10.2.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.14.6 FB_List Query Hmi This class (FB) is the basis for an iterative data exchange with the corresponding HMI function List Query Plc. To transmit information, inherit from this class and add class properties with the data per entry. Communication takes place according to the following sequence scheme: Class is abstract Since the class is defined as ABSTRACT, the class cannot be instantiated and must be implemented using inheritance. Syntax: FUNCTION_BLOCK ABSTRACT FB_List Query Hmi Properties Name Type Access Initial value Description Invoke BOOL Get, Set FALSE Triggering the data request via the HMI FB_List Query Hmi Current DINT Get 0 Counter of the current entry that was transmitted. Is incremented implicitly when Next() is called. Done BOOL Get, (Set) FALSE The PLC has transferred the last entry, the query process is complete. TF85xx Version: 1.4.0 333
## Page 334

PLC-API - Class overview Name Type Access Initial value Description Results DINT Get, (Set) 0 Counter of the total number of results that have been loaded. Must run ahead of the Current counter. Select DINT Get, Set 0 Selection of a value read in the previous pass. The previous Current counter can be requested here for identification purposes, for example. A 0 is to be treated as no selection. Valid BOOL Get, (Set) FALSE The current data entry is fully loaded and ready for further processing by the HMI. Methods Type Description Next() Gives the signal to process another data entry. The method resets the Valid flag and increments the Current counter. FB_List Query Hmi Reset() Resets all values (except for Invoke) to the initial value. Interfaces Type Description I_List Query Hmi Standard interface on FB_List Query Hmi. Prerequisites Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.10.2.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.14.7 FB_Parameter Allows concatenation of multiple 64-bit floating point (LREAL) values with assignable name. Syntax: FUNCTION_BLOCK FB_Parameter EXTENDS FB_Base Properties Name Type Access Initial value Description Name STRING Get, Set '‘ Name of the parameter Next I_Parameter Get, Set NULL Next item in the list Root I_Parameter Get, Set THIS^ First element of the list Value LREAL Get, Set 0.0 Value of the parameter 334 Version: 1.4.0 TF85xx
## Page 335

PLC-API - Class overview Methods Name Description Idx() Returns the element of the xth position of the list. Exceptions avoidance The Idx() function returns the first element (root) of the list on invalid requested index. Interfaces Type Description I_Parameter Standard interface on FB_Parameter I_Parameter Query Extension of the I_Parameter interface with set access to next and root properties Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.42 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.6.0) 6.14.8 FB_Scale Hmi Used as a common basis for scaling values. Syntax: FUNCTION_BLOCK FB_Scale Hmi EXTENDS FB_Base Hmi Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Methods Name Description Reset() Resets the error state of the class. FB_Scale Hmi TF85xx Version: 1.4.0 335
## Page 336

PLC-API - Class overview Name Description [PROTECTED] Xto Y(...) Scales a value x to a value y, using the minimum and maximum value of both scales. FB_Base Hmi Init(ip Base) Default initialization method to pass the base class. Interfaces Type Description I_Base Standard interface on FB_Base. I_Base Hmi Standard interface on FB_Base Hmi. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.14.9 FB_Trend Hmi Support class for the Twin CAT HMI SQLite Trend with pre-implemented views. The TF8550 function Tc Hmi. Functions. Plastic. Update Trend() is required for use. The selected view is additionally determined by the property Selected View. The following objects with corresponding interface can be attached to the trend: Type Display value I_Extruder Hmi Actual turnrate of the extruder [RPM] I_Monitoring Hmi Monitoring value [any] I_Temp Channel Actual temperature of a temperature channel [°C] I_Temperature Actual temperature of each grouped temperature channel [°C] I_Temp Ctrl Hmi 1 Temperature of each zone [°C] 1 Obsolete Internal functions: • The first x views are pre-reserved for displaying the temperature groups ◦ Default x := 5 ◦ Automatically adapting to the set number of groups [} 353] ◦ When the FB_Temperature [} 273] group configuration is changed, the views are automatically adapted as well • All values attached via Append() are available for configuration by the Config Xyz() methods Syntax: FUNCTION_BLOCK FB_Trend Hmi EXTENDS FB_Base 336 Version: 1.4.0 TF85xx
## Page 337

PLC-API - Class overview Properties Name Type Access Initial value Description Selected View INT Get, Set 0 Selected view Methods Name Description Append() [} 337] Append a value to be recorded in the trend and selected in views. Append Temp Channels() [} 338] Append the temperature zones of an FB_Temperature instance Check Support() [PROTECTED] Checks the support of the appended object Config Display Name() [} 339] Overwrites the instance name of a display value. Config Display Localisation() [} 339] Overwrites the instance name with a localization key. Config Display Localisation Nuget() Overwrites the instance name with a localization key from the TF8550. Localisation package. Config View() [} 340] Configures a value in a selectable view. Idx() Returns the object at the xth position. Append Temp Zones() 1 Append the temperature zones of an FB_Temp Ctrl instance. 1 Obsolete Exceptions avoidance The Idx() function returns the first element (root) of the list on invalid requested index. Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.42 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.6.0) 6.14.9.1 Append() Appends a value to the trend. Syntax: METHOD Append : HRESULT VAR_INPUT i Obj: I_Base; n Standard View: INT; n YAxis ID: INT; END_VAR Inputs Name Type Description i Obj I_Base Object to be included in the trend n Standard View INT Standard view in which the value is displayed n YAxis ID INT Y-axis in the HMI on which the value is displayed The YAxis ID is predefined for the following units: TF85xx Version: 1.4.0 337
## Page 338

PLC-API - Class overview ID Unit Description 1 °C Temperature 2 A Current 3 Bar Pressure 4 RPM Turnrate Outputs Name Type Description Append HRESULT Return value with feedback on the success of the execution Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 6.14.9.2 Append Temp Channels() Appends the temperature configuration to the trend. If the group configuration of all zones changes, this is automatically taken over by FB_Trend Hmi. Syntax: METHOD Append Temp Channels : HRESULT VAR_INPUT ip Temp: I_Temperature; n YAxis ID: INT; END_VAR Inputs Name Type Description ip Temp I_Temperature Instance of the temperature control class (FB) n YAxis ID INT Y-axis in the HMI on which the value is displayed The YAxis ID is predefined for the following units: ID Unit Description 1 °C Temperature 2 A Current 3 Bar Pressure 4 RPM Turnrate Outputs Name Type Description Append Temp Channels HRESULT Return value with feedback on the success of the execution 338 Version: 1.4.0 TF85xx
## Page 339

PLC-API - Class overview Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.42 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.6.0) 6.14.9.3 Config Display Name() Adjusts the display name for a trend value. Syntax: METHOD Config Display Name : HRESULT VAR_INPUT i Obj: I_Base; s Name: STRING(255); b Append: BOOL; END_VAR Inputs Name Type Description i Obj I_Base Object whose name is to be adjusted s Name STRING(255) String to be displayed b Append BOOL Passed string is to be appended to the existing display name. Outputs Name Type Description Config Display Name HRESULT Return value with feedback on the success of the execution Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 6.14.9.4 Config Display Localisation() Adjusts the display name for a trend value. Syntax: METHOD Config Display Name : HRESULT VAR_INPUT i Obj: I_Base; s Localisation: STRING(255); b Append: BOOL; END_VAR TF85xx Version: 1.4.0 339
## Page 340

PLC-API - Class overview Inputs Name Type Description i Obj I_Base Object whose name is to be adjusted s Localization STRING(255) Localization key to be displayed b Append BOOL Passed localization key is to be appended to the existing display name. Outputs Name Type Description Config Display Localisati HRESULT Return value with feedback on the success of the execution on Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 6.14.9.5 Config View() Changes the composition of a selectable view. Syntax: METHOD Config View : HRESULT VAR_INPUT i Obj: I_Base; n View Idx: INT; b Show: BOOL; END_VAR Inputs Name Type Description i Obj I_Base Object to be adjusted in a view n View Idx INT View (ID) to be customized b Show BOOL Object is displayed (TRUE). Outputs Name Type Description Config View HRESULT Return value with feedback on the success of the execution Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 340 Version: 1.4.0 TF85xx
## Page 341

PLC-API - Class overview 6.14.10 Math 6.14.10.1 F_Cut Decimals Truncates the decimal places of a floating point number. Syntax: FUNCTION F_Cut Decimals : LREAL Inputs Name Type Description f Value LREAL Value whose decimal places are truncated. n Decimals UINT Number of decimal places to be retained. Outputs Name Type Description F_Cut Decimals LREAL Value with truncated decimal places. Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.14.10.2 F_Round Rounds the decimal places of a floating point number. Syntax: FUNCTION F_Round : LREAL Inputs Name Type Description f Value LREAL Value whose decimal places are truncated. n Decimals UINT Number of decimal places to be retained. Outputs Name Type Description F_Round LREAL Value with rounded decimal places. TF85xx Version: 1.4.0 341
## Page 342

PLC-API - Class overview Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.14.10.3 F_Try Divide() Divides two values without throwing an exception. Return value mathematically invalid The function defines the mathematically invalid case x / 0 as 0. This is a mathematically invalid result, but is sufficient for many use cases. Check for your use case whether this definition does not lead to unforeseen misbehavior. Syntax: FUNCTION F_Try Divide : HRESULT VAR_INPUT f Nominator: LREAL; f Denominator: LREAL; ref Result: REFERENCE TO LREAL; END_VAR Inputs Name Type Description f Nominator LREAL Value to be divided f Denominator LREAL Value by which to divide ref Result REFERENCE TO Result of the division LREAL Outputs Name Type Description F_Try Divide HRESULT Return value with feedback on the success of the execution Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.42 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.4) 6.14.11 T_Plastic Status Status variable for linking to a TF8550 State Indicator. This variable is interpreted bit by bit. Syntax: TYPE T_Plastic Status : BYTE; END_TYPE 342 Version: 1.4.0 TF85xx
## Page 343

PLC-API - Class overview Values bit Description 0 Successful (Green) 1 Warning (Orange) 2 Error (Red) 3 Reserved 4 Reserved 5 Reserved 6 Reserved 7 State is invalid Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.7.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.14.12 Table Generator 6.14.12.1 FB_File Table Generator Implements the basic functionality for file-based table reading mechanisms. Class is abstract Since the class is defined as ABSTRACT, the class cannot be instantiated and must be implemented using inheritance. Syntax: FUNCTION_BLOCK ABSTRACT FB_File Table Generator EXTENDS Tc3_Plastic Functions. FB_Trafo Table Generator Properties Name Type Access Initial value Description File Path STRING Get, Set ‘‘ File path on the target system to the stored description file. FB_File Table Generator Drive High End LREAL Get 0.0 Read highest point of the drive side. Can be used in equidistant mode to define the drive points. Drive Low End LREAL Get 0.0 Read lowest point of the drive side. Can be used in equidistant mode to define the drive points. Load High End LREAL Get 0.0 Read highest point of the load side. Load Low End LREAL Get 0.0 Read lowest point of the load side. Tc3_Plastic Functions. FB_Trafo Table Generator Further <> <> <> Implemented by FB_Trafo Table Generator characteristics TF85xx Version: 1.4.0 343
## Page 344

PLC-API - Class overview Methods Name Description Define Table() Starts reading the table from the file. The function runs asynchronously and must be called several times. As soon as the file has been successfully loaded, a TRUE is returned. FB_File Table Generator Reset() Resets the started, completed or failed reading mechanism. Procedure controlling methods (FB_Adaptable Sequence [} 317]) Type Description States() [} 344] Procedure for processing the file loading mechanism Possible events ID Description Alarm/Message 8002 Table could not be read. Alarm Interfaces Type Description I_File Table Generator Standard interface on FB_File Table Generator. Further interfaces Implemented by FB_Trafo Table Generator. Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.8.1.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.14.12.1.1 States() Instance type Instance Name Master fb States Slaves a Base States[E_File Table States.e Length] State diagram: 344 Version: 1.4.0 TF85xx
## Page 345

PLC-API - Class overview Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.8.1.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.14.12.2 FB_Csv Table Generator Loads a table from a CSV-based file. Formatting the file: Drive,Load 0.0,100.0 1.0,110.0 2.0,121.0 3.0,131.0 4.0,142.0 … Formatting variations possible The formatting of the CSV file can be varied with regard to individual details: • A header with column names is optional (not required). • For a file with more than two columns, the function block can identify the columns to be used using the header described above. • If no Drive column is found (if the CSV file only contains one column), an equidistant distribution of points is assumed. The drive points are distributed between the specified Drive Low End and Drive High End. Syntax: FUNCTION_BLOCK FB_Csv Table Generator EXTENDS FB_File Table Generator Properties Name Type Access Initial value Description File Path STRING Get, Set ‘‘ File path on the target system to the stored description file. FB_File Table Generator Drive High End LREAL Get 0.0 Read highest point of the drive side. Can be used in equidistant mode to define the drive points. Drive Low End LREAL Get 0.0 Read lowest point of the drive side. Can be used in equidistant mode to define the drive points. Load High End LREAL Get 0.0 Read highest point of the load side. Load Low End LREAL Get 0.0 Read lowest point of the load side. Tc3_Plastic Functions. FB_Trafo Table Generator Further <> <> <> Implemented by FB_Trafo Table Generator characteristics TF85xx Version: 1.4.0 345
## Page 346

PLC-API - Class overview Methods Name Description Define Table() Starts reading the table from the file. The function runs asynchronously and must be called several times. As soon as the file has been successfully loaded, a TRUE is returned. FB_File Table Generator Reset() Resets the started, completed or failed reading mechanism. Procedure controlling methods (FB_Adaptable Sequence [} 317]) Type Description States() [} 346] Procedure for processing the file loading mechanism (extended) Possible events ID Description Alarm/Message 8002 Table could not be read. Alarm Interfaces Type Description I_File Table Generator Standard interface on FB_File Table Generator. I_Csv Table Generator Standard interface on FB_Csv Table Generator. Further interfaces Implemented by FB_Trafo Table Generator. Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.8.1.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.14.12.2.1 States() Instance type Instance Name Master fb States Slaves a Base States[E_File Table States.e Length] State diagram: 346 Version: 1.4.0 TF85xx
## Page 347

PLC-API - Class overview Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.8.1.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.14.12.3 FB_Table Generator Ascii File Implements a file read mechanism for a user-defined table (e.g. for use as a transformation table). Formatting the file: Drive Load 0.0 100.0 1.0 110.0 2.0 121.0 3.0 131.0 4.0 142.0 … Limited number of points The number of points that can be loaded with this class is limited by the parameter Tc3_Plastic Base App Static Params.cn Max Trafo Points. If a file contains a larger number of points, the limit in the library settings must be adjusted accordingly! Syntax: FUNCTION_BLOCK FB_Table Generator Ascii File EXTENDS FB_File Table Generator Properties Name Type Access Initial value Description File Path STRING Get, Set ‘‘ File path on the target system to the stored description file. FB_File Table Generator Drive High End LREAL Get 0.0 Read highest point of the drive side. Can be used in equidistant mode to define the drive points. Drive Low End LREAL Get 0.0 Read lowest point of the drive side. Can be used in equidistant mode to define the drive points. Load High End LREAL Get 0.0 Read highest point of the load side. Load Low End LREAL Get 0.0 Read lowest point of the load side. Tc3_Plastic Functions. FB_Trafo Table Generator Further <> <> <> Implemented by FB_Trafo Table Generator characteristics TF85xx Version: 1.4.0 347
## Page 348

PLC-API - Class overview Methods Name Description Define Table() Starts reading the table from the file. The function runs asynchronously and must be called several times. As soon as the file has been successfully loaded, a TRUE is returned. FB_File Table Generator Reset() Resets the started, completed or failed reading mechanism. Procedure controlling methods (FB_Adaptable Sequence [} 317]) Type Description States() [} 348] Procedure for processing the file loading mechanism (extended) Possible events ID Description Alarm/Message 8002 Table could not be read. Alarm Interfaces Type Description I_File Table Generator Standard interface on FB_File Table Generator. I_Table Generator Ascii File Standard interface on FB_Table Generator Ascii File Further interfaces Implemented by FB_Trafo Table Generator. Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.8.1.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.14.12.3.1 States() Instance type Instance Name Master fb States Slaves a Base States[E_File Table States.e Length] a Ascii States[E_Ascii Table States.e Length] 348 Version: 1.4.0 TF85xx
## Page 349

PLC-API - Class overview State diagram: Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.8.1.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.14.13 Trigger 6.14.13.1 FB_Latch Trigger Extends the FB_Trigger class by a memory function of the edges. Syntax: FUNCTION_BLOCK FB_Latch Trigger EXTENDS FB_Trigger Properties Name Type Access Initial value Description LF BOOL Get FALSE A falling edge was present at the input signal. LR BOOL Get FALSE A rising edge was present at the input signal. Methods Name Description Reset() Resets LF and LR. TF85xx Version: 1.4.0 349
## Page 350

PLC-API - Class overview Interfaces Type Description I_Latch Trigger Standard interface on FB_Latch Trigger Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 6.14.13.2 FB_Trigger Combines triggers of type R_TRIG and F_TRIG with object-oriented interface. Syntax: FUNCTION_BLOCK FB_Trigger Properties Name Type Access Initial value Description CLK BOOL Get, Set FALSE Sampled input signal FQ BOOL Get FALSE Input signal has a falling edge. Q BOOL Get FALSE Input signal has a rising or falling edge. RQ BOOL Get FALSE Input signal has a rising edge. Methods Name Description Cyclic() Cycle method by which the signal is sampled Interfaces Type Description I_Trigger Standard interface on FB_Trigger Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 350 Version: 1.4.0 TF85xx
## Page 351

PLC-API - Class overview 6.14.14 Version 6.14.14.1 FB_Lib Version Defines the structure of the version number of a library. Syntax: FUNCTION_BLOCK FB_Lib Version Properties Name Type Access Initial value Description Version STRING Get, Set 'v0.0.0.0' Version number as a textual string. FB_Lib Version Build UDINT Get 0 Third digit of the version number. Dev Build BOOL Get FALSE The version number corresponds to "v0.0.0" and is interpreted as a development build. Major UDINT Get 0 First digit of the version number. Minor UDINT Get 0 Second digit of the version number. Pre Release BOOL Get FALSE The Minor version is an odd number and is interpreted as a preliminary version. Released BOOL Get FALSE Version is marked as 'Released'. Revision UDINT Get 0 Fourth digit of the version number. Version3 STRING Get 'v0.0.0' Version without the first digit of the version number. Methods Name Description Copy(i Version) Adopts another version in this class. FB_Lib Version Increase(n Place) Increases the version, depending on the transferred position. Is Equal To(i Compare) Compares if another version matches. Is Newer Than(i Compare) Checks if this version is newer than the passed comparison version. Is Older Than(i Compare) Checks if this version is older than the passed comparison version. Set Version(…) Sets the version number. Set Version Struct(st Version) Sets the version number based on a version of type ST_Lib Version. TF85xx Version: 1.4.0 351
## Page 352

PLC-API - Class overview Interfaces Type Description I_Lib Version Standard interface on FB_Lib Version. Requirements Development Environment Target platform PLC libraries to include Twin CAT 4026 >= v3.1.4026.16 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.12.0.0) Twin CAT 4024 >= v3.1.4024.66 6.14.14.2 FB_Lib Version Beta Defines the structure of the version number of a library, plus a tag. The property FB_Lib Version Beta. Version thus presents itself as 'v5.3.32.9-beta554', for example. Implicit version tags With the implicit version tags (can be set via . Imply Version Tags), the version number is always interpreted as three digits. The Revision is interpreted as a beta revision and displayed using the beta tag. In addition, Pre Release versions are displayed with the tag '-pre' and Dev Build versions with the tag '- dev'. Syntax: FUNCTION_BLOCK FB_Lib Version Beta EXTENDS FB_Lib Version Properties Name Type Access Initial value Description Version STRING Get, Set 'v0.0.0.0' Version number as a textual string. Beta Iteration UDINT Get, Set 0 Determines the beta iteration of the version. For Imply Version Tags = TRUE the revision is returned here. Imply Version Tags BOOL Get, Set FALSE Extended version semantics. The coding is added as a tag to the version number. FB_Lib Version Build UDINT Get 0 Third digit of the version number. Dev Build BOOL Get FALSE The version number corresponds to "v0.0.0" and is interpreted as a development build. Major UDINT Get 0 First digit of the version number. Minor UDINT Get 0 Second digit of the version number. 352 Version: 1.4.0 TF85xx
## Page 353

PLC-API - Class overview Name Type Access Initial value Description Pre Release BOOL Get FALSE The Minor version is an odd number and is interpreted as a preliminary version. Released BOOL Get FALSE Version is marked as 'Released'. Revision UDINT Get 0 Fourth digit of the version number. Version3 STRING Get 'v0.0.0' Version without the first digit of the version number. Methods Name Description Copy(i Version) Adopts another version in this class. FB_Lib Version Increase(n Place) Increases the version, depending on the transferred position. Is Equal To(i Compare) Compares if another version matches. Is Newer Than(i Compare) Checks if this version is newer than the passed comparison version. Is Older Than(i Compare) Checks if this version is older than the passed comparison version. Set Version(…) Sets the version number. Set Version Struct(st Version) Sets the version number based on a version of type ST_Lib Version. Interfaces Type Description I_Lib Version Standard interface on FB_Lib Version. I_Lib Version Beta Standard interface on FB_Lib Version Beta. Requirements Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.8.1.0) (recommended) Twin CAT >= v3.1.4024.42 (required) 6.15 Setting parameters - Tc3_Plastic Base App Static Params Static parameter list of the Tc3_Plastic Base Application. Syntax: {attribute 'qualified_only'} VAR_GLOBAL CONSTANT // =============================================================== // available // Static motion paramters {attribute 'Tc Hmi Symbol. Hide'} cn Max Trafo Points: INT:=181; {attribute 'Tc Hmi Symbol. Hide'} cn Max Curve Points: INT:=401; {attribute 'Tc Hmi Symbol. Hide'} cn Max Ptp Points: INT:=6; {attribute 'Tc Hmi Symbol. Hide'} cn Max Move Cluster: INT:=2; {attribute 'Tc Hmi Symbol. Hide'} cn Max Ptp Cams: INT:=5; TF85xx Version: 1.4.0 353
## Page 354

PLC-API - Class overview // Static temperature parameters {attribute 'Tc Hmi Symbol. Hide'} cn Temp Groups: INT := 5; {attribute 'Tc Hmi Symbol. Hide'} cn Temp Timers: INT := 30; // Trend {attribute 'Tc Hmi Symbol. Hide'} cn Trend Size: INT := 50; // Logger {attribute 'Tc Hmi Symbol. Hide'} cn Logger Buffer Size: UINT := 100; // Runtime handling {attribute 'Tc Hmi Symbol. Hide'} cn Runtime Objects: INT := 100; // maximum of global alarms active at the same time {attribute 'Tc Hmi Symbol. Hide'} cn Max Alarms: UINT := 50; // Data on File System {attribute 'Tc Hmi Symbol. Hide'} cs Fs Separator: STRING := '\' {attribute 'Tc Hmi Symbol. Hide'} cs Hard Disk: STRING := 'C:'; {attribute 'Tc Hmi Symbol. Hide'} cs Data Folder Name: STRING := 'Data\Machine'; {attribute 'Tc Hmi Symbol. Hide'} cs Machine Name: STRING := 'Beckhoff'; // obsolete support {attribute 'Tc Hmi Symbol. Hide'} cb Support Obsolete Vars: BOOL := FALSE; // =============================================================== // obsolete {attribute 'hide'} cn No Of Trafo Points: INT := cn Max Trafo Points; {attribute 'hide'} cn Temp Zones Per Group: INT := 20; {attribute 'hide'} cn No Of Cammming Points: INT := cn Max Curve Points - 1; // =============================================================== END_VAR Values Name Description Default cn Max Trafo Poin Maximum number of transformation points for the buffer for loading a table 181 ts from a file [} 347]. cn Max Curve Poi Maximum number of points of an FB_Curve Hmi [} 215] based cam plate 401 nts (e.g. for using the TF8550 Curve Editor). cn Max Ptp Points Maximum number of PTP segments. 6 cn Max Move Clus Maximum number of clusters (Grouped PTP segments). 2 (Work-/ ter Basepos) cn Max Ptp Cams Maximum number of PTP cams per cluster. 5 cn Temp Groups Number of available temperature groups. 5 cn Temp Timers Number of weekly timings for scheduling the temperature control. 30 cn Trend Size Maximum number of trend values that can be historized. 50 cn Logger Buffer S Size of the buffer of FB_Csv Base [} 103] derived logger classes. 100 ize cn Runtime Objec Number of control objects that can be appended to the runtime. 100 ts cn Max Alarms Maximum number of alarms that can be active at the same time. 50 cs Fs Separator File system: Separator. "/" for UNIX® & Linux® \ (Windows) 354 Version: 1.4.0 TF85xx
## Page 355

PLC-API - Class overview Name Description Default cs Hard Disk File system: Target drive of the default path. C: (Windows) cs Data Folder Na File system: Target folder of the default path on the target drive. Data\Machine me cs Machine Name Machine data: Abbreviation for the identification of a machine data file. Beckhoff cb Support Obsol Supports the previous handling of hidden internal variables of a class, FALSE ete Vars which are no longer used by the current algorithm due to changes. Prerequisites Development environment Target platform PLC libraries to include Twin CAT >= v3.1.4024.54 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v12.10.2.0) (recommended) Twin CAT >= v3.1.4024.42 (required) TF85xx Version: 1.4.0 355
## Page 356

HMI project structure 7 HMI project structure The Plastic Application HMI project is a project developed in Twin CAT HMI with basic functionalities for creating user interfaces for plastics processing machines. The project structure is based on the standard of a Twin CAT HMI project. Use and further development of the Plastic Application HMI Since the Plastic Application HMI project does not provide a fully comprehensive user interface for every plastics processing machine, the project must be adapted to specific machines. For this purpose, the project can be extended and modified as desired. Update capability of the Plastic Application HMI Editing the Plastic Application HMI can lead to an impairment of the update capability. This may affect the support provided by Beckhoff Automation. 7.1 References Nu Get packages can be added to the project under the References folder via the package management system Nu Get. TF8550 | Plastic HMI Framework The following Nu Get packages from the product can be used specifically for plastics processing machines: Nu Get package Description Beckhoff. Twin CAT. HMI. Plastic Serves as a collection package to install all other Nu Get packages on this list in the correct version with a single installation. Beckhoff. Twin CAT. HMI. Plastic. Controls Addition to the Nu Get package Beckhoff. Twin CAT. HMI. Controls to extend the toolbox with specific controls for plastic processing machines (e.g. Arrow Motion Graph, Cam Control, Pfw Single Temp Control etc.). Beckhoff. Twin CAT. HMI. Plastic. Functions Complementary functions for the project. Beckhoff. Twin CAT. HMI. Plastic. Images Contains the icons and graphics used in the Plastic Application HMI project, as well as other resources for plastic processing machines. Beckhoff. Twin CAT. HMI. Plastic. Localizations Contains the language keys used in the Plastic Application HMI project with translations in English and German specifically for plastics processing machines. Beckhoff. Twin CAT. HMI. Plastic. Recipe Helper Addition to the Nu Get package Beckhoff. Twin CAT. HMI. Recipe Management to extend the Recipe Management extension. Beckhoff. Twin CAT. HMI. Plastic. RFID Contains functions for integrating RFID readers and associated chips. Beckhoff. Twin CAT. HMI. Plastic. Temperature Addition to the Nu Get package Beckhoff. Twin CAT. HMI. Plastic. Controls to extend the toolbox with controls and functions in the temperature area. Beckhoff. Twin CAT. HMI. Plastic. Themes Adds a Plastic theme to the themes and includes special design adjustments for the Plastic Application HMI project. 356 Version: 1.4.0 TF85xx
## Page 357

HMI project structure Using Twin CAT HMI with the TF8550 Nu Get packages The Nu Get packages of the TF8550 product can be integrated into any Twin CAT HMI project. For this purpose, the corresponding license for TF8550 is required in the PLC. The package provides the Nu Get packages described in chapters. The Nu Get packages can be included via the package management system Nu Get. To do this, the package source under which the Nu Get packages are located must be included. After that, the Nu Get packages can be located and installed via the search. The installed Nu Get packages are available in the project after a restart of the project. The Configurator control is part of the Beckhoff. Twin CAT. HMI. Plastic. Controls Nu Get package and can be dragged onto a view or content via the toolbox. The control is used to set specific functions and the appearance of some other controls that are in the same Nu Get package. The control only needs to exist with the desired parameters, but has no other functionality and therefore does not need to be visible. Requirements for TC3 Plastic Application Version TE2000 | Twin CAT 3 HMI Engineering TF8550 | Plastic HMI Framework v12.12.0 v12.762.46 v12.18.0 • Beckhoff. Twin CAT. HMI. Controls • Beckhoff. Twin CAT. HMI. Plastic (12.18.0) (12.762.46) • Beckhoff. Twin CAT. HMI. Plastic. Controls • Beckhoff. Twin CAT. HMI. Event Logger (12.18.0) (19.0.205) • Beckhoff. Twin CAT. HMI. Plastic. Functions • Beckhoff. Twin CAT. HMI. Framework (12.18.0) (12.762.46) • Beckhoff. Twin CAT. HMI. Plastic. Images • Beckhoff. Twin CAT. HMI. Functions (12.18.0) (12.762.46) • Beckhoff. Twin CAT. HMI. Plastic. Localizations • Beckhoff. Twin CAT. HMI. Recipe Management (12.18.0) (19.0.205) • Beckhoff. Twin CAT. HMI. Plastic. Recipe Helpe • Beckhoff. Twin CAT. HMI. Responsive Navigati r (12.18.0) on (12.762.46) • Beckhoff. Twin CAT. HMI. Plastic. RFID • Beckhoff. Twin CAT. HMI. Sqlite Historize (12.18.0) (19.0.205) • Beckhoff. Twin CAT. HMI. Plastic. Temperature (12.18.0) • Beckhoff. Twin CAT. HMI. Plastic. Themes (12.18.0) v12.10.2 v12.760.59 v12.16.12 • Beckhoff. Twin CAT. HMI. Controls • Beckhoff. Twin CAT. HMI. Plastic (12.16.12) (12.760.59) • Beckhoff. Twin CAT. HMI. Plastic. Controls • Beckhoff. Twin CAT. HMI. Event Logger (12.16.12) (19.0.120) • Beckhoff. Twin CAT. HMI. Plastic. Functions • Beckhoff. Twin CAT. HMI. Framework (12.16.12) (12.760.59) • Beckhoff. Twin CAT. HMI. Plastic. Images • Beckhoff. Twin CAT. HMI. Functions (12.16.12) (12.760.59) • Beckhoff. Twin CAT. HMI. Plastic. Localizations • Beckhoff. Twin CAT. HMI. Recipe Management (12.16.12) (19.0.120) • Beckhoff. Twin CAT. HMI. Plastic. Recipe Helpe • Beckhoff. Twin CAT. HMI. Responsive Navigati r (12.16.12) on (12.760.59) • Beckhoff. Twin CAT. HMI. Plastic. RFID • Beckhoff. Twin CAT. HMI. Sqlite Historize (12.16.12) (19.0.120) • Beckhoff. Twin CAT. HMI. Plastic. Temperature (12.16.12) • Beckhoff. Twin CAT. HMI. Plastic. Themes (12.16.12) v12.8.1 v12.760.59 v12.14.0 TF85xx Version: 1.4.0 357
## Page 358

HMI project structure Version TE2000 | Twin CAT 3 HMI Engineering TF8550 | Plastic HMI Framework • Beckhoff. Twin CAT. HMI. Controls • Beckhoff. Twin CAT. HMI. Plastic. Controls (12.760.59) (12.14.0) • Beckhoff. Twin CAT. HMI. Event Logger • Beckhoff. Twin CAT. HMI. Plastic. Functions (19.0.120) (12.14.0) • Beckhoff. Twin CAT. HMI. Framework • Beckhoff. Twin CAT. HMI. Plastic. Images (12.760.59) (12.14.0) • Beckhoff. Twin CAT. HMI. Functions • Beckhoff. Twin CAT. HMI. Plastic. Localizations (12.760.59) (12.14.0) • Beckhoff. Twin CAT. HMI. Recipe Management • Beckhoff. Twin CAT. HMI. Plastic. Recipe Helpe (19.0.120) r (12.14.0) • Beckhoff. Twin CAT. HMI. Responsive Navigati • Beckhoff. Twin CAT. HMI. Plastic. RFID on (12.760.59) (12.14.0) • Beckhoff. Twin CAT. HMI. Sqlite Historize • Beckhoff. Twin CAT. HMI. Plastic. Temperature (19.0.120) (12.14.0) • Beckhoff. Twin CAT. HMI. Plastic. Themes (12.14.0) v12.7.0 v12.760.59 v12.12.0 • Beckhoff. Twin CAT. HMI. Controls • Beckhoff. Twin CAT. HMI. Plastic. Controls (12.760.59) (12.12.0) • Beckhoff. Twin CAT. HMI. Event Logger • Beckhoff. Twin CAT. HMI. Plastic. Functions (19.0.120) (12.12.0) • Beckhoff. Twin CAT. HMI. Framework • Beckhoff. Twin CAT. HMI. Plastic. Images (12.760.59) (12.12.0) • Beckhoff. Twin CAT. HMI. Functions • Beckhoff. Twin CAT. HMI. Plastic. Localizations (12.760.59) (12.12.0) • Beckhoff. Twin CAT. HMI. Recipe Management • Beckhoff. Twin CAT. HMI. Plastic. Recipe Helpe (19.0.120) r (12.12.0) • Beckhoff. Twin CAT. HMI. Responsive Navigati • Beckhoff. Twin CAT. HMI. Plastic. Temperature on (12.760.59) (12.12.0) • Beckhoff. Twin CAT. HMI. Sqlite Historize • Beckhoff. Twin CAT. HMI. Plastic. Themes (19.0.120) (12.12.0) v12.6.0 v12.760.44 v12.8.0 • Beckhoff. Twin CAT. HMI. Controls • Beckhoff. Twin CAT. HMI. Plastic. Controls (12.760.44) (12.8.0) • Beckhoff. Twin CAT. HMI. Event Logger • Beckhoff. Twin CAT. HMI. Plastic. Functions (19.0.102) (12.8.0) • Beckhoff. Twin CAT. HMI. Framework • Beckhoff. Twin CAT. HMI. Plastic. Images (12.760.44) (12.8.0) • Beckhoff. Twin CAT. HMI. Functions • Beckhoff. Twin CAT. HMI. Plastic. Localizations (12.760.44) (12.8.0) • Beckhoff. Twin CAT. HMI. Recipe Management • Beckhoff. Twin CAT. HMI. Plastic. Recipe Helpe (19.0.102) r (12.8.0) • Beckhoff. Twin CAT. HMI. Responsive Navigati • Beckhoff. Twin CAT. HMI. Plastic. Temperature on (12.760.44) (12.8.0) • Beckhoff. Twin CAT. HMI. Sqlite Historize • Beckhoff. Twin CAT. HMI. Plastic. Themes (19.0.102) (12.8.0) v12.5.1 v12.758.8 v12.6.0 • Beckhoff. Twin CAT. HMI. Controls (12.758.8) • Beckhoff. Twin CAT. HMI. Plastic. Controls (12.6.0) • Beckhoff. Twin CAT. HMI. Event Logger (19.0.0) • Beckhoff. Twin CAT. HMI. Plastic. Functions (12.6.0) • Beckhoff. Twin CAT. HMI. Framework (12.758.8) 358 Version: 1.4.0 TF85xx
## Page 359

HMI project structure Version TE2000 | Twin CAT 3 HMI Engineering TF8550 | Plastic HMI Framework • Beckhoff. Twin CAT. HMI. Functions • Beckhoff. Twin CAT. HMI. Plastic. Images (12.758.8) (12.6.0) • Beckhoff. Twin CAT. HMI. Recipe Management • Beckhoff. Twin CAT. HMI. Plastic. Localizations (19.0.0) (12.6.0) • Beckhoff. Twin CAT. HMI. Responsive Navigati • Beckhoff. Twin CAT. HMI. Plastic. Recipe Helpe on (12.758.8) r (12.6.0) • Beckhoff. Twin CAT. HMI. Sqlite Historize • Beckhoff. Twin CAT. HMI. Plastic. Temperature (19.0.0) (12.6.0) • Beckhoff. Twin CAT. HMI. Plastic. Themes (12.6.0) 7.2 Themes In the folder Themes you will find the Plastic theme. The Plastic theme references the Beckhoff. Twin CAT. HMI. Plastic. Themes Nu Get package and includes design adaptations of existing controls and classes used in the Plastic Application HMI project. The file can be customized to change the design as desired, as long as it has been loaded into the project. Update capability of the Plastic Application HMI Editing the Plastic Application HMI can lead to an impairment of the update capability. This may affect the support provided by Beckhoff Automation. Available from version 12.5.1 7.3 Contents The folder Contents contains in further subfolders all existing pages or .content files of the project. The contents are built according to certain structures. These are only recommendations. The Contents/Dashboard folder contains all the contents required for the dynamic dashboard in the Plastic Application HMI project. TF85xx Version: 1.4.0 359
## Page 360

HMI project structure The folder Contents/Navigation contains all Contents categorized in folders that can be found in the navigation of the Plastic Application HMI project. 360 Version: 1.4.0 TF85xx
## Page 361

HMI project structure TF85xx Version: 1.4.0 361
## Page 362

HMI project structure The Contents/Popup folder contains all contents that appear as pop-up windows in the Plastic Application HMI project. The folder Contents/Slider contains all contents categorized in folders that are applied in the slider area of the Plastic Application HMI project. 362 Version: 1.4.0 TF85xx
## Page 363

HMI project structure The subfolders of the two folders Contents/Navigation and Contents/Slider have the same structure in order to recognize the affiliation of the contents from the slider area and the contents of the main area (contained in the navigation). As desired, additional files of the type .content can be created or the existing contents can be deleted or edited. Update capability of the Plastic Application HMI Editing the Plastic Application HMI can lead to an impairment of the update capability. This may affect the support provided by Beckhoff Automation. TF85xx Version: 1.4.0 363
## Page 364

HMI project structure Naming controls The naming (Identifier) of the controls within a content is done according to a special scheme to avoid duplicate naming, as this leads to errors. The naming in the Plastic Application HMI project follows the following scheme: Content Name_XYZ_Control Type 1. Conten Name The name, i.e. the ID of the content (the identifier of the control of type Tc Hmi. Controls. System. Tc Hmi Content). ◦ Example: Temperature_Parameter_Settings 2. XYZ Any description of the control is possible. The hierarchical arrangement within the content can be observed. ◦ Example: Group1_Active_On 3. Control Type Type of the control. An abbreviation is used. ◦ Example: For the control of type Tc Hmi. Controls. Beckhoff. Tc Hmi Button the abbreviation Button would be used. Result: "Temperature_Parameters_Settings_Group1_Active_On_Button" is the ID of the described button on the content Temperature_Parameter_Settings.content with the previously described scheme. Overview of controls with possible abbreviations Control type Abbreviation Tc Hmi. Controls. Beckhoff. Tc Hmi Button Button Tc Hmi. Controls. Beckhoff. Tc Hmi Checkbox Checkbox Tc Hmi. Controls. Beckhoff. Tc Hmi Combobox Combobox Tc Hmi. Controls. Beckhoff. Tc Hmi Datagrid Datagrid Tc Hmi. Controls. Beckhoff. Tc Hmi Ellipse Ellipse Tc Hmi. Controls. Beckhoff. Tc Hmi Event Grid Event Grid Tc Hmi. Controls. Beckhoff. Tc Hmi Event Line Event Line Tc Hmi. Controls. Beckhoff. Tc Hmi File Explorer File Explorer Tc Hmi. Controls. Beckhoff. Tc Hmi Line Line Tc Hmi. Controls. Beckhoff. Tc Hmi Linear Gauge Linear Gauge Tc Hmi. Controls. Beckhoff. Tc Hmi Localization Select Localization Select Tc Hmi. Controls. Beckhoff. Tc Hmi Radial Gauge Radial Gauge Tc Hmi. Controls. Beckhoff. Tc Hmi Radio Button Radio Button Tc Hmi. Controls. Beckhoff. Tc Hmi Rectangle Rectangle Tc Hmi. Controls. Beckhoff. Tc Hmi Object Browser Object Browser Tc Hmi. Controls. Beckhoff. Tc Hmi State Image State Image Tc Hmi. Controls. Beckhoff. Tc Hmi Textblock Text block Tc Hmi. Controls. Beckhoff. Tc Hmi Textbox Text box Tc Hmi. Controls. Beckhoff. Tc Hmi Toggle Button Toggle Button Tc Hmi. Controls. Beckhoff. Tc Hmi Toggle Switch Toggle Switch Tc Hmi. Controls. Beckhoff. Tc Hmi Trend Line Chart Trend Line Chart Tc Hmi. Controls. Beckhoff. Tc Hmi User Management User Management Tc Hmi. Controls. Favorite Bar Control. Favorite Bar Control Favorite Bar / Favorite Bar Control Tc Hmi. Controls. Plastic. Arrow Motion Graph Control Arrow Motion Graph / Arrow Motion Graph Control Tc Hmi. Controls. Plastic. Blow Pressure Chart Blow Pressure Chart 364 Version: 1.4.0 TF85xx
## Page 365

HMI project structure Control type Abbreviation Tc Hmi. Controls. Plastic. Cam Control Cam / Cam Control Tc Hmi. Controls. Plastic. Configurator Configurator Tc Hmi. Controls. Plastic. Curve Editor Control Curve Editor / Curve Editor Control Tc Hmi. Controls. Plastic. Input Box Input Box Tc Hmi. Controls. Plastic. Manual Operation Manual Operation Tc Hmi. Controls. Plastic. Measurement Unit Selector Measurement Unit Selector Tc Hmi. Controls. Plastic. Monitoring Control Monitoring / Monitoring Control Tc Hmi. Controls. Plastic. Pfw Single Temp Control Pfw Single Temp Control Tc Hmi. Controls. Plastic. Pfw Temp Parameters Pfw Temp Parameters Tc Hmi. Controls. Plastic. Process Scheduler Process Scheduler Tc Hmi. Controls. Plastic. State Indicator State Indicator Tc Hmi. Controls. Plastic. Table Table Tc Hmi. Controls. Plastic. Temperature Scheduler Temperature Scheduler Tc Hmi. Controls. Plastic. Timer Control Timer / Timer Control Tc Hmi. Controls. Plastic. User Logging Viewer User Logging Viewer Tc Hmi. Controls. Plastic. Zone Configuration Zone Configuration Tc Hmi. Controls. Plastic. Zone Grouping Zone Grouping Tc Hmi. Controls. Plastic. Zone Image Layout Zone Image Layout Tc Hmi. Controls. Responsive Navigation. Tc Hmi Breadcrumb Breadcrumb Tc Hmi. Controls. Responsive Navigation. Tc Hmi Navigation Bar Navigation Bar Tc Hmi. Controls. Responsive Navigation. Tc Hmi Navigation Content Navigation Content Tc Hmi. Controls. System. Tc Hmi Container Container Tc Hmi. Controls. System. Tc Hmi Content Content Tc Hmi. Controls. System. Tc Hmi Grid Grid Tc Hmi. Controls. System. Tc Hmi Popup Popup Tc Hmi. Controls. System. Tc Hmi Region Region Tc Hmi. Controls. System. Tc Hmi View View Standard Content structure Most contents are built using grids. The grids make it easier to align the other controls that are in that grid to allow for the tile design that is consistent throughout the project. The contents or controls added to the grid are also arranged in smaller grids to make it easier to align the controls contained within a tile. The grid, which is to represent a tile, can be assigned the CSS class from the Beckhoff. Twin CAT. HMI. Plastic. Themes Nu Get package with the name Tiles via the Class Names property of the Common category to color the background color white, round the corners and add a slight shadow. Using the CSS class Tiles Headline from the same Nu Get package, you can quickly customize the appearance of the text block for the tile heading. The class colors the background of the text block in an appropriate shade of gray, the text color becomes white and the corners are adjusted according to the tile. A height of 45 px is usually used for the heading text block. Use of grids When using grids in grids, pay attention to the Z-index of the controls. If a control (e.g. a Tc Hmi Grid) is located within a Tc Hmi Grid control and its size exceeds the specified range of the corresponding location in the grid, this may mean that some contained controls (such as Tc Hmi Button controls) can no longer be operated. Thus, the Zindex property of the Layout category of the control that is inside a grid should be given a higher value. For the outer grid, for example, the Zindex property can be set to 0. TF85xx Version: 1.4.0 365
## Page 366

HMI project structure Special case: Creation of multiple pages in one content The content intended for the slider area can be larger than the actual available space. Thus, for example, the width of the content can be twice as wide as the actual available space of the Tc Hmi Region control if a second page is to be created. By changing the Left properties from the Layout category, the included grid that fills the entire content will be shifted accordingly to display the specific content that is desired. This can be done, as in the Plastic Application HMI project, using controls of type Tc Hmi Radio Button. Example: Manual functions [} 367] Available from version 12.6.0 7.3.1 Navigation Navigation.content The navigation page is called in the slider area via the 1st tab. It consists of controls from the Nu Get package Beckhoff. Twin CAT. HMI. Responsive Navigation. The Tc Hmi Navigation Bar control is used to define the pages that appear in the navigation and to display the top categories. In addition, the following controls must be set: • Tc Hmi Navigation Content: Display the available pages in the navigation depending on the selected category in the Tc Hmi Navigation Bar control (also located on the Navigation.content) • Tc Hmi Region: Area for displaying the selected content (main content of View [} 436]) • Tc Hmi Breadcrumb: Display of the breadcrumb (located directly on the View [} 436]) The Menu Data property of the Common category of the Tc Hmi Navigation Bar control is used to determine the navigation content. This property can be connected to the Nav Bar Menu Data property of the Configurator control. This means that all settings related to navigation can be made in the Navigation Config property of the Configurator control and do not have to be set multiple times. Available from version 12.6.0 7.3.2 Info Info.content The info page contains the most important machine data. This page is displayed in the slider area with the info tab (2nd tab). The page must be adapted to the specific machine. The variables are assigned to the corresponding machine components with the help of icons. The page contains the following components: 1. One of the temperatures is outside of the set tolerance 366 Version: 1.4.0 TF85xx
## Page 367

HMI project structure 2. Torque and position of the trolley 3. Torque and position of the clamp 4. Torque and position of the blow pin 5. Blowing time and blowing pressure of the blowing process 6. Melt temperature, melt pressure, current and turnrate of the main extruder 7. Current and turnrate of the co-extruder 8. Index and position of the WTC 9. Index and position of the PWDS 10. Index and position of the accumulator (only visible when the accumulator is in use) 1 2 3 4 5 6 7 8 9 10 Available from version 12.5.1 7.3.3 Manual functions Manual Functions.content The manual function page contains all manual functions and must be adapted to the specific machine. This page is displayed in the slider area with the Manual tab (3rd tab). With the help of the Manual Operation controls and the instances of the type FB_Manual Function Hmi [} 163], controls for manual functions can easily be created. The content is divided into three pages. The first page contains the following components: 1. Changing the operation mode and resetting the entire application 2. Switching the automatic mode on and off and moving the axes to the base position 3. Select temperature mode of group 1 4. Select temperature mode of group 2 5. Select temperature mode of group 3 TF85xx Version: 1.4.0 367
## Page 368

HMI project structure 1 2 3 4 5 1 2 3 4 5 The second page contains the following components: 1. Switching on the main extruder and increasing and decreasing the turnrate 2. Switching on the co-extruder and increasing and decreasing the turnrate 3. Movement of the trolley 4. Movement of the clamp 5. Movement of the blow pin 1 2 3 4 5 1 2 3 4 5 368 Version: 1.4.0 TF85xx
## Page 369

HMI project structure The third page contains the following components: 1. Enabling the WTC 2. Enabling the PWDS 3. Switching on the accumulator, filling the accumulator and pushing out the accumulator filling (only visible when the accumulator is in use) 4. Cut hose 5. Drive removal backwards and forwards 1 3 4 5 2 1 3 4 5 2 Available from version 12.6.0 7.3.4 Dashboard The folder with the name Dashboard (Contents/Dashboard) contains contents that can be used to configure a dashboard at runtime. Dashboard.content The dashboard page is used to display the configured tiles and replaces the previous Home.content. It consists of several nested grids containing regions. Using the configuration that can be set on the dashboard configuration page [} 400], this page will load and position the desired tiles in the corresponding regions. The largest grid has three rows and one column. The three cells each contain a grid with one row and three columns. The content is now divided into nine areas (with three rows and three columns). Each of the cells contains another grid, which again contains nine cells and dynamically adjusts the required rows. Currently, three cells, and thus tiles, fit next to each other per area, and then a new row is started. TF85xx Version: 1.4.0 369
## Page 370

HMI project structure 370 Version: 1.4.0 TF85xx
## Page 371

HMI project structure 1 2 3 4 5 6 7 8 9 10 11 12 13 14 Tiles The folder with the name Tiles (Contents/Dashboard/Tiles) contains all contents that are to be available as tiles for the configuration of the dashboard. By default, the following contents can be used to configure the dashboard: Content Description Tile_Accumulator.content The tile for displaying the actual values of the accumulator (13). Tile_Blowing.content The tile for displaying the actual values of the blowing process (8). Tile_Blowpin.content The tile for displaying the actual values of the blow pin (7). Tile_Carriage.content The tile for displaying the actual values of the trolley (5). Tile_Clamp.content The tile for displaying the actual values of the clamp (6). TF85xx Version: 1.4.0 371
## Page 372

HMI project structure Content Description Tile_Co Extruder.content The tile for displaying the actual values of the co- extruder (11). Tile_Main Extruder.content The tile for displaying the actual values of the main extruder (10). Tile_Notes.content The tile for entering notes (3). Tile_Process Data.content The tile for displaying the process data (1). Tile_Production Data.content The tile for displaying the production data (2). Tile_Pwtc.content The tile for displaying the actual values of the PWDS (12). Tile_Temperature.content The tile for displaying the temperature status (4). Tile_Trend.content The tile for displaying the trend values of the main extruder (14). Tile_Wtc.content The tile for displaying the actual values of the WDS (9). Available since version 12.10.2 7.3.5 Axes The folders named Axes (Contents/Navigation/Axes and Contents/Slider/Axes) contain all contents needed for the axes of the machine. This includes a subfolder for each of the three axes included in the project (blow pin [} 372], carriage [} 376] and clamping unit [} 376]) as well as a common oscilloscope page [} 377] for all axes. 7.3.5.1 Blow pin The folders named Blowpin (Contents/Navigation/Axes/Blowpin and Contents/Slider/Axes/Blowpin) contain all contents needed for the blow pin. Content Description Blowpin.content [} 372] The main page of the blow pin. Blowpin_Settings.content [} 372] Displayed in the slider area under the 4th tab when Blowpin.content is in the main area. Blowpin_Homing.content [} 374] The homing page of the blow pin. Blowpin_Homing_Settings.content [} 374] Displayed in the slider area under the 4th tab when Blowpin_Homing.content is in the main area. 7.3.5.1.1 Movement Blowpin.content The main page of the blow pin consists on the one hand of the use of the Arrow Motion Graph control and is used to set and display the blow pin movement in segments. The control allows the adjustment of velocity and position, acceleration and deceleration, as well as in both directions of movement with up to 5 segments each. On the other hand, the blow pin main page contains the cam control twice, once for each direction of movement of the axis. The two controls are used to set and display the cams by entering the length and position per segment. Up to 5 segments can be added per control. 372 Version: 1.4.0 TF85xx
## Page 373

HMI project structure Blowpin_Settings.content In addition to the main page of the blow pin there is a supplementary page for the slider area. The content is divided into two pages. The first page contains the following components: 1. Activating and resetting the settings and add and remove segments of the blow pin movement 2. Activating and resetting the settings of the cams in the downward movement of the blow pin 3. Activating and resetting the settings of the cams in the upward movement of the blow pin 4. Area for navigation to other related pages TF85xx Version: 1.4.0 373
## Page 374

HMI project structure 1 2 4 3 The second page contains the following components: 1. Setting velocity values 2. Setting torques for clamping 1 2 Available from version 12.6.0 7.3.5.1.2 Homing Blowpin_Homing.content The homing page for the blow pin consists of the following components: 1. Homing block 2. Homing block detection 3. Homing finish 4. Encoder zero offset shift Using the function Update Axes Homing Units from the Beckhoff. Twin CAT. HMI. Plastic. Functions Nu Get package, certain units of the values are converted to angle unit groups if it is a transformed axis. 374 Version: 1.4.0 TF85xx
## Page 375

HMI project structure 1 2 3 4 Blowpin_Homing_Settings.content Supplementary to the homing page of the blow pin, there is page for the slider area. This page contains the following components: 1. Homing status display 2. Homing functions 3. Aborting the homing 4. Activation of the storage option TF85xx Version: 1.4.0 375
## Page 376

HMI project structure 1 2 3 4 Available from version 12.6.0 7.3.5.2 Carriage The folders named Carriage (Contents/Navigation/Axes/Carriage and Contents/Slider/Axes/Carriage) contain all contents needed for the carriage. Content Description Carriage.content The main page of the carriage. Carriage_Settings.content Displayed in the slider area under the 4th tab when Carriage.content is in the main area. Carriage_Homing.content The homing page of the carriage. Carriage_Homing_Settings.content Displayed in the slider area under the 4th tab when Carriage_Homing.content is in the main area. The contents have almost the same structure as the contents of the Blow pin [} 372] axis. 7.3.5.3 Clamping unit The folders named Clamp (Contents/Navigation/Axes/Clamp and Contents/Slider/Axes/Clamp) contain all the contents required for the clamping unit. Content Description Clamp.content The main page of the clamping unit. Clamp_Settings.content Displayed in the slider area under the 4th tab when Clamp.content is in the main area. Clamp_Homing.content The homing page of the clamping unit. Clamp_Homing_Settings.content Displayed in the slider area under the 4th tab when Clamp_Homing.content is in the main area. The contents have almost the same structure as the contents of the blow pin [} 372] axis. 376 Version: 1.4.0 TF85xx
## Page 377

HMI project structure 7.3.5.4 Oscilloscope Scope.content The oscilloscope page is used to display the following historized symbol values per axis: • Actual value of the position. • Actual value of the velocity. • Actual value of the torque. The function Update Scope is triggered from the Beckhoff. Twin CAT. HMI. Plastic. Functions Nu Get package with the Tc Hmi Toggle Button controls. The function ensures that the Tc Hmi Trend Line Chart control adapts to the selected axis: 1. Blow pin 2. Trolley 3. Clamp 4. WTC 5. PWTC 1 6. PWTC 2 7. Accumulator In addition, an icon for the respective axis can be displayed via the Tc Hmi State Image control. 1 2 3 4 5 6 7 Available from version 12.6.0 7.3.6 Extruder The folders named Extruder (Contents/Navigation/Extruder and Contents/Slider/Extruder) contain all the contents needed for the extruders. Content Description Extruder.content [} 378] The extruder overview page. TF85xx Version: 1.4.0 377
## Page 378

HMI project structure Content Description Main Extruder.content [} 379] The page for the main extruder. Co Extruder.content [} 381] The page for the co-extruder. Trend.content [} 382] The trend page for extruders and temperature zones. Trend_Settings.content [} 382] Displayed in the slider area under the 4th tab when Trend.content is in the main area. 7.3.6.1 Overview Extruder.content The page provides an overview of all extruders and can be expanded as required depending on the number of extruders. Click on the name in the top left-hand corner to go to the corresponding page (Main Extruder.content [} 379] or Co Extruder.content [} 381]). 1. Main extruder: ◦ Name of the main extruder (Main Extruder) ◦ Temperature status of the main extruder ◦ Illustration of the main extruder ◦ Actual value display of the turn rate as a value and setpoint and actual value display of the turn rate in the graph ◦ Reduce and increase turn rate ◦ Display of melt pressure, melt temperature and current as a value and in the graph 2. Co-extruder: ◦ Name of the co-extruder (Co Extruder) ◦ Temperature status of the co-extruder ◦ Illustration of the co-extruder ◦ Actual value display of the turn rate as a value and setpoint and actual value display of the turn rate in the graph ◦ Reduce and increase turn rate ◦ Switching synchronous mode on and off ◦ Display of the gear factor ◦ Display of the current as a value and in the graph 1 2 378 Version: 1.4.0 TF85xx
## Page 379

HMI project structure 1 2 Available since version 12.7.0 7.3.6.2 Main extruder Main Extruder.content The main extruder page contains the following components: 1. Display of the melt pressure as a value and in the graph 2. Display of the melt temperature as a value and in the graph 3. Display of the current as a value and in the graph 4. Illustration of the main extruder with the associated temperature zones for displaying the actual values and setting option for the setpoints (is configured via the Layout [} 424] page of the temperatures) 5. Area for displaying and setting the turnrate: ◦ Display of the set turnrate ◦ Button for copying the currently set turnrate to the production turnrate ◦ Display and setting of the production turnrate ◦ Button for selecting the production turnrate ◦ Display and setting of the basic turnrate ◦ Button for selecting the basic turnrate ◦ Display of actual value as numerical value and in graph with reference to basic and production turnrate 6. Area for navigation to other related pages 7. Setting the material from the main extruder TF85xx Version: 1.4.0 379
## Page 380

HMI project structure 1 2 3 4 5 6 7 Main Extruder_Settings.content In addition to the main extruder page, there is also an additional page for the slider area. The page enables parison length control settings. Available from version 12.6.0 380 Version: 1.4.0 TF85xx
## Page 381

HMI project structure 7.3.6.3 Co-extruder Co Extruder.content The co-extruder page contains the following components: 1. Display of the current as a value and in the graph 2. Area for switching on the synchronous mode and setting the gear factor 3. Illustration of the co-extruder with the associated temperature zones for displaying the actual values and setting option for the setpoints (is configured via the Layout [} 424] page of the temperatures) 4. Area for displaying and setting the turnrate: ◦ Display of the set turnrate ◦ Button for copying the currently set turnrate to the production turnrate ◦ Display and setting of the production turnrate ◦ Button for selecting the production turnrate ◦ Display and setting of the basic turnrate ◦ Button for selecting the basic turnrate ◦ Display of actual value as numerical value and in graph with reference to basic and production turnrate 5. Area for navigation to other related pages 6. Setting the material from the co-extruder 1 2 3 4 5 6 TF85xx Version: 1.4.0 381
## Page 382

HMI project structure Available from version 12.6.0 7.3.6.4 Trend Trend.content The trend page is used to display curves of extruder and temperature values in a trend graph (Historized Symbols). Using the function Update Trend from the Beckhoff. Twin CAT. HMI. Plastic. Functions Nu Get package and the FB_Trend Hmi [} 336], the Tc Hmi Trend Line Chart control is adjusted depending on the Tc Hmi Toggle Button control clicked. In addition, an icon for the selection can be displayed via the Tc Hmi State Image control. Trend_Settings.content This content can be used to adjust the colors of the curves. The hexadecimal color code is entered via Tc Hmi Input controls. The Tc Hmi Button control triggers the Reset Trend Axis Colors function from the Beckhoff. Twin CAT. HMI. Plastic. Functions Nu Get package to be able to overwrite the changes with standard colors again. 382 Version: 1.4.0 TF85xx
## Page 383

HMI project structure Available from version 12.5.1 7.3.7 Parameter The folders named Parameters (Contents/Navigation/Parameters and Contents/Slider/Parameters) contain all contents needed for the configuration of the machine data. Content Description Parameters.content [} 384] The overview page of the machine data. Parameters_Accumulator.content The configuration page of the machine data for the accumulator. Parameters_Actuators.content The configuration page of the machine data for the actuators. Parameters_Blowpin.content [} 386] The configuration page of the machine data for the blow pin. Parameters_Carriage.content The configuration page of the machine data for the trolley. Parameters_Clamp.content The configuration page of the machine data for the clamp. Parameters_Co Extruder.content The configuration page of the machine data for the co-extruder. Parameters_Main Extruder.content The configuration page of the machine data for the main extruder. Parameters_Monitoring.content The configuration page of the machine data for the monitoring values. Parameters_Pwtc.content The configuration page of the machine data for the PWTC. Parameters_Setpoints.content The configuration page of the machine data for the setpoints. Parameters_Temperature.content [} 387] The configuration page of the machine data for the temperature zones and the temperature supply. Parameters_Wtc.content The configuration page of the machine data for the WTC. Parameters_Settings.content Displayed in the slider area under the 4th tab when one of the configuration pages is in the main area. A configuration page is built using the Table control. The control offers the possibility to create various variables in different data types with units and to distribute them to different subpages. With the help of the Fill Param Table function from the Beckhoff. Twin CAT. HMI. Plastic. Functions Nu Get package, the TF85xx Version: 1.4.0 383
## Page 384

HMI project structure table control can be automatically filled with the appropriate values based on the parameters passed. Changes in the PLC are automatically applied to the table. Additional rows can be added by adjusting the First Table attribute of the table control. Parameters_Settings.content The content specially made for the slider area serves as a supplement. It can be selected via the 4th tab of the slider area when the main area displays one of the configuration pages. Included is information about the saved file and functions for loading and saving this data. The displayed texts and functions of the buttons are automatically adapted depending on the displayed configuration page in the main area of the user interface using the function Update Parameters Settings Controls Ex from the Beckhoff. Twin CAT. HMI. Plastic. Functions Nu Get package. To do this, the corresponding symbols are set in the Navigation Config property of the Configurator control under the slider symbols for each table or sub-table. You can also choose whether the tables in the main area should display the parameters as one page with a scrollbar or as several pages with a predefined number of parameters per page. Available from version 12.6.0 7.3.7.1 Overview Parameters.content This page serves as an overview page for the machine data. All machine data can be loaded or saved at once. New machine data must be added manually. The following information about the individual machine data is displayed in the table (in some cases the table can be sorted accordingly): • The descriptive name of the file (sortable) • The creation date of the file (sortable) • The date on which the file was last stored (sortable) • The total number of storage operations • The loading status of the file • The saving status of the file 384 Version: 1.4.0 TF85xx
## Page 385

HMI project structure TF85xx Version: 1.4.0 385
## Page 386

HMI project structure Available since version 12.7.0 7.3.7.2 Blow pin Parameters_Blowpin.content The configuration page of the machine data for the blow pin consists of two sub-pages. The variables are categorized by subheadings. The Fill Param Table function automatically fills and updates the table when there are changes in the PLC. Additional descriptions of the individual parameters can be accessed via the column with the symbol i. 386 Version: 1.4.0 TF85xx
## Page 387

HMI project structure 7.3.7.3 Temperature Parameters_Temperature.content The machine data configuration page for temperature consists of two table controls that are toggled using the Tc Hmi Toggle Switch control: 1. Parameterization of the temperature channels 2. Parameterization of the temperature supply Using the functions Fill Param Table and Update Temperature Parameters Table Number Ex from the Beckhoff. Twin CAT. HMI. Plastic. Functions Nu Get package, the tables are automatically filled and the number of temperature zones is determined from the PLC in order to adjust the table control accordingly. Descriptions of the individual parameters can be called up via the column with the symbol i. TF85xx Version: 1.4.0 387
## Page 388

HMI project structure 1 388 Version: 1.4.0 TF85xx
## Page 389

HMI project structure 2 7.3.8 Process The folders named Process (Contents/Navigation/Process and Contents/Slider/Process) contain all contents needed for the process of the machines. Content Description Blowing.content [} 389] The page for the blowing process. Monitoring.content [} 390] The page for monitoring values. Setpoints.content [} 392] The page for setpoints. Timer.content [} 393] The page for time values. Energy Measurement.content [} 394] The page for energy measurement. 7.3.8.1 Blowing Blowing.content The blowing page consists of the following components: 1. Enable or disable the pressure output 2. Choice of blowing method between standard and interval blowing 3. Blow curve mapped in Blow Pressure Chart control 4. Pressure settings at the specific times 5. Setting delays and times using timer controls TF85xx Version: 1.4.0 389
## Page 390

HMI project structure 1 2 3 4 5 Available from version 12.5.1 7.3.8.2 Monitoring Monitoring.content The monitoring page is built using the Monitoring control from the Beckhoff. Twin CAT. HMI. Plastic. Functions Nu Get package and instances of FB_Monitoring Hmi [} 53] type. It contains one area per value for displaying the current value and for setting the threshold values. In addition, the set and measured values are illustrated in a graph. The values currently included are the following: 1. Melt temperature of the main extruder 2. Melt pressure of the main extruder 3. Current of the main extruder 4. Current of the co-extruder 390 Version: 1.4.0 TF85xx
## Page 391

HMI project structure 5. Control cabinet temperature 6. CPU temperature 7. Hydraulic system pressure TF85xx Version: 1.4.0 391
## Page 392

HMI project structure 1 2 3 4 5 6 7 Available from version 12.6.0 7.3.8.3 Setpoints Setpoints.content The setpoint page offers the possibility of setting setpoints. The following setpoints are currently included: • Hydraulic system pressure • Support air 392 Version: 1.4.0 TF85xx
## Page 393

HMI project structure Available from version 12.5.1 7.3.8.4 Times Timer.content The timer page is used for setting and monitoring times. Timer controls and the FB_Timer Hmi [} 300] can be used to create controls for times. Available from version 12.5.1 TF85xx Version: 1.4.0 393
## Page 394

HMI project structure 7.3.8.5 Energy measurement Energy Measurement.content This page provides an overview of energy measurement. It consists of the following components: 1. Display of the power, energies depending on the operation mode and date of the last reset with button for resetting. 2. Display of the voltages and currents per phase or voltages between the phases as well as the frequency. 3. Display of the power factor as a value and in the graph. 4. Display of the power quality factor as a value and in the graph. 5. Table for displaying the energy per hour in idle and production mode. 1 2 3 4 5 394 Version: 1.4.0 TF85xx
## Page 395

HMI project structure 1 2 3 4 5 Available since version 12.7.0 7.3.9 System The folders named System (Contents/Navigation/System and Contents/Slider/System) contain all system relevant contents of the machine. Content Description Administration.content [} 396] The page for the administration. Alarms.content [} 397] The page for events and alarms. Recipe Management.content [} 398] The recipe management page. Recipe Management_Settings.content [} 398] Displayed in the slider area under the 4th tab when Recipe Management.content is in the main area. Dashboard Configuration.content [} 400] The page for configuring the dashboard. TF85xx Version: 1.4.0 395
## Page 396

HMI project structure Content Description Show Dashboard.content [} 400] Is displayed as a pop-up if the preview is to be displayed on the Dashboard Configuration.content. Materials.content [} 404] The page for the materials. Add Material.content [} 404] Is displayed as a pop-up when a material is to be added to Materials.content. File Management.content [} 407] The page for file management. User Logging.content [} 408] The page for user changes. RFID.content [} 410] The RFID configuration page. 7.3.9.1 Administration Administration.content The administration page is used to manage and set the user interface and contains the following components: 1. Tc Hmi User Management control to logout, change users, edit user properties and manage users 2. Area for changing the language with one Tc Hmi Toggle Button control per language and flag respectively 3. Area for displaying the software versions 4. Measurement Unit Selector control for toggling the units in the Plastic Application HMI project 5. Area for selecting pages that are captured by a screenshot and then downloaded in the selected file format (pdf, png) 396 Version: 1.4.0 TF85xx
## Page 397

HMI project structure 1 4 2 3 5 Available from version 12.5.1 7.3.9.2 Events / Alarms Alarms.content The alarm and event page contains a Tc Hmi Event Grid control that displays all events and alarms transmitted by the PLC by means of an appropriate configuration. The control offers further filter settings to limit the display of events. The events can be viewed and acknowledged in more detail. Additionally implemented Tc Hmi Button controls simplify the Tc Hmi Event Grid control with predefined filters. The page contains the following components: 1. Button to display the pending alarms 2. Button to display all alarms so far 3. Button to display the messages 4. Button to reset the pending alarms TF85xx Version: 1.4.0 397
## Page 398

HMI project structure 5. Area for listing the alarms and messages using the Tc Hmi Event Grid control 1 2 3 4 5 Available from version 12.6.0 7.3.9.3 Recipe management Recipe Management.content The recipe management page consists of the following elements: 1. Tc Hmi Datagrid control as a table to display all recipes with the date of the last update 2. Area for the active recipe: ◦ Display of the name of the active recipe ◦ Tc Hmi Button control for saving the changes to the active recipe ◦ Tc Hmi Button control for saving the current values into a new recipe ◦ Tc Hmi Textbox control for entering the new recipe name 3. Area for the selected recipe: ◦ Display of the name of the selected recipe in the table ◦ Tc Hmi Button control for loading and activating the selected recipe ◦ Tc Hmi Button control for deleting the selected recipe 4. Area for data backup: ◦ Tc Hmi File Explorer control for listing the backup files 398 Version: 1.4.0 TF85xx
## Page 399

HMI project structure ◦ Tc Hmi Button control for restoring the selected backup data 5. Recipe file management area: ◦ Tc Hmi Button control for uploading recipes ◦ Tc Hmi Button control to download the selected recipe 1 2 3 4 5 TF85xx Version: 1.4.0 399
## Page 400

HMI project structure Recipe Management_Settings.content This content is displayed in the slider area and serves as a supplement. This consists of the following elements: 1. Display of the recipe communication status 2. Tc Hmi Button control for resetting the recipe communication 1 2 Available from version 12.5.1 7.3.9.4 Dashboardkonfiguration Dashboard Configuration.content The dashboard configuration page is used to set the desired dashboard [} 369]. The page shows the basic structure of the dashboard and contains the following components: 1. Setting the row heights of the three rows (unit can be selected in px, factor and %) 2. Area for displaying the preview of the dashboard and for uploading and downloading the dashboard configuration 3. Row 1 | Column 1 4. Row 1 | Column 2 5. Row 1 | Column 3 6. Row 2 | Column 1 7. Row 2 | Column 2 8. Row 2 | Column 3 9. Row 3 | Column 1 10. Row 3 | Column 2 11. Row 3 | Column 3 Area 3-11: Switching on and off, determining the width (unit can be selected in px, factor and %) and configuring the up to nine tiles to be displayed using combo boxes 400 Version: 1.4.0 TF85xx
## Page 401

HMI project structure 1 2 3 4 5 6 7 8 9 10 11 TF85xx Version: 1.4.0 401
## Page 402

HMI project structure 1 2 3 4 5 6 7 8 9 10 11 Show Dashboard.content This page is displayed in the pop-up window and is used to display the preview of the dashboard. 402 Version: 1.4.0 TF85xx
## Page 403

HMI project structure Extension of the available tiles To expand the tiles available for the dashboard, the following steps must be carried out: 1. Creation of a new content within the Contents/Dashboard/Tiles folder with a suitable name (e.g. Tile_Sample.content) 2. Create the content as responsive as possible so that the tile adapts accordingly for different sizes 3. Extend the Tc Hmi Srv symbol Dashboard Configuration Combobox in the Twin CAT HMI Configuration window with a new element ◦ Value: The path of the new content (e.g. Contents/Dashboard/Tiles/Tile_Sample.content) ◦ Text: The text to be displayed in the combo box for the selection of this content (e.g. %l%Sample%/l%) Available since version 12.10.2 TF85xx Version: 1.4.0 403
## Page 404

HMI project structure 7.3.9.5 Materials Materials.content This page is used to manage the materials that can be used for the extruders. It consists of the following components: 1. Area for downloading and uploading the material list. 2. Area for adding and deleting materials. 3. Table for displaying the material list with the parameters ID, name and description (sortable). 4. Pop-up window for adding materials that appears when the add button is pressed. 1 2 3 4 404 Version: 1.4.0 TF85xx
## Page 405

HMI project structure 1 2 3 Add Material.content This page is displayed in the pop-up window and is used to add a material. The parameters of the material can be entered there. In addition, an existing material, which may have come to the machine via a recipe, can be imported using the checkbox and the selection in the combo box. When adding a new material, please note that the ID must be unique. This information can be accessed via the information button. If the material has been added, it will then be listed in the table. TF85xx Version: 1.4.0 405
## Page 406

HMI project structure 4 4 Available since version 12.7.0 406 Version: 1.4.0 TF85xx
## Page 407

HMI project structure 7.3.9.6 File management File Management.content The file management page allows you to move, copy and delete certain files that can be accessed through the Tc Hmi Srv setting using the virtual directories. The project only contains the appropriate settings for Remote, so that this page is only fully functional after a publish to the target system. Selection Virtual directory Path Comment USB (1) /USB D: A pop-up window must be displayed to confirm that a USB drive is connected to the device. Machine data (2) /Machine Data C:\Data\Machine This is very sensitive data, so access should be restricted as much as possible. Images (3) /Images/File Management ... Access to the subfolder \Images\File Management File Management from the Images folder of the project, e.g. to insert machine images for the temperature pages. Data backup (4) /Recipe Backup ...\Recipe Backup Access the Recipe Backup folder to be able to access the backup data. 1 2 3 4 TF85xx Version: 1.4.0 407
## Page 408

HMI project structure 1 2 3 4 Available since version 12.7.0 7.3.9.7 User changes User Logging.content This page is used to view the changes made to the machine by the user. Each change contains the following parameters, which are saved: • The timestamp of the change. • The page on which the change was made. • The name to describe the change (e.g. the symbol name of the changed symbol). • The old value, i.e. before the change (if the value is unknown, a - is displayed). • The new value, i.e. after the change. • The name of the user who made the change. The User Logging Viewer control is used for display. This allows the following settings to be made: 1. Selection of the start date from which the files are to be displayed (using the pop-up window). 2. Selection of the end date up to which the files are to be displayed (using the pop-up window). 3. Display of the number of pages and the number of the displayed page from the defined time frame, whereby the displayed page can be customized using the input field. 4. Button to display the previous page. 5. Button to display the next page. 6. Pop-up window for setting the date (start and end). 408 Version: 1.4.0 TF85xx
## Page 409

HMI project structure 1 2 3 4 5 1 2 3 4 5 TF85xx Version: 1.4.0 409
## Page 410

HMI project structure 6 Available since version 12.7.0 7.3.9.8 RFID RFID.content This page is used for RFID configuration [} 476] (if an RFID reader is installed) and uses functions from the Beckhoff. Twin CAT. HMI. Plastic. RFID Nu Get package. The RFID reader used and the associated RFID tags (e.g. cards) can be configured on this page. This is normally only permitted for administrators. 1. Area for configuring the RFID tags ◦ Switching the Auto-Login on and off. ◦ When Auto-Login is switched off, the RFID tags can be read and the user name and password are displayed in the corresponding fields. ◦ When Auto-Login is switched off, the RFID tags can be written to using the fields for the user name and password. 2. Area for setting the COM port ◦ Display and setting option for the RFID configuration (Tc Hmi Srv symbol RFIDConfig of data type RFIDConfig): baud rate, key type, product ID and vendor ID. ◦ Button for connecting the COM port using the RFID configuration. ◦ Button for retrieving information on the connected COM ports. ◦ Button for copying the selected COM port information (vendor ID and product ID) from the table to the RFID configuration. ◦ Table for displaying the vendor ID and product ID of the connected COM ports after retrieving the information. 410 Version: 1.4.0 TF85xx
## Page 411

HMI project structure Create user in Tc Hmi User Management Writing a user name and password to an RFID tag does not create a new user. The corresponding user must be created via Tc Hmi User Management. This is done either during engineering using the Twin CAT HMI configuration window or via the User Management control on the administration page [} 396]. 1 2 TF85xx Version: 1.4.0 411
## Page 412

HMI project structure 1 2 Available since version 12.8.1 7.3.10 Temperature The folders named Temperature (Contents/Navigation/Temperature and Contents/Slider/Temperature) contain all contents needed for the temperature control on the machine. Content Description Temperature_Overview.content [} 413] The page for single zone monitoring of temperatures. Temperature_Overview_Settings.content [} 413] Displayed in the slider area under the 4th tab when Temperature_Overview.content is in the main area. Temperature_Configuration.content [} 415] The page for setting the temperature zone parameters. Temperature_Configuration_Settings.content [} 415] Displayed in the slider area under the 4th tab when Temperature_Configuration.content is in the main area. Temperature_Time Scheduling.content [} 417] The page for time control of the temperature zones and temperature groups. Temperature_Time Scheduling_Settings.content Displayed in the slider area under the 4th tab when Temperature_Time Scheduling.content is in [} 417] the main area. Temperature_Grouping.content [} 420] The page for grouping the temperature channels into temperature groups. Change Grouping Description.content [} 420] Is displayed as a pop-up if the description of the groups is to be changed on Temperature_Grouping.content. 412 Version: 1.4.0 TF85xx
## Page 413

HMI project structure Content Description Show Grouping Configurations.content [} 420] Is displayed as a pop-up if the available configured groupings are to be displayed or loaded on Temperature_Grouping.content. Temperature_Layout.content [} 424] The page for creating layouts with temperature zones. Temperature_Layout_Settings.content [} 424] Displayed in the slider area under the 4th tab when Temperature_Layout.content is in the main area. 7.3.10.1 Overview Temperature_Overview.content This page is used for the temperature zone overview on the machine. Using the Zone Image Layout control in display mode, the configurations from the Layout [} 424] page can be displayed on this page and the temperatures can be set. Clicking on the temperature group name in the top left corner of the two extruders (Main Extruder [} 379] and Co Extruder [} 381]) navigates to the associated overview page. TF85xx Version: 1.4.0 413
## Page 414

HMI project structure Temperature_Overview_Settings.content In addition to the temperature overview page, there is a supplementary page in the slider area that is used to navigate to other related pages. 414 Version: 1.4.0 TF85xx
## Page 415

HMI project structure Available from version 12.6.0 7.3.10.2 Configuration Temperature_Configuration.content The configuration page of the temperatures contains the Zone Configuration control and is used for grouped display and setting of the temperature zones. An instance of FB_Temperature Hmi [} 280] is required to use the control. TF85xx Version: 1.4.0 415
## Page 416

HMI project structure Temperature_Configuration_Settings.content This page serves as a supplement in the slider area and contains the following components: 1. Tuning of the temperature zone group and status display of tuning 2. Settings that should take effect at machine startup 3. Area for navigation to other related pages 1 2 3 416 Version: 1.4.0 TF85xx
## Page 417

HMI project structure 1 2 3 Available from version 12.6.0 7.3.10.3 Scheduling Temperature_Time Scheduling.content The page for time control of the temperature zones and temperature groups contains a Temperature Scheduler control. The control requires an instance of the FB_Temp Schedule Hmi [} 296] for the Timer List property of the Scheduler category. TF85xx Version: 1.4.0 417
## Page 418

HMI project structure Temperature_Time Scheduling_Settings.content The page serves as a supplement in the slider area and includes the following functionalities: 1. Activate and reset the changes, add new elements, remove or edit the selected element 2. Area for navigation to other related pages 1 2 418 Version: 1.4.0 TF85xx
## Page 419

HMI project structure 1 2 Adding or editing timers The pop-up window can be used to select which timer is to be edited or added. You can also select the days of the week and set the corresponding start and end times. All available temperature groups are listed in the table and can be selected so that multiple groups can be turned on with the same timer. The checkbox can be used to set whether the selected temperature groups should use the standby temperature when switching on. TF85xx Version: 1.4.0 419
## Page 420

HMI project structure Available from version 12.6.0 7.3.10.4 Grouping Temperature_Grouping.content This page is used to group the temperature channels and contains a Zone Grouping control. Only the temperature channels that are enabled via the temperature parameter page [} 383] are made available in the list. The page consists of the following functions: 1. Adjustment of the temperature zone names 2. List of available temperature channels and display of grouped temperature channels of the selected group (4) 3. Customization of the temperature group names 4. Display of the temperature groups with the grouped temperature zones and selection of the temperature group by clicking for adjustment via the temperature zone list (2) 5. Activation of the change 6. Resetting the changes 7. Customization of the description of the groups in a pop-up 8. Display and loading option of the available configured groupings in a pop-up 420 Version: 1.4.0 TF85xx
## Page 421

HMI project structure 1 5 6 7 8 3 2 4 8 7 1 5 6 7 8 3 2 4 TF85xx Version: 1.4.0 421
## Page 422

HMI project structure Change Grouping Description.content This page is displayed in the pop-up window and is used to customize the description of the groupings. The corresponding group is selected via the combo box and the description can be entered in the field below. Descriptions can be used to better differentiate between the configured groupings if an already configured grouping is to be reloaded. Show Grouping Configurations.content This page is displayed in the pop-up window and is used to list the available configured groupings. The listing process can also be canceled manually. After the listing, the column with the checkbox can be used to select which grouping is to be loaded. If the selected configuration is already loaded and no other configuration of the same group is selected, this has no effect on the loading process. 422 Version: 1.4.0 TF85xx
## Page 423

HMI project structure Available from version 12.6.0 TF85xx Version: 1.4.0 423
## Page 424

HMI project structure 7.3.10.5 Layout Temperature_Layout.content This page is used to create layouts using the Zone Image Layout control, which can be reused throughout the HMI. A background image can be selected and customized for each layout added, and temperature zones can be selected and positioned on the image as desired. Only the temperature zones that are assigned to a group via the temperature grouping page [} 420] are made available in the list. The page consists of the following functions: 1. List of available grouped temperature zones 2. Activate the changes in the list with the button 3. Closing the temperature zone list by the arrow key 4. Display of the layout selected via the combo box in the slider area 5. Positioned display of selected temperature zones 424 Version: 1.4.0 TF85xx
## Page 425

HMI project structure 1 4 5 3 2 Temperature_Layout_Settings.content The page serves as a supplement in the slider area and includes the following functionalities: 1. Switching on the configuration mode, selecting the layout via a combo box, activating and resetting the changes 2. Select background image and edit background image properties via separate pop-up windows 3. Uploading and downloading the configurations 1 2 3 TF85xx Version: 1.4.0 425
## Page 426

HMI project structure 1 2 3 Available from version 12.6.0 7.3.11 WTC The folders named Wtc (Contents/Navigation/Wtc and Contents/Slider/Wtc) contain all contents needed for the wall thickness control (WTC) of the machine. Content Description Wtc.content [} 427] The main page of the WTC. Wtc_Settings.content [} 427] Displayed in the slider area under the 4th tab when Wtc.content is in the main area. Wtc_Homing.content [} 430] The homing page of the WTC. Wtc_Homing_Settings.content [} 430] Displayed in the slider area under the 4th tab when Wtc_Homing.content is in the main area. Pwtc.content The main page of the PWDS. Pwtc_Settings.content Displayed in the slider area under the 4th tab when Pwtc.content is in the main area. Pwtc1_Homing.content The homing page of the PWDS 1. Pwtc1_Homing_Settings.content Displayed in the slider area under the 4th tab when Pwtc1_Homing.content is in the main area. Pwtc2_Homing.content The homing page of the PWDS 2. Pwtc2_Homing_Settings.content Displayed in the slider area under the 4th tab when Pwtc2_Homing.content is in the main area. Accumulator.content [} 432] The main page of the accumulator. Accumulator_Settings.content [} 432] Displayed in the slider area under the 4th tab when Accumulator.content is in the main area. Accumulator_Homing.content [} 432] The homing page of the accumulator. Accumulator_Homing_Settings.content [} 432] Displayed in the slider area under the 4th tab when Accumulator_Homing.content is in the main area. Support Air.content The main page of the support air. Support Air_Settings.content Displayed in the slider area under the 4th tab when Support Air.content is in the main area. 426 Version: 1.4.0 TF85xx
## Page 427

HMI project structure 7.3.11.1 Curve Wtc.content The main content of the WTC adapts to the use of the accumulator and consists of the following components: 1. Progress curve using the Linear Gauge control 2. WTC curve using the Curve Editor control (additional display of the accumulator curve if the accumulator is used) 3. Accumulator level indicator (only visible when the accumulator is in use) 4. Area for settings and displays relating to the cycle time and autostart (only visible when the accumulator is not in use) 5. Area for setting the accumulator values (only visible when the accumulator is in use) 6. Area for displaying the current position and setting a test position 7. Area for showing and hiding a selected passive curve 1 2 3 4 5 6 7 TF85xx Version: 1.4.0 427
## Page 428

HMI project structure 1 2 4 6 7 1 2 3 5 6 7 Wtc_Settings.content There is a supplementary page for the slider area in addition to the main page of the WTC. This content is split into three pages. 428 Version: 1.4.0 TF85xx
## Page 429

HMI project structure The first page contains the following components: 1. Setting the index, thickness, basic thickness and profile component as well as adding, removing and navigating between the existing fix points 2. Table for displaying the fix points 3. Update option for curve limits 4. Switching the shift function on and off 5. Undo changes, navigate between activated profiles and activation of the displayed profile 1 2 3 5 4 The second page contains the following components: 1. Adjustment of the envelope in negative and positive direction and switching in percent 2. Add, remove, and edit marker points, and choose how to use them 3. Table for displaying the marker points 4. Adjustment of die geometry by switching between Converging and Diverging, switching between Pin move and Die move, and adjustment of tool stroke 1 2 3 4 The third page contains the following components: 1. Setting or displaying the interpolation mode 2. Setting or displaying the product transition 3. Adjustment of the slopes 4. Adjustment of the editor options TF85xx Version: 1.4.0 429
## Page 430

HMI project structure 1 3 2 4 Available from version 12.5.1 7.3.11.2 Homing Wtc_Homing.content The homing page for the WTC consists of the following components: 1. Homing block 2. Homing block detection 3. Homing finish 4. Encoder zero offset shift Using the function Update Axes Homing Units from the Beckhoff. Twin CAT. HMI. Plastic. Functions Nu Get package, certain units of the values are converted to angle unit groups if it is a transformed axis. 430 Version: 1.4.0 TF85xx
## Page 431

HMI project structure 1 2 3 4 Wtc_Homing_Settings.content There is also a supplementary page for the slider area in addition to the homing page of the WTC. This page contains the following components: 1. Homing status display 2. Homing functions 3. Aborting the homing 4. Activation of the storage option TF85xx Version: 1.4.0 431
## Page 432

HMI project structure 1 2 3 4 Available from version 12.6.0 7.3.11.3 Accumulator Accumulator.content The main content of the accumulator consists of the following components: 1. Accumulator curve using the Curve Editor control 2. Area for setting the accumulator values 3. Area for displaying the current position 4. Area for showing and hiding a selected passive curve 432 Version: 1.4.0 TF85xx
## Page 433

HMI project structure 1 2 3 4 Accumulator_Settings.content In addition to the main page of the accumulator, there is also an additional page for the slider area. This content is split into three pages. The first page contains the following components: 1. Setting the index, thickness, basic thickness and profile component as well as adding, removing and navigating between the existing fix points 2. Update option for curve limits 3. Switching the shift function on and off 4. Table for displaying the fix points 5. Undo changes, navigate between activated profiles and activation of the displayed profile 1 2 4 5 3 The second page contains the following components: TF85xx Version: 1.4.0 433
## Page 434

HMI project structure 1. Adjustment of the envelope in negative and positive direction and switching in percent 2. Setting or display of the push-out mode 1 2 The third page contains the following components: 1. Setting or displaying the interpolation mode 2. Setting or displaying the product transition 3. Adjustment of the slopes 4. Adjustment of the editor options 1 3 2 4 Accumulator_Homing.content The homing page for the accumulator consists of the following components: 1. Homing block 2. Homing block detection 3. Homing finish 4. Encoder zero offset shift Using the function Update Axes Homing Units from the Beckhoff. Twin CAT. HMI. Plastic. Functions Nu Get package, certain units of the values are converted to angle unit groups if it is a transformed axis. 434 Version: 1.4.0 TF85xx
## Page 435

HMI project structure 1 2 3 4 Accumulator_Homing_Settings.content There is an additional page for the slider area in addition to the homing page of the accumulator. This page contains the following components: 1. Homing status display 2. Homing functions 3. Aborting the homing 4. Activation of the storage option TF85xx Version: 1.4.0 435
## Page 436

HMI project structure 1 2 3 4 Available since version 12.7.0 7.4 Localization The folder Localization manages the different languages that should be available in the project. New languages can be added. In addition, new Localized Symbols can be created, for which the translation can then be entered in all required languages. Installing the Beckhoff. Twin CAT. HMI. Plastic. Localizations Nu Get package provides the Plastic Application HMI project with language keys that can be used in the project. Update capability of the Plastic Application HMI Editing the Plastic Application HMI can lead to an impairment of the update capability. This may affect the support provided by Beckhoff Automation. Available from version 12.5.1 7.5 View A View is a file with the extension .view and contains the overall structure of the user interface. A project can contain several Views. At the beginning it has to be defined in the engineering which View should be used as Start View to build the HMI. The structure of the user interface is defined by the View selected as Start View. Update capability of the Plastic Application HMI Editing the Plastic Application HMI can lead to an impairment of the update capability. This may affect the support provided by Beckhoff Automation. Portrait.view Unless the Portrait.view file is modified, this user interface has a portrait aspect ratio (4:5) with a width of 1024 px and a height of 1280 px. It consists of the following components: 1. Header: ◦ Application name (click on it to display the Home.content in the main area). ◦ Currently loaded recipe (click on it to display the Recipe Management.content [} 398] in the main area). ◦ Current operation mode. 436 Version: 1.4.0 TF85xx
## Page 437

HMI project structure ◦ Date and time. ◦ Username (click on it to open submenu). ◦ Flag to display the selected language (click on it to open submenu). ◦ Screenshot function (enabled using the function Take Screen Shot from the Beckhoff. Twin CAT. HMI. Plastic. Functions Nu Get package). ◦ Logo 2. Favorites area: Contains user-specific favorite buttons for quick navigation of frequently used pages. 3. Event line: Display of the latest upcoming alarm and a click on it shows the Alarms.content [} 397] in the main area. 4. Main area: Display of the selected content. 5. Slider area: With the help of the Toggle Slider Area, Show Slider Area and Hide Slider Area functions from the Beckhoff. Twin CAT. HMI. Plastic. Functions Nu Get package, the slider area can be shown and hidden via the arrow keys, shown by clicking on a tab or hidden for desired contents in the main area (e.g. Scope.content [} 377]). Clicking on one of the following tabs will display the corresponding content in the slider area: ◦ 1st tab: Navigation.content [} 366] contains all available contents of the project compared to the favorites area. ◦ 2nd tab: Info.content [} 366] displays the most important machine data. ◦ 3rd tab: Manual Functions.content [} 367] contains the manual functions of the machine. ◦ 4th tab: Using the Update Slider Content Region Ex function from the Beckhoff. Twin CAT. HMI. Plastic. Functions Nu Get package, the 4th tab can optionally be displayed and the icon and the content displayed in the slider area are updated depending on the content displayed in the main area. Possible contents can be recognized by the name extension _Settings.content. TF85xx Version: 1.4.0 437
## Page 438

HMI project structure 1 2 3 4 5 Configurator control The Configurator control serves as a general control for setting control-wide configurations. The instance of the control only needs to exist and does not require visibility. The following attributes are required for further setting of the HMI: • Unit Config (Link): Path to the JSON file with the corresponding unit switching scheme. The file is supplied by default with the Beckhoff. Twin CAT. HMI. Plastic. Controls Nu Get package, but it can also be copied and modified so that a different path must be set. 438 Version: 1.4.0 TF85xx
## Page 439

HMI project structure • Navigation Config (Link): Setting of the navigation structure with additional information like icons, slider content etc. • Recipe Handshake Symbol: Setting of the symbol for recipe management. An instance of FB_Plc State To Hmi [} 261] is required for this. • Temperature symbol: Setting the symbol for the temperatures. An instance of FB_Temperature Hmi [} 280] is required for this. • User Logger Symbol: Setting of the symbol for user changes. An instance of FB_User Logger Hmi [} 114] is required for this. Available from version 12.6.0 TF85xx Version: 1.4.0 439
## Page 440

Samples / instructions 8 Samples / instructions 8.1 PLC samples / instructions 8.1.1 General 8.1.1.1 Set up new Twin CAT project If you want to start a new Twin CAT project with the Plastic Application, you have several options to set up the project. This sample shows the setup steps for a new project based on the supplied Application Sample. 1. Place the submitted project file Tc3_Plastic Application_V12.5.0.zip in a folder with the shortest possible project path. In this example, the path C:\Projects\ is chosen. Avoid long file paths - a too long file path can lead to errors when exporting the ZIP file or opening the project. Therefore, avoid storing the project under long file paths such as the user folders (C:\Users\{User Name}\Documents\Tc Xae Shell\). 2. Unpack the ZIP file. 3. Open the Tc3_Plastic Application Plc*.tsproj file in one of the subdirectories using Tc Xae Shell. Blow molding machine: Tc3_Plastic Application Plc\Blow Molding\Tc3_Plastic Base Application\Tc3_Plastic Application Plc BMM.tspr oj Extruder: Tc3_Plastic Application Plc\Extruder\Tc3_Plastic Base Application\Tc3_Plastic Application Plc EXTR.tsproj The warning message that appears when opening the project, stating that a tmc file was not found, can be ignored. The missing file is created automatically when the project is created. ð The project is ready to start. You see two PLC projects: The application and a simulation PLC. In its form, the simulation acts as a stand-alone project like the I/O of a machine. Accordingly, the simulation can be mapped to the control PLC like a machine. 440 Version: 1.4.0 TF85xx
## Page 441

Samples / instructions 8.1.1.2 Set up empty project / extend existing project In addition to the possibility of setting up a project on top of the supplied project, the Plastic Base Application can be integrated into an existing or empty project. This is made possible by adding the Plastic Base Application as a library to an existing or new project. 1. Install the library in the Twin CAT Library Manager. The file is located in the subdirectory \Dependencies\Tc3_Plastic Base Application_V3.12.5.0.compiled-library 2. Add the library to the project TF85xx Version: 1.4.0 441
## Page 442

Samples / instructions 8.1.1.3 Update Plastic Base Application subsequently in the project If you want to integrate new features of following Plastic Base Application versions into your existing project, the Twin CAT 3 Plastic Base Application offers the possibility of an update. 1. Install the newer version of the Plastic Base Application version in your Library Manager. 2. Change the fixed version of the library to the newly installed version. 3. When you create the project, check that the new library has been adopted correctly. 442 Version: 1.4.0 TF85xx
## Page 443

Samples / instructions 8.1.2 Object orientation 8.1.2.1 Adding a variable to a class (FB) If the scope of the internal variables of a class (FB) is to be extended, proceed as follows. In the following example, a variable is added to the default axis type FB_Axis. 1. Create a new class (FB) and remove VAR_INPUT and VAR_OUTPUT. FUNCTION_BLOCK FB_Custom Axis VAR_INPUT END_VAR VAR_OUTPUT END_VAR VAR END_VAR 2. Add the class to be inherited to the class definition using the EXTENDS keyword. FUNCTION_BLOCK FB_Custom Axis EXTENDS FB_Axis VAR END_VAR 3. Create the new variables in the VAR section. FUNCTION_BLOCK FB_Custom Axis EXTENDS FB_Axis VAR b New Variable1: BOOL; n New Variable2: INT; f New Variable3: LREAL; END_VAR 4. Compile the project to check the implementation for correct syntax. ð You have successfully added new variables to a class. Example result in the logged in PLC: 8.1.2.2 Adding a property or method to a class (FB) In many cases, the scope of methods and properties of a class should be changed. This includes adding new elements as well as changing or removing existing elements. In the following samples, these three procedures are explained using the standard axle type FB_Axis as an example. The following steps must be completed in advance for all three procedures: 1. Create a new class (FB) and remove VAR_INPUT and VAR_OUTPUT. FUNCTION_BLOCK FB_Custom Axis VAR_INPUT END_VAR VAR_OUTPUT TF85xx Version: 1.4.0 443
## Page 444

Samples / instructions END_VAR VAR END_VAR 2. Add the class to be inherited to the class definition using the EXTENDS keyword. FUNCTION_BLOCK FB_Custom Axis EXTENDS FB_Axis VAR END_VAR 3. So that you can also address the class and the added elements via an interface, create an interface with the same name. INTERFACE I_Custom Axis 4. Let the interface inherit from the interface of the inherited class. INTERFACE I_Custom Axis EXTENDS I_Axis 5. Implement the interface in the previously created class (FB). FUNCTION_BLOCK FB_Custom Axis EXTENDS FB_Axis IMPLEMENTS I_Custom Axis VAR END_VAR Adding a new method/property 1. Add a new method/property to the class. METHOD New Method : HRESULT VAR END_VAR 2. Copy the method into the created interface, if the method should be accessible from outside. 444 Version: 1.4.0 TF85xx
## Page 445

Samples / instructions ð You have successfully added a new method and can start the implementation. Extend or overwrite a method/property from the inherited class 1. Add a method/property to the class with the name of the method/property to be extended. METHOD Power : HRESULT VAR_INPUT b Command: BOOL; END_VAR VAR END_VAR 2. If you want to extend the method/property rather than overwrite it, you must call the base implementation at the appropriate place. METHOD Power : HRESULT VAR_INPUT b Command: BOOL; END_VAR VAR n Value: INT; END_VAR IF b Command THEN n Value := 10; END_IF SUPER^. Power(b Command); 3. Check the return value and the INPUT variables for consistency. You can view the base implementation by selecting the SUPER^. Method Name() and then pressing the F12 key. 4. Implement their own lines of code in the method. TF85xx Version: 1.4.0 445
## Page 446

Samples / instructions ð You have successfully extended a method/property. Removing a method/property from the inherited class Removing a method/property is only possible indirectly Note that you cannot completely remove a method/property! The steps described below only result in the call of the "removed" method/property not causing a reaction. 1. Add a method/property to the class with the name of the method/property to be removed. 2. Leave the contents of the method/property empty and do not call the SUPER^. Method(). METHOD Power : HRESULT VAR_INPUT b Command: BOOL; END_VAR VAR END_VAR 3. Optional: Add {attribute "hide"} to the method/property to hide the method/property in the development environment. ð You have successfully disabled a method/property. 8.1.2.3 Adapting inner procedures of a class (FB) Some classes contain inner flows/procedures which are to be extended/changed by inheritance levels or adapted by the application. This is realized with the FB_Adaptable Sequence [} 317] class. 1. Create a new class (FB) and let it inherit from a class with inner procedure. 446 Version: 1.4.0 TF85xx
## Page 447

Samples / instructions FUNCTION_BLOCK FB_Adaptable Class EXTENDS FB_Extruder VAR END_VAR 2. Overwrite the internal callback method with the integrated procedure. In the case of the FB_Extruder class, the internal procedure is implemented in the Power States() method. METHOD PROTECTED Power States VAR_INPUT END_VAR 3. Add a query to the callback method for its process step, whether you want to extend an existing sequence or add a new one, and if you have an existing implementation, whether you want to execute it or skip it. 4. Evaluate whether calling the existing implementation before or after its new implementation makes sense. Calling the SUPER^ method is only necessary if you continue to use the existing sequences. // React on existing sequence state IF a Seq Base Members[E_Extruder Power States.e Start Velo Feed]. Is Active THEN ; // Call return to replace exisiting implementation RETURN; END_IF // Define additional/replacing sequence state IF fb Set Prod Turnrate. Is Active THEN ; RETURN; END_IF Platzieren Sie den SUPER^ Aufruf der Callback Methode. 5. Define the condition at which the sequence is completed. // React on existing sequence state IF a Seq Base Members[E_Extruder Power States.e Start Velo Feed]. Is Active THEN // Set FB_Adaptable Sequence interface locally i Seq := a Seq Base Members[E_Extruder Power States.e Start Velo Feed]; IF b Additional Action THEN n Save Value To This := 10; // command a jump to a state that is not the default "next" element i Seq. Jump(fb Set Prod Turnrate); // feedback on finishing the sequence state i Seq. Done := TRUE; END_IF // Call return to replace exisiting implementation RETURN; END_IF // Define additional/replacing sequence state IF fb Set Prod Turnrate. Is Active THEN // Set FB_Adaptable Sequence interface locally i Seq := fb Set Prod Turnrate; IF b Additional Action THEN n Save Value To This := 10; i Seq. Done := TRUE; END_IF RETURN; END_IF // Call implementation of other sequence steps SUPER^. Power States(); 6. [Only when adding]: Instantiate an instance of type FB_Adaptable Sequence in the class with the name of the sequence. FUNCTION_BLOCK FB_Adaptable Class EXTENDS FB_Extruder VAR fb Set Prod Turnrate: FB_Adaptable Sequence; END_VAR 7. Insert the sequence in the initialization at the desired position. TF85xx Version: 1.4.0 447
## Page 448

Samples / instructions IF NOT F_Succeeded Hr(SUPER^. Init(), Init) THEN RETURN; END_IF fb Power States. Insert [} 320]( i Current := a Seq Base Members[E_Extruder Power States.e Master Mode], i New := fb Set Prod Turnrate, b Overwrite := FALSE); 8. Apply the changes to your target system and restart the PLC. ð You have successfully extended an inner procedure of a class. 8.1.2.4 Extending the HMI parallel class (FB) In many use cases, the number of displayed values on the surface is to be extended. For this purpose, the HMI parallel class can be extended so that the new values are accessible in the HMI environment at a suitable location. ü For the complete implementation the extension of the base class (FB) is necessary. 1. Perform steps 1 to 5 of Base class extension (FB) for the base class. 2. Create a new class (FB) and remove VAR_INPUT and VAR_OUTPUT. FUNCTION_BLOCK FB_Custom Axis Hmi VAR END_VAR 3. Add the class to be inherited to the class definition using the EXTENDS keyword. FUNCTION_BLOCK FB_Custom Axis Hmi EXTENDS FB_Axis Hmi VAR END_VAR 4. So that you can also address the class and the added elements via an interface, create an interface with the same name. INTERFACE I_Custom Axis Hmi 5. Let the interface inherit from the interface of the inherited class. INTERFACE I_Custom Axis Hmi EXTENDS I_Axis Hmi 6. Implement the interface in the previously created class (FB). FUNCTION_BLOCK FB_Custom Axis Hmi EXTENDS FB_Axis Hmi IMPLEMENTS I_Custom Axis Hmi VAR END_VAR 7. Instantiate the interface in the base class (FB). FUNCTION_BLOCK FB_Custom Axis EXTENDS FB_Axis IMPLEMENTS I_Custom Axis VAR i Custom Axis Hmi: I_Custom Axis Hmi; END_VAR 8. Overwrite the Set HMI() method of the base class. // Setter method for HMI-Class METHOD Set HMI : HRESULT VAR_INPUT ip Base Hmi: I_Base Hmi; // interface on hmi object END_VAR IF NOT __QUERYINTERFACE(ip Base Hmi, i Custom Axis Hmi) THEN Set HMI := F_Hresult Failure(E_Ads Err. DEVICE_INVALIDINTERFACE); RETURN; END_IF Set Hmi := S_OK; 9. Extend the Init() method and add a __QUERYINTERFACE() operation for the new interface. METHOD Init : HRESULT IF NOT __QUERYINTERFACE(i Custom Axis Hmi, i Axis Hmi) THEN 448 Version: 1.4.0 TF85xx
## Page 449

Samples / instructions RETURN; ELSIF NOT F_Succeeded Hr(SUPER^. Init(), Init) THEN RETURN; END_IF Add a new setting or command value for the HMI 10. Add a new property to the HMI class. PROPERTY New Hmi Property : LREAL 11. Add the Monitoring attribute to the declaration to make the property visible to the HMI. This makes the property visible even when the PLC is logged in. {attribute "monitoring" := "call"} PROPERTY New Hmi Property : LREAL 12. Copy the property to the interface with the same name. 13. Create a similarly named variable in the HMI class where the value can be cached. FUNCTION_BLOCK FB_Custom Axis Hmi EXTENDS FB_Axis Hmi IMPLEMENTS I_Custom Axis Hmi VAR f New Hmi Property: LREAL; END_VAR 14. Add the 'Tc Hmi Symbol. Hide' attribute to the declaration so that the variable is not seen by the HMI. This ensures that the variable is not mistakenly used by the HMI instead of the property. If you set the ADS mapping in the HMI to Use whitelisting, you can basically hide all variables. To continue showing the HMI classes, you must add the {attribute 'Tc Hmi Symbol. Show Recursively'} to the declaration. FUNCTION_BLOCK FB_Custom Axis Hmi EXTENDS FB_Axis Hmi IMPLEMENTS I_Custom Axis Hmi VAR {attribute 'Tc Hmi Symbol. Hide'} f New Hmi Property: LREAL; END_VAR 15. Implement the property write and read operation in the Get and Set method. ð You have successfully added a property. Making an existing property of the base class accessible to the HMI 1. Instantiate an interface of the base class type in the HMI parallel class. FUNCTION_BLOCK FB_Custom Axis Hmi EXTENDS FB_Axis Hmi IMPLEMENTS I_Custom Axis Hmi VAR {attribute "Tc Hmi Symbol. Hide"} i Custom Axis: I_Custom Axis; {attribute "Tc Hmi Symbol. Hide"} f New Hmi Property: LREAL; END_VAR 2. Add the Init() method to the HMI class. // Init method for linking to a control class (FB) METHOD Init : HRESULT VAR_INPUT ip Base: I_Base; // Base interface on linked control class (FB) END_VAR 3. In the Init() method, perform a __QUERYINTERFACE() operation from the base interface passed to the last interface instantiated. Init := F_Hresult Failure(E_Ads Err. DEVICE_NOTINIT); RETURN(NOT __QUERYINTERFACE(ip Base, i Custom Axis)); RETURN(NOT F_Succeeded Hr(SUPER^. Init(ip Base), Init)); Init := F_Hresult Success(NOERR); 4. [If inheriting from FB_Base Hmi] Implement the call to the HMI-Init() in the Init() method of the base class. TF85xx Version: 1.4.0 449
## Page 450

Samples / instructions Init:=F_Hresult Failure(E_Ads Err. DEVICE_NOTINIT); IF i Custom Axis Hmi = 0 THEN RETURN; ELSIF NOT F_Succeeded Hr(i Custom Axis Hmi. Init(THIS^), Init) THEN RETURN; ELSIF NOT F_Succeeded Hr(SUPER^. Init(), Init) THEN RETURN; END_IF 5. Add a new property to the HMI class. PROPERTY Second New Hmi Property : LREAL 6. Add the Monitoring attribute to the declaration to make the property visible to the HMI. This makes the property visible even when the PLC is logged in. {attribute "monitoring" := "call"} PROPERTY New Hmi Property : LREAL 7. Copy the property to the interface with the same name. 8. Program the access to the property of the interface in the Get (and if necessary Set) method of the property. IF i Custom Axis <> 0 THEN Second New Hmi Property := i Custom Axis. Existing Value; END_IF 9. For further properties with reference access, steps 1 to 4 are omitted accordingly. ð You have successfully added a property with reference access to the main class. 8.1.3 Axes 8.1.3.1 Creating and initializing NC axis There are several ways to create an NC axis. One possible procedure is shown below as an example. 1. Create the three instances of the following objects: fb Carriage Axis (FB_Axis Nc Base): TF8560 axis (here NC) fb Carriage (FB_Carriage): Specifically implemented axis type (here carriage axis) fb Carriage Hmi (FB_Carriage Hmi): Parallel HMI interface of the axis type (here carriage axis) {attribute 'qualified_only'} VAR_GLOBAL {attribute 'Tc Hmi Symbol. Hide'} {attribute 'Tc Context Name':='Motion Task'} fb Carriage Axis: FB_Axis Nc Base('', Tc3_Plastic Base App Static Params.cn Max Ptp Points, 0, 0 , 0); {attribute 'Tc Hmi Symbol. Hide'} fb Carriage: FB_Carriage; fb Carriage Hmi: FB_Carriage Hmi; END_VAR 450 Version: 1.4.0 TF85xx
## Page 451

Samples / instructions 2. Create/link an NC axis in the project to the created instance of the fb Carriage axis. If the TF8560 axes from the PLC do not appear in the selection dialog, the project has not been created. Only once the PLC project has been successfully created after the instance has been created, the instances become visible in the mapping. 3. It is recommended that you create a PLC task with the same cycle time of the NC (default 2 ms) for the drive control part (if an axis does not already exist). 4. Assign a TF8560 axis to the specific axis in the PLC. Axes.fb Carriage. Set Axis Ref(Axes.fb Carriage Axis); 5. Add the axis to the runtime. Tasks.fb Runtime. Append(Axes.fb Carriage, Axes.fb Carriage Hmi); If you do not want to work with FB_Base Runtime, the following further steps are necessary: 6. Assign the HMI interface to the specific axis. Axes.fb Carriage. Set HMI(Axes.fb Carriage Hmi); 7. Initialize the axis with a single call to the Init() method and check the return values. IF NOT b Init THEN b Init := TRUE; Axes.fb Carriage. Set Axis Ref(Axes.fb Carriage Axis); Axes.fb Carriage. Set HMI(Axes.fb Carriage Hmi); hr := Axes.fb Carriage. Init(); b Init Failed := FAILED(hr); END_IF 8. After successful initialization, call the Core Cyclic() method of the axis with a fast task. IF NOT PRG_Axis Application.b Init Failed THEN Axes.fb Carriage. Core Cyclic(); END_IF 9. In parallel with the Core Cyclic() method, call the Cyclic() method in a slower task and initialize the default parameterization using the Param Init() method. TF85xx Version: 1.4.0 451
## Page 452

Samples / instructions VAR b Init: BOOL; b Init Failed: BOOL; b Param Init: BOOL; hr: HRESULT; END_VAR IF NOT b Init THEN b Init := TRUE; Axes.fb Carriage. Set Axis Ref(Axes.fb Carriage Axis); Axes.fb Carriage. Set HMI(Axes.fb Carriage Hmi); hr := Axes.fb Carriage. Init(); b Init Failed := FAILED(hr); ELSIF NOT b Init Failed THEN IF NOT b Param Init THEN hr := Axes.fb Carriage. Param Init(); b Param Init := SUCCEEDED(hr); END_IF Axes.fb Carriage. Cyclic(); END_IF 8.1.3.2 Creating and initializing NC transformation axis Several steps are necessary to create a new NC transformation axis. One possible procedure is shown below as an example. 1. Create the three instances of the following objects: fb Clamp Axis (FB_Axis Nc Trafo Base): TF8560 axis (here transformation NC) fb Clamp (FB_Clamp): Specifically implemented axis type (here clamping unit) fb Clamp Hmi (FB_Clamp Hmi): Parallel HMI interface of the axis type (here clamping unit). {attribute 'qualified_only'} VAR_GLOBAL {attribute 'Tc Hmi Symbol. Hide'} {attribute 'Tc Context Name':='Motion Task'} fb Clamp Axis: FB_Axis Nc Trafo Base('', Tc3_Plastic Base App Static Params.cn Max Ptp Points, Tc 3_Plastic Base App Static Params.cn No Of Trafo Points, 0, 0, 0); {attribute 'Tc Hmi Symbol. Hide'} fb Clamp: FB_Clamp; fb Clamp Hmi: FB_Clamp Hmi; END_VAR 2. Create/link two NC axes in the project for the drive and load sides of the created instance of the fb Clamp axis. If the TF8560 axes from the PLC do not appear in the selection dialog, the project has not been created. Only once the PLC project has been successfully created after the instance has been created, the instances become visible in the mapping. 452 Version: 1.4.0 TF85xx
## Page 453

Samples / instructions 3. Set the following parameterization on the NC axis of the load side: • Axes > Clamp Load > Settings > Axis Type: = Standard • Axes > Clamp Load > Enc > NC-Encoder > Type: = Encoder SSI • Axes > Clamp Load > Enc > Parameter > Scaling Factor Numerator = 0.0001 • Axes > Clamp Load > Enc > Parameter > Scaling Factor Denominator = 1.0 • Axes > Clamp Load > Enc > Parameter > Position Bias = -1000.0 • Axes > Clamp Load > Enc > Parameter > Encoder Mode = POSVELOACC And map the following variables additionally between NC and PLC: • Axes > Clamp Load > Enc. Inputs. In.n Data In1 <--> GVL_Xyz.fb Nc Trafo Axis.fb Local Nc.fb Actuals.n Data In1 • Axes > Clamp Load > Enc. Inputs. In.n State4 <--> GVL_Xyz.fb Nc Trafo Axis.fb Local Nc.fb Actuals.n State4 4. It is recommended that you create a PLC task with the same cycle time of the NC (default 2 ms) for the drive control part (if an axis does not already exist). 5. Additionally, instantiate a Table Generator in your application to create a transformation table. VAR fb Table Gen: FB_Table Generator Clamp Standard_1; END_VAR 6. Assign a TF8560 axis to the specific axis in the PLC. Axes.fb Clamp. Set Axis Ref(Axes.fb Clamp Axis); 7. Assign the Table Generator to the specific axis in the PLC. Axes.fb Clamp. Specific. Trafo. Table Generator := fb Table Gen; 8. Define the geometry of the mechanics to use the transformation function. In the case of the clamping unit, a standard clamping mechanism is parameterized in this sample. Method Define Table : HRESULT // Assign geometries fb Table Gen. Base Distance := 672.0; // [mm] fb Table Gen. Drive Arm := 228.0; // [mm] fb Table Gen. Load Arm := 325.2; // [mm] fb Table Gen. Tool Arm_1 := 602.52; // [mm] fb Table Gen. Tool Arm_2 := 455.4; // [mm] fb Table Gen. Tool Arm_3 := 114.0; // [mm] fb Table Gen. Tool Arm_Angle := 216.0; // [mm] fb Table Gen. Tool Offset := 288.0; // [mm] fb Table Gen. Drive Low End := 0.0; // [°] fb Table Gen. Drive High End := 180.0; // [°] // calculate resulting point table IF NOT fb Table Gen. Define Table() THEN Define Table:= F_Hresult Failure(E_Ads Err. DEVICE_INVALIDPARM); RETURN; END_IF TF85xx Version: 1.4.0 453
## Page 454

Samples / instructions // copy parameter to machine data file fb Table Gen. Write To Param List(); // activates table in TF8560 axis F_Succeeded Hr(Axes.fb Clamp. Specific. Trafo. Assign Table To Axis(FALSE), Define Table); // copies table drive ends to nc-Softends F_Succeeded Hr(Axes.fb Clamp. Specific. Trafo. Copy Table Drive Ends(FALSE, FALSE), Define Table); 9. Add the axis to the runtime. Tasks.fb Runtime. Append(Axes.fb Clamp, Axes.fb Clamp Hmi); If you do not want to work with FB_Base Runtime, the following further steps are necessary: 10. Assign the HMI interface to the specific axis. Axes.fb Clamp. Set HMI(Axes.fb Clamp Hmi); 11. Initialize the axis with a single call to the Init() method and check the return value. IF NOT b Init THEN b Init := TRUE; Axes.fb Clamp. Set Axis Ref(Axes.fb Clamp Axis); Axes.fb Clamp. Set HMI(Axes.fb Clamp Hmi); hr := Axes.fb Clamp. Init(); b Init Failed := FAILED(hr); END_IF 12. After successful initialization, call the Core Cyclic() method of the axis with a fast task. IF NOT PRG_Axis Application.b Init Failed THEN Axes.fb Clamp. Core Cyclic(); END_IF 13. In parallel with the Core Cyclic() method, call the Cyclic() method in a slower task and initialize the default parameterization using the Param Init() method. VAR b Init: BOOL; b Init Failed: BOOL; b Param Init: BOOL; hr: HRESULT; fb Table Gen: FB_Table Generator Clamp Standard_1; END_VAR IF NOT b Init THEN b Init := TRUE; Axes.fb Clamp. Set Axis Ref(Axes.fb Clamp Axis); Axes.fb Clamp. Specific. Trafo. Table Generator := fb Table Gen; Axes.fb Clamp. Set HMI(Axes.fb Clamp Hmi); hr := Axes.fb Clamp. Init(); b Init Failed := FAILED(hr); ELSIF NOT b Init Failed THEN IF NOT b Param Init THEN hr := Define Table(); b Param Init := SUCCEEDED(hr); hr := Axes.fb Clamp. Param Init(); b Param Init := b Param Init AND SUCCEEDED(hr); END_IF Axes.fb Clamp. Cyclic(); END_IF 8.1.3.3 Integrating manual function into an axis A manual function can be created in several places in the application. The following sample explains how a manual function for moving and switching on the axis can be integrated into it. 1. Extend an existing class by inheritance. In this sample, the FB_Carriage class is used for this purpose. FUNCTION_BLOCK FB_Custom Carriage EXTENDS FB_Carriage 454 Version: 1.4.0 TF85xx
## Page 455

Samples / instructions 2. Instantiate the FB_Manual Xyz manual function in the class of the axis. This is not necessary for the manual function of the forward/backward movement, since this is already instantiated by the FB_Carriage class. FUNCTION_BLOCK FB_Custom Carriage EXTENDS FB_Carriage VAR fb Manual Power: FB_Manual Power; END_VAR 3. The FB_Carriage Hmi class used here already provides an HMI interface for both manual functions. For more manual functions, you need to extend the class with respective instances of the FB_Manual Function Hmi class. 4. Afterwards, the newly instantiated manual function must be initialized. For convenience, you can use the F_Succeeded Hr() function to check the return value of the initialization function for success and copy it to a local variable. METHOD Init : HRESULT IF NOT F_Succeeded Hr(fb Manual Power. Init(THIS^, i Carriage Hmi), Init) THEN RETURN; END_IF Init := SUPER^. Init(); 5. To process the inner algorithms of the manual functions, you must call the respective cycle methods in Cyclic(). METHOD Cyclic fb Manual Power. Cyclic(); fb Manual For Back. Cyclic(); 6. In the same method you can additionally define when the manual function should be activated for use and/or which method is called by the manual function. fb Manual Power. Enable := b Manual Mode OR b Setup Mode OR b Automatic Mode; fb Manual Power. Cyclic(); fb Manual For Back. Enable := b Manual Mode OR b Setup Mode; fb Manual For Back. Cyclic(); IF b Setup Mode THEN IF fb Manual For Back. Trig Cmd Work Pos. RQ THEN Jog Negative(TRUE); ELSIF fb Manual For Back. Trig Cmd Work Pos. FQ THEN Jog Negative(FALSE); ELSIF fb Manual For Back. Trig Cmd Base Pos. Q THEN Jog Positive(fb Manual For Back. Trig Cmd Base Pos. Q); END_IF ELSIF b Manual Mode THEN IF fb Manual For Back. Trig Cmd Work Pos. Q THEN Move Ptp(1, fb Manual For Back. Trig Cmd Work Pos. Q, 8); ELSIF fb Manual For Back. Trig Cmd Base Pos. Q THEN Move Ptp(2, fb Manual For Back. Trig Cmd Base Pos. Q, 8); END_IF END_IF 8.1.4 Data management 8.1.4.1 Creating machine data At the start time of a project, an initial set of machine data must be created so that the parameters determined during commissioning can be persistently stored. TF85xx Version: 1.4.0 455
## Page 456

Samples / instructions Error messages in the Event Logger All runtime objects attached to the FB_Base Runtime will inevitably trigger an error message under the following conditions: • All Init() methods have been successfully executed • No machine data file exists yet • FB_Base Runtime. Disable Md Init is not set ü For the sequence of steps described below, the use of the FB_Base Runtime is assumed. 1. Start the PLC runtime. 2. Call the FB_Base Runtime. Md Save All() method once. 3. Wait for the saving process to be completed. Depending on the amount of data to be saved, the processing time may vary. In PLC online mode the variable b Md Save All can be monitored to check the completion of the saving process. ð You have successfully generated a first set of machine data 8.1.4.2 Integrating recipe release Since in certain operating scenarios (e.g. in automatic mode) no recipes are to be loaded into the PLC, the release of the recipe management must be given by the PLC. ü The recipe release requires an initialization after machine start. For this purpose, the property FB_Plc State To Hmi. Plc Initialized must be set. 1. Write the Boolean condition on the following property: FB_Plc State To Hmi. Product Change Enable ð If the Boolean condition is true, recipes can be loaded into the PLC. 8.1.5 Temperature control 8.1.5.1 Instantiating and initiating temperature control For certain applications, only the temperature control should be used from the scope of the Twin CAT 3 Plastic Application. In this, but also in the normal use case, the temperature controller must be capable of being instantiated and initiated individually for this purpose. In the following sample, we will go through this process step by step. 1. Create a new task with a cycle time of 25 ms. This is not mandatory, but - based on experience - recommended. 2. Create an instance of FB_Temperature and FB_Temperature Hmi and assign the mapping to the newly created task. 456 Version: 1.4.0 TF85xx
## Page 457

Samples / instructions {attribute "qualified_only"} VAR_GLOBAL {attribute "Tc Hmi Symbol. Hide"} {attribute "Tc Context Name":="Temp Task"} fb Temperature: FB_Temperature; fb Temperature Hmi: FB_ Temperature Hmi; END_VAR 3. Initialize the temperature classes. The following options are available for this: • We recommend the use of FB_Base Runtime [} 270]. It is used to run through the initialization steps automatically. To do this, you only need to create an instance of the runtime (if it does not already exist), define the cycle calls and transfer the temperature classes to the runtime. VAR_GLOBAL fb Runtime: FB_Base Runtime; END_VAR // Program with its task call referenced to Plc Task PROGRAM Plc Main // Build list of classes that should be called cyclically by the runtime _Build(); // Standard call of Cyclic fb Runtime. Cyclic(); // Program with its task call referenced to Temp Task PROGRAM Temp Main // Slow call for Temperature fb Runtime. Temperature Cyclic() // Method to define the runtime objects METHOD _Build VAR_INST b Build: BOOL; // Latch the Build only gets executed once END_VAR IF NOT b Build THEN b Build := TRUE; // Append temperature classes to be initialized and called by the runtime fb Runtime. Append(fb Temperature, fb Temperature Hmi); // Further objects to append fb Runtime. Append(fb Other Object, fb Other Object Hmi); END_IF • Alternatively, you can also manually connect and initialize the objects. To do this, call the Set HMI() and Init() methods of the FB_Temperature and check the return value for successful execution. If this is the case, you can call the Param Init() method for parameter initialization and the cycle method. VAR b Init: BOOL; b Init Failed: BOOL; b Param Init: BOOL; hr: HRESULT; END_VAR IF NOT b Init AND NOT b Init Failed THEN hr := fb Temp Ctrl. Set HMI(fb Temp Ctrl Hmi); hr := fb Temp Ctrl. Init(); IF SUCCEEDED(hr) THEN b Init := TRUE; ELSE b Init Failed := TRUE; END_IF ELSIF b Init THEN IF NOT b Param Init THEN hr := fb Temp Ctrl. Param Init(); IF SUCCEEDED(hr) THEN TF85xx Version: 1.4.0 457
## Page 458

Samples / instructions b Param Init := TRUE; END_IF END_IF fb Temp Ctrl. Cyclic(); END_IF 8.1.5.2 Mapping and configuration of temperature zones A few individual steps must be taken in the engineering to commission the temperature control. After that, setup and configuration is possible purely on the user interface. The following step-by-step instructions show you the setting necessities in Twin CAT Engineering. 1. Configure the usable number of zones in the Tc2_Pfw Lib_Processing. References > Tc2_Pfw Lib_Processing > Global Variables > Tc Pfw_Parameter_Scaling > cn Pfw Temp Ctrl Last The library included in the Tc3_Plastic Base Application cannot be adjusted! It is necessary to add the Tc2_Pfw Lib_Processing library to your project to adjust the number of temperature zones. 2. Link their analog inputs of the temperature sensors to the array .in_Pfw Temp Ctrl Input[]. After setting the number of zones, the project must be created successfully so that the mapping is updated, otherwise the mapping will not have the set number of zones. 3. Link your digital outputs of the heating and cooling relays to the array .out_pfw Temp Ctrl Output[]. Cooling relays must be mapped to . Sel Out Neg. 4. Group the linear arrangement of zones to match their application. You have the following options here: • A contiguous section of the arrangement shall be assigned to a group of temperature zones. In this sample, zones 1 to 10 are assigned to group 1. hr := fb Temperature. Link Group(n Start Idx := 1, n End Idx := 10, n Group Idx := 1, b Overwrite := FAL SE); • The devices of a temperature zone group are scattered over the array and must be individually assigned to the group. In this sample, zone 12 and zone 20 are assigned to group 2. hr := fb Temperature. Link Zone(n Linear Idx := 12, n Group Idx := 2, 0, b Overwrite := FALSE); hr := fb Temperature. Link Zone(n Linear Idx := 20, n Group Idx := 2, 0, b Overwrite := FALSE); 8.1.5.3 Commissioning of the temperature control The commissioning of the temperature control includes both a Twin CAT Engineering and a part to be executed at runtime. This sample summarizes the steps that are executed at runtime. 458 Version: 1.4.0 TF85xx
## Page 459

Samples / instructions Commissioning via HMI recommended This sample describes the procedure solely via the PLC path. Use the section Commissioning of the temperature control [} 464] for commissioning using the HMI. Before the subsequent steps, the preparation of the Twin CAT project has to be done according to the example from section Mapping and configuration of temperature zones [} 458]. Set the appropriate input and output signal types and devices for all your temperature zones Hardware parameterization without grouping This step refers to the linear mapping of the TF8540 library. Already configured groupings are ignored in this step. 1. Create a program section to assign the parameters once. 2. Assign the following parameters according to your hardware configuration. // set cooling output type to "no cooling" fb Temperature. Channels(1). Output Sel_C := E_Tc Pfw_Tctrl Out Select.e Tc Pfw Tc Out_No Signal; // set heating output type to "pwm" fb Temperature. Channels(1). Output Sel_H := E_Tc Pfw_Tctrl Out Select.e Tc Pfw Tc Out_PWM; // set sensor terminal type to "EL3314" fb Temperature. Channels(1). Temp Sens Term := E_Tc Pfw_Terminal Type.e Tc Pfw Term T_EL331x; // set sensor type to "Thermo Couple Typ K" fb Temperature. Channels(1). Sensor Type := E_Tc Pfw_Temp Sens Type.e Tc Pfw Temp Sens T_TC_K; // set terminal channel of the sensor to "Channel 1" fb Temperature. Channels(1). Term Channel := 1; 3. Repeat step 2 for all channels used. If necessary, use a FOR loop or the FB_Temperature [} 273]. Create Default Params() [} 276] method to assign an identical parameter for multiple zones. FOR i := 3 TO MIN(5, fb Temperature Hmi. Count Pfw Channels) DO fb Temperature. Channels(i). Output Sel_C := E_Tc Pfw_Tctrl Out Select.e Tc Pfw Tc Out_PWM; END_FOR 4. Execute the created code segment once. 5. Log on to the controller. 6. Save the parameters on your target device via fb Temperature. Machine Data. Save. Check the reaction of the hardware inputs on the machine 1. Log on to the controller. 2. Go in the tree structure fb Temperature.a Groups[…].a Zones[…] to the first used zone. 3. Heat the sensor of the zone via an external heat source. TF85xx Version: 1.4.0 459
## Page 460

Samples / instructions 4. Observe via the value Actual Temperature whether the temperature change occurs in the expected zone. Repeat step 2 to 4 for each zone. Check the response of the hardware outputs on the machine Switching on a zone does not generate a power level Make sure that at the time of this step the temperature control has been enabled by the PLC! • To enable all zones execute the method FB_Temperature [} 273]. Enable All(…) [} 277]. • To enable exactly one group execute the method FB_Temperature [} 273]. Groups(x) [} 282]. Enable(…). 1. Switch on a single temperature zone via fb Temperature.a Groups[…]. Zones[…]. Enable. 2. Check if in the same zone the value of the variable Heating = TRUE and the value of the variable Actual Temperature changes. 3. Switch the zone off again as soon as possible to keep the temperature rise to a minimum. 460 Version: 1.4.0 TF85xx
## Page 461

Samples / instructions 4. Repeat steps 1 to 3 for each zone. Start the automatic tuning of the control parameters 1. Activate the tuning of a group via fb Temperature Hmi.a Groups[…]. Do Tune = TRUE. 2. Execute step 1 for all groups to be commissioned. Monitor the automatic tuning until it completes successfully 1. As soon as the value of the variable fb Temperature Hmi.a Groups[…]. Tuning Active is reset, the tuning of the group is finished. TF85xx Version: 1.4.0 461
## Page 462

Samples / instructions 2. The value of the variable fb Temperature Hmi.a Groups[…]. Tuning Done indicates whether the tuning was successful. ð You have successfully commissioned your temperature control. 8.1.6 Central operating function A central operating function, such as the incremental encoder of the CP2219-1025-0030 [} 473] Blow Molding Panel PC, can always be connected to exactly one task. The Manual Operation Control in the HMI allows you to select this central operating function. On the PLC side, it must also be defined how the interaction should take place logically. 1. Implement the interfaces I_Adaptable Seq Ext [} 322] and an interface derived from I_Runtime Interface [} 272] in a class (here FB_Sample as an example). This class represents the location where you want to program the manual function. FUNCTION_BLOCK FB_Sample IMPLEMENTS I_Adaptable Seq Ext, I_One Task Interface 2. Create an instance of FB_Manual Wheels [} 175] in the FB_Sample. 3. Optional (if not already available): Also create general manual functions for axes, for example. VAR fb Manual Wheel: FB_Manual Wheel; fb Manual1Hmi: FB_Manual Function Hmi; fb Manual1: FB_Manual Base Work; fb Manual2Hmi: FB_Manual Function Hmi; fb Manual2: FB_Manual Base Work; END_VAR 4. Instantiate your class (here still FB_Sample). 5. Optional (if not already present): Also create instances of type FB_CP22xx_1025 [} 322] and FB_CP22xx_1025Hmi for integration of the panel PC I/O. VAR fb Sample: FB_Sample; fb Panel: FB_CP22xx_1025; fb Panel Hmi: FB_CP22xx_1025Hmi; END_VAR 6. Append the instance of FB_Sample to the runtime. 7. Optional (if not already present): Also append the instances of the panels to the runtime. fb Runtime. Append(fb Sample, 0); fb Runtime. Append(fb Panel, fb Panel Hmi); 8. Initialize manual functions (including those of the wheel) in the Init()-method of FB_Sample. 9. Then assign the class FB_Sample to the external implementation of the wheel manual function. METHOD Init : HRESULT F_Succeeded Hr(fb Manual1. Init(fb Axis1, fb Manual1Hmi), Init); F_Succeeded Hr(fb Manual2. Init(fb Axis2, fb Manual2Hmi), Init); 462 Version: 1.4.0 TF85xx
## Page 463

Samples / instructions F_Succeeded Hr(fb Manual Wheel. Init(fb Panel. Wheel), Init); fb Manual Wheel. External State := THIS^; 10. Insert the cycle call of the manual functions into a Cyclic()-method of FB_Sample. 11. Also specify when the manual function should be selectable. METHOD Cyclic fb Manual. Enable1 := b Manual Mode OR b Setup Mode fb Manual. Enable2 := b Manual Mode OR b Setup Mode fb Manual Wheel. Enable := b Manual Mode OR b Setup Mode; fb Manual Wheel. Cyclic(); fb Manual1. Cyclic(); fb Manual2. Cyclic(); 12. Add a new method called Ext Adapt Seq() to the class FB_Sample so that it can be called from fb Manual Wheel. METHOD Ext Adapt Seq VAR_INPUT b Init: BOOL; // TRUE, if the external states should insert themse lf to i Master i Master: I_Adaptable Seq Master; // Interface on the state master END_VAR 13. In this new method, define an initialization with the transfer of the manual functions that are to be selectable from the wheel. IF b Init THEN fb Manual Wheel. Append Manual(fb Manual1); fb Manual Wheel. Append Manual(fb Manual2); ELSE // Wheel control logic will be placed here END_IF 14. Program the logic of your manual function. The following sample implements a Jog command with control of the Override via the position of the wheel. METHOD Ext Adapt Seq VAR_INPUT b Init: BOOL; // TRUE, if the external states should insert thems elf to i Master i Master: I_Adaptable Seq Master; // Interface on the state master END_VAR VAR iq Axis: I_Axis; f Override: LREAL; i Seq: I_Adaptable Seq Itf; END_VAR VAR_INST iq Axis Last: I_Axis; fb Trig Cmd: FB_Trigger; END_VAR IF b Init THEN // ... ELSE // fetch selected manual function IF fb Manual1. State. Is Active THEN iq Axis := fb Axis1; i Seq := fb Manual1. State; ELSIF fb Manual2. State. Is Active THEN iq Axis := fb Axis2; i Seq := fb Manual2. State; ELSE iq Axis := 0; END_IF // trigger on selecting and changing fb Trig Cmd. CLK := iq Axis <> 0 AND iq Axis = iq Axis Last; fb Trig Cmd. Cyclic(); // on selecting a function IF fb Trig Cmd. RQ THEN // setup wheel behaviour, see FB_CP22xx_Wheel [} 326] fb Panel. Wheel. Leds. Guiding Mid := 0; TF85xx Version: 1.4.0 463
## Page 464

Samples / instructions fb Panel. Wheel. Leds. Guiding Mid Window := 1.0; fb Panel. Wheel. Leds. Guiding Max := 100.0; fb Panel. Wheel. Leds. Guiding Min := -100.0; fb Panel. Wheel. Leds. Fill Mode := TRUE; fb Panel. Wheel. Enc. Limit Overflow := TRUE; fb Panel. Wheel. Enc. Position Scale := 2; fb Panel. Wheel. Enc. Set Zero(); fb Panel Hmi. Wheel Claimed := TRUE; // on active usage ELSIF fb Trig Cmd. CLK THEN // stop axis on wheel pressing IF fb Panel. Wheel. Press. In THEN fb Panel. Wheel. Enc. Set Zero(); END_IF // hold wheel --> deselect manual function IF fb Panel. Wheel. Press. Q THEN i Seq. Jump(i Master. Idx(2)); // Idle, see FB_Manual Wheel [} 175]. States() [} 177] i Seq. Done := TRUE; RETURN; END_IF // avoid commanding opposite direction before axis has stopped IF iq Axis. Axis. Jog. Is Jogging M THEN fb Panel. Wheel. Enc. Position Max := 0; ELSIF iq Axis. Axis. Jog. Is Jogging P THEN fb Pannel. Wheel. Enc. Position Min := 0; ELSIF NOT iq Axis. Axis. Jog. Is Stopping AND fb Panel. Wheel. Enc. Velocity = 0 THEN fb Panel. Wheel. Enc. Position Max := 100.0; fb Panel. Wheel. Enc. Position Min := -100.0; END_IF // apply override f Override := LIMIT(-100.0, fb Panel. Wheel. Enc. Position, 100.0); fb Panel. Wheel. Leds. Guiding Value := f Override; iq Axis. Axis. Power. Override := ABS(f Override); // determine direction IF f Override > 0 THEN iq Axis. Jog Positive(TRUE); ELSIF f Override < 0 THEN iq Axis. Jog Negative(TRUE); ELSE iq Axis. Jog Negative(FALSE); iq Axis. Jog Positive(FALSE); END_IF // on leaving the selection ELSIF fb Trig Cmd. FQ THEN iq Axis Last. Axis. Power. Override := 100.0; iq Axis Last. Jog Negative(FALSE); iq Axis Last. Jog Positive(FALSE); fb Panel Hmi. Wheel Claimed := FALSE; fb Panel. Wheel. Leds. Fill Mode := FALSE; fb Panel. Wheel. Leds. Guiding Value := -1000; END_IF iq Axis Last := iq Axis; END_IF 8.2 Commissioning of the temperature control The commissioning of the temperature control includes both a Twin CAT Engineering and a part to be executed at runtime. This sample summarizes the steps that are executed at runtime. Before the subsequent steps, the preparation of the Twin CAT project has to be done according to the example from section Mapping and configuration of temperature zones [} 458]. 464 Version: 1.4.0 TF85xx
## Page 465

Samples / instructions Set the appropriate input and output signal types and devices for all your temperature zones Hardware parameterization without grouping This step refers to the linear mapping of the TF8540 library. Already configured groupings are ignored in this step. 1. Log in with administrator rights (default user = 4th administrator, password = 4). 2. Navigate via the navigation (≡-symbol) to Temperature > Grouping. 3. Group thermally connected zones into one group each (in the order shown in the following diagram). 3 1 2 4. Navigate to Parameters > Temperature. 5. Set your hardware configuration for the first mapped zone in the marked parameters (1 - 5). 6. Repeat steps 4 and 5 for all zones to be used using the marked button (6). 7. Save your settings via the marked button (7). TF85xx Version: 1.4.0 465
## Page 466

Samples / instructions 1 2 3 4 5 6 7 Check the reaction of the hardware inputs on the machine 1. Navigate via the navigation to Temperature > Configuration. 2. Heat the sensor of a zone via an external heat source. 3. Observe if the temperature change occurs in the expected zone. 4. Repeat steps 2 and 3 for each zone. 466 Version: 1.4.0 TF85xx
## Page 467

Samples / instructions Check the response of the hardware outputs on the machine Switching on a zone does not generate a power level Make sure that at the time of this step the temperature control has been enabled by the PLC! • To enable all zones execute the method FB_Temperature [} 273]. Enable All(…) [} 277]. • To enable exactly one group execute the method FB_Temperature [} 273]. Groups(x) [} 282]. Enable(…). 1. Switch on an individual temperature zone via the slider (1). 2. Check if the power level (2) increases and the actual value (3) of the activated zone changes. 3. Switch the zone off again as soon as possible to keep the temperature rise to a minimum. 4. Repeat steps 1 to 3 for each zone. TF85xx Version: 1.4.0 467
## Page 468

Samples / instructions 1 2 3 Start the automatic tuning of the control parameters You should still be on the Temperature > Configuration page. 1. Select the fourth tab (1) in the slider area and start tuning using the corresponding button (2) of the group. 2. Execute step 1 for all groups to be commissioned. 1 2 Monitor the automatic tuning until it completes successfully 1. As soon as the display element on the button is no longer yellow, the tuning is finished. 2. If the display element on the button is green, the tuning has been completed successfully. You have successfully commissioned your temperature control. 468 Version: 1.4.0 TF85xx
## Page 469

Samples / instructions 8.3 Creating and using the Zone Image Layout Config server symbol For storage and reuse [} 413] of layouts created on the Layout [} 424] page of the temperatures, one instance of the Zone Image Layout Config server symbol is required per layout. Creation of the server symbol For each required layout a single position in the Zone Image Layout Config List array is needed For this purpose it is recommended to create a dynamic array of this type. This is done in the Twin CAT HMI configuration window: 1. Creation of the data type 2. Creation of a server symbol under the category Tc Hmi Srv of the corresponding data type 3. Setting the server symbol as persistent using the checkbox (Persist). ð Server symbol is created. TF85xx Version: 1.4.0 469
## Page 470

Samples / instructions Using the server symbol in the configuration mode of the Zone Image Layout control 1. Select Zone Image Layout control in the Toolbox and drag it to a content. 2. Set Mode parameter under the category Configuration to Config. 3. For example, using a Tc Hmi Combobox control to configure the number of layouts available in Live View via the .on Selection Changed event. 4. For this purpose, a new CASE can be created with the value 4 for the Selected Id parameter of the combo box. 5. Copy and paste the Create Binding function into the new CASE and select a different array location such as Zone Image Layout Config List[3] for the symbol transfer parameter. ð Server symbol is used correctly in configuration mode. Using the server symbol in display mode 1. Select Zone Image Layout control in the Toolbox and drag it to a content. 2. Under the Configuration category, associate the Zone Image Layout Config parameter with one of the array locations of the Zone Image Layout Config List server symbol and set the Mode parameter to View. 3. The set width and height of the Zone Image Layout control must be set in the server symbol (Layout Height, Layout Height Unit, Layout Width and Layout Width Unit). To do this, right-click on the server symbol in the Twin CAT HMI Configuration window and adjust the default value. ð Server symbol is used correctly in display mode. 8.4 Logging user changes To log user changes using TF8550 Nu Get packages, the following steps must be observed and set in the Twin CAT HMI project: 1. Setting the configurator control: ◦ Create an instance of type FB_User Logging Hmi [} 114] in the PLC project if it does not already exist. ◦ Map the PLC symbol in the HMI project. 470 Version: 1.4.0 TF85xx
## Page 471

Samples / instructions ◦ Include the symbol at User Logger Symbol property of the Plc Symbols category of the Configurator control [} 436]. 2. Logging controls from the TF8550 Nu Get packages: ◦ Install Nu Get package Beckhoff. Twin CAT. HMI. Controls or Beckhoff. Twin CAT. HMI. Temperature. ◦ In the controls, set the Log Changes By User property from the User Changes Logging category to TRUE. 3. Logging further controls: ◦ Select a meaningful event of the control for which logging is to take place. ◦ Use function Log User Changes or Log User Changes Symbol from the Nu Get package Beckhoff. Twin CAT. HMI. Controls and set transfer parameters. 4. Applying User Logging Viewer control: ◦ Drag User Logging Viewer control from the toolbox onto a content. ◦ Transfer the path containing the User Log files to the control under the Path property of the File Config category using the virtual directories. ◦ The files are created by default under the path C:\Data\Machine\User Log (the path can be adjusted via the PLC). Available since version 12.7.0 8.5 Optimizing mappings in the Twin CAT HMI project When mappings are created in the Twin CAT HMI project, a name is automatically assigned to the mapping. It consists of the PLC used, the name of the GVL and the instance name of the FB. This symbol name is, for example, PLC1. Blowpin.fb Blowpin Hmi for the blow pin in the Plastic Application project. Since the symbol names are used as bindings in the entire Twin CAT HMI project and the subordinate variables and properties are accessed during a binding, this binding can become quite long. This makes it difficult to keep an overview, wastes storage space and in some cases can have an impact on performance. The name of the symbol should therefore be chosen carefully. Creating and renaming mappings 1. In the Twin CAT HMI configuration window under the All Symbols tab, right-click on the instance to be mapped and click on Map Symbol. TF85xx Version: 1.4.0 471
## Page 472

Samples / instructions 2. Right-click on the icon again and then select Rename Mapping. 3. Rename the symbol name in the window that appears. Symbol names used in the Plastic Application HMI project The abbreviated symbol names shown in the following table are used in the Plastic Application HMI project: GVL name Instance name of the FB Abbreviated symbol name Alarms fb Alarm Handler Hmi Alarm Handler Application fb Blowing Hmi Blowing 472 Version: 1.4.0 TF85xx
## Page 473

Samples / instructions GVL name Instance name of the FB Abbreviated symbol name Application fb Energy Measurement Hmi Energy Measurement Application fb Machine Hmi Machine Application fb Operation Mode Hmi Operation Mode Application fb Panel Hmi Panel Application fb Production Counter Hmi Production Counter Application fb Sequence Hmi Sequence Application fb Trend Hmi Trend Application fb User Logger Hmi User Logging Blowpin fb Blowpin Hmi Blowpin Carriage fb Carriage Hmi Carriage Clamp fb Clamp Hmi Clamp Extruder fb Co Extruder Hmi Co Extruder Extruder fb Main Extruder Hmi Main Extruder Handling fb Cutter Hmi Cutter Handling fb Takeout Hmi Takeout Hmi Communication fb Plc State To Hmi Hmi Recipe Handler Monitoring fb Cabinet Temperature Hmi Cabinet Temperature Monitoring fb Co Extruder Current Hmi Co Extruder Current Monitoring fb Cpu Temperature Hmi Cpu Temperature Monitoring fb Hydraulic System Pressure Hmi Hydraulic System Pressure Monitoring fb Main Extruder Current Hmi Main Extruder Current Monitoring fb Main Extruder Melt Pressure Hmi Main Extruder Melt Pressure Monitoring fb Main Extruder Melt Temperature Hmi Main Extruder Melt Temperature Monitoring fb Monitoring Data Monitoring Setpoints fb Hydraulic System Pressure Hmi Set Hydraulic System Pressure Setpoints fb Setpoints Data Setpoints Temperature fb Temperature Hmi Temperature Temperature fb Temp Schedule Hmi Temperature Schedule Timer fb Sample Timer Tof Sample Timer Tof Timer fb Sample Timer Tone Sample Timer Tone Timer fb Sample Timer Tp Sample Timer Tp Wtc fb Accumulator Hmi Accumulator Wtc fb Wtc Hmi Wtc Wtc fb Wtc Time Master Hmi Wtc Timer Available since version 12.7.0 8.6 Using the CP2219-1025-0030 Industrial Panel PC The CP2219-1025-0030 Industrial Panel PC can be used as an extension to the Plastic Application project. It contains a 19-inch display with a format of 1024x1280 px. The device also offers the following functions and components, among others: • USB 3.0 socket behind a rubber cap: Can be used for data exchange on the file management [} 407] page. • LED status bar: Indicates the general status of the machine (red: error, yellow: warning, blue: information, green: automatic mode, flashing green: idle). TF85xx Version: 1.4.0 473
## Page 474

Samples / instructions • Emergency stop: Can be activated in an emergency to stop the machine and interrupt the current flow. • RFID (i DTRONIC): Can be used for user login and can be configured on the RFID page [} 410]. • Button with LED (left): Used to start automatic mode (yellow flashing: homing is required, yellow: during homing, green flashing: automatic mode can be started, green: automatic mode). • Button with LED (center): Used to stop automatic mode (red flashing: during stop, red: is stopped). • Button with LED (right): Can be used to acknowledge alarms (flashing blue: alarms are pending). • Rotary encoder with LEDs: Can be used to manually move axes [} 367] and set the WTC curve [} 427] (the individual green LED sections are controlled depending on the mode). 474 Version: 1.4.0 TF85xx
## Page 475

Samples / instructions Integration into the Plastic Application project The function blocks FB_CP22xx_1025 [} 322] and FB_CP22xx_1025Hmi can be used to fully integrate the industrial panel PC into the control system. Available since version 12.7.0 TF85xx Version: 1.4.0 475
## Page 476

Samples / instructions 8.7 Commissioning RFID Integration of RFID into an existing Twin CAT HMI project 1. Installation of the Nu Get package Beckhoff. Twin CAT. HMI. Plastic. RFID 2. Creation of a persistent server symbol in the Twin CAT HMI configuration window with the data type RFIDConfig and the name RFIDConfig 3. Adjusting the default values of the RFIDConfig server symbol 4. Creation of a server symbol in the Twin CAT HMI configuration window with the data type Boolean and the name Enable RFIDAuto Login 5. Creation of a server symbol in the Twin CAT HMI configuration window with the data type Number and the name RFIDAuto Login Interval Id 476 Version: 1.4.0 TF85xx
## Page 477

Samples / instructions 6. Creation of a custom event from the server symbol Enable RFIDAuto Login on the start page [} 436] of the Tc Hmi View control 7. Check the Auto-Login box for the user with the lowest user rights 8. Importing the RFID page [} 410] (RFID.content) into the existing project and integrating it into the navigation Using the RFID page 1. Click on the button to connect the COM port and connect the desired port in the pop-up window that appears 2. Write the desired user name and password in the text fields, then hold the RFID card in front of the RFID reader and click on the button to write (auto-login must be switched off for this) TF85xx Version: 1.4.0 477
## Page 478

Samples / instructions 3. By clicking on the read button, the information can be read from the card and displayed in the corresponding text fields when the card is presented (auto-login must be switched off for this) 4. By switching on the auto-login, the corresponding user is logged in immediately if an RFID card with valid values is presented Create user in Tc Hmi User Management Writing a user name and password to an RFID tag does not create a new user. The corresponding user must be created via Tc Hmi User Management. This is done either during engineering using the Twin CAT HMI configuration window or via the User Management control on the administration page [} 396]. 478 Version: 1.4.0 TF85xx
## Page 479

Appendix 9 Appendix 9.1 PLC-API (obsolete) This chapter lists the obsolete PLC elements. These are still available for compatibility purposes, a change to the replacing elements is strongly recommended! 9.1.1 F_Try Devide() Function is 'obsolete' This function is marked as obsolete and should not be used anymore! Alternative: F_Try Divide [} 342] Original version: Divides two values without throwing an exception. Return value mathematically invalid The function defines the mathematically invalid case x / 0 as 0. This is a mathematically invalid result, but is sufficient for many use cases. Check for your use case whether this definition does not lead to unforeseen misbehavior. Syntax: FUNCTION F_Try Devide : HRESULT VAR_INPUT f Nominator: LREAL; f Denominator: LREAL; ref Result: REFERENCE TO LREAL; END_VAR Inputs Name Type Description f Nominator LREAL Value to be divided f Denominator LREAL Value by which to divide ref Result REFERENCE TO Result of the division LREAL Outputs Name Type Description F_Try Devide HRESULT Return value with feedback on the success of the execution Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) TF85xx Version: 1.4.0 479
## Page 480

Appendix 9.1.2 FB_Trafo Table Generator Class is 'obsolete' This class is marked as obsolete and should not be used anymore! Alternative: TF8560 –Tc3_Plastic Functions. FB_Trafo Table Generator Original version: Represents the base class for generation algorithms of transformation cam plates. Class is abstract Since the class is defined as ABSTRACT, the class cannot be instantiated and must be implemented using inheritance. The following pre-implemented geometries are included: 1. FB_Table Generator Clamp Standard [} 482] - Geometry of a typical clamping unit 2. FB_Table Generator Crank Standard [} 484] - Geometry of a crank mechanism 3. FB_Table Generator Scotch Yoke [} 485] - Geometry of a scotch yoke Syntax: FUNCTION_BLOCK ABSTRACT FB_Trafo Table Generator Properties Name Type Access Initial value Description Drive High End LREAL Get, Set 0.0 Upper limit of the drive position Drive Low End LREAL Get, Set 0.0 Lower limit of the drive position Look Up I_Camming Look Up Get, Set NULL Interface to the TF8560 to be assigned FB_Camming Look Up Table Parameter List I_Parameter Get - List of geometry-specific parameters Param Valid BOOL Get FALSE The set parameters have valid values. Scope [} 481] I_Trafo Scope Get - Diagnostic values from the transformation table calculation Methods Name Description Calculate Scope() Calculates the diagnostic values of the Scope property. Define Table() Starts the calculation of the transformation table. Read From Param List() Reads parameters from the list of special parameters. Write To Param List() Writes local variables to the list of special parameters. 480 Version: 1.4.0 TF85xx
## Page 481

Appendix Methods are abstract The methods are defined as ABSTRACT and must be implemented in inheriting classes. Interfaces Type Description I_Trafo Table Generator Standard interface on FB_Trafo Table Generator Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 9.1.2.1 FB_Trafo Scope Class is 'obsolete' This class is marked as obsolete and should not be used anymore! Alternative: - (completely removed) Original version: Implements diagnostic values for the calculation of the transformation table Syntax: FUNCTION_BLOCK FB_Trafo Scope Properties Name Type Access Initial value Description High Limit Defined BOOL Get, Set FALSE An upper limit is defined. High Limit Drive LREAL Get, Set 0.0 Upper limit of the drive High Limit Load LREAL Get, Set 0.0 Upper limit of the load side High Side Blockpoint BOOL Get, Set FALSE An upper blocking of the mechanics exists. High Side Turnpoint BOOL Get, Set FALSE An upper turning point of the mechanics exists. Low Limit Defined BOOL Get, Set FALSE A lower limit is defined. Low Limit Drive LREAL Get, Set 0.0 Lower limit of the drive Low Limit Load LREAL Get, Set 0.0 Lower limit of the load side Low Side Blockpoint BOOL Get, Set FALSE A lower blocking of the mechanics exists. Low Side Turnpoint BOOL Get, Set FALSE A lower turning point of the mechanics exists. TF85xx Version: 1.4.0 481
## Page 482

Appendix Interfaces Type Description I_Trafo Scope Standard interface on FB_Trafo Scope Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 9.1.2.2 FB_Table Generator Clamp Standard_1 Class is 'obsolete' This class is marked as obsolete and should not be used anymore! Alternative: TF8560 – Tc3_Plastic Functions. FB_Clamp Table Generator Original version: Implements a calculation algorithm for a standard clamping unit mechanism. Names of the dimension designations in the sketch The dimension designations are the same as the names of the properties of the class to be configured. 482 Version: 1.4.0 TF85xx
## Page 483

Appendix Syntax: FUNCTION_BLOCK FB_Table Generator Clamp Standard_1 EXTENDS FB_Trafo Table Generator Properties Name Type Access Initial value Description Base Distance LREAL Get, Set 0.0 Distance between the two stationary bearing points in the center of the mechanism Drive Arm LREAL Get, Set 0.0 Lever arm attached to the drive TF85xx Version: 1.4.0 483
## Page 484

Appendix Name Type Access Initial value Description Drive Step LREAL Get, 0.0 Resulting resolution of the drive position in the transformation table Load Arm LREAL Get, Set 0.0 Transfer arm to the tool arms Tool Arm_1 LREAL Get, Set 0.0 Lower part of the lateral tool arm Tool Arm_2 LREAL Get, Set 0.0 Upper part of the lateral tool arm Tool Arm_3 LREAL Get, Set 0.0 Horizontal tool arm Tool Arm_Angle LREAL Get, Set 0.0 Angle between the two parts of the side tool arm Tool Offset LREAL Get, Set 0.0 Total offset between the bearing and the tool clamping surface In the recommended Tool Offset design, the transformation results in the distance between the tool clamping surfaces. To use the distance of the tool opening, it is recommended to use the Tool Adaption. This is configurable in the machine data of each FB_Ptp Motion based axis. Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 9.1.2.3 FB_Table Generator Crank Standard Class is 'obsolete' This class is marked as obsolete and should not be used anymore! Alternative: TF8560 – Tc3_Plastic Functions. FB_Crank Table Generator Original version: Implements a calculation algorithm for a crank mechanism. Constructive assumption The calculation assumes that the motion axis of the load side is in alignment with the center of rotation of the drive side. This is indicated in the sketch by the horizontal dashed line! Names of the dimension designations in the sketch The dimension designations are the same as the names of the properties of the class to be configured. 484 Version: 1.4.0 TF85xx
## Page 485

Appendix Syntax: FUNCTION_BLOCK FB_Table Generator Crank Standard EXTENDS FB_Trafo Table Generator Properties Name Type Access Initial value Description Drive Arm LREAL Get, Set 0.0 Lever arm attached to the drive Drive Step LREAL Get 0.0 Resulting resolution of the drive position in the transformation table Load Arm LREAL Get, Set 0.0 Transfer arm to the guided load side Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 9.1.2.4 FB_Table Generator Scotch Yoke Class is 'obsolete' This class is marked as obsolete and should not be used anymore! Alternative: TF8560 – Tc3_Plastic Functions. FB_Scotch Yoke Table Generator Original version: TF85xx Version: 1.4.0 485
## Page 486

Appendix Implements a calculation algorithm for a scotch yoke mechanism. Names of the dimension designations in the sketch The dimension designations are the same as the names of the properties of the class to be configured. Syntax: FUNCTION_BLOCK FB_Table Generator Scotch Yoke EXTENDS FB_Trafo Table Generator Properties Name Type Access Initial value Description Drive Arm LREAL Get, Set 0.0 Radius of the eccentric rotation Drive Step LREAL Get 0.0 Resulting resolution of the drive position in the transformation table Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 9.1.3 FB_Monitoring Zone Class is 'obsolete' This class is marked as obsolete and should not be used anymore! Alternative: FB_Monitoring Temp [} 50] Original version: Implements monitoring of a temperature zone with direct connection to TF8540. The adjustable limits are synchronized with the temperature zone. Syntax: FUNCTION_BLOCK FB_Monitoring Zone EXTENDS FB_Monitoring 486 Version: 1.4.0 TF85xx
## Page 487

Appendix Properties Name Type Access Initial value Description Temp Zone Hmi I_Temp Zone Hmi Get NULL [INTERNAL] Referencing to the values of the assigned zone Methods Name Description Set Temp Zone() Sets the temperature zone to be monitored Interfaces Type Description I_Monitoring Zone Standard interface on FB_Monitoring Zone Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 9.1.4 FB_Temp Ctrl Class is 'obsolete' This class is marked as obsolete and should not be used anymore! Alternative: FB_Temperature [} 273] Original version: Main class of temperature control to manage all temperature zones and groups. Syntax: FUNCTION_BLOCK FB_Temp Ctrl EXTENDS FB_Base Md Properties Name Type Access Initial value Description Disable Alarms BOOL Get, Set FALSE Suppresses alarms triggered by errors in a temperature zone. Disable Messages BOOL Get, Set FALSE Suppresses debug messages of the TF8540 library. Enable Callback BOOL Get, Set TRUE Enables communication with the I/O components. Enable Config BOOL Get, Set TRUE Enables the configuration of all zones. TF85xx Version: 1.4.0 487
## Page 488

Appendix Name Type Access Initial value Description Enable Looptest BOOL Get, Set FALSE Enables current monitoring of all zones. Groups REFERENCE TO Get - Control of the individual ARRAY[] OF groups. FB_Temp Group Lib Scope Vars REFERENCE TO Get - Access to an overview of FB_Scope_Temp Ctrl V TF8540 live data. ariables Ref Md Temp Supply REFERENCE TO Get - Access to the array of ARRAY [] OF machine data containers of all FB_Md Temp Supply supply units. Ref Md Temp Zone REFERENCE TO Get - Access to the array of ARRAY[] OF machine data containers of all FB_Md Temp Zone temperature zones. Timer I_Temp Schedule Get NULL Access to the connected scheduler. Methods Name Description Create Default Params() [} 489] Creates a default parameterization for all temperature zones. Enable All() [} 490] Enables all temperature zones on the PLC side. Link Group() [} 490] Assigns a linear arrangement of zones to a group. Link Supply() [} 491] Assigns a group to a supply unit. Link Zone() [} 492] Assigns a zone to a group. Set Op Mode() [} 492] Configures the current operation mode. Set Scheduler() Assigns a schedule to the temperature control. Standby All() [} 493] Sets all zones to standby. Unlink Group() Removes all links to a group. Interfaces Type Description I_Temp Ctrl Standard interface on FB_Temp Ctrl I_Temp Ctrl Md Ref Interface for the transfer of zone machine data I_Temp Task Interface Runtime interface for a slow PLC task Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 488 Version: 1.4.0 TF85xx
## Page 489

Appendix 9.1.4.1 Create Default Params() Creates a default parameterization for all temperature zones. Syntax: METHOD Create Default Params : HRESULT VAR_INPUT b All In Use: BOOL; e Sensor: E_Tc Pfw_Temp Sens Type; e Terminal: E_Tc Pfw_Terminal Type; n Ch Per Term: INT; e Out Heating: E_Tc Pfw_Tctrl Out Select; e Out Cooling: E_Tc Pfw_Tctrl Out Select; f Setpoint: LREAL; f Standby Setp: LREAL; f Pwm Cycle Time: LREAL; END_VAR Inputs Name Type Description Recommended standard b All In Use BOOL All zones are initialized as "In Use". TRUE e Sensor E_Tc Pfw_Temp S Sensor type - No Sensor in simulation mode e Tc Pfw Temp Sens T_No Sensor ens Type e Terminal E_Tc Pfw Terminal Terminal type - No Terminal in simulation e Tc Pfw Term T_No Terminal Type mode n Ch Per Ter INT Number of channels per terminal 8 m e Out Heatin E_Tc Pfw_Tctrl Ou Output type of the heating output - e Tc Pfw Tc Out_PWM g t Select No Signal, to disable the heating function (e.g. for measuring zones) e Out Coolin E_Tc Pfw_Tctrl Ou Cooling output type e Tc Pfw Tc Out_No Signal g t Select f Setpoint LREAL Temperature setpoint for all zones 180.0 f Standby Set LREAL Temperature setpoint for standby 18.0 p temperature of all zones f Pwm Cycle LREAL PWM cycle time for all outputs (duty Cycle = 1.0 Time f Pwm Cycle Time * 0.1) Outputs Name Type Description Create Default Params HRESULT Return value with feedback on the success of the execution TF85xx Version: 1.4.0 489
## Page 490

Appendix Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 9.1.4.2 Enable All() Enables all temperature zones on the PLC side. Syntax: METHOD Enable All VAR_INPUT b Cmd: BOOL; b Groups: BOOL; END_VAR Inputs Name Type Description b Cmd BOOL TRUE to grant the release, FALSE to withdraw the release. b Groups BOOL The enable only takes into account zones that are assigned to a group. Outputs Name Type Description Enable All HRESULT Return value with feedback on the success of the execution Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 9.1.4.3 Link Group() Assigns a set of zones to a group. Syntax: METHOD Link Group : HRESULT VAR_INPUT n Start Idx: INT; n End Idx: INT; n Group Idx: INT; b Overwrite: BOOL; END_VAR 490 Version: 1.4.0 TF85xx
## Page 491

Appendix Inputs Name Type Description n Start Idx INT Index of the first zone to be assigned from the linear TF8540 library arrangement n End Idx INT Index of the last zone to be assigned from the linear TF8540 library arrangement n Group Idx INT Index of the group to which the zones are to be assigned b Overwrite BOOL Zones are assigned even if the group contains already assigned zones. Outputs Name Type Description Link Group HRESULT Return value with feedback on the success of the execution Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 9.1.4.4 Link Supply() Assigns a supply unit to a group. Syntax: METHOD Link Supply : HRESULT VAR_INPUT n Group Idx: INT; n Supply Idx: INT; END_VAR Inputs Name Type Description n Group Idx INT Index of the group to which a supply unit is to be assigned n Supply Idx INT Index of the supply unit to be assigned to the group Outputs Name Type Description Link Supply HRESULT Return value with feedback on the success of the execution Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) TF85xx Version: 1.4.0 491
## Page 492

Appendix 9.1.4.5 Link Zone() Assigns a single zone to a group. Syntax: METHOD Link Zone : HRESULT VAR_INPUT n Linear Idx: INT; n Group Idx: INT; n Group Member Idx: INT; b Overwrite: BOOL; END_VAR Inputs Name Type Description n Linear Idx INT Index of the zone from the linear TF8540 library arrangement that is to be assigned n Group Idx INT Index of the group to which the zone should be assigned n Group Member Idx INT Index in the target group b Overwrite BOOL Zone is assigned even if the index is already occupied in the target group. Outputs Name Type Description Link Zone HRESULT Return value with feedback on the success of the execution Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 9.1.4.6 Set Op Mode() Defines the current Op Mode of the temperature control. • Op Mode None (0) ◦ Temperature control does not accept commands • Op Mode Simple (1) ◦ Zones can be enabled and disabled via Tmp Ctrl Hmi. Group[]. Enable • Op Mode Standard (2) ◦ Zones are controlled via Temp Ctrl Hmi. Groups[]. Op Mode Active ◦ Zones support standby via Temp Ctrl Hmi. Groups[]. Op Mode Standby 492 Version: 1.4.0 TF85xx
## Page 493

Appendix Syntax: METHOD Set Op Mode : HRESULT VAR_INPUT Op Mode: INT; END_VAR Inputs Name Type Description Op Mode INT Selection parameters: 0 – None, 1 – Simple, 2 - Standard Outputs Name Type Description Set Op Mode HRESULT Return value with feedback on the success of the execution Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 9.1.4.7 Standby All() Sets all zones to standby temperature. Syntax: METHOD Standby All : HRESULT VAR_INPUT b Cmd: BOOL; b Groups: BOOL; END_VAR Inputs Name Type Description b Cmd BOOL TRUE to enable the standby temperature, FALSE to disable. b Groups BOOL The function only considers zones that are assigned to a group. Outputs Name Type Description Standby All HRESULT Return value with feedback on the success of the execution Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) TF85xx Version: 1.4.0 493
## Page 494

Appendix 9.1.5 FB_Temp Ctrl Hmi Class is 'obsolete' This class is marked as obsolete and should not be used anymore! Alternative: FB_Temperature Hmi [} 280] Original version: HMI parallel class to the FB_Temp Ctrl. Syntax: FUNCTION_BLOCK FB_Temp Ctrl Hmi EXTENDS FB_Base Md Hmi Properties Name Type Access Initial value Description Alarm Absolute High BOOL Get FALSE A zone (In Use = TRUE) has exceeded the absolute temperature maximum. Alarm Absolute Low BOOL Get FALSE One zone (In Use = TRUE) has fallen below the absolute temperature minimum. Alarm High High BOOL Get FALSE At least one zone with active control has exceeded the High High tolerance. Alarm High BOOL Get FALSE At least one zone with active control has exceeded the High tolerance. Alarm Low BOOL Get FALSE At least one zone with active control has fallen below the low tolerance. Alarm Low Low BOOL Get FALSE At least one zone with active control has fallen below the Low Low tolerance. Count Pfw Zones LREAL Get 20.0 Number of available TF8540 temperature zones Groups REFERENCE TO Get - Access to group-based ARRAY[] OF information FB_Temp Group Hmi Param Temp Supply REFERENCE TO Get - Parameter interface for ARRAY[] OF parameterization via the HMI FB_Md Temp Supply Hm i Param Temp Zone REFERENCE TO Get - Parameter interface for ARRAY[] OF parameterization via the HMI FB_Md Temp Zone Hmi Temp Ambient LREAL Get, Set 18.0 Standard ambient temperature (for simulation) 494 Version: 1.4.0 TF85xx
## Page 495

Appendix Interfaces Type Description I_Temp Ctrl Hmi Standard interface on FB_Temp Ctrl Hmi Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 9.1.6 FB_Temp Group Class is 'obsolete' This class is marked as obsolete and should not be used anymore! Alternative: FB_Temperature Group [} 282] Original version: Class for group control of temperature control. Syntax: FUNCTION_BLOCK FB_Temp Group EXTENDS FB_Base Properties Name Type Access Initial value Description Alarm Absolute High BOOL Get FALSE Group (at least one zone) has exceeded the absolute maximum temperature. Alarm Absolute Low BOOL Get FALSE Group (at least one zone) has fallen below the absolute temperature minimum. Alarm High High BOOL Get FALSE Group (at least one zone) has exceeded the High High tolerance. Alarms to the tolerance values are only active if the zones are actively controlled. Alarm High BOOL Get FALSE Group (at least one zone) has exceeded the High tolerance. Alarms to the tolerance values are only active if the zones are actively controlled. Alarm Low BOOL Get FALSE Group (at least one zone) has exceeded the Low tolerance. Alarms to the tolerance values are only active if the zones are actively controlled. TF85xx Version: 1.4.0 495
## Page 496

Appendix Name Type Access Initial value Description Alarm Low Low BOOL Get FALSE Group (at least one zone) has exceeded the Low Low tolerance. Alarms to the tolerance values are only active if the zones are actively controlled. Alarm No Response BOOL Get FALSE Temperature value of the group (at least one zone) does not respond to the control. Enable Limit Alarms BOOL Get, Set FALSE Exceeding a tolerance value/ limit triggers an alarm. Fault BOOL Get FALSE Group (at least one zone) has an error. Is Active BOOL Get FALSE Group (at least one zone) is actively controlled. Is Enabled BOOL Get FALSE All zones of the group are enabled. Is Standby BOOL Get FALSE All zones of the group are in standby mode. Zones REFERENCE TO Get - Control of the individual zones ARRAY[] OF FB_Temp Zone Methods Name Description Enable() Enables all zones of the group on the PLC side. Force() Forces all zones of the group to heating/cooling 100%. Interfaces Type Description I_Temp Group Standard interface on FB_Temp Group Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 9.1.7 FB_Temp Group Hmi Class is 'obsolete' This class is marked as obsolete and should not be used anymore! Alternative: FB_Temperature Group Hmi [} 287] Original version: 496 Version: 1.4.0 TF85xx
## Page 497

Appendix HMI parallel class to the FB_Temp Group class. Syntax: FUNCTION_BLOCK FB_Temp Group Hmi EXTENDS FB_Base Md Hmi Properties Name Type Access Initial value Description Count Linked Zones INT Get, Set 0 Number of assigned zones via the 'Link()' methods of the FB_Temp Ctrl Do Tune BOOL Get, Set FALSE Starts tuning of all active zones of the group. Enable1 BOOL Get, Set FALSE Releases the zones through the HMI. Group Index INT Get 0 Index of the group in the FB_Temp Ctrl Hmi array Group Name STRING Get ‘‘ Temperature group name Op Mode Active2 REFERENCE TO Get - Interface for active switching FB_Temp Group Op Mod of a temperature group e Hmi Op Mode Standby2 REFERENCE TO Get - Interface for the standby FB_Temp Group Op Mod circuit of the temperature e Hmi group Tuning Active BOOL Get FALSE Tuning of at least one zone is active. Tuning Done BOOL Get FALSE The tuning of the group is completed. Zones REFERENCE TO Get - Interface to the individual ARRAY[] OF zones of a group FB_Temp Zone Hmi 1 Only in Op Mode 'Simple' 2 Only in Op Mode 'Standard' Methods Name Description Set Zone Data() [INTERNAL] Connects the temperature zones of a group with the machine data. Interfaces Type Description I_Temp Group Hmi Standard interface on FB_Temp Group Hmi Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) TF85xx Version: 1.4.0 497
## Page 498

Appendix 9.1.8 FB_Temp Group Op Mode Hmi Class is 'obsolete' This class is marked as obsolete and should not be used anymore! Alternative: - (integrated in FB_Temperature Group Hmi [} 287]) Original version: Class for controlling the temperature operation mode (in FB_Temp Ctrl Op Mode "Standard"). Syntax: FUNCTION_BLOCK FB_Temp Group Op Mode Hmi Properties Name Type Access Initial value Description Off BOOL Get, Set TRUE Switches the temperature group off. On BOOL Get, Set FALSE Switches the temperature group on. Timed BOOL Get, Set FALSE Switches the temperature group to a time-based switch- on. Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 9.1.9 FB_Temp Zone Class is 'obsolete' This class is marked as obsolete and should not be used anymore! Alternative: FB_Temp Channel [} 291] Original version: Class for single control of a temperature zone. Syntax: FUNCTION_BLOCK FB_Temp Zone EXTENDS FB_Base 498 Version: 1.4.0 TF85xx
## Page 499

Appendix Properties Name Type Access Initial value Description Alarm Absolute High BOOL Get FALSE Zone has exceeded the absolute maximum temperature. Alarm Absolute Low BOOL Get FALSE Zone has fallen below the absolute temperature minimum. Alarm High High BOOL Get FALSE Zone has exceeded the High High tolerance. Alarms to the tolerance values are only active when the zone is actively controlled. Alarm High BOOL Get FALSE Zone has exceeded the high tolerance. Alarms to the tolerance values are only active when the zone is actively controlled. Alarm Low BOOL Get FALSE Zone has exceeded the low tolerance. Alarms to the tolerance values are only active when the zone is actively controlled. Alarm Low Low BOOL Get FALSE Zone has exceeded the Low Low tolerance. Alarms to the tolerance values are only active when the zone is actively controlled. Alarm No Response BOOL Get FALSE Temperature value of the zone does not respond to the control. Enable Limit Alarms BOOL Get, Set FALSE Exceeding a tolerance value/ limit triggers an alarm. Is Linked BOOL Get FALSE Zone is connected to a group. Interfaces Type Description I_Temp Zone Standard interface on FB_Temp Zone Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 9.1.10 FB_Temp Zone Hmi Class is 'obsolete' This class is marked as obsolete and should not be used anymore! Alternative: FB_Temp Channel Base [} 290] TF85xx Version: 1.4.0 499
## Page 500

Appendix Original version: Access class for a single temperature zone via the HMI. Syntax: FUNCTION_BLOCK FB_Temp Zone Hmi Properties Name Type Access Initial value Description Index INT Get, Set 0 References a Plastic Application zone to a TF8540 zone. Class contains significantly more properties than listed The properties of the FB_Temp Zone Hmi class overlap with the TF8540 Global Variables aaa Pfw Temp To Hmi, aaa Pfw Temp Mparam From Hmi and aaa Pfw Temp Pparam From Hmi. For more information on overlapping features, it is recommended to use the TF8540 documentation. Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 9.1.11 FB_Axis Specific Class is 'obsolete' This class is marked as obsolete and should not be used anymore! Alternative: FB_Motion Specific [} 180] Original version: The class implements technology-specific functions of a TF8560 axis. Syntax: FUNCTION_BLOCK FB_Axis Specific EXTENDS FB_Base Properties Name Type Access Initial value Description Hydraulic [} 182] I_Hydraulic Functions Get - Hydraulic-specific functions Nc [} 183] I_Nc Functions Get - NC-specific (servo-electric) functions Trafo [} 184] I_Trafo Functions Get - Transformation-specific functions 500 Version: 1.4.0 TF85xx
## Page 501

Appendix Interfaces Type Description I_Axis Specific Standard interface on FB_Axis Specific Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 9.1.12 FB_Wtc Time Master Class is 'obsolete' This class is marked as obsolete and should not be used anymore! Alternative: FB_Wtc Timer [} 88] Original version: Implements a timer as master for WTC camming. Syntax: FUNCTION_BLOCK FB_Wtc Time Master EXTENDS FB_Base Properties Name Type Access Initial value Description Actual Time LREAL Get 0.0 Elapsed time since start of WTC cycle in seconds Actual Time Latched LREAL Get 0.0 Stored time of the last WTC cycle in seconds First Start BOOL Get FALSE WTC is in its first cycle since the last launch. Guiding Value LREAL Get 0.0 Time value as resulting camming master value Profile Started BOOL Get FALSE TRUE if the timer has been started. Methods Name Description Profile Start Ack() Resets the "Profile Started" feedback signal. Start() Starts the timer. Interfaces Type Description I_Wtc Time Master Standard interface on FB_Wtc Time Master TF85xx Version: 1.4.0 501
## Page 502

Appendix Type Description I_Wtc Master General interface of a WTC master axis Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 9.1.13 FB_Wtc Accu Master Class is 'obsolete' This class is marked as obsolete and should not be used anymore! Alternative: FB_Wtc Accumulator [} 91] Original version: Implements an accumulator as the master for WTC camming. Syntax: FUNCTION_BLOCK FB_Wtc Accu Master EXTENDS FB_Axis Properties Name Type Access Initial value Description Filling Done BOOL Get FALSE The accumulator has reached the filling volume. Guiding Value LREAL Get 0.0 Position as resulting camming master value Pushout Done BOOL Get FALSE The discharge is completed (the remaining filling volume is below the buffer volume). Methods Name Description Filling() Starts the filling process of the accumulator. Pushout() Starts the pushing-out the filling volume. Interfaces Type Description I_Wtc Accu Master Standard interface on FB_Wtc Accu Master I_Wtc Master General interface of a WTC master axis 502 Version: 1.4.0 TF85xx
## Page 503

Appendix Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 9.1.14 FB_Manual Ptp Class is 'obsolete' This class is marked as obsolete and should not be used anymore! Alternative: FB_Manual Base Work [} 170] Original version: Implements a predefined version of a manual function for controlling a PTP axis. Syntax: FUNCTION_BLOCK FB_Manual Ptp EXTENDS FB_Base Properties Name Type Access Initial value Description Enable BOOL Get, Set FALSE Releases the manual function. Trig Cmd Base Pos I_Trigger Get - Trigger on the base position command Trig Cmd Work Pos I_Trigger Get - Trigger on the working position command Methods Name Description Cyclic() Cycle method Set Work Base Pos() Sets the base and working position for indication on the HMI Interfaces Type Description I_Manual Function Universal interface to a manual function Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.42 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.6.0) TF85xx Version: 1.4.0 503
## Page 504

Appendix 9.1.15 Plastic Status Hmi Function is 'obsolete' This function is marked as obsolete and should not be used anymore! Alternative: T_Plastic Status [} 342] Original version: Status variable for linking to an HMI State Indicator. This variable is interpreted bit by bit. Syntax: TYPE Plastic Status Hmi : BYTE; END_TYPE Values bit Description 0 Successful (Green) 1 Warning (Orange) 2 Error (Red) 3 Reserved 4 Reserved 5 Reserved 6 Reserved 7 State is invalid Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 9.1.16 FB_Base Camming Hmi Class is 'obsolete' This class is marked as obsolete and should not be used anymore! Alternative: FB_Cam Axis Hmi [} 210] and FB_Curve Hmi [} 215] Original version: Extends the FB_Axis Hmi [} 192] class for camming based axes with the necessary interface to the TF8550 Curve Editor. Syntax: FUNCTION_BLOCK FB_Base Camming Hmi EXTENDS FB_Axis Hmi 504 Version: 1.4.0 TF85xx
## Page 505

Appendix Properties Name Type Access Initial value Description Name STRING Get, Set <Source Name Specifies the name of the > class instance. FB_Base Camming Hmi Activate Curve BOOL Get, Set FALSE Command of the HMI to take over the cam plate on control level. Current Index UDINT Get 0 Indicates the current index of the cam plate where the drive position is located. FB_Axis Hmi Encoder Zero Shift LREAL Get, (Set) 0.0 Zero offset shift of the axis. Limiting Reference LREAL Get 100.0 [%] Reference value (maximum) for commanded limiting values (pressure or torque limit). Max Acceleration LREAL Get 0.0 Maximum acceleration of the axis. Max Deceleration LREAL Get 0.0 Maximum deceleration of the axis. Max Jerk LREAL Get 0.0 Maximum jerk of the axis. Max Position LREAL Get 0.0 Maximum position of the axis. Max Velocity LREAL Get 0.0 Maximum velocity of the axis. Min Postion LREAL Get 0.0 Minimum position of the axis. Min Velocity LREAL Get 0.0 Minimum velocity of the axis. Referencing I_Referencing Hmi Get <Local> Parameter sets and commands for referencing the [} 196] axis. Set Position LREAL Get, Set 0.0 Position used when calling FB_Axis [} 187]. Set Position(). Unit Group STRING(64) Get, Set ‘Length‘ Physical quantity with which the axis is parameterized and operated. FB_Motion Hmi Act Position LREAL Get 0.0 Current position of the connected motion object Act Velocity LREAL Get 0.0 Current velocity of the connected motion object Jog Limiting Negative LREAL Get, Set 0.0 Limitation of the jog command via the FB_Motion [} 178]. Jog Negative() method Ignored for operation with an actuator. Jog Limiting Positive LREAL Get, Set 0.0 Limitation of the jog command via the FB_Motion [} 178]. Jog Positive() method Ignored for operation with an actuator. Jog Velocity Negative LREAL Get, Set 0.0 Velocity of the jog command via the FB_Motion [} 178]. Jog Negative() method Ignored for operation with an actuator. TF85xx Version: 1.4.0 505
## Page 506

Appendix Name Type Access Initial value Description Jog Velocity Positive LREAL Get, Set 0.0 Velocity of the jog command via the FB_Motion [} 178]. Jog Negative() method Ignored for operation with an actuator. Manual Power I_Manual Function Hmi Get, Set <Local> Interface for a manual function to switch on the motion object. [} 163] Specific REFERENCE TO Get <Local> Access to the technology- FB_Motion Specific Hmi specific functions FB_Base Base State E_Base State [} 59] Get e Not Handled Initialization state of the class instance. Error BOOL Get FALSE Class is in an error state. Result Message I_App Message [} 43] Get - Access to the class-internal Event Logger. [PROTECTED] _Name STRING Get <Source Name . Name without leading 'fb'. > Local HMI variables Name Data type Description fb Param Handle FB_Md Handle Hmi Handling interface for loading and saving machine data. FB_Base Camming Hmi a Set Curve ARRAY[] OF ST_CPoint Set curve transmitted by the HMI. [} 507] a Act Curve ARRAY[] OF ST_CPoint Actual curve that the axis has actually traveled and should be displayed. [} 507] FB_Axis Hmi fb Param Axis FB_Md Axis Hmi Entries in the HMI parameter list under Axis. fb Param Homing FB_Md Homing Hmi Entries in the HMI parameter list under Homing. fb Referencing FB_Referencing Hmi Parameter sets and commands for referencing. FB_Motion Hmi fb Manual Power FB_Manual Function Hmi Interface for a manual function to switch on the motion object. [} 163] fb Specific FB_Motion Specific Hmi Technology-specific functions of the motion object. Methods Name Description Reset() Resets the error state of the class. FB_Base Camming Hmi Get Act Point(n Y, f X) Returns an actual value of the displayed curve. Get Set Point(n Y, f X) Returns a setpoint of the displayed curve. Set Act Point(n Y, f X) Sets an actual value of the displayed curve. Set Set Point(n Y, f X) Sets a setpoint of the displayed curve. FB_Base Hmi Init(ip Base) Default initialization method to pass the base class. FB_Base Get HMI() Returns the assigned HMI object. 506 Version: 1.4.0 TF85xx
## Page 507

Appendix Name Description Notice The method is not implemented in the FB_Base class. If the method is not overwritten by inheritance, a pseudo variable is always returned. Set HMI(ip Base) General assignment method for an FB_Base Hmi extending class as a local HMI. Notice The method is not implemented in the FB_Base class. If the method is not overridden by inheritance, it always fails. [PROTECTED] Extracts the first part of the instance path as an object namespace. _Query Namespace() [PROTECTED] Extracts the last part of the instance path as the object name. _Query Object Name() Interfaces Type Description I_Base Standard interface on FB_Base. I_Base Camming Hmi Standard interface on FB_Base Camming Hmi I_Axis Hmi Standard interface on FB_Axis Hmi. I_Motion Hmi Standard interface on FB_Motion Hmi. I_Base Md Hmi Standard interface on FB_Base Md Hmi. I_Base Hmi Standard interface on FB_Base Hmi. I_Base Empty For extension without standard interface. I_Base Dev Covers all methods and properties of the base class. Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 9.1.16.1 ST_CPoint Class is 'obsolete' This class is marked as obsolete and should not be used anymore! Alternative: LREAL data type This structure defines a point of a TF8550 Curve Editor curve. Syntax: TYPE ST_CPoint : STRUCT Base: UINT; Value: LREAL; END_STRUCT END_TYPE Values Name Description Base Index of the point Value Slave value of the point TF85xx Version: 1.4.0 507
## Page 508

Appendix Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.35 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.0) 9.1.17 FB_Homing Class is 'obsolete' This class is marked as obsolete and should not be used anymore! Alternative: FB_Referencing [} 189] Original version: The Homing class implements standard procedures for homing an axis. Syntax: FUNCTION_BLOCK FB_Homing EXTENDS FB_Base Properties Name Type Access Initial value Description Absolute Switch BOOL Set FALSE Input value of an absolute position switch Attachable Md Interface I_Md Component Get - Interface to the machine data component External States I_Adaptable Seq Ext Get, Set NULL Interface to an object with additional homing procedure steps Methods Name Description Do Abort() Aborts the currently active referencing. Do Abs Switch() Starts axis homing against an absolute position switch. Do Abs Switch Sequence() Starts a sequence of Do Abs Switch() and Do Finish(). Do Block() Starts referencing against an end stop. Do Block Detect() Starts the position detection at an end stop. Do Block Sequence() Starts a sequence of Do Block(), Do Block Detect() and Do Finish(). Do Finish() Starts the termination of homing. Do Set Zero() Sets the current position of the axis to 0 Procedure controlling methods (FB_Adaptable Sequence [} 317]) Name Description Homing States() [} 509] State machine of the homing procedures 508 Version: 1.4.0 TF85xx
## Page 509

Appendix Event-driven methods (callback methods) Name Description Ext Adapt Seq() Dummy method() for use without "External States" Possible events ID Description Alarm/Message 4000 Homing not allowed Alarm 4001 Homing failed Alarm 4002 Save homing was successful Message 4003 Save homing was not successful Message Interfaces Type Description I_Homing Standard interface on FB_Homing I_Attachable Md Interface Interface for containerless machine data components I_Adaptable Seq Ext Interface for providing external homing procedures Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.42 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.6.0) 9.1.17.1 Homing States() Instance type Instance Name Master fb Homing States Slaves a Base Seq Members[E_Homing State.e Length] TF85xx Version: 1.4.0 509
## Page 510

Appendix State diagram: Requirements Development environ- Target platform PLC libraries to include ment Twin CAT v3.1.4024.42 PC or CX (x64, x86) Tc3_Plastic Base Application (>= v3.12.5.4) 510 Version: 1.4.0 TF85xx
## Page 511

Trademark statements Beckhoff®, ATRO® , Ether CAT®, Ether CAT G®, Ether CAT G10®, Ether CAT P®, MX-System®, Safety over Ether CAT®, TC/BSD®, Twin CAT®, Twin CAT/BSD®, Twin SAFE®, XFC®, XPlanar® and XTS® are registered and licensed trademarks of Beckhoff Automation Gmb H. Third-party trademark statements The registered trademark Linux® is used pursuant to a sublicense from the Linux Foundation, the exclusive licensee of Linus Torvalds, owner of the mark on a worldwide basis. Microsoft, Microsoft Azure, Microsoft Edge, Power Shell, Visual Studio, Windows and Xbox are trademarks of the Microsoft group of companies. UNIX is a registered trademark in the United States and other countries, licensed exclusively through X/Open Company Limited.
## Page 512

More Information: www.beckhoff.com/en-us/products/automation/twincat/tfxxxx- twincat-3-functions/tf8xxx-industry-specific Beckhoff Automation Gmb H & Co. KG Hülshorstweg 20 33415 Verl Germany Phone: +49 5246 9630 info@beckhoff.com www.beckhoff.com
