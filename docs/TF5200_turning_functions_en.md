---
title: "TF5200_turning_functions_en"
product: "TF5200"
category: "Motion_Control"
tags: ["NC"]
language: "EN"
document_type: "Manual"
version: "1.09"
source_pdf: "https://download.beckhoff.com/download/Document/automation/twincat3/TF5200_turning_functions_en.pdf"
release_date: "2025-06-10"
---
Functional description | EN TF5200 | Twin CAT 3 CNC Turning functions 6/10/2025 | Version: 1.09
## Page 3

Notes on the documentation Notes on the documentation This description is only intended for the use of trained specialists in control and automation engineering who are familiar with the applicable national standards. It is essential that the documentation and the following notes and explanations are followed when installing and commissioning the components. It is the duty of the technical personnel to use the documentation published at the respective time of each installation and commissioning. The responsible staff must ensure that the application or use of the products described satisfy all the requirements for safety, including all the relevant laws, regulations, guidelines and standards. Disclaimer The documentation has been prepared with care. The products described are, however, constantly under development. We reserve the right to revise and change the documentation at any time and without prior announcement. No claims for the modification of products that have already been supplied may be made on the basis of the data, diagrams and descriptions in this documentation. Trademarks Beckhoff®, Twin CAT®, Twin CAT/BSD®, TC/BSD®, Ether CAT®, Ether CAT G®, Ether CAT G10®, Ether CAT P®, Safety over Ether CAT®, Twin SAFE®, XFC®, XTS® and XPlanar® are registered trademarks of and licensed by Beckhoff Automation Gmb H. Other designations used in this publication may be trademarks whose use by third parties for their own purposes could violate the rights of the owners. Patent Pending The Ether CAT technology is patent protected, in particular by the following applications and patents: EP1590927, EP1789857, EP1456722, EP2137893, DE102015105702 with corresponding applications or registrations in various other countries. Ether CAT® is registered trademark and patented technology, licensed by Beckhoff Automation Gmb H, Germany Copyright © Beckhoff Automation Gmb H & Co. KG, Germany. The reproduction, distribution and utilisation of this document as well as the communication of its contents to others without express authorisation are prohibited. Offenders will be held liable for the payment of damages. All rights reserved in the event of the grant of a patent, utility model or design. TF5200 | Twin CAT 3 CNC Version: 1.09 3 Turning functions
## Page 4

General and safety instructions General and safety instructions Icons used and their meanings This documentation uses the following icons next to the safety instruction and the associated text. Please read the (safety) instructions carefully and comply with them at all times. Icons in explanatory text 1. Indicates an action. ð Indicates an action statement. DANGER Acute danger to life! If you fail to comply with the safety instruction next to this icon, there is immediate danger to human life and health. CAUTION Personal injury and damage to machines! If you fail to comply with the safety instruction next to this icon, it may result in personal injury or damage to machines. NOTICE Restriction or error This icon describes restrictions or warns of errors. Tips and other notes This icon indicates information to assist in general understanding or to provide additional informa- tion. General example Example that clarifies the text. NC programming example Programming example (complete NC program or program sequence) of the described function or NC com- mand. Specific version information Optional or restricted function. The availability of this function depends on the configuration and the scope of the version. 4 Version: 1.09 TF5200 | Twin CAT 3 CNC Turning functions
## Page 5

Table of contents Table of contents Notes on the documentation.................................................................................................................... 3 General and safety instructions.............................................................................................................. 4 1 Overview.................................................................................................................................................... 8 2 Description................................................................................................................................................ 9 2.1 Standard turning functions.............................................................................................................. 10 2.1.1 Diameter programming (G51/G52).................................................................................. 12 2.1.2 Cutter radius compensation (G40/G41/G42)................................................................... 14 2.1.3 2D cutter radius compensation (CRC) and 5-axis kinematics.......................................... 16 2.1.4 Feedrate per revolution (G95 / G94)................................................................................ 18 2.1.5 Thread cutting with endlessly rotating spindle (G33)....................................................... 19 2.1.6 Thread cutting at actual spindle speed............................................................................ 24 2.1.7 Thread chain.................................................................................................................... 24 2.1.8 Constant cutting speed (G96/G97/G196)......................................................................... 27 2.1.9 Constant cutting speed at feedrate per revolution (G96, G95)........................................ 30 2.1.10 Tapping (G331/ G332)..................................................................................................... 31 2.1.11 Thread drilling without compensating chuck (G63).......................................................... 34 2.1.12 Thread tapping with spindle actual positions................................................................... 36 2.1.13 Settings for turning functions (# TURN)........................................................................... 36 2.2 Functions for lathes / milling machines........................................................................................... 38 2.2.1 C axis machining.............................................................................................................. 38 3 Parameter................................................................................................................................................. 51 3.1 Overview......................................................................................................................................... 51 3.2 Description...................................................................................................................................... 52 3.2.1 Channel parameters......................................................................................................... 52 3.2.2 Axis parameter................................................................................................................. 62 3.2.3 Tool parameters............................................................................................................... 64 4 Support and Service............................................................................................................................... 66 Index......................................................................................................................................................... 67 TF5200 | Twin CAT 3 CNC Version: 5 Turning functions
## Page 6

Table of contents 6 Version: TF5200 | Twin CAT 3 CNC Turning functions
## Page 7

List of figures List of figures Fig. 1 Lathe............................................................................................................................................ 9 Fig. 2 Turning work................................................................................................................................ 10 Fig. 3 Reference points and diameter programming.............................................................................. 12 Fig. 4 Orientation of cutter edge to machining plane............................................................................. 14 Fig. 5 Tool gauging for tool offset compensation................................................................................... 15 Fig. 6 Cutter radius compensation with kinematic 57............................................................................. 16 Fig. 7 Value of thread pitch for longitudinal thread................................................................................. 20 Fig. 8 Value of thread pitch for tapered thread....................................................................................... 20 Fig. 9 Representation of geometry example.......................................................................................... 21 Fig. 10 Thread chain................................................................................................................................ 24 Fig. 11 Thread chain with 5 thread cutting blocks.................................................................................... 26 Fig. 12 Spindle speed with active G96..................................................................................................... 27 Fig. 13 Path feed for G96 at G95............................................................................................................. 30 Fig. 14 Face machining............................................................................................................................ 40 Fig. 15 Front view of face machining process.......................................................................................... 40 Fig. 16 Main planes of face machining..................................................................................................... 41 Fig. 17 Lateral surface machining............................................................................................................ 45 Fig. 18 Example 1 for #CAX LATERAL with G19.................................................................................... 48 Fig. 19 Example 2 for #CYL LATERAL with G19..................................................................................... 49 Fig. 20 Tool offsets for face machining.................................................................................................... 59 Fig. 21 Tool offsets for lateral surface machining.................................................................................... 61 TF5200 | Twin CAT 3 CNC Version: 1.09 7 Turning functions
## Page 8

Overview 1 Overview Task The CNC provides specific functions for turning work. Possible applications The following functions are available: • Diameter programming • Tool tip radius compensation (SRK) • Thread cutting with endlessly rotating spindle (G33) • Thread tapping without compensation chuck (G63, G331/G332) • Feedrate per revolution (G95) • Constant cutting speed (G96, G97, G196) • Face and lateral surface machining (#CAX, #FACE, #CYL) Programming Refer to the appropriate sections for turning functions. Parametrisation Turning functions are configured by specific parameters which are described in the chapter Parameters [} 51]. Links to other documents For the sake of clarity, links to other documents and parameters are abbreviated, e.g. [PROG] for the Programming Manual or P-AXIS-00001 for an axis parameter. For technical reasons, these links only function in the Online Help (HTML5, CHM) but not in pdf files since pdfs do not support cross-linking. 8 Version: 1.09 TF5200 | Twin CAT 3 CNC Turning functions
## Page 9

Description 2 Description Turning is a manufacturing process in metal cutting and is regarded as one of the basic processes in mechanical metal cutting in addition to milling, drilling and grinding. The machine tool required for machining is the lathe. In its basic state, it consists of various components: • a drive which rotates the workpiece fixed in the chuck • a tool slide which bears the turning tool with handwheels and/or other drives to move the tool axes • a stable and vibration-damping frame • additional components, so-called bezels and a tailstock to support long turned parts The simple mechanical shape of a universal lathe is depicted in the figure below. It is mainly used to produce small batches and manufacture one-off parts in workshops. For medium-size and large batch production, the so-called CNC lathe is used. It has a CNC controller which executes a programmed tool motion on complex paths. Fig. 1: Lathe TF5200 | Twin CAT 3 CNC Version: 1.09 9 Turning functions
## Page 10

Description 2.1 Standard turning functions Standard turning functions are used for conventional turning work with an endlessly rotating spindle. A position-controlled interpolated CNC spindle axis must be configured as the main spindle to achieve the full scope of functions. For details see [FCT-S1]. Fig. 2: Turning work The tool-carrying spindle axis is commanded at the assigned speed by the spindle commands M03, M04 and M05. A longitudinal and a face turning axis must be identified by an entry in the axis parameter P-AXIS-00015. The figure above shows an example where the Z axis is marked as the longitudinal turning axis (bit 0x80) and the X axis as the face turning axis (bit 0x40). The conventional axis configuration consists of 3 Cartesian main axes in the order X-Y-Z (1st main axis, 2nd main axis, 3rd main axis). Machining is executed in the programmed G18 plane (Z, X). Recommendation: Configuration of the main axes X-Y-Z and machining in the G18 plane. Machining can also be executed in the default G17 plane. The alternative axis configuration must then be Z- X-Y. 10 Version: 1.09 TF5200 | Twin CAT 3 CNC Turning functions
## Page 11

Description Standard turning functions Function Meaning Unit G51 Diameter programming - G52 Deselection of diameter programming - G41, G42 Tool tip radius compensation, left/right - G40 Deselect tool tip compensation - G95 Feed rate per revolution F [mm/rev] G33 Thread cutting K [mm/rev] G96 Constant cutting speed S [m/min] G196 Max. speed for G96 S [rpm] G94 Default unit for path feed F [mm/min] G97 Default unit for spindle speed S [rpm] F: Path feed S: Spindle speed, cutting speed K: Pitch TF5200 | Twin CAT 3 CNC Version: 1.09 11 Turning functions
## Page 12

Description 2.1.1 Diameter programming (G51/G52) Syntax: G51 Select diameter value modal G52 Deselect diameter value modal, initial state Fig. 3: Reference points and diameter programming W Workpiece zero point P Cutting point X Face turning axis Z Longitudinal turning axis M Machine zero point A Fixed stop point C Control zero point d Programmed dimension for diameter programming When diameter programming is selected, the positional values for the face turning axis in a motion block are interpreted as diameter values relative to the turning centre point. It should be noted that the programmed coordinates of the face turning axis only correspond to the workpiece diameter if the zero point of the face turning axis is located at the turning centre point (irrespective of whether offsets act as a diameter; see Programming example). The axis parameters can parameterise axes in "face turning” mode: • G51 with absolute programming (G90) (P-AXIS-00058) • … and/or G51 with relative programming (G91) (P-AXIS-00059 • Reference point programming (G92) and zero point programming (G53 – G59) in the diameter (P- CHAN-00091) G51 acts on the axis which is operated in "face turning” mode. When the face turning axis is selected, the face turning axis must exist in the machining plane (G17, G18, G19). The coordinates of the circle centre point (I, J, K) and circle radius programming (R) are not programmed in the diameter. Diameter programming is deselected with G52. 12 Version: 1.09 TF5200 | Twin CAT 3 CNC Turning functions
## Page 13

Description Diameter programming (G51/G52) in G18 ;General settings (optional): ;Display position values in the diameter P-CHAN-00256 (TRUE, 1) ;Settings of X axis: ;Face turning axis, translatory: P-AXIS-00015 (0x41) ;G51 with G90: P-AXIS-00058 (TRUE, 1) ;G51 with G91: P-AXIS-00059 (FALSE, 0)(optional) ;G92, G53–G59 in the diameter: P-CHAN-00091 (TRUE, 1) (optional) ;Settings of Z axis: ;Longitudinal turning axis, translatory: P-AXIS-00015 (0x81) ; N05 G18 N10 G90 G01 F1000 N20 G51 X80 ;diameter 80 mm N30 G92 X10 ;G92 by 10 mm in the diameter N40 X0 ;position 0 + G92 => diameter 10 mm N50 G91 X50 ;X relative +50mm, in the diameter N80 G52 ;deselect diameter programming ;… N90 M30 TF5200 | Twin CAT 3 CNC Version: 1.09 13 Turning functions
## Page 14

Description 2.1.2 Cutter radius compensation (G40/G41/G42) Syntax: G40 Deselect CRC modal, initial state G41 CRC left of contour modal G42 CRC right of contour modal Tool tip radius compensation (SRK) acts in the machining plane selected using G17, G18, G19 for turning work. In this plane, one of the axes must be operated in "face turning” mode and the other in "longitudinal turning” mode. ( axis mode: P-AXIS-00015) The data records stored in the D words are used as tool compensation values. For turning tools, the orientation of the cutter edge relative to the machining plane (face/longitudinal turning axis) must be specified in the parameter P-TOOL-00002 by an additional identifier 1...9 (see figure). Fig. 4: Orientation of cutter edge to machining plane. 14 Version: 1.09 TF5200 | Twin CAT 3 CNC Turning functions
## Page 15

Description A typical turning tool is characterised by the following values/parameters: • Tool type 1 (turning tool) • SRK orientation 1...9 • Tool radius Tool tip radius • Tool length -- • Tool offset (see figure below) F S r P TV X TV S: Cutter radius mid-point r: Cutter radius P: Theoretical tool cutter tip F: Tool slide reference point TV: Tool shift vector X P TV Z Z Fig. 5: Tool gauging for tool offset compensation. When specifying tool axis offsets, their mathematical sign should be noted since it refers to components of the tool offset vector in the machining plane. In the example of a turning tool shown in the above figure, the offsets in the direction of the X and Y axis both have negative (mathematical) signs. Tool offsets must be specified up to the theoretical tool top (point P). A change between turning tool and milling tool is permitted when G41 or G42 is selected. With absolute programming (G90) the current axis offset values of the new tool are included in the calculation for the next motion block depending on the tool type. TF5200 | Twin CAT 3 CNC Version: 1.09 15 Turning functions
## Page 16

Description 2.1.3 2D cutter radius compensation (CRC) and 5-axis kinematics This function is available as of CNC Build V3.1.3081.2 or V3.1.3108.1. This function allows 5-axis machines to also be used for conventional turn machining work. The driven milling tool is replaced by a fixed turning tool with a cutting insert. The kinematic ID identifies the related transformation as an element of the data set of kinematic parameters. The second rotary axis in the kinematic has no function in this application. It is replaced by a simulated axis and remains set to position 0. The physical C axis of the machine is commanded as a spindle and rotates the workpiece in continuous operation. The axis can therefore be configured as a spindle axis, for example, and be exchanged in coordinated motion for milling operation. The basic axis and channel parameters required for using cutter radius compensation are described in [FCT- S3]. For use with a 5-axis kinematic, the channel parameter P-CHAN-00456 must also be set as follows: trafo_mode TOOL_TIP_RADIUS_COMP_IN_PLANE 2D CRC can be used in combination with kinematics. The following kinematics support this function: • KIN_TYP_57 – 5-axis kinematics with B/C workpiece table • KIN_TYP_58 – Five-axis kinematics with A/C workpiece table The tool can be oriented in relation to the workpiece at the CRC level, enabling more complex contours to be machined on the facing and longitudinal turning sides using a tool cutter edge position. The CNC calculates CRC offsets depending on the orientation angle of the cutter edge in relation to the workpiece; the cutter edge is correctly guided during orientation motions. Fig. 6: Cutter radius compensation with kinematic 57 16 Version: 1.09 TF5200 | Twin CAT 3 CNC Turning functions
## Page 17

Description Position of the contact point depending on the orientation. The point designated by TTP denotes the tool tip point (Tool Tip Point). Each contact point is also dependent on the cutter edge position of the turning tool. See Cutter radius compensation (G40/G41/G42) [} 14] TF5200 | Twin CAT 3 CNC Version: 1.09 17 Turning functions
## Page 18

Description Cutter radius compensation with kinematic 57 %L SUB_MV_CUTTER_RADIUS_COMP N1100 G51 N1200 G18 N1300 G41 N1400 G01 G90 X100 Z30 F2000 N1500 X60 Z50 N1600 Z90 B45 N1700 X100 Z110 N1800 Z140 N1900 B0 N2000 X60 Z160 B-45 N2100 G40 N2200 G90 X100 Z180 B0 M29 %main N800 G01 G90 X0 Z200 F2000 N900 D1 ; -> CRC cutter edge position 3 N1000 M03 S500 N1100 #KIN ID[57] N1200 #TRAFO ON N1300 G90 B0 N1400 LL SUB_MV_CUTTER_RADIUS_COMP N1500 #TRAFO OFF M30 2.1.4 Feedrate per revolution (G95 / G94) G95 Feedrate in mm/revolution (modal) G94 Feed in mm/min (modal) When turning with active G95, a constant chip thickness can be defined using the F word in mm/rev, irrespective of the spindle speed (rpm) and provided that the path dynamics act with a limiting effect. The CNC calculates the current path feed from the current command spindle speed and the programmed feedrate per revolution. Here, the axis feedrate is linked to the rotational speed (rpm) of the position-controlled spindle. It is only valid in conjunction with the G function with which it was programmed. Therefore, if there is a change from G95 to G94 or G93, the F word valid for G95 is not adopted. Example: S: 1200 rpm, F: 1.5mm/rev -> VB = 1800mm/min Feedrate per revolution N10 F1000 X100 M3 S1200 ;feedrate 1000 mm/min G94 N20 G95 F1.5 ;feedrate 1.5 mm/rev, spindle speed 1200 rpm) N30 G94 X50 ;feedrate 1000 mm/min valid from N10 N40 G93 F20 X20 ;machining time 20 s N50 G95 Y200 S2000 ;feedrate 1.5 mm/rev valid from N20; ;spindle speed 2000 1/min) N60 M30 18 Version: 1.09 TF5200 | Twin CAT 3 CNC Turning functions
## Page 19

Description 2.1.5 Thread cutting with endlessly rotating spindle (G33) Single-start/multi-start threads When thread cutting with an endlessly rotating spindle (G33), the path motion is synchronised to the zero passage of the spindle rotation. Therefore, the thread can also be cut in several passes in succession. When an offset angle is specified as option, multi-start threads can also be produced. To achieve a good machining result and to minimise path errors, feedforward control can be selected for the spindle and for path axes. Programming Syntax example for ZX plane (longitudinal axis Z, feed axis X): G33 Z.. K.. [ <spindle_name>. OFFSET=.. ] modal G33 Thread cutting with endlessly rotating spindle. The G33 function is modal. The next motion block with a modal block type (G00, G01, G02, G03, spline, polynomial) deselects thread cutting. Z.. Target point ("thread length”) in [mm, inch] K.. The thread pitch is programmed with active thread cutting in the unit [mm/rev, inch/ rev] without a mathematical sign using the address letters I, J and K. They are assigned to the X, Y and Z axes according to DIN 66025. The thread pitch is modal up to program end and should not be zero on when G33 is selected. The feed is not programmed using the F word but results from the spindle speed and the thread pitch. The pitch of longitudinal or tapered threads at an inclination angle less than 45° is specified by the address letter K if the Z axis is the longitudinal turning axis. With facing or tapered threads with a pitch greater than or equal to 45°, the pitch is specified by I if the X axis is used as the face turning axis, and by J if the Y axis is used. The figure below shows examples for specifying thread pitch using the address letters in the Z-X plane. <spindle_name>. OFFS Thread offset angle in [°] in spindle modulo range. Only required as an option for ET=.. multi-turn threads. The offset angle is modal up to program end. Spindle name according to P-CHAN-00053. The "=” character is optional. TF5200 | Twin CAT 3 CNC Version: 1.09 19 Turning functions
## Page 20

Description Pitch values I, K with longitudinal thread K I X Z Fig. 7: Value of thread pitch for longitudinal thread Pitch values I, K with tapered thread K I a X Z Fig. 8: Value of thread pitch for tapered thread 20 Version: 1.09 TF5200 | Twin CAT 3 CNC Turning functions
## Page 21

Description Thread cutting with endlessly rotating spindle (G33) G33 Z.. K.. [S. OFFSET=..] Fig. 9: Representation of geometry example TF5200 | Twin CAT 3 CNC Version: 1.09 21 Turning functions
## Page 22

Description Cutting a longitudinal thread (M70x1.5) with several cuts: %L longit_thread N100 G33 Z48 K1.5 ;Cut thread turn N110 G00 X72 ;Retract and move N120 Z105 ;to start position N130 M29 ;Subroutine end %G33 (thread depth 0.92 mm) N10 G51 ;Select diameter programming N15 T1 D1 M03 S400 ;Select tool, start spindle N20 G00 X72 Z105 ;Approach N25 G01 X69.54 F1000 ;Position at 1st cutting depth N30 LL longitudinal thread ;1st thread cut N35 G01 X69.08 ;Position at 2nd cutting depth N30 LL longitudinal thread ;2nd thread cut N35 G01 X68.62 ;Position at 3rd cutting depth N30 LL longitudinal thread ;3rd thread cut N35 G01 X68.16 ;Position at final depth N30 LL longitudinal thread ;4th thread cut N35 G01 X68.16 ;Reposition at final depth N30 LL longitudinal thread ;Empty cut N60 M05 X150 Z200 ;Moving to end position N65 M30 ;Program end Cut a 2-turn longitudinal thread (M70x1.5) %G33_2 (2-turn thread, thread depth 0.92 mm) N10 G51 ;Select diameter programming N15 T1 D1 M03 S40 ;Select tool, start spindle N20 G00 X72 Z105 ;Approach N25 G01 X68.16 F1000 ;Position at thread depth N30 G33 Z48 K1.5 ;Cut 1st thread turn N35 G00 X72 ;Retract and move N40 Z105 ;to next N45 G01 X68.16 ;start position N50 G33 Z48 K1.5 S. OFFSET=180 ;Cut 2nd thread turn at 180° N55 G00 X72 ;Retract and move N60 M05 X150 Z200 ;to end position N65 M30 ;Program end 22 Version: 1.09 TF5200 | Twin CAT 3 CNC Turning functions
## Page 23

Description Cutting a tapered thread %L tapered thread N010 G33 Z90 X1 I5.0 ;Cut thread turn (reference I) ; N010 G33 Z90 X1 K5.0 ;Cut thread turn (reference K) N020 G00 X72 ;Retract and move N030 Z105 ;to start position N040 M29 ;Subroutine end %G33 N050 G00 X0 Y0 Z0 N060 G18 N070 G51 ;Select diameter programming N080 D1 M03 S1 ;Select tool, start spindle N090 G00 X105 Z105 ;Start N100 G01 X100 F1000 ;Position at 1st cutting depth N110 LL tapered thread ;1st thread cut N120 M05 X150 Z200 ;Move to end position N130 M30 ;Program end TF5200 | Twin CAT 3 CNC Version: 1.09 23 Turning functions
## Page 24

Description 2.1.6 Thread cutting at actual spindle speed When cutting a thread, the spindle speed may tend to deviate under load. In order to execute thread tapping in such cases, the motion of the linear axes can be directly coupled to the spindle's actual speed. This means that a path motion is also synchronised to the zero passage of the actual positions. To avoid set value jumps in path axes, a very noisy actual spindle speed can be smoothed by an averaging filter. Function available as of V3.01.3080.16. The function is activated either with Channel parameters [} 52] or with the NC command #TURN [} 36] [THREAD_CUT_ACT_SPEED=1 …]. Thread cutting at actual spindle speed] Define in channel parameters: thread_cutting.use_actual_speed 1 ( P-CHAN-00834 [} 52]) thread_cutting.n_cycles 5 ( P-CHAN-00835 [} 53]) Alternative definition in NC program: #TURN[THREAD_CUT_ACT_SPEED=1 THREAD_CUT_N_CYCLES=5] Thread cutting at actual spindle speed %spindle_test.nc (Thread cutting at actual speed) N15 M03 S40 ; Start spindle N20 G00 X72 Z105 ; Approach N25 G01 X68.16 F1000 ; Position at thread depth N30 G33 Z48 K1.5 ; 1. Cut thread turn at command speed N35 G00 X72 ; Retract N40 Z105 ; and move N45 G01 X68.16 ; to next start position ; Thread cutting at actual speed and filtered values N50 #TURN[THREAD_CUT_ACT_SPEED=1 THREAD_CUT_N_CYCLES=20] ; 2. Cut thread turn at 180° at actual speed N55 G33 Z10 K1.5 S. OFFSET=180 N60 G00 X72 ; Retract and move N65 M05 X150 Z200 ; to end position N70 M30 2.1.7 Thread chain Before a thread cutting block, synchronisation normally takes place with the spindle axis involved in the cutting process. The thread chain function allows multiple thread cutting blocks to be strung together. They are then processed together on the path without motion stop. Fig. 10: Thread chain 24 Version: 1.09 TF5200 | Twin CAT 3 CNC Turning functions
## Page 25

Description This function is available as of V3.1.3081.11 or V3.1.3118.0 The function is activated either by P-CHAN-00837 [} 53] or by the NC command #TURN [} 36] [THREAD_CHAIN=1]. NOTICE Any override changes in a thread chain are ineffective. TF5200 | Twin CAT 3 CNC Version: 1.09 25 Turning functions
## Page 26

Description Thread chain with 5 thread cutting blocks %Thread_chain N010 G74 S1 N020 M03 S2000 N030 G90 G51 N040 #TURN [THREAD_CHAIN = 1] N050 G0 X100 Z0 Z500 N060 G33 Z100 K5 N070 G33 Z200 X140 N080 G33 Z300 N090 G33 Z350 X100 N100 G33 Z450 K7.5 N110 G0 Z500 N120 M05 N130 M30 Fig. 11: Thread chain with 5 thread cutting blocks 26 Version: 1.09 TF5200 | Twin CAT 3 CNC Turning functions
## Page 27

Description 2.1.8 Constant cutting speed (G96/G97/G196) Syntax: G96 Selecting constant cutting speed modal G97 Deselecting constant cutting speed, selecting spindle speed modal, initial state G196 Maximum spindle speed for G96 G196 non modal max. speed modal Using the G functions G96, G97 and G196, it is possible to optionally change the interpretation of the S word: G96 S in [m/min or ft/min *] (cutting speed) G97 S in [rpm] (spindle speed ) G196 S in [rpm] (max. spindle speed during G96) * [as of Build V2.11.2032.08 with G70 and P-CHAN-00360 = 1] When selected with G96, the starting rpm of the spindle is calculated from the programmed cutting speed and the distance of the tool tip to the turning centre point. This distance results from the last (not in the current NC block) programmed position and the reference point offset of the face turning axis. Exactly one face turning axis must be present in the current machining plane (G17, G18, G19). A cutting speed programmed for G96 using the S word is only valid until it is deselected by G97. With G96, constant cutting speed is only activated when the S word is programmed. Specifying a maximum spindle speed with G196 in conjunction with the S word is optional and only active during G96. Spindle speed limiting must be programmed before G96 is selected. Fig. 12: Spindle speed with active G96 Extended G function G196 As of Build V3.1.3057.04 Alternatively, the maximum spindle speed can be programmed as an additional value in [rpm] in conjunction with G196. It is modal. This syntax permits the programming of G196 and G96 in the same NC block. A separate specific NC block is not required. TF5200 | Twin CAT 3 CNC Version: 1.09 27 Turning functions
## Page 28

Description Syntax: G196 = <Max_spindle_speed> G196 non modal, max. speed modal Close to the turning centre point, the programmed maximum spindle speed (G196) or the maximum spindle speed specified in the assigned axis parameters P-AXIS-00212 defines the limits of the constant cutting speed. When deselected with G97, the last spindle speed set is retained. Motion blocks of the face turning axis in rapid traverse (G00) lead to an interruption of G96 to prevent undesired speed value changes when the tool is positioned. The next motion block with G01, G02 or G03 cancels suppression of G96. 28 Version: 1.09 TF5200 | Twin CAT 3 CNC Turning functions
## Page 29

Description Constant cutting speed (G96/G97/G196) ; X is the face turning axis N10 M03 S1000 G01 F1500 X100 N20 G196 S6000 ;max. speed 6000 rpm N30 G96 S63 ;select const. cutting speed 63 m/min, ;workpiece radius 100mm corresp. to X coordinates N40 X80 N50 S4 X50 ;new cutting speed 4m/min; workpiece radius 80mm, ;at block end 50mm N60 G97 ;max. speed 6000 rpm not effective here! N80 G92 X-10 ;reference point offset in X by -10mm N90 G96 X60 ;cutting speed from N50 not valid: const. ;cutting speed not active, speed 8000 rpm N100 S25 X70 ;cutting speed 25m/min, workpiece radius 50mm, ;(=60mm+BPV), const. cutting speed active N110 G00 X450 ;rapid traverse: speed remains constant N115 X70 N120 G01 X40 ;suppress G96 cancelled N110 M30 TF5200 | Twin CAT 3 CNC Version: 1.09 29 Turning functions
## Page 30

Description 2.1.9 Constant cutting speed at feedrate per revolution (G96, G95) When combined with the functions G96 and G95, a constant chip thickness and constant cutting speed (*) are obtained. The path feed is adapted to the spindle speed. When face turning, the following path speed curve results depending on the X position (turning radius). The path feed increases towards the turning centre point. (*) Provided the dynamics of the spindle and path do not result in limiting effects. Fig. 13: Path feed for G96 at G95 Constant cutting speed at feedrate per revolution ; X... Face turning axis N10 M03 S2000 G01 X60 Z100 F1500 N20 G196 S2500 ;max. Speed 2500 1/min N25 G95 F1.5 ;feedrate per revolution 1.5mm/rev N30 G96 S100 ;const. cutting speed 100m/min N40 Z49 N50 X10 N60 G00 Z50 N70 X60 ;rapid traverse: speed remains constant N80 Z48 N90 G01 X10 ;suppress G96 cancelled N100 G97 ;Deselect const. cutting speed N110 G94 ;deselect feedrate per revolution N120 M30 30 Version: 1.09 TF5200 | Twin CAT 3 CNC Turning functions
## Page 31

Description 2.1.10 Tapping (G331/ G332) This function is available as of CNC Build V3.1.3067.01. Syntax example of tapping in Z direction: G331 Z.. K.. <spindle_name>.. Thread tapping modal G332 Z.. [ K.. ] [ <spindle_name>.. ] Thread tapping, retract modal G331 Thread tapping Z.. Thread depth (target point) in the tapping axis in [mm, inch] K.. Thread pitch in assigned interpolation parameter in [mm/rev, inch/rev] <spindle_name>.. Spindle speed consisting of spindle name according to P-CHAN-00053 and speed value in [rpm] G332 Retract from threaded bore (Retract). G332 causes an automatic direction reversal of the spindle on retraction. Z.. Retract position of tapping axis after tapping in [mm, inch] K.. Thread pitch in assigned interpolation parameter in [mm/rev, inch/rev]. The thread pitch must be the same pitch as used for the threaded bore assigned in G331. The parameter is optional. If not programmed, the pitch in block G331 applies. <spindle_name>.. Spindle speed consisting of spindle name according to P-CHAN-00053 and speed value in [rpm]. The parameter is optional. If not programmed, the speed in block G331 applies. This type of tapping (G331/ G332) requires a position-controlled spindle which is tracked by the CNC synchronous to the path motion. In this case the spindle and the feed motion of the participating axes are matched precisely and dynamically. A compensatory chuck is not required. The thread type is defined by specifying a sign for thread pitch. • Pitch without or with positive sign (+): Right-hand thread, e.g. K2 or K+2 • Pitch with negative sign (-): Left-hand thread, e.g. K-2 The thread tapping axis feedrate is a product of the programmed pitch and the spindle speed. The permissible speed limits apply to the internal calculation. An error message is output if these limits are violated. The feed rate continues to apply after tapping is completed. With the following G331/G332, the feedrate is again calculated from the related programmed or saved values of pitch and spindle speed. G331/G332 is deselected by selecting a different modal block type (e.g. linear motion G01) and the spindles are released from the coordinated motion. A non-modal block type (e.g. dwell time with G04) does not deactivate G331/ G332. An error message is output if the pitch or spindle speed with G331/G332 are equal to zero or the tapping axis and pitch parameters fail to match. Valid combinations are X with I, Y with J and Z with K. M03, M04, M05, M19 cannot be programmed in combination with G331/G332. TF5200 | Twin CAT 3 CNC Version: 1.09 31 Turning functions
## Page 32

Description NOTICE The spindle (or the thread tapping drill) must be at standstill when G331 is selected. This can be achieved by previously programming M05 (Stop spindle) or M19 with S. POS (Position spindle). Tapping (G331/ G332) Tap right-hand thread with pitch 2 mm, thread depth 50 mm, spindle speed S 200 rpm, Z is tapping axis: ;… G01 F2000 G90 X0 Y0 Z0 ; position axes M19 S. POS=0 M3 S100 ; stop and position spindle ;… G331 Z-50 K2 S200 ; tap in Z G332 Z10 K2 S200 ; retract G01 F1000 X50 ; reposition, deselect tapping G331 Z-50 K2 S200 ; tap in Z G332 Z10 K2 S400 ; retract at increased speed G01 F1000 X100 ; reposition, deselect tapping G331 Z-50 K2 S200 ; tap in Z G332 Z10 ; retract, K and S from G331 G01 F1000 X150 ; reposition, deselect tapping ;… Tap right-hand thread with pitch 1.5 mm, thread depth 60 mm, spindle speed S 150 rpm, X is tapping axis: ;… G01 F2000 G90 X100 Y0 Z0 ; position axes M19 S. POS=0 M3 S100 ; stop and position spindle ;… G331 X40 I1.5 S150 ; tap in X G332 X110 I1.5 S150 ; retract : 32 Version: 1.09 TF5200 | Twin CAT 3 CNC Turning functions
## Page 33

Description Tap at relative speed %Tap at relative speed N010 G91 G19 G0 X100 M03 S2000 N020 S2[MC_Gear In Master=S1 \ ; couple tool RN=1 RD=1 Mode=256 \ ; spindle S2 to the Phase Shift=1800000 WAIT_SYN] ; main spindle S1 N030 #MAIN SPINDLE[S2] ; main spindle tool spindle S2 N040 G331 Z-100 K1.5 S200 ; tap right-hand thread N050 G332 Z100 K1.5 S200 ; retract from threaded bore N060 G01 X300 F1000 N070 S2[MC_Gear Out WAIT_SYN] ; release coupling to main spindle N080 #MAIN SPINDLE[S1] N090 M30 TF5200 | Twin CAT 3 CNC Version: 1.09 33 Turning functions
## Page 34

Description 2.1.11 Thread drilling without compensating chuck (G63) Syntax example of tapping in Z direction: G63 Z.. F.. <spindle_name>.. modal G63 Thread tapping Z.. Thread depth (target point) in the tapping axis in [mm, inch] F.. Feed rate in [mm/min, m/min, inch/min] <spindle_name>.. Spindle speed consisting of spindle name according to P-CHAN-00053 and speed value in [rpm] With this kind of tapping (G63) the position-controlled spindle is tracked by the CNC synchronously to the path motion. In this case the spindle and the feed motion of the participating axes are matched precisely and dynamically. A compensatory chuck is not required. The programmed feed rate must match the programmed spindle speed and the thread pitch and is calculated as follows: Feed rate F [mm/min] = speed S [rpm] * pitch [mm/rev] G63 is deselected by the selecting a different modal block type (e.g. linear motion G01). A non-modal block type (e.g. dwell time with G04) does not deactivate G63. The path feed rate (F word) and spindle speed (S word) do not necessarily need to be specified in the same NC block as G63. The feed rate calculation must always be based on the last values programmed. An error message is output if the path feed rate or spindle speed are equal to zero with G63 is selected. M03, M04, M05, M19 cannot be programmed in combination with G331/G332. NOTICE The spindle (or the thread tapping drill) must be at standstill when G63 is selected. This can be achieved by previously programming M05 (Stop spindle) or M19 with S. POS (Position spindle). Cutting a left-hand thread or movement out of a thread hole is programmed with a negative S value. In C axis mode, the gear stage can be defined using the parameter P-AXIS-00052. 34 Version: 1.09 TF5200 | Twin CAT 3 CNC Turning functions
## Page 35

Description Tapping (G63) Tap a right-hand thread with pitch 1.25 mm, thread depth 50 mm. At a programmed spindle speed S of 200 rpm the calculated feedrate is: F = 200*1.25 = 250 mm/min ;… G01 F2000 G90 X0 Y0 Z0 ; position axes M19 S. POS=0 M3 S100 ; stop and position spindle ;… G63 Z-50 F250 S200 ; tap Z0 S-200 ; retract from threaded bore G01 F1000 X100 ; reposition, deselect tapping : Tapping (G63) %Tapping_G63 N05 X0 Y0 Z0 N10 G91 Z100 N20 M19 S. POS180 M3 S100 ; position spindle N30 G63 Z-50 F300 S200 ; tap N40 Z100 S-200 ; retract from threaded bore N50 G01 X200 F3000 ; reposition, deselect tapping N60 G63 Z-70 F300 S200 ; tap N70 Z100 S-200 ; retract from threaded bore N80 M05 G01 X300 F1000 N90 M30 A thread can also be executed in a rotating workpiece using G63 or G331/G332. The thread tapping drill feedrate results from the speed difference between the tool spindle and the driven thread tapping drill. Before starting the actual tapping, the spindle with the thread tapping drill must be coupled to the workpiece spindle at a synchronous speed. No spindle stop is required to start tapping or to establish the speed coupling. The process can be started on the fly both for the tool and the workpiece spindles. TF5200 | Twin CAT 3 CNC Version: 1.09 35 Turning functions
## Page 36

Description 2.1.12 Thread tapping with spindle actual positions When tapping a thread, the spindle speed may tend to deviate under load. In order to execute thread tapping in such cases, the movement of the linear axes can be directly coupled to the spindle's actual positions. This function is available as of Build V3.01.3080.04. The function is activated either with P-CHAN-00761 [} 52] or with the NC command #TURN [} 36] [TAPPING_ACT_POS=1 …] Thread tapping with spindle actual positions Set the following parameters: tapping.use_actual_position 1 ( P-CHAN-00761 ) tapping.n_cycles 5 ( P-CHAN-00762 ) NC program %tapping.nc ; tapping command speed S=200rpm, ; right-hand thread with 1.5mm pitch N05 G0 Z10 X0 ; thread tapping with unfiltered actual positions N10 M19 S. POS=0 M3 S1000 N20 #TURN[TAPPING_ACT_POS=1 TAPPING_N_CYCLES=0] N30 G63 Z-150 F300 S200 N40 G63 Z10 S-200 N50 G0 X20 ; tapping with filtered actual positions N60 M19 S. POS=0 M3 S1000 N70 #TURN[TAPPING_N_CYCLES=5] N80 G331 Z-150 K1.5 S200 N90 G332 Z10 K1.5 S200 N100 G0 X40 ; tapping with command positions N110 M19 S. POS=0 M3 S1000 N120 #TURN[TAPPING_ACT_POS=0] N130 G63 Z-150 F300 S200 N140 G63 Z10 S-200 N160 M30 2.1.13 Settings for turning functions (# TURN) This function is available as of CNC Build V3.1.3079.03. The #TURN command can influence rotary functions. Syntax: #TURN [ [ROT_FEED_CPL=..] [TAPPING_ACT_POS=..] [TAPPING_N_CYCLES=..] [THREAD_CUT_ACT_SPEED =..] [THREAD_CUT_N_CYCLES =..] [THREAD_CUT_IGNORE_OV =..] [THREAD_CHAIN =..]] ROT_FEED_CPL=.. Influence of axis couplings on the revolution feed rate with G95 0 : Axis couplings are not considered (default) 1 : Axis couplings are considered TAPPING_ACT_POS=.. Enable tapping at actual spindle positions. (analogous to Channel parameters [} 52]) 0: The spindle is coupled to the command positions of the linear axis. 1: The linear axes are coupled to the actual spindle positions. 36 Version: 1.09 TF5200 | Twin CAT 3 CNC Turning functions
## Page 37

Description Available as of V3.1.3080.04 TAPPING_N_CYCLES=.. Number of filter cycles to filter actual spindle positions. (Analogous to Channel parameters [} 52]) Value range: 0 … 20 0: Filter is deactivated. Available as of V3.1.3080.04 THREAD_CUT_ACT_SP Enable thread cutting at actual spindle speed. (Analogous to Channel parameters EED=.. [} 52]) 0: The linear axes are coupled to the command spindle speed. 1: The linear axes are coupled to the actual spindle speed. Available as of V3.1.3080.16 THREAD_CUT_N_CYCL Number of filter cycles to filter actual spindle speed. (Analogous to Channel ES=.. parameters [} 53]) Value range: 0 … 20 0: Filter is deactivated. Available as of V3.1.3080.16 THREAD_CUT_IGNORE During thread cutting G33 [} 19] it can be specified whether an evaluation of the _OV=.. speed override should take place (analogous to P-CHAN-00836 [} 53]) 0: Override changes are included in the thread cutting block G33 1: Override changes are not included in the thread cutting block G33 Available as of Build V3.1.3081.11 or V3.1.3118.0 THREAD_CHAIN=.. Thread chain: Linking and contouring G33 [} 19] thread cutting blocks (analogous to P-CHAN-00837 [} 53]) 0: Each thread cutting block G33 is processed separately and synchronised with the spindle axis before every thread cutting operation 1: The following thread cutting blocks are regarded as a thread chain. Contouring takes place between the thread cutting blocks G33 without motion stop. Available as of Build V3.1.3081.11 or V3.1.3118.0 TF5200 | Twin CAT 3 CNC Version: 1.09 37 Turning functions
## Page 38

Description 2.2 Functions for lathes / milling machines These functions can be used for turning and milling work; the participating axes and the spindle axis are interpolated in the coordinated motion. 2.2.1 C axis machining Axis configuration in the NC channel Axis identifier X, Y, Z, S Axis index 0, 1, 2, 3 Kinematic structure (ID13, ID14, ID 15) Tool axes Workpiece axes NC axes X, Y, Z (S) C This functionality supplements the existing turning functions and permits the face and lateral surface machining of cylindrical workpieces on lathes and milling machines with revolving base. The workpiece is moved by the rotary axis or spindle (C axis) and the driven tool (e.g. a milling cutter) by the two translatory axes X (or Y) and Z. Specific ettings are required in the parameters P-CHAN-00008, P-AXIS-00015 and P- AXIS-00018 for C axis machining. Example of a configuration of a C axis in the axis parameters kenngr.achs_typ 0x0002 #Path axis or kenngr.achs_typ 0x0004 #Spindle axis kenngr.achs_mode 0x0204 #MODULO and CAX Facing and lateral surface machining can be described in Cartesian coordinates. All interpolation types (such as linear, circular or spline interpolation) are supported on the end face and lateral surface. The functionality also permits the machining of path contours running through the turning centre point. The C axis is automatically aligned on lathes. The 2.5D tool radius compensation can be used with the familiar G commands. The use of extended dynamic monitoring can specifically prevent dynamic axis characteristics from being exceeded with the C axis function and also with contours running close to the turning centre point. The main axes for all machining modes are X, Y (depending on machine type), Z and C. 38 Version: 1.09 TF5200 | Twin CAT 3 CNC Turning functions
## Page 39

Description 2.2.1.1 Exchange spindles in coordinated motion (# CAX, #CAX OFF) This "basic mode" is required in particular for C axis machining on lathes because in this case the position- controlled spindle has to be converted into a rotary path axis (e.g "C"). C axis machining can also be executed on milling machines or machining centres which are de- signed with rotary workpiece fixtures (e.g. turntable). In this case, it is not necessary to select #CAX. The three physical axes X, Y, Z and the C axis replaced in coordinated motion can be directly programmed. Linear axes are programmed in Cartesian coordinates and the C axis in angle units. Radius and diameter programming depends on G52/G51. Two linear axes define the main plane: ZX (G18) or YZ (G19). Syntax: #CAX [ [ [<main_spindle_name>, ] <C_axis_name> ] ] <main_spindle_name> Only the main spindle name can be programmed according to P-CHAN-00053. If a spindle other than the C axis is used, it must first be declared as the main spindle (see programming example in Section [PROG// Changing the main spindle]). Otherwise, an error message is output. <C_axis_name> Freely definable name of the C axis in the NC program. If no C axis name is programmed, the default name from P-CHAN-00010 is used. The main plane (circular interpolation, tool radius compensation, etc.) remains the same as before activation of the C axis. An error is generated if a command for this spindle (M3, M4, M5, etc.) is programmed although the axis is still declared as a C axis in the coordinated motion. The C axis is deselected, i.e. the axis is released to the spindle interpolator, by the following: Syntax: #CAX OFF TF5200 | Twin CAT 3 CNC Version: 1.09 39 Turning functions
## Page 40

Description C axis machining Exchange spindles in coordinated motion ;… #CAX ; Assuming: default C axis is "C" G01 G90 X50 Z10 C90 F200 #CAX OFF ; deselect C axis mode ;... #CAX[S, C] or #CAX[C] ; Assuming: main spindle is "S" G01 G90 X50 Z10 C90 F200 #CAX OFF ;... #MAIN SPINDLE [S2] ; “S2” becomes new main spindle “S” #CAX[S, C] ; select C axis mode G01 G90 X50 Z10 C90 F200 ;... #CAX OFF ; deselect C axis mode ;... #CAX[S3, C]; Error, “S3“ is not the main spindle 2.2.1.2 Face machining (#FACE, #FACE OFF) This mode is selected for lathes and machining centres. The desired contour on the face is programmed in millimetres or inches using a virtual Cartesian coordinate system. Fig. 14: Face machining As of CNC build V3.00, the parameter P-CHAN-00262 [} 57] must be assigned with the kinematic ID used, depending on P-CHAN-00008 [} 57], in order to perform face machining applications. • For face transformation 1 with P-CHAN-00008=1 - ID 13 • For face transformation 2 with P-CHAN-00008=2 - ID 14 The three logical axes X, Y (or C) and Z are provided to program the contour on the face in Cartesian coordinates. Fig. 15: Front view of face machining process The figure below shows each of the main planes in face machining. Only the G17 plane is of technological importance. 40 Version: 1.09 TF5200 | Twin CAT 3 CNC Turning functions
## Page 41

Description Fig. 16: Main planes of face machining For more setting options for face machining, see [KITRA// KIN_TYP_13/14] Syntax: #FACE [ <name of 1st main axis>, <name of 2nd main axis> ] <name of 1st main Name of the first main axis according to the current main plane. axis> <name of 2nd main Name of the second main axis according to the current main plane (virtual axis> Cartesian axis). When selected. the main plane (circular interpolation, tool radius compensation, etc.) is always defined by the 1st and 2nd main axes (G17). It is not permitted to change the main plane with G18, G19 while face machining is active. Programmed tracking axes are not affected by the transformation. This mode is deselected by: Syntax: #FACE OFF TF5200 | Twin CAT 3 CNC Version: 1.09 41 Turning functions
## Page 42

Description Use #FACE OFF to revert to the previously active state. This means that the last active main plane is selected automatically and the last active axis offsets are restored. Programming example for lathes Example with axis name "C" for 2nd main axis ;… #CAX[S, C] ;Assuming main spindle is "S" #FACE[X, C] ;Select face machining ;… G01 X40 C-30 Z50 F1000 ;Pre-position G01 Z30 ;Feed G01 X10 C40 ;Travel contour G01 Z50 ;Retract ;… #FACE OFF #CAX OFF ;… M30 Example with axis name "Y" for 2nd main axis. Note: No other axis with the identical name "Y" may exist in NC channel. ;… #CAX[S, Y] ;Assuming main spindle is "S" #FACE[X, Y] ;Select face machining ;… G01 X40 Y-30 Z50 F1000 ;Pre-position G01 Z30 ;Feed G01 X10 Y40 ;Travel contour G01 Z50 ;Retract ;… #FACE OFF #CAX OFF ;… M30 42 Version: 1.09 TF5200 | Twin CAT 3 CNC Turning functions
## Page 43

Description Programming example for machining centres The rotary axis (workpiece axis) in the channel is "C2". It is not necessary to program the #CAX command. ;… #FACE[X, C2] ;Select face machining ;… G01 X40 C2=-30 Z50 F1000 ;Pre-position G01 Z30 ;Feed G01 X10 C2=40 ;Travel contour G01 Z50 ;Retract ;… #FACE OFF ;… M30 TF5200 | Twin CAT 3 CNC Version: 1.09 43 Turning functions
## Page 44

Description 2.2.1.2.1 Face machining with 2 rotary axes (#FACE 2ROT, #FACE OFF) Kinematic ID 203 is required for face machining with two rotary axes, The tool is then supported by the rotary axis Y and the translatory axis Z. The workpiece is aligned by the rotary axis C. Transformation can be switched by the command #FACE 2ROT. The user programs X, Y, Z on the tool face in the Cartesian system. The C axis must have a modulo range of 0° to 360°, see P-AXIS-00126 and P-AXIS-00127. In order to use this face machining, the value 203 must be assigned to P- CHAN-00262 [} 57] for this transformation. Syntax: #FACE 2ROT [AX1=<name> AX2=<name> AX3=<name>] | [AXNR1=.. AXNR2=.. AXNR3=..] AX1=<Name> Designation of first axis AX2=<Name> Designation of second axis AX3=<Name> Designation of third axis AXNR1=.. Logical axis number P-AXIS-00016 [} 62] of first axis AXNR2=.. Logical axis number P-AXIS-00016 [} 62] of second axis AXNR3=.. Logical axis number P-AXIS-00016 [} 62] of third axis This mode is deselected by: Syntax: #FACE OFF 44 Version: 1.09 TF5200 | Twin CAT 3 CNC Turning functions
## Page 45

Description 2.2.1.3 Surface machining (#CYL, #CYL OFF) This mode can be selected for lathes and machining centres. The desired contour on the cylindrical surface is programmed in millimetres or inches using a virtual coordinate system. Fig. 17: Lateral surface machining As of CNC build V3.00, the parameter P-CHAN-00262 [} 57] must be assigned with the vale 15 for this transformation in order to perform lateral surface machining ap- plications. Depending on the machine type, the three logical axes X, Y, Z are provided to program the contour in Cartesian coordinates on the lateral surface. As a general rule, the Y axis is not present on lathe-only machines. The workpiece radius must also be included in the programming as reference radius R. TF5200 | Twin CAT 3 CNC Version: 1.09 45 Turning functions
## Page 46

Description The main plane in lateral surface machining is formed by Z-C. Lateral surface machining in G17 An axis configuration Z-C is formed by specifying the first and second main axes with #CYL [...]. This implicitly defines a main plane in G17. The reference radius must also be specified. Syntax: #CYL [ <1st_main_axis_name>, <2nd main_axis_name>, <3rd_main_axis_name>..] <1st_main_axis_name Name of the first main axis according to the current main plane. > <2nd Name of the second main axis according to the current main plane (virtual linear main_axis_name> axis, development). <3rd_main_axis_name Axis name of the third main axis according to the current main plane with >. specification of the reference radius in [mm, inch]. Programmed tracking axes are not affected by the transformation. It is not permitted to change the main plane with G18, G19 while lateral surface machining is active This mode is deselected by: Syntax: #CYL OFF Use #CYL OFF to revert to the previously active state. This means that the last active main plane is selected automatically and the last active axis offsets are restored. 46 Version: 1.09 TF5200 | Twin CAT 3 CNC Turning functions
## Page 47

Description Programming example for lathes, programming in G17 with Z-C Example with axis name "C" for 2nd main axis … #CAX [S, C] ;Assuming “S” is main spindle G01 X60 C45 F800 ;Feed and positioning movement; X:60mm C:45° #CYL [Z, C, X60] ;Select lateral surface machining G00 G90 Z0 C0 ;Z: 0mm C:0mm! G01 C100 F500 G02 Z100 R50 G01 C0 Z0 … #CYL OFF #CAX OFF M30 Lateral surface machining in G19 Use #CYL LATERAL [...] to create an axis configuration which, in combination with G19, allows programming in the virtual coordinate system C-Z. The reference radius must also be specified. Syntax: #CYL LATERAL [ RADIUS=.. ] RADIUS=.. Specify reference radius in [mm, inch]. Programmed tracking axes are not affected by the transformation. After #CYL LATERAL, the use of G17 or G18 is also permitted; this may be necessary for special machining cases. This mode is deselected by: Syntax: #CYL OFF Use #CYL OFF to deselect lateral surface machining and restore the previously active axis configuration with the associated axis offsets. The currently valid main plane remains active. TF5200 | Twin CAT 3 CNC Version: 1.09 47 Turning functions
## Page 48

Description Programming examples for lathes, programming in G19 with C-Z %cyl_lat_A N020 G00 X0 Y0 Z0 N020 #CAX [S,C] N030 G00 X0 Y0 Z100 C0 N040 #CYL LATERAL [RADIUS=35] ;Deselect lateral surface machining N060 G19 ;Select G19 plane N070 G01 G90 Z0 C0 F5000 N080 G01 G90 X10 F5000 N090 $FOR P2=1, 5, 1 N100 P3=P2*4 N110 P4=P3+2 N120 G01 G91 C-P3 N130 ZP3 N140 C[2*P3] N150 Z-P3 N160 G90 C0 N170 G91 ZP4 N180 $ENDFOR N190 $FOR P2=1, 5, 1 N200 P3=P2*4 N210 P4=P3*2+2 N220 G90 G02 KP3 N230 G91 G01 ZP4 N240 $ENDFOR N270 #CYL OFF N280 #CAX OFF N290 M30 Fig. 18: Example 1 for #CAX LATERAL with G19 48 Version: 1.09 TF5200 | Twin CAT 3 CNC Turning functions
## Page 49

Description %cyl_lat_B N020 G00 F2000 X0 Y0 Z0 N030 #CAX [S, C] N040 #CYL LATERAL [RADIUS=20] N060 G19 N070 G01 F1000 Z0 C0 X0 G161 N080 G02 J30 K0 C60 F2000 N090 G02 J30 K0 C0 N100 G02 J0 K30 Z60 N110 G02 J0 K30 Z0 N120 G03 J-30 K0 C-60 N130 G03 J-30 K0 C0 N140 G03 J0 K-30 Z-60 N150 G03 J0 K-30 Z0 N180 #CYL OFF N190 #CAX OFF N210 M30 Fig. 19: Example 2 for #CYL LATERAL with G19 TF5200 | Twin CAT 3 CNC Version: 1.09 49 Turning functions
## Page 50

Description 2.2.1.3.1 Lateral surface machining with 2 rotary axes (#CYL 2ROT, #CYL OFF) Turning work in the Cartesian system. The tool is supported by the translatory axes X, Z and the rotary axis Y. The workpiece is aligned by the rotary axis C. Transformation can be switched by the command #CYL 2ROT. The user programs X, Y, Z in the Cartesian system. In addition, the dimension C of the tool angle is programmed in the X-Y plane. When C=0, the tool is parallel to X and vertical on Y. In order to use this lateral surface machining, the value 202 must be assigned to P- CHAN-00262 [} 57] for this transformation. The kinematic is available in two variants. 1. In the LEFT variant (HD10 = 0) the C axis is located to the left of the Y axis. The Y axis points to the left in zero position. When transformation is selected, the X axis must be located to the right of the C axis. 2. In the RIGHT variant (HD10 = 1) the C axis is located to the right of the Y axis. The Y axis points to the right in zero position. When transformation is selected, the X axis must be located to the left of the C axis. The C axis must have a modulo range of 0° to 360°, see P-AXIS-00126 and P-AXIS-00127. Syntax: #CYL 2ROT [AX1=<name> AX2=<name> AX3=<name>] | [AXNR1=.. AXNR2=.. AXNR3=..] AX1=<Name> Designation of first axis AX2=<Name> Designation of second axis AX3=<Name> Designation of third axis AXNR1=.. Logical axis number Axis parameter [} 62] of first axis AXNR2=.. Logical axis number Axis parameter [} 62] of second axis AXNR3=.. Logical axis number Axis parameter [} 62] of third axis This mode is deselected by: Syntax: #CYL OFF 50 Version: 1.09 TF5200 | Twin CAT 3 CNC Turning functions
## Page 51

Parameter 3 Parameter 3.1 Overview Constant Description SLOPE_VB_MA Maximum axis speed that can be parameterised X ACHS_NAME_L Maximum length of the axis designation AENGE ID Parameter Description P-CHAN-00082 spdl_anzahl Number of spindles in the channel P-CHAN-00036 log_achs_nr Spindle axis number P-CHAN-00007 bezeichnung Spindle designation P-CHAN-00010 default_ax_name_of_s Name of the spindle as channel axis pindle P-CHAN-00043 m19_synch Synchronisation type of the M19 function P-CHAN-00045 m3_synch Synchronisation type of the M03 function P-CHAN-00047 m4_synch Synchronisation type of the M04 function P-CHAN-00049 m5_synch Synchronisation type of the M05 function P-CHAN-00081 s_synch Synchronisation method of the S function P-CHAN-00051 main_spindle_ax_nr Definition of main spindle P-CHAN-00052 main_spindle_gear_ch Enabling gear changes ange P-CHAN-00053 main_spindle_name Main spindle name P-CHAN-00074 range_way Search direction in the speed range table P-CHAN-00004 autom_range Automatic gear speed change P-CHAN-00058 range_table[j].min_spe Lower limit of speed ranges ed P-CHAN-00055 range_table[j].max_spe Upper limit of speed ranges ed P-CHAN-00008 cax_face_id Face machining variant (turning/milling) P-CHAN-00094 kinematik[i].param[j] Kinematic offsets for face/lateral surface machining up to Build V3.00 P-CHAN-00262 trafo[j].id Kinematics ID of lateral surface machining P-CHAN-00263 trafo[j].param[k] Kinematic offsets for face/lateral surface machining as of Build V3.00 P-CHAN-00761 tapping.use_actual_po Tapping with actual positions of the spindle sition P-CHAN-00762 tapping.n_cycles Number of filter cycles to filter actual spindle positions P-CHAN-00834 thread_cutting.use_act Thread cutting with actual spindle speed ual_speed P-CHAN-00835 thread_cutting.n_cycle Number of filter cycles to filter actual spindle speed s P-CHAN-00836 thread_cutting.ignore_ Influence of velocity override with thread cutting G33 override P-CHAN-00837 thread_cutting.thread_ Thread cutting of a thread chain chain ID Parameter Description P-AXIS-00015 achs_mode Axis mode P-AXIS-00016 achs_nr Axis number TF5200 | Twin CAT 3 CNC Version: 1.09 51 Turning functions
## Page 52

Parameter ID Parameter Description P-AXIS-00018 achs_typ Axis type P-AXIS-00058 durchm_prog_abs Diameter programming (G51) at G90. P-AXIS-00059 durchm_prog_rel Diameter programming (G51) at G91. P-AXIS-00220 vb_regelgrenze Limit velocity of the measuring system P-AXIS-00216 vb_min_null Limit value for speed 0 3.2 Description 3.2.1 Channel parameters Overview This section describes the channel-specific parameters for configuring turning functions and rotary spindles. The spindle configuration defined in the channel parameter list is the default assignment which is provided after the controller is started up. P-CHAN-00761 Tapping with actual positions of the spindle Description An additional function for tapping can be enabled to take into account the actual spindle speed. The linear axes are then coupled to the actual spindle position. This also permits tapping when the spindle speed drops due to the load. Parameter tapping.use_actual_position Data type BOOLEAN Data range 0: The spindle is coupled to the command positions of the linear axes. 1: The linear axes are coupled to the actual spindle positions. Dimension --- Default value 0 Remarks Parameter available as of V3.1.3080.04 P-CHAN-00762 Number of filter cycles to filter actual spindle positions Description The actual spindle positions may be noisy under certain circumstances. This parameter activates a filter to smooth the actual positions, The parameter specifies the number of filter smoothing cycles. The value 0 deactivates the filter. Parameter tapping.n_cycles Data type UNS16 Data range 0 <= n_cycles <= 20 Dimension --- Default value 0 Remarks P-CHAN-00762 only acts when tapping with actual spindle positions is active (P- CHAN-00761 [} 52]). Parameter available as of V3.1.3080.04 P-CHAN-00834 Thread cutting with actual spindle speed Description An additional function for thread cutting can be enabled to include the actual spindle speed. Here, the linear axes are coupled to the actual spindle position. This means that threads can also be tapped when the spindle speed drops due to the load. Parameter thread_cutting.use_actual_speed 52 Version: 1.09 TF5200 | Twin CAT 3 CNC Turning functions
## Page 53

Parameter Data type BOOLEAN Data range 0: The linear axes are coupled to the command spindle positions 1: The linear axes are coupled to the actual spindle positions. Dimension --- Default value 0 Remarks Available as of V3.1.3080.17 P-CHAN-00835 Number of filter cycles to filter actual spindle speed Description The actual spindle speed may be noisy under certain circumstances. To smooth the actual speed, this parameter can activate a filter. The parameter specifies the number of filter cycles that are used for smoothing.. The value 0 deactivates the filter. Parameter thread_cutting.n_cycles Data type UNS16 Data range 0 <= n_cycles <= 25 Dimension --- Default value 0 Remarks P-CHAN-00835 only acts when thread cutting is active at the actual spindle speed. (Channel parameters [} 52]). Available as of V3.1.3080.17 P-CHAN-00836 Influence of velocity override with thread cutting G33 Description This parameter defines the handling of changes to override with thread cutting blocks G33 [} 19]. Parameter thread_cutting.ignore_override Data type BOOLEAN Data range 0: Velocity override is effective with thread cutting blocks G33. 1: Velocity override is not evaluated with thread cutting blocks G33. Dimension ---- Default value 0 Remarks Available as of Build V3.1.3081.11 or V3.1.3118.0 P-CHAN-00837 Thread cutting of a thread chain Description By default, consecutive thread cutting blocks are processes individually. If this parameter is set, consecutive thread cutting blocks are identified as a thread chain. Contouring between thread cutting blocks then takes place without any motion stops. Parameter thread_cutting.thread_chain Data type BOOLEAN Data range 0: Consecutive thread cutting blocks G33 [} 19] are processed individually 1: Consecutive thread cutting blocks G33 [} 19] are identified as a thread chain Dimension ---- Default value 0 Remarks Available as of Build V3.1.3081.11 or V3.1.3118.0 3.2.1.1 Spindle P-CHAN-00082 Number of configured spindles in NC channel TF5200 | Twin CAT 3 CNC Version: 1.09 53 Turning functions
## Page 54

Parameter Description This element specifies the total number of existing position-controlled and speed- controlled spindles. The number of spindles must be identical with the entered spindles (spindel[i].*). Parameter spdl_anzahl Data type UNS16 Data range 0 ≤ spdl_anzahl ≤ 6 (application-specific) Dimension ---- Default value 0 Remarks Parameterisation example: A position-controlled and a speed-controlled spindle are to be configured. spdl_anzahl 2 P-CHAN-00010 Spindle name within a path compound Description If a spindle axis is changed with specific machining modes (e.g. C axis mode) in the path compound, it can be addressed by this default name (e.g. C1). Parameter default_ax_name_of_spindle Data type STRING Data range Maximum 16 characters (length of spindle designation, application-specific) Dimension ---- Default value * Remarks The designation of spindles in the path compound must start with the letters A, B, C, U, V, W, X, Y, Z or Q. After that, all letters and digits are possible. The axis designation must be unique. It may not be identical with the configured name of a channel axis (P- CHAN-00006). Parameterisation example: The C axis receives the designation C1. default_ax_name_of_spindle C1 * Note: The default value of variables is a blank string. P-CHAN-00051 Logical axis number of the main spindle in the NC channel Description This parameter assigns the definition of the main spindle. The logical axis number of one of the spindles which is configured in the channel parameters list is entered here. After the controller starts up, this spindle becomes the main spindle. However, any other spindle in the system can be declared to be the main spindle using a command in the part program (#MAIN SPINDLE [PROG]). Parameter main_spindle_ax_nr Data type UNS16 Data range 1 ... MAX(UNS16) Dimension ---- Default value 0 Remarks Parameterisation example: The spindle with logical axis number 6 is the main spindle. main_spindle_ax_nr 6 P-CHAN-00053 Designation of the main spindle in the NC channel Description Besides the logical axis number, a name must be assigned to the main spindle by which it can be addressed in the subroutine. This parameter therefore assigns an axis name to the main spindle. The axis name is freely selectable, but the first character must be an 'S'. Parameter main_spindle_name Data type STRING Data range Maximum 16 characters (length of spindle designation, application-specific) Dimension ---- Default value * 54 Version: 1.09 TF5200 | Twin CAT 3 CNC Turning functions
## Page 55

Parameter Remarks The designation of the main spindle cannot be changed in the subroutine. However, if the main spindle is changed using #MAIN SPINDLE (see [PROG]), the new main spindle is assigned. Parameterisation example: The main spindle (logical axis number 6) is programmed in the subroutine with the name 'S'. main_spindle_ax_nr 6 main_spindle_name S * Note: The default value of variables is a blank string. P-CHAN-00036 Logical axis number of a spindle in NC channel Description The logical axis number is entered in this parameter. The logical axis name is unique throughout the entire system. The logical axis number assigns the spindle name in the NC program to the axis data (see axis parameters lists in [AXIS]). Therefore only logical numbers make sense if they are known to the NC program. The logical axis number "0" is not permitted. Parameter spindel[i].log_achs_nr Data type UNS16 Data range 1... MAX(UNS16) Dimension ---- Default value - Remarks A logical axis number may not be assigned several times. A logical axis number may not be simultaneously configured as path axis and spindle. If this is the case, the plausibility check of the channel parameters generates an error message at start-up. P-CHAN-00007 Name of a spindle in the NC channel Description This parameter defines the default name to address the spindle in the NC program. Please note that as long as a spindle is the main spindle, it can only be programmed using the main spindle name. The spindle name is a string. Parameter spindel[i].bezeichnung Data type STRING Data range Maximum 16 characters (length of spindle designation, application-specific) Dimension ---- Default value * Remarks The spindle names must start with the letter ‘S’. After that, all letters and digits are possible. Spindle names must be unique. Parameterisation example: Configuration of a 1-channel system with 3 spindles. After start-up, spindle 'S1' with logical axis number 6 is the main spindle. It is addressed by the spindle name 'S'. The spindles with logical axis numbers 11 and 30 are programmed by their default names 'S2' and 'S3'. spdl_anzahl 3 : main_spindle_ax_nr 6-> -> ->- main_spindle_name S ->- / # / / spindel[0].bezeichnung S1-<- / spindel[0].log_achs_nr 6-< -< -<- : spindel[1].bezeichnung S2 spindel[1].log_achs_nr 11 : spindel[2].bezeichnung S3 spindel[2].log_achs_nr 30 * Note: The default value of variables is a blank string. P-CHAN-00052 Enable mechanical gear change of main spindle Description This parameter enables or disables gear changes for the main spindle. Parameter main_spindle_gear_change Data type BOOLEAN TF5200 | Twin CAT 3 CNC Version: 1.09 55 Turning functions
## Page 56

Parameter Data range 0: Spindle gear changes disabled for the main spindle 1: Spindle gear changes enabled for the main spindle Dimension ---- Default value 0 Remarks The M functions to select the gear speeds of the main spindle M40–45 are activated by the parameter P-CHAN-00052 in the channel parameter list. The M functions M40–45 can be freely used if gear changes are disabled. P-CHAN-00074 Direction of range selection for spindle gear change Description This parameter defines whether the lower or the higher gear range is selected when speed ranges overlap. If 'range_way' = 0 the search starts from the lowest speed range, if 'range_way' > 0 from the highest. The correct speed (gear) range is the one where the programmed spindle speed is first found. Parameter spindel[i].range_way Data type UNS16 Data range 0 ≤ range_way < MAX(UNS16) Dimension ---- Default value 0 Remarks Parameterisation example: The search starts from the lowest speed range. spindel[0].range_way 0 (from bottom to top) P-CHAN-00004 Automatic range selection for spindle gear change Description If the spindle gear range is to be be automatically determined by the NC kernel, this parameter must be set to 1. In this case the M functions M40 to M45 need not be programmed. This means that the correct gear range is determined implicitly by the programmed speed (S word). Parameter spindel[i].autom_range Data type BOOLEAN Data range 0/1 Dimension ---- Default value 0 Remarks Parameterisation example: The automatic range selection is enabled. spindel[0].autom_range 1 P-CHAN-00058 Minimum spindle speed of a speed range (spindle gear change) Description The speed ranges of a spindle may be defined with or without overlap. If one range is not used, the corresponding values must be set to zero in the table. Parameter spindel[i].range_table[j].min_speed Data type UNS16 Data range 0 ≤ min_speed ≤ MAX(UNS16) Dimension rpm Default value 0 Remarks Parameterisation example: Definition of a speed range table for 6 ranges. Only the first four ranges are used. spindel[0].range_table[0].min_speed 50 spindel[0].range_table[0].max_speed 560 spindel[0].range_table[1].min_speed 400 spindel[0].range_table[1].max_speed 800 spindel[0].range_table[2].min_speed 700 spindel[0].range_table[2].max_speed 3360 spindel[0].range_table[3].min_speed 3361 spindel[0].range_table[3].max_speed 4000 spindel[0].range_table[4].min_speed 0 spindel[0].range_table[4].max_speed 0 spindel[0].range_table[5].min_speed 0 spindel[0].range_table[5].max_speed 0 56 Version: 1.09 TF5200 | Twin CAT 3 CNC Turning functions
## Page 57

Parameter P-CHAN-00055 Maximum spindle speed of a speed range (spindle gear change) Description The speed ranges of a spindle may be defined with or without overlap. If one range is not used, the corresponding values must be set to zero in the table. Parameter spindel[i].range_table[j].max_speed Data type UNS16 Data range 0 ≤ max_speed ≤ MAX(UNS16) Dimension rpm Default value 0 Remarks Parameterisation example: Definition of a speed range table for 6 ranges. Only the first four ranges are used. spindel[0].range_table[0].min_speed 50 spindel[0].range_table[0].max_speed 560 spindel[0].range_table[1].min_speed 400 spindel[0].range_table[1].max_speed 800 spindel[0].range_table[2].min_speed 700 spindel[0].range_table[2].max_speed 3360 spindel[0].range_table[3].min_speed 3361 spindel[0].range_table[3].max_speed 4000 spindel[0].range_table[4].min_speed 0 spindel[0].range_table[4].max_speed 0 spindel[0].range_table[5].min_speed 0 spindel[0].range_table[5].max_speed 0 3.2.1.2 Kinematics P-CHAN-00008 Machine ID with C axis face machining Description This parameter defines the type of machine used for face machining. Parameter cax_face_id Data type UNS16 Data range 1: Lathe (automatic orientation of the rotary axis in the centre of rotation) 2: Milling machines (no orientation) Dimension ---- Default value 0 Remarks Parameterisation example: Face machining takes place on a milling machine. cax_face_id 2 As of CNC Build V3.00 P-CHAN-00262 Define kinematic ID for transformations Description The kinematic ID identifies the related transformation as an element of the data set of kinematic parameters. The definition can be made for single-step, multi-step and PCS transformations. Parameter trafo[j].id kin_step[i].trafo[j].id (multi-step transformations) trafo_pcs[i].id (PCS transformation *) Data type UNS16 Data range 1 ... MAX(UNS16) Dimension ---- Default value 0 Remarks Parameter syntax as of V300 and higher *The PCS transformation function is available as of V3.1.3110. P-CHAN-00263 Define kinematic parameters for multi-step transformations Description The specific kinematic offsets are entered in this structure for each transformation. TF5200 | Twin CAT 3 CNC Version: 1.09 57 Turning functions
## Page 58

Parameter You can specify offsets for single-level, multilevel transformations and PCS transformations. Parameter trafo[j].param[k] or where k = 0 to 73 (maximum number of kinematic parameters) kin_step[i].trafo[j].param[k] (multi-step transformations) trafo_pcs[i].param[k] (PCS transformation *) Data type REAL64 Data range ---- Dimension 0.1 µm or 0.0001 inch Default value 0 Remarks Kinematic parameters can also be entered in the tool data list P-TOOL-00009 (they are then relevant only when a tool is selected, independent of the kinematics). If a kinematic parameter is assigned in both lists, the specified values are added in the NC. This is only valid for transformation step 1. No additional kinematic parameters can be entered in the tool data for transformation step 2. For further details on the parameterisation of a kinematic transformation, see [KITRA] and [PROG]. (Parameter syntax as of V300) *The PCS transformation function is available as of V3.1.3110. For CNC Builds < V3.00 P-CHAN-00094 Define kinematic parameters Description The specific kinematic offsets are entered in this structure for each transformation. Parameter kinematik[i].param[j] where j = 0... 74 (maximum number of kinematic parameters, application-specific, syntax as of V2.10.1501) Data type REAL64 Data range ---- Dimension 0.1µm or 0.0001° (for offsets) Default value 0 Remarks Parametrising kinematics for CNC Builds V2.11.2xxx kinematik[i].wz_kopf_versatz[j] (syntax up to V260) Kinematic parameters can also be entered in the tool data list P-TOOL-00009 (they are then relevant only when a tool is selected independent on the kinematics). If a kinematic parameter is assigned in both lists, the specified values are added in the NC. For more details on parameterising kinematic transformation and 5-axis machining, see [KITRA] and [PROG]. Parameterisation example: Offset values are specified for kinematics 1, 2 and 5. The kinematic with ID 2 is the default kinematic. kinematik_id 2 Default kinematic: 2 # kinematik[1].param[0] 1088000 kinematik[1].param[1] 1987000 kinematik[1].param[2] 342000 # kinematik[2].param[0] 1538000 kinematik[2].param[1] 25000 kinematik[2].param[2] 0 kinematik[2].param[5] 1800000 # kinematik[5].param[0] 1487000 kinematik[5].param[1] 25000 58 Version: 1.09 TF5200 | Twin CAT 3 CNC Turning functions
## Page 59

Parameter 3.2.1.2.1 Tool offsets The commands #FACE and #CYL result in the implicit selection of kinematics. For this reason, neither a kinematic ID requires a #KIN ID [..] nor transformation activation with #TRAFO ON. Tool offsets for face machining Face machining supports 2 machine types (lathe/milling machine). The corresponding tool offsets must be entered in the channel parameters in the assigned offset data of the kinematic IDs 13 and 14. Alternatively, this can also be executed in the tool data. Fig. 20: Tool offsets for face machining TF5200 | Twin CAT 3 CNC Version: 1.09 59 Turning functions
## Page 60

Parameter Examples of entries in channel parameters for CNC Builds as of V3.00 # FACE[], Face machining on a lathe (KIN-ID 13): trafo[0].id 13 trafo[0].param[0] 1080000 Z offset [0.1µm] trafo[0].param[1] 0 C angular offset [10-4°] trafo[0].param[2] 900000 X offset [0.1µm] # FACE[], Face machining on a milling machine (KIN-ID 14): trafo[1].id 14 trafo[0].param[0] 1080000 Z offset [0.1µm] trafo[0].param[1] 0 C angular offset [10-4°] trafo[1].param[2] 900000 X offset [0.1µm] CNC Builds < V3.00 # FACE[], Face machining on a lathe (KIN-ID 13): kinematik[13].param[0] 1080000 Z offset [0.1µm] kinematik[13].param[1] 0 C angular offset [10-4°] kinematik[13].param[2] 900000 X offset [0.1µm] # FACE[], Face machining on a milling machine (KIN-ID 14): kinematik[14].param[0] 1080000 Z offset [0.1µm] kinematik[14].param[1] 0 C angular offset [10-4°] kinematik[14].param[2] 900000 X offset [0.1µm] 60 Version: 1.09 TF5200 | Twin CAT 3 CNC Turning functions
## Page 61

Parameter Tool offsets for lateral surface machining Lateral surface machining implicitly executes the selection of the kinematic with ID 15. Fig. 21: Tool offsets for lateral surface machining #CYCL[], Lateral surface machining lathe (KIN-ID 15): CNC Builds as of V3.00 trafo[0].id 15 trafo[0].param[0] 700000 X offset [0.1µm] trafo[0].param[0] 0 C angular offset [10-4°] trafo[2].param[0] 1200000 Z offset [0.1µm] CNC Builds < V3.00 kinematik[15].param[0] 700000 X offset [0.1µm] kinematik[15].param[1] 0 C angular offset [10-4°] kinematik[15].param[2] 1200000 Z offset [0.1µm] TF5200 | Twin CAT 3 CNC Version: 1.09 61 Turning functions
## Page 62

Parameter 3.2.2 Axis parameter Overview The specific parameters for spindle axes and linear axes are described here. Refer to the documentation [AXIS] for details of further parameters available for setting axes. Operation mode settings (P-AXIS-00015) for spindle axes • 0x4: A modulo calculation always takes place after the destination position has been reached. Regardless of the operation mode selected for rotary axes, a modulo calculation is always executed in the position controller. In this way, modulo circle compensation can be executed if required. • 0x100: For a spindle an automatic homing before positioning the spindle can be pre-vented. This is, of course, relevant only if the axis is not referenced. The function is drive-dependent. • 0x200: Axis for kinematic "C axis" transformation Operation mode settings (P-AXIS-00015) for path axes • 0x1: Linear axis • 0x40: Face turning axis • 0x80: Longitudinal turning axis P-AXIS-00015 Axis mode Description Axes can be traversed in different operating modes. Parameter kenngr.achs_mode Data type UNS32 Data range 0x00000001 - 0x10000000 Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0x00000001 Drive types ---- Remarks P-AXIS-00016 Logical axis number Description The logical axis number is a system-wide unique identifier for each axis. The entire management of axis data in the NC kernel takes place using the logical axis number. Parameter kopf.achs_nr Data type UNS16 Data range 0 < achs_nr < MAX(UNS16) Axis types T, R, S Dimension T: ---- R,S: ---- Default value 1 drive types. ---- Remarks It is not allowed to use the same logical axis number more than once. The logical axis number "0" is not allowed. The assignment of an axis designation in the NC program to a logical axis (axis number) takes place in the channel parameters [CHAN]. This entry is not adopted when the axis parameter list is updated. Updates only become effective when the controller is rebooted. P-AXIS-00018 Axis type (linear axis, rotary axes, spindle) Description This parameter specifies the axis type of an axis. Parameter kenngr.achs_typ Data type STRING Data range Linear axis (ACHSTYP_TRANSLATOR) : 0x0001 62 Version: 1.09 TF5200 | Twin CAT 3 CNC Turning functions
## Page 63

Parameter Rotary axis (ACHSTYP_ROTATOR) : 0x0002 Spindle (ACHSTYP_SPINDEL): : 0x0004 Axis types T, R, S Dimension T: ---- R,S: ---- Default value ACHSTYP_TRANSLATOR Drive types ---- Remarks Depending on the axis type that is set, special functionalities are addressed in the NC kernel. Examples: - modulo calculation for rotary axes, - speed monitoring for spindles P-AXIS-00220 Limiting velocity for the measurement system Description Especially with spindles, the limit at which the measuring system supplies erroneous signals at higher rotation speeds can be exceeded. The parameter describes the velocity value at which the position controller has to switch over to open-loop controlled operation mode. Parameter getriebe[i].vb_regelgrenze Data type UNS32 Data range 0 ≤ vb_regelgrenze ≤ MAX(UNS32) Axis types S Dimension S: 0.001°/s Default value 200000 drive types. Simulation, Conventional, Terminal, Lightbus, Profidrive Remarks P-AXIS-00216 Limit for spindle speed 'zero' Description Especially in the case of spindles, the barrier should be given below which rotational speed monitoring in the position controller shows the state 'speed zero'. Parameter getriebe[i].vb_min_null Data type UNS32 Data range 0 ≤ vb_min_null ≤ MAX(UNS32) Axis types S Dimension S: 0.001°/s Default value 100 drive types. ---- Remarks P-AXIS-00058 Diameter programming absolute Description If diameter programming is to occur with active absolute programming (G90), the parameter must be set to TRUE. Parameter kenngr.durchm_prog_abs Data type BOOLEAN Data range 0/1 Axis types T Dimension T: ---- Default value 0 drive types. ---- Remarks P-AXIS-00059 Diameter programming relative TF5200 | Twin CAT 3 CNC Version: 1.09 63 Turning functions
## Page 64

Parameter Description If diameter programming is to occur with active incremental programming (G91), the parameter must be set to TRUE. Parameter kenngr.durchm_prog_rel Data type BOOLEAN Data range 0/1 Axis types T Dimension T: ---- Default value 0 drive types. ---- Remarks 3.2.3 Tool parameters P-TOOL-00001 Type Description This parameter is assigned to distinguish between tool types. Parameter wz[i].typ or wz[i].type Data type UNS16 Data range 0: Milling tool 1: Turning tool 2: Grinding tool 3: Wire (erosion) Dimension ---- Default value 0 Remarks Parameterisation example: Tool 5 is a milling tool wz[5].typ 0 P-TOOL-00002 Cutter edge position Description With rotary tools (P-TOOL-00001 = 1), this parameter specifies the orientation of the cutter relative to the machining plane. Ident. codes 1 to 9 for orientation of the turning tool tip in the machining plane. Parameter wz[i].srk_lage Data type UNS16 Data range 0 < srk_lage ≤ 9 64 Version: 1.09 TF5200 | Twin CAT 3 CNC Turning functions
## Page 65

Parameter Dimension ---- Default value 0 Remarks For detailed information regarding machining with turning tools, see [PROG [} 14]]. Parameterisation example: The orientation of the cutter tip of Tool 6 is described by identification code 3. wz[6].typ 1 wz[6].srk_lage 3 TF5200 | Twin CAT 3 CNC Version: 1.09 65 Turning functions
## Page 66

Support and Service 4 Support and Service Beckhoff and their partners around the world offer comprehensive support and service, making available fast and competent assistance with all questions related to Beckhoff products and system solutions. Download finder Our download finder contains all the files that we offer you for downloading. You will find application reports, technical documentation, technical drawings, configuration files and much more. The downloads are available in various formats. Beckhoff's branch offices and representatives Please contact your Beckhoff branch office or representative for local support and service on Beckhoff products! The addresses of Beckhoff's branch offices and representatives round the world can be found on our internet page: www.beckhoff.com You will also find further documentation for Beckhoff components there. Beckhoff Support Support offers you comprehensive technical assistance, helping you not only with the application of individual Beckhoff products, but also with other, wide-ranging services: • support • design, programming and commissioning of complex automation systems • and extensive training program for Beckhoff system components Hotline: +49 5246 963-157 e-mail: support@beckhoff.com Beckhoff Service The Beckhoff Service Center supports you in all matters of after-sales service: • on-site service • repair service • spare parts service • hotline service Hotline: +49 5246 963-460 e-mail: service@beckhoff.com Beckhoff Headquarters Beckhoff Automation Gmb H & Co. KG Huelshorstweg 20 33415 Verl Germany Phone: +49 5246 963-0 e-mail: info@beckhoff.com web: www.beckhoff.com 66 Version: 1.09 TF5200 | Twin CAT 3 CNC Turning functions
## Page 67

Index Index P P-AXIS-00015 62 P-AXIS-00016 62 P-AXIS-00018 62 P-AXIS-00058 63 P-AXIS-00059 63 P-AXIS-00216 63 P-AXIS-00220 63 P-CHAN-00004 56 P-CHAN-00007 55 P-CHAN-00008 57 P-CHAN-00010 54 P-CHAN-00036 55 P-CHAN-00051 54 P-CHAN-00052 55 P-CHAN-00053 54 P-CHAN-00055 57 P-CHAN-00058 56 P-CHAN-00074 56 P-CHAN-00082 53 P-CHAN-00094 58 P-CHAN-00262 57 P-CHAN-00263 57 P-CHAN-00761 52 P-CHAN-00762 52 P-CHAN-00834 52 P-CHAN-00835 53 P-CHAN-00836 53 P-CHAN-00837 53 P-TOOL-00001 64 P-TOOL-00002 64 TF5200 | Twin CAT 3 CNC Version: 1.09 67 Turning functions
## Page 69

More Information: www.beckhoff.com/TF5200 Beckhoff Automation Gmb H & Co. KG Hülshorstweg 20 33415 Verl Germany Phone: +49 5246 9630 info@beckhoff.com www.beckhoff.com
