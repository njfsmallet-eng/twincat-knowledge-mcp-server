---
title: "TF6270 Twin CAT 3"
product: "TF6270"
category: "Communication"
tags: ["CAT", "TWIN"]
language: "EN"
document_type: "Manual"
version: "1.1"
source_pdf: "https://download.beckhoff.com/download/Document/automation/twincat3/TF6270_TC3_Profinet_RT_Device_EN.pdf"
release_date: "2022-01-13"
---
Manual | EN TF6270 Twin CAT 3 | PROFINET RT Device 2022-01-13 | Version: 1.1
## Page 3

Table of contents Table of contents 1 Foreword.................................................................................................................................................... 5 1.1 Notes on the documentation.............................................................................................................. 5 1.2 Safety instructions............................................................................................................................. 6 1.3 Notes on information security............................................................................................................ 7 2 PROFINET system presentation............................................................................................................... 8 3 Product overview..................................................................................................................................... 10 3.1 Function TF6270............................................................................................................................. 10 3.1.1 Technical data................................................................................................................. 10 3.1.2 Requirements.................................................................................................................. 10 3.1.3 Licensing.......................................................................................................................... 10 3.2 Optional Interface, -B930................................................................................................................. 12 3.2.1 Technical data ................................................................................................................ 12 3.2.2 PROFINET connection.................................................................................................... 13 3.2.3 Topology.......................................................................................................................... 13 3.3 Ether CAT Terminal, EL6631-0010.................................................................................................. 14 3.3.1 Technical data EL6631-0010........................................................................................... 15 4 Commissioning........................................................................................................................................ 16 4.1 Protocol selection............................................................................................................................ 16 4.1.1 Integration via a Real-Time Ethernet interface................................................................ 17 4.1.2 Integration via a CU2508 real-time Ethernet port multiplier (Real-Time Ethernet interface) ......................................................................................................................................... 19 4.1.3 Integration via an optional interface, -B930..................................................................... 23 4.1.4 Integration via an EL6631-0010....................................................................................... 24 4.2 Configuration................................................................................................................................... 29 4.2.1 Assignment of PROFINET name to a PROFINET Device............................................... 29 4.2.2 Creating modules/process data on the PROFINET Device............................................. 32 4.2.3 Creating a virtual slave.................................................................................................... 38 5 Settings and diagnosis........................................................................................................................... 40 5.1 Settings on the PROFINET Device protocol.................................................................................... 40 5.1.1 General............................................................................................................................ 40 5.1.2 Adapter............................................................................................................................ 40 5.1.3 PROFINET....................................................................................................................... 43 5.1.4 Sync Task........................................................................................................................ 47 5.2 Diagnosis on the PROFINET Device Protocol................................................................................ 48 5.2.1 Diag History..................................................................................................................... 48 5.2.2 Diagnosis......................................................................................................................... 49 5.2.3 Cyclic diagnosis............................................................................................................... 50 5.3 Settings on the PROFINET Device................................................................................................. 50 5.3.1 General............................................................................................................................ 50 5.3.2 Device.............................................................................................................................. 51 5.3.3 ADS................................................................................................................................. 52 5.3.4 EL663x............................................................................................................................. 53 5.3.5 GSDML generator............................................................................................................ 54 TF6270 Version: 1.1 3
## Page 4

Table of contents 5.4 PROFINET Device diagnosis.......................................................................................................... 55 5.4.1 Diagnosis......................................................................................................................... 55 5.4.2 Status and Ctrl. flags....................................................................................................... 56 5.4.3 Port diagnostics............................................................................................................... 57 5.4.4 Further diagnosis............................................................................................................. 59 6 Profinet Features..................................................................................................................................... 61 6.1 Alarms.............................................................................................................................................. 61 6.2 Record data..................................................................................................................................... 61 6.3 PROFINET Shared Device.............................................................................................................. 62 7 Appendix.................................................................................................................................................. 68 7.1 Troubleshooting............................................................................................................................... 68 7.1.1 Diagnostic LEDs.............................................................................................................. 71 7.2 Support and Service........................................................................................................................ 73 4 Version: 1.1 TF6270
## Page 5

Foreword 1 Foreword 1.1 Notes on the documentation This description is only intended for the use of trained specialists in control and automation engineering who are familiar with applicable national standards. It is essential that the documentation and the following notes and explanations are followed when installing and commissioning the components. It is the duty of the technical personnel to use the documentation published at the respective time of each installation and commissioning. The responsible staff must ensure that the application or use of the products described satisfy all the requirements for safety, including all the relevant laws, regulations, guidelines and standards. Disclaimer The documentation has been prepared with care. The products described are, however, constantly under development. We reserve the right to revise and change the documentation at any time and without prior announcement. No claims for the modification of products that have already been supplied may be made on the basis of the data, diagrams and descriptions in this documentation. Trademarks Beckhoff®, Twin CAT®, Twin CAT/BSD®, TC/BSD®, Ether CAT®, Ether CAT G®, Ether CAT G10®, Ether CAT P®, Safety over Ether CAT®, Twin SAFE®, XFC®, XTS® and XPlanar® are registered trademarks of and licensed by Beckhoff Automation Gmb H. Other designations used in this publication may be trademarks whose use by third parties for their own purposes could violate the rights of the owners. Patent Pending The Ether CAT Technology is covered, including but not limited to the following patent applications and patents: EP1590927, EP1789857, EP1456722, EP2137893, DE102015105702 with corresponding applications or registrations in various other countries. Ether CAT® is a registered trademark and patented technology, licensed by Beckhoff Automation Gmb H, Germany Copyright © Beckhoff Automation Gmb H & Co. KG, Germany. The reproduction, distribution and utilization of this document as well as the communication of its contents to others without express authorization are prohibited. Offenders will be held liable for the payment of damages. All rights reserved in the event of the grant of a patent, utility model or design. TF6270 Version: 1.1 5
## Page 6

Foreword 1.2 Safety instructions Safety regulations Please note the following safety instructions and explanations! Product-specific safety instructions can be found on following pages or in the areas mounting, wiring, commissioning etc. Exclusion of liability All the components are supplied in particular hardware and software configurations appropriate for the application. Modifications to hardware or software configurations other than those described in the documentation are not permitted, and nullify the liability of Beckhoff Automation Gmb H & Co. KG. Personnel qualification This description is only intended for trained specialists in control, automation and drive engineering who are familiar with the applicable national standards. Description of symbols In this documentation the following symbols are used with an accompanying safety instruction or note. The safety instructions must be read carefully and followed without fail! DANGER Serious risk of injury! Failure to follow the safety instructions associated with this symbol directly endangers the life and health of persons. WARNING Risk of injury! Failure to follow the safety instructions associated with this symbol endangers the life and health of per- sons. CAUTION Personal injuries! Failure to follow the safety instructions associated with this symbol can lead to injuries to persons. NOTE Damage to the environment or devices Failure to follow the instructions associated with this symbol can lead to damage to the environment or equipment. Tip or pointer This symbol indicates information that contributes to better understanding. 6 Version: 1.1 TF6270
## Page 7

Foreword 1.3 Notes on information security The products of Beckhoff Automation Gmb H & Co. KG (Beckhoff), insofar as they can be accessed online, are equipped with security functions that support the secure operation of plants, systems, machines and networks. Despite the security functions, the creation, implementation and constant updating of a holistic security concept for the operation are necessary to protect the respective plant, system, machine and networks against cyber threats. The products sold by Beckhoff are only part of the overall security concept. The customer is responsible for preventing unauthorized access by third parties to its equipment, systems, machines and networks. The latter should be connected to the corporate network or the Internet only if appropriate protective measures have been set up. In addition, the recommendations from Beckhoff regarding appropriate protective measures should be observed. Further information regarding information security and industrial security can be found in our https://www.beckhoff.com/secguide. Beckhoff products and solutions undergo continuous further development. This also applies to security functions. In light of this continuous further development, Beckhoff expressly recommends that the products are kept up to date at all times and that updates are installed for the products once they have been made available. Using outdated or unsupported product versions can increase the risk of cyber threats. To stay informed about information security for Beckhoff products, subscribe to the RSS feed at https:// www.beckhoff.com/secinfo. TF6270 Version: 1.1 7
## Page 8

PROFINET system presentation 2 PROFINET system presentation PROFINET is the Industrial Ethernet standard of the PNO (PROFIBUS user organization). Internationally established IT standards such as TCP/IP are used for communication. PROFINET system description PROFINET IO describes the exchange of data between controllers and field devices in several real-time classes: RT (software-based real-time) and IRT (hardware-supported isochronous real-time). In addition, further Ethernet traffic can be transmitted in the NRT (non-real-time) time slot of the PROFINET cycle. RT can be networked with commercially available switches; switches with corresponding hardware support are required for IRT. Beckhoff PROFINET components 8 Version: 1.1 TF6270
## Page 9

PROFINET system presentation Components Comment Twin CAT Twin CAT PROFINET IO Device Twin CAT as PROFINET slave Embedded PCs CX8093 Embedded PC with PROFINET RT Device fieldbus interface CX50xx-B930 Embedded PC with optional PROFINET RT Device interface Ether CAT Terminals EL6631-0010 PROFINET IO device Ether CAT Box EP9300 PROFINET Coupler Box for Ether CAT box modules Fieldbus Box IL230x-B903 PROFINET Coupler Box for IP-Link box modules Bus Coupler BK9053 PROFINET "Compact" Bus Coupler for Bus Terminals BK9103 PROFINET Bus Coupler for Bus Terminals EK9300 PROFINET Bus Coupler for Ether CAT Terminals PC Fieldbus cards FC900x PCI-Ethernet card for all Ethernet-based protocols (IEEE 802.3) FC9x51 Mini PCI-Ethernet card for all Ethernet-based protocols (IEEE 802.3) TF6270 Version: 1.1 9
## Page 10

Product overview 3 Product overview 3.1 Function TF6270 The Twin CAT PROFINET RT Device (slave) is a supplement that turns any PC-based controller with an Intel® chipset and the real-time Ethernet driver developed by Beckhoff into a PROFINET-RT device. A standard Ethernet interface becomes a PROFINET slave. 3.1.1 Technical data Technical data TF6270 Runtime TC1100 Target system Windows XP, Windows 7/8/10, Windows CE PROFINET version Conformance class B, optionally conformance class C Number of channels 2 (switched) Ethernet interfaces 100BASE-TX Ethernet with 2 x RJ45 Number of device interfaces Supplement 8, CCAT or EL663x-0010 2 Topology variable Quantity of user data Maximum of one Ethernet frame length, approx. 1500 bytes of user data incl. IOPS and IOCS per device Cycle time (min.) RTC1 1 ms, RTC3 250 us Performance class (pp) 20 30 40 50 60 70 80 90 – – x x x x x x Ordering information TF6270-00pp TC3 PROFINET RT Device 3.1.2 Requirements Software TF6270 is included from the Twin CAT 3.1 Build 4018 version Hardware For using the TF6270, the target system has to have an Intel® network chipset. (See: Checking the hardware requirements) Beckhoff PC Beckhoff PC systems are usually preconfigured for the operation of Profinet devices 3.1.3 Licensing The Twin CAT 3 function can be activated as a full version or as a 7-day test version. Both license types can be activated via the Twin CAT 3 development environment (XAE). 10 Version: 1.1 TF6270
## Page 11

Product overview Licensing the full version of a Twin CAT 3 Function A description of the procedure to license a full version can be found in the Beckhoff Information System in the documentation "Twin CAT 3 Licensing". Licensing the 7-day test version of a Twin CAT 3 Function A 7-day test version cannot be enabled for a Twin CAT 3 license dongle. 1. Start the Twin CAT 3 development environment (XAE). 2. Open an existing Twin CAT 3 project or create a new project. 3. If you want to activate the license for a remote device, set the desired target system. To do this, select the target system from the Choose Target System drop-down list in the toolbar. ð The licensing settings always refer to the selected target system. When the project is activated on the target system, the corresponding Twin CAT 3 licenses are automatically copied to this system. 4. In the Solution Explorer, double-click License in the SYSTEM subtree. ð The Twin CAT 3 license manager opens. 5. Open the Manage Licenses tab. In the Add License column, check the check box for the license you want to add to your project (e.g. "TF4100 TC3 Controller Toolbox"). 6. Open the Order Information (Runtime) tab. TF6270 Version: 1.1 11
## Page 12

Product overview ð In the tabular overview of licenses, the previously selected license is displayed with the status “missing”. 7. Click 7-Day Trial License... to activate the 7-day trial license. ð A dialog box opens, prompting you to enter the security code displayed in the dialog. 8. Enter the code exactly as it is displayed and confirm the entry. 9. Confirm the subsequent dialog, which indicates the successful activation. ð In the tabular overview of licenses, the license status now indicates the expiry date of the license. 10. Restart the Twin CAT system. ð The 7-day trial version is enabled. 3.2 Optional Interface, -B930 It is possible to order Embedded PCs with a fieldbus or serial interface such as the "PROFINET RT, Device, Ethernet (2 x RJ-45 switch)". The optional interface must be ordered ex factory and cannot be retrofitted retrospectively. 3.2.1 Technical data Technical data -B930 Fieldbus PROFINET RT Device Data transfer rate 100 Mbaud Bus interface 2 x RJ45 switched Extendable process image 1 virtual slave in addition Max. process image 2 slaves x (1440 bytes in / 1440 bytes out) Properties RTClass 1 12 Version: 1.1 TF6270
## Page 13

Product overview 3.2.2 PROFINET connection The optional interface is identified as "X300" on the devices and has as black border to identify it. LAN assignment (x300) PIN Signal Description 1 TD + Transmit + 2 TD - Transmit - 3 RD + Receive + 4 connected reserved 5 6 RD - Receive - 7 connected reserved 8 3.2.3 Topology Example for a PROFINET topology: TF6270 Version: 1.1 13
## Page 14

Product overview PROFINET 3.3 Ether CAT Terminal, EL6631-0010 14 Version: 1.1 TF6270
## Page 15

Product overview The EL6631-0010 PROFINET-IO device (slave) terminal allows easy data exchange between Ether CAT and PROFINET IO. It is a device in the Ether CAT segment, which can consist of up to 65,535 devices. The EL6631-0010 has a 3-port switch. Two ports are fed to the outside on RJ-45 sockets. This allows the I/O stations to be structured as a line topology, as a result of which the wiring is simplified. The maximum distance between two devices is 100 m. Protocols such as LLDP or SNMP can be used for network diagnostics. 3.3.1 Technical data EL6631-0010 Technical data EL6631-0010 Bus system PROFINET RT Device Number of Ethernet ports 2 Ethernet interface 100BASE-TX Ethernet with 2 x RJ45 Cable length up to 100 m twisted pair Data transfer rate 100 Mbit/s, IEEE 802.3u auto-negotiation full duplex at 10 and 100 Mbit/s possible, settings automatic Diagnosis Status LEDs Power supply via the E-bus Current consumption via E-bus typ. 400 m A Electrical isolation 500 V (E-bus/Ethernet) Bit width in process image variable (max. 2 k B for inputs and outputs) Configuration via the Twin CAT System Manager Weight approx. 75 g Permissible ambient temperature range during 0 °C ... + 55 °C operation (aligned in horizontal installation position) 0 °C ... + 45 °C (all other installation positions, see notice) Permissible ambient temperature range during -25°C ... + 85 °C storage Permissible relative air humidity 95%, no condensation Dimensions (W x H x D) approx. 26 mm x 100 mm x 52 mm (width aligned: 23 mm) Mounting on 35 mm support rail according to EN 60715 Vibration / shock resistance conforms to EN 60068-2-6 / EN 60068-2-27 EMC immunity / emission conforms to EN 61000-6-2 / EN 61000-6-4 Protection class IP20 Installation position see notice Approval CE ATEX c ULus TF6270 Version: 1.1 15
## Page 16

Commissioning 4 Commissioning The following steps are necessary for the initial commissioning of a data exchange with a PROFINET Device. 4.1 Protocol selection PROFINET devices must be attached directly to the I/O device, whether controller or device. Exceptions are optional interfaces (-B930, -M930), which can be added via the Scan function (CCAT). Right-click I/O – Devices > Add New Item… and you can choose between four different PROFINET I/O device protocols. with the purposes described below. • Profinet I/O Device (RT): Use of the TF6720 function in conjunction with an Intel chipset • Profinet I/O Device CCAT (RT): Uses CCAT-based hardware (e.g. CXxxxx or FC932x) with RT (RTC1) ordering option • Profinet I/O Device CCAT (RT + IRT): Uses CCAT-based hardware (e.g. CXxxxx or FC932x) with IRT (RTC3) ordering option • Profinet I/O Device EL6631-0010 (RT): Uses the EL6631-0010 Ether CAT Profinet gateway terminal 16 Version: 1.1 TF6270
## Page 17

Commissioning 4.1.1 Integration via a Real-Time Ethernet interface 1. Select the PROFINET I/O device (RT) according to the configuration. The available adapters are displayed directly when appended and are now available for selection. If these are to be modified or checked afterwards, this can take place on the Adapter tab. TF6270 Version: 1.1 17
## Page 18

Commissioning 2. Right-click the created PROFINET Device and select Add New Item to integrate a box in the form of a GSDML. The following window will then open. At this point, select PNTC Device (Twin CAT Supplement) and confirm with OK. 3. In the dialog that opens, Insert Device, you define the version with which the PROFINET Device should be integrated. Confirm your choice with OK Further information can be found in the chapter Creating modules/process data on the PROFINET Device [} 32] 18 Version: 1.1 TF6270
## Page 19

Commissioning 4.1.2 Integration via a CU2508 real-time Ethernet port multiplier (Real-Time Ethernet interface) Below, we show you how to configure a PROFINET Device using the CU2508 real-time Ethernet port multiplier. However, you can use only one controller or device, if they are in a unique network. If the networks a physically separated, it is possible to use more than one controller or device supplement with one CU2508. This is due to the fact, that the CU2508 uses only one MAC address. The function of several PROFINET segments can only be secured, if the MAC address in a network segment is unique and there is no connection to other networks. 1. Add the CU2508 real-time Ethernet port multiplier to your Twin CAT project by right-clicking on I/O - Devices > Add New Item and adding the Real-Time Ethernet Adapter (Multiple Protocol Handler) in the window that opens. TF6270 Version: 1.1 19
## Page 20

Commissioning 2. Furthermore, the following settings on the Ports tab are necessary for the operation of the CU2508 Virtual Port Selection via: Ether CAT Switch Link Protocol (ESL) (CU25xx required) 20 Version: 1.1 TF6270
## Page 21

Commissioning 3. The PROFINET protocol is directly added to the I/O device. Four different PROFINET I/O devices are available for selection. Select PROFINET I/O Device (RT) according to the configuration with the CU2508. ð The available adapters are displayed directly when appended and are now available for selection. If these are to be modified or checked afterwards, this can take place on the Adapter tab. TF6270 Version: 1.1 21
## Page 22

Commissioning 4. Right-click the created PROFINET Device and select Add New Item to integrate a box in the form of a GSDML. 5. The following window then opens. At this point, select the PNTC Device (Twin CAT Supplement) and confirm with OK. 22 Version: 1.1 TF6270
## Page 23

Commissioning 6. In the dialog that opens, Insert Device, you define the version with which the PROFINET Device should be integrated. Confirm your choice with OK. Further information can be found in the chapter Creating modules/process data on the PROFINET Device [} 32]. 4.1.3 Integration via an optional interface, -B930 1. Select one of the two PROFINET I/O Device CCAT options according to the configuration. The procedure is the same in each case. Below, the following the PROFINET I/O Device CCAT (RT) is taken as an example. The available adapters are displayed directly when appended and are now available for selection. If these are to be modified or checked afterwards, this can take place on the Adapter tab. TF6270 Version: 1.1 23
## Page 24

Commissioning 2. Right-click the created PROFINET Device and select Add New Item to integrate a box in the form of a GSDML. The following window then opens. At this point, select your hardware accordingly and confirm the selection with OK. 3. In the dialog that opens, Insert Device, you define the version with which the PROFINET Device should be integrated. Confirm your choice with OK. Further information can be found in the chapter Creating modules/process data on the PROFINET Device [} 32]. 4.1.4 Integration via an EL6631-0010 Below, we show you how to configure a PROFINET device with the help of the EL6631-0010 PROFINET Gateway terminal. 24 Version: 1.1 TF6270
## Page 25

Commissioning ü The EL6631-0010 is primarily an Ether CAT slave, which means that it must be included in the Twin CAT configuration because it serves as an adapter for the PROFINET device. As a result, if the Ether CAT bus has an error, the PROFINET adapter will also display errors and therefore will not work. 1. Right-click Devices and select Add New Item. TF6270 Version: 1.1 25
## Page 26

Commissioning 2. Select PROFINET I/O Device EL6631-0010 (RT), Ether CAT according to the configuration with the EL6631-0010. If there is a single EL6631-0010 on the projected Ether CAT segment, the associated adapter is entered directly when the protocol is appended. If there are several terminals the corresponding one can be selected. 26 Version: 1.1 TF6270
## Page 27

Commissioning 3. If the terminal assignment (adapter assignment) is to be changed or checked afterwards, this can be done on the Adapter tab. Next, a box is integrated in the form of a GSDML. TF6270 Version: 1.1 27
## Page 28

Commissioning 4. Right-click on the created PROFINET Device and select Add New Item. 5. In the window that opens, select EL6631-0010 (Ether CAT terminal) and confirm with OK. 28 Version: 1.1 TF6270
## Page 29

Commissioning 6. Right-click the EL6631-0010 to open the Insert Device dialog, where you specify which version of the EL6631-0010 should be integrated. Confirm your choice with OK. Further information can be found in the chapter Creating modules/process data on the PROFINET Device [} 32]. 4.2 Configuration 4.2.1 Assignment of PROFINET name to a PROFINET Device For an initial configuration of a PROFINET Device or when the EL6631-0010 is shipped, it does not have a PROFINET name. An empty string is transferred when the devices are configured. There are several ways to assign a name to an EL6631-0010: 1. Assignment through the PROFINET Controller In this case, the PROFINET Controller assigns the name of the device. You can learn about this from the manufacturer of your PROFINET Controller. 2. Assignment via the Ether CAT Master, only with the EL6631-0010 An assignment via the controller is then no longer possible. To do this, activate the checkbox get PN-Station name from ECAT. The name used in the Manager tree is then used. In this example el6631-test-name. TF6270 Version: 1.1 29
## Page 30

Commissioning 3. Assignment through a link to the PLC program An assignment via the controller is then no longer possible. This is comparable with the DIP switches in the BK9103 and can be carried out via a PLC task. For activation, Generate Station Name from Control must be activated. 30 Version: 1.1 TF6270
## Page 31

Commissioning For clarification, 000 will be appended to the previous tree name (default: tcpniodevice). This tree name no longer corresponds to the PROFINET station name! The Ctrl WORD of the PROFINET protocol is used to help assign a name. This means that the number that is entered (range of values 0 - 255) is appended to the existing station name. In addition, the Ctrl WORD must be linked to a task. It is subsequently necessary to restart Twin CAT. If, for example, the linked Ctrl WORD is now given a value of 123 from the task, its previous station name changes, e.g. from tcpniodevice to tcpniodevice123. The current tree name is still tcpniodevice000. 4. Assignment via Twin CAT An assignment via the controller is then no longer possible. To do this, activate the checkbox Get Station Name from Tree. The PROFINET name that the device has in the Twin CAT tree is then used. TF6270 Version: 1.1 31
## Page 32

Commissioning 5. Automatic device startup through topology specification is supported. You can obtain more information from your PROFINET Controller You can learn about this from the manufacturer of your PROFINET Controller. 4.2.2 Creating modules/process data on the PROFINET Device The procedure for creating process data on a PROFINET device is the same for all devices. 4.2.2.1 Up to Twin CAT Version 3.1 Build 4024 The modules can be attached to the API (Application Profile Interface). Open by right-clicking on Add New Item 32 Version: 1.1 TF6270
## Page 33

Commissioning The order of the modules in the tree always corresponds to the populated slot, starting at 0. TF6270 Version: 1.1 33
## Page 34

Commissioning The DAP (Device Access Point) is added directly with the device. If, according to GSMDL, this is not plugged into slot 0, empty placeholder modules are inserted before it. The DAP is a special module that comes with device properties from the GSDML. The PDEV properties are attached to it in the form of sub modules (interface and port). In addition, the DAP can also contain normal sub modules with process data and record data. It is always fixed and cannot be deleted. Each additional module is assigned to a specific API. The information about which one comes from the GSDML. By default this is always API 0. Alternatively, an API e.g. for the PROFIDRIVE profile or a fieldbus API is also conceivable. If the modules (described in GSDML) support it, the sub modules can be projected below them. The subslots are also simply numbered continuously, starting at 1 (modules at 0). The PDEV sub modules (interface and port) are exceptions; these are plugged into a fixed subslot specified via the GSDML. The current slot or subslot can be checked via the associated object. 4.2.2.2 From Twin CAT Version 3.1 Build 4024 With Twin CAT Version 4024, the classic tree view for module/sub module population was replaced by a rack view. In this view slots can be populated and removed without shifting the following slots. Empty slots can remain free and do not have to be provided with placeholders. Furthermore, it is possible to generate the created module configuration in a GSDML file using the GSDML Generator. The generated file can then be integrated into the controller. The device configuration is thus fixed and does not have to be reprojected on the controller side. For more information see chapter GSDML Generator [} 54]. The new rack view is illustrated below: 34 Version: 1.1 TF6270
## Page 35

Commissioning The list on the left shows the available device slots; here you can see which slots are occupied or free. Clicking on a slot updates the list in the center, showing the available subslots at the selected slot. If supported by the module, the sub modules can then be populated here. The list on the right shows the available modules and sub modules. The list of sub modules is always updated depending on the selected module. The slots and subslots can be populated simply by double-clicking or via drag and drop. • Double-clicking always triggers insertion at the next free and available slot from the cursor position. • With drag and drop the available slots are selected, and a module can then be dragged to the required slot and released. TF6270 Version: 1.1 35
## Page 36

Commissioning In the slot and subslot list, populated modules or sub modules can be disabled via the context menu (right mouse click). The icon indicates disabled status, which is also apparent in the module tree. Disabled objects are ignored during configuration, i.e. corresponding slots or subslots are considered empty. Classic tree view It is possible to switch to classic tree view for module/sub module population, if required. 36 Version: 1.1 TF6270
## Page 37

Commissioning To do this, check Legacy Config on the Device tab of the attached box. 4.2.2.3 'Turning' process data The process data are transferred in Intel format as standard. If the data is required in Motorola format, the data must be rotated accordingly. This step illustrates how to 'turn' the data in Twin CAT. TF6270 Version: 1.1 37
## Page 38

Commissioning 'Turn' the process data as follows: 1. Click the process data you want to rotate on the right in the tree view. 2. Click on the Flags tab 3. Click on the required option. For WORD variables, only LOBYTE and HIBYTE can be swapped. With DWORD process data you can additionally swap the WORD. ð In this way you can 'turn' process data. Use the following example to see how the data change for the individual options. Example for DWORD. Controller data Data received by the device Original data No option selected Swap Byte (blue) Swap Word (green) Swap both (blue and green) 0x01020304 0x01020304 0x02010403 0x03040102 0x04030201 4.2.3 Creating a virtual slave Additional virtual slaves can be created on the same hardware interface. This enables more data to be exchanged with a PROFINET master, or a connection with a second PROFINET master can be established. Each virtual slave is assigned a dedicated address via Twin CAT and is configured like an independent device for the PROFINET master. ü A PROFINET Device is available in Twin CAT. 1. In the project tree, right-click the created PROFINET Device 38 Version: 1.1 TF6270
## Page 39

Commissioning 2. Click Add New Item... 3. Depending on the configuration, select the appropriate box, e.g. the CX2xx0 if you are using a CX20xx Embedded PC with PROFINET optional interface. ð The virtual PROFINET slave is created in the project tree. 4. You can now configure your own process data for the virtual slave. The MAC address of the virtual slave is editable. Make sure that the MAC address occurs only once in the system. The IP address is assigned by the PROFINET master. TF6270 Version: 1.1 39
## Page 40

Settings and diagnosis 5 Settings and diagnosis 5.1 Settings on the PROFINET Device protocol 5.1.1 General Name Identifier for the PROFINET Device protocol object. Id The device ID is set by the Twin CAT System Manager during configuration and cannot be configured by the user. Object Id Identification number of the PROFINET Device protocol object in the Twin CAT object context. Type Shows the selected object type and its property. Comment Freely editable comment to describe the object used. Disabled This option sets the PROFINET Device to inactive (transparent) for the current configuration. If this option is activated, the corresponding object is ignored in the IO configuration Create symbols Creating variables as symbolic names. 5.1.2 Adapter This dialog specifies and parameterizes the network card to be used for communication with the PROFINET Device. 40 Version: 1.1 TF6270
## Page 41

Settings and diagnosis OS (NDIS) This option uses the operating system (OS) settings for installed network cards. The name of the network card is displayed in Description. Device Name contains the Device Manager path of the installed network card. PCI This option controls the network card via the PCI bus address, which is specified in the PCI Bus/Slot field. The PCIBus/Slot field is not enabled until the PCI option is selected DPRAM This option controls the network card via the DPRAM address, which is specified in the Address field. The Address field is not enabled until the DPRAM option is selected Search... button This button opens a dialog in which all unused or all compatible devices (adapters) are offered for selection. TF6270 Version: 1.1 41
## Page 42

Settings and diagnosis Compatible Devices… button This button opens the same dialog as TWINCAT\ Show Real-time Ethernet Compatible Devices... in the main menu. Use the dialog box to determine if compatible Ethernet adapters are available on the system. MAC Address MAC address of the Ethernet card (read-only) IP Address IP address of the card (read-only). The IP address is read from the operating system, and has nothing to do with the PROFINET IP address that will be used later. Promiscuous Mode This is required in order to record Ethernet frames, and should normally be switched off. Virtual Device Names A virtual name is used for the network card. Adapter Reference If the network adapter is referenced to another device, this option must be selected. This is used, for example, when using the "Multiple Protocol Handler". Free Cycle 42 Version: 1.1 TF6270
## Page 43

Settings and diagnosis Cycle time in Config mode (no real-time). If Twin CAT is operated in FREERUN mode, care must be taken that the freerun cycle set is no longer than the PROFINET cycle. 5.1.3 PROFINET Protocol AMS Net Id This is the Net ID through which the PROFINET Device protocol can be reached via AMS. AMS Port No protocol This is the Port No through which the PROFINET Device protocol can be reached via AMS. Server AMS Net Id This is the Net ID to which certain AMS messages (e.g. PN records within the index range 0x1000 - 0x1FFF) are forwarded by the PROFINET driver. Currently this is always the System Net Id. AMS Port No server This is the Port No to which certain AMS messages (e.g. PN records within the index range 0x1000 - 0x1FFF) are forwarded by the PROFINET driver. By default this is the PLC Port 851 of runtime system 1. PN SW version Firmware version of the device Port Settings Opens a dialog to parameterize another PROFINET port. Available only for the function, not for CCAT or EL663x. Further information in: Port settings [} 44] Scan PNIO Devices Opens a search dialog for PROFINET Device devices; only available for the controller. Topology Opens a dialog to compare the offline topology with the online topology. Further information in: Topology [} 44] IRT Config Opens a dialog to set IRT-specific parameters. Is only available on an IRT-enabled device. Further information in: IRT configuration [} 45] I-Device TF6270 Version: 1.1 43
## Page 44

Settings and diagnosis Opens a dialog for simultaneous parameterization of a controller and device interface. Only available at CCAT. Further information in: I-Device [} 46] Info Data Support If this option is activated, the AMSNETID is also available in the Twin CAT tree and can then be linked accordingly. 5.1.3.1 Port settings This feature is only available for the real-time Ethernet protocol (no EL663x or CCAT). With this a second PROFINET port and an intelligent switch can thus be realized with a second network card (Intel chipset). It is intended to repeat this feature x times; however, it is presently limited to one additional port. For support, the MRP (Media Redundancy Protocol) function can also be activated via this menu; various settings can be made for this. 5.1.3.2 Topology The online topology can be compared with the offline topology via this dialog. 44 Version: 1.1 TF6270
## Page 45

Settings and diagnosis Starting with build 4024 on the PROFINET Device, it is also possible to simulate a port interconnection when using virtual devices. For this purpose, interconnection between the projected devices can take place offline and be checked in this dialog. The online window displays the interconnection projected by the controller. For more information, see the chapter 5.1.3.3 IRT configuration This menu is only available for an IRT-capable device. TF6270 Version: 1.1 45
## Page 46

Settings and diagnosis For the device, it is currently only possible to determine whether the Twin CAT time should be adjusted to the PROFINET time. All other settings are projected by the controller. 5.1.3.4 I-Device If a controller is also to be operated simultaneously via the same physical interface as a device, then the device can be coupled to the controller via this dialog. The I-Device feature is only approved for operation on CCAT-based hardware. Creating an I-Device 46 Version: 1.1 TF6270
## Page 47

Settings and diagnosis 5.1.4 Sync Task The cycle time of the PROFINET communication is specified by the controller. The task on the Twin CAT system must work at at least the same speed. The basic PROFINET clock and the Send Clock Factor result in the shortest cycle time of 1 ms. Further reductions take place using the Reduction Ratio Factor. This always corresponds to a multiple of the minimum PROFINET clock. This results in a PROFINET cycle time that is always a power of two (1, 2, 4, 8..., 512), i.e. the task should also trigger in this grid. Standard (via Mapping) The device is triggered by the existing mapping. This can then be, for example, the task of the PLC or the NC Recommended cycle time With Profinet RTC1, cycle times of 1 ms or higher are possible. The task can always be operated with 1 ms, as long as the system load of your systems permits this. Special Sync Task NOTE Use a dedicated Sync Task Use your own sync task (Special Sync Task), or a free-running task, because mapping via the PLC leads, for example at a breakpoint, to the task being stopped and thus the connection to the PROFINET Device being interrupted and no process data being exchanged. Name Name of the sync task Cycle ticks Sets the sync time of the sync task in ticks (depending on the default Twin CAT base time). Priority Sets the priority of the sync task. If a new task is created with the Create new I/O Task button, it is assigned the highest possible priority by default. TF6270 Version: 1.1 47
## Page 48

Settings and diagnosis NOTE Using the EL6631-0010 If the Ether CAT-PROFINET gateway terminal is used, it is important to note that the process data always arrives one cycle late in the PLC, as it requires a cycle to transfer the process data from PROFINET to Ether CAT 5.2 Diagnosis on the PROFINET Device Protocol 5.2.1 Diag History Logged diagnosis messages can be read from the Profinet protocol via the Diag History tab. The diagnosis buffer operates as a ring buffer with a current maximum size of 1000 entries. Type The possible errors are grouped into three types: • Info: e.g. information on connection establishment • Warning: e.g. PROFINET diagnosis alarms • Error: e.g. disconnection Timestamp Timestamp of the message Message Contains a message text Add Info 48 Version: 1.1 TF6270
## Page 49

Settings and diagnosis Indicates whether there is any additional information about the event. If this is marked by Yes, the additional information can be fetched and displayed by clicking on the respective message. In the case of a diagnosis alarm (Diagnosis appears), the precise diagnosis information can be fetched at the corresponding level (device, API or module). Clear Diag History The complete diagnosis buffer is cleared by pressing the button. Export Diag History Via this button, you can save the displayed messages in a . TXT file. 5.2.2 Diagnosis This list contains diagnoses and statistics. These can be reset or exported using the corresponding buttons; they are divided into the following sections. Protocol Settings Include the name and cycle time of the PROFINET protocol. Port Statistic Port-specific statistics and diagnoses. Netload Statistic TF6270 Version: 1.1 49
## Page 50

Settings and diagnosis Percentage display of the expected bus load associated with the cyclic process data. Also diagnosis counter of the internal network load filter to avoid possible frame bursts. Profinet Devices Diagnosis and statistics for the projected PROFINET devices. 5.2.3 Cyclic diagnosis Directly below the PROFINET controller there are variables containing general information about the state of the PROFINET communication. These data are exchanged between the PROFINET driver and Twin CAT 3. The process data Dev State. contains information about the physical communication status of the device, such as the link status or whether the sender resources are still adequate. The source process data dev Ctrl currently has no function. The Error variable shows possible problems when establishing a connection and counts the PROFINET devices affected by an error. The diagnosis variable provides status information about an existing connection. The variable counts the PROFINET device affected by a warning or diagnosis. 5.3 Settings on the PROFINET Device 5.3.1 General Here you can find general information about the PROFINET device used. 50 Version: 1.1 TF6270
## Page 51

Settings and diagnosis The name used can be edited directly here. A change is accepted in the tree. In the case of the controller, this also sets the PROFINET station name. For the device, the PROFINET station name is set only if the corresponding option is selected (Get Station Name from Tree). More information about the used GSDML can be found in the comment box. 5.3.2 Device In this dialog, general information regarding the projected PROFINET Device can be checked and set. Device Configuration This tab contains options for the device description file (GSDML). • Device Configure… TF6270 Version: 1.1 51
## Page 52

Settings and diagnosis The configuration button opens the configuration view for the device. For more information, see the chapter • Refresh GSDML Here you can see the currently used GSDML version, which can be updated via the Refresh button. Modules and sub modules existing in the project remain unchanged, while newly inserted modules and sub modules are integrated according to the updated device description file. • Legacy config The Legacy option allows device configuration to be performed according to Twin CAT versions smaller than 4024. Adapter Properties These settings allow you to check the MAC Address, Vendor ID and Device ID of the device. The following options can also be activated here. • Generate Station Name from Control: The PROFINET name can be generated, for example, via the PLC. This feature is comparable with the DIP switches on the BK9103. The Ctrl WORD of the PROFINET protocol is used to help assign a name. This means that the number that is entered (range of values 0 - 255) is appended to the existing station name. The Ctrl WORD is described via the linked task. If, for example, the Ctrl WORD is given a value of 11 from the PLC, its previous station name changes, for example, from "tcpniodevice" to "tcpniodevice011". However, the current tree name is still "tcpniodevice000" • Get Station Name from Tree: The PROFINET name that the device has in the Twin CAT tree is used. • Register PN IP Settings not at the OS: For Windows CE the PROFINET IP address is additionally registered at the operating system. This means that there is a possibility to access standard IP-based services of the operating system via the PROFINET address. This option can be deselected again here. Instance Properties In the instance settings, only the desired Frame ID can be set for the output data. This must always lie within the corresponding communication area. The driver adjusts them automatically, i.e. normally no adjustments need to be made here. The Frame ID is automatically set to the appropriate value with the information from the GSDML. Please change the Frame ID only in consultation with Beckhoff Support. The other three values (Instance ID, Server UDP Port and Client UDP Port) are displayed here purely for information. 5.3.3 ADS ADS messages can be sent directly from here. The Net Id and the port are taken directly from the corresponding adapter. 52 Version: 1.1 TF6270
## Page 53

Settings and diagnosis A variety of PROFINET functions can be triggered via the correct settings for Index-Group and Index- Offset. This includes, for example, the setting of alarms or record data. Example: Read PROFINET name and IP settings, see chapter Further diagnosis via ADS interface. 5.3.4 EL663x If the protocol is operated via an EL663x, an additional menu will appear on the devices. TF6270 Version: 1.1 53
## Page 54

Settings and diagnosis General settings In the case of the device (= EL6631-0010), the PROFINET name and IP can be specified via Ether CAT. This means that after a startup, the device has these default settings. PDO mapping Via the PDO mapping, you can select the form in which the PROFINET process data is mapped to the Ether CAT-side PDOs. PN output behaviour IEC state is not OP The output behavior determines what happens on the PROFINET side if the Ether CAT status of the terminal is not OP. The first two options affect only the process data. The last option results in the transfer of the producer or consumer status, hence associated Profinet alarms and diagnoses are triggered here. 5.3.5 GSDML generator A GSDML can be created from an existing configuration via this window. The generated file can then be integrated into the controller. The device configuration is thus set and does not need to be reconfigured on the controller side. 54 Version: 1.1 TF6270
## Page 55

Settings and diagnosis If the names in the tree have been adjusted, this change can be applied here optionally. To do this, the associated language must be selected. The texts are then accepted under this language in the GSDML. If several languages are to be adapted, the generated GSDML must first be reintegrated into the Twin CAT system, then the tree must be re-edited in the desired language and the GSDML must be regenerated with this language. Existing languages remain unchanged, only the selected language is replaced with the texts. 5.4 PROFINET Device diagnosis 5.4.1 Diagnosis The current PROFINET station name is displayed on the Diagnosis tab. TF6270 Version: 1.1 55
## Page 56

Settings and diagnosis Station name A controller can assign a device name to the device ("baptize") and thus change the name. An empty string is also allowed here and also the default. However, such a setting is not allowed as a box name. In addition, there are Twin CAT functions that iterate via the tree based on the node names used. This is another reason why the box name is not changed automatically and does not correspond to the PROFINET station name. IP configuration The IP settings are also specified by the controller. If the device is not in data exchange (= no existing AR), then the IP address can be set here and is then stored fail-safe. However, during a PROFINET startup, the controller checks the IP settings. If these are different than expected by the controller, they will be overwritten again. Normally, the controller does not make the IP settings remanently; the previously saved IP settings are thus deleted. When using TF627x, make sure that the IP addresses of the operating system and PROFINET are different. Module Difference This list shows the module and sub module differences detected by the device. The comparison is made here between the projected modules on the controller side (= Expected) and the actual plugged-in modules on the device side (= Real). Detected differences are transmitted to the controller and shown here. 5.4.2 Status and Ctrl. flags Pn Io Box State The Pn Io Box State can be used to monitor the current status of PROFINET communication. 56 Version: 1.1 TF6270
## Page 57

Settings and diagnosis Pn Io Box State Comment Meaning 0x0001 (Bit 0) Device is in I/O exchange PROFINET Device is exchanging data 0x0002 (Bit 1) Device is blinking PROFINET Device is being searched for by identification 0x0004 (Bit 2) Provider State 0=STOP, The PROFINET Controller is stopped 1=RUN 0x0008 (Bit 3) Problem indicator 0=OK, The PROFINET Device has encountered problems 1=Error In the absence of an error, the value of Pn Io Box State is "5" - in other words, bits 0 and 2 are set. Pn Io Box Ctrl Pn Io Box Ctrl can be used for assigning names; only the low byte is to be used for this. The high byte must be 0x00. Pn Io Box Ctrl Comment Meaning 0x0001 EBus Reset EBus Reset on the EK9300/EP9300 5.4.3 Port diagnostics Port diagnosis can be used to identify the neighboring PROFINET devices. The device's own port can also be diagnosed. TF6270 Version: 1.1 57
## Page 58

Settings and diagnosis Local Port Data and Remote Port Data The information here is subdivided into local port information and remote port properties. In PROFINET the LLDP protocol (IEEE Std 802.1AB) is mandatory from conformance class A (CCA). The devices exchange neighborhood IDs via this protocol, so that each port is known to its neighbor. Furthermore, the Simple Network Management Protocol (SNMP) can be used as an aid at this point. On opening the Port Diagnosis tab, Twin CAT acts as a Network Management Station (NMS) and collects the required device information via SNMP. In the previous image, you can see, for example, properties of the local port, data of the neighboring device and port statistics. For correct topology recognition it is important that only devices are present in the segment that also support the LLDP protocol (this also applies to switches). There is a possibility that there may be unwanted behavior in Windows 10. This is reflected in in- consistencies in topology detection. Inconsistencies in topology detection. Windows 10 provides an LLDP driver which is active by default. The PROFINET device also contains an LLDP driver. The system then sends two LLDP telegrams from one port to the remaining nodes on the bus. These remaining devices also expect two ports due to two LLDP telegrams, which do not exist. To prevent this behavior, disable the Windows LLDP driver. To do this, uncheck Microsoft-LLDP-Driver (see red rectangle). 58 Version: 1.1 TF6270
## Page 59

Settings and diagnosis 5.4.4 Further diagnosis Additional diagnostic facilities are available through the ADS interface. Read out the PROFINET name and the IP settings An ADS READ function block is to be used for this. ADS WRITE Comment AMSNETID AMS Net ID of the PROFINET Device PORT 0x FFFF (if a virtual PROFINET Device is used, the port number is formed from 0x1000 + the device ID) Index group High word - 0x0000, low word - 0x F804 Index offset 0x0000 Length 257 Data byte offset Value Comment 0..3 reserved reserved 4..7 ARRAY4 of Byte IP Address 8..11 ARRAY4 of Byte Sub Net Mask 12..15 ARRAY4 of Byte Default gateway 16...x STRING (max. length PROFINET name 240) Reading out the module difference An ADS READ function block is to be used for this. TF6270 Version: 1.1 59
## Page 60

Settings and diagnosis ADS WRITE Comment AMSNETID AMS Net ID of the PROFINET Device PORT 0x FFFF (if a virtual PROFINET Device is used, the port number is formed from 0x1000 + the device ID) Index group High word - 0x0000, low word - 0x F826 Index offset 0x0000 Length 20882 The modules are identical if the length null is returned. The length can differ, depending on the type (see the Module Diff Block PROFINET specification) Example of how the data can be constructed: Data byte offset Value Comment 0..3 UINT32 API 4..5 UINT16 Number of Modules 6..7 UINT16 Slot 8..11 UINT32 Module Ident (see GSDML File) 12..13 UINT16 Module State (0-no Modul, 1- Wrong Module, 2- Proper Module, 3- Substitute) 14..15 UINT16 Number Of Sub Modules 16..17 UINT16 Sub Slot 60 Version: 1.1 TF6270
## Page 61

Profinet Features 6 Profinet Features 6.1 Alarms PROFINET alarms can also be transmitted through the ADS interface. PROFINET alarm An ADS WRITE function block is to be used for this. ADS WRITE Comment AMSNETID AMS Net ID of the PROFINET Device PORT 0x FFFF (if a virtual PROFINET Device is used, the port number is formed from 0x1000 + the device ID) Index group High word - alarm type (see PROFINET specification), low word - 0x F807 Index offset High word - slot number, low word - sub slot number No further data is transmitted. PROFINET alarm (examples) ALARMS Comment 0x0000 reserved 0x0001 Diagnosis appears 0x0002 Process 0x0003 Pull 0x0004 Plug 0x0005 Status ... further diagnosis messages (see PROFINET specification) Supported PROFINET alarm types The alarm types are defined in the structure 6.2 Record data PROFINET record data PROFINET record data can also be received directly by means of the PLC. To do this an "indication" is set in the PLC ( (READINDICATION for reading and WRITEINDICATION for writing). The RECORD data structure is described in Record Data WORD Index; WORD Length; //zum Lesen auf 0 WORD Transfer Sequence; WORD Length Of Aligned; PROFINET RECORD DATA mapped on ADS TF6270 Version: 1.1 61
## Page 62

Profinet Features PROFINET Length in Comment ADS bytes - String AMS NET ID of the PROFINET AMSNETID Device - 2 0x FFFF Port When the virtual interface is used, the port number is to be taken from the System Manager Read/Write 2 0 - Read Read - Read Indication 1 - Write Write - Write Indication Number of AR 2 0x0000 - API 4 0x00000000 - Application Process Identifier Slot 2 Slot number Index Offset High Word 0x0000-0x7FFF Sub Slot 2 Sub Slot number Index Offset Low Word 0x0000-0x8FFF Record Data Index 2 0x0000-0x1FFF Index Group Low Word - 2 0x8000 Index Group High Word Record Data Length 2 to be read at "0" LENGTH Record Data Transfer 2 consecutive number - Sequence Record Data Length of Aligned 2 can be zero - Example Example for reading data; the PROFINET Controller wants to read data from a Beckhoff device via the record data. In this example, all the Rec Index values are accepted, and will return the same data - 10 bytes that are located in the "Data" data array. CASE i OF 0: ADSREADIND( CLEAR:=FALSE , VALID=> , NETID=> , PORT=> , INVOKEID=> , IDXGRP=> , IDXOFFS=> , LENGTH=> ); IF ADSREADIND. VALID THEN Idx Group:=ADSREADIND. IDXGRP; Idx Offset:=ADSREADIND. IDXOFFS ; i:=10; END_IF 10: ADSREADRES( NETID:=ADSREADIND. NETID, PORT:=ADSREADIND. PORT, INVOKEID:=ADSREADIND. INVOKEID , RESULT:=0 , LEN:=10 , DATAADDR:=ADR(Data), RESPOND:=TRUE ); i:=20; ADSREADIND(CLEAR:=TRUE); 20: i:=0; ADSREADRES(RESPOND:=FALSE); END_CASE 6.3 PROFINET Shared Device Configuration on the Twin CAT side: ü Structure -> EL6631>EL6631-0010 62 Version: 1.1 TF6270
## Page 63

Profinet Features 1. Scanning the devices 2. Adding the PROFINET Controller and Device 3. Creating the process data under the PROFINET Device TF6270 Version: 1.1 63
## Page 64

Profinet Features 4. Scanning the controller and adding the device 5. Adjusting the IP address of the controller. The device and controller must be on the same subnet. 64 Version: 1.1 TF6270
## Page 65

Profinet Features 6. Under the device, select the Shared Device tab. Here you can set which controller accesses which data. In this example, the EL6631 controller is allowed to access only the 1 Word In and Output process data. 7. Activate the checkbox get PN-Stationname from ECAT on the EL663x tab TF6270 Version: 1.1 65
## Page 66

Profinet Features 8. Changing the name of the device. It must be identical to the name under the controller. Configuration TIA side: 9. Configuration of the Device with the creation of the process data (must be identical with the TC3 side) 66 Version: 1.1 TF6270
## Page 67

Profinet Features 10. Check the IP address on the Ethernet addresses tab; you may need to adjust the address 11. On the Shared Device tab, select the process data that the Siemens controller is allowed to access. The process data that the Siemens controller is not allowed to access are grayed out. TF6270 Version: 1.1 67
## Page 68

Appendix 7 Appendix 7.1 Troubleshooting The different points indicate settings in the configuration of the PROFINET system which, if ignored, can lead to undesirable behavior; we also explain how to diagnose the behavior. Device description file (GSDML) / DAP (Device Access Point) • Is the GSDML available on the system? • Do the versions of both systems match? ◦ It is recommended to use the same GSDML/DAP versions on both systems. ◦ Is the latest version used? • Is the GSDML in the correct path? ◦ Twin CAT 2: Twin CAT2: C:\Twin CAT\Io\Profi Net ◦ Twin CAT 3: C:\Twin CAT\3.1\Config\Io\Profinet • Is the correct GSDML being used? ◦ Version ◦ It may be necessary to contact the vendor/manufacturer or search for the appropriate GSDML on the vendor's website. Has the correct PROFINET adapter been created? • Controller or device (master or slave)? ◦ Example, wrong / correct Task configuration • Was a free running task created? ◦ Or was a special Sync Task used? • Cycle time to base 2? ◦ 1 ms, 2 ms, 4 ms, 8 ms, …. 68 Version: 1.1 TF6270
## Page 69

Appendix ◦ Further information in chapter Sync Task [} 47] TF6270 – Twin CAT System Message If the following warning is displayed when activating the project using the TF6270... “Twin CAT System Message: Source: TCOM Server; Timestamp: 2/12/2021 9:05:40AM 809 ms Message: Boot data not found (file: Profinet_Parameters_3010060)” ... this can be ignored, because data of the connection establishment are stored for the PROFINET communication. If no PN connection has been established, no file is created. This warning will automatically disappear as soon as a PROFINET communication has been established. Ether CAT Terminals EL663x-00x0 • Was the correct terminal used? ◦ EL663x-0000 cannot be used as device ◦ EL6631-0010 cannot be used as controller TF6270 Version: 1.1 69
## Page 70

Appendix • Ether CAT diagnostics ◦ Ether CAT status = operational (OP) ◦ Wc State = 0 (data valid) Box States of the PROFINET devices • Communication established? 70 Version: 1.1 TF6270
## Page 71

Appendix 7.1.1 Diagnostic LEDs 7.1.1.1 EL6631-0010 – LEDs LEDs for Ether CAT diagnosis LED Display Description RUN green off State of the Ether CAT State Machine: INIT = initialization of the terminal; BOOTSTRAP = function for terminal firmware updates flashing State of the Ether CAT State Machine: 200 ms PREOP = function for mailbox communication and different standard-settings set off (1 s) State of the Ether CAT State Machine: on (200 ms) SAFEOP = verification of the sync manager channels and the distributed clocks. Outputs remain in safe state on State of the Ether CAT State Machine: OP = normal operating state; mailbox and process data communication is possible LED diagnosis PROFINET RUN/Err Colors green Colors red Meaning on off EL terminal is parameterized off (1 s) off EL6631-0010 does not have an IP address on (200 ms) flashing off EL6631-0010 still has not received a PROFINET name 200 ms off flashing Terminal starts 200 ms TF6270 Version: 1.1 71
## Page 72

Appendix LED diagnosis PROFINET Err Colors green Colors red Meaning on off EL terminal is exchanging data flashing off EL terminal is exchanging data, but the provider status is 200 ms stopped off (1 s) off EL terminal is exchanging data, but the modules are on (200 ms) different off flashing No AR established, 500 ms establishment of connection has not been initialized flashing flashing Identify EL terminal through PROFINET "flashing" 500 ms 500 ms LEDs starting up Run PN Run/Err PN Err Meaning off off off No electrical voltage connected to E-bus. The EL6631-0010 must be exchanged if Ether CAT terminals behind it need to function. off off red on EL terminal is starting up; after approx. 10 seconds, the LED should go out. If this does not happen, the EL6631-0010 module must be exchanged. 7.1.1.2 Optional interface B930 - LEDs Display LED PROFINET status Meaning green red PN Off 200 ms flashing Power on, startup phase 200 ms flashing off No PROFINET name 1 s off, 200 ms flash off No IP address on on off RUN DIAG 500 ms flashing 500 ms flashing PN controller identification. The PN controller is transmitting an identification signal. off 200 ms flashing The establishment of a connection with the controller has not been completed. 1 s off, 200 ms flash off Problem when establishing on a connection, or the actual and target configurations are different. 200 ms on off The device is in data exchange but the PLC is in Stop mode. on off The device is in data exchange. If a virtual PROFINET slave was projected, this is also covered by the LEDs in the event of an error. The physical device always has higher priority. The status of the virtual slave is only displayed once everything is OK with the physical device. 72 Version: 1.1 TF6270
## Page 73

Appendix 7.2 Support and Service Beckhoff and their partners around the world offer comprehensive support and service, making available fast and competent assistance with all questions related to Beckhoff products and system solutions. Beckhoff's branch offices and representatives Please contact your Beckhoff branch office or representative for local support and service on Beckhoff products! The addresses of Beckhoff's branch offices and representatives round the world can be found on her internet pages: https://www.beckhoff.com You will also find further documentation for Beckhoff components there. Beckhoff Support Support offers you comprehensive technical assistance, helping you not only with the application of individual Beckhoff products, but also with other, wide-ranging services: • support • design, programming and commissioning of complex automation systems • and extensive training program for Beckhoff system components Hotline: +49 5246 963 157 Fax: +49 5246 963 9157 e-mail: support@beckhoff.com Beckhoff Service The Beckhoff Service Center supports you in all matters of after-sales service: • on-site service • repair service • spare parts service • hotline service Hotline: +49 5246 963 460 Fax: +49 5246 963 479 e-mail: service@beckhoff.com Beckhoff Headquarters Beckhoff Automation Gmb H & Co. KG Huelshorstweg 20 33415 Verl Germany Phone: +49 5246 963 0 Fax: +49 5246 963 198 e-mail: info@beckhoff.com web: https://www.beckhoff.com TF6270 Version: 1.1 73
## Page 75

More Information: www.beckhoff.com/tf6270 Beckhoff Automation Gmb H & Co. KG Hülshorstweg 20 33415 Verl Germany Phone: +49 5246 9630 info@beckhoff.com www.beckhoff.com
