---
title: "Riedel_Communications_RRCS_EN"
product: "Riedel"
category: "Communication"
tags: ["COMMUNICATIONS", "RIEDEL", "RRCS"]
language: "EN"
document_type: "Manual"
version: "1.2.0"
source_pdf: "https://download.beckhoff.com/download/Document/automation/twincat3/Riedel_Communications_RRCS_EN.pdf"
release_date: "2025-07-23"
---
Manual | EN Twin CAT 3 Riedel Communications | RRCS 2025-07-23 | Version: 1.2.0

## Page 3

Table of Contents Table of Contents 1 Foreword.................................................................................................................................................... 5 1.1 Notes on the documentation............................................................................................................. 5 1.2 For your safety.................................................................................................................................. 5 1.3 Notes on information security............................................................................................................ 7 2 Disclaimer.................................................................................................................................................. 8 3 Overview.................................................................................................................................................... 9 3.1 System Requirements..................................................................................................................... 11 3.2 Revision control............................................................................................................................... 11 4 Installation............................................................................................................................................... 12 5 Programming........................................................................................................................................... 13 5.1 Function blocks............................................................................................................................... 13 5.1.1 FB_RRCScom.................................................................................................................. 13 5.1.2 FB_Get State.................................................................................................................... 14 5.1.3 FB_Get Alive..................................................................................................................... 15 5.1.4 FB_Is Connected To Artist.................................................................................................. 16 5.1.5 FB_Get All Logic Sources_V2............................................................................................. 17 5.1.6 FB_Set Logic Source State................................................................................................. 18 5.2 Data types....................................................................................................................................... 19 5.2.1 ST_Logic Source............................................................................................................... 19 5.2.2 E_RRCS_Error Codes...................................................................................................... 19 6 Samples................................................................................................................................................... 21 6.1 Tc3_RRCS_Sample01.................................................................................................................... 21 6.2 Tc3_RRCS_Sample02.................................................................................................................... 23 7 Support and Service............................................................................................................................... 28 Twin CAT 3 Version: 1.2.0 3

## Page 4

Table of Contents 4 Version: 1.2.0 Twin CAT 3

## Page 5

Foreword 1 Foreword 1.1 Notes on the documentation This description is intended exclusively for trained specialists in control and automation technology who are familiar with the applicable national standards. The documentation and the following notes and explanations must be complied with when installing and commissioning the components. The trained specialists must always use the current valid documentation. The trained specialists must ensure that the application and use of the products described is in line with all safety requirements, including all relevant laws, regulations, guidelines, and standards. Disclaimer The documentation has been compiled with care. The products described are, however, constantly under development. We reserve the right to revise and change the documentation at any time and without notice. Claims to modify products that have already been supplied may not be made on the basis of the data, diagrams, and descriptions in this documentation. Trademarks Beckhoff®, ATRO® , Ether CAT®, Ether CAT G®, Ether CAT G10®, Ether CAT P®, MX-System®, Safety over Ether CAT®, TC/BSD®, Twin CAT®, Twin CAT/BSD®, Twin SAFE®, XFC®, XPlanar®, and XTS® are registered and licensed trademarks of Beckhoff Automation Gmb H. If third parties make use of the designations or trademarks contained in this publication for their own purposes, this could infringe upon the rights of the owners of the said designations. Ether CAT® is a registered trademark and patented technology, licensed by Beckhoff Automation Gmb H, Germany. Copyright © Beckhoff Automation Gmb H & Co. KG, Germany. The distribution and reproduction of this document, as well as the use and communication of its contents without express authorization, are prohibited. Offenders will be held liable for the payment of damages. All rights reserved in the event that a patent, utility model, or design are registered. Third-party trademarks Trademarks of third parties may be used in this documentation. You can find the trademark notices here: https://www.beckhoff.com/trademarks. 1.2 For your safety Safety regulations Read the following explanations for your safety. Always observe and follow product-specific safety instructions, which you may find at the appropriate places in this document. Exclusion of liability All the components are supplied in particular hardware and software configurations which are appropriate for the application. Modifications to hardware or software configurations other than those described in the documentation are not permitted, and nullify the liability of Beckhoff Automation Gmb H & Co. KG. Twin CAT 3 Version: 1.2.0 5

## Page 6

Foreword Personnel qualification This description is only intended for trained specialists in control, automation, and drive technology who are familiar with the applicable national standards. Signal words The signal words used in the documentation are classified below. In order to prevent injury and damage to persons and property, read and follow the safety and warning notices. Personal injury warnings DANGER Hazard with high risk of death or serious injury. WARNING Hazard with medium risk of death or serious injury. CAUTION There is a low-risk hazard that could result in medium or minor injury. Warning of damage to property or environment NOTICE The environment, equipment, or data may be damaged. Information on handling the product This information includes, for example: recommendations for action, assistance or further information on the product. 6 Version: 1.2.0 Twin CAT 3

## Page 7

Foreword 1.3 Notes on information security The products of Beckhoff Automation Gmb H & Co. KG (Beckhoff), insofar as they can be accessed online, are equipped with security functions that support the secure operation of plants, systems, machines and networks. Despite the security functions, the creation, implementation and constant updating of a holistic security concept for the operation are necessary to protect the respective plant, system, machine and networks against cyber threats. The products sold by Beckhoff are only part of the overall security concept. The customer is responsible for preventing unauthorized access by third parties to its equipment, systems, machines and networks. The latter should be connected to the corporate network or the Internet only if appropriate protective measures have been set up. In addition, the recommendations from Beckhoff regarding appropriate protective measures should be observed. Further information regarding information security and industrial security can be found in our https://www.beckhoff.com/secguide. Beckhoff products and solutions undergo continuous further development. This also applies to security functions. In light of this continuous further development, Beckhoff expressly recommends that the products are kept up to date at all times and that updates are installed for the products once they have been made available. Using outdated or unsupported product versions can increase the risk of cyber threats. To stay informed about information security for Beckhoff products, subscribe to the RSS feed at https:// www.beckhoff.com/secinfo. Twin CAT 3 Version: 1.2.0 7

## Page 8

Disclaimer 2 Disclaimer This publication contains statements about the suitability of our products for certain areas of application. These statements are based on typical features of our products. The examples shown in this publication are for demonstration purposes only. The information provided herein should not be regarded as specific operation characteristics. It is incumbent on the customer to check and decide whether a product is suitable for use in a particular application. We do not give any warranty that the source code which is made available with this publication is complete or accurate. THE SAMPLE CODE CONTAINED IN THIS PUBLICATION IS PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED, IMPLIED OR STATUTORY, INCLUDING WITHOUT LIMITATION, ANY WARRANTY WITH RESPECT TO NON-INFRINGEMENT, FREEDOM FROM PROPRIETARY RIGHTS OF THIRD PARTIES OR FITNESS FOR ANY PARTICULAR PURPOSE. This publication may be changed from time to time without prior notice. No liability is assumed for errors and/ or omissions. Our products are described in detail in our data sheets and documentations. Product-specific warnings and cautions must be observed. For the latest version of our data sheets and documentations visit our website www.beckhoff.de. © Beckhoff Automation Gmb H, January 2025. The reproduction, distribution and utilization of this document as well as the communication of its contents to others without express authorization is prohibited. Offenders will be held liable for the payment of damages. All rights reserved in the event of the grant of a patent, utility model or design. 8 Version: 1.2.0 Twin CAT 3

## Page 9

Overview 3 Overview This example describes the communication possibilities between Beckhoff and Riedel Communications. Riedel Communications Riedel Communications Gmb H & Co. KG develops, manufactures and distributes intercom, fiber optic, radio and audio network systems for use in broadcasting, events, theater and industry. With the Riedel Router Control Software (RRCS), Riedel offers a universal, XML-based interface that can be used to control Artist series intercom systems. To use RRCS, you need to install the RRCS server. This server runs on PCs with the Windows operating system. There are two options: Twin CAT 3 Version: 1.2.0 9

## Page 10

Overview • Installation of the RRCS server on Beckhoff IPCs on which the Beckhoff Twin CAT program is also running • Installation of the RRCS server on any server Beckhoff Beckhoff provides a library with which Beckhoff control systems can communicate bidirectionally with Riedel Artist systems via RRCS. This library is described below and is part of the samples. You can download the samples in the chapter Samples [} 21]. To use the library, you need a TC1200 license and a license for TF6760. The library and the samples are subject to the disclaimer [} 8] in chapter 2. In addition, two exemplary implementations are listed in this documentation. Summary and benefits • Combines Beckhoff's open PC and Ether CAT-based control technology with Riedel communication systems. • Direct support of the RRCS protocol from Riedel in Twin CAT • Enables communication with Riedel Artist and Bolero systems as well as the use of Riedel Smart Panels. • Facilitates dynamic control of audio circuits and integration with theater and show announcement systems. • System integrators can now integrate open PC and Ether CAT-based control technology components from Beckhoff into the Riedel system, and vice versa. • Beckhoff supports the essential parts of the RRCS protocol from Riedel in Twin CAT on the basis of Twin CAT 3 Io T HTTPS/REST (TF6760). 10 Version: 1.2.0 Twin CAT 3

## Page 11

Overview • This enables communication with Riedel Artist and Bolero systems and the implementation of Riedel Smart Panels. • Based on Twin CAT Speech (TF4500) error messages or any type of announcements can be created by using our text to speech function blocks. Also, audio files can be played. • The audio data created by Twin CAT Speech (or other tools) can be send via DANTE to the Riedel System by using the DANTE virtual audio card on Beckhoff Windows 10 or 11 based systems. • In a theatre context, possible use cases can be the dynamic change and switching of audio circuits based on logic and priorities running in the Beckhoff control system or, in combination with theater stage management, the show control including cue-light signaling and announcements. The control elements for the end user can be selected and combined, from the following: • Beckhoff multi-touch Control Panels and Twin CAT HMI • In combination with classic light switches or control wheels and other mechanical inputs • Riedel Smart Panels or wireless Bolero beltpacks as control and monitoring interfaces As the Beckhoff control system offers almost endless communication and control possibilities, controlling audio/video systems, stage and show applications, and even building automation with temperature control, along with blinds and general lights, is possible. 3.1 System Requirements The following requirements must be met to execute the sample projects: Technical data Description Twin CAT version Twin CAT 3.1 Build 4022.20 or higher Required Twin CAT licenses TC1200 | Twin CAT 3 PLC TF6760 | Twin CAT 3 Io T HTTPS/REST Riedel Communcations RRCS server software Further information: RRCS Test network Before launching a project that involves the use of any network protocol, it is crucial to ensure that the network being used is functioning correctly. We recommend starting with a simple test where the Beckhoff device has a direct connection to the device it should communicate with. With no Firewalls or similar active. 1. First, verify the hardware components by checking cable connections and ensuring that routers or switches are powered on and functional. 2. Next, inspect the network settings such as IP addresses, subnet masks, and firewall settings on both the Beckhoff device and the device it is intended to communicate with. ð After that basic test works, you can configure the firewall as described here: https://download.beckhoff.com/download/document/ipc/industrial-pc/ipc_security_guideline_en.pdf 3.2 Revision control Date Version Change 2025-05-08 3.0.0.0 First version Twin CAT 3 Version: 1.2.0 11

## Page 12

Installation 4 Installation Installation of the Riedel Communications RRCS software Depending on the selected setup, install the software on the corresponding device. (See Overview [} 9]) The procedure is described in the RRCS - Quick Startup Guide from Riedel. Installing Twin CAT The Beckhoff Industrial PC must have the runtime environment (XAR) installed. Details can be found here: https://infosys.beckhoff.com/index.php?content=../content/1033/tc3_installation/179470219.html You must also install the Twin CAT Function TF6760. Details can be found here: https://infosys.beckhoff.com/index.php?content=../content/1033/tf6710_tc3_iot_functions/2544553995.html 12 Version: 1.2.0 Twin CAT 3

## Page 13

Programming 5 Programming Bidirectional communication between Twin CAT and the Riedel Communications RRCS server takes place using the function blocks described below, which are contained in the Tc3_RRCS library. To be able to use function blocks of the Tc3_RRCS library, you must install and license the Twin CAT 3 Function TF6760 Io T HTTPS/REST ! 5.1 Function blocks 5.1.1 FB_RRCScom This function block is required for communication with the RRCS server This function block should only be instantiated and not called implicitly! The call is made using pointers from the function blocks described below, e.g. from FB_Get State. The IP address and port of the RRCS server must be specified in the variable declaration: VAR fb RRCScom: FB_RRCScom(ip Addr_Server:= '192.168.42.59', ip Port_Server:=8193); END_VAR Outputs VAR_OUTPUT e Comm State : E_Comm State; n Status Code : UINT; s Response : STRING(..); _pfb SB : POINTER; END_VAR Name Type Description e Comm State E_Comm State The state of the function block. n Status Code UINT Servers deliver the status code as a response to every HTTP request. The server uses this code to inform the client whether the request was successful. Normally 200 (OK) is returned. Detailed information on this: developer.mozilla.org/en/docs/Web/HTTP/Reference/ Status s Response STRING(..) String with the unprocessed response from the RRCS server. The maximum length of the string is set in the parameter list of the library. _pfb SB POINTER Only for internal use Twin CAT 3 Version: 1.2.0 13

## Page 14

Programming 5.1.2 FB_Get State This function block queries the state of the RRCS server. Inputs VAR_INPUT b Execute : BOOL; END_VAR Name Type Description b Execute BOOL The function block is enabled by a positive edge at this input. Outputs VAR_OUTPUT e RRCS_Error Code : E_RRCS_Error Codes; b Busy : BOOL; b Error : BOOL; n Status Code : UINT; s Gateway State : STRING(32); END_VAR Name Type Description e RRCS_Error Code E_RRCS_Error Codes Error code received from RRCS_Servers. [} 19] b Busy BOOL Is TRUE as long as the function block is busy with the query and no error occurs. b Error BOOL Is TRUE if an error occurred during the query. n Status Code UINT Servers deliver the status code as a response to every HTTP request. The server uses this code to inform the client whether the request was successful. Normally 200 (OK) is returned. Detailed information on this: developer.mozilla.org/en/docs/Web/HTTP/Reference/Status s Gateway State STRING(32) Information from the RRCS server, possible states: • Working • Standby FB_Get State has an extended FB_init method in which an instance of FB_RRCScom must be referenced using a pointer: VAR fb Get State: FB_Get State(pfb RRCscom := ADR(fb RRCScom)); END_VAR 14 Version: 1.2.0 Twin CAT 3

## Page 15

Programming 5.1.3 FB_Get Alive To ensure that there is a correct connection between Twin CAT and the RRCS server, the function block FB_Get Alive can be used. Inputs VAR_INPUT b Execute : BOOL; END_VAR Name Type Description b Execute BOOL The function block is enabled by a positive edge at this input. Outputs VAR_OUTPUT e RRCS_Error Code : E_RRCS_Error Codes; b Busy : BOOL; b Error : BOOL; n Status Code : UINT; b Alive : BOOL; END_VAR Name Type Description e RRCS_Error Code E_RRCS_Error Codes Error code received from RRCS_Servers. [} 19] b Busy BOOL Is TRUE as long as the function block is busy with the query and no error occurs. b Error BOOL Is TRUE if an error occurred during the query. n Status Code UINT Servers deliver the status code as a response to every HTTP request. The server uses this code to inform the client whether the request was successful. Normally 200 (OK) is returned. Detailed information on this: developer.mozilla.org/en/docs/Web/HTTP/Reference/Status b Alive BOOL Is TRUE if communication to the RRCS server is working. FB_Get Alive has an extended FB_init method in which an instance of FB_RRCScom must be referenced using a pointer: VAR fb Get Alive: FB_Get Alive(pfb RRCscom := ADR(fb RRCScom)); END_VAR Twin CAT 3 Version: 1.2.0 15

## Page 16

Programming 5.1.4 FB_Is Connected To Artist This function block is used to query whether the RRCS server is communicating with an Artist device. Inputs VAR_INPUT b Execute : BOOL; END_VAR Name Type Description b Execute BOOL The function block is enabled by a positive edge at this input. Outputs VAR_OUTPUT e RRCS_Error Code : E_RRCS_Error Codes; b Busy : BOOL; b Error : BOOL; n Status Code : UINT; b Is Connected : BOOL; END_VAR Name Type Description e RRCS_Error Code E_RRCS_Error Codes Error code received from RRCS_Servers. [} 19] b Busy BOOL Is TRUE as long as the function block is busy with the query and no error occurs. b Error BOOL Is TRUE if an error occurred during the query. n Status Code UINT Servers deliver the status code as a response to every HTTP request. The server uses this code to inform the client whether the request was successful. Normally 200 (OK) is returned. Detailed information on this: developer.mozilla.org/en/docs/Web/HTTP/Reference/Status b Is Connected BOOL Is TRUE if the RRCS server is communicating with an Artist device. FB_Is Connected To Artist has an extended FB_init method in which an instance of FB_RRCScom must be referenced using a pointer: VAR fb Is Connected To Artist: FB_Is Connected To Artist(pfb RRCscom := ADR(fb RRCScom)); END_VAR 16 Version: 1.2.0 Twin CAT 3

## Page 17

Programming 5.1.5 FB_Get All Logic Sources_V2 This function block queries the 'Logic sources' defined in the Artist device. Inputs VAR_INPUT b Execute : BOOL; END_VAR Name Type Description b Execute BOOL The function block is enabled by a positive edge at this input. Outputs VAR_OUTPUT e RRCS_Error Code : E_RRCS_Error Codes; b Busy : BOOL; b Error : BOOL; n Status Code : UINT; n Logic Source Count : UINT; a Logic Sources : ARRAY[ ] OF ST_Logic Source; END_VAR Name Type Description e RRCS_Error Code E_RRCS_Error Codes Error code received from RRCS_Servers. [} 19] b Busy BOOL Is TRUE as long as the function block is busy with the query and no error occurs. b Error BOOL Is TRUE if an error occurred during the query. n Status Code UINT Servers deliver the status code as a response to every HTTP request. The server uses this code to inform the client whether the request was successful. Normally 200 (OK) is returned. Detailed information on this: developer.mozilla.org/en/docs/Web/HTTP/Reference/Status n Logic Source Count UINT The number of 'Logic Sources' defined in the Artist device. a Logic Sources ARRAY[ ] OF Listing of all defined 'Log Sources' in the form of an array. ST_Logic Source [} 19] The maximum number of array entries is defined in the parameter list. FB_Get All Logic Sources_V2 has an extended FB_init method in which an instance of FB_RRCScom must be referenced using a pointer: VAR fb Get All Logic Sources_V2: FB_Get All Logic Sources_V2(pfb RRCscom := ADR(fb RRCScom)); END_VAR Twin CAT 3 Version: 1.2.0 17

## Page 18

Programming 5.1.6 FB_Set Logic Source State This function block offers the option of changing the state of a 'Logic Source'. This is done using the unique Object ID. Inputs VAR_INPUT b Execute : BOOL; n Object ID : UDINT; b State : BOOL; a Logic Sources : ARRAY[ ] OF ST_Logic Source; END_VAR Name Type Description b Execute BOOL The function block is enabled by a positive edge at this input. n Object ID UDINT Logic Sources' are accessed via the unique Object ID. b State BOOL Specification of the desired state. a Logic Sources ARRAY[ ] OF Listing of all defined 'Log Sources' in the form of an ST_Logic Source [} 19] array. The maximum number of array entries is defined in the parameter list. Outputs AR_OUTPUT e RRCS_Error Code : E_RRCS_Error Codes; b Busy : BOOL; b Error : BOOL; n Status Code : UINT; END_VAR Name Type Description e RRCS_Error Code E_RRCS_Error Codes Error code received from RRCS_Servers. [} 19] b Busy BOOL Is TRUE as long as the function block is busy with the query and no error occurs. b Error BOOL Is TRUE if an error occurred during the query. n Status Code UINT Servers deliver the status code as a response to every HTTP request. The server uses this code to inform the client whether the request was successful. Normally 200 (OK) is returned. Detailed information on this: developer.mozilla.org/en/docs/Web/HTTP/Reference/Status FB_Set Logic Source State has an extended FB_init method in which an instance of FB_RRCScom must be referenced using a pointer: VAR fb Set Logic Source State: FB_Set Logic Source State_V2(pfb RRCscom := ADR(fb RRCScom)); END_VAR 18 Version: 1.2.0 Twin CAT 3

## Page 19

Programming 5.2 Data types 5.2.1 ST_Logic Source TYPE ST_Logic Source: STRUCT s Name : STRING(32); s Long Name : T_Max String; s Label_8Char : STRING(8); n Object ID : UDINT; b State : BOOL; b On Pressed : BOOL; END_STRUCT END_TYPE Name Type Description s Name STRING(32) Unique name of the Logic Source s Long Name T_Max String Name of the Logic Source as defined in the artist matrix. s Label_8Char STRING(8) 8-character button labeling as defined in the artist matrix. n Object ID UDINT Unique object identification number b State BOOL The current status as received by RRCS. b On Pressed BOOL For future use. 5.2.2 E_RRCS_Error Codes {attribute 'qualified_only'} TYPE E_RRCS_Error Codes : ( Success := 0, Internal Application Error_Transaction Key Invalid := 1, Configuration Unavailable Not Yet Loaded_Net Address Invalid := 2, Node Address Invalid_Node Address Invalid := 3, Port Address Invalid := 4, Slot Number Invalid := 5, Input Gain Invalid := 6, IP_address Invalid := 7, TCP_Port Invalid := 8, Label Invalid := 9, Conference Position Invalid := 10, Operation Failed_Artist_Network Not Connected := 11, Operation Failed_Route Not Exists := 12, Operation Impossible_Gateway Is Standby := 13, XML_RPC_Request Parameters Wrong := 14, Invalid_conference_or_conference_not_found := 15, Invalid_conference_member_or_not_found := 16 , Invalid_Priority := 17, Invalid_GPIO_Number := 18, Invalid_gain_value := 19, Timeout := 20, No_permission := 21, Object Not Exists := 22, No_USB_dongle := 23, Port_not_online := 24, Object_property_not_supported := 25, Limit_exceeded := 26, Generic_error := 99, XML_Member_required_mandatory := 101, XML_Member_Ambiguous := 102, XML_Member_Invalid := 103, XML_Member_Unknown := 104, XML_Member_Value_Type_boolean_required := 105, XML_Member_Value_Type_int_required := 106, XML_Member_Value_Type_struct_required := 107, XML_Member_Value_Type_array_required := 108, XML_Member_Value_Type_string_required := 109, XML_Member_Value_invalid := 110, XML_Member_Value_out_of_range := 111, Instruction_unsupported_with_current_configuration := 201, Duplicate_Configuration_Object := 202, Addressed_Configuration_Object_invalid := 203, Addressed_Configuration_Object_unsupported := 204, Address_already_in_use_in_configuration := 205, Twin CAT 3 Version: 1.2.0 19

## Page 20

Programming Configuration_Member_unsupported := 206, Configuration_Member_ambiguous := 207, Configuration_Value_invalid := 208, Configuration_Value_already_in Use := 209, Generic := 401, Unknown := 300000, No Err Code Available := 300001 )DINT; END_TYPE 20 Version: 1.2.0 Twin CAT 3

## Page 21

Samples 6 Samples Two consecutive samples are available here for using the RRCS Library: • Tc3_RRCS_Sample01 is used to test the communication between the RRCS server and Twin CAT. • Tc3_RRCS_Sample02: in this sample, the state of existing 'Logic Sources' is queried. The state of these elements can also be changed. The test of the communication between the RRCS server and Twin CAT is included in this sample. 6.1 Tc3_RRCS_Sample01 This simple sample is used exclusively to check the communication between Twin CAT and the RRCS server. Download the example here: https://infosys.beckhoff.com/content/1033/tf6760_rrcs/Resources/19302661515.zip All the required variables are declared in the variable declaration (MAIN program) and the address data is set in the same way as for the RRCS server. In this case: • the RRCS server runs on a Beckhoff IPC with the IP address 192.168.42.59 • the RRCS server listens on port 8193 • the Twin CAT sample runs on a Beckhoff Embedded PC with the IP address 192.168.42.3 Variable declaration: PROGRAM MAIN VAR (* the state of the statemachine *) e State: E_RRCS_State := IDLE; (* the IP-Address and port of the PC which runs the RRCS- Server *) fb RRCScom: FB_RRCScom( ip Addr_Server:= '192.168.42.59', ip Port_Server:=8193):= (e Trace Level := Tc Event Severity. Verbose); (* Retry in case of errors *) ton Retry: TON := (pt := T#5S); {region 'Get States'} (* functionblock used to get the state of the RRCS-Server *) fb Get State: FB_Get State(pfb RRCscom := ADR(fb RRCScom)); {endregion} END_VAR The program is then created based on a state machine: CASE e State OF CHECK_GATEWAY: ton Retry(IN := FALSE); fb Get State(b Execute:= TRUE); IF fb Get State.b Error THEN e State:= ERROR; ELSIF NOT fb Get State.b Busy THEN Twin CAT 3 Version: 1.2.0 21

## Page 22

Samples IF fb Get State.s Gateway State = 'Working' THEN e State := IDLE; ELSE e State := ERROR; END_IF END_IF ERROR: fb Get State(b Execute:= FALSE); ton Retry(In:= NOT ton Retry. Q); IF ton Retry. Q THEN e State:= CHECK_GATEWAY; END_IF END_CASE IF NOT ton Retry. Q THEN e State := SEL(fb RRCScom.e Comm State = E_Comm State. ERROR, e State, ERROR); END_IF If you start the program, the status of the state machine (e State) is IDLE. To query the state of the RRCS server, you must set the state of e State to CHECK_GATEWAY. See also: https://infosys.beckhoff.com/ english.php?content=../content/1033/tc3_plc_intro/2531621771.html. 22 Version: 1.2.0 Twin CAT 3

## Page 23

Samples If the request was successful, the state of the e State changes back to IDLE after a few cycles and the variable s Gateway State receives the value 'Working'. If an error occurs during the query, the state of the e State changes to ERROR and further attempts are made according to the time specified in ton Retry. 6.2 Tc3_RRCS_Sample02 If the Get State request from the previous sample was answered successfully, the functionality can be extended as follows: • A query using Get Alive (This function checks whether the connection exists.) • The query Is Connected To Artist (This is used to determine whether the RRCS server is connected to an artist matrix) • The cyclic querying of the states of the 'Logic Sources'. • Setting the 'Logic Sources'. Twin CAT 3 Version: 1.2.0 23

## Page 24

Samples Download the example here: https://infosys.beckhoff.com/content/1033/tf6760_rrcs/Resources/19302663179.zip The following 'Logic Sources' were created for this sample: Based on the previous sample, declare further variables: PROGRAM MAIN VAR (* the state of the statemachine *) e State: E_RRCS_State := IDLE; (* the IP-Address and port of the PC which runs the RRCS-Server *) fb RRCScom: FB_RRCScom( ip Addr_Server:= '192.168.42.59', ip Port_Server:=8193):= (e Trace Level := Tc Event Severity. Verbose); (* Retry in case of errors *) ton Retry: TON := (pt := T#5S); ton Wait: TON := (pt := T#70MS); 24 Version: 1.2.0 Twin CAT 3

## Page 25

Samples ui: UINT; {region 'Get States'} (* functionblock used to get the state of the RRCS-Server *) fb Get State: FB_Get State(pfb RRCscom := ADR(fb RRCScom)); {endregion} {region 'Get Alive'} b Execute Get Alive: BOOL := TRUE; fb Get Alive: FB_Get Alive(pfb RRCscom := ADR(fb RRCScom)); {endregion} {region 'Is connected to Artist'} b Execute Get Connected To Artist: BOOL := TRUE; fb Is Connected To Artist: FB_Is Connected To Artist(pfb RRCscom := ADR(fb RRCScom)); {endregion} {region 'Get Logic Sources'} b Execute Get All Logic Sources: BOOL; fb Get All Logic Sources_V2: FB_Get All Logic Sources_v2(pfb RRCscom := ADR(fb RRCScom)); ton Get Logic Source States: TON; {endregion} {region 'Set a Logic Source'} b State: BOOL; // the required status _b State: BOOL; fb Set Logic Source State: FB_Set Logic Source State(pfb RRCscom := ADR(fb RRCScom)); {endregion} b Error Obj Id: BOOL; END_VAR The program sequence from the previous sample was supplemented with additional states in the state machine: CASE e State OF CHECK_GATEWAY: ton Retry(IN := FALSE); fb Get State(b Execute:= b Execute Get State); b Execute Get State:= FALSE; IF fb Get State.b Error THEN e State:= ERROR; ELSIF NOT fb Get State.b Busy THEN IF fb Get State.s Gateway State = 'Working' THEN e State := CHECK_ALIVE; ELSE e State := ERROR; END_IF END_IF CHECK_ALIVE: fb Get Alive(b Execute:= b Execute Get Alive); b Execute Get Alive:= FALSE; IF fb Get Alive.b Error THEN e State:= ERROR; ELSIF NOT fb Get Alive.b Busy THEN IF fb Get Alive.b Alive THEN b Execute Get Connected To Artist:= TRUE; e State := CHECK_CONN_ARTIST; ELSE e State := ERROR; END_IF END_IF CHECK_CONN_ARTIST: fb Is Connected To Artist(b Execute:= b Execute Get Connected To Artist); b Execute Get Connected To Artist:= FALSE; IF fb Is Connected To Artist.b Error THEN e State:= ERROR; ELSIF NOT fb Is Connected To Artist.b Busy THEN IF fb Is Connected To Artist.b Is Connected THEN e State := GET_SOURCES; ELSE e State := ERROR; END_IF END_IF GET_SOURCES: IF b State <> _b State THEN _b State := b State; Twin CAT 3 Version: 1.2.0 25

## Page 26

Samples e State := SET_SOURCE; ELSE ton Get Logic Source States(in := TRUE, pt:= T#50MS); IF ton Get Logic Source States. Q THEN ton Get Logic Source States(In := FALSE); b Execute Get All Logic Sources := TRUE; END_IF fb Get All Logic Sources_V2(b Execute:= b Execute Get All Logic Sources); b Execute Get All Logic Sources := FALSE; IF fb Get All Logic Sources_V2.b Error THEN fb Get All Logic Sources_V2(b Execute:= FALSE); e State:= ERROR; ELSIF NOT fb Get All Logic Sources_V2.b Busy AND b Execute Get All Logic Sources THEN fb Get All Logic Sources_V2(b Execute:= FALSE); IF fb Get All Logic Sources_V2.e RRCS_Error Code <> E_RRCS_Error Codes. Success THEN e State:= ERROR; END_IF END_IF END_IF SET_SOURCE: FOR ui := 0 TO PL_RRCS.n Max Logic Sources - 1 DO IF fb Get All Logic Sources_V2.a Logic Sources[ui].s Label_8Char = 'Mute A' THEN EXIT; END_IF END_FOR IF ui < PL_RRCS.n Max Logic Sources THEN // Logic Source found .... fb Set Logic Source State(b Execute := TRUE, b State := b State, n Object ID := fb Get All Logic Sources_V2.a Logic Sources[ui].n Object ID, a Logic Sources := fb Get All Logic Sources_V2.a Logic Sources); IF fb Set Logic Source State.b Error THEN fb Set Logic Source State(b Execute := FALSE, a Logic Sources := fb Get All Logic Sources_V2.a Logic Sources); e State:= ERROR; ELSIF NOT fb Set Logic Source State.b Busy THEN fb Set Logic Source State(b Execute := FALSE, a Logic Sources := fb Get All Logic Sources_V2.a Logic Sources); e State := WAIT; END_IF END_IF WAIT: ton WAIT(In := NOT ton WAIT. Q); IF ton WAIT. Q THEN ton WAIT(In := FALSE); e State := GET_SOURCES; END_IF ERROR: fb Get State(b Execute:= FALSE); ton Retry(In:= NOT ton Retry. Q); IF ton Retry. Q THEN b Execute Get State:= TRUE; e State:= CHECK_GATEWAY; END_IF END_CASE IF NOT ton Retry. Q THEN e State := SEL(fb RRCScom.e Comm State = E_Comm State. ERROR, e State, ERROR); END_IF The number and state of the logic sources is polled. Those found are made available in array form as follows: 26 Version: 1.2.0 Twin CAT 3

## Page 27

Samples Each of the 'Logic Sources' can be addressed by means of a unique Object ID. If the state of the variable b State is changed, an attempt is made to set the state of this 'Logic Source' to the desired value. This is done with an instance of the function block FB_Set Logic Source. In the GUI of the RRCS server, the setting of the value of Logic Source#5 is displayed as follows: Twin CAT 3 Version: 1.2.0 27

## Page 28

Support and Service 7 Support and Service Beckhoff and their partners around the world offer comprehensive support and service, making available fast and competent assistance with all questions related to Beckhoff products and system solutions. Download finder Our download finder contains all the files that we offer you for downloading. You will find application reports, technical documentation, technical drawings, configuration files and much more. The downloads are available in various formats. Beckhoff's branch offices and representatives Please contact your Beckhoff branch office or representative for local support and service on Beckhoff products! The addresses of Beckhoff's branch offices and representatives round the world can be found on our internet page: www.beckhoff.com You will also find further documentation for Beckhoff components there. Beckhoff Support Support offers you comprehensive technical assistance, helping you not only with the application of individual Beckhoff products, but also with other, wide-ranging services: • support • design, programming and commissioning of complex automation systems • and extensive training program for Beckhoff system components Hotline: +49 5246 963-157 e-mail: support@beckhoff.com Beckhoff Service The Beckhoff Service Center supports you in all matters of after-sales service: • on-site service • repair service • spare parts service • hotline service Hotline: +49 5246 963-460 e-mail: service@beckhoff.com Beckhoff Headquarters Beckhoff Automation Gmb H & Co. KG Huelshorstweg 20 33415 Verl Germany Phone: +49 5246 963-0 e-mail: info@beckhoff.com web: www.beckhoff.com 28 Version: 1.2.0 Twin CAT 3

## Page 29

Trademark statements Beckhoff®, ATRO® , Ether CAT®, Ether CAT G®, Ether CAT G10®, Ether CAT P®, MX-System®, Safety over Ether CAT®, TC/BSD®, Twin CAT®, Twin CAT/BSD®, Twin SAFE®, XFC®, XPlanar®, and XTS® are registered and licensed trademarks of Beckhoff Automation Gmb H. Third-party trademark statements Microsoft, Microsoft Azure, Microsoft Edge, Power Shell, Visual Studio, Windows and Xbox are trademarks of the Microsoft group of companies.

## Page 30

More Information: www.beckhoff.com/entertainment-industry Beckhoff Automation Gmb H & Co. KG Hülshorstweg 20 33415 Verl Germany Phone: +49 5246 9630 info@beckhoff.com www.beckhoff.com
