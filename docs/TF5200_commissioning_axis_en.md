---
title: "TF5200"
product: "TF5200"
category: "Motion_Control"
tags: ["NC"]
language: "EN"
document_type: "Manual"
version: "1.06"
source_pdf: "https://download.beckhoff.com/download/Document/automation/twincat3/TF5200_commissioning_axis_en.pdf"
release_date: "2025-06-05"
---
Manual | EN TF5200 | Twin CAT 3 CNC Commissioning of axis 6/5/2025 | Version: 1.06
## Page 3

Notes on the documentation Notes on the documentation This description is only intended for the use of trained specialists in control and automation engineering who are familiar with the applicable national standards. It is essential that the documentation and the following notes and explanations are followed when installing and commissioning the components. It is the duty of the technical personnel to use the documentation published at the respective time of each installation and commissioning. The responsible staff must ensure that the application or use of the products described satisfy all the requirements for safety, including all the relevant laws, regulations, guidelines and standards. Disclaimer The documentation has been prepared with care. The products described are, however, constantly under development. We reserve the right to revise and change the documentation at any time and without prior announcement. No claims for the modification of products that have already been supplied may be made on the basis of the data, diagrams and descriptions in this documentation. Trademarks Beckhoff®, Twin CAT®, Twin CAT/BSD®, TC/BSD®, Ether CAT®, Ether CAT G®, Ether CAT G10®, Ether CAT P®, Safety over Ether CAT®, Twin SAFE®, XFC®, XTS® and XPlanar® are registered trademarks of and licensed by Beckhoff Automation Gmb H. Other designations used in this publication may be trademarks whose use by third parties for their own purposes could violate the rights of the owners. Patent Pending The Ether CAT technology is patent protected, in particular by the following applications and patents: EP1590927, EP1789857, EP1456722, EP2137893, DE102015105702 with corresponding applications or registrations in various other countries. Ether CAT® is registered trademark and patented technology, licensed by Beckhoff Automation Gmb H, Germany Copyright © Beckhoff Automation Gmb H & Co. KG, Germany. The reproduction, distribution and utilisation of this document as well as the communication of its contents to others without express authorisation are prohibited. Offenders will be held liable for the payment of damages. All rights reserved in the event of the grant of a patent, utility model or design. TF5200 | Twin CAT 3 CNC Version: 1.06 3 Commissioning of axis
## Page 4

General and safety instructions General and safety instructions Icons used and their meanings This documentation uses the following icons next to the safety instruction and the associated text. Please read the (safety) instructions carefully and comply with them at all times. Icons in explanatory text 1. Indicates an action. ð Indicates an action statement. DANGER Acute danger to life! If you fail to comply with the safety instruction next to this icon, there is immediate danger to human life and health. CAUTION Personal injury and damage to machines! If you fail to comply with the safety instruction next to this icon, it may result in personal injury or damage to machines. NOTICE Restriction or error This icon describes restrictions or warns of errors. Tips and other notes This icon indicates information to assist in general understanding or to provide additional informa- tion. General example Example that clarifies the text. NC programming example Programming example (complete NC program or program sequence) of the described function or NC com- mand. Specific version information Optional or restricted function. The availability of this function depends on the configuration and the scope of the version. 4 Version: 1.06 TF5200 | Twin CAT 3 CNC Commissioning of axis
## Page 5

Table of contents Table of contents Notes on the documentation.................................................................................................................... 3 General and safety instructions.............................................................................................................. 4 1 Overview.................................................................................................................................................... 8 2 Axis operation modes............................................................................................................................... 9 2.1 Overview........................................................................................................................................... 9 2.2 Drive type specific differences........................................................................................................ 11 2.2.1 SERCOS drive with position control in the CNC controller.............................................. 11 2.3 Switching over axes to simulation................................................................................................... 11 3 Control loop............................................................................................................................................. 13 3.1 Introduction..................................................................................................................................... 13 3.1.1 Drive type specific differences......................................................................................... 13 3.2 Units................................................................................................................................................ 14 3.3 Overview of control loop parameters.............................................................................................. 14 3.4 Resolution of the position measuring system.................................................................................. 15 3.5 Sign for actual and command values.............................................................................................. 15 3.6 Position controller gain.................................................................................................................... 17 3.6.1 Arithmetical calculation:................................................................................................... 18 3.6.2 Experimental determination:............................................................................................ 24 4 Drive enables/drive status...................................................................................................................... 26 4.1 Drive enables.................................................................................................................................. 26 4.2 Drive status..................................................................................................................................... 27 4.3 Drive enables/drive status of drive types........................................................................................ 28 4.3.1 SERCOS drives............................................................................................................... 28 5 Special features when using stepper motors....................................................................................... 29 5.1 General........................................................................................................................................... 29 5.2 Possible configurations................................................................................................................... 29 5.2.1 Operation without encoder............................................................................................... 29 5.2.2 Operation with encoder.................................................................................................... 30 5.3 Function restrictions........................................................................................................................ 30 6 Support and Service............................................................................................................................... 31 Index......................................................................................................................................................... 32 TF5200 | Twin CAT 3 CNC Version: 1.06 5 Commissioning of axis
## Page 6

Table of contents 6 Version: 1.06 TF5200 | Twin CAT 3 CNC Commissioning of axis
## Page 7

List of figures List of figures Fig. 1 Axis _1 is linked to SECOS drive................................................................................................. 11 Fig. 2 Axis_1 is set to simulation............................................................................................................ 12 Fig. 3 Overview of the position control loop for conventional drives...................................................... 14 TF5200 | Twin CAT 3 CNC Version: 1.06 7 Commissioning of axis
## Page 8

Overview 1 Overview Task This document describes how to parameterise axes in the CNC controller. • It describes the axis parameters and PLC signals required for start-up. • It is assumed that basic machine configuration (number of axes, number of channels) is already complete and the controller starts up without any warnings or error messages. Properties This documentation focuses on examples for start-up and parameter definition for axes in SERCOS drives. The chapters contain tables listing other drives, possible operation modes and dependencies on drive types. Mandatory note on references to other documents For the sake of clarity, links to other documents and parameters are abbreviated, e.g. [PROG] for the Programming Manual or P-AXIS-00001 for an axis parameter. For technical reasons, these links only function in the Online Help (HTML5, CHM) but not in pdf files since pdfs do not support cross-linking. 8 Version: 1.06 TF5200 | Twin CAT 3 CNC Commissioning of axis
## Page 9

Axis operation modes 2 Axis operation modes 2.1 Overview Axis operation mode CNC axes can be divided into axes with drive-internal or CNC-internal position control. Both operation modes are possible for SERCOS drives. An axis operation mode can be defined in the axis parameter P- AXIS-00320 (operation_mode). The axis parameter P-AXIS-00320 (operation_mode) is only used for SERCOS axes. Variable name Type Permitted range Axis type Dimension operation_mode ISG_CHAR see strings below T, R ---- String Meaning DRIVE_DEFAULT Default setting The operation mode used (position control in the drive, position control in the controller, velocity control, etc.) is defined automatically. It depends on the drive type and on the configured telegram. DRIVE_POSITION_CONTROL In this operation mode, position and velocity control take place in the drive. CNC_POSITION_CONTROL Position control takes place in the controller. TF5200 | Twin CAT 3 CNC Version: 1.06 9 Commissioning of axis
## Page 10

Axis operation modes Default setting If no operation mode is specified for an axis, the controller uses the default setting. The table below shows an overview of the possible operation modes depending on the drive type (default setting marked). Drive type Position controller in drive Position controller in controller Conventional drive X (default) SERCOS X (default) X Profi Drive MC X (default) X Drive simulation X (default) Lightbus X (default) Terminal (±10V) X (default) Real-time Ethernet X (default) CANopen X (default) X Virtual X (default) Remark for Profi Drive / CANopen With Profi Drive drives, the position lag is also calculated in the controller in “Position control in drive” mode. With CANopen drives, the operation mode is selected depending on the bus telegram configured. Position control takes place in the drive if command positions are transferred. However, if only a velocity command value is transferred to the drive, position control takes place in the controller. 10 Version: 1.06 TF5200 | Twin CAT 3 CNC Commissioning of axis
## Page 11

Axis operation modes 2.2 Drive type specific differences 2.2.1 SERCOS drive with position control in the CNC controller Position control with SERCOS With SERCOS drives, position control generally takes place in the drive. Alternatively, the drive can operate in “velocity control” mode and position control then takes place in the CNC controller. The following requirements must be met for position control in the CNC controller: • The “velocity control” mode is enabled in the SERCOS drive. • The set velocity is transferred to the drive (the telegram contains S-0-0036). • The actual drive positions are transferred to the controller (the telegram contains S-0-0051, S-0-0053 or S-0-0386). • CNC position control (CNC_POSITON_CONTROL) is selected for the axis mode (see P-AXIS-00320). Limitations of position control in the CNC If position control takes place in the CNC controller, the following limitations exist compared to the “position control in drive” mode: • No drive-controlled homing is possible. Instead, CNC-controlled homing is carried out. • Currently, no zero pulse search is possible with CNC-controlled homing for SERCOS drives. Therefore, specify the axis parameter P-AXIS-00084 (homing_without_zero_pulse) as 1. • No bus delays are considered to calculate the position lag (cf. P-AXIS-00191) . 2.3 Switching over axes to simulation For test and development purposes, it is sometimes practical to move axes using the "Simulation" drive type. You can use the parameter P-AXIS-00790 to quickly switch between real drive and simulation. This allows you to switch over axes to simulation without changing the configuration. When you switch back to the real drive type, you do not need to link the axes again. When the parameter is activated in the default axis parameter list Activated, all axes are set to simulation. Individual axes can be excluded from this operation by deactivating the parameter in the axis parameter list. Fig. 1: Axis _1 is linked to SECOS drive TF5200 | Twin CAT 3 CNC Version: 1.06 11 Commissioning of axis
## Page 12

Axis operation modes If you do not use P-AXIS-00790, you must switch the axis type to "Simulation" for each individual axis when you switch to simulation. This results in losing all links to process data, see figure below. When switching back to the real drive type, you must re-establish the link to the correct drive for each individual axis Fig. 2: Axis_1 is set to simulation The status of the link for the axis is retained when you use P-AXIS-00790. As a result, the above-mentioned work steps are not required. All axes can also be switched to simulation simultaneously using the default axis parameter list. This functionality is available as of V2.11.2055 ; V2.11.2827 ; V3.1.3079.39 ; V3.1.3107.28. 12 Version: 1.06 TF5200 | Twin CAT 3 CNC Commissioning of axis
## Page 13

Control loop 3 Control loop 3.1 Introduction 3.1.1 Drive type specific differences Depending on the drive type, the actual position controller for the axes is implemented in the CNC or in the drive. With an intelligent drive, the drive assumes position control. The axis parameters for the position control loop are carried out by corresponding drive parameters. In this case, the CNC position control loop is disabled. The CNC assumes monitoring functions only (e.g. position lag monitoring or collision monitoring) and supplies command value cyclically to the drive. On the other hand, if the CNC position controller is used (e.g. Terminal drive type), a manipulated variable is output cyclically to the drive. This manipulated variable contains the appropriate normalisations based on the set axis parameters. The table below shows the effect of the above parameters with different drive types: Position controller.. ..in the drive ..in the controller Drive type SERCOS SERCOS Profi Drive Lightbus Terminal MC (±10V) Parameter Measuring system X X X X resolution wegauf_z, wegauf_n Gain factor of P X X X X position control loop Kv Adaptation to D/A X X X multi_gain_z, multi_gain_n Sign X X X X vz_stellgr, vz_istw NOTICE Before starting up the axes, check the electrical safety devices of the axes, especially the emergency stop devices and hardware limit switches. They must be operational. TF5200 | Twin CAT 3 CNC Version: 1.06 13 Commissioning of axis
## Page 14

Control loop 3.2 Units The following units are generally used in the axis parameter lists: Size Unit Position linear 0.1 µm Position rotary 0.1 x 10 10-3° Velocity 1 µm / s or 10-3°/s Acceleration 1 mm/s2 Time µs Position controller gain (Kv) 0.01* 1/s 3.3 Overview of control loop parameters The graphic below shows the position control loop used and the contact points of the drive parameters that are explained in the sections below. Fig. 3: Overview of the position control loop for conventional drives. 14 Version: 1.06 TF5200 | Twin CAT 3 CNC Commissioning of axis
## Page 15

Control loop 3.4 Resolution of the position measuring system Configuration of the conversion factor To convert the increments supplied by the position measuring system to the metric system (the unit used internally), the conversion factor must be entered in the two entries getriebe[x].wegaufz and getriebe[x].wegaufn. If gears are present, they must also be taken into consideration. The resolution is specified as a fraction and the dimension is increments/0.1 µm and Increments per 0.0001°. Example 1 For an incremental encoder with 4096 increments and a spindle pitch of 5 mm, the resolution is 4096 incre- ments per 5 mm. Therefore, enter the following data in the axis parameter list:getriebe[0].wegaufz 4096getriebe[0].wegaufn 50000 Example 2 In addition, if a gear is used with a gear ratio of i = 10:1, the distance per motor revolution is 5 mm / i. This results in the following for wegaufz and wegaufn:getriebe[0].wegaufz 4096getriebe[0].wegaufn 5000 Variable name Type permitted range Dimension wegaufz SGN32 MAX(SGN32) → wegaufz → 1 Incr. P-AXIS-00234 Variable name Type permitted range Dimension wegaufn SGN32 MAX(SGN32) → wegaufn → 1 0.1µm or P-AXIS-00233 0.0001° Each of these entries is not directly adopted when the axis parameter list is up- dated. A controller restart is required. For SERCOS drives with position control in the controller (CNC_ POSITION_CONTROL mode), the path resolution of the measuring system is taken into consideration in the feedrate constant S-0-0123, i.e. the value 1 results for the quotient P-AXIS-00234/ P-AXIS-00233. 3.5 Sign for actual and command values Inversion To adapt the manipulated variable and the position sensor signals to the hardware used, it is sometimes necessary to invert the signs for the manipulated variable and the position actual value. The axis is programmed in the positive direction. However, the mechanical system actually moves in the negative direction. In this case, use the two entries lr_hw[ ].vz_stellgr and lr_hw[ ].vz_istw. The manipulated variable output is inverted by setting vz_stellgr to 1; when vz_istw is set to 1, an increase in the position of the position sensor results in a reduction of the axis position used in the CNC ker- nel.lr_hw[0].vz_stellgr 0lr_hw[0].vz_istw 0 Variable name Type Permitted range Dimension vz_stellgr BOOLEAN 0, 1 ---- Variable name Type Permitted range Dimension vz_istw BOOLEAN 0, 1 ---- TF5200 | Twin CAT 3 CNC Version: 1.06 15 Commissioning of axis
## Page 16

Control loop Each of these entries is not directly adopted when the axis parameter list is up- dated. A controller restart is required. 16 Version: 1.06 TF5200 | Twin CAT 3 CNC Commissioning of axis
## Page 17

Control loop 3.6 Position controller gain Gain The CNC position controller uses a P controller for position control. The controller gain is defined by the parameter getriebe[x].kv of dimension 0.01/s. In a stationary case, the following applies when a control loop is set correctly: Where s: position lag v: axis velocity kv: position controller gain To set a position controller gain of 3/s, the following entry is required in the axis parameter list: getriebe[ ].kv 300 Variable name Type permitted range Dimension kv UNS32 at 0 < kv→ MAX(UNS32) 0.01/s the MC_Read Axis Error function block at its Axis Error I D output Adapt the manipulated variable to D/A converter format The two entries P-AXIS-00129 (getriebe[x].multi_gain_z) and P-AXIS-00128 (getriebe[x].multi_gain_n) are used to adapt the manipulated variable calculated from the position lag to the D/A converter format. The fraction P-AXIS-00129 / P-AXIS-00128 results in the conversion factor of the manipulated variable into the D/A converter format and is also referred to as the multi-gain factor. There are 2 possibilities to calculate P-AXIS-00129 and P-AXIS-00128: 1. Arithmetical calculation [} 18]: Specify the digital value at the D/A converter input at which the axis moves at a velocity of [1m/min] or [1000 °/min]. To calculate multi_gain_z/multi_gain_n arithmetically, gear ratios, spindle pitch and the scaling factors acting on the velocity command value on the drive side must be known. 2. Experimental determination [} 24]: Derived from position lag and axis velocity. NOTICE The entries P-AXIS-00129 and P-AXIS-00128 are provided solely to adapt the format of the manipulated variable. To optimise the control loop, use the position controller gain factor P-AXIS-00099 (getriebe[].kv). TF5200 | Twin CAT 3 CNC Version: 1.06 17 Commissioning of axis
## Page 18

Control loop 3.6.1 Arithmetical calculation: The multi-gain factor is defined as the value of the manipulated variable at which the axis moves at a velocity of 1 m/min or 1000 °/min. This section provides examples for calculating the multi-gain factor arithmetically for a Lightbus drive and for a Terminal drive. The gain factors of all transmission elements between the controller velocity command value output through to the moved axis are required to calculate the multi-gain factor arithmetically. They include: • Scaling factors acting on the velocity command value • Gear ratios • Spindle pitches etc. The procedure is always identical: 1. Calculate the conversion factor f between motor revolutions per minute and the command value trans- ferred in the cyclic telegram. 2. Calculate the motor speed n1m/min required to move the axis at a velocity of 1 m/min or 1000 °/min. 3. The ratio between P-AXIS-00129 and P-AXIS-00128 is then equal to the product f * n1m/min. For a SERCOS drive with position control in the controller, the scaling factor (P-AXIS-00129/ P- AXIS-00128) is the velocity command value S-0-0036 that should be output to the drive so that the axis moves at a velocity of 1 m/min (translatory axis) or 1000 °/min (rotary axis). The scaling factor is dependent on: • the feed rate constant S-0-0123 • the weighting factor S-0-0045 and the weighting exponent S-0-0046 of the velocity data in the drive • the gear ratios S-0-0121 and S-0-0122 18 Version: 1.06 TF5200 | Twin CAT 3 CNC Commissioning of axis
## Page 19

Control loop 3.6.1.1 Example: Lightbus drive With a Lightbus drive, the parameter VUNIT is assigned the value 1 in the default factory parameter definition. This means that the specified velocity for the drive takes place in revolutions per minute (rpm). Step 1 of 3: According to the manufacturer’s documentation, the conversion factor between revolutions per minute and the command value transferred in the cyclic telegram is: The value 140 (rounded) must be output to rotate the motor at a speed of one revolution per minute. Step 2 of 3: To reach a speed of 1 m/min, the following motor speed is required at a spindle pitch of 5 mm and a gear ratio of i = 1:1 Step 3 of 3: At a velocity scaling factor f, the output velocity command value for 1 m/min is: This results in the following value: Alternatively, multi_gain can be calculated using the following equation: where I is the number of encoder increments per motor revolution. For a Lightbus drive, this results is 65536 u increments per revolution. A spindle pitch of 5 mm/revolution and 65536 increments per revolution result in wegauf_z=65536 and wegauf_n=50000. The possible values for P-AXIS-00129 and P-AXIS-00128 would then be: P-AXIS-00129 27962 279620 2796202 ... P-AXIS-00128 1 10 100 ... TF5200 | Twin CAT 3 CNC Version: 1.06 19 Commissioning of axis
## Page 20

Control loop 3.6.1.2 Example: Terminal spindle A spindle is activated by a D/A converter terminal KL4032; a voltage of 10 V at the input of the drive controller corresponds to a speed of 9000 rpm; no gear is present. With the D/A converter terminal KL4032, a digital output value of 32767 (0x7FFF) is equivalent to an output voltage of 10 V with default scaling. Step 1 of 3: The conversion factor between rpm and the command value transferred in the cyclic telegram is then: A value of 3.64 would therefore be output to the D/A converter in order to rotate the spindle at a speed of 1 rpm. Step 2 of 3: To reach a speed of 1000 °/min, the following motor speed is required: Step 3 of 3: At a velocity scaling factor f, the output velocity command value for 1000 °/min is: The value of multi_gain is therefore: The possible values for P-AXIS-00129 and P-AXIS-00128 would then be: P-AXIS-00129 10 101 1011 ... P-AXIS-00128 1 10 100 ... 20 Version: 1.06 TF5200 | Twin CAT 3 CNC Commissioning of axis
## Page 21

Control loop 3.6.1.3 Example: Terminal spindle with gear A spindle is activated by a D/A converter terminal KL4032; a voltage of 10 V at the input of the drive controller corresponds to a speed of 9000 rpm; the motor is fitted with a gear which has a gear ratio of i=5 (5 motor revolutions correspond to one revolution at the gear output). With the D/A converter terminal KL4032, a digital output value of 32767 (0x7FFF) is equivalent to an output voltage of 10 V with default scaling. Step 1 of 3: As in the previous example, the conversion factor between motor revolutions per minute and the command value transferred in the cyclic telegram is: A value of 3.6408 would therefore be output to the D/A converter in order to rotate the spindle motor at a speed of 1 rpm. Step 2 of 3: Now the use of a gear becomes noticeable. To reach a speed of 1000 °/min, the following motor speed is required: Step 3 of 3: At a velocity scaling factor f, the output velocity command value for 1000 °/min is: The value of multi_gain is therefore: The possible values for P-AXIS-00129 and P-AXIS-00128 would then be: P-AXIS-00129 50 506 5057 … P-AXIS-00128 1 10 100 ... TF5200 | Twin CAT 3 CNC Version: 1.06 21 Commissioning of axis
## Page 22

Control loop 3.6.1.4 Example: CNC-controlled, translatory axis with SERCOS Drive The linear axis moves by 1 mm per motor revolution. The position data in the drive are weighted for translatory movements: Weighting factor: S-0-0077 = 1 Weighting exponent: S-0-0078 = -7 The path resolution of the measuring system is therefore: A path motion of 1 mm per motor revolution results in a feedrate constant of: A translatory weighting is also used for velocity data: Weighting factor: S-0-045 = 1 Weighting exponent: S-0-046 = -4 The weighting factor for velocity is therefore: Manipulated variable scaling is therefore: Excerpt from the axis parameter list getriebe[0].wegaufz 1 getriebe[0].wegaufn 1 getriebe[0].multi_gain_z 10000 getriebe[0].multi_gain_n 1 22 Version: 1.06 TF5200 | Twin CAT 3 CNC Commissioning of axis
## Page 23

Control loop 3.6.1.5 Example: CNC-controlled, rotary axis with SERCOS drive The encoder supplies 65536 increments per revolution (S-0-0116). The rotation resolution in the drive is therefore specified by S-0-0079 = 65536. The resolution of the position measuring system is therefore: The drive uses a rotary weighting for speeds: Weighting factor: S-0-045 = 1 Weighting exponent: S-0-046 = -4 The weighting factor for the speeds is: The scaling required for the manipulated variable is therefore: Excerpt from the axis parameter list getriebe[0].wegaufz 65536 getriebe[0].wegaufn 3600000 getriebe[0].multi_gain_z 10000000 getriebe[0].multi_gain_n 360 TF5200 | Twin CAT 3 CNC Version: 1.06 23 Commissioning of axis
## Page 24

Control loop 3.6.2 Experimental determination: Alternatively, the ratio multi_gain_z/multi_gain_n can be determined experimentally. The actual gain acting in the position control loop can be determined from the position lag and axis velocity when the axis is moving at constant speed according to the equation: The gain determined experimentally is compared with the kv factor (P-AXIS-00099) set in the axis parameter list: Then the new multi-gain factor is calculated starting from the currently parameterised values of multi_gain_z and multi_gain_n: After completing a parameter change, the parameters must be checked again using equation 1. To further optimise the position control loop, the parameter P-AXIS-00099 (getriebe[].kv) is used exclusively. NOTICE If factor f is greater than 1, the total gain in the position control loop increases when the multi_gain factor is changed. This may cause the axes to oscillate. In such cases, set the position controller gain P- AXIS-00099 to the value P-AXIS-00099 / f in order to maintain total gain in the position control loop con- stant. 24 Version: 1.06 TF5200 | Twin CAT 3 CNC Commissioning of axis
## Page 25

Control loop Position lag and gain in the position control loop: position lag s = 1,9 mm, axis velocity v = 200 mm/min, P-AXIS-00099 = 400 * 1/s, multi_gain_z = multi_gain_n = 1. Actual gain in the position control loop: k = v/s = 200 mm / (60 s * 1.9 mm) k = 1.75 The ratio between parameterised gain and actual effective gain results from equation 1: The multi-gain factor is therefore. Possible entries in the axis parameter list would then be: P-AXIS-00129: getriebe[ ].multi_gain_z 2286 P-AXIS-00128: getriebe[ ].multi_gain_n 1000 Since these entries increase total gain in the position control loop by the factor f, P-AXIS-00099 should also be multiplied by the factor i/f to maintain total gain in the control loop constant: After checking the parameters calculated based on equation 1, the position control loop can be further adjusted by changing P-AXIS-00099. TF5200 | Twin CAT 3 CNC Version: 1.06 25 Commissioning of axis
## Page 26

Drive enables/drive status 4 Drive enables/drive status 4.1 Drive enables To move a drive, the PLC must set enable bits on the HLI. The PLC can set the required enables by activating the associated control units. For more information on the HLI (High Level Interface) and how to handle control units, please refer to the [HLI] documentation. The HLI enable bits are normally transferred to the drive amplifier together with the cyclic drive data and act directly in the drive. In addition, plausibility checks are carried out in the NC kernel using the drive enables. For example, if the required enables are not set, an error message is output if an attempt is made to move an axis with the NC. Enables act on individual axes. For more information, please refer to the HLI documentation in the section Status information of an axis drive. The control units for drive enables are: • MCControl Bool Unit_Drive On: Drive on (abbr.: Drive On). • MCControl Bool Unit_Torque Permission: Activate the drive-internal position or speed controller. The drive generates a torque and goes to control (abbr.: Torque Permission). • MCControl Bool Unit_Release Feedhold: Reset drive-internal feedhold (abbr. Release Feedhold). Since not all drive types in the above list support the functions described, the table below provides an overview of the enables required for each of the drive types. Each of the drive types is then described in detail in the following sections. An X in the table indicates that the drive supports the function and the related enable must then be set on the HLI. Control unit SERCOS PROFI- Terminal Lightbus RT CANopen drive DRIVE drive drive Ethernet drive drive drive Drive On X X X Torque Permission X X X X X X Release Feedhold X X 26 Version: 1.06 TF5200 | Twin CAT 3 CNC Commissioning of axis
## Page 27

Drive enables/drive status 4.2 Drive status Digital drives supply information on the internal drive status in the cyclic telegram. This information is evaluated internally in the NC kernel and sent to the HLI for the PLC. For CNC versions up to Version V2.11.20xx The state signals can be read out in section p AC[achs_index]^.addr^. State LR_Data (achs_index starts at 1). The following signals are applied there: • X_Ready Power On: The drive is ready for power connection • X_Ready Control Loop On: The drive goes to control. Once the corresponding drive enables [} 26] are set, the drive obeys the positions specified by the NC kernel. For CNC versions as of V2.11.2800 The state signals can be read out in the section gp Ax[achs_index].lr_state. State LR_Data (achs_index starts at 0). The following signals are applied there: • ready_for_power_on_r: The drive is ready for power connection • ready_for_control_loop_on_r: The drive goes to control. Once the corresponding drive enables [} 26] are set, the drive obeys the positions specified by the NC kernel. Depending on the drive type, not all signals are supported on the HLI. The table below contains an overview of the state signals supported by each drive type: State signal SERCOS PROFI- Terminal Lightbus RT CANopen drive DRIVE drive drive Ethernet drive drive drive Ready Power On X X X X X Ready Control-Loop On X X X TF5200 | Twin CAT 3 CNC Version: 1.06 27 Commissioning of axis
## Page 28

Drive enables/drive status 4.3 Drive enables/drive status of drive types 4.3.1 SERCOS drives The following enable and state signals are supported on SERCOS drives. • MCControl Bool Unit_Drive On: Enable power connection in the drive (abbr.: Drive On). This enable signal is entered directly in Bit 15 of the SERCOS control word. • MCControl Bool Unit_Torque Permission: Activate drive-internal position or speed controller. The drive goes to control (abbr.: Torque Permission). • MCControl Bool Unit_Release Feedhold: Reset drive-internal feedhold (abbr: Release Feedhold). • ready_for_power_on_r (for CNC versions as of V2.11.2800) or X_Ready Power On (for CNC versions up to V2.11.20xx): The drive is ready for power connection • ready_for_control_loop_on_r (for CNC versions as of V2.11.2800) or X_Ready Control Loop On (for CNC versions up to V2.11.20xx): The drive is ready to go to control. Once the corresponding drive enables [} 26] are set, the drive obeys the positions specified by the NC kernel. 28 Version: 1.06 TF5200 | Twin CAT 3 CNC Commissioning of axis
## Page 29

Special features when using stepper motors 5 Special features when using stepper motors 5.1 General Stepper motors can be connected to the CNC by the terminals • single-channel pulse train output terminals • single-channel stepper motor terminals with/without incremental encoder interface . Velocity command values output by the CNC through these terminals are converted to a signal format suitable to control stepper motors. The single-channel pulse train output terminal generates an output signal suitable to control a stepper motor power output stage (e.g. a pulse/direction signal). The single-channel stepper motor terminals already contain power output stages for the direct control of 2-phase stepper motors. 5.2 Possible configurations All the terminals listed above supply the number of currently output steps in the process map. The stepper motor terminal with incremental encoder interface also offers the option of connecting an incremental encoder directly to the terminal. 5.2.1 Operation without encoder When operating without encoder, the impulses generated by the terminals are sent to the CNC-internal position controller as actual position. The velocity command values calculated by the position controller are output to the stepper motor terminal and cause the stepper motor to move. Since the drive is operated in a pseudo position control loop, the stepper motor is parameterised in the axis parameter list similarly to the parameter definition of a drive with +/-10 V interface. This also takes place when velocity feedforward control is used. NOTICE In this operation mode, there is no real axis position feedback. Axis position lag monitoring is not possible. Since a stepper motor stands still in the event of dynamic overload or it can lose steps (stepper motor falls out of step), special care is required when dimensioning the motor and parameterising the dynamic parameters of the motor. TF5200 | Twin CAT 3 CNC Version: 1.06 29 Commissioning of axis
## Page 30

Special features when using stepper motors 5.2.2 Operation with encoder When operating with encoder, the position actual value of an encoder is supplied to the position controller as a real position actual value of the motor. This takes place when the drive is configured by linking the encoder input of the axis to an encoder terminal and not by the position feedback of the stepper motor terminal. An incremental encoder can be directly connected to the stepper motor terminal with incremental encoder interface. In this case, parameterise the terminal so that it displays the encoder signal in its output process map. Even when operated with encoder, a stepper motor can stand still if subjected to dynamic overload or lose steps (stepper motor falls out of step). As a result, special care is required when dimensioning the motor and parameterising the dynamic parameters of the motor However, as opposed to operating without encoder, it is possible to use position lag monitoring. 5.3 Function restrictions Since the terminal KL2541 may not be provided with a position value latched in the terminal in the cyclic process map, the following functions are not available: • Referencing to zero pulse • Measuring If they are activated anyway, an error message is output and the value is corrected automatically. 30 Version: 1.06 TF5200 | Twin CAT 3 CNC Commissioning of axis
## Page 31

Support and Service 6 Support and Service Beckhoff and their partners around the world offer comprehensive support and service, making available fast and competent assistance with all questions related to Beckhoff products and system solutions. Download finder Our download finder contains all the files that we offer you for downloading. You will find application reports, technical documentation, technical drawings, configuration files and much more. The downloads are available in various formats. Beckhoff's branch offices and representatives Please contact your Beckhoff branch office or representative for local support and service on Beckhoff products! The addresses of Beckhoff's branch offices and representatives round the world can be found on our internet page: www.beckhoff.com You will also find further documentation for Beckhoff components there. Beckhoff Support Support offers you comprehensive technical assistance, helping you not only with the application of individual Beckhoff products, but also with other, wide-ranging services: • support • design, programming and commissioning of complex automation systems • and extensive training program for Beckhoff system components Hotline: +49 5246 963-157 e-mail: support@beckhoff.com Beckhoff Service The Beckhoff Service Center supports you in all matters of after-sales service: • on-site service • repair service • spare parts service • hotline service Hotline: +49 5246 963-460 e-mail: service@beckhoff.com Beckhoff Headquarters Beckhoff Automation Gmb H & Co. KG Huelshorstweg 20 33415 Verl Germany Phone: +49 5246 963-0 e-mail: info@beckhoff.com web: www.beckhoff.com TF5200 | Twin CAT 3 CNC Version: 1.06 31 Commissioning of axis
## Page 32

Index Index 32 Version: 1.06 TF5200 | Twin CAT 3 CNC Commissioning of axis
## Page 34

More Information: www.beckhoff.com/TF5200 Beckhoff Automation Gmb H & Co. KG Hülshorstweg 20 33415 Verl Germany Phone: +49 5246 9630 info@beckhoff.com www.beckhoff.com
