---
title: "TE1010 Twin CAT 3"
product: "TE1010"
category: "Engineering_Tools"
tags: ["CAT", "TWIN"]
language: "EN"
document_type: "Manual"
version: "2.1.1"
source_pdf: "https://download.beckhoff.com/download/Document/automation/twincat3/TE1010_TC3_Realtime_Monitor_EN.pdf"
release_date: "2025-07-04"
---
Manual | EN TE1010 Twin CAT 3 | Realtime Monitor 2025-07-04 | Version: 2.1.1

## Page 3

Table of contents Table of contents 1 Foreword.................................................................................................................................................... 5 1.1 Notes on the documentation............................................................................................................. 5 1.2 For your safety.................................................................................................................................. 5 1.3 Notes on information security............................................................................................................ 7 2 Overview.................................................................................................................................................... 8 3 Installation................................................................................................................................................. 9 4 Technical Introduction............................................................................................................................ 10 4.1 Real-Time........................................................................................................................................ 10 4.1.1 Tasks................................................................................................................................ 14 4.1.2 Core Boost....................................................................................................................... 17 4.2 Display in the Real-time Monitor..................................................................................................... 18 5 Quick start............................................................................................................................................... 24 6 Configuration of triggers........................................................................................................................ 27 7 Use of cursors......................................................................................................................................... 29 8 Recordings.............................................................................................................................................. 33 9 Recording the startup behavior............................................................................................................. 36 10 Statistics.................................................................................................................................................. 37 11 Reference, user interface....................................................................................................................... 40 11.1 Menu bar......................................................................................................................................... 40 11.1.1 Project.............................................................................................................................. 41 11.1.2 Recordings....................................................................................................................... 42 11.1.3 User contexts................................................................................................................... 43 11.1.4 Statistics........................................................................................................................... 44 11.1.5 Info................................................................................................................................... 46 11.2 Toolbar - Real-time Monitor toolbar................................................................................................ 46 11.3 Project tree...................................................................................................................................... 47 11.4 Recording list.................................................................................................................................. 49 11.5 Display window............................................................................................................................... 49 11.6 Properties window........................................................................................................................... 50 11.6.1 Project node..................................................................................................................... 50 11.6.2 Context node.................................................................................................................... 51 11.6.3 Marker group element...................................................................................................... 52 11.7 Cursor window................................................................................................................................ 52 11.8 Event window.................................................................................................................................. 53 12 PLC API.................................................................................................................................................... 54 12.1 Function blocks............................................................................................................................... 54 12.1.1 FB_RTMon_Log Mark....................................................................................................... 54 12.1.2 FB_RTMon_Log Mark Base............................................................................................... 58 12.2 Data types....................................................................................................................................... 60 12.2.1 ST_RTMon_Mark Def....................................................................................................... 60 12.3 Global constants............................................................................................................................. 60 TE1010 Version: 2.1.1 3

## Page 4

Table of contents 12.3.1 Tc Mark Option................................................................................................................... 60 13 C++ API.................................................................................................................................................... 62 13.1 Data types....................................................................................................................................... 62 13.1.1 Tc Mark16......................................................................................................................... 62 13.2 Classes........................................................................................................................................... 62 13.2.1 CTc Log Mark..................................................................................................................... 62 13.3 Constants........................................................................................................................................ 64 14 Support and Service............................................................................................................................... 65 4 Version: 2.1.1 TE1010

## Page 5

Foreword 1 Foreword 1.1 Notes on the documentation This description is intended exclusively for trained specialists in control and automation technology who are familiar with the applicable national standards. The documentation and the following notes and explanations must be complied with when installing and commissioning the components. The trained specialists must always use the current valid documentation. The trained specialists must ensure that the application and use of the products described is in line with all safety requirements, including all relevant laws, regulations, guidelines, and standards. Disclaimer The documentation has been compiled with care. The products described are, however, constantly under development. We reserve the right to revise and change the documentation at any time and without notice. Claims to modify products that have already been supplied may not be made on the basis of the data, diagrams, and descriptions in this documentation. Trademarks Beckhoff®, ATRO® , Ether CAT®, Ether CAT G®, Ether CAT G10®, Ether CAT P®, MX-System®, Safety over Ether CAT®, TC/BSD®, Twin CAT®, Twin CAT/BSD®, Twin SAFE®, XFC®, XPlanar®, and XTS® are registered and licensed trademarks of Beckhoff Automation Gmb H. If third parties make use of the designations or trademarks contained in this publication for their own purposes, this could infringe upon the rights of the owners of the said designations. Ether CAT® is a registered trademark and patented technology, licensed by Beckhoff Automation Gmb H, Germany. Copyright © Beckhoff Automation Gmb H & Co. KG, Germany. The distribution and reproduction of this document, as well as the use and communication of its contents without express authorization, are prohibited. Offenders will be held liable for the payment of damages. All rights reserved in the event that a patent, utility model, or design are registered. Third-party trademarks Trademarks of third parties may be used in this documentation. You can find the trademark notices here: https://www.beckhoff.com/trademarks. 1.2 For your safety Safety regulations Read the following explanations for your safety. Always observe and follow product-specific safety instructions, which you may find at the appropriate places in this document. Exclusion of liability All the components are supplied in particular hardware and software configurations which are appropriate for the application. Modifications to hardware or software configurations other than those described in the documentation are not permitted, and nullify the liability of Beckhoff Automation Gmb H & Co. KG. TE1010 Version: 2.1.1 5

## Page 6

Foreword Personnel qualification This description is only intended for trained specialists in control, automation, and drive technology who are familiar with the applicable national standards. Signal words The signal words used in the documentation are classified below. In order to prevent injury and damage to persons and property, read and follow the safety and warning notices. Personal injury warnings DANGER Hazard with high risk of death or serious injury. WARNING Hazard with medium risk of death or serious injury. CAUTION There is a low-risk hazard that could result in medium or minor injury. Warning of damage to property or environment NOTICE The environment, equipment, or data may be damaged. Information on handling the product This information includes, for example: recommendations for action, assistance or further information on the product. 6 Version: 2.1.1 TE1010

## Page 7

Foreword 1.3 Notes on information security The products of Beckhoff Automation Gmb H & Co. KG (Beckhoff), insofar as they can be accessed online, are equipped with security functions that support the secure operation of plants, systems, machines and networks. Despite the security functions, the creation, implementation and constant updating of a holistic security concept for the operation are necessary to protect the respective plant, system, machine and networks against cyber threats. The products sold by Beckhoff are only part of the overall security concept. The customer is responsible for preventing unauthorized access by third parties to its equipment, systems, machines and networks. The latter should be connected to the corporate network or the Internet only if appropriate protective measures have been set up. In addition, the recommendations from Beckhoff regarding appropriate protective measures should be observed. Further information regarding information security and industrial security can be found in our https://www.beckhoff.com/secguide. Beckhoff products and solutions undergo continuous further development. This also applies to security functions. In light of this continuous further development, Beckhoff expressly recommends that the products are kept up to date at all times and that updates are installed for the products once they have been made available. Using outdated or unsupported product versions can increase the risk of cyber threats. To stay informed about information security for Beckhoff products, subscribe to the RSS feed at https:// www.beckhoff.com/secinfo. TE1010 Version: 2.1.1 7

## Page 8

Overview 2 Overview The Twin CAT 3 Realtime Monitor enables precise diagnostics and optimization of the runtime behavior of tasks in the Twin CAT runtime environment. It offers a graphical representation of the temporal processing of real-time tasks and their modules across all cores. In addition, user-defined processes and their dependencies can be represented graphically through appropriate instrumentation of the control software. The Realtime Monitor makes the temporal behavior of the control software on a target system completely transparent and enables comprehensive temporal analysis. It thus supports both fault diagnosis and time optimization of the configuration, especially on multi-core systems. 8 Version: 2.1.1 TE1010

## Page 9

Installation 3 Installation System Requirements Technical data Description Operating system Windows 10 Target platform Windows Minimum Twin CAT version Twin CAT 3.1.4024.0 Twin CAT Package Manager: Installation (Twin CAT 3.1 Build 4026) Detailed instructions on installing products can be found in the chapter Installing workloads in the Twin CAT 3.1 Build 4026 installation instructions. Install the following workload to be able to use the product: • TE 1010 | Twin CAT 3 Realtime Monitor Twin CAT setup: Installation (Twin CAT 3.1 Build 4024) A separate installer is used for the installation. To install Twin CAT 3 Realtime Monitor, run the setup wizard and follow the instructions. Licensing The Twin CAT 3 Realtime Monitor (TE1010) is an engineering product. The licensing takes place exclusively on the engineering system. The guide to licensing a full version can be found in the Twin CAT 3 Licensing documentation. There is no 7-day trial license available for this product. TE1010 Version: 2.1.1 9

## Page 10

Technical Introduction 4 Technical Introduction The following chapter describes the technical basics that are helpful for using the Twin CAT 3 Realtime Monitor. 4.1 Real-Time According to the DIN 44300 standard, real-time, or rather real-time operation, is defined as follows: "Real-time operation is an operating mode of a computing system in which programs for processing data are continuously operational in such a way that the processing results are available within a specified period of time." In other words, the output values of an application program (calculated based on the inner state and input values) are made available within a defined and guaranteed time. This defined time is also referred to as cycle time. The application program itself can consist of several program blocks, which in turn call other programs or function blocks etc. (see also IEC 61131-3 standard). The program blocks can be assigned to real-time tasks, which are called by the scheduler with a cycle time to be defined and a defined priority. Twin CAT 3 Real-Time is a real-time extension that can be used in the current Twin CAT 3.1 version under Microsoft Windows operating systems from Windows 7 as well as under Twin CAT/BSD and Beckhoff RT Linux®. In order to meet the requirements described above for the control of industrial processes, Twin CAT 3 real-time supports the following features: • Real-time capable scheduling • Parallel execution of processes • Multi-core support • Direct hardware access Twin CAT 3 multi-core support allows the available cores to be used either exclusively for Twin CAT or shared with the corresponding operating system. In the following sections, the cores are therefore referred to as "isolated" or "shared". Real-time capable scheduling Twin CAT 3 Real-Time works with the double-tick method. This means that both switching to real-time mode and switching back is triggered by an interrupt. The interrupt when switching to the real-time mode also starts the scheduling at the same time. After an adjustable period of time, at the latest after 90% of the set cycle time, Twin CAT switches back to "shared" cores in non-real-time mode, so that the guest operating system has sufficient computing time available to comply with the response times required for hardware functions etc. The isolated cores are an exception. Scheduling refers to the (system) process that determines the processing order and the processing time of the individual tasks, based on the defined cycle time and the defined priority. Strict adherence to the processing time ensures that the real-time compliance described above is guaranteed. Triggered by a synchronous basic tick on all real-time kernels, the scheduling for each real-time kernel is calculated independently in Twin CAT 3 Real-Time. This guarantees that real-time tasks running on different cores do not interfere with each other. Unless this has been explicitly programmed in the user program by using interlocks. Scheduling in which the priority of a task is derived from its cycle time is also known as rate-monotonic scheduling. The Twin CAT 3 Real-Time automatically activates the "Automatic Priority Management" option. Since this is not always the best solution for every application, the priorities can be adjusted manually. 10 Version: 2.1.1 TE1010

## Page 11

Technical Introduction Exemplary representation of the call of a PLC task The figure shows the call of a PLC task. After the real-time tick has occurred, the PLC task is called by the scheduler. This makes the current input values available to the PLC application (input update), followed by processing of the application program (cycle update). Finally the results are written to the outputs (output update). Once this has been completed, the device switches to non-real-time mode (double-tick). As shown in the figure, the execution time of the user program may vary depending on which code is executed based on the internal state of the program. Thus the time when the outputs are written also varies. Depending on which task a bus system is driven, this can cause the sending of the bus telegrams to vary to the same extent. Sample call of a task with "I/O at task start“ By using the "I/O at task start" option, the processing order within a task can be changed so that after reading the inputs, the outputs (of the previous cycle) are written directly before the application program is executed. Although the outputs are not written until the next cycle, this setting has the advantage that the time at which the outputs are written to the process/bus is exactly the same in each cycle. Preemptive multitasking Preemptive multitasking means that the current state of a process (the CPU and floating-point registers) is saved in the event of an interrupt (e.g. by higher-priority processes), and the current process is paused. If this happens, the scheduler determines the (new) process to be executed, based on the task priorities. Once the process to be interrupted is complete, the process context is restored and the "old" process continues. TE1010 Version: 2.1.1 11

## Page 12

Technical Introduction Direct hardware access In order to achieve deterministic (reproducible) real-time behavior, Twin CAT 3 Real-Time requires direct hardware access. For this to be possible, Twin CAT 3 Real-Time must be executed in Windows or Twin CAT/ BSD kernel mode. This makes it possible, among other things, for Twin CAT Real-Time to access the network ports directly and send and receive real-time Ethernet telegrams (e.g. Ether CAT). Under Beckhoff RT Linux®, the real-time works with the real-time extension in user mode. Direct hardware access is made possible via special network drivers. Schematic representation of the Twin CAT 3 runtime environment The following figure illustrates the structure of the Twin CAT 3.1 runtime environment in relation to scheduling. The Twin CAT 3 runtime environment enables user modules to be executed in real-time. An essential part of the Twin CAT 3 runtime environment therefore is the real-time driver, which is executed on the cores that are activated for Twin CAT and handles the scheduling there. The latter takes place independently on the individual cores. Isolated cores As described under real-time scheduling [} 10], Twin CAT uses a double-tick procedure to switch back to non-real-time mode at a specified point in time. When switching between real-time mode and non-real-time mode, the preceding process state is restored, as described under Preemptive multitasking [} 11]. The restoration takes some time, depending on how intensively the real-time and non-real-time programs use the memory and in particular the cache. In order to eliminate these temporal effects, Twin CAT 3.1 Real-Time allows cores to be isolated from the guest operating system. This eliminates the need to switch back, resulting in more computing time for the real-time user program and better real-time quality (less jitter) by avoiding the time effects associated with restoring the "old" process state. 12 Version: 2.1.1 TE1010

## Page 13

Technical Introduction Behavior when the cycle time is exceeded If the defined cycle time of a task is exceeded, processing of the "old" cycle continues in the next cycle. In addition, the task exceed counter is incremented. Once processing of the old / previous cycle is complete, the system immediately tries to start processing the tasks of the current cycle. If this is completed within the current cycle, further processing is carried out as shown above. If the second cycle that follows directly is also exceeded (in this case it is irrelevant whether the system is still processing the first cycle or whether the second cycle has commenced), the current processing task is completed, and processing of the next task does not commence until the next possible scheduled cycle start. This means that several cycles may be lost. The exceed counter is incremented accordingly. Differences in execution between PLC and "Tc Com" runtime modules Processing of a Twin CAT task, in relation to the execution of runtime modules, is based on the following sequence: TE1010 Version: 2.1.1 13

## Page 14

Technical Introduction 1. Copying of the inputs to the process images of the runtime modules called by the task. 2. Executing the modules according to the sort order (in ascending order). 3. Output update, which makes the outputs available accordingly. If this task drives an Ether CAT fieldbus, the frame is provided and sent during the output process image. 4. Post-cycle update: This is used, among other things, to trigger a cycle update when the "I/O at task start" option is active. If runtime modules are added to a task, they "log on" to the respective calls of the task. The only exceptions are PLC runtime modules. For reasons of compatibility with Twin CAT 2, the PLC runtime modules directly update the inputs and outputs. The difference between the two behaviors is shown in the following figure: Four runtime modules can be seen in each case. Standard Twin CAT 3 runtime modules log on to the corresponding method calls of the task. This means that all input updates (yellow) and output updates (red) are triggered by the task and take place one after the other directly at the start or end of task processing. If two of these modules communicate with each other via a mapping, they do not receive the current values until the next cycle. The PLC runtime modules independently perform an input and output update. If two PLC runtimes communicate with each other, the runtime module that is executed second directly receives the current values from the first runtime module. Thus, there is no cycle offset in the communication direction from first runtime module to second runtime module, but there such an offset does exist in the other direction. 4.1.1 Tasks A task is a runtime object that can be scheduled and triggered by a scheduler. Functions or runtime objects that are to be executed in the context of this object log on to this object. The tasks are assigned a cycle time and a priority, which the scheduler uses to schedule the execution of the tasks (see Real-time scheduling [} 10]). Furthermore, each task is assigned a shared memory/address space, which all tasks can access together, and an additional stack memory. This stack memory is required to allow the nested execution of functions and sub-functions. The stack also serves as a memory for local variables. The state of a task is defined by this stack and the current content of the machine registers (calculation registers). If there is a context change or a task is interrupted by a higher priority, this state is saved and restored when the task is executed again. The size of the task stack can be defined in Twin CAT (see chapter Settings tab of the real- time settings). For sequence control of several tasks, a (real-time) system offers functions for communication and synchronization (see chapter Multi-task data access synchronization in the PLC). The corresponding task types are described in the following chapters. 4.1.1.1 Twin CAT Task Twin CAT standard tasks to which Twin CAT runtime modules can log on. To use the tasks in a PLC, this is done by assigning a task to a task reference (see Creating a referenced task). For Tc Com modules in general, the Tc Com module is assigned to tasks via the Context tab of the Tc Com module. (See in the chapter Tc COM module handling). 14 Version: 2.1.1 TE1010

## Page 15

Technical Introduction The settings of a task are described in the subchapter Twin CAT Task in "The Twin CAT project" documentation. 4.1.1.2 Twin CAT Task with Image In contrast to a standard task (see chapter Twin CAT Task [} 14]), the Twin CAT Task with Image also has its own process image. Variables can be created in this process image that are linked to other process images (e.g. from Ether CAT devices). Depending on the set cycle time and priority, the task triggers the mapping accordingly. It is therefore possible, for example, to operate cyclic bus communication without the need for a PLC or another runtime module. The variables of the process image can be accessed via ADS from the Twin CAT Scope or a non-real-time application, for example. 4.1.1.3 Twin CAT Job Task (Worker Task) A Job Task is a task that is executed on demand. It is called from an application and is NOT executed cyclically. A Job Task can be created directly under Tasks or in a Job Pool. If you create the Job Task directly under Tasks, tasks (jobs) can be passed to it directly from a client application. However, if you create the Job Task under a Job Pool, the tasks are transferred to the Job Pool from the application. This then assigns the task to the next Job Task in its pool that is next available. TE1010 Version: 2.1.1 15

## Page 16

Technical Introduction Name Name of the Job Task Object Id Object ID of the Job Task Priority Priority of the Job Task Floating point exception Specifies whether or not Twin CAT checks for floating point exceptions. Comment Optional comment on the Job Task Select the setting Floating point exception for the calling task and for the Job Task. 4.1.1.4 I/O Idle Task The I/O Idle Task handles acyclic communication for fieldbuses, so it is responsible for: • the State Machine of the Ether CAT Devices • Co E and So E communication • Reading or setting parameters via AOE • Mailbox communication • Acyclic diagnostics from Ether CAT (e.g. status queries) The I/O Idle Task is a cyclic task, but is not used for cyclic I/O communication (process data exchange). It therefore makes sense in most cases to select the priority so that it is executed after the PLC and motion tasks. As this is also acyclic communication, cycle timeouts of these tasks are generally not significant. Since Twin CAT version 3.1.4026, it has been possible to use multiple I/O Idle Tasks (one per Ether CAT master). The choice of I/O Idle Task is made via the adapter settings of the Ether CAT master. 4.1.1.5 PLC-Aux Task The PLC-Aux Task is used for communication between the PLC editors and the PLC runtime modules. This includes the download and Online Change of PLC control code as well as debugging (monitoring of values, setting of breakpoints, etc.). In addition, the PLC-Aux Task also processes the ADS messages that are sent to the runtime system independently of the development environment (Tc Xae Shell) (e.g. from an HMI). 16 Version: 2.1.1 TE1010

## Page 17

Technical Introduction The PLC-Aux Task is not a cyclic task and you should set its priority lower than this. This ensures that the cyclic tasks can interrupt the PLC-Aux Task. In the event of an online change, the new code is transferred to the target system via the PLC-Aux Task and the symbols are generated accordingly, etc. Only the “critical phase” of an online change, in which the code to be executed is exchanged, is protected in such a way that this process cannot be interrupted by the cyclical tasks. If several PLC runtime modules use the same PLC tasks, they can influence each other through an online change. 4.1.2 Core Boost Twin CAT Core Boost Prerequisite: Both the engineering environment and the runtime environment must use at least Twin CAT version 3.1.4026.6. If the Twin CAT feature Core Boost is supported for a given target system and is active, this is displayed in the Twin CAT Core Boost selection box after pressing the Read from Target button. To activate or deactivate the function, these settings must be activated on the target system using the Set on Target button. You must restart the computer after changing this setting. If the Twin CAT Core Boost function is not supported by a given target system, the following message appears after pressing the button Set on Target: If the Twin CAT Core Boost setting is activated, a clock frequency can be defined for each real-time core. If no clock frequency is defined for a real-time core, the Base Frequency is automatically selected. TE1010 Version: 2.1.1 17

## Page 18

Technical Introduction Correct selection of the core frequency Twin CAT automatically monitors the clock frequencies of the individual cores based on the limits stored in the system for the temperature of the individual cores or the power consumption of the individual packages. If these limits are exceeded, Twin CAT reduces the clock frequencies of the individual cores accordingly (see also chapter Core Boost tab). If Twin CAT is forced to reduce the clock frequencies of individual real-time cores, this may have an influence on the real-time behavior set in Twin CAT. The tasks executed on this real-time core then have longer execution times, which may lead to cycle timeouts. You therefore share the responsibility for selecting the clock frequencies of the real-time cores in such a way that Twin CAT is not permanently operated in throttle mode. If the temperature limit is permanently exceeded, the system may shut down. Selecting the clock frequency for non-real-time cores Non-real-time cores are computer cores on which Twin CAT is not activated and which are not used in real-time, so that only processes triggered by the operating system are executed there. For the non-real-time cores, the clock frequency is automatically selected by the operating system as required. The maximum clock frequency up to which non-real-time cores can clock up is the base frequency. Starting with the 12th and 13th generations of Intel® processors, non-real-time cores can overclock up to the core boost frequency if necessary. The level of the core boost frequency is stored in the system and differs depending on the processor type. Configurable clock frequencies: Processor Processor generation Base clock Configurable Core Boost clock Core Intel® Celeron®, Core™ i3/i5/i7 of the 11th 2.20 GHz 3.70 GHz i3-1115G4E generation, series U Core Intel® Celeron®, Core™ i3/i5/i7 of the 11th 1.50 GHz 3.90 GHz i5-1145G7E generation, series U Core Intel® Celeron®, Core™ i3/i5/i7 of the 11th 1.80 GHz 4.20 GHz i7-1185G7E generation, series U Core Intel® Celeron®, Core™ i3/i5/i7 of the 11th 2.40 GHz 4.00 GHz i3-11100HE generation Core Intel® Celeron®, Core™ i3/i5/i7 of the 11th 2.60 GHz 4.10 GHz i5-11500HE generation Core Intel® Celeron®, Core™ i3/i5/i7 of the 11th 2.60 GHz 4.20 GHz i7-11850HE generation Core Intel® Celeron®, Pentium®, Core™ i3/i5/i7/i9 of the 3.30 GHz 4.20 GHz i3-13100E 12th/ 13th generation Core Intel® Celeron®, Pentium®, Core™ i3/i5/i7/i9 of the 2.40 GHz 4.10 GHz i5-13400E 12th/ 13th generation Core Intel® Celeron®, Pentium®, Core™ i3/i5/i7/i9 of the 1.90 GHz 4.00 GHz i7-13700E 12th/ 13th generation Core Intel® Celeron®, Pentium®, Core™ i3/i5/i7/i9 of the 1.80 GHz 3.90 GHz i9-13900E 12th/ 13th generation 4.2 Display in the Real-time Monitor In simple terms, the Twin CAT 3 Realtime Monitor enables grouped events to be displayed. In order to avoid confusion with the messages or alarms stored in the Twin CAT Event Logger, the data handled by the Twin CAT 3 Realtime Monitor are referred to as (time) markers. These markers can be used to represent the temporal behavior of tasks or user processes. For this purpose, the markers are assigned an ID, a marker type, a context, and a timestamp. In addition, if required a user- defined date formatted as UINT can be provided in order to include additional information in the display in the real-time monitor (e.g. error number, state of a state machine etc.). 18 Version: 2.1.1 TE1010

## Page 19

Technical Introduction Marker ID: The marker ID is used to identify the displayed task / process. In other words, all markers relating to the same task/process should use the same marker ID. Marker type: The Twin CAT 3 Realtime Monitor enables the display of events or processes / operations over time. For the representation of processes / operations, these are marked as a sequence. A sequence can be divided into one or more intervals. Markers can be typed to define the start or end of sequences or intervals. In addition, they can also show events within an application over time. A distinction is therefore made between the following types of markers: 1. Marker: The marker can be used to log an event, e.g. the time of an alarm or the change of a state etc. 2. Sequence start: A sequence start indicates the time when a task / process is allowed to start (higher-priority tasks / processes may result in a delay). 3. Interval start: An interval start specifies the time when a task / process actually starts. Due to interruptions etc., a sequence may contain several interval starts. 4. Interval stop: An interval stop specifies the time when a task / process is no longer executed. This can happen, for example, due to interruptions caused by higher-priority tasks or unfulfilled dependencies. 5. Sequence stop: A sequence stop indicates the point in time at which a task may no longer run or a process is terminated. Context: A context describes a summary of markers or marker groups. For the system tasks, all tasks that are processed on a core are combined into one context (e.g. core 0). Such a (real-time) context thus maps the scheduling within a real-time kernel. For these real-time contexts, only one of the tasks assigned to a context is active at any one time. This restriction does not apply to user- specific marker groups. When using simple markers (by using FB_RTMon_Log Mark [} 54]), the user-specific marker groups are automatically grouped according to their application ports. For example, all markers that are stored from a PLC project with port 851 are assigned to a context with context ID 851 (hexadecimal 0x353). When using more generic markers (based on the function block FB_RTMon_Log Mark Base [} 58]), contexts (i.e. correlations) can be defined independently. This could be, for example, a grouping by process type or by machine modules (functional units). Representation in the tree view: As described above, all markers that describe the same task or process use the same marker ID. These markers are combined into a marker group and are assigned an entry in the tree view of the Twin CAT 3 Realtime Monitor. An entry with the corresponding task name is automatically created in the tree for the system tasks. For user-related marker groups that describe processes, for example, this must be done manually. For each detected user-specific marker group an entry New Group automatically appears in the tree, which can be identified by the marker ID (corresponds to the group ID in the Properties window of the group). This group can be renamed as required (see Context node [} 51]). TE1010 Version: 2.1.1 19

## Page 20

Technical Introduction As described under Context [} 19], the individual marker groups are combined into contexts. This happens automatically for the system tasks and when simple markers are used. When using extended markers, the context ID that is transferred in the application code is used for this purpose. The names of marker IDs (group IDs) and contexts can be exported for later reuse and subsequently re-imported. In the chart representation, a marker group (i.e. all markers of a task / process) is displayed within one row. For more information, see Representation in the chart. Representation in the chart: Symbols in the chart representation: Sequence start Sequence stop Indicates an interval start or stop. Marker Example representation: 20 Version: 2.1.1 TE1010

## Page 21

Technical Introduction The following diagram shows an example of a possible temporal behavior of a task. At time (1), the task receives "permission" to run based on the set cycle time. The start may be delayed until time (2) due to missing dependencies or due to higher priority tasks that are still active. At time (3) a marker was transferred. This can be a "system event" marker or a user-defined marker. Detailed information is provided by a tooltip associated with the marker. The marker itself has no influence on the temporal behavior of the task or the process. At time (4) the task is interrupted (once again for example due to an interlock or a higher-priority task). At time (5) the task continues to run. At time (6) the task is finished. 1 2 3 4 5 6 Illustration of the processing of a PLC runtime module: As described in the Real-time scheduling section, each PLC runtime module calls up the update of the inputs and outputs itself. The complete processing of the PLC takes place in the cyclic update of the task calling it. For this reason, if detailed logging is activated, processing of the PLC is mapped in the cyclic update of a task. The following figure illustrates this by means of an example. Time (1) shows the execution of the input update of the PLC runtime module. Cyclic processing of the PLC code takes place in area (2), which is interrupted by another task in the example shown here. Once processing is completed, the output update of the PLC runtime module takes place at time (3). In the example shown here, the task itself does not perform an input or output update. 1 2 3 Detailed logging: The option "detailed Logging" (see project Project node [} 50] or Context node [} 51]) offers a detailed representation of the execution of real-time tasks (also within a task). The following two figures illustrate the difference. Standard logging enabled: Detailed logging enabled: TE1010 Version: 2.1.1 21

## Page 22

Technical Introduction Representation of the task references: Task references can be used to visualize the assignment of markers to the individual real-time control tasks in the Twin CAT 3 Realtime Monitor. This enables both the assignment of the sending of individual Ether CAT frames and the assignment of user contexts to real-time control tasks. Task references are represented by dashed lines. The Show Task Reference option (see Marker group element [} 52]) activates this option for user contexts (e.g. user processes). The following figure shows the assignment of the user process shown in orange to a PLC task. This option is automatically enabled for Ether CAT frames. The following illustration shows this using an example. The color representation of the frames is the same as in Twin CAT. 22 Version: 2.1.1 TE1010

## Page 23

Technical Introduction Sequence of contexts in the display window Depending on the Twin CAT project that has been activated on the target system to be examined, a large number of contexts can be displayed, distributed across different cores. This can make it difficult to visualize individual correlations. For this reason, it is possible to arrange the contexts in the display window as required. 1. Disable the Keep Graph Order option in the project settings (see Project node [} 50]). 2. Deselect all contexts in the tree of the project entry. 3. Select the contexts in the order in which you want to display them in the display window. Example: In the previous figure, all contexts were hidden and selected again in the order so that it is easy to see which task sends which Ether CAT frame without any overlaps. Also see about this 2 Real-Time [} 10] TE1010 Version: 2.1.1 23

## Page 24

Quick start 5 Quick start The following chapter is intended to provide an introduction to using the Twin CAT 3 Realtime Monitor. ü The starting point is a project running on a Twin CAT 3.1 runtime version 3.1.4024.0 or later. 1. Open the Realtime Monitor. 2. Create a new project by clicking on the New Project option in the Project menu of the Twin CAT 3 Realtime Monitor. The project name can be changed via the project properties. 3. Use the Realtime Monitor toolbar to choose the target system you want to analyze. ð A prompt appears asking whether you want to load the configuration from the target system. 4. Confirm with Yes. ð The active configuration of the target system has been loaded and the contexts are displayed hierarchically as a tree. ð A dialog box appears asking whether the Realtime Monitor should take a short snapshot of the target system in order to automatically detect and create user contexts. 5. Confirm with Yes. 24 Version: 2.1.1 TE1010

## Page 25

Quick start 6. In the tree, select the contexts/tasks that you want to have displayed in the Realtime Monitor so that they are marked with a tick. 7. Select the project in the tree view and set the Detailed Logging option to "True" in the properties window. (See red marking in the image of the previous step or the description of Marker group element [} 52]) 8. Click on the Start Log data button in the toolbar of the Realtime Monitor. ð Recording of the real-time behavior begins. Stopping the recording: To stop a recording in progress and save the data, proceed as follows: TE1010 Version: 2.1.1 25

## Page 26

Quick start ü A real-time monitor recording is running. 1. Click the Stop data collection button in the Realtime Monitor toolbar. 2. Select the menu entry Recordings > Save data as Recording. ð The recording of the Realtime Monitor is now stopped and the data is stored as a recording in the project. 26 Version: 2.1.1 TE1010

## Page 27

Configuration of triggers 6 Configuration of triggers Triggers can be used to find significant events in the data stream of a Realtime Monitor recording. The following trigger events are automatically entered in a selection list for each context (task, user context): • Sequence Start (for tasks and user contexts) • Stop on Exceed (for one task) • Trigger event (for a user-defined marker in a user context). Depending on whether you are working with recorded data or live data, the following options are available to you: Triggering on live data: If the controller is in Run Mode and the real-time monitor project corresponds to the current configuration, triggering can be started based on live data using the button. If the event selected in the selection box occurs in the live data, the Realtime Monitor stops recording automatically. The following settings for triggering live data can be stored in the "Live trigger" section of the project node settings: Store Trigger Data: Defines whether the trigger data is saved as a recording. Trigger Prelude: Defines how many seconds are saved before the event. Trigger Samples: Number of recordings that are saved for an event. TE1010 Version: 2.1.1 27

## Page 28

Configuration of triggers Evaluation of recorded data: After selecting the trigger event in the selection box, you can use the green arrow buttons to navigate between the individual times at which the event occurred. (See chapter Toolbar - Real-time Monitor toolbar [} 46]) Play the selected trigger events: By selecting the button , you can play back the individual occurrences of the selected trigger event as a "fast-forward". This makes it possible to quickly get an impression of when this event occurs and how much the time of occurrence varies under certain circumstances. 28 Version: 2.1.1 TE1010

## Page 29

Use of cursors 7 Use of cursors In order to measure times or to display all (system) events that occur at a particular time, cursors can be used in the Twin CAT 3 Real-time Monitor. Adding cursors To add a cursor, proceed as follows: 1. Right-click within the display area of the chart. ð A context menu opens, which contains the command Add Cursor as well as a command to delete all existing cursors. ð 2. Click Add Cursor. ð A new cursor is created in the center of the chart. TE1010 Version: 2.1.1 29

## Page 30

Use of cursors Deleting cursors There are two ways to delete a cursor: Inside the chart 1. Right-click within the display area of the chart ð A context menu opens which contains a command to delete all existing cursors. 2. Use the Remove Cursor command of the cursor you want to delete. ð The cursor is deleted. Inside the cursor window 1. Right-click the cursor you want to delete. ð A context menu opens with a command to remove the cursor. 2. Use the command Remove Cursor to delete this cursor. ð The cursor is deleted. Navigating using the cursors All cursors that were created are displayed in the cursor window. 30 Version: 2.1.1 TE1010

## Page 31

Use of cursors Double-clicking a cursor causes the display within the chart to jump to the exact position where the cursor is positioned. The cursor is centered in the display area. Measuring times The cursors can be used to precisely determine the execution times of processes or the time of occurrence of a user event. To do this, move one cursor to a relevant time within the display. The cursor automatically "latches" to events and displays the events occurring at that time for the active cursor in the cursor window. In the following figure, this is the application event Counter Start Interval for cursor 1. To measure the duration of the process "Context_2_Counter", proceed as follows: 1. Create a cursor for the process start or use an existing cursor. 2. Move the cursor to the sequence / interval start marker of the process "Context_2_Counter" so that this event is displayed in the Event window (see figure above). 3. Proceed accordingly with another cursor and move it to the sequence / interval stop marker of the process "Context_2_Counter“. ð The differences between all existing cursors are now displayed in tabular form in the cursor window. 4. Read the value for the cursor you are using directly from the table. For the example shown here, the execution time is 55.5 µs. Cursor properties The following properties are available for cursors. TE1010 Version: 2.1.1 31

## Page 32

Use of cursors Property Meaning Cursor info Color Allows you to change the color of the active cursor. Text Shows the text displayed at the cursor. Information Trigger Cursor Activates the property Trigger Cursor, which causes a cursor in trigger mode to remain at the same position in the chart window, rather than being latched to a point in time (which would cause it to disappears from the display area). Event window The Event window shows all events taking place at this time for the active cursor. In the following figure, these are the following events for cursor 1: • The Plc Task starts processing of the runtime module Untitled1. • Plc Task_2 also starts processing of the runtime module Untitled2. • The Counter application process starts both the sequence and the interval. 32 Version: 2.1.1 TE1010

## Page 33

Recordings 8 Recordings Recording functionality is available from Realtime Monitor version 1.2. Within a Realtime Monitor project, several recordings can be made with the same configuration and stored in the project. These are displayed in the recording list. (See red frame in the following picture) You can manage these recordings both via the context menu and via the Recordings menu. Saving a recording After you have completed a recording with the Realtime Monitor, you can save the data as a recording within the project using the button (Save collected data within project) in the Toolbar [} 46] or using the "Save data as Recording" entry in the Recordings menu. Adding a recording To add already recorded data to a Realtime Monitor project, use the Import Recording File menu entry in the Recordings menu. The recording is then added to the end of the list and numbered accordingly in ascending order. The data files of the Realtime Monitor contain only the name of the project. The data files themselves have no name, only a timestamp. So, if recordings are removed from the project and added again later, the displayed names (e.g. the displayed recording number) will differ. The start and end time of a loaded recording is displayed in the properties of the project. (See Project node [} 50]) Rename a recording: 1. To rename a recording, select it and switch to the properties window. 2. Click in the field with the name of the recording and change it. TE1010 Version: 2.1.1 33

## Page 34

Recordings 3. Confirm the change by pressing the Return button. All data files for a recording are saved in a folder. Renaming the recording changes the name of the storage folder, not the name of the files. If this recording is loaded into another Realtime Monitor project, the name change is lost. Selecting a recording To display a recording in the display window, select it and use the Load Recording to Chart command in the context menu or double-click on the recording to be displayed. Removing a recording If a recording is to be removed from the project but not deleted from the hard disk, select this recording in the recording list so that it is highlighted. Then use the context menu entry Remove recording from list. Deleting a recording If you want to delete a recording from the project as well as from the hard disk, select this recording in the recording list so that it is marked. Then use the context menu entry Delete recording file. Context menu entries in the recording list The following table shows all context menu entries: 34 Version: 2.1.1 TE1010

## Page 35

Recordings Command Meaning Load Recording to Chart Loads the selected recording into the display window. Remove Recording from List Removes the recording from the list. The recording file is retained on the hard disk. Delete Recording File Removes the recording from the list and deletes the corresponding file from the hard disk. Import recording file Imports a recording into the Realtime Monitor project. TE1010 Version: 2.1.1 35

## Page 36

Recording the startup behavior 9 Recording the startup behavior From Twin CAT 3.1 version 3.1.4026, it is possible to record the startup behavior of a Twin CAT 3.1 real-time system and display it with the Twin CAT 3 Realtime Monitor. Procedure for recording the startup behavior: ü Carry out steps 1-7 of the chapter Quick start [} 24], which will give you a fully configured real-time monitor project. 1. Switch the Twin CAT 3.1 Runtime to Config mode. 2. Press the record button in the Realtime Monitor. ð The following message appears: 3. Confirm the dialog with Yes. 4. Switch the Twin CAT 3.1 runtime to Run Mode. ð The Realtime Monitor starts recording automatically. 36 Version: 2.1.1 TE1010

## Page 37

Statistics 10 Statistics In order to be able to make statements about the configuration of the real-time system, it is possible to generate statistics with the help of the Twin CAT 3 Realtime Monitor (see chapter Reference > User Interface > Statistics [} 44]). Creating and displaying statistics 1. To create statistics for the loaded project, select Create Statistics in the Statistics menu. ð The statistics are created and the following view opens: TE1010 Version: 2.1.1 37

## Page 38

Statistics The distribution of execution times per real-time kernel is displayed as a pie chart. The sum of all tasks executed on a real-time kernel, including the idle task and possibly the operating system context (except on isolated cores), is always 100%. You will see a similar display for a single real-time kernel if you select one of the real-time kernels used in the project tree. In the area below the pie chart, you can see the changes in execution times over time as a histogram distributed over several tabs (one per Twin CAT task). A more accurate analysis of the time behavior is possible if you select a real-time task directly in the project tree. For a PLC task, you get the view in which the cycle update, i.e. the area in which the application code is executed, is displayed in a separate tab. The bar chart shows the distribution of execution times over the recorded period. To see all execution times, scroll with the mouse wheel on the bar chart. This allows you to zoom in and out of the display. 38 Version: 2.1.1 TE1010

## Page 39

Statistics If you want to see in which context a corresponding cycle time occurred for the first time, proceed as follows: 1. Double-click with the left mouse button on the corresponding bar in the distribution. ð The timestamp is entered after the Jump to field and highlighted in yellow. 2. Click on the Jump to button to switch to the chart view. ð The corresponding timestamp is displayed in the center of the chart. 3. To undo the selection in the Jump to window, click on any area in the chart view. Export statistics: If further analyses are to be carried out in your own tools, the individual timestamps of the tasks can be exported. The export is done in *.csv file format. 4. In the Statistics -> Export Statistics menu, select the time context you wish to export. ð You will receive a *.csv file with the corresponding timestamps. It is also possible to export the statistics completely. 1. In the Statistics menu, select the Export all Statistic option. ð You will receive a ZIP archive containing a separate *.csv file for each time context in the project. TE1010 Version: 2.1.1 39

## Page 40

Reference, user interface 11 Reference, user interface The user interface of the Twin CAT 3 Realtime Monitor consists of the following components: 1 2 3 4 5 6 7 8 9 1 Menu bar 2 Toolbar 3 Project tree 4 Display window 5 Properties window 6 Recordings 7 Cursor window 8 Event window 9 Description display of the selected property 11.1 Menu bar The menu bar of the Twin CAT 3 Realtime Monitor provides the commands described below. 40 Version: 2.1.1 TE1010

## Page 41

Reference, user interface 11.1.1 Project New Project Function: The command creates a new Realtime Monitor project. Call: Project > New Project Open Project Function: The command opens an existing Realtime Monitor project. Call: Project > Open Project Save Project Function: The command saves an existing Realtime Monitor project. Call: Project > Save Project Save Project as Function: The command saves an existing Realtime Monitor project under a name to be defined. Call: Project > Save Project as Save Project to archive Function: The command saves an existing Realtime Monitor project including the recordings contained therein to a zip file. Call: Project > Save Project to archive Close Project Function: The command closes an existing Realtime Monitor project. TE1010 Version: 2.1.1 41

## Page 42

Reference, user interface Call: Project > Close Project Recent Projects Function: The command displays a list of the most recently opened Realtime Monitor projects and allows you to reopen them. Call: Project > Recent Projects 11.1.2 Recordings Import Recording File Function: The command imports a recording file. Call: Recordings > Import Recording File Save data as Recording Function: The command saves the recorded data as recording. Call: Recordings > Save data as Recording Save Eventlogger Messages Function: The command scans the Event Logger Messages and adds them as events to the Realtime Monitor data. Call: Recordings > Save Eventlogger Messages 42 Version: 2.1.1 TE1010

## Page 43

Reference, user interface 11.1.3 User contexts Import User Contexts Function: The command imports existing user contexts into a Realtime Monitor project. If the project contains previously (automatically) found contexts with the same event groups and event IDs, the user is asked whether these should be replaced by the saved names and settings. Call: User Contexts > Import User Contexts Export All User Contexts Function: The command exports existing user contexts from an open Realtime Monitor project. Call: User Contexts > Export All User Contexts Scan User Contexts Function: The command scans for existing user contexts and inserts them into a Realtime Monitor project. Call: User Contexts > Scan User Contexts TE1010 Version: 2.1.1 43

## Page 44

Reference, user interface 11.1.4 Statistics Create Statistics Function: The command evaluates the markers recorded with the Twin CAT 3 Realtime Monitor and generates a statistic. This is displayed in the Statistics tab. Call: Tools > Create Statistics Examples of generated statistics: 44 Version: 2.1.1 TE1010

## Page 45

Reference, user interface After selecting a specific task: Export Statistics Function: The command exports the selected statistics to a CSV file. If all statistics are exported, the individual CSV files are packed into a zip archive. Call: Tools > Export Statistics TE1010 Version: 2.1.1 45

## Page 46

Reference, user interface 11.1.5 Info Realtime Monitor Function: The command opens a dialog window showing the version number of the installed Twin CAT 3 Realtime Monitor version. Call: Info > Realtime Monitor 11.2 Toolbar - Real-time Monitor toolbar The Twin CAT 3 Realtime Monitor toolbar provides the following commands. 46 Version: 2.1.1 TE1010

## Page 47

Reference, user interface Loading the project configuration from the set target system. Start recording. Stop recording. Deleting the displayed data and deleting the recorded data. Saving the recorded data within the project. Selecting the target system Start triggering on live data. Start triggering on recorded data. Selecting a trigger Manual jump to next trigger-event Manual jump to previous trigger-event Jump to the start of the display. Moving the display to the left. Moving the display to the right. Jump to the end of the display. Zoom In Zoom Out Chart Interval Time interval of the area displayed in the current section Data Interval Time interval of the recorded data Jump to the time specified in the next input field. Input field for entering a time 11.3 Project tree The project tree hierarchically displays all marker groups and their assignment to contexts. An entry with the corresponding task name is automatically created in the tree for the system tasks. System tasks are grouped into corresponding contexts once they have been assigned to cores. An entry is also created in the project tree for user-related marker groups. Depending on the call used, the assignment to contexts in the user program (see FB_RTMon_Log Mark [} 54] or FB_RTMon_Log Mark Base [} 58]) is made either in relation to the ADS port of the user program or based on a user-defined context ID. TE1010 Version: 2.1.1 47

## Page 48

Reference, user interface User-related nodes are named according to their Properties page (see Context node [} 51] or Marker group element [} 52]). Context menu entries in the project tree The following table shows all context menu entries in the project tree and the node type on which they are available. Command Node type Meaning Add New User Context Project node Adds a user context. Import User Context Project node Imports a user context including all subelements. Add New User Group User context node Adds a user-related marker group. Remove User Context User context node Removes a user context. Export User Context User context node Exports a user context including all subelements. Remove User Group User-related marker group Deletes a user-related marker group. node Example: The following figure shows the representation of a project tree as it is automatically generated after the recording is started. The query whether to search for user contexts was confirmed with Yes. In addition to the system tasks distributed over Core 0 and Core 1, three user-related marker groups are generated, which have not yet been named here. 48 Version: 2.1.1 TE1010

## Page 49

Reference, user interface 11.4 Recording list Multiple recordings can be managed in one Realtime Monitor project. These are displayed in the recording list. Further information on the subject of recordings can be found in the chapter Recordings [} 33]. Context menu entries in the recording list The following table shows all context menu entries: Command Meaning Load Recording to Chart Loads the selected recording into the display window. Remove Recording from List Removes the recording from the list. The recording file is retained on the hard disk. Delete Recording File Removes the recording from the list and deletes the corresponding file from the hard disk. Import recording file Imports a recording into the Realtime Monitor project. 11.5 Display window In the display window (chart) the (time) markers are displayed over time, sorted according to the individual marker groups. You can use the toolbar functions (see Toolbar - Real-time Monitor toolbar [} 46]), as well as the mouse and similar devices, to navigate and zoom in and out of the display window. TE1010 Version: 2.1.1 49

## Page 50

Reference, user interface To carry out time measurements or analyses (see Use of cursors [} 29]), set, delete or move cursors using the context menu. 11.6 Properties window The properties of the active (selected) element of the project tree are displayed in the properties window. The properties listed in the Logging area always apply to all subelements of the tree. The Different Settings value indicates that the values of the subelements are different. If a value is changed, the values of the subelements are also changed. 11.6.1 Project node The following settings are available on the project node of the Twin CAT 3 Realtime Monitor: Property Meaning Common Comment Comment on the project Name Name of the project Version Project version Information Ams Net Id Ams Net Id of the target system Connected Connection status to target system Hyper Threading Indicates whether hyperthreading is active. Isolated Cores Displays the number of isolated cores used in the project. Win RTCores Displays the number of Windows real-time kernels used in the project XARVersion Displays the Twin CAT version of the target system. Live Trigger Store Trigger Data Stores trigger data as a recording. Trigger Prelude Defines the time in seconds before a trigger event (trigger advance). Trigger Samples Defines the number of trigger samples to be stored. Loaded Recording Loaded Recording Name of the currently loaded recording Recording End End time of the recording Recording Start Start time of the recording Logging Detailed Logging Enables detailed logging. Enable Logging Enables logging. Keep Graph Order Keeps the order of the contexts in the graphical display, even after they have been made invisible and visible again. Reduce On Zoom Reduces the display depth when zooming out (markers lying directly adjacent to one another are combined as a bar) in order to increase performance. Show System Tasks Also shows the system tasks. Target Settings/ Capture Time Timestamp of when the recording was made on the target system. The time of the target system is used for this. Reg Keys Shows which registry keys are set that affect real-time. 50 Version: 2.1.1 TE1010

## Page 51

Reference, user interface The properties listed in the Logging area always apply to all subelements. These properties therefore apply to the entire Realtime Monitor project at project level. If the value after one of the properties in the Logging area is "Different Settings", this means that the values in the individual sub-nodes are different. Changing the value at the project level sets the values for all sub-elements. 11.6.2 Context node The following settings are available on the context node of the Twin CAT 3 Realtime Monitor. These differ according to real-time contexts (here the context corresponds to a computer core) and application contexts. Real-time context: Property Meaning Common Comment Optional comment Information Base Time Base time of the core Default Core Indicates whether the core is the default core. Id Shows the ID of the core. Name Shows the name of the core. RT_Percentage Shows the set maximum real-time load. Type Shows the core type (Windows RT/ isolated core). Logging Detailed Logging Enables detailed logging. Enable Logging Enables/disables logging. Show Single Marker Also shows individual markers. Event Logger Property Meaning Comment Comment Comment Information Id Name Event Logger Logging Enable Logging Enables the logging of Event Logger events. Application context: Property Meaning Common Comment Comment Information Context Id Context ID that was transferred at the markers Name Name of the context Logging Show Single Marker Also shows single markers. Show Task Reference Shows the task references. If the function block FB_RTMon_Log Mark [} 54] is used, the port number of the PLC runtime module is automatically set as Context ID. TE1010 Version: 2.1.1 51

## Page 52

Reference, user interface 11.6.3 Marker group element The following settings are available on the marker group / process nodes of the Twin CAT 3 Realtime Monitor. They differ according to real-time tasks and application processes / markers. Real-time tasks: Property Meaning Common Comment Comment Information ADSPort ADS port of the task Cpu Id CPU ID on which the task is executed. Cycle Time Task cycle time Event Count Number of executions (within the recording time) Name Name of the task OID Object ID of the task Parsed Masks Number of markers found Priority Set priority Layout ADSCommand Color Color of the area for processing the ADS commands (default: Coral) Cycle Udate Color Color of the Cycle Update of the task (default: green) Input Update Color Color of the Input Update of the task (default: yellow) Mark Color Marker color (default: white) Output Update Color Color of the Output Update of the task (default: red) Post Cyclic Update Color Color of the Post Cyclic Update of the task (default: dark green) Pre Input Update Color Color of the Pre Input Update of the task (default: gold) Task Intervall Color Color of the task interval marker (default: light blue) Logging Detailed Logging Enabling detailed logging. Show Single Marker Enables the display of single markers. User processes: Property Meaning Common Comment Comment Information Group Id ID of the marker group / process Name Name of the process to be displayed Parsed Marks Number of markers found Layout Event Intervall Color Color for the interval / active execution of the process (default: blue) Mark Color Color of the markers (default: white) Logging Show Single Marker Enables the display of single markers. Show Task Reference Enables the display of task references. (Assignment of process markers to real-time tasks by dashed lines) 11.7 Cursor window All cursors that were created are displayed in the cursor window. 52 Version: 2.1.1 TE1010

## Page 53

Reference, user interface Double-clicking a cursor causes the display within the chart to jump to the exact position where the cursor is positioned. The cursor is centered in the display area. The context menu item Remove Cursor can be used to delete the selected cursor. The use of cursors is described in detail under Use of cursors [} 29]. 11.8 Event window The Event window shows all events taking place at this time for the active cursor. In the following figure, these are the following events for cursor 1: • The NC-SAF task is terminated. • The NC-SAF task is finished. • The scheduler starts the Plc Task. • The Plc Task starts processing of the runtime module Untitled1. TE1010 Version: 2.1.1 53

## Page 54

PLC API 12 PLC API 12.1 Function blocks 12.1.1 FB_RTMon_Log Mark The FB_RTMon_Log Mark is an extended function block that enables the setting of "simple" (time) markers. The FB_RTMon_Log Mark extends the generic function block FB_RTMon_Log Mark Base [} 58]. The context ID information is automatically initialized by the ADS port of the calling task and therefore no longer needs to be taken into account during the call. The various marker options (see Tc Mark Option [} 60]) have also been packaged in method calls so that the function block does not require a marker to be created beforehand. Only the marker ID (marker group) must be transferred by the user. This is used to identify the process to be displayed. Optionally, an event ID is also available in which the user can transfer a user record (e.g. state of a state machine, error message, etc.). Inputs VAR_INPUT n Context Id : UINT := Twin CAT_System Info Var List._App Info. Ads Port; b Log Calling Task : BOOL := TRUE; // specifies whether a reference to the calling task should be set with each mark END_VAR Name Type Description n Context Id UINT Context ID for which this marker is to be set. The initial value is Twin CAT_System Info Var List._App Info. Ads Port. If this is not changed, the ADS port number is automatically used as the Context ID. b Log Calling Task BOOL Boolean parameter that defines whether the executing task is also saved for the marker. The initial value is TRUE. Outputs VAR_OUTPUT b Error : BOOL; // TRUE if an error occurred hr Error Code : HRESULT; // outputs the error code which occurred END_VAR Name Type Description b Error BOOL Boolean value that indicates whether the function block is in error state. hr Error Code HRESULT HResult-Error Code. If the output b Error is true, the error code can be read at this output. 54 Version: 2.1.1 TE1010

## Page 55

PLC API 12.1.1.1 Log Interval Start The method creates a marker with an interval start for the transferred Marker ID. Return value Name Type Description Log Interval Start HRESULT Returns the error code in the event of an error. Inputs VAR_INPUT n Group Id : UINT; // Defines the group to which the interval belongs n Event Id : UINT; // Set to distinguish different events inside the group END_VAR Name Type Description n Group Id UINT Marker ID (marker group) for which the marker is to be written. n Event Id UINT Optional Event Id 12.1.1.2 Log Interval Stop The method creates a marker with an interval stop for the transferred Marker ID. Return value Name Type Description Log Interval Stop HRESULT Returns the error code in the event of an error. Inputs VAR_INPUT n Group Id : UINT; // Defines the group to which the interval belongs n Event Id : UINT; // Set to distinguish different events inside the group END_VAR Name Type Description n Group Id UINT Marker ID (marker group) for which the marker is to be written. n Event Id UINT Optional Event Id TE1010 Version: 2.1.1 55

## Page 56

PLC API 12.1.1.3 Log Mark The method creates a marker for the marker ID that was transferred. Optionally, the event ID can be used to distinguish between different user events or to display additional data (formatted as UINT) in the Twin CAT 3 Realtime Monitor display. Return value Name Type Description Log Mark HRESULT Returns the error code in the event of an error. Inputs VAR_INPUT n Group Id : UINT; // Defines the group to which the interval belongs n Event Id : UINT; // Set to distinguish different events inside the group END_VAR Name Type Description n Group Id UINT Marker ID (marker group) for which the marker is to be written. n Event Id UINT Optional Event Id 12.1.1.4 Log Sequence Start The method creates a marker with a sequence start for the marker ID that was transferred. Return value Name Type Description Log Sequence Sta HRESULT Returns the error code in the event of an error. rt Inputs VAR_INPUT n Group Id : UINT; // Defines the group to which the interval belongs n Event Id : UINT; // Set to distinguish different events inside the group END_VAR Name Type Description n Group Id UINT Marker ID (marker group) for which the marker is to be written. n Event Id UINT Optional Event Id 56 Version: 2.1.1 TE1010

## Page 57

PLC API 12.1.1.5 Log Sequence Stop The method creates a marker with a sequence stop for the marker ID that was transferred. Return value Name Type Description Log Sequence Sto HRESULT Returns the error code in the event of an error. p Inputs VAR_INPUT n Group Id : UINT; // Defines the group to which the interval belongs n Event Id : UINT; // Set to distinguish different events inside the group END_VAR Name Type Description n Group Id UINT Marker ID (marker group) for which the marker is to be written. n Event Id UINT Optional Event Id 12.1.1.6 Log Start The method creates a marker with a sequence and interval start for the transferred marker ID. Thus, this marker represents the time of a process at which it is immediately active / started. Return value Name Type Description Log Start HRESULT Returns the error code in the event of an error. Inputs VAR_INPUT n Group Id : UINT; // Defines the group to which the interval belongs n Event Id : UINT; // Set to distinguish different events inside the group END_VAR Name Type Description n Group Id UINT Marker ID (marker group) for which the marker is to be written. n Event Id UINT Optional Event Id TE1010 Version: 2.1.1 57

## Page 58

PLC API 12.1.1.7 Log Stop The method creates a marker with a sequence and interval stop for the passed marker ID. Thus, this marker represents the point in time of a process at which it is terminated directly. Return value Name Type Description Log Stop HRESULT Returns the error code in the event of an error. Inputs VAR_INPUT n Group Id : UINT; // Defines the group to which the interval belongs n Event Id : UINT; // Set to distinguish different events inside the group END_VAR Name Type Description n Group Id UINT Marker ID (marker group) for which the marker is to be written. n Event Id UINT Optional Event Id 12.1.2 FB_RTMon_Log Mark Base The FB_RTMon_Log Mark Base is a generic function block that enables the setting of (time) marks. In contrast to the function block FB_RTMon_Log Mark [} 54], the context ID itself must be transferred here. This makes it possible to group the processes to be displayed (for example, by process type or functional unit). Optionally, an event ID is also available in which the user can transfer a user record (e.g. state of a state machine, error message). Outputs VAR_OUTPUT b Error : BOOL; // TRUE if an error occurred hr Error Code : HRESULT; // outputs the error code which occurred END_VAR Name Type Description b Error BOOL TRUE if an error has occurred. hr Error Code HRESULT Outputs the error code that has occurred. 58 Version: 2.1.1 TE1010

## Page 59

PLC API 12.1.2.1 Log Mark The method creates a marker for the transferred marker group ID. The marker type is transferred using the parameter n Mark Ctrl (see Tc Mark Option [} 60]). Optionally, the event ID can be used to distinguish between different user events or to display additional data (formatted as UINT) in the Twin CAT 3 Realtime Monitor display. Return value Name Type Description Log Mark HRESULT Returns the error code in the event of an error. Inputs VAR_INPUT n Context Id : UINT; // defines the context n Group Id : UINT; // defines the group inside the context n Event Id : UINT; // defines the specific event inside the group n Mark Ctrl : UDINT; // mask for mark options (listed in Tc Mark Option) END_VAR Name Type Description n Context Id UINT Defines the context ID under which the marker is to be grouped in the Twin CAT 3 Realtime Monitor. n Group Id UINT Marker ID (marker group) for which the marker is to be written. n Event Id UINT Optional Event Id n Mark Ctrl UDINT Defines the marker type. 12.1.2.2 Log Mark Ex The method creates a marker. The marker is defined using the data type ST_RTMon_Mark Def [} 60]. The marker type is transferred using the parameter n Mark Ctrl (see Tc Mark Option [} 60]). Return value Name Type Description Log Mark Ex HRESULT Returns the error code in the event of an error. Inputs VAR_INPUT st Mark : ST_RTMon_Mark Def; n Mark Ctrl : UDINT; // mask for mark options (listed in Tc Mark Option) END_VAR TE1010 Version: 2.1.1 59

## Page 60

PLC API Name Type Description st Mark ST_RTMon_Mark Def [} 60] Transfer parameter for a defined marker that is to be written. n Mark Ctrl UDINT Defines the marker type. 12.2 Data types 12.2.1 ST_RTMon_Mark Def Data type that represents a marker. Using this data type, it is possible to define a generic marker (without type). This is then transferred in the method Log Mark Ex [} 59] of the function block FB_RTMon_Log Mark Base [} 58] in addition to the marker type. Syntax TYPE ST_RTMon_Mark Def: STRUCT n Context Id : UINT; n Group Id : UINT; n Event Id : UINT; END_STRUCT END_TYPE Parameter Value Description n Context Id Using the Context Id, marker groups, i.e. processes to be displayed, can be grouped (e.g. by process type or functional unit). n Group Id Defines the process/ process event to be displayed. n Event Id Optional user record. This can be used, for example, to display the state of a state machine or error codes in the Twin CAT 3 Realtime Monitor. You can assign names to both the Context Id and the Group Id in the Twin CAT 3 Realtime Monitor. You can export or import these via the functions Export User Context [} 43] or Import User Context [} 43] so that they are also available for further recording. 12.3 Global constants 12.3.1 Tc Mark Option The constants in this global variable list define the possible marker types (see Marker type [} 19]). In addition to the marker types, the option Ref To Caller is defined, which enables the task references to be displayed in the Twin CAT 3 Realtime Monitor. If this option is activated it must be ORed with the desired marker type. VAR_GLOBAL CONSTANT Start : UDINT := 16#E0000000; Stop : UDINT := 16#C0000000; Sequence Start : UDINT := 16#A0000000; Sequence Stop : UDINT := 16#80000000; Interval Start : UDINT := 16#60000000; Interval Stop : UDINT := 16#40000000; Ref To Caller : UDINT := 16#08000000; // reference to caller END_VAR Sample: fb Log Mark. Log Mark Ex(mark Counter, Tc Mark Option. Start OR Tc Mark Option. Ref To Caller); The sample shows the setting of a marker, "mark Counter", with the marker type "Start" and the option "Ref To Caller". 60 Version: 2.1.1 TE1010

## Page 61

PLC API If the task references are to be displayed in the Twin CAT 3 Realtime Monitor, you must activate the Show Task Reference option (see Marker group element [} 52]). TE1010 Version: 2.1.1 61

## Page 62

C++ API 13 C++ API 13.1 Data types 13.1.1 Tc Mark16 Data type that represents a marker. Using this data type, it is possible to define a generic marker (without type). Syntax typedef struct { USHORT Context Id; USHORT Group Id; USHORT Event Id; } Tc Mark16; Parameter Value Description Context Id Using the Context Id, marker groups, i.e. processes to be displayed, can be grouped (e.g. by process type or functional unit). Group Id Defines the process/ process event to be displayed. Event Id Optional user record. This can be used, for example, to display the state of a state machine or error codes in the Twin CAT 3 Realtime Monitor. Both the Context Id and the Group Id can be given names in the Twin CAT 3 Realtime Monitor. These can be exported or imported using the Export User Context [} 43] or Import User Context [} 43] functions, so that they are available for a further recording. 13.2 Classes 13.2.1 CTc Log Mark The class CTc Log Mark is a C++ class that makes it possible to set (time) markers from C++ application code so that they can be displayed with the Twin CAT 3 Realtime Monitor. CTc Log Mark(USHORT n Context Id, ITCom Object Server* ip Srv = NULL); 13.2.1.1 Log Interval Start The method creates a marker with an interval start for the transferred Marker ID. virtual HRESULT Log Interval Start(USHORT Group Id, USHORT Event Id); Parameter Value Description Group Id Marker ID (marker group) for which the marker is to be written. Event Id Optional event ID. 13.2.1.2 Log Interval Stop The method creates a marker with an interval stop for the transferred Marker ID. virtual HRESULT Log Interval Stop(USHORT Group Id, USHORT Event Id); 62 Version: 2.1.1 TE1010

## Page 63

C++ API Parameter Value Description Group Id Marker ID (marker group) for which the marker is to be written. Event Id Optional event ID. 13.2.1.3 Log Mark The method creates a marker for the transferred marker group ID. The marker type is transferred using the constants from Tc Log Mark.h (see Constants [} 64]). Optionally, the event ID can be used to distinguish between different user events or to display additional data (formatted as USHORT) in the Twin CAT 3 Realtime Monitor display. virtual HRESULT Log Mark(USHORT Group Id, USHORT Event Id, ULONG Ctrl Id); 13.2.1.4 Log Mark Ex The method creates a marker. The marker is defined using the data type Tc Mark16 [} 62]. The marker type is determined using the constants from Tc Log Mark.h (see Constants [} 64]). virtual HRESULT Log Mark Ex(Tc Mark16* p Mark, ULONG Ctrl Id); 13.2.1.5 Log Sequence Start The method creates a marker with a sequence start for the marker ID that was transferred. virtual HRESULT Log Sequence Start(USHORT Group Id, USHORT Event Id); 13.2.1.6 Log Sequence Stop The method creates a marker with a sequence stop for the marker ID that was transferred. virtual HRESULT Log Sequence Stop(USHORT Group Id, USHORT Event Id); 13.2.1.7 Log Start The method creates a marker with a sequence and interval start for the transferred marker ID. Thus, this marker represents the time of a process at which it is immediately active / started. virtual HRESULT Log Start(USHORT Group Id, USHORT Event Id); 13.2.1.8 Log Stop The method creates a marker with a sequence and interval stop for the transferred marker ID. Thus, this marker represents the point in time of a process at which it is terminated directly. virtual HRESULT Log Stop(USHORT Group Id, USHORT Event Id); 13.2.1.9 Set Context Id This method sets the context ID used. virtual void Set Context Id(USHORT n Context Id); 13.2.1.10 Init Log Mark Initializes the instance of the CTc Log marker class. virtual HRESULT Init Log Mark(ITCom Object Server* ip Srv); TE1010 Version: 2.1.1 63

## Page 64

C++ API Parameter Value Description ip Srv Interface pointer to the Tc Object Server. 13.2.1.11 Release Log Mark Releases the resources of the instance of the CTc Log Mark class. virtual HRESULT Release Log Mark(); 13.3 Constants These constants - defined in Tc Log Mark.h - define the possible marker types [} 19]. #define TCMARK_START 0x E0000000 #define TCMARK_STOP 0x C0000000 #define TCMARK_SEQ_START 0x A0000000 #define TCMARK_SEQ_STOP 0x80000000 #define TCMARK_IVAL_START 0x60000000 #define TCMARK_IVAL_STOP 0x40000000 #define TCMARK_REF_CALLER 0x08000000 64 Version: 2.1.1 TE1010

## Page 65

Support and Service 14 Support and Service Beckhoff and their partners around the world offer comprehensive support and service, making available fast and competent assistance with all questions related to Beckhoff products and system solutions. Download finder Our download finder contains all the files that we offer you for downloading. You will find application reports, technical documentation, technical drawings, configuration files and much more. The downloads are available in various formats. Beckhoff's branch offices and representatives Please contact your Beckhoff branch office or representative for local support and service on Beckhoff products! The addresses of Beckhoff's branch offices and representatives round the world can be found on our internet page: www.beckhoff.com You will also find further documentation for Beckhoff components there. Beckhoff Support Support offers you comprehensive technical assistance, helping you not only with the application of individual Beckhoff products, but also with other, wide-ranging services: • support • design, programming and commissioning of complex automation systems • and extensive training program for Beckhoff system components Hotline: +49 5246 963-157 e-mail: support@beckhoff.com Beckhoff Service The Beckhoff Service Center supports you in all matters of after-sales service: • on-site service • repair service • spare parts service • hotline service Hotline: +49 5246 963-460 e-mail: service@beckhoff.com Beckhoff Headquarters Beckhoff Automation Gmb H & Co. KG Huelshorstweg 20 33415 Verl Germany Phone: +49 5246 963-0 e-mail: info@beckhoff.com web: www.beckhoff.com TE1010 Version: 2.1.1 65

## Page 66

Trademark statements Beckhoff®, ATRO® , Ether CAT®, Ether CAT G®, Ether CAT G10®, Ether CAT P®, MX-System®, Safety over Ether CAT®, TC/BSD®, Twin CAT®, Twin CAT/BSD®, Twin SAFE®, XFC®, XPlanar®, and XTS® are registered and licensed trademarks of Beckhoff Automation Gmb H. Third-party trademark statements Intel, the Intel logo, Intel Core, Xeon, Intel Atom, Celeron and Pentium are trademarks of Intel Corporation or its subsidiaries. The registered trademark Linux® is used pursuant to a sublicense from the Linux Foundation, the exclusive licensee of Linus Torvalds, owner of the mark on a worldwide basis. Microsoft, Microsoft Azure, Microsoft Edge, Power Shell, Visual Studio, Windows and Xbox are trademarks of the Microsoft group of companies.

## Page 67

More Information: www.beckhoff.com/te1010 Beckhoff Automation Gmb H & Co. KG Hülshorstweg 20 33415 Verl Germany Phone: +49 5246 9630 info@beckhoff.com www.beckhoff.com
