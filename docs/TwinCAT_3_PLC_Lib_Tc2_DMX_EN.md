---
title: "TE1000 Twin CAT 3"
product: "TwinCAT"
category: "PLC"
tags: ["CAT", "PLC", "TWIN"]
language: "EN"
document_type: "Library"
version: "1.8.0"
source_pdf: "https://download.beckhoff.com/download/Document/automation/twincat3/TwinCAT_3_PLC_Lib_Tc2_DMX_EN.pdf"
release_date: "2025-05-08"
---
Manual | EN TE1000 Twin CAT 3 | PLC Library: Tc2_DMX 2025-05-08 | Version: 1.8.0
## Page 3

Table of contents Table of contents 1 Foreword.................................................................................................................................................... 5 1.1 Notes on the documentation............................................................................................................. 5 1.2 For your safety.................................................................................................................................. 6 1.3 Notes on information security............................................................................................................ 7 2 Introduction............................................................................................................................................... 8 3 DMX............................................................................................................................................................ 9 4 Programming........................................................................................................................................... 10 4.1 POUs............................................................................................................................................... 10 4.1.1 High Level........................................................................................................................ 10 4.1.2 Low Level......................................................................................................................... 13 4.1.3 Error codes....................................................................................................................... 61 4.2 DUTs............................................................................................................................................... 62 4.2.1 Enums.............................................................................................................................. 62 4.2.2 Structures......................................................................................................................... 68 4.3 Integration into Twin CAT................................................................................................................. 74 4.3.1 EL6851 with CX5120....................................................................................................... 74 5 Appendix.................................................................................................................................................. 79 5.1 Example: Configuration by RDM..................................................................................................... 79 5.2 Example: DMX master.................................................................................................................... 79 5.3 Example: DMX slave....................................................................................................................... 83 5.4 Support and Service........................................................................................................................ 86 TE1000 Version: 1.8.0 3
## Page 4

Table of contents 4 Version: 1.8.0 TE1000
## Page 5

Foreword 1 Foreword 1.1 Notes on the documentation This description is intended exclusively for trained specialists in control and automation technology who are familiar with the applicable national standards. The documentation and the following notes and explanations must be complied with when installing and commissioning the components. The trained specialists must always use the current valid documentation. The trained specialists must ensure that the application and use of the products described is in line with all safety requirements, including all relevant laws, regulations, guidelines, and standards. Disclaimer The documentation has been compiled with care. The products described are, however, constantly under development. We reserve the right to revise and change the documentation at any time and without notice. Claims to modify products that have already been supplied may not be made on the basis of the data, diagrams, and descriptions in this documentation. Trademarks Beckhoff®, Twin CAT®, Twin CAT/BSD®, TC/BSD®, Ether CAT®, Ether CAT G®, Ether CAT G10®, Ether CAT P®, Safety over Ether CAT®, Twin SAFE®, XFC®, XTS®, and XPlanar® are registered and licensed trademarks of Beckhoff Automation Gmb H. If third parties make use of the designations or trademarks contained in this publication for their own purposes, this could infringe upon the rights of the owners of the said designations. Ether CAT® is a registered trademark and patented technology, licensed by Beckhoff Automation Gmb H, Germany Copyright © Beckhoff Automation Gmb H & Co. KG, Germany. The distribution and reproduction of this document, as well as the use and communication of its contents without express authorization, are prohibited. Offenders will be held liable for the payment of damages. All rights reserved in the event that a patent, utility model, or design are registered. Third-party trademarks Trademarks of third parties may be used in this documentation. You can find the trademark notices here: https://www.beckhoff.com/trademarks. TE1000 Version: 1.8.0 5
## Page 6

Foreword 1.2 For your safety Safety regulations Read the following explanations for your safety. Always observe and follow product-specific safety instructions, which you may find at the appropriate places in this document. Exclusion of liability All the components are supplied in particular hardware and software configurations which are appropriate for the application. Modifications to hardware or software configurations other than those described in the documentation are not permitted, and nullify the liability of Beckhoff Automation Gmb H & Co. KG. Personnel qualification This description is only intended for trained specialists in control, automation, and drive technology who are familiar with the applicable national standards. Signal words The signal words used in the documentation are classified below. In order to prevent injury and damage to persons and property, read and follow the safety and warning notices. Personal injury warnings DANGER Hazard with high risk of death or serious injury. WARNING Hazard with medium risk of death or serious injury. CAUTION There is a low-risk hazard that could result in medium or minor injury. Warning of damage to property or environment NOTICE The environment, equipment, or data may be damaged. Information on handling the product This information includes, for example: recommendations for action, assistance or further information on the product. 6 Version: 1.8.0 TE1000
## Page 7

Foreword 1.3 Notes on information security The products of Beckhoff Automation Gmb H & Co. KG (Beckhoff), insofar as they can be accessed online, are equipped with security functions that support the secure operation of plants, systems, machines and networks. Despite the security functions, the creation, implementation and constant updating of a holistic security concept for the operation are necessary to protect the respective plant, system, machine and networks against cyber threats. The products sold by Beckhoff are only part of the overall security concept. The customer is responsible for preventing unauthorized access by third parties to its equipment, systems, machines and networks. The latter should be connected to the corporate network or the Internet only if appropriate protective measures have been set up. In addition, the recommendations from Beckhoff regarding appropriate protective measures should be observed. Further information regarding information security and industrial security can be found in our https://www.beckhoff.com/secguide. Beckhoff products and solutions undergo continuous further development. This also applies to security functions. In light of this continuous further development, Beckhoff expressly recommends that the products are kept up to date at all times and that updates are installed for the products once they have been made available. Using outdated or unsupported product versions can increase the risk of cyber threats. To stay informed about information security for Beckhoff products, subscribe to the RSS feed at https:// www.beckhoff.com/secinfo. TE1000 Version: 1.8.0 7
## Page 8

Introduction 2 Introduction The user of this library requires basic knowledge of the following: • Twin CAT XAE • PC and network knowledge • Structure and properties of the Beckhoff Embedded PC and its Bus Terminal system • Technology of DMX devices The Tc2_DMX library is usable on all hardware platforms that support Twin CAT 3.1 or higher. Hardware documentation for EL6851 in the Beckhoff Information System. 8 Version: 1.8.0 TE1000
## Page 9

DMX 3 DMX DMX is the standard protocol for controlling professional stage and effect lighting equipment, which is used, for example, for the dynamic lighting of showrooms and salesrooms as well as for exclusive plays of light and color in prestigious buildings, such as hotels and event centers. Color mixing and brightness values are transmitted to DMX devices that are static light sources, whilst moving sources of light additionally receive spatial coordinates. Ether CAT’s high data transfer rate enables light settings to be updated at a higher rate, with the result that changes of light and color are perceived by the eye as being more harmonious. The EL6851 can be used to control DMX devices with three axes, such as scanners, moving heads or spotlights. Twin CAT function blocks enable implementation of the RDM protocol (Remote Device Management) for internal diagnostics and parameterization in DMX. The DMX master transmits new settings to the slaves cyclically at 250 k Baud in order to generate dynamic lighting changes and plays of color. In the DMX protocol, a maximum of 32 slaves are allowed in one strand without repeaters. The 512 byte long frame in the DMX protocol is termed a ‘universe’. 512 channels are available in it, each of which represents a device setting with 8-bit resolution, i.e. in 256 steps, e.g. for dimming, color, focus etc. In the case of moving light sources, additional settings such as inclination, swiveling and speed (with 8-bit or 16-bit resolution) occupy additional channels, so that the 512 channels are only indirectly sufficient for 32 devices. Furthermore, if the universe is fully utilized a frame will require 22 ms for internal DMX circulation, which means a refresh rate of 44 Hz. Light changes at this frequency are perceived to be inharmonious. The transitions only appear to be harmonious from a frequency of >200 Hz. The circulation period can be shortened by reducing the amount of user data. The optimum has proven to be a utilization of 64 bytes (frequency >300 Hz), with which 64 channels are available per universe. The integration of several universes in a controller becomes simple with the EL6851: Ether CAT can transfer large amounts of data quickly, the Ether CAT protocol is retained until inside the terminal and the terminal supports various mapping sizes (64 to 512 bytes). Hence, if several master terminals are connected, each as its own universe, the time offset in transmitting from the controller to the master can be reduced significantly. TE1000 Version: 1.8.0 9
## Page 10

Programming 4 Programming 4.1 POUs 4.1.1 High Level 4.1.1.1 FB_DMXDiscovery This function block searches for up to 50 DMX devices and automatically sets the start address (optional). The most important information for the devices found is displayed in a structure. Inputs VAR_INPUT b Start : BOOL; dw Options : DWORD; END_VAR Name Type Description b Start BOOL The function block is activated by a positive edge at this input. dw Options DWORD Options (see table). The individual constants must be linked with OR operators. Constant Description DMX_OPTION_COMPLETE_NEW_DISCOVERY All DMX devices are taken into account. DMX_OPTION_SET_START_ADDRESS The start address is set for all DMX devices that are found. Consecutive, starting with 1. DMX_OPTION_OPTICAL_FEEDBACK When a DMX device is found, the function IDENTIFY_DEVICE is called for two seconds. Inputs/outputs VAR_IN_OUT st Command Buffer : ST_DMXCommand Buffer; END_VAR Name Type Description st Command Buffer ST_DMXCommand Buffer Reference to the structure for communication (buffer) with [} 68] the function block FB_EL6851Communication() [} 15] Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; udi Error Id : UDINT; uli Lower Bound Search UID : T_ULARGE_INTEGER; uli Upper Bound Search UID : T_ULARGE_INTEGER; arr DMXDevice Info List : ARRAY [1..50] OF ST_DMXDevice Info; 10 Version: 1.8.0 TE1000
## Page 11

Programming ui Next DMX512Start Address : UINT; i Found Devices : INT; END_VAR Name Type Description b Busy BOOL When the function block is activated the output is set, and it remains active until execution of the command has been completed. b Error BOOL This output is switched to TRUE as soon as an error occurs during the execution of a command. The command- specific error code is contained in udi Error Id. Only valid if b Busy is FALSE. udi Error Id UDINT Contains the command-specific error code of the most recently executed command. Only valid if b Busy is FALSE (see error codes [} 61]). uli Lower Bound Searc T_ULARGE_INTEGER During the search, the lower search address is sent to this h UID output. uli Upper Bound Searc T_ULARGE_INTEGER During the search, the upper search address is sent to this h UID output. arr DMXDevice Info Li ARRAY OF Array with the most important information of the found st ST_DMXDevice Info [} 69] DMX devices. ui Next DMX512Start UINT If the DMX_OPTION_SET_START_ADDRESS option is Address activated, then the start address that will be assigned to the next DMX device will be displayed at this output. i Found Devices INT During the search, the current number of devices found will be available at this output. Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 4.1.1.2 FB_DMXDiscovery512 This function block searches for up to 512 DMX devices and automatically sets the start address (optional). The most important information for the devices found is displayed in a structure. Inputs VAR_INPUT b Start : BOOL; dw Options : DWORD; END_VAR Name Type Description b Start BOOL The function block is activated by a positive edge at this input. dw Options DWORD Options (see table). The individual constants must be linked with OR operators. TE1000 Version: 1.8.0 11
## Page 12

Programming Constant Description DMX_OPTION_COMPLETE_NEW_DISCOVERY All DMX devices are taken into account. DMX_OPTION_SET_START_ADDRESS The start address is set for all DMX devices that are found. Consecutive, starting with 1. DMX_OPTION_OPTICAL_FEEDBACK When a DMX device is found, the function IDENTIFY_DEVICE is called for two seconds. Inputs/outputs VAR_IN_OUT st Command Buffer : ST_DMXCommand Buffer; END_VAR Name Type Description st Command Buffer ST_DMXCommand Buffer Reference to the structure for communication (buffer) with [} 68] the function block FB_EL6851Communication() [} 15] Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; udi Error Id : UDINT; uli Lower Bound Search UID : T_ULARGE_INTEGER; uli Upper Bound Search UID : T_ULARGE_INTEGER; arr DMXDevice Info List : ARRAY [1..512] OF ST_DMXDevice Info; ui Next DMX512Start Address : UINT; i Found Devices : INT; END_VAR Name Type Description b Busy BOOL When the function block is activated the output is set, and it remains active until execution of the command has been completed. b Error BOOL This output is switched to TRUE as soon as an error occurs during the execution of a command. The command- specific error code is contained in udi Error Id. Only valid if b Busy is FALSE. udi Error Id UDINT Contains the command-specific error code of the most recently executed command. Only valid if b Busy is FALSE (see error codes [} 61]). uli Lower Bound Searc T_ULARGE_INTEGER During the search, the lower search address is sent to this h UID output. uli Upper Bound Searc T_ULARGE_INTEGER During the search, the upper search address is sent to this h UID output. arr DMXDevice Info Li ARRAY OF Array with the most important information of the found st ST_DMXDevice Info [} 69] DMX devices. ui Next DMX512Start UINT If the DMX_OPTION_SET_START_ADDRESS option is Address activated, then the start address that will be assigned to the next DMX device will be displayed at this output. i Found Devices INT During the search, the current number of devices found will be available at this output. Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 12 Version: 1.8.0 TE1000
## Page 13

Programming 4.1.2 Low Level 4.1.2.1 Base 4.1.2.1.1 FB_DMXSend RDMCommand This function block is for the general sending of a RDM command, defined by command number and, if necessary, transfer parameter. Inputs VAR_INPUT b Start : BOOL; w Destination Manufacturer Id : WORD; dw Destination Device Id : DWORD; by Port Id : BYTE; w Sub Device : WORD; e Command Class : E_DMXCommand Class; e Parameter Id : E_DMXParameter Id; by Parameter Data Length : BYTE; arr Parameter Data : ARRAY [0..255] OF BYTE; dw Options : DWORD := 0; END_VAR TE1000 Version: 1.8.0 13
## Page 14

Programming Name Type Description b Start BOOL The function block is activated by a positive edge at this input. w Destination Manufa WORD Unique manufacturer Id of the DMX device. cturer Id dw Destination Devic DWORD Unique device Id of the DMX device. e Id by Port Id BYTE Channel within the addressed DMX device. Sub-devices are addressed through the Port Id. The root device always has the Port Id 0. w Sub Device WORD Sub-devices should be used in devices with a recurring number of modules, such as a dimmer rack. The sub- devices input enables parameter messages to be sent to a particular module within the device, in order to read or set module properties. e Command Class E_DMXCommand Class Command Class (CC) indicates the message action (see E_DMXCommand Class). [} 62] e Parameter Id E_DMXParameter Id Parameter Id is a 16-bit number, which identifies a particular type of parameter data (see [} 63] E_DMXParameter Id). by Parameter Data Le BYTE The parameter data length (PDL) is the preceding number ngth of slots, included in the parameter data area. If this input is 0x00, there is no parameter data to follow. arr Parameter Data ARRAY OF BYTE Parameter data of variable length. The format of the content depends on the PID. dw Options DWORD Options (currently not used). Inputs/outputs VAR_IN_OUT st Command Buffer : ST_DMXCommand Buffer; END_VAR Name Type Description st Command Buffer ST_DMXCommand Buffer Reference to the structure for communication (buffer) with [} 68] the function block FB_EL6851Communication() [} 15] Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; udi Error Id : UDINT; by Response Message Count : BYTE; by Response Data Length : BYTE; arr Response Data : ARRAY [0..255] OF BYTE; END_VAR 14 Version: 1.8.0 TE1000
## Page 15

Programming Name Type Description b Busy BOOL When the function block is activated the output is set, and it remains active until execution of the command has been completed. b Error BOOL This output is switched to TRUE as soon as an error occurs during the execution of a command. The command- specific error code is contained in udi Error Id. Only valid if b Busy is FALSE. udi Error Id UDINT Contains the command-specific error code of the most recently executed command. Only valid if b Busy is FALSE (see error codes [} 61]). by Response Messag BYTE This output indicates that the DMX slave contains further e Count messages. The RDM command Get: QUEUES_MESSAG is used to read these messages. by Response Data Le BYTE Contains the number of bytes returned by the RDM ngth command. arr Response Data ARRAY OF BYTE This output contains the data of the response from the RDM command. The length is variable, and the data format depends on the RDM command. Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 4.1.2.1.2 FB_EL6851Communication Outdated This function block is outdated. Use FB_EL6851Communication Ex() [} 18] instead. The EL6851 should always be accessed via this function block. This applies both to the transmission of the cyclic DMX data and to the transmission of the RDM commands. If data is to be transmitted cyclically to the DMX devices, then set the b Enable Sending Data input to TRUE, the b Set Cycle Mode input to TRUE, the b Send Default Data input to FALSE and the ui Data Length input to the corresponding length (in bytes). The data to be transmitted can be specified via the arr Process Data variable. If RDM commands are to be transmitted, then set the b Enable Sending Data input to FALSE and the b Set Cycle Mode input to FALSE. The function blocks for the DMX/RDM commands do not directly access the EL6851 process image, but store the individual DMX/RDM commands in a buffer instead. The function block FB_EL6851Communication() reads the commands sequentially from this buffer and forwards them to the EL6851. This prevents multiple function blocks accessing the EL6851 process image at the same time. The buffer in which the DMX/RDM commands are stored is contained in a variable of type ST_DMXCommand Buffer. There is one instance of the function block FB_EL6851Communication() and one variable of type ST_DMXCommand Buffer per EL6851. TE1000 Version: 1.8.0 15
## Page 16

Programming The extent to which the buffer is utilized can be determined from the outputs of the function block. If the buffer is regularly overflowing, you should analyze the level of utilization of the PLC task with the aid of the Twin CAT System Manager. The function block FB_EL6851Communication() can be called in a separate faster task, if necessary. In this case, the faster task in which the FB_EL6851Communication() block is called should have a higher priority than the TASK in which the block for the RDM commands is called. Examples for both operation modes can be found in the appendix. Remarks concerning the IDs of DMX devices Each DMX device has a unique, fixed, 48-bit long address, also called Unique ID or UID for short. This address is composed of the manufacturer ID (16-bit) and the device ID (32-bit). The manufacturer ID identifies the manufacturer of the device and is issued by the ESTA (Entertainment Services and Technology Association). A list of all known manufacturer IDs can be found at http://www.esta.org/tsp/working_groups/ CP/mfctr IDs.php. The device ID is freely specified by the manufacturer. This is intended to ensure that each UID exists only once worldwide. The UID cannot normally be changed. The ESTA has given Beckhoff Automation the manufacturer ID 0x4241. Since the DMX master also has a UID, this should be specified in accordance with the ESTA (w Source Manufacturer Id input). Inputs VAR_INPUT w Source Manufacturer Id : WORD := 16#42_41; dw Source Device Id : DWORD := 16#12_13_14_15; b Enable Sending Data : BOOL := TRUE; b Set Cycle Mode : BOOL := TRUE; b Send Default Data : BOOL; ui Data Length : UINT; dw Options : DWORD; END_VAR Name Type Description w Source Manufactur WORD Unique manufacturer Id of the DMX device. Should be er Id 0x4241 according to the ESTA. dw Source Device Id DWORD Unique device Id of the DMX device. Can be freely assigned. b Enable Sending Dat BOOL If the terminal is in Cycle Mode (Cycle Mode output = a TRUE), then transmission can be activated (TRUE) or blocked (FALSE) with this function block. b Set Cycle Mode BOOL Activates the Cycle Mode. The cyclic process data can be transmitted to the DMX devices in Cycle Mode. Cycle Mode must be disabled in order to transmit the RDM/DMX commands. b Send Default Data BOOL The default values will be transmitted in Cycle Mode if this input is active (TRUE). ui Data Length UINT This input is only relevant if Cycle Mode is active. It indicates the length of the DMX512 frame in bytes. dw Options DWORD Options (currently not used). Inputs/outputs VAR_IN_OUT st EL6851In Data : ST_EL6851In Data; st EL6851Out Data : ST_EL6851Out Data; st Command Buffer : ST_DMXCommand Buffer; arr Process Data : ARRAY [1..512] OF BYTE; END_VAR 16 Version: 1.8.0 TE1000
## Page 17

Programming Name Type Description st EL6851In Data ST_EL6851In Data [} 73] Structure in the EL6851 input process image. It is used for communication from the EL6851 to the PLC. st EL6851Out Data ST_EL6851Out Data [} 73] Structure in the EL6851 output process image. It is used for communication from the PLC to the EL6851. st Command Buffer ST_DMXCommand Buffer Reference to the structure for communication (buffer) with [} 68] the function block FB_EL6851Communication() [} 15] arr Process Data ARRAY OF BYTE The data that are to be transmitted cyclically to the DMX devices are transferred to the function block via this variable. For this the Cycle Mode must be active (see also input b Set Cycle Mode). Outputs VAR_OUTPUT b Error : BOOL; udi Error Id : UDINT; b Cycle Mode : BOOL; by Buffer Demand Meter : BYTE; by Buffer Maximum Demand Meter : BYTE; ui Buffer Overflow Counter : UINT; b Line Is Busy : BOOL; END_VAR Name Type Description b Error BOOL This output is switched to TRUE as soon as an error occurs during the execution of a command. The command- specific error code is contained in udi Error Id. Only valid if b Busy is FALSE. udi Error Id UDINT Contains the command-specific error code of the most recently executed command. Only valid if b Busy is FALSE (see error codes [} 61]). b Cycle Mode BOOL Is TRUE if Cycle Mode is active (see also b Set Cycle Mode input). by Buffer Demand Met BYTE Demand of the respective buffer (0 - 100%). er by Buffer Maximum D BYTE Previous maximum demand of the respective buffer (0 - emand Meter 100%). ui Buffer Overflow Cou UINT Number of buffer overflows to date. nter b Line Is Busy BOOL This output is set as long as the FB_EL6851Communication() block is processing DMX/ RDM commands. Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 TE1000 Version: 1.8.0 17
## Page 18

Programming 4.1.2.1.3 FB_EL6851Communication Ex The EL6851 should always be accessed via this function block. This applies both to the transmission of the cyclic DMX data and to the transmission of the RDM commands. If data is to be transmitted cyclically to the DMX devices, then set the b Enable Sending Data input to TRUE, the b Set Cycle Mode input to TRUE, the b Send Default Data input to FALSE and the ui Data Length input to the corresponding length (in bytes). The data to be transmitted can be specified via the arr Process Data variable. If RDM commands are to be transmitted, then set the b Enable Sending Data input to FALSE and the b Set Cycle Mode input to FALSE. The function blocks for the DMX/RDM commands do not directly access the EL6851 process image, but store the individual DMX/RDM commands in a buffer instead. The function block FB_EL6851Communication Ex() reads the commands sequentially from this buffer and forwards them to the EL6851. This prevents multiple function blocks accessing the EL6851 process image at the same time. The buffer in which the DMX/RDM commands are stored is contained in a variable of type ST_DMXCommand Buffer. There is one instance of the function block FB_EL6851Communication Ex() and one variable of type ST_DMXCommand Buffer per EL6851. The extent to which the buffer is utilized can be determined from the outputs of the function block. If the buffer is regularly overflowing, you should analyze the level of utilization of the PLC task with the aid of the Twin CAT System Manager. The function block FB_EL6851Communication Ex() can be called in a separate faster task, if necessary. In this case, the faster task in which the function block FB_EL6851Communication Ex() is called should have a higher priority than the TASK in which the function block for the RDM commands is called. Examples for both operation modes can be found in the appendix. Remarks concerning the IDs of DMX devices Each DMX device has a unique, fixed, 48-bit long address, also called Unique ID or UID for short. This address is composed of the manufacturer ID (16-bit) and the device ID (32-bit). The manufacturer ID identifies the manufacturer of the device and is issued by the ESTA (Entertainment Services and Technology Association). A list of all known manufacturer IDs can be found at http://www.esta.org/tsp/working_groups/ CP/mfctr IDs.php. The device ID is freely specified by the manufacturer. This is intended to ensure that each UID exists only once worldwide. The UID cannot normally be changed. The ESTA has given Beckhoff Automation the manufacturer ID 0x4241. Since the DMX master also has a UID, this should be specified in accordance with the ESTA (w Source Manufacturer Id input). Inputs VAR_INPUT w Source Manufacturer Id : WORD := 16#42_41; dw Source Device Id : DWORD := 16#12_13_14_15; b Enable Sending Data : BOOL := TRUE; b Set Cycle Mode : BOOL := TRUE; b Send Default Data : BOOL; ui Data Length : UINT; dw Options : DWORD; END_VAR 18 Version: 1.8.0 TE1000
## Page 19

Programming Name Type Description w Source Manufactur WORD Unique manufacturer Id of the DMX device. Should be er Id 0x4241 according to the ESTA. dw Source Device Id DWORD Unique device Id of the DMX device. Can be freely assigned. b Enable Sending Dat BOOL If the terminal is in Cycle Mode (Cycle Mode output = a TRUE), then transmission can be activated (TRUE) or blocked (FALSE) with this function block. b Set Cycle Mode BOOL Activates the Cycle Mode. The cyclic process data can be transmitted to the DMX devices in Cycle Mode. Cycle Mode must be disabled in order to transmit the RDM/DMX commands. b Send Default Data BOOL The default values will be transmitted in Cycle Mode if this input is active (TRUE). ui Data Length UINT This input is only relevant if Cycle Mode is active. It indicates the length of the DMX512 frame in bytes. dw Options DWORD Options (currently not used). Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 Inputs/outputs VAR_IN_OUT st EL6851In Data : ST_EL6851In Data; st EL6851Out Data : ST_EL6851Out Data; st Command Buffer : ST_DMXCommand Buffer; arr Process Data : ARRAY [1..512] OF BYTE; END_VAR Name Type Description st EL6851In Data ST_EL6851In Data [} 73] Structure in the EL6851 input process image. It is used for communication from the EL6851 to the PLC. st EL6851Out Data ST_EL6851Out Data [} 73] Structure in the EL6851 output process image. It is used for communication from the PLC to the EL6851. st Command Buffer ST_DMXCommand Buffer Reference to the structure for communication (buffer) with [} 68] the function block FB_EL6851Communication() [} 15] arr Process Data ARRAY OF BYTE The data that are to be transmitted cyclically to the DMX devices are transferred to the function block via this variable. For this the Cycle Mode must be active (see also input b Set Cycle Mode). Outputs VAR_OUTPUT b Error : BOOL; udi Error Id : UDINT; b Cycle Mode : BOOL; by Buffer Demand Meter : BYTE; by Buffer Maximum Demand Meter : BYTE; ui Buffer Overflow Counter : UINT; b Line Is Busy : BOOL; END_VAR TE1000 Version: 1.8.0 19
## Page 20

Programming Name Type Description b Error BOOL This output is switched to TRUE as soon as an error occurs during the execution of a command. The command- specific error code is contained in udi Error Id. Only valid if b Busy is FALSE. udi Error Id UDINT Contains the command-specific error code of the most recently executed command. Only valid if b Busy is FALSE (see error codes [} 61]). b Cycle Mode BOOL Is TRUE if Cycle Mode is active (see also b Set Cycle Mode input). by Buffer Demand Met BYTE Demand of the respective buffer (0 - 100%). er by Buffer Maximum D BYTE Previous maximum demand of the respective buffer (0 - emand Meter 100%). ui Buffer Overflow Cou UINT Number of buffer overflows to date. nter b Line Is Busy BOOL This output is set as long as the FB_EL6851Communication() block is processing DMX/ RDM commands. 4.1.2.2 Device Control Parameter Message 4.1.2.2.1 FB_DMXGet Identify Device This function block queries whether or not the identification of a DMX device is active. Applying a positive edge to the b Start input starts the function block, and the b Busy output goes TRUE. The w Destination Manufacturer Id and dw Destination Device Id inputs address the DMX device. The by Port Id input defines the channel within the addressed DMX device. If the execution of the command has been completed, the b Busy output goes back to FALSE. The outputs b Error, udi Error Id and b Identify Active can now be evaluated. Further positive edges at the b Start input will be ignored as long as the function block is active (b Busy is TRUE). Inputs VAR_INPUT b Start : BOOL; w Destination Manufacturer Id : WORD; dw Destination Device Id : DWORD; by Port Id : BYTE; dw Options : DWORD := 0; END_VAR 20 Version: 1.8.0 TE1000
## Page 21

Programming Name Type Description b Start BOOL The function block is activated by a positive edge at this input. w Destination Manufa WORD Unique manufacturer Id of the DMX device (for details, see cturer Id DMX device address). dw Destination Devic DWORD Unique device Id of the DMX device (for details, see DMX e Id device address). by Port Id BYTE Channel within the addressed DMX device. Sub-devices are addressed through the Port Id. The root device always has the Port Id 0. dw Options DWORD Options (currently not used). Inputs/outputs VAR_IN_OUT st Command Buffer : ST_DMXCommand Buffer; END_VAR Name Type Description st Command Buffer ST_DMXCommand Buffer Reference to the structure for communication (buffer) with [} 68] the function block FB_EL6851Communication() [} 15] Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; udi Error Id : UDINT; b Identify Active : BOOL; END_VAR Name Type Description b Busy BOOL When the function block is activated the output is set, and it remains active until execution of the command has been completed. b Error BOOL This output is switched to TRUE as soon as an error occurs during the execution of a command. The command- specific error code is contained in udi Error Id. Only valid if b Busy is FALSE. udi Error Id UDINT Contains the command-specific error code of the most recently executed command. Only valid if b Busy is FALSE (see error codes [} 61]). b Identify Active BOOL If the execution of the command has been completed (b Busy is FALSE), then the state of identification of the DMX device is displayed at this output. Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 TE1000 Version: 1.8.0 21
## Page 22

Programming 4.1.2.2.2 FB_DMXSet Identify Device This function block activates or deactivates the identification of a DMX device. Applying a positive edge to the b Start input starts the function block, and the b Busy output goes TRUE. The w Destination Manufacturer Id and dw Destination Device Id inputs address the DMX device. The by Port Id input defines the channel within the addressed DMX device. If the execution of the command has been completed, the b Busy output goes back to FALSE. The outputs b Error and udi Error Id can now be evaluated. Further positive edges at the b Start input will be ignored as long as the function block is active (b Busy is TRUE). Inputs VAR_INPUT b Start : BOOL; w Destination Manufacturer Id : WORD; dw Destination Device Id : DWORD; by Port Id : BYTE; b Identify : BOOL := FALSE; dw Options : DWORD := 0; END_VAR Name Type Description b Start BOOL The function block is activated by a positive edge at this input. w Destination Manufa WORD Unique manufacturer Id of the DMX device. cturer Id dw Destination Devic DWORD Unique device Id of the DMX device. e Id by Port Id BYTE Channel within the addressed DMX device. Sub-devices are addressed through the Port Id. The root device always has the Port Id 0. b Identify BOOL This specifies whether the identification is to be activated (TRUE) or deactivated (FALSE). dw Options DWORD Options (currently not used). Inputs/outputs VAR_IN_OUT st Command Buffer : ST_DMXCommand Buffer; END_VAR Name Type Description st Command Buffer ST_DMXCommand Buffer Reference to the structure for communication (buffer) with [} 68] the function block FB_EL6851Communication() [} 15] Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; udi Error Id : UDINT; END_VAR 22 Version: 1.8.0 TE1000
## Page 23

Programming Name Type Description b Busy BOOL When the function block is activated the output is set, and it remains active until execution of the command has been completed. b Error BOOL This output is switched to TRUE as soon as an error occurs during the execution of a command. The command- specific error code is contained in udi Error Id. Only valid if b Busy is FALSE. udi Error Id UDINT Contains the command-specific error code of the most recently executed command. Only valid if b Busy is FALSE (see error codes [} 61]). Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 4.1.2.2.3 FB_DMXSet Reset Device This function block activates a reset in a DMX device. Applying a positive edge to the b Start input starts the function block, and the b Busy output goes TRUE. The w Destination Manufacturer Id and dw Destination Device Id inputs address the DMX device. The by Port Id input defines the channel within the addressed DMX device. If the execution of the command has been completed, the b Busy output goes back to FALSE. The outputs b Error and udi Error Id can now be evaluated. Further positive edges at the b Start input will be ignored as long as the function block is active (b Busy is TRUE). Inputs VAR_INPUT b Start : BOOL; w Destination Manufacturer Id : WORD; dw Destination Device Id : DWORD; by Port Id : BYTE; e Reset Device Type : E_DMXReset Device Type := e DMXReset Device Type Warm; dw Options : DWORD := 0; END_VAR TE1000 Version: 1.8.0 23
## Page 24

Programming Name Type Description b Start BOOL The function block is activated by a positive edge at this input. w Destination Manufa WORD Unique manufacturer Id of the DMX device. cturer Id dw Destination Devic DWORD Unique device Id of the DMX device. e Id by Port Id BYTE Channel within the addressed DMX device. Sub-devices are addressed through the Port Id. The root device always has the Port Id 0. e Reset Device Type E_DMXReset Device Type This specifies whether a warm start (e DMXReset Device Type Warm) or a cold start [} 65] (e DMXReset Device Type Cold) is to be performed. No other values are possible for this input. dw Options DWORD Options (currently not used). Inputs/outputs VAR_IN_OUT st Command Buffer : ST_DMXCommand Buffer; END_VAR Name Type Description st Command Buffer ST_DMXCommand Buffer Reference to the structure for communication (buffer) with [} 68] the function block FB_EL6851Communication() [} 15] Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; udi Error Id : UDINT; END_VAR Name Type Description b Busy BOOL When the function block is activated the output is set, and it remains active until execution of the command has been completed. b Error BOOL This output is switched to TRUE as soon as an error occurs during the execution of a command. The command- specific error code is contained in udi Error Id. Only valid if b Busy is FALSE. udi Error Id UDINT Contains the command-specific error code of the most recently executed command. Only valid if b Busy is FALSE (see error codes [} 61]). Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 24 Version: 1.8.0 TE1000
## Page 25

Programming 4.1.2.3 Discovery Messages 4.1.2.3.1 FB_DMXDisc Mute This function block sets the mute flag of a DMX device. The mute flag specifies whether a DMX device reacts to the FB_DMXDisc Unique Branch() [} 26] command (mute flag is not set) or not (mute flag is set). Applying a positive edge to the b Start input starts the function block, and the b Busy output goes TRUE. The w Destination Manufacturer Id and dw Destination Device Id inputs address the DMX device. The by Port Id input defines the channel within the addressed DMX device. If the execution of the command has been completed, the b Busy output goes back to FALSE. The outputs b Error, udi Error Id and w Control Field can now be evaluated. Further positive edges at the b Start input will be ignored as long as the function block is active (b Busy is TRUE). Inputs VAR_INPUT b Start : BOOL; w Destination Manufacturer Id : WORD; dw Destination Device Id : DWORD; by Port Id : BYTE; dw Options : DWORD := 0; END_VAR Name Type Description b Start BOOL The function block is activated by a positive edge at this input. w Destination Manufa WORD Unique manufacturer Id of the DMX device (for details, see cturer Id DMX device address). dw Destination Devic DWORD Unique device Id of the DMX device (for details, see DMX e Id device address). by Port Id BYTE Channel within the addressed DMX device. Sub-devices are addressed through the Port Id. The root device always has the Port Id 0. dw Options DWORD Options (currently not used). Inputs/outputs VAR_IN_OUT st Command Buffer : ST_DMXCommand Buffer; END_VAR Name Type Description st Command Buffer ST_DMXCommand Buffer Reference to the structure for communication (buffer) with [} 68] the function block FB_EL6851Communication() [} 15] Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; udi Error Id : UDINT; w Control Field : WORD; END_VAR TE1000 Version: 1.8.0 25
## Page 26

Programming Name Type Description b Busy BOOL When the function block is activated the output is set, and it remains active until execution of the command has been completed. b Error BOOL This output is switched to TRUE as soon as an error occurs during the execution of a command. The command- specific error code is contained in udi Error Id. Only valid if b Busy is FALSE. udi Error Id UDINT Contains the command-specific error code of the most recently executed command. Only valid if b Busy is FALSE (see error codes [} 61]). w Control Field WORD If the execution of the command has been completed (b Busy is FALSE), then further information about the DMX device will be available at this output. The meaning of the individual bits is defined as follows (see table): Bit Description 0 - Managed Proxy Flag This bit is set if the DMX device is a proxy device. 1 - Sub-Device Flag This bit is set if the DMX device supports sub- devices. 2 - Boot-Loader Flag This bit is set if the DMX device cannot receive any commands (e.g. whilst the firmware is being loaded). 3 - Proxied Device Flag This bit is set if the response was transmitted by a proxy device. 4 - 15 Reserve (always 0). Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 4.1.2.3.2 FB_DMXDisc Unique Branch This function block queries whether DMX devices are located within a certain address range. This command is used for the discovery of the connected DMX devices. Applying a positive edge to the b Start input starts the function block, and the b Busy output goes TRUE. The inputs w Lower Bound Manufacturer Id, dw Lower Bound Device Id, w Upper Bound Manufacturer Id and dw Upper Bound Device Id define the address range in which DMX devices are searched. The by Port Id input defines the channel within the addressed DMX device. If the execution of the command has been completed, the b Busy output goes back to FALSE. The outputs b Error, udi Error Id, w Received Manufacturer Id and dw Received Device Id can now be evaluated. Further positive edges at the b Start input will be ignored as long as the function block is active (b Busy is TRUE). If there is only one DMX device in the defined address range, then the 48-bit UID of the DMX device will be returned via the outputs w Received Manufacturer Id and dw Received Device Id. If no DMX devices are found in this range, the output b Error is TRUE and udi Error Id is 0x8002 (no response from DMX device). If there are two or more DMX devices in the address range, b Error is TRUE and udi Error contains a 0x8006 (checksum error). 26 Version: 1.8.0 TE1000
## Page 27

Programming Inputs VAR_INPUT b Start : BOOL; by Port Id : BYTE; w Lower Bound Manufacturer Id : WORD; dw Lower Bound Device Id : DWORD; w Upper Bound Manufacturer Id : WORD; dw Upper Bound Device Id : DWORD; dw Options : DWORD := 0; END_VAR Name Type Description b Start BOOL The function block is activated by a positive edge at this input. by Port Id BYTE Channel within the addressed DMX device. Sub-devices are addressed through the Port Id. The root device always has the Port Id 0. w Lower Bound Manuf WORD Unique manufacturer Id from the lower address range. acturer Id dw Lower Bound Devi DWORD Unique device Id from the lower address range. ce Id w Upper Bound Manuf WORD Unique manufacturer Id from the upper address range. acturer Id dw Upper Bound Devi DWORD Unique device Id from upper address range. ce Id dw Options DWORD Options (currently not used). Inputs/outputs VAR_IN_OUT st Command Buffer : ST_DMXCommand Buffer; END_VAR Name Type Description st Command Buffer ST_DMXCommand Buffer Reference to the structure for communication (buffer) with [} 68] the function block FB_EL6851Communication() [} 15] Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; udi Error Id : UDINT; w Received Manufacturer Id : WORD; dw Received Device Id : DWORD; END_VAR TE1000 Version: 1.8.0 27
## Page 28

Programming Name Type Description b Busy BOOL When the function block is activated the output is set, and it remains active until execution of the command has been completed. b Error BOOL This output is switched to TRUE as soon as an error occurs during the execution of a command. The command- specific error code is contained in udi Error Id. Only valid if b Busy is FALSE. udi Error Id UDINT Contains the command-specific error code of the most recently executed command. Only valid if b Busy is FALSE (see error codes [} 61]). w Received Manufact WORD If the execution of the command has been completed urer Id (b Busy is FALSE), then the state of identification of the DMX device is displayed at this output. dw Received Device I DWORD If the execution of the command has been completed d (b Busy is FALSE), then the state of identification of the DMX device is displayed at this output. Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 4.1.2.3.3 FB_DMXDisc Un Mute This function block resets the mute flag of a DMX device. The mute flag specifies whether a DMX device reacts to the FB_DMXDisc Unique Branch() [} 26] command (mute flag is not set) or not (mute flag is set). Applying a positive edge to the b Start input starts the function block, and the b Busy output goes TRUE. The w Destination Manufacturer Id and dw Destination Device Id inputs address the DMX device. The by Port Id input defines the channel within the addressed DMX device. If the execution of the command has been completed, the b Busy output goes back to FALSE. The outputs b Error, udi Error Id and w Control Field can now be evaluated. Further positive edges at the b Start input will be ignored as long as the function block is active (b Busy is TRUE). Inputs VAR_INPUT b Start : BOOL; w Destination Manufacturer Id : WORD; dw Destination Device Id : DWORD; by Port Id : BYTE; dw Options : DWORD := 0; END_VAR 28 Version: 1.8.0 TE1000
## Page 29

Programming Name Type Description b Start BOOL The function block is activated by a positive edge at this input. w Destination Manufa WORD Unique manufacturer Id of the DMX device (for details, see cturer Id DMX device address). dw Destination Devic DWORD Unique device Id of the DMX device (for details, see DMX e Id device address). by Port Id BYTE Channel within the addressed DMX device. Sub-devices are addressed through the Port Id. The root device always has the Port Id 0. dw Options DWORD Options (currently not used). Inputs/outputs VAR_IN_OUT st Command Buffer : ST_DMXCommand Buffer; END_VAR Name Type Description st Command Buffer ST_DMXCommand Buffer Reference to the structure for communication (buffer) with [} 68] the function block FB_EL6851Communication() [} 15] Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; udi Error Id : UDINT; w Control Field : WORD; END_VAR Name Type Description b Busy BOOL When the function block is activated the output is set, and it remains active until execution of the command has been completed. b Error BOOL This output is switched to TRUE as soon as an error occurs during the execution of a command. The command- specific error code is contained in udi Error Id. Only valid if b Busy is FALSE. udi Error Id UDINT Contains the command-specific error code of the most recently executed command. Only valid if b Busy is FALSE (see error codes [} 61]). w Control Field WORD If the execution of the command has been completed (b Busy is FALSE), then further information about the DMX device will be available at this output. The meaning of the individual bits is defined as follows (see table): Bit Description 0 - Managed Proxy Flag This bit is set if the DMX device is a proxy device. 1 - Sub-Device Flag This bit is set if the DMX device supports sub- devices. 2 - Boot-Loader Flag This bit is set if the DMX device cannot receive any commands (e.g. whilst the firmware is being loaded). 3 - Proxied Device Flag This bit is set if the response was transmitted by a proxy device. 4 - 15 Reserve (always 0). TE1000 Version: 1.8.0 29
## Page 30

Programming Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 4.1.2.4 Power and Lamp Setting Parameter Messages 4.1.2.4.1 FB_DMXGet Lamp Hours This function block reads the number of hours in which the lamp was on. The function block FB_DMXSet Lamp Hours() [} 32] can be used to edit the hour counter. Inputs VAR_INPUT b Start : BOOL; w Destination Manufacturer Id : WORD; dw Destination Device Id : DWORD; by Port Id : BYTE; dw Options : DWORD := 0; END_VAR Name Type Description b Start BOOL The function block is activated by a positive edge at this input. w Destination Manufa WORD Unique manufacturer Id of the DMX device (for details, see cturer Id DMX device address). dw Destination Devic DWORD Unique device Id of the DMX device (for details, see DMX e Id device address). by Port Id BYTE Channel within the addressed DMX device. Sub-devices are addressed through the Port Id. The root device always has the Port Id 0. dw Options DWORD Options (currently not used). Inputs/outputs VAR_IN_OUT st Command Buffer : ST_DMXCommand Buffer; END_VAR Name Type Description st Command Buffer ST_DMXCommand Buffer Reference to the structure for communication (buffer) with [} 68] the function block FB_EL6851Communication() [} 15] Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; udi Error Id : UDINT; udi Lamp Hours : UDINT; END_VAR 30 Version: 1.8.0 TE1000
## Page 31

Programming Name Type Description b Busy BOOL When the function block is activated the output is set, and it remains active until execution of the command has been completed. b Error BOOL This output is switched to TRUE as soon as an error occurs during the execution of a command. The command- specific error code is contained in udi Error Id. Only valid if b Busy is FALSE. udi Error Id UDINT Contains the command-specific error code of the most recently executed command. Only valid if b Busy is FALSE (see error codes [} 61]). udi Lamp Hours UDINT Number of hours in which the lamp was switched on. Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 4.1.2.4.2 FB_DMXGet Lamp On Mode This function block reads the parameter that defines the switch-on behavior of the DMX device. The function block FB_DMXSet Lamp On Mode() [} 33] can be used to edit the value. Inputs VAR_INPUT b Start : BOOL; w Destination Manufacturer Id : WORD; dw Destination Device Id : DWORD; by Port Id : BYTE; dw Options : DWORD := 0; END_VAR Name Type Description b Start BOOL The function block is activated by a positive edge at this input. w Destination Manufa WORD Unique manufacturer Id of the DMX device (for details, see cturer Id DMX device address). dw Destination Devic DWORD Unique device Id of the DMX device (for details, see DMX e Id device address). by Port Id BYTE Channel within the addressed DMX device. Sub-devices are addressed through the Port Id. The root device always has the Port Id 0. dw Options DWORD Options (currently not used). Inputs/outputs VAR_IN_OUT st Command Buffer : ST_DMXCommand Buffer; END_VAR TE1000 Version: 1.8.0 31
## Page 32

Programming Name Type Description st Command Buffer ST_DMXCommand Buffer Reference to the structure for communication (buffer) with [} 68] the function block FB_EL6851Communication() [} 15] Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; udi Error Id : UDINT; e Lamp On Mode : E_DMXLamp On Mode; END_VAR Name Type Description b Busy BOOL When the function block is activated the output is set, and it remains active until execution of the command has been completed. b Error BOOL This output is switched to TRUE as soon as an error occurs during the execution of a command. The command- specific error code is contained in udi Error Id. Only valid if b Busy is FALSE. udi Error Id UDINT Contains the command-specific error code of the most recently executed command. Only valid if b Busy is FALSE (see error codes [} 61]). e Lamp On Mode E_DMXLamp On Mode Contains the current parameter that defines the switch-on behavior of the DMX device. [} 62] Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 4.1.2.4.3 FB_DMXSet Lamp Hours This function block sets the operating hours counter for the lamp. The function block FB_DMXGet Lamp Hours() [} 30] can be used to read the counter. Inputs VAR_INPUT b Start : BOOL; w Destination Manufacturer Id : WORD; dw Destination Device Id : DWORD; by Port Id : BYTE; udi Lamp Hours : UDINT := 0; dw Options : DWORD := 0; END_VAR 32 Version: 1.8.0 TE1000
## Page 33

Programming Name Type Description b Start BOOL The function block is activated by a positive edge at this input. w Destination Manufa WORD Unique manufacturer Id of the DMX device. cturer Id dw Destination Devic DWORD Unique device Id of the DMX device. e Id by Port Id BYTE Channel within the addressed DMX device. Sub-devices are addressed through the Port Id. The root device always has the Port Id 0. udi Lamp Hours UDINT New value for the operating hours counter. dw Options DWORD Options (currently not used). Inputs/outputs VAR_IN_OUT st Command Buffer : ST_DMXCommand Buffer; END_VAR Name Type Description st Command Buffer ST_DMXCommand Buffer Reference to the structure for communication (buffer) with [} 68] the function block FB_EL6851Communication() [} 15] Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; udi Error Id : UDINT; END_VAR Name Type Description b Busy BOOL When the function block is activated the output is set, and it remains active until execution of the command has been completed. b Error BOOL This output is switched to TRUE as soon as an error occurs during the execution of a command. The command- specific error code is contained in udi Error Id. Only valid if b Busy is FALSE. udi Error Id UDINT Contains the command-specific error code of the most recently executed command. Only valid if b Busy is FALSE (see error codes [} 61]). Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 4.1.2.4.4 FB_DMXSet Lamp On Mode TE1000 Version: 1.8.0 33
## Page 34

Programming This function block defines the switch-on behavior of the DMX device. The function block FB_DMXGet Lamp On Mode() [} 31] can be used to read the set value. Inputs VAR_INPUT b Start : BOOL; w Destination Manufacturer Id : WORD; dw Destination Device Id : DWORD; by Port Id : BYTE; e Lamp On Mode : E_DMXLamp On Mode := e DMXLamp On Mode Off; dw Options : DWORD := 0; END_VAR Name Type Description b Start BOOL The function block is activated by a positive edge at this input. w Destination Manufa WORD Unique manufacturer Id of the DMX device. cturer Id dw Destination Devic DWORD Unique device Id of the DMX device. e Id by Port Id BYTE Channel within the addressed DMX device. Sub-devices are addressed through the Port Id. The root device always has the Port Id 0. e Lamp On Mode E_DMXLamp On Mode This parameter defines the switch-on behavior of the DMX device. [} 62] dw Options DWORD Options (currently not used). Inputs/outputs VAR_IN_OUT st Command Buffer : ST_DMXCommand Buffer; END_VAR Name Type Description st Command Buffer ST_DMXCommand Buffer Reference to the structure for communication (buffer) with [} 68] the function block FB_EL6851Communication() [} 15] Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; udi Error Id : UDINT; END_VAR Name Type Description b Busy BOOL When the function block is activated the output is set, and it remains active until execution of the command has been completed. b Error BOOL This output is switched to TRUE as soon as an error occurs during the execution of a command. The command- specific error code is contained in udi Error Id. Only valid if b Busy is FALSE. udi Error Id UDINT Contains the command-specific error code of the most recently executed command. Only valid if b Busy is FALSE (see error codes [} 61]). 34 Version: 1.8.0 TE1000
## Page 35

Programming Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 4.1.2.5 Product Information Messages 4.1.2.5.1 FB_DMXGet Device Info This function block queries all relevant information from a DMX device. Applying a positive edge to the b Start input starts the function block, and the b Busy output goes TRUE. The w Destination Manufacturer Id and dw Destination Device Id inputs address the DMX device. The by Port Id input defines the channel within the addressed DMX device. If the execution of the command has been completed, the b Busy output goes back to FALSE. The outputs b Error, udi Error Id and st DMXDevice Info can now be evaluated. Further positive edges at the b Start input will be ignored as long as the function block is active (b Busy is TRUE). Inputs VAR_INPUT b Start : BOOL; w Destination Manufacturer Id : WORD; dw Destination Device Id : DWORD; by Port Id : BYTE; dw Options : DWORD := 0; END_VAR Name Type Description b Start BOOL The function block is activated by a positive edge at this input. w Destination Manufa WORD Unique manufacturer Id of the DMX device (for details, see cturer Id DMX device address). dw Destination Devic DWORD Unique device Id of the DMX device (for details, see DMX e Id device address). by Port Id BYTE Channel within the addressed DMX device. Sub-devices are addressed through the Port Id. The root device always has the Port Id 0. dw Options DWORD Options (currently not used). Inputs/outputs VAR_IN_OUT st Command Buffer : ST_DMXCommand Buffer; END_VAR Name Type Description st Command Buffer ST_DMXCommand Buffer Reference to the structure for communication (buffer) with [} 68] the function block FB_EL6851Communication() [} 15] TE1000 Version: 1.8.0 35
## Page 36

Programming Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; udi Error Id : UDINT; st DMXDevice Info : ST_DMXDevice Info; END_VAR Name Type Description b Busy BOOL When the function block is activated the output is set, and it remains active until execution of the command has been completed. b Error BOOL This output is switched to TRUE as soon as an error occurs during the execution of a command. The command- specific error code is contained in udi Error Id. Only valid if b Busy is FALSE. udi Error Id UDINT Contains the command-specific error code of the most recently executed command. Only valid if b Busy is FALSE (see error codes [} 61]). st DMXDevice Info ST_DMXDevice Info [} 69] If the execution of the command has been completed (b Busy is FALSE), then all relevant information for the DMX device is sent to this output in a structure. Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 4.1.2.5.2 FB_DMXGet Device Label This function block reads a text from the DMX device, which contains a more detailed description of the device. The function block FB_DMXSet Device Label() [} 43] can be used to edit the text. Inputs VAR_INPUT b Start : BOOL; w Destination Manufacturer Id : WORD; dw Destination Device Id : DWORD; by Port Id : BYTE; dw Options : DWORD := 0; END_VAR 36 Version: 1.8.0 TE1000
## Page 37

Programming Name Type Description b Start BOOL The function block is activated by a positive edge at this input. w Destination Manufa WORD Unique manufacturer Id of the DMX device (for details, see cturer Id DMX device address). dw Destination Devic DWORD Unique device Id of the DMX device (for details, see DMX e Id device address). by Port Id BYTE Channel within the addressed DMX device. Sub-devices are addressed through the Port Id. The root device always has the Port Id 0. dw Options DWORD Options (currently not used). Inputs/outputs VAR_IN_OUT st Command Buffer : ST_DMXCommand Buffer; END_VAR Name Type Description st Command Buffer ST_DMXCommand Buffer Reference to the structure for communication (buffer) with [} 68] the function block FB_EL6851Communication() [} 15] Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; udi Error Id : UDINT; s Device Label : STRING; END_VAR Name Type Description b Busy BOOL When the function block is activated the output is set, and it remains active until execution of the command has been completed. b Error BOOL This output is switched to TRUE as soon as an error occurs during the execution of a command. The command- specific error code is contained in udi Error Id. Only valid if b Busy is FALSE. udi Error Id UDINT Contains the command-specific error code of the most recently executed command. Only valid if b Busy is FALSE (see error codes [} 61]). s Device Label STRING Description text for the DMX device. Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 4.1.2.5.3 FB_DMXGet Device Model Description This function block queries the description of the device type. TE1000 Version: 1.8.0 37
## Page 38

Programming Applying a positive edge to the b Start input starts the function block, and the b Busy output goes TRUE. The w Destination Manufacturer Id and dw Destination Device Id inputs address the DMX device. The by Port Id input defines the channel within the addressed DMX device. If the execution of the command has been completed, the b Busy output goes back to FALSE. The outputs b Error, udi Error Id and s Device Model Description can now be evaluated. Further positive edges at the b Start input will be ignored as long as the function block is active (b Busy is TRUE). Inputs VAR_INPUT b Start : BOOL; w Destination Manufacturer Id : WORD; dw Destination Device Id : DWORD; by Port Id : BYTE; dw Options : DWORD := 0; END_VAR Name Type Description b Start BOOL The function block is activated by a positive edge at this input. w Destination Manufa WORD Unique manufacturer Id of the DMX device (for details, see cturer Id DMX device address). dw Destination Devic DWORD Unique device Id of the DMX device (for details, see DMX e Id device address). by Port Id BYTE Channel within the addressed DMX device. Sub-devices are addressed through the Port Id. The root device always has the Port Id 0. dw Options DWORD Options (currently not used). Inputs/outputs VAR_IN_OUT st Command Buffer : ST_DMXCommand Buffer; END_VAR Name Type Description st Command Buffer ST_DMXCommand Buffer Reference to the structure for communication (buffer) with [} 68] the function block FB_EL6851Communication() [} 15] Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; udi Error Id : UDINT; s Device Model Description : STRING; END_VAR 38 Version: 1.8.0 TE1000
## Page 39

Programming Name Type Description b Busy BOOL When the function block is activated the output is set, and it remains active until execution of the command has been completed. b Error BOOL This output is switched to TRUE as soon as an error occurs during the execution of a command. The command- specific error code is contained in udi Error Id. Only valid if b Busy is FALSE. udi Error Id UDINT Contains the command-specific error code of the most recently executed command. Only valid if b Busy is FALSE (see error codes [} 61]). s Device Model Descri STRING If the execution of the command has been completed ption (b Busy is FALSE), then a description (maximum 32 characters) of the device type will be available at this output. The contents are specified by the DMX device manufacturer. Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 4.1.2.5.4 FB_DMXGet Manufacturer Label This function block queries the description of the DMX device manufacturer. Applying a positive edge to the b Start input starts the function block, and the b Busy output goes TRUE. The w Destination Manufacturer Id and dw Destination Device Id inputs address the DMX device. The by Port Id input defines the channel within the addressed DMX device. If the execution of the command has been completed, the b Busy output goes back to FALSE. The outputs b Error, udi Error Id and s Manufacturer Label can now be evaluated. Further positive edges at the b Start input will be ignored as long as the function block is active (b Busy is TRUE). Inputs VAR_INPUT b Start : BOOL; w Destination Manufacturer Id : WORD; dw Destination Device Id : DWORD; by Port Id : BYTE; dw Options : DWORD := 0; END_VAR TE1000 Version: 1.8.0 39
## Page 40

Programming Name Type Description b Start BOOL The function block is activated by a positive edge at this input. w Destination Manufa WORD Unique manufacturer Id of the DMX device (for details, see cturer Id DMX device address). dw Destination Devic DWORD Unique device Id of the DMX device (for details, see DMX e Id device address). by Port Id BYTE Channel within the addressed DMX device. Sub-devices are addressed through the Port Id. The root device always has the Port Id 0. dw Options DWORD Options (currently not used). Inputs/outputs VAR_IN_OUT st Command Buffer : ST_DMXCommand Buffer; END_VAR Name Type Description st Command Buffer ST_DMXCommand Buffer Reference to the structure for communication (buffer) with [} 68] the function block FB_EL6851Communication() [} 15] Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; udi Error Id : UDINT; s Manufacturer Label : STRING; END_VAR Name Type Description b Busy BOOL When the function block is activated the output is set, and it remains active until execution of the command has been completed. b Error BOOL This output is switched to TRUE as soon as an error occurs during the execution of a command. The command- specific error code is contained in udi Error Id. Only valid if b Busy is FALSE. udi Error Id UDINT Contains the command-specific error code of the most recently executed command. Only valid if b Busy is FALSE (see error codes [} 61]). s Manufacturer Label STRING If the execution of the command has been completed (b Busy is FALSE), then a description (maximum 32 characters) of the DMX device manufacturer will be available at this output. The contents are specified by the DMX device manufacturer. Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 40 Version: 1.8.0 TE1000
## Page 41

Programming 4.1.2.5.5 FB_DMXGet Product Detail Id List This function block queries the categories to which the DMX device belongs. RDM defines different device categories. Each DMX device can be assigned to up to 6 categories. The assignment is done by the device manufacturer and cannot be changed via RDM. Inputs VAR_INPUT b Start : BOOL; w Destination Manufacturer Id : WORD; dw Destination Device Id : DWORD; by Port Id : BYTE; dw Options : DWORD := 0; END_VAR Name Type Description b Start BOOL The function block is activated by a positive edge at this input. w Destination Manufa WORD Unique manufacturer Id of the DMX device (for details, see cturer Id DMX device address). dw Destination Devic DWORD Unique device Id of the DMX device (for details, see DMX e Id device address). by Port Id BYTE Channel within the addressed DMX device. Sub-devices are addressed through the Port Id. The root device always has the Port Id 0. dw Options DWORD Options (currently not used). Inputs/outputs VAR_IN_OUT st Command Buffer : ST_DMXCommand Buffer; END_VAR Name Type Description st Command Buffer ST_DMXCommand Buffer Reference to the structure for communication (buffer) with [} 68] the function block FB_EL6851Communication() [} 15] Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; udi Error Id : UDINT; arr Product Details : ARRAY [1..6] OF E_DMXProduct Detail; END_VAR TE1000 Version: 1.8.0 41
## Page 42

Programming Name Type Description b Busy BOOL When the function block is activated the output is set, and it remains active until execution of the command has been completed. b Error BOOL This output is switched to TRUE as soon as an error occurs during the execution of a command. The command- specific error code is contained in udi Error Id. Only valid if b Busy is FALSE. udi Error Id UDINT Contains the command-specific error code of the most recently executed command. Only valid if b Busy is FALSE (see error codes [} 61]). arr Product Details ARRAY OF Contains the list with up to 6 device categories. E_DMXProduct Detail [} 64] Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 4.1.2.5.6 FB_DMXGet Software Version Label This function block queries the description of the software version of the DMX device. Applying a positive edge to the b Start input starts the function block, and the b Busy output goes TRUE. The w Destination Manufacturer Id and dw Destination Device Id inputs address the DMX device. The by Port Id input defines the channel within the addressed DMX device. If the execution of the command has been completed, the b Busy output goes back to FALSE. The outputs b Error, udi Error Id and s Software Version Label can now be evaluated. Further positive edges at the b Start input will be ignored as long as the function block is active (b Busy is TRUE). Inputs VAR_INPUT b Start : BOOL; w Destination Manufacturer Id : WORD; dw Destination Device Id : DWORD; by Port Id : BYTE; dw Options : DWORD := 0; END_VAR Name Type Description b Start BOOL The function block is activated by a positive edge at this input. w Destination Manufa WORD Unique manufacturer Id of the DMX device (for details, see cturer Id DMX device address). dw Destination Devic DWORD Unique device Id of the DMX device (for details, see DMX e Id device address). by Port Id BYTE Channel within the addressed DMX device. Sub-devices are addressed through the Port Id. The root device always has the Port Id 0. dw Options DWORD Options (currently not used). 42 Version: 1.8.0 TE1000
## Page 43

Programming Inputs/outputs VAR_IN_OUT st Command Buffer : ST_DMXCommand Buffer; END_VAR Name Type Description st Command Buffer ST_DMXCommand Buffer Reference to the structure for communication (buffer) with [} 68] the function block FB_EL6851Communication() [} 15] Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; udi Error Id : UDINT; s Software Version Label : STRING; END_VAR Name Type Description b Busy BOOL When the function block is activated the output is set, and it remains active until execution of the command has been completed. b Error BOOL This output is switched to TRUE as soon as an error occurs during the execution of a command. The command- specific error code is contained in udi Error Id. Only valid if b Busy is FALSE. udi Error Id UDINT Contains the command-specific error code of the most recently executed command. Only valid if b Busy is FALSE (see error codes [} 61]). s Software Version La STRING If the execution of the command has been completed bel (b Busy is FALSE), then a description (maximum 32 characters) of the software version of the DMX device will be available at this output. The contents are specified by the DMX device manufacturer. Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 4.1.2.5.7 FB_DMXSet Device Label This function block writes a description text into the DMX device. The function block FB_DMXGet Device Label() [} 36] can be used to read the text. Inputs VAR_INPUT b Start : BOOL; w Destination Manufacturer Id : WORD; dw Destination Device Id : DWORD; by Port Id : BYTE; TE1000 Version: 1.8.0 43
## Page 44

Programming s Device Label : STRING := ''; dw Options : DWORD := 0; END_VAR Name Type Description b Start BOOL The function block is activated by a positive edge at this input. w Destination Manufa WORD Unique manufacturer Id of the DMX device (for details, see cturer Id DMX device address). dw Destination Devic DWORD Unique device Id of the DMX device (for details, see DMX e Id device address). by Port Id BYTE Channel within the addressed DMX device. Sub-devices are addressed through the Port Id. The root device always has the Port Id 0. s Device Label STRING New description text for the DMX device. dw Options DWORD Options (currently not used). Inputs/outputs VAR_IN_OUT st Command Buffer : ST_DMXCommand Buffer; END_VAR Name Type Description st Command Buffer ST_DMXCommand Buffer Reference to the structure for communication (buffer) with [} 68] the function block FB_EL6851Communication() [} 15] Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; udi Error Id : UDINT; END_VAR Name Type Description b Busy BOOL When the function block is activated the output is set, and it remains active until execution of the command has been completed. b Error BOOL This output is switched to TRUE as soon as an error occurs during the execution of a command. The command- specific error code is contained in udi Error Id. Only valid if b Busy is FALSE. udi Error Id UDINT Contains the command-specific error code of the most recently executed command. Only valid if b Busy is FALSE (see error codes [} 61]). Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 44 Version: 1.8.0 TE1000
## Page 45

Programming 4.1.2.6 Queued and Status Messages 4.1.2.6.1 FB_DMXClear Status Id This function block clears the message buffer in the DMX device. Inputs VAR_INPUT b Start : BOOL; w Destination Manufacturer Id : WORD; dw Destination Device Id : DWORD; by Port Id : BYTE; dw Options : DWORD := 0; END_VAR Name Type Description b Start BOOL The function block is activated by a positive edge at this input. w Destination Manufa WORD Unique manufacturer Id of the DMX device (for details, see cturer Id DMX device address). dw Destination Devic DWORD Unique device Id of the DMX device (for details, see DMX e Id device address). by Port Id BYTE Channel within the addressed DMX device. Sub-devices are addressed through the Port Id. The root device always has the Port Id 0. dw Options DWORD Options (currently not used). Inputs/outputs VAR_IN_OUT st Command Buffer : ST_DMXCommand Buffer; END_VAR Name Type Description st Command Buffer ST_DMXCommand Buffer Reference to the structure for communication (buffer) with [} 68] the function block FB_EL6851Communication() [} 15] Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; udi Error Id : UDINT; END_VAR TE1000 Version: 1.8.0 45
## Page 46

Programming Name Type Description b Busy BOOL When the function block is activated the output is set, and it remains active until execution of the command has been completed. b Error BOOL This output is switched to TRUE as soon as an error occurs during the execution of a command. The command- specific error code is contained in udi Error Id. Only valid if b Busy is FALSE. udi Error Id UDINT Contains the command-specific error code of the most recently executed command. Only valid if b Busy is FALSE (see error codes [} 61]). Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 4.1.2.6.2 FB_DMXGet Status Id Description This function block reads the text of a certain status Id from the DMX device. RDM defines some standard messages. Each of these messages has a unique status Id. The associated text can be read out from the DMX device with this function block. Inputs VAR_INPUT b Start : BOOL; w Destination Manufacturer Id : WORD; dw Destination Device Id : DWORD; by Port Id : BYTE; ui Status Message Id : UINT := 1; dw Options : DWORD := 0; END_VAR Name Type Description b Start BOOL The function block is activated by a positive edge at this input. w Destination Manufa WORD Unique manufacturer Id of the DMX device (for details, see cturer Id DMX device address). dw Destination Devic DWORD Unique device Id of the DMX device (for details, see DMX e Id device address). by Port Id BYTE Channel within the addressed DMX device. Sub-devices are addressed through the Port Id. The root device always has the Port Id 0. ui Status Message Id UINT Status Id for which the text is to be read. dw Options DWORD Options (currently not used). 46 Version: 1.8.0 TE1000
## Page 47

Programming Inputs/outputs VAR_IN_OUT st Command Buffer : ST_DMXCommand Buffer; END_VAR Name Type Description st Command Buffer ST_DMXCommand Buffer Reference to the structure for communication (buffer) with [} 68] the function block FB_EL6851Communication() [} 15] Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; udi Error Id : UDINT; s Status Message : STRING; END_VAR Name Type Description b Busy BOOL When the function block is activated the output is set, and it remains active until execution of the command has been completed. b Error BOOL This output is switched to TRUE as soon as an error occurs during the execution of a command. The command- specific error code is contained in udi Error Id. Only valid if b Busy is FALSE. udi Error Id UDINT Contains the command-specific error code of the most recently executed command. Only valid if b Busy is FALSE (see error codes [} 61]). s Status Message STRING Status message Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 4.1.2.6.3 FB_DMXGet Status Messages This function block collects the status or error information of an DMX device. Inputs VAR_INPUT b Start : BOOL; w Destination Manufacturer Id : WORD; dw Destination Device Id : DWORD; by Port Id : BYTE; e Status Type : E_DMXStatus Type := e DMXStatus Type None; dw Options : DWORD := 0; END_VAR TE1000 Version: 1.8.0 47
## Page 48

Programming Name Type Description b Start BOOL The function block is activated by a positive edge at this input. w Destination Manufa WORD Unique manufacturer Id of the DMX device (for details, see cturer Id DMX device address). dw Destination Devic DWORD Unique device Id of the DMX device (for details, see DMX e Id device address). by Port Id BYTE Channel within the addressed DMX device. Sub-devices are addressed through the Port Id. The root device always has the Port Id 0. e Status Type E_DMXStatus Type [} 68] Status type dw Options DWORD Options (currently not used). Inputs/outputs VAR_IN_OUT st Command Buffer : ST_DMXCommand Buffer; END_VAR Name Type Description st Command Buffer ST_DMXCommand Buffer Reference to the structure for communication (buffer) with [} 68] the function block FB_EL6851Communication() [} 15] Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; udi Error Id : UDINT; arr Status Messages : ARRAY [0..24] OF ST_DMXStatus Message; END_VAR Name Type Description b Busy BOOL When the function block is activated the output is set, and it remains active until execution of the command has been completed. b Error BOOL This output is switched to TRUE as soon as an error occurs during the execution of a command. The command- specific error code is contained in udi Error Id. Only valid if b Busy is FALSE. udi Error Id UDINT Contains the command-specific error code of the most recently executed command. Only valid if b Busy is FALSE (see error codes [} 61]). arr Status Messages ARRAY OF Once command execution is complete (b Busy is FALSE), ST_DMXStatus Message all status/error information is available at this output. [} 72] Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 48 Version: 1.8.0 TE1000
## Page 49

Programming 4.1.2.7 RDM Information Messages 4.1.2.7.1 FB_DMXGet Parameter Description This function block queries the definition of manufacturer-specific PIDs. Inputs VAR_INPUT b Start : BOOL; w Destination Manufacturer Id : WORD; dw Destination Device Id : DWORD; by Port Id : BYTE; e Parameter Id : E_DMXParameter Id; dw Options : DWORD := 0; END_VAR Name Type Description b Start BOOL The function block is activated by a positive edge at this input. w Destination Manufa WORD Unique manufacturer Id of the DMX device (for details, see cturer Id DMX device address). dw Destination Devic DWORD Unique device Id of the DMX device (for details, see DMX e Id device address). by Port Id BYTE Channel within the addressed DMX device. Sub-devices are addressed through the Port Id. The root device always has the Port Id 0. e Parameter Id E_DMXParameter Id Requested manufacturer-specific PID. [} 63] dw Options DWORD Options (currently not used). Inputs/outputs VAR_IN_OUT st Command Buffer : ST_DMXCommand Buffer; END_VAR Name Type Description st Command Buffer ST_DMXCommand Buffer Reference to the structure for communication (buffer) with [} 68] the function block FB_EL6851Communication() [} 15] Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; udi Error Id : UDINT; st Parameter Description : ST_DMXParameter Description; END_VAR TE1000 Version: 1.8.0 49
## Page 50

Programming Name Type Description b Busy BOOL When the function block is activated the output is set, and it remains active until execution of the command has been completed. b Error BOOL This output is switched to TRUE as soon as an error occurs during the execution of a command. The command- specific error code is contained in udi Error Id. Only valid if b Busy is FALSE. udi Error Id UDINT Contains the command-specific error code of the most recently executed command. Only valid if b Busy is FALSE (see error codes [} 61]). st Parameter Descript ST_DMXParameter Descrip Once command execution is complete (b Busy is FALSE), ion the information about the PID is available at this output. tion [} 70] Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 4.1.2.7.2 FB_DMXGet Supported Parameters This function block queries all supported parameters from a DMX device. Inputs VAR_INPUT b Start : BOOL; w Destination Manufacturer Id : WORD; dw Destination Device Id : DWORD; by Port Id : BYTE; dw Options : DWORD := 0; END_VAR Name Type Description b Start BOOL The function block is activated by a positive edge at this input. w Destination Manufa WORD Unique manufacturer Id of the DMX device (for details, see cturer Id DMX device address). dw Destination Devic DWORD Unique device Id of the DMX device (for details, see DMX e Id device address). by Port Id BYTE Channel within the addressed DMX device. Sub-devices are addressed through the Port Id. The root device always has the Port Id 0. dw Options DWORD Options (currently not used). Inputs/outputs VAR_IN_OUT st Command Buffer : ST_DMXCommand Buffer; END_VAR 50 Version: 1.8.0 TE1000
## Page 51

Programming Name Type Description st Command Buffer ST_DMXCommand Buffer Reference to the structure for communication (buffer) with [} 68] the function block FB_EL6851Communication() [} 15] Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; udi Error Id : UDINT; arr Parameters : ARRAY [0..114] OF E_DMXParameter Id; END_VAR Name Type Description b Busy BOOL When the function block is activated the output is set, and it remains active until execution of the command has been completed. b Error BOOL This output is switched to TRUE as soon as an error occurs during the execution of a command. The command- specific error code is contained in udi Error Id. Only valid if b Busy is FALSE. udi Error Id UDINT Contains the command-specific error code of the most recently executed command. Only valid if b Busy is FALSE (see error codes [} 61]). arr Parameters ARRAY OF Once command execution is complete (b Busy is FALSE), E_DMXParameter Id all supported parameters for the DMX device are available at this output. [} 63] Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 4.1.2.8 Sensor Parameter Messages 4.1.2.8.1 FB_DMXGet Sensor Definition This function block queries the definition of a particular sensor. Inputs VAR_INPUT b Start : BOOL; w Destination Manufacturer Id : WORD; dw Destination Device Id : DWORD; by Port Id : BYTE; by Sensor Number : BYTE := 0; dw Options : DWORD := 0; END_VAR TE1000 Version: 1.8.0 51
## Page 52

Programming Name Type Description b Start BOOL The function block is activated by a positive edge at this input. w Destination Manufa WORD Unique manufacturer Id of the DMX device. cturer Id dw Destination Devic DWORD Unique device Id of the DMX device. e Id by Port Id BYTE Channel within the addressed DMX device. Sub-devices are addressed through the Port Id. The root device always has the Port Id 0. by Sensor Number BYTE DMX512 sensor number (0 - 254). dw Options DWORD Options (currently not used). Inputs/outputs VAR_IN_OUT st Command Buffer : ST_DMXCommand Buffer; END_VAR Name Type Description st Command Buffer ST_DMXCommand Buffer Reference to the structure for communication (buffer) with [} 68] the function block FB_EL6851Communication() [} 15] Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; udi Error Id : UDINT; st Sensor Definition : ST_DMXSensor Definition; END_VAR Name Type Description b Busy BOOL When the function block is activated the output is set, and it remains active until execution of the command has been completed. b Error BOOL This output is switched to TRUE as soon as an error occurs during the execution of a command. The command- specific error code is contained in udi Error Id. Only valid if b Busy is FALSE. udi Error Id UDINT Contains the command-specific error code of the most recently executed command. Only valid if b Busy is FALSE (see error codes [} 61]). st Sensor Definition ST_DMXSensor Definition Once command execution is complete (b Busy is FALSE), the definition of the sensor is available at this output. [} 71] Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 52 Version: 1.8.0 TE1000
## Page 53

Programming 4.1.2.8.2 FB_DMXGet Sensor Value This function block queries the current value of a sensor. Inputs VAR_INPUT b Start : BOOL; w Destination Manufacturer Id : WORD; dw Destination Device Id : DWORD; by Port Id : BYTE; by Sensor Number : BYTE := 0; dw Options : DWORD := 0; END_VAR Name Type Description b Start BOOL The function block is activated by a positive edge at this input. w Destination Manufa WORD Unique manufacturer Id of the DMX device. cturer Id dw Destination Devic DWORD Unique device Id of the DMX device. e Id by Port Id BYTE Channel within the addressed DMX device. Sub-devices are addressed through the Port Id. The root device always has the Port Id 0. by Sensor Number BYTE DMX512 sensor number (0 - 254). dw Options DWORD Options (currently not used). Inputs/outputs VAR_IN_OUT st Command Buffer : ST_DMXCommand Buffer; END_VAR Name Type Description st Command Buffer ST_DMXCommand Buffer Reference to the structure for communication (buffer) with [} 68] the function block FB_EL6851Communication() [} 15] Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; udi Error Id : UDINT; st DMXSensor Value : ST_DMXSensor Value; END_VAR TE1000 Version: 1.8.0 53
## Page 54

Programming Name Type Description b Busy BOOL When the function block is activated the output is set, and it remains active until execution of the command has been completed. b Error BOOL This output is switched to TRUE as soon as an error occurs during the execution of a command. The command- specific error code is contained in udi Error Id. Only valid if b Busy is FALSE. udi Error Id UDINT Contains the command-specific error code of the most recently executed command. Only valid if b Busy is FALSE (see error codes [} 61]). st DMXSensor Value ST_DMXSensor Value Structure with information about the current state of the sensor. [} 72] Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 4.1.2.9 Setup Messages 4.1.2.9.1 FB_DMXGet DMX512Personality Description This function block reads further Personality information from the DMX device. Some DMX devices support so-called Personalities. Changing the Personality can influence certain RDM parameters. Inputs VAR_INPUT b Start : BOOL; w Destination Manufacturer Id : WORD; dw Destination Device Id : DWORD; by Port Id : BYTE; by Personality : BYTE := 0; dw Options : DWORD := 0; END_VAR Name Type Description b Start BOOL The function block is activated by a positive edge at this input. w Destination Manufa WORD Unique manufacturer Id of the DMX device (for details, see cturer Id DMX device address). dw Destination Devic DWORD Unique device Id of the DMX device (for details, see DMX e Id device address). by Port Id BYTE Channel within the addressed DMX device. Sub-devices are addressed through the Port Id. The root device always has the Port Id 0. by Personality BYTE The Personality for which information is queried. dw Options DWORD Options (currently not used). 54 Version: 1.8.0 TE1000
## Page 55

Programming Inputs/outputs VAR_IN_OUT st Command Buffer : ST_DMXCommand Buffer; END_VAR Name Type Description st Command Buffer ST_DMXCommand Buffer Reference to the structure for communication (buffer) with [} 68] the function block FB_EL6851Communication() [} 15] Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; udi Error Id : UDINT; st DMX512Personality Description : ST_DMX512Personality Description; END_VAR Name Type Description b Busy BOOL When the function block is activated the output is set, and it remains active until execution of the command has been completed. b Error BOOL This output is switched to TRUE as soon as an error occurs during the execution of a command. The command- specific error code is contained in udi Error Id. Only valid if b Busy is FALSE. udi Error Id UDINT Contains the command-specific error code of the most recently executed command. Only valid if b Busy is FALSE (see error codes [} 61]). st DMX512Personalit ST_DMX512Personality De Structure with information about the Personality. y Description scription [} 68] Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 4.1.2.9.2 FB_DMXGet DMX512Start Address This function block queries the DMX512 start address. This lies within the range from 1 – 512. If the DMX device does not occupy any DMX slot, then the DMX512 start address is 0x FFFF (65535). Each sub-device and the root device occupy different DMX512 start addresses. Applying a positive edge to the b Start input starts the function block, and the b Busy output goes TRUE. The w Destination Manufacturer Id and dw Destination Device Id inputs address the DMX device. The by Port Id input defines the channel within the addressed DMX device. If the execution of the command has been completed, the b Busy output goes back to FALSE. The outputs b Error, udi Error Id and i DMX512Start Address can now be evaluated. Further positive edges at the b Start input will be ignored as long as the function block is active (b Busy is TRUE). TE1000 Version: 1.8.0 55
## Page 56

Programming Inputs VAR_INPUT b Start : BOOL; w Destination Manufacturer Id : WORD; dw Destination Device Id : DWORD; by Port Id : BYTE; dw Options : DWORD := 0; END_VAR Name Type Description b Start BOOL The function block is activated by a positive edge at this input. w Destination Manufa WORD Unique manufacturer Id of the DMX device (for details, see cturer Id DMX device address). dw Destination Devic DWORD Unique device Id of the DMX device (for details, see DMX e Id device address). by Port Id BYTE Channel within the addressed DMX device. Sub-devices are addressed through the Port Id. The root device always has the Port Id 0. dw Options DWORD Options (currently not used). Inputs/outputs VAR_IN_OUT st Command Buffer : ST_DMXCommand Buffer; END_VAR Name Type Description st Command Buffer ST_DMXCommand Buffer Reference to the structure for communication (buffer) with [} 68] the function block FB_EL6851Communication() [} 15] Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; udi Error Id : UDINT; i DMX512Start Address : INT; END_VAR Name Type Description b Busy BOOL When the function block is activated the output is set, and it remains active until execution of the command has been completed. b Error BOOL This output is switched to TRUE as soon as an error occurs during the execution of a command. The command- specific error code is contained in udi Error Id. Only valid if b Busy is FALSE. udi Error Id UDINT Contains the command-specific error code of the most recently executed command. Only valid if b Busy is FALSE (see error codes [} 61]). i DMX512Start Addre INT If the execution of the command has been completed ss (b Busy is FALSE), then the DMX512 start address of the DMX device will be available at this output. Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 56 Version: 1.8.0 TE1000
## Page 57

Programming 4.1.2.9.3 FB_DMXGet Slot Description This function block queries the text description for slot offsets. Inputs VAR_INPUT b Start : BOOL; w Destination Manufacturer Id : WORD; dw Destination Device Id : DWORD; by Port Id : BYTE; i DMX512Slot Offset : INT := 0; dw Options : DWORD := 0; END_VAR Name Type Description b Start BOOL The function block is activated by a positive edge at this input. w Destination Manufa WORD Unique manufacturer Id of the DMX device (for details, see cturer Id DMX device address). dw Destination Devic DWORD Unique device Id of the DMX device (for details, see DMX e Id device address). by Port Id BYTE Channel within the addressed DMX device. Sub-devices are addressed through the Port Id. The root device always has the Port Id 0. i DMX512Slot Offset INT DMX512 Slot Offset (0 - 511). dw Options DWORD Options (currently not used). Inputs/outputs VAR_IN_OUT st Command Buffer : ST_DMXCommand Buffer; END_VAR Name Type Description st Command Buffer ST_DMXCommand Buffer Reference to the structure for communication (buffer) with [} 68] the function block FB_EL6851Communication() [} 15] Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; udi Error Id : UDINT; s Slot Description : STRING; END_VAR TE1000 Version: 1.8.0 57
## Page 58

Programming Name Type Description b Busy BOOL When the function block is activated the output is set, and it remains active until execution of the command has been completed. b Error BOOL This output is switched to TRUE as soon as an error occurs during the execution of a command. The command- specific error code is contained in udi Error Id. Only valid if b Busy is FALSE. udi Error Id UDINT Contains the command-specific error code of the most recently executed command. Only valid if b Busy is FALSE (see error codes [} 61]). s Slot Description STRING Once the command execution is complete (b Busy is FALSE), the slot description (maximum 32 characters) is available at this output. Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 4.1.2.9.4 FB_DMXGet Slot Info This function block queries the basic information of the functionality of the DMX512 slots of a DMX device. Inputs VAR_INPUT b Start : BOOL; w Destination Manufacturer Id : WORD; dw Destination Device Id : DWORD; by Port Id : BYTE; dw Options : DWORD := 0; END_VAR Name Type Description b Start BOOL The function block is activated by a positive edge at this input. w Destination Manufa WORD Unique manufacturer Id of the DMX device (for details, see cturer Id DMX device address). dw Destination Devic DWORD Unique device Id of the DMX device (for details, see DMX e Id device address). by Port Id BYTE Channel within the addressed DMX device. Sub-devices are addressed through the Port Id. The root device always has the Port Id 0. dw Options DWORD Options (currently not used). Inputs/outputs VAR_IN_OUT st Command Buffer : ST_DMXCommand Buffer; END_VAR 58 Version: 1.8.0 TE1000
## Page 59

Programming Name Type Description st Command Buffer ST_DMXCommand Buffer Reference to the structure for communication (buffer) with [} 68] the function block FB_EL6851Communication() [} 15] Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; udi Error Id : UDINT; arr Slot Infos : ARRAY [0..45] OF ST_DMXSlot Info; END_VAR Name Type Description b Busy BOOL When the function block is activated the output is set, and it remains active until execution of the command has been completed. b Error BOOL This output is switched to TRUE as soon as an error occurs during the execution of a command. The command- specific error code is contained in udi Error Id. Only valid if b Busy is FALSE. udi Error Id UDINT Contains the command-specific error code of the most recently executed command. Only valid if b Busy is FALSE (see error codes [} 61]). arr Slot Infos ARRAY OF Once the command execution is complete (b Busy is ST_DMXSlot Info [} 72] FALSE), all relevant information of the DMX512 slots is available as array at this output. Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 4.1.2.9.5 FB_DMXSet DMX512Start Address This function block sets the DMX512 start address. This lies within the range from 1 – 512. Each sub-device and the root device occupy different DMX512 start addresses. Applying a positive edge to the b Start input starts the function block, and the b Busy output goes TRUE. The w Destination Manufacturer Id and dw Destination Device Id inputs address the DMX device. The by Port Id input defines the channel within the addressed DMX device. If the execution of the command has been completed, the b Busy output goes back to FALSE. The outputs b Error and udi Error Id can now be evaluated. Further positive edges at the b Start input will be ignored as long as the function block is active (b Busy is TRUE). Inputs VAR_INPUT b Start : BOOL; w Destination Manufacturer Id : WORD; dw Destination Device Id : DWORD; by Port Id : BYTE; i DMX512Startadresse : INT; dw Options : DWORD := 0; END_VAR TE1000 Version: 1.8.0 59
## Page 60

Programming Name Type Description b Start BOOL The function block is activated by a positive edge at this input. w Destination Manufa WORD Unique manufacturer Id of the DMX device (for details, see cturer Id DMX device address). dw Destination Devic DWORD Unique device Id of the DMX device (for details, see DMX e Id device address). by Port Id BYTE Channel within the addressed DMX device. Sub-devices are addressed through the Port Id. The root device always has the Port Id 0. i DMX512Start Addre INT DMX512 start address (1 to 512). ss dw Options DWORD Options (currently not used). Inputs/outputs VAR_IN_OUT st Command Buffer : ST_DMXCommand Buffer; END_VAR Name Type Description st Command Buffer ST_DMXCommand Buffer Reference to the structure for communication (buffer) with [} 68] the function block FB_EL6851Communication() [} 15] Outputs VAR_OUTPUT b Busy : BOOL; b Error : BOOL; udi Error Id : UDINT; END_VAR Name Type Description b Busy BOOL When the function block is activated the output is set, and it remains active until execution of the command has been completed. b Error BOOL This output is switched to TRUE as soon as an error occurs during the execution of a command. The command- specific error code is contained in udi Error Id. Only valid if b Busy is FALSE. udi Error Id UDINT Contains the command-specific error code of the most recently executed command. Only valid if b Busy is FALSE (see error codes [} 61]). Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 60 Version: 1.8.0 TE1000
## Page 61

Programming 4.1.3 Error codes Value (hex) Value (dez) Description 0x0000 0 No error. 0x8001 32769 No answer from the DMX terminal. 0x8002 32770 No answer from the DMX device. 0x8003 32771 Communication buffer overflow. 0x8004 32772 No answer from the communication block. 0x8005 32773 The by Port Id parameter is outside the valid range. 0x8006 32774 Checksum error. 0x8007 32775 The e Reset Device Type parameter is outside the valid range. 0x8008 32776 Timeout. 0x8009 32777 The uli Lower Bound UID parameter is larger than the uli Upper Bound UID. parameter. 0x800A 32778 No RDM commands can be transmitted, because the terminal is in cycle mode. 0x800B 32779 The i DMX512Start Address parameter is outside the valid range (1 – 512). 0x800C 32780 Error in setting the DMX512 start address. 0x800D 32781 No process data can be transmitted, because the terminal is not in cycle mode. 0x800E 32782 It is a RDM telegram received with the data length 0. 0x800F 32783 RDM response: Reply of the RDM telegramm ist invalid. 0x8010 32784 RDM response: The DMX slave cannot comply with request because the message is not implemented in responder. 0x8011 32785 RDM response: The DMX slave cannot interpret request as controller data was not formatted correctly. 0x8012 32786 RDM response: The DMX slave cannot comply due to an internal hardware fault. 0x8013 32787 RDM response: Proxy is not the RDM line master and cannot comply with message. 0x8014 32788 RDM response: SET Command normally allowed but being blocked currently. 0x8015 32789 RDM response: Not valid for Command Class attempted. May be used where GET allowed but SET is not supported. 0x8016 32790 RDM response: Value for given Parameter out of allowable range or not supported. 0x8017 32791 RDM response: Buffer or Queue space currently has no free space to store data. 0x8018 32792 RDM response: Incoming message exceeds buffer capacity. 0x8019 32793 RDM response: Sub-Device is out of range or unknown. 0x801A 32794 The i DMX512Slot Offset lparameter is outside the valid range (0-511). 0x801B 32795 The by Sensor Number parameter is outside the valid range (0-254). 0x801C 32796 RDM-Response: The field Parameter Data (PD) is too long. It was not possible to receive all the data of the reply. For this purpose, the function block FB_EL6851Communication Ex() [} 18] must be used. 0x801D 32797 The ADS address to access the PDOs is invalid. Was the structure Ads Addr of the KL6851 mapped to the corresponding variable? 0x801E 32798 During read access to the PDOs an ADS error has occurred. TE1000 Version: 1.8.0 61
## Page 62

Programming 4.2 DUTs 4.2.1 Enums 4.2.1.1 E_DMXCommand Class TYPE E_DMXCommand Class : ( e DMXCommand Class Not Defined := 16#0000, e DMXCommand Class Discovery Command := 16#0010, e DMXCommand Class Discovery Command Response := 16#0011, e DMXCommand Class Get Command := 16#0020, e DMXCommand Class Get Command Response := 16#0021, e DMXCommand Class Set Command := 16#0030, e DMXCommand Class Set Command Response := 16#0031 ); END_TYPE Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 4.2.1.2 E_DMXData Type TYPE E_DMXData Type : ( e DMXData Type Not Defined := 16#0000, e DMXData Type Bit Field := 16#0001, e DMXData Type ASCII := 16#0002, e DMXData Type Unsigned Byte := 16#0003, e DMXData Type Signed Byte := 16#0004, e DMXData Type Unsigned Word := 16#0005, e DMXData Type Signed Word := 16#0006, e DMXData Type Unsigned DWord := 16#0007, e DMXData Type Signed DWord := 16#0008 ); END_TYPE Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 4.2.1.3 E_DMXLamp On Mode TYPE E_DMXLamp On Mode : ( e DMXLamp On Mode Off := 0, e DMXLamp On Mode DMX := 1, e DMXLamp On Mode On := 2, e DMXLamp On Mode After Cal := 3 ); END_TYPE Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 4.2.1.4 E_DMXParameter Description Command Class TYPE E_DMXParameter Description Command Class : ( e DMXParameter Description Command Class Get := 16#0001, e DMXParameter Description Command Class Set := 16#0002, 62 Version: 1.8.0 TE1000
## Page 63

Programming e DMXParameter Description Command Class Get Set := 16#0003 ); END_TYPE Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 4.2.1.5 E_DMXParameter Id TYPE E_DMXParameter Id : ( e DMXParameter Id None := 16#0000, e DMXParameter Id Disc Unique Branch := 16#0001, e DMXParameter Id Disc Mute := 16#0002, e DMXParameter Id Disc Un Mute := 16#0003, e DMXParameter Id Proxied Devices := 16#0010, e DMXParameter Id Proxied Device Count := 16#0011, e DMXParameter Id Comms Status := 16#0015, e DMXParameter Id Queued Message := 16#0020, e DMXParameter Id Status Messages := 16#0030, e DMXParameter Id Status Id Description := 16#0031, e DMXParameter Id Clear Status Id := 16#0032, e DMXParameter Id Sub Device Status Report Threshold := 16#0033, e DMXParameter Id Supported Paramaters := 16#0050, e DMXParameter Id Parameter Description := 16#0051, e DMXParameter Id Device Info := 16#0060, e DMXParameter Id Product Detail Id List := 16#0070, e DMXParameter Id Device Model Description := 16#0080, e DMXParameter Id Manufacturer Label := 16#0081, e DMXParameter Id Device Label := 16#0082, e DMXParameter Id Factory Defaults := 16#0090, e DMXParameter Id Language Capabilities := 16#00A0, e DMXParameter Id Language := 16#00B0, e DMXParameter Id Software Version Label := 16#00C0, e DMXParameter Id Boot Software Version Id := 16#00C1, e DMXParameter Id Boot Software Version Label := 16#00C2, e DMXParameter Id DMXPersonality := 16#00E0, e DMXParameter Id DMXPersonality Description := 16#00E1, e DMXParameter Id DMXStart Address := 16#00F0, e DMXParameter Id Slot Info := 16#0120, e DMXParameter Id Slot Description := 16#0121, e DMXParameter Id Default Slot Value := 16#0122, e DMXParameter Id Sensor Definition := 16#0200, e DMXParameter Id Sensor Value := 16#0201, e DMXParameter Id Record Sensors := 16#0202, e DMXParameter Id Device Hours := 16#0400, e DMXParameter Id Lamp Hours := 16#0401, e DMXParameter Id Lamp Strikes := 16#0402, e DMXParameter Id Lamp State := 16#0403, e DMXParameter Id Lamp On Mode := 16#0404, e DMXParameter Id Device Power Cycles := 16#0405, e DMXParameter Id Display Invert := 16#0500, e DMXParameter Id Display Level := 16#0501, e DMXParameter Id Pan Invert := 16#0600, e DMXParameter Id Tilt Invert := 16#0601, e DMXParameter Id Pan Tilt Swap := 16#0602, e DMXParameter Id Real Time Clock := 16#0603, e DMXParameter Id Identify Device := 16#1000, e DMXParameter Id Reset Device := 16#1001, e DMXParameter Id Power State := 16#1010, e DMXParameter Id Perform Selftest := 16#1020, e DMXParameter Id Self Test Description := 16#1021, e DMXParameter Id Capture Preset := 16#1030, e DMXParameter Id Preset Play Back := 16#1031 ); END_TYPE Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 TE1000 Version: 1.8.0 63
## Page 64

Programming 4.2.1.6 E_DMXProduct Detail TYPE E_DMXProduct Detail : ( e DMXProduct Detail Not Declared := 16#0000, e DMXProduct Detail Arc := 16#0001, e DMXProduct Detail Metal Halide := 16#0002, e DMXProduct Detail Incandescent := 16#0003, e DMXProduct Detail LED := 16#0004, e DMXProduct Detail Fluroescent := 16#0005, e DMXProduct Detail Coldcathode := 16#0006, e DMXProduct Detail Electroluminescent := 16#0007, e DMXProduct Detail Laser := 16#0008, e DMXProduct Detail Flashtube := 16#0009, e DMXProduct Detail Colorscroller := 16#0100, e DMXProduct Detail Colorwheel := 16#0101, e DMXProduct Detail Colorchange := 16#0102, e DMXProduct Detail Iris Douser := 16#0103, e DMXProduct Detail Dimming Shutter := 16#0104, e DMXProduct Detail Profile Shutter := 16#0105, e DMXProduct Detail Barndoor Shutter := 16#0106, e DMXProduct Detail Effects Disc := 16#0107, e DMXProduct Detail Gobo Rotator := 16#0108, e DMXProduct Detail Video := 16#0200, e DMXProduct Detail Slide := 16#0201, e DMXProduct Detail Film := 16#0202, e DMXProduct Detail Oilwheel := 16#0203, e DMXProduct Detail LCDGate := 16#0204, e DMXProduct Detail Fogger Glycol := 16#0300, e DMXProduct Detail Fogger Mineraloil := 16#0301, e DMXProduct Detail Fogger Water := 16#0302, e DMXProduct Detail CO2 := 16#0303, e DMXProduct Detail LN2 := 16#0304, e DMXProduct Detail Bubble := 16#0305, e DMXProduct Detail Flame Propane := 16#0306, e DMXProduct Detail Flame Other := 16#0307, e DMXProduct Detail Olefactory Stimulator := 16#0308, e DMXProduct Detail Snow := 16#0309, e DMXProduct Detail Water Jet := 16#030A, e DMXProduct Detail Wind := 16#030B, e DMXProduct Detail Confetti := 16#030C, e DMXProduct Detail Hazard := 16#030D, e DMXProduct Detail Phase Control := 16#0400, e DMXProduct Detail Reverse Phase Control := 16#0401, e DMXProduct Detail Sine := 16#0402, e DMXProduct Detail PWM := 16#0403, e DMXProduct Detail DC := 16#0404, e DMXProduct Detail Hfballast := 16#0405, e DMXProduct Detail Hfhv Neonballast := 16#0406, e DMXProduct Detail Hfhv El := 16#0407, e DMXProduct Detail Mhr Ballast := 16#0408, e DMXProduct Detail Bitangle Modulation := 16#0409, e DMXProduct Detail Frequency Modulation := 16#040A, e DMXProduct Detail Highfrequency12V := 16#040B, e DMXProduct Detail Relay Mechanical := 16#040C, e DMXProduct Detail Relay Electronic := 16#040D, e DMXProduct Detail Switch Electronic := 16#040E, e DMXProduct Detail Contactor := 16#040F, e DMXProduct Detail Mirrorball Rotator := 16#0500, e DMXProduct Detail Other Rotator := 16#0501, e DMXProduct Detail Kabuki Drop := 16#0502, e DMXProduct Detail Curtain := 16#0503, e DMXProduct Detail Lineset := 16#0504, e DMXProduct Detail Motor Control := 16#0505, e DMXProduct Detail Damper Control := 16#0506, e DMXProduct Detail Splitter := 16#0600, e DMXProduct Detail Ethernet Node := 16#0601, e DMXProduct Detail Merge := 16#0602, e DMXProduct Detail Datapatch := 16#0603, e DMXProduct Detail Wireless Link := 16#0604, e DMXProduct Detail Protocol Convertor := 16#0701, e DMXProduct Detail Analog Demultiplex := 16#0702, e DMXProduct Detail Analog Multiplex := 16#0703, e DMXProduct Detail Switch Panel := 16#0704, e DMXProduct Detail Router := 16#0800, e DMXProduct Detail Fader := 16#0801, e DMXProduct Detail Mixer := 16#0802, e DMXProduct Detail Changeover Manual := 16#0900, e DMXProduct Detail Changeover Auto := 16#0901, e DMXProduct Detail Test := 16#0902, 64 Version: 1.8.0 TE1000
## Page 65

Programming e DMXProduct Detail Gfi Rcd := 16#0A00, e DMXProduct Detail Battery := 16#0A01, e DMXProduct Detail Controllable Breaker := 16#0A02, e DMXProduct Detail Other := 16#7FFF ); END_TYPE Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 4.2.1.7 E_DMXReset Device Type TYPE E_DMXReset Device Type : ( e DMXReset Device Type Warm := 1, e DMXReset Device Type Cold := 255 ); END_TYPE Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 4.2.1.8 E_DMXResponse Type TYPE E_DMXResponse Type : ( e DMXResponse Type Ack := 16#0000, e DMXResponse Type Ack Timer := 16#0001, e DMXResponse Type Nack Reason := 16#0002, e DMXResponse Type Ack Overflow := 16#0003 ); END_TYPE Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 4.2.1.9 E_DMXSensor Type TYPE E_DMXSensor Type : ( e DMXSensor Type Temperature := 16#00, e DMXSensor Type Voltage := 16#01, e DMXSensor Type Current := 16#02, e DMXSensor Type Frequency := 16#03, e DMXSensor Type Resistance := 16#04, e DMXSensor Type Power := 16#05, e DMXSensor Type Mass := 16#06, e DMXSensor Type Length := 16#07, e DMXSensor Type Area := 16#08, e DMXSensor Type Volume := 16#09, e DMXSensor Type Density := 16#0A, e DMXSensor Type Velocity := 16#0B, e DMXSensor Type Acceleration := 16#0C, e DMXSensor Type Force := 16#0D, e DMXSensor Type Energy := 16#0E, e DMXSensor Type Pressure := 16#0F, e DMXSensor Type Time := 16#10, e DMXSensor Type Angle := 16#11, e DMXSensor Type Position X := 16#12, e DMXSensor Type Position Y := 16#13, e DMXSensor Type Position Z := 16#14, e DMXSensor Type Angular Velocity := 16#15, e DMXSensor Type Luminous Intensity := 16#16, e DMXSensor Type Luminous Flux := 16#17, e DMXSensor Type Illuminance := 16#18, TE1000 Version: 1.8.0 65
## Page 66

Programming e DMXSensor Type Chrominance Red := 16#19, e DMXSensor Type Chrominance Green := 16#1A, e DMXSensor Type Chrominance Blue := 16#1B, e DMXSensor Type Contacts := 16#1C, e DMXSensor Type Memory := 16#1D, e DMXSensor Type Items := 16#1E, e DMXSensor Type Humidity := 16#1F, e DMXSensor Type Counter16Bit := 16#20, e DMXSensor Type Other := 16#7F ); END_TYPE Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 4.2.1.10 E_DMXSensor Unit TYPE E_DMXSensor Unit : ( e DMXSensor Unit None := 16#00, e DMXSensor Unit Centigrade := 16#01, e DMXSensor Unit Volts DC := 16#02, e DMXSensor Unit Volts ACPeak := 16#03, e DMXSensor Unit Volts ACRms := 16#04, e DMXSensor Unit Ampere DC := 16#05, e DMXSensor Unit Ampere ACPeak := 16#06, e DMXSensor Unit Ampere ACRms := 16#07, e DMXSensor Unit Hertz := 16#08, e DMXSensor Unit Ohm := 16#09, e DMXSensor Unit Watt := 16#0A, e DMXSensor Unit Kilogram := 16#0B, e DMXSensor Unit Meters := 16#0C, e DMXSensor Unit Meters Squared := 16#0D, e DMXSensor Unit Meters Cubed := 16#0E, e DMXSensor Unit Kilogrammes Per Meter Cubed := 16#0F, e DMXSensor Unit Meters Per Second := 16#10, e DMXSensor Unit Meters Per Second Squared := 16#11, e DMXSensor Unit Newton := 16#12, e DMXSensor Unit Joule := 16#13, e DMXSensor Unit Pascal := 16#14, e DMXSensor Unit Second := 16#15, e DMXSensor Unit Degree := 16#16, e DMXSensor Unit Steradian := 16#17, e DMXSensor Unit Candela := 16#18, e DMXSensor Unit Lumen := 16#19, e DMXSensor Unit Lux := 16#1A, e DMXSensor Unit Ire := 16#1B, e DMXSensor Unit Byte := 16#1C ); END_TYPE Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 4.2.1.11 E_DMXSensor Unit Prefix TYPE E_DMXSensor Unit Prefix : ( e DMXSensor Unit Prefix None := 16#00, e DMXSensor Unit Prefix Deci := 16#01, e DMXSensor Unit Prefix Centi := 16#02, e DMXSensor Unit Prefix Milli := 16#03, e DMXSensor Unit Prefix Micro := 16#04, e DMXSensor Unit Prefix Nano := 16#05, e DMXSensor Unit Prefix Pico := 16#06, e DMXSensor Unit Prefix Fempto := 16#07, e DMXSensor Unit Prefix Atto := 16#08, e DMXSensor Unit Prefix Zepto := 16#09, e DMXSensor Unit Prefix Yocto := 16#0A, e DMXSensor Unit Prefix Deca := 16#11, 66 Version: 1.8.0 TE1000
## Page 67

Programming e DMXSensor Unit Prefix Hecto := 16#12, e DMXSensor Unit Prefix Kilo := 16#13, e DMXSensor Unit Prefix Mega := 16#14, e DMXSensor Unit Prefix Giga := 16#15, e DMXSensor Unit Prefix Terra := 16#16, e DMXSensor Unit Prefix Peta := 16#17, e DMXSensor Unit Prefix Exa := 16#18, e DMXSensor Unit Prefix Zetta := 16#19, e DMXSensor Unit Prefix Yotta := 16#1A ); END_TYPE Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 4.2.1.12 E_DMXSlot Definition TYPE E_DMXSlot Definition : ( e DMXSlot Definition Intensity := 16#0001, e DMXSlot Definition Intensity Master := 16#0002, e DMXSlot Definition Pan := 16#0101, e DMXSlot Definition Tilt := 16#0102, e DMXSlot Definition Color Wheel := 16#0201, e DMXSlot Definition Color Sub Cyan := 16#0202, e DMXSlot Definition Color Sub Yellow := 16#0203, e DMXSlot Definition Color Sub Magenta := 16#0204, e DMXSlot Definition Color Add Red := 16#0205, e DMXSlot Definition Color Add Green := 16#0206, e DMXSlot Definition Color Add Blue := 16#0207, e DMXSlot Definition Color Correction := 16#0208, e DMXSlot Definition Color Scroll := 16#0209, e DMXSlot Definition Color Semaphore := 16#0210, e DMXSlot Definition Static Gobo Wheel := 16#0301, e DMXSlot Definition Roto Gobo Wheel := 16#0302, e DMXSlot Definition Prism Wheel := 16#0303, e DMXSlot Definition Effects Wheel := 16#0304, e DMXSlot Definition Beam Size Iris := 16#0401, e DMXSlot Definition Edge := 16#0402, e DMXSlot Definition Frost := 16#0403, e DMXSlot Definition Strobe := 16#0404, e DMXSlot Definition Zoom := 16#0405, e DMXSlot Definition Framing Shutter := 16#0406, e DMXSlot Definition Shutter Rotate := 16#0407, e DMXSlot Definition Douser := 16#0408, e DMXSlot Definition Barn Door := 16#0409, e DMXSlot Definition Lamp Control := 16#0501, e DMXSlot Definition Fixture Control := 16#0502, e DMXSlot Definition Fixture Speed := 16#0503, e DMXSlot Definition Macro := 16#0504, e DMXSlot Definition Undefined := 16#FFFF ); END_TYPE Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 4.2.1.13 E_DMXSlot Type TYPE E_DMXSlot Type : ( e DMXSlot Type Prinary := 0, e DMXSlot Type Sec Fine := 1, e DMXSlot Type Sec Timing := 2, e DMXSlot Type Sec Speed := 3, e DMXSlot Type Sec Control := 4, e DMXSlot Type Sec Index := 5, e DMXSlot Type Sec Rotation := 6, e DMXSlot Type Sec Index Rotate := 7, TE1000 Version: 1.8.0 67
## Page 68

Programming e DMXSlot Type Sec Undefined := 255 ); END_TYPE Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 4.2.1.14 E_DMXStatus Type TYPE E_DMXStatus Type : ( e DMXStatus Type None := 16#00, e DMXStatus Type Get Last Message := 16#01, e DMXStatus Type Advisory := 16#02, e DMXStatus Type Warning := 16#03, e DMXStatus Type Error := 16#04, e DMXStatus Type Advisory Cleared := 16#12, e DMXSensor Type Warning Cleared := 16#13, e DMXSensor Type Error Cleared := 16#14 ); END_TYPE Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 4.2.2 Structures 4.2.2.1 ST_DMX512Personality TYPE ST_DMX512Personality : STRUCT by Current Personality : BYTE; by Total Personalities : BYTE; END_STRUCT END_TYPE Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 4.2.2.2 ST_DMX512Personality Description TYPE ST_DMX512Personality Description : STRUCT i DMX512Slots Required : INT; s Description : STRING; END_STRUCT END_TYPE Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 4.2.2.3 ST_DMXCommand Buffer TYPE ST_DMXCommand Buffer : STRUCT arr Message Queue : ST_DMXMessage Queue; st Response Table : ST_DMXResponse Table; 68 Version: 1.8.0 TE1000
## Page 69

Programming by Transaction Number : BYTE; END_STRUCT END_TYPE Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 4.2.2.4 ST_DMXDevice Info TYPE ST_DMXDevice Info : STRUCT uli UID : ST_DMXMac; st RDMProtocol Version : ST_DMXRDMProtocol Version; ui Device Model Id : UINT; st Product Category : ST_DMXProduct Category; udi Software Version Id : UDINT; ui DMX512Footprint : UINT; st DMX512Personality : ST_DMX512Personality; ui DMX512Start Address : UINT; ui Sub Device Count : UINT; by Sensor Count : BYTE; END_STRUCT END_TYPE Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 4.2.2.5 ST_DMXMac TYPE ST_DMXMac : STRUCT w High Part : WORD; (* Manufacturer ID / Higher word *) dw Low Part : DWORD; (* Device ID / Lower double word *) END_STRUCT END_TYPE Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 4.2.2.6 ST_DMXMessage Queue TYPE ST_DMXMessage Queue : STRUCT arr Buffer : ARRAY [1..20] OF ST_DMXMessage Queue Item; by Buffer Read Pointer : BYTE; by Buffer Write Pointer : BYTE; by Buffer Demand Counter : BYTE; by Buffer Maximum Demand Counter : BYTE; ui Buffer Overflow Counter : UINT; b Lock Semaphore : BOOL; END_STRUCT END_TYPE Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 TE1000 Version: 1.8.0 69
## Page 70

Programming 4.2.2.7 ST_DMXMessage Queue Item TYPE ST_DMXMessage Queue Item : STRUCT b Entry Is Engaged : BOOL; by Message Length : BYTE; w Destination Manufacturer ID : WORD; dw Destination Device ID : DWORD; by Transaction Number : BYTE; by Port ID : BYTE; by Message Count : BYTE; w Sub Device : WORD; by Command Class : BYTE; w Parameter ID : WORD; by Parameter Data Length : BYTE; arr Parameter Data : ARRAY [0..255] OF BYTE; b Waiting For DMXSlave Response : BOOL; END_STRUCT END_TYPE Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 4.2.2.8 ST_DMXParameter Description TYPE ST_DMXParameter Description : STRUCT by Parameter Data Length : BYTE; e Data Type : E_DMXData Type; e PDCommand Class : E_DMXParameter Description Command Class; e Type : E_DMXSensor Type; e Unit : E_DMXSensor Unit; e Unit Prefix : E_DMXSensor Unit Prefix; dw Min Valid Value : DWORD; dw Max Valid Value : DWORD; dw Default Value : DWORD; s Description : STRING; END_STRUCT END_TYPE Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 4.2.2.9 ST_DMXProduct Category TYPE ST_DMXProduct Category : STRUCT by Coarse : BYTE; by Fine : BYTE; END_STRUCT END_TYPE Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 4.2.2.10 ST_DMXRDMProtocol Version TYPE ST_DMXRDMProtocol Version : STRUCT by Major Version : BYTE; by Minor Version : BYTE; END_STRUCT END_TYPE 70 Version: 1.8.0 TE1000
## Page 71

Programming Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 4.2.2.11 ST_DMXResponse Table TYPE ST_DMXResponse Table : STRUCT arr Response Table : ARRAY [1..20] OF ST_DMXResponse Table Item; by Response Table Counter : BYTE; by Response Table Max Counter : BYTE; ui Response Table Overflow Counter : UINT; b Lock Semaphore : BOOL; END_STRUCT END_TYPE Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 4.2.2.12 ST_DMXResponse Table Item TYPE ST_DMXResponse Table Item : STRUCT b Entry Is Engaged : BOOL; ui Error Id : UINT; i Error Parameter : INT; by Message Length : BYTE; w Destination Manufacturer ID : WORD; dw Destination Device ID : DWORD; w Source Manufacturer ID : WORD; dw Source Device ID : DWORD; by Transaction Number : BYTE; by Response Type : BYTE; by Message Count : BYTE; w Sub Device : WORD; by Command Class : BYTE; w Parameter ID : WORD; by Parameter Data Length : BYTE; arr Parameter Data : ARRAY [0..255] OF BYTE; END_STRUCT END_TYPE Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 4.2.2.13 ST_DMXSensor Definition TYPE ST_DMXSensor Definition : STRUCT e Sensor Type : E_DMXSensor Type; e Sensor Unit : E_DMXSensor Unit; e Sensor Unit Prefix : E_DMXSensor Unit Prefix; i Range Minimum Value : INT; i Range Maximum Value : INT; i Normal Minimum Value : INT; i Normal Maximum Value : INT; by Record Value Support : BYTE; s Description : STRING; END_STRUCT END_TYPE TE1000 Version: 1.8.0 71
## Page 72

Programming Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 4.2.2.14 ST_DMXSensor Value TYPE ST_DMXSensor Value : STRUCT i Present Value : INT; i Lowest Detected Value : INT; i Highest Detected Value : INT; i Recorded Value : INT; END_STRUCT END_TYPE Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 4.2.2.15 ST_DMXSlot Info TYPE ST_DMXSlot Info : STRUCT b Entry Is Valid : BOOL; e Slot Type : E_DMXSlot Type; e Slot Definition : E_DMXSlot Definition; END_STRUCT END_TYPE Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 4.2.2.16 ST_DMXStatus Message TYPE ST_DMXStatus Message : STRUCT b Entry Is Valid : BOOL; i Sub Device Id : INT; e Status Type : E_DMXStatus Type; i Status Message Id : INT; i Data Value01 : INT; i Data Value02 : INT; END_STRUCT END_TYPE Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 4.2.2.17 ST_EL6851Ads Addr TYPE ST_EL6851Ads Addr : STRUCT arr Net Id : ARRAY [0..5] OF USINT; ui Port : UINT; END_STRUCT END_TYPE 72 Version: 1.8.0 TE1000
## Page 73

Programming Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 4.2.2.18 ST_EL6851In Data TYPE ST_EL6851In Data : STRUCT b Transmit Accepted : BOOL; b Receive Toggle : BOOL; b Cyclic Tx DDisabled : BOOL; b Default Data Sent : BOOL; b Frame Sent Toggle : BOOL; b Tx PDOToggle : BOOL; w Channel Length : WORD; by Start Code : BYTE; by Dummy : BYTE; arr Data : ARRAY [1..64] OF BYTE; END_STRUCT END_TYPE Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 4.2.2.19 ST_EL6851In Data Ex TYPE ST_EL6851In Data Ex : STRUCT b Transmit Accepted : BOOL; b Receive Toggle : BOOL; b Cyclic Tx DDisabled : BOOL; b Default Data Sent : BOOL; b Frame Sent Toggle : BOOL; b Tx PDOToggle : BOOL; w Channel Length : WORD; by Start Code : BYTE; by Dummy1 : BYTE; arr Data : ARRAY [1..64] OF BYTE; b Wc State : BOOL; b Input Toggle : BOOL; ui State : UINT; st Ads Addr : ST_EL6851Ads Addr; END_STRUCT END_TYPE Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 4.2.2.20 ST_EL6851Out Data TYPE ST_EL6851Out Data : STRUCT b Transmit Request : BOOL; b Disable Cyclic Tx D : BOOL; b Send Default Data : BOOL; by Dummy1 : BYTE; w Channel Length : WORD; by Start Code : BYTE; by Dummy2 : BYTE; arr Data : ARRAY [1..512] OF BYTE; END_STRUCT END_TYPE TE1000 Version: 1.8.0 73
## Page 74

Programming Requirements Development environment required TC3 PLC library Twin CAT from v3.1.4020.14 Tc2_DMX from 3.5.3.0 4.3 Integration into Twin CAT 4.3.1 EL6851 with CX5120 This example shows how to write a simple PLC program for DMX in Twin CAT and how to link it with the hardware. The task is to search for DMX devices. Example: https://infosys.beckhoff.com/content/1033/tcplclib_tc2_dmx/Resources/6202185099.zip The Twin CAT project is available for download as *.zip file. This must first be unpacked locally so that the archive (*.tnzip file) is available for import into the Twin CAT project. Hardware Setting up the components The following hardware is required: • 1x CX5120 Embedded PC • 1x EL6851 DMX Master terminal • 1x EL9011 end cap Set up the hardware and the DMX components as described in the respective documents. Software Creation of the PLC program Create a new "Twin CAT XAE Project" and a "Standard PLC Project". Add the library Tc2_DMX in the PLC project under "References". Generate a global variable list with the name GVL_EIB and create the following variables: VAR_GLOBAL st EL6851In Data AT %I* : ST_EL6851In Data Ex; st KL6851Out Data AT %Q* : ST_EL6851Out Data; st Command Buffer : ST_DMXCommand Buffer; arr DMXProcess Data : ARRAY [1..512] OF BYTE; END_VAR Name Type Description st EL6851In Data ST_EL6851In Data Ex [} 73] Input variable for the DMX terminal. st EL6851Out Data ST_EL6851Out Data [} 73] Output variable for the DMX terminal. st Command Buffer ST_DMXCommand Buffer Required for communication with DMX. [} 68] arr DMXProcess Data BYTE The data that are to be transmitted cyclically to the DMX devices are transferred to the function block via this variable. For this the Cycle Mode must be active (see also input b Set Cycle Mode). Then create a program (CFC) for background communication with DMX. In this program the function block FB_EL6851Communication Ex [} 18] is called. Make sure to link the communication block with st EL6851In Data, st EL6851Out Data and st Command Buffer. 74 Version: 1.8.0 TE1000
## Page 75

Programming Create a MAIN program (CFC) in which the function block FB_DMXDiscovery512 [} 11] is called. The input st Command Buffer of the function block is linked with the global variable st Command Buffer. If the variable b Start is TRUE, the search for DMX devices is started. The number of found devices is stored in variable i Found Devices and additional information in a DMXDevice Info List. Navigate to the task configuration section and configure the Plc Task. By way of example, the task is assigned priority 16 and a cycle time of 6 ms. Create a further task for the background communication. Assign a higher priority (smaller number) and a lower interval time to this task than the Plc Task. TE1000 Version: 1.8.0 75
## Page 76

Programming Add the program for the communication to this task. More precise information on the task configuration can be found in the description of the function block FB_EL6851Communication Ex [} 18]. I/O configuration Select the CX as target system and initiate a search for its hardware. Make the DMX inputs 1 to 64 available by opening the Process data tab of the EL6851 and selecting the option 0x1A01 under Inputs. 76 Version: 1.8.0 TE1000
## Page 77

Programming In the project instance within the PLC section, you can see that the input and output variables are assigned to the corresponding tasks. Link the global variables of the PLC program with the inputs and outputs of the Ether CAT Terminal. TE1000 Version: 1.8.0 77
## Page 78

Programming Create the Solution and enable the configuration. 78 Version: 1.8.0 TE1000
## Page 79

Appendix 5 Appendix 5.1 Example: Configuration by RDM Configuration of DMX slaves via Remote Device Management (RDM) https://infosys.beckhoff.com/content/1033/tcplclib_tc2_dmx/Resources/577712139.zip for Twin CAT 3.1. Ether CAT functionality The dialogue is only functioning when the ‘Ether CAT OK’ LED lights up green. A red LED indicates a fault in the Ether CAT communication. DMX slaves are sought on the DMX line with the 'DMX Discovery (without Addressing)' button. All DMX slaves found are displayed in the list on the left. An entry is selected by clicking it. After confirming 'Identify', the RDM command is sent to identify the respective DMX device. The start address can be entered in the input field adjacent to the 'Change Start Address' button. After pressing the button, the new start address will be transmitted to the selected DMX device. The number of the DMX device, the start address in the DMX512 frame and the slot size (number of bytes in the DMX frame) for the selected device are displayed in the lower area. 5.2 Example: DMX master Sending the cyclic process data as a DMX master (EL6851) https://infosys.beckhoff.com/content/1033/tcplclib_tc2_dmx/Resources/530449035.zip for Twin CAT 3.1. Preparation TE1000 Version: 1.8.0 79
## Page 80

Appendix The application examples have been tested with a test configuration and are described accordingly. Certain deviations when setting up actual applications are possible. The following hardware and software were used for the test configuration: • Twin CAT PC with Twin CAT version 3.1 (Build 4014.2) or newer. • Beckhoff Ether CAT coupler EK1100, EL6851 and EL9011 terminals. • RGB-LED DMX slave with 3 channels (one for each color). One slot is occupied per channel. Starting the sample program 1. Save the https://infosys.beckhoff.com/content/1033/tcplclib_tc2_dmx/Resources/530449035.zip on your hard disk and unzip it. 2. Open the project with Twin CAT XAE. 3. Connect the hardware accordingly and connect the Ethernet adapter of your PCs to the Ether CAT coupler. 4. Select the local Ethernet adapter (with real-time driver, if required) under Tc2_DMX_Sample_DMX_Master > I/O > Devices > Device 1 (Ether CAT) . Then select the appropriate adapter in the Adapter tab under Search... and confirm it. 5. Activate the configuration and confirm. 80 Version: 1.8.0 TE1000
## Page 81

Appendix 6. Start Twin CAT in run mode. 7. Build the project in Twin CAT XAE by selecting the command Build Tc2_DMX_Sample_DMX_Master in the Build menu. 8. Log in and confirm loading of the program. TE1000 Version: 1.8.0 81
## Page 82

Appendix 9. Start the program. Visualization Specification of the control values for the three colors of the DMX slave in Twin CAT XAE: The example transmits the DMX data cyclically to a DMX slave. The DMX device used here occupies three slots (bytes) in the DMX512 frame. Each slot addresses one of the three colors. If the “Start/Stop” button is pressed, then automatically generated data are transmitted to the DMX device. The speed of the changes can be altered using the horizontal slide control. If the “Start/Stop” button is not pressed, you can change the values manually using the three horizontal sliders. 82 Version: 1.8.0 TE1000
## Page 83

Appendix 5.3 Example: DMX slave Receipt of 64 bytes of data by each of two DMX slaves (EL6851-0010) https://infosys.beckhoff.com/content/1033/tcplclib_tc2_dmx/Resources/578408715.zip for Twin CAT 3.1. Arrays with 64 bytes each in full configuration (all PDOs selected): An EL6851-0010 can read max. 512 bytes (64 bytes in each one of eight arrays, see fig. 1). The arrays can be assigned in the Twin CAT XAE (Process data tab) via the PDO 0x1C13. Example: DMX channels 1 - 64 -- > Index 0x1A01 DMX channels 65 - 128 -- > Index 0x1A02 .... DMX channels 449 - 512 -- > Index 0x1A08 • DMX channels 1 - 64 (default) by selection of PDO 0x1A01: • DMX channels 65 - 128 by selection of PDO 0x1A02: TE1000 Version: 1.8.0 83
## Page 84

Appendix In the example program the first DMX Slave receives the first 64 bytes sent and the second slave the next 64 bytes (figs. 2 + 3; it is also possible for one EL6851-0010 to receive the entire 128 bytes, the division is chosen deliberately in the example). DMX status object: In the DMX status object (index 0x6000, DMX status, Fig. 4) a copy counter is created with index 0x6000:11 (channel length). Example: If PDO 0x1A01 is activated, the value of Channel length is 64 . If PDO 0x1A02 is activated, the value is dec 128 . If both PDOs are activated (0x1A01 and 0x1A02) the value is likewise 128 . dec dec 84 Version: 1.8.0 TE1000
## Page 85

Appendix DMX slave 1 receives 64 bytes of data on channel 1 of the first array (DMX channels 1 - 64) DMX slave 2 receives 64 bytes of data on channel 1 of the second array (DMX channels 65 - 128) The Receive toggle bit (index 0x6000:02) is evaluated and displayed in each case via the FB b Monitor Toggle Bit (Watchdog DMX Slave). TE1000 Version: 1.8.0 85
## Page 86

Appendix 5.4 Support and Service Beckhoff and their partners around the world offer comprehensive support and service, making available fast and competent assistance with all questions related to Beckhoff products and system solutions. Download finder Our download finder contains all the files that we offer you for downloading. You will find application reports, technical documentation, technical drawings, configuration files and much more. The downloads are available in various formats. Beckhoff's branch offices and representatives Please contact your Beckhoff branch office or representative for local support and service on Beckhoff products! The addresses of Beckhoff's branch offices and representatives round the world can be found on our internet page: www.beckhoff.com You will also find further documentation for Beckhoff components there. Beckhoff Support Support offers you comprehensive technical assistance, helping you not only with the application of individual Beckhoff products, but also with other, wide-ranging services: • support • design, programming and commissioning of complex automation systems • and extensive training program for Beckhoff system components Hotline: +49 5246 963-157 e-mail: support@beckhoff.com Beckhoff Service The Beckhoff Service Center supports you in all matters of after-sales service: • on-site service • repair service • spare parts service • hotline service Hotline: +49 5246 963-460 e-mail: service@beckhoff.com Beckhoff Headquarters Beckhoff Automation Gmb H & Co. KG Huelshorstweg 20 33415 Verl Germany Phone: +49 5246 963-0 e-mail: info@beckhoff.com web: www.beckhoff.com 86 Version: 1.8.0 TE1000
## Page 87

Trademark statements Beckhoff®, Twin CAT®, Twin CAT/BSD®, TC/BSD®, Ether CAT®, Ether CAT G®, Ether CAT G10®, Ether CAT P®, Safety over Ether CAT®, Twin SAFE®, XFC®, XTS® and XPlanar® are registered trademarks of and licensed by Beckhoff Automation Gmb H.
## Page 88

More Information: www.beckhoff.com/te1000 Beckhoff Automation Gmb H & Co. KG Hülshorstweg 20 33415 Verl Germany Phone: +49 5246 9630 info@beckhoff.com www.beckhoff.com
