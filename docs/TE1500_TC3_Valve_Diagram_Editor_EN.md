---
title: "TE1500_TC3_Valve_Diagram_Editor_EN"
product: "TE1500"
category: "Engineering_Tools"
tags: ["DIAGRAM", "EDITOR", "VALVE"]
language: "EN"
document_type: "Manual"
version: "1.2"
source_pdf: "https://download.beckhoff.com/download/Document/automation/twincat3/TE1500_TC3_Valve_Diagram_Editor_EN.pdf"
release_date: "2021-06-16"
---
Manual | EN TE1500 Twin CAT 3 | Valve Diagram Editor 2021-06-16 | Version: 1.2

## Page 3

Table of contents Table of contents 1 Foreword.................................................................................................................................................... 5 1.1 Notes on the documentation.............................................................................................................. 5 1.2 Safety instructions............................................................................................................................. 6 1.3 Notes on information security............................................................................................................ 7 2 Introduction................................................................................................................................................ 8 3 Licensing.................................................................................................................................................. 13 4 Characteristic curves.............................................................................................................................. 14 4.1 Linearization.................................................................................................................................... 14 5 The Properties of the Master.................................................................................................................. 17 6 The Properties of the Slave.................................................................................................................... 18 7 Graphically oriented user interface....................................................................................................... 20 8 Table Window........................................................................................................................................... 23 9 Commands............................................................................................................................................... 25 10 Example:................................................................................................................................................... 26 TE1500 Version: 1.2 3

## Page 4

Table of contents 4 Version: 1.2 TE1500

## Page 5

Foreword 1 Foreword 1.1 Notes on the documentation This description is only intended for the use of trained specialists in control and automation engineering who are familiar with applicable national standards. It is essential that the documentation and the following notes and explanations are followed when installing and commissioning the components. It is the duty of the technical personnel to use the documentation published at the respective time of each installation and commissioning. The responsible staff must ensure that the application or use of the products described satisfy all the requirements for safety, including all the relevant laws, regulations, guidelines and standards. Disclaimer The documentation has been prepared with care. The products described are, however, constantly under development. We reserve the right to revise and change the documentation at any time and without prior announcement. No claims for the modification of products that have already been supplied may be made on the basis of the data, diagrams and descriptions in this documentation. Trademarks Beckhoff®, Twin CAT®, Twin CAT/BSD®, TC/BSD®, Ether CAT®, Ether CAT G®, Ether CAT G10®, Ether CAT P®, Safety over Ether CAT®, Twin SAFE®, XFC®, XTS® and XPlanar® are registered trademarks of and licensed by Beckhoff Automation Gmb H. Other designations used in this publication may be trademarks whose use by third parties for their own purposes could violate the rights of the owners. Patent Pending The Ether CAT Technology is covered, including but not limited to the following patent applications and patents: EP1590927, EP1789857, EP1456722, EP2137893, DE102015105702 with corresponding applications or registrations in various other countries. Ether CAT® is a registered trademark and patented technology, licensed by Beckhoff Automation Gmb H, Germany Copyright © Beckhoff Automation Gmb H & Co. KG, Germany. The reproduction, distribution and utilization of this document as well as the communication of its contents to others without express authorization are prohibited. Offenders will be held liable for the payment of damages. All rights reserved in the event of the grant of a patent, utility model or design. TE1500 Version: 1.2 5

## Page 6

Foreword 1.2 Safety instructions Safety regulations Please note the following safety instructions and explanations! Product-specific safety instructions can be found on following pages or in the areas mounting, wiring, commissioning etc. Exclusion of liability All the components are supplied in particular hardware and software configurations appropriate for the application. Modifications to hardware or software configurations other than those described in the documentation are not permitted, and nullify the liability of Beckhoff Automation Gmb H & Co. KG. Personnel qualification This description is only intended for trained specialists in control, automation and drive engineering who are familiar with the applicable national standards. Description of symbols In this documentation the following symbols are used with an accompanying safety instruction or note. The safety instructions must be read carefully and followed without fail! DANGER Serious risk of injury! Failure to follow the safety instructions associated with this symbol directly endangers the life and health of persons. WARNING Risk of injury! Failure to follow the safety instructions associated with this symbol endangers the life and health of per- sons. CAUTION Personal injuries! Failure to follow the safety instructions associated with this symbol can lead to injuries to persons. NOTE Damage to the environment or devices Failure to follow the instructions associated with this symbol can lead to damage to the environment or equipment. Tip or pointer This symbol indicates information that contributes to better understanding. 6 Version: 1.2 TE1500

## Page 7

Foreword 1.3 Notes on information security The products of Beckhoff Automation Gmb H & Co. KG (Beckhoff), insofar as they can be accessed online, are equipped with security functions that support the secure operation of plants, systems, machines and networks. Despite the security functions, the creation, implementation and constant updating of a holistic security concept for the operation are necessary to protect the respective plant, system, machine and networks against cyber threats. The products sold by Beckhoff are only part of the overall security concept. The customer is responsible for preventing unauthorized access by third parties to its equipment, systems, machines and networks. The latter should be connected to the corporate network or the Internet only if appropriate protective measures have been set up. In addition, the recommendations from Beckhoff regarding appropriate protective measures should be observed. Further information regarding information security and industrial security can be found in our https://www.beckhoff.com/secguide. Beckhoff products and solutions undergo continuous further development. This also applies to security functions. In light of this continuous further development, Beckhoff expressly recommends that the products are kept up to date at all times and that updates are installed for the products once they have been made available. Using outdated or unsupported product versions can increase the risk of cyber threats. To stay informed about information security for Beckhoff products, subscribe to the RSS feed at https:// www.beckhoff.com/secinfo. TE1500 Version: 1.2 7

## Page 8

Introduction 2 Introduction The graphically-oriented Valve Diagram Editor, which is similar to the cam plate editor, is used to design the characteristic curve of a hydraulic valve. The Valve Diagram Editor is integrated in the XAE engineering environment, based on Visual Studio™. In the user interface it can be found under the System Manager (see diagram). The valve characteristic curves designed are stored in the respective project file. On starting the system, the characteristic curves are automatically transferred to the e Xtended Automation Runtime (XAR). e Xtended Automation (XA) architecture Information about the TF5050 PLC library can be found here. The appropriate license is required for full use of the TE1500 Valve Diagram Editor, see Licensing. Starting the Valve Diagram Editor The Valve Diagram Editor integrated in Twin CAT 3 can be found in the Twin CAT project created under MOTION > Tables. 1. In the dialog box, select the type of Master: Valve characteristic curve. 8 Version: 1.2 TE1500

## Page 9

Introduction Here you can insert additional Masters and below that corresponding Slaves by right-clicking. 2. Click the Master in the structure tree to open the property pages. ð Not only the properties of the Master [} 17] but also those of the associated Slaves [} 18] can be set on these pages. TE1500 Version: 1.2 9

## Page 10

Introduction The structure of master and slave originates in the cam plate editor. Its advantage here is that measurements can be placed into a separate slave, and that these can then be used as a graph in the background for the construction of an idealized characteristic curve. 10 Version: 1.2 TE1500

## Page 11

Introduction The user's interface to the Valve Diagram Editor is largely graphical. Following interactive graphic entry of the points in the graphic window, the co-ordinates of the points are displayed in the table window above it. New points can only be inserted in the graph, and it is only possible to delete existing points via the graph. The properties of the points - the co-ordinate values - can also be interactively manipulated in the table window. The points are usually joined to one another by straight lines. The straight line transitions are smoothed by entering a transition area (Range) (see graphic below). The range can only be modified through the table window. TE1500 Version: 1.2 11

## Page 12

Introduction The cross that displays the intersections of the straight lines is adapted horizontally to the range. The graphic area allows display not just of the voltage against the velocity, but also of their derivatives. Change display ü The mouse pointer is in the graphic window. 1. Right-click. 2. Select the desired views in the menu window. ð A separate graphic window is thus created for each derivative. 12 Version: 1.2 TE1500

## Page 13

Licensing 3 Licensing The Valve Diagram Editor function is included in the XAE of Twin CAT, therefore no additional download of a software module is necessary. A license is required to save a valve diagram in a project file. See "Ordering and activation of Twin CAT 3 standard licenses". Valve diagrams that have already been created in a project cannot be changed; however, they remain in the project. A license is only required on workstations on which valve diagrams are designed or changed. If no license is available on the workstation, a message appears the first time a new project is created, which you have to confirm: Required licenses: TE1500 Valve Diagram Editor This license is an engineering license and must be activated on the engeneering system. For testing purposes, a demo mode simulation can be used without a license. Restrictions in the demo version The valve diagrams generated without a license can be loaded into the XAR. However, they are ignored when the project is saved. TE1500 Version: 1.2 13

## Page 14

Characteristic curves 4 Characteristic curves When hydraulic cylinders are used together with the appropriate valves, the way in which the cylinder and valves are constructed often results in a non-linear transmission behavior of the axis, and thus of the system that is to be controlled. The velocity of the hydraulic cylinder is not, in other words, proportional to the valve's drive signal. This can occur, for instance, if a hydraulic cylinder is used in which the two faces to which pressure is applied to not have a 1:1 area ratio. Non-linear valve characteristic curves are another typical reason for this behavior. The following diagram illustrates a possible form for such a characteristic curve. 4.1 Linearization Problems can arise in association with a non-linear controlled system, in that a linear controller design based on this non-linear controlled system is found to be inadequate, because the controller can only be set up to operate optimally over one part of its working area. The consequence is a loss in the control quality in many applications, or even that the control behavior is unacceptable. The purpose of the curve linearization module presented here is to facilitate continued use of the familiar and proven procedure for designing linear control loops, but to improve the control quality. The superposition of a characteristic curve module compensates for the non-linearity of the control system, resulting in approximately linear behavior. This procedure is illustrated in the following functional diagram. The curve employed in this procedure must describe the inverse of the transmission behavior of the particular combination of valve and hydraulic cylinder being used as exactly as possible; the net result of the inclusion of this characteristic curve module in series with the physically existing controlled system then results in an approximation to a linear curve. 14 Version: 1.2 TE1500

## Page 15

Characteristic curves Make sure the characteristic curve is as exact as possible in the knees. These points are particu- larly critical with regard to the linearization. The following functional diagram illustrates the use of the characteristic curve linearization to the Twin CAT axis control loop: The curve required for the linearization process can be created and edited with the Valve Diagram Editor. After the curve has been created and loaded into the real-time environment, it can be activated within the axis control loop. This takes place in the Solution Explorer on the Analog tab of the drive or in general by ADS command. The unique table ID of the valve characteristic curve must be entered in the row "Valve characteristic curve: Id of the valve characteristic curve". You can choose between the types "Linear" and "Spline" in the row "Valve characteristic curve: interpolation type". (A table with equidistant reference points is created in the real-time environment, and this is interpolated at runtime using either a linear or a spline function.) TE1500 Version: 1.2 15

## Page 16

Characteristic curves It is also possible to insert an output offset before and after the characteristic curve module. The parameter "Drift compensation (DAC offset)" operates in the signal flow before the characteristic curve. An offset correction in the form of a velocity (in mm/s, for instance) can be added here. An offset can be inserted in the signal flow after the characteristic curve with the parameter "Valve characteristic curve output offset [-1.0 ... 1.0]". At this point in the signal flow the offset is presented as a percentage value relative to the maximum output magnitude. Using the hydraulic characteristic curves The hydraulic characteristic curve can only be activated through entry of the table ID when • the table has been loaded into the real-time environment. • controller enable has not been granted for the axis. The parameters described on the drive's analog tab can also be specified by means of ADS commands (sent, for example, from the PLC). Drive types: The characteristic curve linearization described is supported by the following drive types: • M2400 DAC 1 / DAC 2 / DAC 3 / DAC 4 • KL4XXX, EL4XXX, EL2521, IP2521/IP2512, KL2502_30K • KL2531, KL2541 • Drive (universal) 16 Version: 1.2 TE1500

## Page 17

The Properties of the Master 5 The Properties of the Master The name of the Master can initially be defined on the Properties page of the Master. To import slaves, Add Existing Item can be selected by right-clicking the Master in the tree view. It is possible here to export the master data, including the slave data. It is possible to import this data via the tree view under the Tables item. TE1500 Version: 1.2 17

## Page 18

The Properties of the Slave 6 The Properties of the Slave The name can be edited on the Properties page of the Slave. One of the axes can be assigned to the slave. Button/Input Description Area Ratio A/B If the Automatic Area Ratio checkbox is activated, a fixed area ratio for the two sides of the piston can be entered in the Area Ratio A/B field. The voltages are then automatically calculated for the B-side, which means that these values can no longer be modified in either the graph or the table. Import Files in the form (velocity, voltage value) can be read in using the Import button. The values can then be displayed as cubic splines. The type of the spline still needs to be adjusted in the table, according to the values. Download The Download button can be used to transfer the current data to the NC, as long as the slave is not coupled, since the tables are deleted completely and refilled with data. Velocity Percent/Absolute Whether work takes place with percentage or absolute velocity is decided by the selection of Velocity Percent or Absolute. If Velocity Percent is chosen, then when Velocity A 100% is changed, the velocity values in the diagram are re- scaled in such a way that the percentage values remain constant. Table ID The Table ID provides a unique identifying number (1-255) for the table, with the aid of which the table data is stored in the NC. Table ID The table ID can be changed by right-clicking the slave in the tree view and selecting the command Change ID. 18 Version: 1.2 TE1500

## Page 19

The Properties of the Slave The data of the motion diagram can be saved in an export file (*.xti) with Save Slave.... This data can be imported again under a master. TE1500 Version: 1.2 19

## Page 20

Graphically oriented user interface 7 Graphically oriented user interface The characteristic curve (voltage against velocity) of the Slave and its derivatives is displayed in a separate graphic window. Toolbar The toolbar of the graphic window contains buttons that only refer to the diagram: as well as the special commands for the cam plate editor: The graphic commands are divided into: • Input mode: There are also zoom and move commands: • Zoom • Zoom all 20 Version: 1.2 TE1500

## Page 21

Graphically oriented user interface • Move: This command only becomes active when the zoom command has been called. If you activate the menu item Pan Outside, you can move across boundaries. Pan Outside can be activated via the menu of the graphic window by right-clicking. Overview window on/off The window can only be enabled via the button if you have zoomed into the window. If the overview window is activated, the window not only shows which section the graphic is in, you can also move the section or zoom into a new section. The horizontal and vertical scrollbars allow you to move the graphic section. The horizontal scrollbar applies to all graphic windows simultaneously. If you use an Intelli Mouse with a scroll wheel, you can zoom using the scroll wheel. Show/hide toolbar The toolbar containing the commands can be shown or hidden by right-clicking (in the graphic window) the following menu: If the Horizontal scrollbar option is enabled, a horizontal scrollbar is available for this window. All horizontal scrollbars are synchronized. The Cross on Point option causes the start and end points of motion sections to be indicated by a cross. The Show online data option displays the table data currently in the NC with the corresponding table ID as a cubic spline. Currently this can result in a distorted display, because the linear tables are displayed as natural splines (second derivative at the edges equals null). The data is displayed in the same color, but somewhat darker. The data is automatically transferred by ADS, as soon as Online Mode is switched on. The current data can be read by switching the mode on and off. When the configuration is activated, the information for creating and transferring the tables to the NC is generated automatically. TE1500 Version: 1.2 21

## Page 22

Graphically oriented user interface Use Download data to transfer the data to the NC. In this case the restriction applies that the slave is not coupled for the function (see slave properties). In other words, only the data is transferred. 22 Version: 1.2 TE1500

## Page 23

Table Window 8 Table Window The values for the motion section are displayed in the table window. Table header Description Function Indicates the function type (see function types). Velocity Absolute velocity value Velocity [%] Percentage velocity value Voltage [%] percentage voltage Range Absolute value of the transition range Range [%] Percentage value of the transition range The values can be changed via the keyboard. The percentage and absolute values are directly related, which means that when changing one value, the other is immediately adapted on pressing the Return key or exiting the box. Changing function types • The standard types (Synchron/Automatic) can be changed by command in the graph. • The function type can also be changed in the combo box. The first time the combo box or a box in the first column is clicked, a rectangle is temporarily opened in the position window. This contains the corner points (starting point and end point) of the section. As soon as another field in the table window is activated, either the rectangle for this one is shown, or no rectangle is displayed at all. The types correspond to those of VDI Guideline 2143. Added to this are the cubic splines with the following boundary conditions: • natural, • tangential and • periodic. TE1500 Version: 1.2 23

## Page 24

Table Window Type Description Boundary condition Synchronous Synchronous motion (constant transmission ratio Constant velocity v, acceleration a=0 between slave and master, corresponds to normalized velocity) Automatic Automatic adaptation to the boundary values (velocity, acceleration) Spline Internal section of a cubic spline Spline Natural Initial or end section of a natural cubic spline a=0 Spline Tangential Initial or end section of a tangential cubic spline Spline Periodic Initial or end section of a cyclic cubic spline Polyline Start or end section of a linear spline. Changing the type of spline at the first point implies that the spline type as a whole is changed, including that of the end point. 24 Version: 1.2 TE1500

## Page 25

Commands 9 Commands Toolbar The commands for the Valve Diagram Editor, which can be called in the toolbar of the respective graphic window, can only be called if the input mode of the graphic commands is activated. Overview Adaptation to extreme values: The window's co-ordinates are adjusted to the extreme values of the motion. Measure distance: The horizontal and vertical distance to the current point from the point first clicked with the left mouse button is displayed at the top right hand corner of the window (please hold the mouse button down for this). Current position: The absolute horizontal and vertical position of the point currently clicked with the left mouse button is displayed at the top right hand corner of the window (please hold the mouse button down for this). The following commands only apply in the graphic window for the position: Horizontal shift: • Moves the selected point horizontally. • In the velocity window for synchronous functions: shift along a straight line in the position window. • The left-hand edge of the graphic area can be temporarily moved in this way, so that the scale can be more easily read. Vertical shift: Moves the selected point vertically. Shift: Moves the selected point. Insert point: Inserts a point at the cursor position. Delete point: The selected point is deleted, as is the corresponding section. TE1500 Version: 1.2 25

## Page 26

Example: 10 Example: Procedure to load measured values and to design a correspondingly adapted characteristic curve 1. First, create a new Slave under the already existing Master. 2. Read in the measured values with the Import command on the Properties page of the Slave [} 18]. 3. Confirm the prompt regarding deleting the current data with OK. ð The data are loaded. Adapting the graphic window 1. In the toolbar , click Adaptation to extreme values. 2. The graphic window is adapted to the data read in. 3. The measured data is represented as a cubic spline. 4. If the variation in the measured value is too large, this can result in overshoots in the display. 5. Manually change the function type in the table. ð The behavior in the table can be changed in this way. Creating a characteristic curve 1. Add a new Slave. OR: 2. Switch to the already existing Slave that is to be modified. 3. Right-click inside the graph and place the measured values in the background with the command Show other Slaves. 26 Version: 1.2 TE1500

## Page 27

Example: 4. Move the points and adapt the current characteristic curve to these measuring points, if necessary by zooming into it. ð The measuring points will not normally fill out the entire range of the characteristic curve. The current characteristic curve extends beyond the measured values. If you have several measurements, you can save each one in a separate Slave. Hiding unneeded measurements 1. Right-click the Slave in the tree view. 2. Click Deactivate. TE1500 Version: 1.2 27

## Page 29

More Information: www.beckhoff.com/te1500 Beckhoff Automation Gmb H & Co. KG Hülshorstweg 20 33415 Verl Germany Phone: +49 5246 9630 info@beckhoff.com www.beckhoff.com
