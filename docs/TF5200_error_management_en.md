---
title: "TF5200_error_management_en"
product: "TF5200"
category: "Motion_Control"
tags: ["NC"]
language: "EN"
document_type: "Manual"
version: "1.06"
source_pdf: "https://download.beckhoff.com/download/Document/automation/twincat3/TF5200_error_management_en.pdf"
release_date: "2025-06-06"
---
Functional description | EN TF5200 | Twin CAT 3 CNC Error management 6/6/2025 | Version: 1.06
## Page 3

Notes on the documentation Notes on the documentation This description is only intended for the use of trained specialists in control and automation engineering who are familiar with the applicable national standards. It is essential that the documentation and the following notes and explanations are followed when installing and commissioning the components. It is the duty of the technical personnel to use the documentation published at the respective time of each installation and commissioning. The responsible staff must ensure that the application or use of the products described satisfy all the requirements for safety, including all the relevant laws, regulations, guidelines and standards. Disclaimer The documentation has been prepared with care. The products described are, however, constantly under development. We reserve the right to revise and change the documentation at any time and without prior announcement. No claims for the modification of products that have already been supplied may be made on the basis of the data, diagrams and descriptions in this documentation. Trademarks Beckhoff®, Twin CAT®, Twin CAT/BSD®, TC/BSD®, Ether CAT®, Ether CAT G®, Ether CAT G10®, Ether CAT P®, Safety over Ether CAT®, Twin SAFE®, XFC®, XTS® and XPlanar® are registered trademarks of and licensed by Beckhoff Automation Gmb H. Other designations used in this publication may be trademarks whose use by third parties for their own purposes could violate the rights of the owners. Patent Pending The Ether CAT technology is patent protected, in particular by the following applications and patents: EP1590927, EP1789857, EP1456722, EP2137893, DE102015105702 with corresponding applications or registrations in various other countries. Ether CAT® is registered trademark and patented technology, licensed by Beckhoff Automation Gmb H, Germany Copyright © Beckhoff Automation Gmb H & Co. KG, Germany. The reproduction, distribution and utilisation of this document as well as the communication of its contents to others without express authorisation are prohibited. Offenders will be held liable for the payment of damages. All rights reserved in the event of the grant of a patent, utility model or design. TF5200 | Twin CAT 3 CNC Version: 1.06 3 Error management
## Page 4

General and safety instructions General and safety instructions Icons used and their meanings This documentation uses the following icons next to the safety instruction and the associated text. Please read the (safety) instructions carefully and comply with them at all times. Icons in explanatory text 1. Indicates an action. ð Indicates an action statement. DANGER Acute danger to life! If you fail to comply with the safety instruction next to this icon, there is immediate danger to human life and health. CAUTION Personal injury and damage to machines! If you fail to comply with the safety instruction next to this icon, it may result in personal injury or damage to machines. NOTICE Restriction or error This icon describes restrictions or warns of errors. Tips and other notes This icon indicates information to assist in general understanding or to provide additional informa- tion. General example Example that clarifies the text. NC programming example Programming example (complete NC program or program sequence) of the described function or NC com- mand. Specific version information Optional or restricted function. The availability of this function depends on the configuration and the scope of the version. 4 Version: 1.06 TF5200 | Twin CAT 3 CNC Error management
## Page 5

Table of contents Table of contents Notes on the documentation.................................................................................................................... 3 General and safety instructions.............................................................................................................. 4 1 Overview.................................................................................................................................................... 8 2 Description................................................................................................................................................ 9 2.1 Reporting and recording errors....................................................................................................... 11 2.1.1 Suppressing all warnings................................................................................................. 13 2.1.2 Output examples.............................................................................................................. 13 2.2 Filtering error messages................................................................................................................. 14 2.2.1 Programming example of filtering error messages.......................................................... 17 2.3 Activating filter rules........................................................................................................................ 18 2.4 Outputting user error messages...................................................................................................... 19 2.4.1 User-defined error output (#ERROR)............................................................................... 19 3 Parameter................................................................................................................................................. 23 3.1 Overview......................................................................................................................................... 23 3.2 Description...................................................................................................................................... 25 3.2.1 Start-up parameters......................................................................................................... 25 3.2.2 Channel parameters......................................................................................................... 31 3.2.3 Axis parameter................................................................................................................. 34 3.3 CNC objects.................................................................................................................................... 36 3.4 HLI parameters............................................................................................................................... 39 4 Support and Service............................................................................................................................... 41 Index......................................................................................................................................................... 42 TF5200 | Twin CAT 3 CNC Version: 5 Error management
## Page 6

Table of contents 6 Version: TF5200 | Twin CAT 3 CNC Error management
## Page 7

List of figures List of figures Fig. 1 Overview of reading and evaluating an error message within the CNC....................................... 9 Fig. 2 Process and pre-process error messages in the CNC................................................................. 10 Fig. 3 Overview of the 3 output options.................................................................................................. 11 Fig. 4 Overview of output options with the PLC block interface............................................................. 12 Fig. 5 Output example - log file.............................................................................................................. 13 Fig. 6 Message from the channel........................................................................................................... 14 Fig. 7 Message from an axis.................................................................................................................. 15 Fig. 8 Message from the start-up........................................................................................................... 16 Fig. 9 Activating filter rules..................................................................................................................... 18 Fig. 10 Output of user error texts to log file.............................................................................................. 19 TF5200 | Twin CAT 3 CNC Version: 1.06 7 Error management
## Page 8

Overview 1 Overview Task The error management functionality consists of the following topics: • Output location and scope of the error output • Error message filters, both global and channel- or axis-specific • Adding additional information to error messages • Output of user error messages by the user This functionality has been available since CNC Build V3.00.xx. Parameterisation Error output parameters are defined in the start-up parameters. Error messages are filtered and supplemented depending on the level on which the filter is intended to act. Programming The Parameters [} 23] section contains a detailed description of each parameter. The user can force user error messages via the #ERROR [} 19] command in the NC program. Mandatory note on references to other documents For the sake of clarity, links to other documents and parameters are abbreviated, e.g. [PROG] for the Programming Manual or P-AXIS-00001 for an axis parameter. For technical reasons, these links only function in the Online Help (HTML5, CHM) but not in pdf files since pdfs do not support cross-linking. 8 Version: 1.06 TF5200 | Twin CAT 3 CNC Error management
## Page 9

Description 2 Description If a channel, single axis or platform error occurs, a corresponding message is output. Errors can be pre- processed by a CNC diagnostics instance and supplemented with additional information (access to database or file system). The user can define parameters for the response (filter) to individual error messages or set them up via the PLC. The extended error message is forwarded to the higher-level diagnostics system via a diagnostics instance. The occurrence of an error is immediately reported to other devices in the controller (e.g. PLC) in a compact message containing the error ID, error class and time. These devices can then directly derive an internal error reaction. By default, the CNC takes care of reading and pre-processing CNC error messages. Forwarding errors through the communication system to a higher-level visualisation system is specifically incorporated by the user. Managing error messages The error management functionality allows the user to control the output of error messages. The CNC then acts as a collection point for all information provided. Fig. 1: Overview of reading and evaluating an error message within the CNC TF5200 | Twin CAT 3 CNC Version: 1.06 9 Error management
## Page 10

Description Process • Record and collect all errors of the CNC • Filter: Suppress and filter errors • Add. information: Add external/internal error information • Format: Pre-process and format an error • Report & log: Log errors to file (LOG) -> log file • Report & log: Report pre-processed errors (REPORT) -> on-screen display Fig. 2: Process and pre-process error messages in the CNC 10 Version: 1.06 TF5200 | Twin CAT 3 CNC Error management
## Page 11

Description 2.1 Reporting and recording errors The output of error messages is defined globally by the P-STUP-00167 [} 25] parameter. All the required options must be set in P-STUP-00167. If you set NO_WARNINGS exclusively, this will result in no output. The output control mode can also read and write via CNC objects. • Read via cnc_error_manager_mode_r [} 37] • Write via cnc_error_manager_mode_w [} 37] Output options Basically, the following 3 parallel output options are available: 1. Print: Output to screen/shell 2. Log: Output to log file 3. Report: Application-specific output Fig. 3: Overview of the 3 output options Print Depending on the application, errors can be output directly to screen or to the shell. Logging to file Errors are logged to a log file. They can be defined by name via the P-STUP-00170 [} 26] parameter and their maximum size can be defined in P-STUP-00171 [} 26]. Once the log file overwrites the maximum size defined, the original file is copied to a backup file and the original file is deleted. Application-specific report An application-specific output is additionally possible. TF5200 | Twin CAT 3 CNC Version: 1.06 11 Error management
## Page 12

Description “Direct” output to PLC In addition to the output of a pre-processed error message via PRINT/LOG/REPORT, the error message is sent in “raw format” directly to the PLC after it occurs. As required, this output can be fully disabled via the logging mode P-STUP-00167 [} 25] in the Error Manager. Fig. 4: Overview of output options with the PLC block interface The error output from the PLC cannot be filtered. The corresponding filters must be implemented in the PLC: If the PLC is no longer required to evaluate other CNC error messages, the output to the PLC can be completely skipped by the Control Unit (Cu) on the HLI. error_protocol_mode PRINT | LOG | REPORT | SEND_NOT_TO_PLC 12 Version: 1.06 TF5200 | Twin CAT 3 CNC Error management
## Page 13

Description 2.1.1 Suppressing all warnings To avoid annoying end-users with a barrage of warnings, it may be useful to suppress them in the user display and log them to log file (P-STUP-00170 [} 26]). When the controller is reset, a warning is generated by default. However, the warning can be suppressed via the P-STUP-00166 [} 25] parameter. This requires a change to the logging mode setting: Logging mode: Filtering warnings – TC3_Event Logger Warnings only to log file error_protocol_mode LOG | PRINT | REPORT | TC3_EVENT_LOGGER | PRINT_NO_WARNINGS | REPORT_NO_WARNINGS Suppress warnings even to log file error_protocol_mode LOG | PRINT | REPORT | TC3_EVENT_LOGGER | PRINT_NO_WARNINGS | REPORT_NO_WARNINGS | LOG_NO_WARNINGS Suppress all warnings: This also includes suppressing the output of warnings to the PLC. error_protocol_mode LOG | PRINT | REPORT | TC3_EVENT_LOGGER | NO_WARNINGS This is identical with: error_protocol_mode LOG | PRINT | REPORT | TC3_EVENT_LOGGER | PRINT_NO_WARNINGS | REPORT_NO_WARNINGS | LOG_NO_WARNINGS | SEND_TO_PLC_NO_WARNINGS 2.1.2 Output examples Logging to file The output of an error message to the logging file takes place as follows: Fig. 5: Output example - log file TF5200 | Twin CAT 3 CNC Version: 1.06 13 Error management
## Page 14

Description 2.2 Filtering error messages The output of error messages can be filtered globally or specifically by channel or axis Identifying the filter level The type of message in the log file indicates the level on which the error message or warning must be filtered. Channel error messages or warnings are identified as follows: Fig. 6: Message from the channel Axis error messages or warnings are identified as follows: 14 Version: 1.06 TF5200 | Twin CAT 3 CNC Error management
## Page 15

Description Fig. 7: Message from an axis TF5200 | Twin CAT 3 CNC Version: 1.06 15 Error management
## Page 16

Description A message from the start-up has neither an axis nor a channel entry: Fig. 8: Message from the start-up 16 Version: 1.06 TF5200 | Twin CAT 3 CNC Error management
## Page 17

Description 2.2.1 Programming example of filtering error messages As an example, step 1 should be to filter the warning ID 20048 and step 2 the filter should be extended by an additional test. This is a warning in the channel; then define the following parameters: Filtering a single error message error_filter[0].reason 20048 (P-CHAN-00378) (HIDE - no message output) error_filter[0].conditional_action HIDE (P-CHAN-00381) These settings suppress the output of the warning ID 20048. In order to use this filter for multiple messages, such as IDs 20048, 20622 and 2169, the line would have to be extended as follows: error_filter[0].reason 20048, 20622 , 21691 A maximum of 5 error IDs can be assigned in a filter. Changing specific warnings for errors error_filter[0].reason 20048 (P-CHAN-00378) error_filter[0].action NONE (P-CHAN-00379 no action) (Action: output as syntax error) error_filter[0].conditional_action F_SYNTAX (P-CHAN-00381) These settings change the warning ID 20048 in the output into an error of recovery class 2. TF5200 | Twin CAT 3 CNC Version: 1.06 17 Error management
## Page 18

Description 2.3 Activating filter rules Filter rules can be dynamically activated or deactivated from the GUI or the PLC. Activation/deactivation can be carried out at platform level or specifically for a channel or axis, depending on whether the corresponding bit is set in the “activation_bit” data item when the filter rules are defined. Fig. 9: Activating filter rules Activation from the GUI This is dependent on the interaction between parameter and CNC object. Consider the following pairings for use: • Platform: P-STUP-00188 and cnc_error_filter_w [} 36] • Channel-specific: P-CHAN-00380 and mc_error_error_filter_w [} 36] • Axis-specific: P-AXIS-00629 and ac_<i>_error_filter_w [} 37] Activation from the PLC This is dependent on the interaction between parameter and the corresponding Control Unit (CU). Consider the following pairings for use: • Platform: P-STUP-00188 and CU error_filter [} 39] • Channel-specific: P-CHAN-00380 and CU error_filter [} 39] • Axis-specific: P-AXIS-00629 and CU error_filter [} 39] 18 Version: 1.06 TF5200 | Twin CAT 3 CNC Error management
## Page 19

Description 2.4 Outputting user error messages The user has the option of outputting user error messages in the NC program via the #ERROR [} 19] NC command. The related error texts are saved to a text file with parameters defined in P-STUP-00169 [} 26]. The output is sent to the log file defined via P-STUP-00170 [} 26]. Error IDs saved to text file together with the related error texts are only written to the log file. The range for possible error IDs is 1 – 1000. Customer-specific error text in log file Content of user-specific error text file: 455 error text to ID455 The call in the NC program then looks like this: #ERROR [ID455 RC2 PV1=5 PV2=4.999 PM1=2 PM2=3] Other information on the #ERROR command: [PROG://User-defined error output [} 19]] The output in the log file: Fig. 10: Output of user error texts to log file For user-defined error messages under Twin CAT3, see: Output of user-defined error messages to HMI 2.4.1 User-defined error output (#ERROR) The NC command #ERROR allows the output of user-defined error messages which are further processed by the higher-level GUI (GUI = Graphical User Interface). Additional parameters offer the option of specifying the error more precisely. TF5200 | Twin CAT 3 CNC Version: 1.06 19 Error management
## Page 20

Description The error number (ID) and error message are assigned in a user-defined file (FCT-M7// Outputting user error messages [} 19]). The memory location (path) and filename are entered in the parameter P-STUP-00169 [} 26]. Syntax: #ERROR [ [ID=..] [RC=..] [MID=..] {PV<i>=..} {PM<i>=..} {PIV<i>=..} ] ID=.. Error number: 1...1000: The numerical value determines the user-specific error number to be output. RC=.. Error remedy class: 0: Warning, no transition to error state. Program execution is continued. 2: Error, transition to error state. Can be cleared with NC–RESET. 7: Fatal error, transition to ‘system error’ state. Requires controller restart. MID=.. Multiple ID. Counter acts as a distinguishing feature if the #ERROR command with the same error number (ID) is used several times in an NC program. MID must be a positive integer. PV<i>=.. Max. 5 (1 <= i <= 5) user-specific numerical values (PV1... PV5) in real format can also be output in the error message. As of V3.1.3080.14 and V3.1.3107.48, strings can also be output, e.g.. PV1=“Test“. Maximum length is limited to 23 characters. PM<i>=.. The maximum of 5 (1 <= i <= 5) PM parameters (PM1... PM5) specify the meaning of the PV parameters more precisely. 0: IGNORE, value has no meaning 1: Limit value 2: Current value 3: Error value 4: Expected value 5: Corrected value 6: Logical axis number 7: Drive type 8: Logical control element number 9: State 10: Transition 11: Sender 12: Class 13: Instance 14: Identification number 15: State 16: Ring number 17: Block number 18: Lower limit value 19: Upper limit value 20: Initial value 21: Final value PIV<i>=.. The maximum of 4 (1 <= i <= 4) PIV parameters (PIV1... PIV4) transfer additional information in real format. 20 Version: 1.06 TF5200 | Twin CAT 3 CNC Error management
## Page 21

Description For non-programmed parameters, the following default values are valid: ID 1 RC 0 MID 0 PV1... PV5 0.0 PM1…PM5 1 PIV1... PIV4 0.0 User-defined error output ; ------- ; Output of warning with ID 100, multiple identifier 10 #ERROR [ID100 RC0 MID10] ; .. ; ------- ; Output of warning with ID 455 with parameter ; Error 455 with parameters ; Parameter 1 – current value is 1 ; Parameter 2 – incorrect value is 4.999 #ERROR [ID455 RC2 PV1=5 PV2=4.999 PM1=2 PM2=3] ; .. ; Error output with string as of V3.1.3080.14 ; Expected value Text A ; Incorrect value Text B #ERROR [ID123 RC2 PV1="Text-A" PM1=4 PV2="Text-B" PM2=3] ;… ; ------- ; Fatal error 999 #ERROR [ID999 RC7] TF5200 | Twin CAT 3 CNC Version: 1.06 21 Error management
## Page 22

Description 22 Version: 1.06 TF5200 | Twin CAT 3 CNC Error management
## Page 23

Parameter 3 Parameter 3.1 Overview Start-up parameters ID Parameter Description P-STUP-00166 no_error_message_at_ Logging a CNC reset reset P-STUP-00167 error_protocol_mode Logging mode P-STUP-00168 error_text_of_id Name of the file for error message texts P-STUP-00169 error_text_user_of_id Name of the file for user-specific error message texts P-STUP-00170 error_log_file_name Name of the error log file P-STUP-00171 error_log_file_max_siz Maximum size of the error log file e P-STUP-00172 error_plc_wait_cycles Waiting cycles before evaluation of PLC activation P-STUP-00173 error_ao_name Additional descriptive text (AO name) P-STUP-00186 error_filter[i].reason Identification of the error (cause) P-STUP-00187 error_filter[i].action Error action to be performed P-STUP-00188 error_filter[i].conditional Activation via PLC/HMI _activation P-STUP-00189 error_filter[i].conditional Action that is only activated after enabling by PLC/HMI _action P-STUP-00190 error_filter[i].conditional Additional comparison parameter in the event of a drive error _param message P-STUP-00191 error_filter[i].conditional Individual additional error information for output _output P-STUP-00200 error_text_cycles_of_id Name of the file for error message texts of CNC cycles Channel parameters ID Parameter Description P-CHAN-00338 mdi_log_file Name of the manual block log file P-CHAN-00339 mdi_log_file_max_size Maximum size of the manual block log file P-CHAN-00378 error_filter[i].reason Identification of the error (cause) P-CHAN-00379 error_filter[i].action Error action to be performed P-CHAN-00380 error_filter[i].conditional Activation via PLC/HMI _activation P-CHAN-00381 error_filter[i].conditional Action that is only activated after enabling by PLC/HMI _action P-CHAN-00382 error_filter[i].conditional Additional comparison parameter in the event of a drive error _param message P-CHAN-00383 error_filter[i].conditional Individual additional error information for output _output Axis parameter ID Parameter Description P-AXIS-00627 error_filter[i].reason Identification of the error (cause) P-AXIS-00628 error_filter[i].action Error action to be performed P-AXIS-00629 error_filter[i].conditional Activation via PLC/HMI _activation TF5200 | Twin CAT 3 CNC Version: 1.06 23 Error management
## Page 24

Parameter ID Parameter Description P-AXIS-00630 error_filter[i].conditional Action that is only activated after enabling by PLC/HMI _action P-AXIS-00631 error_filter[i].conditional Additional comparison parameter in the event of a drive error _param message P-AXIS-00632 error_filter[i].conditional Individual additional error information for output _output 24 Version: 1.06 TF5200 | Twin CAT 3 CNC Error management
## Page 25

Parameter 3.2 Description 3.2.1 Start-up parameters P-STUP-00166 Logging a CNC reset as event in error message output Description This parameter defines whether the CNC reset triggered by the user is included as an event in the error message log. Previous error messages are acknowledged when the CNC is reset. This always occurs regardless of the setting of P-STUP-00166. Parameter no_error_message_at_reset Data type BOOLEAN Data range 0: a CNC reset is logged as warning ID 270076 in the error message output. 1 a CNC reset is not logged Dimension ---- Default value 0 Remarks P-STUP-00167 Logging mode of error output Description This parameter controls the output and scope of the error output. Parameter error_protocol_mode Data type STRING Data range Flag Meaning FILTER_OFF No filters are evaluated VERBOSE Extended internal diagnostics WITHOUT_ERROR_MANAGER Direct output without error management PRINT Execute print output LOG Log output to log file REPORT Log output to log file SEND_TO_PLC_NONE Suppress output to the PLC PRINT_EXTENDED Extended print output LOG_EXTENDED Extended log output REPORT_EXTENDED Extended application-specific output PRINT_NO_WARNINGS Warnings are suppressed in the print output LOG_NO_WARNINGS Warnings are suppressed in the log output REPORT_NO_WARNINGS Warnings are suppressed in the report output SEND_TO_PLC_NO_WARNINGS Suppress warnings to PLC STARTUP_NO_WARNINGS Suppress warnings during controller start-up NO_WARNINGS Suppress all warnings TC3_EVENT_LOGGER Output to TC3 Event Logger TC3_EVENT_LOGGER_CONFIRMED Output to TC3 Event Logger, automatic confirmation (state confirmed) on deletion of error message TC3_EVENT_LOGGER_NO_CONFIRMATI Output to TC3 Event Logger without ON confirmation request Dimension ---- Default value LOG | PRINT | REPORT Remarks Note: For example, to suppress warnings in the print output, the entire mode must be set accordingly. TF5200 | Twin CAT 3 CNC Version: 1.06 25 Error management
## Page 26

Parameter error_protocol_mode LOG | PRINT | REPORT | PRINT_NO_WARNINGS P-STUP-00168 Name of the file for error message texts Description Name of the file containing the error message texts which belong to the ID (error number). These can be used for output to the log file. This file is used to assign an error number to the related error message text. The file contains one line in the following format for each error ID: <Error-ID> TABULATOR <Error-Text> The default file 'err_text_version_eng.txt' is assumed if no file is specified. Parameter error_text_of_id Data type STRING Data range Maximum 256 characters Dimension ---- Default value err_text_version_eng.txt Remarks P-STUP-00169 Name of the file for user-specific error message texts Description Comparable to default error texts (see P-STUP-00168), you can also specify user-specific texts in this file. These texts are for error IDs in the range [1;1000] which the user can define himself with the NC command #ERROR [} 19] and they are used for errors in the Mc COM interfaces. This file is used to assign an error number to the related user-specific error message text. The file contains one line in the following format for each error ID: <Error-ID> TABULATOR <user_specific_error-text> The filename is configured with relative or absolute path name. For further information see (FCT-M7// Outputting user error messages [} 19]) Parameter error_text_user_of_id Data type STRING Data range Maximum 256 characters Dimension ---- Default value * Remarks * Note: The default value of variables is a blank string. The returned error IDs of the Mc COM methods are resolved for error values 292030- 292033 (ERR_KIN_TRAFO_CONFIG/ -INITIALIZE/ -FORWARD/ -BACKWARD). P-STUP-00170 Name of the error log file Description Name of the error log file (including directory and path information). If no complete name is specified, no log file is generated and the error message ID 296000 is output. If the parameter is not configured, the error log file is generated with the default file name. Parameter error_log_file_name Data type STRING Data range Maximum of 256 characters Dimension ---- Default value <Twin CATInstallation>\Components\Mc\CNC\Diagnostics\error.log Remarks The default filename and the associated path are application-dependent. P-STUP-00171 Maximum size of the error log file in bytes Description This parameter defines the maximum size of the error log file. Parameter error_log_file_max_size 26 Version: 1.06 TF5200 | Twin CAT 3 CNC Error management
## Page 27

Parameter Data type SGN32 Data range > 0 :maximum size of the error log file. If this size is exceeded, the original file is copied to a backup file (extension: <name>.bak) and the contents of the original file are deleted. == 0 : no backup file is created. Dimension ---- Default value 100000 Remarks P-STUP-00172 Waiting cycles before evaluation of PLC activation Description Waiting cycles in CNC ticks after an error has occurred before the PLC's activation mask for the filter rules is evaluated. Parameter error_plc_wait_cycles Data type UNS32 Data range 0 ... MAX(UNS32) Dimension ---- Default value - Remarks P-STUP-00173 Additional descriptive text (AO name) Description Descriptive text (architecture object) that is additionally appended in the event of an error message. Parameter error_ao_name Data type STRING Data range Maximum 83 characters Dimension ---- Default value * Remarks * Note: The default value of variables is a blank string. P-STUP-00186 Cause of error Description The individual error codes can be listed as numbers or texts, whereby the entire row must comply with the following syntax: ( number | text ) {, ( number | text ) } where: number:= CNC error number text:=" error-specific text " Example: error_filter[0].reason "D012:", 123000, 123001 If an error is logged, the program looks in the defined platform/channel/axis filters whether a user-specific filter rule is defined for it. Parameter error_filter[i].reason where i = 0 ... 3 (maximum number of filters, application-specific) Data type STRING Data range Maximum of 96 characters Dimension ---- Default value * Remarks * Note: The default value of variables is a blank string. P-STUP-00187 Error action TF5200 | Twin CAT 3 CNC Version: 1.06 27 Error management
## Page 28

Parameter Description Action that is to be performed if an error occurs. Parameter error_filter[i].action where i = 0 ... 3 (maximum number of filters, application-specific) Data type STRING Data range ACTION = NONE | DRIVE_STATE_REQ | PRE_RUN_STATE_REQ | RUN_STATE_REQ NONE: No action DRIVE_STATE_REQ: Read out drive status PRE_RUN_STATE_REQ: Error at start-up of the controller bus in PRE-run state RUN_STATE_REQ: Error at start-up of the controller bus in Run state Dimension ---- Default value * Remarks For SERCOS drive profiles: DRIVE_STATE_REQ: S-0-0095 diagnostic PRE_RUN_STATE_REQ: S-0-0021: list of unknown operation data in CP2 -> CP3, command 127 RUN_STATE_REQ: S-0-0022: list of unknown operation data in CP3 -> CP4, command 128 For Profi Drive profiles: <all actions> Parameter 945 For CANopen profiles <all actions> Parameter ID603F * Note: The default value of variables is a blank string. P-STUP-00188 Conditional activation Description This filter rule is activated when the corresponding bit is set via the user interface or the PLC (HLI::Control Unit- Activating error filter rules - Platform [} 39]). Parameter error_filter[i].conditional_activation where i = 0 ... 3 (maximum Number of filters, application-specific) Data type UNS32 Data range 32-bit Dimension ---- Default value 0 Remarks Parameterisation example: error_filter[0].conditional_activation 0x2 An activation bit = 0 means that the action is always executed. P-STUP-00189 Conditional action Description Action that is to be executed if an error occurs and if the condition applies. Parameter error_filter[i].conditional_action where i = 0 ... 3 (maximum number of filters, application-specific) Data type STRING Data range ACTION = NONE | ( [ HIDE ] [ FORCE ] ) FORCE = F_WARNING | F_SYNTAX | F_ERROR | F_SEVERE | F_FATAL HIDE = [ HIDE ] [ HIDE_LOG ] [ HIDE_PRINT ] [ HIDE_REPORT ] NONE: no action 28 Version: 1.06 TF5200 | Twin CAT 3 CNC Error management
## Page 29

Parameter HIDE: Suppress every error output HIDE_LOG: Error output to error log file is suppressed HIDE_DISPLAY: Error output is suppressed HIDE_REPORT: Application-specific error output is suppressed F_WARNING: Error is output as a WARNING (remedy class = 0) F_SYNTAX: Error is output as a syntax error (remedy class = 2) F_ERROR: Error due to NC program or other operator action (error remedy class = 5) F_SEVERE: Severe error, requires a warm start (remedy class = 6) F_FATAL: Severe error, requires a complete cold start (remedy class = 7) Dimension ---- Default value * Remarks * Note: The default value of variables is a blank string. P-STUP-00190 Conditional filter activation Description The individual error codes can be listed as numbers or texts, whereby the entire row must comply with the following syntax: ( number | text ) {, ( number | text ) } where: number:= CNC error number text := " error-specific text " Parameter error_filter[i].conditional_param where i = 0 ... 3 (maximum number of filters, application- specific) Data type STRING Data range Maximum of 96 characters Dimension ---- Default value * Remarks Parameterisation example: error_filter[0].conditional_param "D012:", 123, 1001 Individual error texts are only checked when the SERCOS drive error S95 is read out. Error numbers are only checked in case of SERCOS drive errors (S21 and S22) and in case of Profi Drive drive errors (parameter 945). * Note: The default value of variables is a blank string. P-STUP-00191 Output of additional error information Description This text is forwarded transparently via the CNC_ERROR_INFO data structure if the filter condition applies, i.e. users have a possibility of conditionally also including additional error information in the output. Parameter error_filter[i].conditional_output where i = 0 ... 3 (maximum number of filters, application-specific) Data type STRING Data range Maximum 32 characters Dimension ---- Default value * Remarks * Note: The default value of variables is a blank string. P-STUP-00200 Name of the file for error message texts of CNC cycles TF5200 | Twin CAT 3 CNC Version: 1.06 29 Error management
## Page 30

Parameter Description Name of the file containing the error message texts which belong to the ID (error number). These can be used for output to the log file. This file is used to assign an error number to the related error message text. The file contains one line in the following format for each error ID: <Error-ID> TABULATOR <Error-Text> Parameter error_text_cycles_of_id Data type STRING Data range Maximum 256 characters Dimension ---- Default value err_text_cycles_eng.txt Remarks 30 Version: 1.06 TF5200 | Twin CAT 3 CNC Error management
## Page 31

Parameter 3.2.2 Channel parameters P-CHAN-00338 Name of the manual block log file Description If the name is specified, each manual block command of the NC channel is logged to this file. In addition to later diagnostics capability, this file is also used for error display. This means that, if a CNC error occurs within the manual block, the commanded manual block is immediately displayed in the error message. Parameter mdi_log_file Data type STRING Data range Maximum 256 characters Dimension ---- Default value * Remarks * Note: The default value of variables is a blank string. P-CHAN-00339 Maximum size of the manual block log file Description Since the log file grows with every new manual block, this parameter limits the file size. If the size of the log file is exceeded, it is first cleared automatically before the current manual block is logged. Parameter mdi_log_file_max_size Data type UNS32 Data range 0 ... MAX(UNS32) Dimension ---- Default value 0 * Remarks * no size limitation P-CHAN-00378 Error cause (filtering error messages in the channel) Description The individual error codes can be listed as numbers or texts, whereby the entire row must comply with the following syntax: ( number | text ) {, ( number | text ) } where: number:= CNC error number text:=" error-specific text " Example: error_filter[0].reason "D012:", 123000, 123001 If an error is logged, the program looks in the defined platform/channel/axis filters whether a user-specific filter rule is defined for it. Parameter error_filter[i].reason where i = 0 ... 3 (maximum number of filters, application-specific) Data type STRING Data range Maximum of 96 characters Dimension ---- Default value * Remarks * Note: The default value of variables is a blank string. P-CHAN-00379 Error action (filtering error messages in the channel) Description Action that is to be performed if an error occurs. Parameter error_filter[i].action where i = 0 ... 3 (maximum number of filters, application-specific) Data type STRING Data range ACTION = NONE | DRIVE_STATE_REQ | PRE_RUN_STATE_REQ | RUN_STATE_REQ TF5200 | Twin CAT 3 CNC Version: 1.06 31 Error management
## Page 32

Parameter Keyword Meaning NONE No action DRIVE_STATE_REQ Reading out the drive status PRE_RUN_STATE_REQ Error at start-up of the controller bus in PRE-run state RUN_STATE_REQ Error at start-up of the controller bus in Run state Dimension ---- Default value * Remarks For SERCOS drive profiles: • DRIVE_STATE_REQ S-0-0095 diagnostic • PRE_RUN_STATE_REQ S-0-0021: list of unknown operation data in CP2 -> CP3, command 127 • RUN_STATE_REQ S-0-0022: list of unknown operation data in CP3 -> CP4, command 128 For Profi Drive profiles: • <all actions> Parameter 945 For CANopen profiles • <all actions> Parameter ID603F * Note: The default value of variables is a blank string. P-CHAN-00380 Conditional activation (filtering error messages in the channel) Description This filter rule is activated when the corresponding bit is set via the user interface or the PLC (HLI::Control Unit- Activating error filter rules - Channel [} 39]). Parameter error_filter[i].conditional_activation where i = 0 ... 3 (maximum Number of filters, application-specific) Data type UNS32 Data range 32-bit Dimension ---- Default value 0 Remarks Parameterisation example: error_filter[0].conditional_activation 0x2 An activation bit = 0 means that the action is always executed. P-CHAN-00381 Conditional action (filtering error messages in the channel) Description Action that is to be executed if an error occurs and if the condition applies. Parameter error_filter[i].conditional_action where i = 0 ... 3 (maximum number of filters, application-specific) Data type STRING Data range ACTION = NONE | ( [ HIDE ] [ FORCE ] ) FORCE = F_WARNING | F_SYNTAX | F_ERROR | F_SEVERE | F_FATAL HIDE = [ HIDE ] [ HIDE_LOG ] [ HIDE_PRINT ] [ HIDE_REPORT ] NONE: no action HIDE: Suppress every error output HIDE_LOG: Error output to error log file is suppressed HIDE_DISPLAY: Error output is suppressed HIDE_REPORT: Application-specific error output is suppressed 32 Version: 1.06 TF5200 | Twin CAT 3 CNC Error management
## Page 33

Parameter F_WARNING: Error is output as a WARNING (remedy class = 0) F_SYNTAX: Error is output as a syntax error (remedy class = 2) F_ERROR: Error due to NC program or other operator action (error remedy class = 5) F_SEVERE: Severe error, requires a warm start (remedy class = 6) F_FATAL: Severe error, requires a complete cold start (remedy class = 7) Dimension ---- Default value * Remarks * Note: The default value of variables is a blank string. P-CHAN-00382 Conditional filter activation (filtering error messages in the channel)) Description The individual error codes can be listed as numbers or texts, whereby the entire row must comply with the following syntax: ( number | text ) {, ( number | text ) } where: number:= CNC error number text := " error-specific text " Parameter error_filter[i].conditional_param where i = 0 ... 3 (maximum number of filters, application- specific) Data type STRING Data range Maximum of 96 characters Dimension ---- Default value * Remarks Parameterisation example: error_filter[0].conditional_param "D012:", 123, 1001 Individual error texts are currently only checked when the SERCOS drive error S95 is read out. Error numbers are only checked in case of SERCOS drive errors (S21 and S22) and in case of Profi Drive drive errors (parameter 945). * Note: The default value of variables is a blank string. P-CHAN-00383 Output of additional error information (filtering error messages in the channel)) Description This text is forwarded transparently via the CNC_ERROR_INFO data structure if the filter condition applies. This means that the user has the option to output an additional error text conditionally. Parameter error_filter[i].conditional_output where i = 0 ... 3 (maximum number of filters, application-specific) Data type STRING Data range Maximum of 32 characters Dimension ---- Default value * Remarks * Note: The default value of variables is a blank string. TF5200 | Twin CAT 3 CNC Version: 1.06 33 Error management
## Page 34

Parameter 3.2.3 Axis parameter P-AXIS-00627 Cause of error (filtering of axis error messages) Description The individual error codes can be listed as numbers or texts, whereby the entire row must comply with the following syntax: ( number | text ) {, ( number | text ) } where: number:= CNC error number text:="error-specific text" Example: error_filter[0].reason "D012:", 123000, 123001 If an error is logged, the program looks in the defined platform/channel/axis filters whether a user-specific filter rule is defined for it. Parameter error_filter[i].reason where i = 0 ... 3 (maximum number of filters, application-specific) Data type STRING Data range Maximum of 96 characters Axis types T, R, S Dimension T: ---- R,S: ---- Default value * Remarks * Note: The default value of variables is a blank string. P-AXIS-00628 Error action (filtering of axis error messages) Description Action that is to be performed if an error occurs. Parameter error_filter[i].action where i = 0 ... 3 (maximum number of filters, application-specific) Data type STRING Data range ACTION = NONE | DRIVE_STATE_REQ | PRE_RUN_STATE_REQ | RUN_STATE_REQ NONE: No action DRIVE_STATE_REQ: Read out drive status PRE_RUN_STATE_REQ: Error at start-up of the controller bus in PRE-run state RUN_STATE_REQ: Error at start-up of the controller bus in Run state Axis types T, R, S Dimension T: ---- R,S: ---- Default value * Remarks For SERCOS drive profiles: DRIVE_STATE_REQ S-0-0095 diagnostic PRE_RUN_STATE_REQ S-0-0021: list of unknown operation data in CP2 -> CP3, command 127 RUN_STATE_REQ S-0-0022: list of unknown operation data in CP3 -> CP4, command 128 For Profi Drive profiles: <all actions> Parameter 945 For CANopen profiles 34 Version: 1.06 TF5200 | Twin CAT 3 CNC Error management
## Page 35

Parameter <all actions> Parameter ID603F * Note: The default value of variables is a blank string. P-AXIS-00629 Conditional activation (filtering of axis error messages) Description This filter rule is activated when the applicable bit is set via the user interface or the PLC (HLI:: Activating error filter rules - Axis [} 39]) control unit. Parameter error_filter[i].conditional_activation where i = 0 ... 3 (maximum Number of filters, application-specific) Data type UNS32 Data range 32-bit Axis types T, R, S Dimension T: ---- R,S: ---- Default value 0 Remarks Parameterisation example: error_filter[0].conditional_activation 0x2 An activation bit = 0 means that the action is always executed. P-AXIS-00630 Conditional action (filtering of axis error messages) Description Action that is to be executed if an error occurs and if the condition applies. Parameter error_filter[i].conditional_action where i = 0 ... 3 (maximum number of filters, application-specific) Data type STRING Data range ACTION = NONE | ( [ HIDE ] [ FORCE ] ) FORCE = F_WARNING | F_SYNTAX | F_ERROR | F_SEVERE | F_FATAL HIDE = [ HIDE ] [ HIDE_LOG ] [ HIDE_PRINT ] [ HIDE_REPORT ] NONE: No action HIDE: Suppress every error output HIDE_LOG: Error output to error log file is suppressed HIDE_DISPLAY: Error output is suppressed HIDE_REPORT: Application-specific error output is suppressed F_WARNING: Error is output as a WARNING (remedy class = 0) F_SYNTAX: Error is output as a syntax error (remedy class = 2) F_ERROR: Error due to NC program or other operator action (error remedy class = 5) F_SEVERE: Severe error, requires a warm start (remedy class = 6) F_FATAL: Severe error, requires a complete cold start (remedy class = 7) Axis types T, R, S Dimension T: ---- R,S: ---- Default value * Remarks * Note: The default value of variables is a blank string. P-AXIS-00631 Conditional filter activation (filtering of axis error messages) Description The individual error codes can be listed as numbers or texts, whereby the entire row must comply with the following syntax: ( number | text ) {, ( number | text ) } where: number:= CNC error number text := " error-specific text " TF5200 | Twin CAT 3 CNC Version: 1.06 35 Error management
## Page 36

Parameter Parameter error_filter[i].conditional_param where i = 0 ... 3 (maximum number of filters, application-specific) Data type STRING Data range Maximum of 96 characters Axis types T, R, S Dimension T: ---- R,S: ---- Default value * Remarks Parameterisation example: error_filter[0].conditional_param "D012:", 123, 1001 Individual error texts are currently only checked when the SERCOS drive error S95 is read out. Error numbers are checked only in the case of SERCOS drive errors (S21 and S22) and in the case of Profi Drive drive errors (parameter 945). * Note: The default value of variables is a blank string. P-AXIS-00632 Output of additional error information (filtering of axis error messages) Description This text is forwarded transparently via the CNC_ERROR_INFO data structure if the filter condition applies, i.e. users have a possibility of conditionally also including additional error information in the output. Parameter error_filter[i].conditional_output where i = 0 ... 3 (maximum number of filters, application-specific) Data type STRING Data range Maximum of 32 characters Axis types T, R, S Dimension T: ---- R,S: ---- Default value * Remarks * Note: The default value of variables is a blank string. 3.3 CNC objects For further information on addressing CNC objects, see [FCT-C13//Description]. Activating filter rules Name cnc_error_filter_w Description The individual filter rules of the platform can be activated and deactivated via the GUI by setting the applicable bitmask. This is dependent on the parameters defined in P- STUP-00188. Therefore, up to 32 different filter rules can be switched. Example of the assigned filter definition: error_filter[0].activation_bit 0x1 Task COM (Port 553) Index group 0x120100 Index offset 0x26C Data type UNS32 Length 4 Attributes write Unit - Remarks See Error filter definition [} 18] in start-up list Name mc_error_filter_w 36 Version: 1.06 TF5200 | Twin CAT 3 CNC Error management
## Page 37

Parameter Description The individual filter rules of a channel can be activated and deactivated via the GUI by setting the applicable bitmask. This is dependent on the parameters defined in P- CHAN-00380. Therefore, up to 32 different filter rules can be switched. Example of the assigned filter definition: error_filter[0].activation_bit 0x1 Task COM (Port 553) Index group 0x12010<C > Index offset 0x419 ID Data type UNS32 Length 4 Attributes write Unit - Remarks Name ac_<A >_error_filter_w ID Description The individual filter rules of an axis can be activated and deactivated via the GUI by setting the applicable bitmask. This is dependent on the parameters defined in P- AXIS-00629. Therefore, up to 32 different filter rules can be switched. Example of the assigned filter definition: error_filter[0].activation_bit 0x1 Task COM (Port 553) Index group 0x120200 Index offset 0x<A >0028 ID Data type UNS32 Length 4 Attributes write Unit - Remarks Access to logging mode Name cnc_error_manager_mode_r Description CNC object to read the error management mode. See P-STUP-00167. Task COM (Port 553) Index group 0x120100 Index offset 0x293 Data type UN32 Length/byte 4 Attributes read Unit - Remarks The assignments and meanings of the bits are described in the table [} 37]. Name cnc_error_manager_mode_w Description CNC object to write the error management mode. See P-STUP-00167. Task COM (Port 553) Index group 0x120100 Index offset 0x26D Data type UN32 Length/byte 4 Attributes write Unit - Remarks The assignments and meanings of the bits are described in the table [} 37]. Identifier Bit assignment Meaning FILTER_OFF 0x00004 No filters are evaluated VERBOSE 0x00008 Extended internal diagnostics WITHOUT_ERROR_MANAGER 0x00001 Direct output without error management TF5200 | Twin CAT 3 CNC Version: 1.06 37 Error management
## Page 38

Parameter Identifier Bit assignment Meaning PRINT 0x00010 Execute print output LOG 0x00020 Log output to log file REPORT 0x00040 Log output to log file SEND_TO_PLC_NONE 0x20000 Suppress output to the PLC PRINT_EXTENDED 0x00100 Extended print output LOG_EXTENDED 0x00200 Extended log output REPORT_EXTENDED 0x00400 Extended application-specific output PRINT_NO_WARNINGS 0x01000 Warnings are suppressed in the print output LOG_NO_WARNINGS 0x02000 Warnings are suppressed in the log output REPORT_NO_WARNINGS 0x04000 Warnings are suppressed in the report output SEND_TO_PLC_NO_WARNING 0x08000 Suppress warnings to PLC S STARTUP_NO_WARNINGS 0x10000 Suppress warnings during controller start-up NO_WARNINGS 0x1f000 Suppress all warnings TC3_EVENT_LOGGER 0x80000 Output to TC3 Event Logger Name log errors Description This object defines whether CNC error messages are output to the PLC: (TRUE: default) Task GEO (Port 551) Index group 0x120300 Index offset 0x4 Data type BOOLEAN Length 1 Attributes read/ write Unit [-] Remarks Values : TRUE/FALSE 38 Version: 1.06 TF5200 | Twin CAT 3 CNC Error management
## Page 39

Parameter 3.4 HLI parameters Activate error filter rules - platform Description Here, the individual error filters can be activated/deactivated by the 32-bit mask according to their activation bits. For example, the following rule is activated by setting the first bit (command_w = 0x00000001): error_filter[0].activation_bit 0x1 Data type MC_CONTROL_UNS32_UNIT, see description of control unit Unit [-] Access PLC reads request_r + state_r and writes command_w + enable_w ST path gp Pform^.error_filter Commanded and requested value ST element .command_w .request_r Data type UDINT Return value ST element .state_r Data type UDINT Redirection ST element .enable_w Activate error filter rules - channel Description Here, the individual error filters can be activated/deactivated by the 32-bit mask according to their activation bits. For example, the following rule is activated by setting the first bit (command_w = 0x00000001): error_filter[0].activation_bit 0x1 Data type MC_CONTROL_UNS32_UNIT, see description of control unit Unit [-] Access PLC reads request_r + state_r and writes command_w + enable_w ST path gp Ch[channel_idx]^.head.error_filter Commanded and requested value ST element .command_w .request_r Data type UDINT Return value ST element .state_r Data type UDINT Redirection ST element .enable_w Activate error filter rules - axis Description Here, the individual error filters can be activated/deactivated by the 32-bit mask according to their activation bits. For example, the following rule is activated by setting the first bit (command_w = 0x00000001): error_filter[0].activation_bit 0x1 TF5200 | Twin CAT 3 CNC Version: 1.06 39 Error management
## Page 40

Parameter Data type MC_CONTROL_UNS32_UNIT, see description of control unit Unit [-] Access PLC reads request_r + state_r and writes command_w + enable_w ST path gp Ax[axis_idx]^.head.error_filter Commanded and requested value ST element .command_w .request_r Data type UDINT Return value ST element .state_r Data type UDINT Redirection ST element .enable_w 40 Version: 1.06 TF5200 | Twin CAT 3 CNC Error management
## Page 41

Support and Service 4 Support and Service Beckhoff and their partners around the world offer comprehensive support and service, making available fast and competent assistance with all questions related to Beckhoff products and system solutions. Download finder Our download finder contains all the files that we offer you for downloading. You will find application reports, technical documentation, technical drawings, configuration files and much more. The downloads are available in various formats. Beckhoff's branch offices and representatives Please contact your Beckhoff branch office or representative for local support and service on Beckhoff products! The addresses of Beckhoff's branch offices and representatives round the world can be found on our internet page: www.beckhoff.com You will also find further documentation for Beckhoff components there. Beckhoff Support Support offers you comprehensive technical assistance, helping you not only with the application of individual Beckhoff products, but also with other, wide-ranging services: • support • design, programming and commissioning of complex automation systems • and extensive training program for Beckhoff system components Hotline: +49 5246 963-157 e-mail: support@beckhoff.com Beckhoff Service The Beckhoff Service Center supports you in all matters of after-sales service: • on-site service • repair service • spare parts service • hotline service Hotline: +49 5246 963-460 e-mail: service@beckhoff.com Beckhoff Headquarters Beckhoff Automation Gmb H & Co. KG Huelshorstweg 20 33415 Verl Germany Phone: +49 5246 963-0 e-mail: info@beckhoff.com web: www.beckhoff.com TF5200 | Twin CAT 3 CNC Version: 1.06 41 Error management
## Page 42

Index Index E error filter activate axis 39 activate channel 39 activate platform 39 P P-AXIS-00627 34 P-AXIS-00628 34 P-AXIS-00629 35 P-AXIS-00630 35 P-AXIS-00631 35 P-AXIS-00632 36 P-CHAN-00338 31 P-CHAN-00339 31 P-CHAN-00378 31 P-CHAN-00379 31 P-CHAN-00380 32 P-CHAN-00381 32 P-CHAN-00382 33 P-CHAN-00383 33 P-STUP-00166 25 P-STUP-00167 25 P-STUP-00168 26 P-STUP-00169 26 P-STUP-00170 26 P-STUP-00171 26 P-STUP-00172 27 P-STUP-00173 27 P-STUP-00186 27 P-STUP-00187 27 P-STUP-00188 28 P-STUP-00189 28 P-STUP-00190 29 P-STUP-00191 29 P-STUP-00200 29 42 Version: 1.06 TF5200 | Twin CAT 3 CNC Error management
## Page 44

More Information: www.beckhoff.com/TF5200 Beckhoff Automation Gmb H & Co. KG Hülshorstweg 20 33415 Verl Germany Phone: +49 5246 9630 info@beckhoff.com www.beckhoff.com
