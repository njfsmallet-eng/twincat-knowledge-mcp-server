---
title: "TF5200_export_external_variables_en"
product: "TF5200"
category: "Motion_Control"
tags: ["NC"]
language: "EN"
document_type: "Manual"
version: "1.24"
source_pdf: "https://download.beckhoff.com/download/Document/automation/twincat3/TF5200_export_external_variables_en.pdf"
release_date: "2025-06-10"
---
Functional description | EN TF5200 | Twin CAT 3 CNC Exporting V. E. variables 6/10/2025 | Version: 1.24
## Page 3

Notes on the documentation Notes on the documentation This description is only intended for the use of trained specialists in control and automation engineering who are familiar with the applicable national standards. It is essential that the documentation and the following notes and explanations are followed when installing and commissioning the components. It is the duty of the technical personnel to use the documentation published at the respective time of each installation and commissioning. The responsible staff must ensure that the application or use of the products described satisfy all the requirements for safety, including all the relevant laws, regulations, guidelines and standards. Disclaimer The documentation has been prepared with care. The products described are, however, constantly under development. We reserve the right to revise and change the documentation at any time and without prior announcement. No claims for the modification of products that have already been supplied may be made on the basis of the data, diagrams and descriptions in this documentation. Trademarks Beckhoff®, Twin CAT®, Twin CAT/BSD®, TC/BSD®, Ether CAT®, Ether CAT G®, Ether CAT G10®, Ether CAT P®, Safety over Ether CAT®, Twin SAFE®, XFC®, XTS® and XPlanar® are registered trademarks of and licensed by Beckhoff Automation Gmb H. Other designations used in this publication may be trademarks whose use by third parties for their own purposes could violate the rights of the owners. Patent Pending The Ether CAT technology is patent protected, in particular by the following applications and patents: EP1590927, EP1789857, EP1456722, EP2137893, DE102015105702 with corresponding applications or registrations in various other countries. Ether CAT® is registered trademark and patented technology, licensed by Beckhoff Automation Gmb H, Germany Copyright © Beckhoff Automation Gmb H & Co. KG, Germany. The reproduction, distribution and utilisation of this document as well as the communication of its contents to others without express authorisation are prohibited. Offenders will be held liable for the payment of damages. All rights reserved in the event of the grant of a patent, utility model or design. TF5200 | Twin CAT 3 CNC Version: 1.24 3 Exporting V. E. variables
## Page 4

General and safety instructions General and safety instructions Icons used and their meanings This documentation uses the following icons next to the safety instruction and the associated text. Please read the (safety) instructions carefully and comply with them at all times. Icons in explanatory text 1. Indicates an action. ð Indicates an action statement. DANGER Acute danger to life! If you fail to comply with the safety instruction next to this icon, there is immediate danger to human life and health. CAUTION Personal injury and damage to machines! If you fail to comply with the safety instruction next to this icon, it may result in personal injury or damage to machines. NOTICE Restriction or error This icon describes restrictions or warns of errors. Tips and other notes This icon indicates information to assist in general understanding or to provide additional informa- tion. General example Example that clarifies the text. NC programming example Programming example (complete NC program or program sequence) of the described function or NC com- mand. Specific version information Optional or restricted function. The availability of this function depends on the configuration and the scope of the version. 4 Version: 1.24 TF5200 | Twin CAT 3 CNC Exporting V. E. variables
## Page 5

Table of contents Table of contents Notes on the documentation.................................................................................................................... 3 General and safety instructions.............................................................................................................. 4 1 Overview.................................................................................................................................................... 8 2 Description................................................................................................................................................ 9 2.1 Generating the output file (#EXPORT VE)........................................................................................ 9 2.2 Errors on exporting.......................................................................................................................... 10 3 Example 1- Use short text strings......................................................................................................... 11 3.1 V. E. variable list.............................................................................................................................. 11 3.2 Example of output file for CODESYS.............................................................................................. 12 3.3 PLC example................................................................................................................................... 13 3.4 Example of output file for MULTIPROG.......................................................................................... 14 4 Restrictions in the case of a multi-channel controller structure........................................................ 15 5 Short instructions using the export functionality for V. E. variables.................................................. 16 6 Parameter................................................................................................................................................. 17 7 Support and Service............................................................................................................................... 18 Index......................................................................................................................................................... 19 TF5200 | Twin CAT 3 CNC Version: 5 Exporting V. E. variables
## Page 6

Table of contents 6 Version: TF5200 | Twin CAT 3 CNC Exporting V. E. variables
## Page 7

List of figures List of figures TF5200 | Twin CAT 3 CNC Version: 1.24 7 Exporting V. E. variables
## Page 8

Overview 1 Overview Task The export functionality generates a channel-specific data structure containing all variables from an existing “List of External Variables” (referred to as V. E List or Variable) of a machine configuration. Characteristics This generated data structure can be imported to a PLC environment, thus permitting the PLC to access the V. E variables. It also permits the rapid and reliable creation of an interface between the NC controller and the PLC for data transfer. Parametrisation The parameter P-EXTV-00022 defines the specified number of characters is used for string variables. Programming The data structure is exported to a small NC program by the #EXPORT VE[...] [} 9] command Since the configuration of V. E variables no longer changes after start-up, this operation is usually executed only once when the machine is started. Mandatory note on references to other documents For the sake of clarity, links to other documents and parameters are abbreviated, e.g. [PROG] for the Programming Manual or P-AXIS-00001 for an axis parameter. For technical reasons, these links only function in the Online Help (HTML5, CHM) but not in pdf files since pdfs do not support cross-linking. 8 Version: 1.24 TF5200 | Twin CAT 3 CNC Exporting V. E. variables
## Page 9

Description 2 Description Data transfer between PLC and CNC via V. E variables V. E variables permit the transfer of data in any direction between an NC program and the PLC. The PLC can access V. E variables by simulating them as a data structure in the PLC. Initial situation A variable list of the configuration is created. 2.1 Generating the output file (#EXPORT VE) The NC command #EXPORT VE [..] generates the required data structure for the V. E. variables for the channel in which the command is used. With multi-channel systems, the NC command must be used in each channel in order to generate the data structure for the particular channel. The identifier <i> in the filename of the output file is a placeholder for the CNC channel number. Syntax: #EXPORT VE [ 3S | TWINCAT | KW ] 3S / TWINCAT For Twin CAT 2 and the original 3S CODESYS 2.3 PLC environment: Output file: plc_3s_ve_types_ch_<i>.exp For Twin CAT 3 and the original 3S CODESYS 3.5 PLC environment: Output file: plc_3s_ve_types_ch_<i>.xml Output directory: • For Twin CAT, the output path defined in the System Manager is used to search for NC programs. See: CNC configuration - CNC task GEO - HLI tab HLI - entry box: NC file path • For 3S: Directory specified by P-STUP-00020 or as of V3.1.3052.05 by P- CHAN-00403 KW For MULTIPROG PLC environment: Output file: plc_kw_ve_types_ch_<i>.exp Output directory: application-specific (P-STUP-00020 or using P-CHAN-00403) as of V3.1.3052.05 and higher If no output directory is specified in a Twin CAT configuration, the output file is placed in the following directory depending on the Twin CAT version: • Twin CAT 2 32-bit: Main directory C:\ • Twin CAT 3 64-bit: C:\Windows\Sys WOW64 This is dependent on the corresponding write authorisations in each directory. The call of the CNC command #EXPORT VE absolutely requires the specification of the PLC des- tination system as parameter. The result is named accordingly. An error message 20509 is output if the parameter is missing. Generate the output file TF5200 | Twin CAT 3 CNC Version: 1.24 9 Exporting V. E. variables
## Page 10

Description #EXPORT VE [TWINCAT] ;Generate V. E. PLC structure for Twin CAT #EXPORT VE [3S] ;Generate V. E. PLC structure for 3S CODESYS #EXPORT VE [KW] ; Generate V. E. PLC structure for MULTIPROG from KW The command can be placed in an NC program or can be executed as a manual block. The command generates a file which is declared in a data structure compliant with IEC 61131-3 for all V. E variables created in the NC channel. The generated file corresponds to the import/export format for the CODESYS or MULTIPROG development environments and can be imported there directly. Additional structure declarations are required in the output file. 2.2 Errors on exporting The declaration of the V. E variables is checked before the function generates the PLC data structure. Any error messages occurring are logged in the (EXPORT) output file. 10 Version: 1.24 TF5200 | Twin CAT 3 CNC Exporting V. E. variables
## Page 11

Example 1- Use short text strings 3 Example 1- Use short text strings 3.1 V. E. variable list Assignment in V. E. variable list: # use_extended_string_var 0 # P-EXTV-00022 # anzahl_belegt 4 # var[0].name FARBE var[0].type UNS16 var[0].scope CHANNEL var[0].synchronisation FALSE var[0].access_rights READ_WRITE var[0].array_elements 3 # var[1].name TEXT var[1].type STRING var[1].scope CHANNEL var[1].synchronisation FALSE var[1].access_rights READ_WRITE var[1].array_elements 2 # var[2].name INFO_IN var[2].type OFFSET var[2].scope GLOBAL var[2].synchronisation FALSE var[2].access_rights READ_WRITE var[2].array_elements 2 # var[3].name INFO_OUT var[3].type OFFSET var[3].scope GLOBAL var[3].synchronisation FALSE var[3].access_rights READ_WRITE var[3].array_elements 2 var[3].create_hmi_interface 0 # struct[0].name OFFSET struct[0].element[0].name X struct[0].element[0].type UNS16 struct[0].element[1].name Y struct[0].element[1].type UNS16 # TF5200 | Twin CAT 3 CNC Version: 1.24 11 Exporting V. E. variables
## Page 12

Example 1- Use short text strings 3.2 Example of output file for CODESYS Representation in the exported file: TYPE STRING_20: STRUCT token:STRING(20); f1_st: ARRAY[0..2] OF BYTE; END_STRUCT END_TYPE TYPE STRING_20_2: STRUCT token:STRING(20); f1_st: ARRAY[0..106] OF BYTE; END_STRUCT END_TYPE TYPE OFFSET: STRUCT X: UINT; Y: UINT; END_STRUCT END_TYPE TYPE VE_CHANNEL_DATA_CH_1: STRUCT FARBE: ARRAY[0..2] OF UINT; f1: ARRAY[0..17] OF BYTE; TEXT: ARRAY[0..1] OF STRING_20; END_STRUCT END_TYPE TYPE VE_GLOBAL_DATA_FROM_CH_1: STRUCT INFO_IN: ARRAY[0..1] OF OFFSET; INFO_OUT: ARRAY[0..1] OF OFFSET; END_STRUCT END_TYPE 12 Version: 1.24 TF5200 | Twin CAT 3 CNC Exporting V. E. variables
## Page 13

Example 1- Use short text strings 3.3 PLC example Integrating the structure in a 3S PLC program: VAR (* Use generated structure descriptions *) p_ve_chan_1 : POINTER TO VE_CHANNEL_DATA_CH_1; p_ve_glob : POINTER TO VE_GLOBAL_DATA_FROM_CH_1; text : STRING(20); init_ve_ptr : BOOL := TRUE; END_VAR (* Ensure that the internal management data is initialised *) Hli(Start := TRUE); IF Hli. Initialised = TRUE AND Hli. Error = FALSE THEN IF init_ve_ptr = TRUE THEN (* Provide pointer to structure(s) *) p_ve_chan_1 := ADR( gp VECH[0]^.ext_var32[0]); p_ve_glob := ADR(gp VEGlobal^.ext_var32[0]); END_IF; (* Work with the variables (read, write) *) text := p_ve_chan_1^. TEXT[0].token; p_ve_chan_1^. FARBE[1] := 2; END_IF TF5200 | Twin CAT 3 CNC Version: 1.24 13 Exporting V. E. variables
## Page 14

Example 1- Use short text strings 3.4 Example of output file for MULTIPROG The following export for MULTIPROG is based on the identical V. E variable list [} 11] as the export for CODESYS [} 12]. TYPE TYPE_STRING_20 : ARRAY[0..20] OF BYTE; END_TYPE TYPE ALIGN_STRING_20_1 : ARRAY[0..2] OF BYTE; END_TYPE TYPE ALIGN_STRING_20_2 : ARRAY[0..106] OF BYTE; END_TYPE TYPE STRING_20_1: STRUCT Token : TYPE_STRING_20; alignment : ALIGN_STRING_20_1; END_STRUCT; END_TYPE TYPE STRING_20_2: STRUCT Token : TYPE_STRING_20; alignment : ALIGN_STRING_20_2; END_STRUCT; END_TYPE TYPE OFFSET: STRUCT X: UINT; Y: UINT; END_STRUCT; END_TYPE TYPE T2_FARBE: ARRAY[0..2] OF UINT; END_TYPE TYPE F1_2:ARRAY[0..17] OF BYTE; END_TYPE TYPE T2_TEXT : ARRAY[0..1] OF STRING_20_1; END_TYPE TYPE VE_CHANNEL_DATA_CH_1: STRUCT FARBE: T2_FARBE; (* index = 0 *) f1 : F1_2; TEXT: T2_TEXT; (* index = 1 *) END_STRUCT; END_TYPE TYPE T3_OFFSET : ARRAY[0..1] OF OFFSET; END_TYPE TYPE T3_OFFSET : ARRAY[0..1] OF OFFSET; END_TYPE TYPE VE_GLOBAL_DATA_FROM_CH_1: STRUCT INFO_IN: T3_OFFSET; INFO_OUT: T3_OFFSET; END_STRUCT; END_TYPE 14 Version: 1.24 TF5200 | Twin CAT 3 CNC Exporting V. E. variables
## Page 15

Restrictions in the case of a multi-channel controller structure 4 Restrictions in the case of a multi-channel controller structure When the CNC starts up, the "GLOBALLY" declared variables for each NC channel are added incrementally to any existing variables. The memory layout in its entirety is only defined after start-up has finished. The start address to the common memory is then made available to the PLC. • The #EXPORT function can only be started in one channel. • Therefore, it only uses the "GLOBAL" variables declared in that channel. Variables from other channels that are assigned different index values, for example, are invisible. Therefore, they are not entered in the structure VE_GLOBAL_DATA_FROM_CH_<i>. • A separate VE_GLOBAL_DATA_FROM_CH_<i> structure is created for each channel-specific V. E list where Recommendation Identical Global Variables in several channels are created in each of the channels. TF5200 | Twin CAT 3 CNC Version: 1.24 15 Exporting V. E. variables
## Page 16

Short instructions using the export functionality for V. E. variables 5 Short instructions using the export functionality for V. E. variables Procedure based on Twin CAT 1. Exporting V. E variables from the CNC using the export command #EXPORT VE[TWINCAT] 2. Open the export file with an editor and check for any warnings or errors. These are displayed by a text in the file. 3. Importing the export file to the existing PLC project 4. Create pointers to structures (* Use the generated structure descriptions *) p_ve_chan_1 : POINTER TO VE_CHANNEL_DATA_CH_1; p_ve_glob : POINTER TO VE_GLOBAL_DATA_FROM_CH_1; 5. Assign the addresses of the V. E-specific HLI ranges only once as shown in the example of the defined pointer variables [} 13] 6. Integrate read and write access to structures p_ve_glob^. VARIABLE_1 := 22; (*Write access*) gl_ar_var_3 := p_ve_glob^. VARIABLE_1; (*Read access*) 16 Version: 1.24 TF5200 | Twin CAT 3 CNC Exporting V. E. variables
## Page 17

Parameter 6 Parameter P-EXTV-00022 Number of characters of a string variable Description This parameter can increase the permissible number of characters of string variables from 21 to 128 characters (each including the termination mark). If the addresses of the V. E. variable is specified in 24-byte blocks (see Memory layout), make sure that 128-byte variables of the STRING type are assigned several 24-byte blocks in the memory layout and that the index is incremented accordingly (cf. variable arrays). Parameter use_extended_string_var Data type BOOLEAN Data range TRUE, FALSE Dimension ---- Default value FALSE Remarks TF5200 | Twin CAT 3 CNC Version: 1.24 17 Exporting V. E. variables
## Page 18

Support and Service 7 Support and Service Beckhoff and their partners around the world offer comprehensive support and service, making available fast and competent assistance with all questions related to Beckhoff products and system solutions. Download finder Our download finder contains all the files that we offer you for downloading. You will find application reports, technical documentation, technical drawings, configuration files and much more. The downloads are available in various formats. Beckhoff's branch offices and representatives Please contact your Beckhoff branch office or representative for local support and service on Beckhoff products! The addresses of Beckhoff's branch offices and representatives round the world can be found on our internet page: www.beckhoff.com You will also find further documentation for Beckhoff components there. Beckhoff Support Support offers you comprehensive technical assistance, helping you not only with the application of individual Beckhoff products, but also with other, wide-ranging services: • support • design, programming and commissioning of complex automation systems • and extensive training program for Beckhoff system components Hotline: +49 5246 963-157 e-mail: support@beckhoff.com Beckhoff Service The Beckhoff Service Center supports you in all matters of after-sales service: • on-site service • repair service • spare parts service • hotline service Hotline: +49 5246 963-460 e-mail: service@beckhoff.com Beckhoff Headquarters Beckhoff Automation Gmb H & Co. KG Huelshorstweg 20 33415 Verl Germany Phone: +49 5246 963-0 e-mail: info@beckhoff.com web: www.beckhoff.com 18 Version: 1.24 TF5200 | Twin CAT 3 CNC Exporting V. E. variables
## Page 19

Index Index P P-EXTV-00022 17 TF5200 | Twin CAT 3 CNC Version: 1.24 19 Exporting V. E. variables
## Page 21

More Information: www.beckhoff.com/TF5200 Beckhoff Automation Gmb H & Co. KG Hülshorstweg 20 33415 Verl Germany Phone: +49 5246 9630 info@beckhoff.com www.beckhoff.com
