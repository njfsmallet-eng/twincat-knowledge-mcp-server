---
title: "TE1000 Twin CAT 3"
product: "TwinCAT"
category: "PLC"
tags: ["CAT", "PLC", "TWIN"]
language: "EN"
document_type: "Library"
version: "1.1.1"
source_pdf: "https://download.beckhoff.com/download/Document/automation/twincat3/TwinCAT_3_PLC_Lib_Tc3_IOLink_EN.pdf"
release_date: "2025-09-17"
---
Manual | EN TE1000 Twin CAT 3 | PLC Library: Tc3_IOLink 2025-09-17 | Version: 1.1.1
## Page 3

Table of contents Table of contents 1 Foreword.................................................................................................................................................... 5 1.1 Notes on the documentation............................................................................................................. 5 1.2 For your safety.................................................................................................................................. 5 1.3 Notes on information security............................................................................................................ 7 2 Overview.................................................................................................................................................... 8 3 Data types and enums.............................................................................................................................. 9 3.1 Identification and diagnosis............................................................................................................... 9 3.1.1 E_Iol Iad_Function.............................................................................................................. 9 3.1.2 E_Iol Iad_State.................................................................................................................... 9 3.1.3 E_Iol Profile Identifier......................................................................................................... 10 3.1.4 E_Iol Profile Identifier_Bounds........................................................................................... 11 3.1.5 ST_Iol Identification Objects.............................................................................................. 11 3.2 Devices........................................................................................................................................... 12 3.2.1 E_Iol Port.......................................................................................................................... 12 3.2.2 E_Iol Port Error.................................................................................................................. 12 3.2.3 E_Iol Port State.................................................................................................................. 13 3.3 Specification.................................................................................................................................... 14 3.3.1 E_Iol Device Status............................................................................................................ 14 3.3.2 E_Iol Error......................................................................................................................... 14 3.3.3 E_Iol Systemcommand..................................................................................................... 15 3.3.4 ST_Iol Access Locks.......................................................................................................... 16 3.3.5 ST_Iol Detailed Device Status Entry.................................................................................... 16 3.3.6 ST_Iol Direct Parameter1................................................................................................... 16 3.3.7 ST_Iol Direct Parameter2................................................................................................... 17 3.3.8 T_Iol Detailed Device Status............................................................................................... 17 3.3.9 T_Iol Profile Characteristics............................................................................................... 17 3.3.10 T_Iol Max Octed String....................................................................................................... 17 3.3.11 T_Iol Max String................................................................................................................. 17 3.3.12 ST_Iol Index...................................................................................................................... 17 3.4 Smart Sensor Profile....................................................................................................................... 18 3.4.1 E_Iol Mdc_Value Status..................................................................................................... 18 4 Functions................................................................................................................................................. 19 4.1 F_Iol Get Ads Error Txt....................................................................................................................... 19 4.2 F_Iol Get Channel State Txt................................................................................................................ 19 4.3 F_Iol Get Error Txt............................................................................................................................. 20 4.4 F_Iol Get Iol Error............................................................................................................................... 21 4.5 F_Iol Get Iol Error Txt.......................................................................................................................... 21 4.6 F_Iol Get Port Error............................................................................................................................ 22 4.7 F_Iol Get Port State........................................................................................................................... 22 4.8 F_Iol Get Profile Id Txt........................................................................................................................ 23 4.9 F_Iol Is Busy..................................................................................................................................... 24 5 Function blocks....................................................................................................................................... 25 5.1 FB_Iol Read..................................................................................................................................... 25 TE1000 Version: 1.1.1 3
## Page 4

Table of contents 5.2 FB_Iol Write..................................................................................................................................... 27 5.3 IOL_Identification And Diagnosis...................................................................................................... 29 5.4 IOL_Measurement Data Channel..................................................................................................... 32 6 Object-oriented function blocks............................................................................................................ 34 6.1 I_Iol Slave........................................................................................................................................ 34 6.2 FB_IOl Slave.................................................................................................................................... 35 6.2.1 Methods........................................................................................................................... 35 6.2.2 Sample............................................................................................................................. 50 6.3 FB_Iol Std Var Slave.......................................................................................................................... 51 6.3.1 Methods........................................................................................................................... 52 6.3.2 Sample............................................................................................................................. 63 6.4 FB_Iol Ext Ident Slave........................................................................................................................ 65 6.4.1 Methods........................................................................................................................... 65 6.4.2 Sample............................................................................................................................. 67 7 Samples................................................................................................................................................... 69 8 Appendix.................................................................................................................................................. 70 8.1 Parameter data exchange............................................................................................................... 70 8.2 Error Codes..................................................................................................................................... 74 8.2.1 IO-Link error codes.......................................................................................................... 74 8.2.2 ADS Return Codes........................................................................................................... 77 8.3 Troubleshooting.............................................................................................................................. 80 9 Support and Service............................................................................................................................... 81 4 Version: 1.1.1 TE1000
## Page 5

Foreword 1 Foreword 1.1 Notes on the documentation This description is intended exclusively for trained specialists in control and automation technology who are familiar with the applicable national standards. The documentation and the following notes and explanations must be complied with when installing and commissioning the components. The trained specialists must always use the current valid documentation. The trained specialists must ensure that the application and use of the products described is in line with all safety requirements, including all relevant laws, regulations, guidelines, and standards. Disclaimer The documentation has been compiled with care. The products described are, however, constantly under development. We reserve the right to revise and change the documentation at any time and without notice. Claims to modify products that have already been supplied may not be made on the basis of the data, diagrams, and descriptions in this documentation. Trademarks Beckhoff®, ATRO® , Ether CAT®, Ether CAT G®, Ether CAT G10®, Ether CAT P®, MX-System®, Safety over Ether CAT®, TC/BSD®, Twin CAT®, Twin CAT/BSD®, Twin SAFE®, XFC®, XPlanar®, and XTS® are registered and licensed trademarks of Beckhoff Automation Gmb H. If third parties make use of the designations or trademarks contained in this publication for their own purposes, this could infringe upon the rights of the owners of the said designations. Ether CAT® is a registered trademark and patented technology, licensed by Beckhoff Automation Gmb H, Germany. Copyright © Beckhoff Automation Gmb H & Co. KG, Germany. The distribution and reproduction of this document, as well as the use and communication of its contents without express authorization, are prohibited. Offenders will be held liable for the payment of damages. All rights reserved in the event that a patent, utility model, or design are registered. Third-party trademarks Trademarks of third parties may be used in this documentation. You can find the trademark notices here: https://www.beckhoff.com/trademarks. 1.2 For your safety Safety regulations Read the following explanations for your safety. Always observe and follow product-specific safety instructions, which you may find at the appropriate places in this document. Exclusion of liability All the components are supplied in particular hardware and software configurations which are appropriate for the application. Modifications to hardware or software configurations other than those described in the documentation are not permitted, and nullify the liability of Beckhoff Automation Gmb H & Co. KG. TE1000 Version: 1.1.1 5
## Page 6

Foreword Personnel qualification This description is only intended for trained specialists in control, automation, and drive technology who are familiar with the applicable national standards. Signal words The signal words used in the documentation are classified below. In order to prevent injury and damage to persons and property, read and follow the safety and warning notices. Personal injury warnings DANGER Hazard with high risk of death or serious injury. WARNING Hazard with medium risk of death or serious injury. CAUTION There is a low-risk hazard that could result in medium or minor injury. Warning of damage to property or environment NOTICE The environment, equipment, or data may be damaged. Information on handling the product This information includes, for example: recommendations for action, assistance or further information on the product. 6 Version: 1.1.1 TE1000
## Page 7

Foreword 1.3 Notes on information security The products of Beckhoff Automation Gmb H & Co. KG (Beckhoff), insofar as they can be accessed online, are equipped with security functions that support the secure operation of plants, systems, machines and networks. Despite the security functions, the creation, implementation and constant updating of a holistic security concept for the operation are necessary to protect the respective plant, system, machine and networks against cyber threats. The products sold by Beckhoff are only part of the overall security concept. The customer is responsible for preventing unauthorized access by third parties to its equipment, systems, machines and networks. The latter should be connected to the corporate network or the Internet only if appropriate protective measures have been set up. In addition, the recommendations from Beckhoff regarding appropriate protective measures should be observed. Further information regarding information security and industrial security can be found in our https://www.beckhoff.com/secguide. Beckhoff products and solutions undergo continuous further development. This also applies to security functions. In light of this continuous further development, Beckhoff expressly recommends that the products are kept up to date at all times and that updates are installed for the products once they have been made available. Using outdated or unsupported product versions can increase the risk of cyber threats. To stay informed about information security for Beckhoff products, subscribe to the RSS feed at https:// www.beckhoff.com/secinfo. TE1000 Version: 1.1.1 7
## Page 8

Overview 2 Overview The PLC library Tc3_Io Link is used for communication with Io Link devices. Function blocks are available for this purpose that support the "Common Profile" and "Smart Sensor Profile" and enable parameters to be read and written. System requirements Target System Win XP, WES, Win7, WES7, WEC7 IPC or CX, (x86, x64, ARM) Min. Twin CAT Version 3.1.4024.25 Min. Twin CAT Level TC1200 TC3 PLC 8 Version: 1.1.1 TE1000
## Page 9

Data types and enums 3 Data types and enums 3.1 Identification and diagnosis The enums and structures are used in combination with the IOL_Identification And Diagnosis [} 29]. 3.1.1 E_Iol Iad_Function Specifies the function at the function block IOL_Identification And Diagnosis [} 29]. Name Value Description No Function 0x00 A request is neglected, no function is executed. Read All 0x01 A request starts reading back the current identification and diagnostic parameter values from the device. Read 0x02 A request starts reading back the current diagnostic parameter values by reading Device Status and Detailed Device Status from the device. Write Ident 0x03 A request causes a previously created value for Application Specific Tag In, Location Tag In and Function Tag In to be written to the device. 3.1.2 E_Iol Iad_State State of the function block IOL_Identification And Diagnosis [} 29]. Name Description Idle Function block is in idle state Startup Function block is started Done Function block has completed Read Profile Characteristic Write identification parameters Read Vendor IDAnd Device ID Reads vendor and device ID Read Vendor Name Reads vendor name Read Vendor Text Reads vendor text Read Product Name Reads product name Read Product ID Reads the product ID Read Product Text Reads the product text Read Serial Number Reads the serial number Read Hardware Rev Reads the hardware revision Read Firmware Rev Reads the firmware revision Read Application Tag Reads the Application Specific Tag Read Function Tag Reads the Function Tag Read Location Tag Reads the Location Tag Read Diag Reads out the diagnosis Read Diag Details Reads out the Detailed Diagnosis Write Application Tag Writes the Application Tag Write Location Tag Writes the Location Tag Write Function Tag Writes the Function Tag Write Backup Triggers the data storage TE1000 Version: 1.1.1 9
## Page 10

Data types and enums 3.1.3 E_Iol Profile Identifier Defines the profiles that an IO-Link device can have. One device can support multiple profiles. Name Value Description No Profile Supported 0x0000 No profile is supported Function Class 0x0001 Function classes are supported Switching sensor profile type 1 SSP_1_1 0x0002 Defines the fixed switching sensor with the profile 0x8005 without 0x800C SSP_1_2 0x0003 Defines the fixed switching sensor with the profile 0x8005 and 0x800C Switching sensor profile type 2 SSP_2_1 0x0004 Defines the adjustable switching sensor with the profile 0x8007 without 0x800C SSP_2_2 0x0005 Defines the adjustable switching sensor with the profile 0x8008 without 0x800C SSP_2_3 0x0006 Defines the adjustable switching sensor with the profile 0x8009 without 0x800C SSP_2_4 0x0007 Defines the adjustable switching sensor with the profile 0x8007 with 0x800C SSP_2_5 0x0008 Defines the adjustable switching sensor with the profile 0x8008 with 0x800C SSP_2_6 0x0009 Defines the adjustable switching sensor with the profile 0x8009 with 0x800C Measuring Device profile types 3 SSP_3_1 0x000A Defines the profiles 0x800A without 0x800C SSP_3_2 0x000B Defines the profiles 0x800B without 0x800C SSP_3_3 0x000C Defines the profiles 0x800A with 0x800C SSP_3_4 0x000D Defines the profiles 0x800B with 0x800C Overview of Functionclasses Dev_Ident 0x8000 With this profile, the Firmware Revision, Application Specific Tag and Product ID parameters must be supported by the IO-Link device Multi_Ch 0x8001 Defines the process data type of the IO-Link device PDV 0x8002 Defines the process data transmission of the device. Dev_Diag 0x8003 With this profile, the Device Status and Detailed Device Status parameters must be supported by the IO-Link device Teach_Ch 0x8004 Fixed_SSC 0x8005 Fixed switching sensors in the Smart Sensor Profile are devices that support exactly one binary output signal (switching signal). The setpoint of this switching output is predefined during the manufacturing process and is thus fixed for the application. Adjust_SSC 0x8006 Teach_Single_Value 0x8007 A setpoint is defined by a "Teachpoint" (TP). The teach-in process is "static", i.e. the measured value is constant during teach-in. Teach_Two_Value 0x8008 A setpoint is defined by two "Teachpoints" (TP). Teach_Dyn 0x8009 "Dynamic teach-in" (within a time period) A single setpoint or both setpoints of an SSC are taught-in via acquired measured values during a specific time period. The teach-in is "dynamic", i.e. the measured value is not constant during the teach-in. As a rule, the minimum and maximum values within this timespan are used to determine the setpoints. 10 Version: 1.1.1 TE1000
## Page 11

Data types and enums Name Value Description Meas_Data_Ch_Std 0x800A The function class provides a standardized process data structure and some additional information on how to interpret the transmitted data, such as physical unit or measurement limits. (default resolution) Meas_Data_Ch_High 0x800B The function class provides a standardized process data structure and some additional information on how to interpret the transmitted data, such as physical unit or measurement limits. (high resolution) Sensor_Ctrl 0x800C The deactivation signal can be used to switch off the sensor transducer. Example of the profile identification of an extended profile Ident_And_Diag 0x4000 Combines the profiles 0x8000, 0x8002, 0x8003 and 0x8100 Visual_Localizations 0x8100 With this profile, the Function Tag and Location parameters must be supported by the IO-Link device 3.1.4 E_Iol Profile Identifier_Bounds Value range of the profiles and function classes. Name Value Description No Profile Supported 0x0000 No profile supported Device Profile ID_Start 0x0001 Profile range start Device Proifle ID_End 0x3FFF Profile range end Common Application Profile ID 0x4000 Common Application Profile ID start _start Common Application Profile ID 0x7FFF Common Application Profile ID end _end Function Class ID_start 0x8000 Function class range start Function Class ID_end 0x BFFF Function class range end Reserved_start 0x C000 Reserved range start Reserved_end 0x FFFF Reserved range end 3.1.5 ST_Iol Identification Objects Identification objects as a structure output by the function block IOL_Identification And Diagnosis [} 29]. Name Data type n Vendor ID WORD n Device ID DWORD s Vendorname STRING(64) s Vendor Text STRING(64) s Product Name STRING(64) s Product ID STRING(64) s Product Text STRING(64) s Serial Number STRING(16) s Hardware Revision STRING(64) s Firmware Revision STRING(64) s Application Specific Tag STRING(64) s Location Tag STRING(64) s Function Tag STRING(64) TE1000 Version: 1.1.1 11
## Page 12

Data types and enums 3.2 Devices Can be used in conjunction with the state channel to determine the state of communication. 3.2.1 E_Iol Port Specifies the number of the port via an enumeration. Name Value Port1 1 Port2 2 Port3 3 Port4 4 Port5 5 Port6 6 Port7 7 Port8 8 Sample fb Iol Slave. Port:=E_Iol Port. Port1; 3.2.2 E_Iol Port Error Outputs the errors of the IO-Link communication of the state channel. 12 Version: 1.1.1 TE1000
## Page 13

Data types and enums Name Value No Error 0 Watchdog Detected 1 Internal Error 2 Invalid Device ID 3 Invalid Vendor ID 4 Invalid IOLink Version 5 Invalid Frame Capability 6 Invalid Cycletime 7 Invalid Pd In Length 8 Invalid Pd Out Lenght 9 No Device Detected 10 3.2.3 E_Iol Port State Information about the communication type of the state channel TE1000 Version: 1.1.1 13
## Page 14

Data types and enums Name Value Disabled 0 st Dig In 1 st Dig Out 2 Communication OP 3 Communication Comstop 4 3.3 Specification 3.3.1 E_Iol Device Status Indicates the state of the IO-Link device and comes from the index 0x0024 [} 70]. Name Value Description Operating 0x00 IO-Link device works properly Maintenance Required 0x01 Although the process data is valid, the internal diagnosis indicate that the device is about to lose its ability to function correctly. Out Of Specification 0x02 Although the process data is valid, the internal diagnosis indicate that the device is operating outside the specified measuring range or environmental conditions. Functional Check 0x03 Process data is temporarily invalid due to intentional manipulation of the device Failure 0x04 Process data invalid due to a malfunction of the device or its peripheral devices. The device is not able to perform its intended function. 3.3.2 E_Iol Error Contains fixed IO-Link error codes [} 74]. Name Value Description No Error 0x0000 No error message Device Application Error 0x8000 Device-specific application error 14 Version: 1.1.1 TE1000
## Page 15

Data types and enums Name Value Description Index Not Available 0x8011 The index is not available Subindex Not Available 0x8012 The subindex is not available Service Temporarily Not Availa 0x8020 A parameter for a read or write service is not accessible ble because the current state of the device application is not accessible. Service Temporarily Not Availa 0x8021 A parameter is not accessible to a read or write service due to ble_Local Control an ongoing local operation on the device (e.g. operation or parameterization via an on-board device control panel). Service Temporarily Not Availa 0x8022 A read or write service is not accessible due to a remotely ble_Device Control triggered state of the device application (e.g. parameterization during a remotely triggered learning process or calibration). Access Denied 0x8023 A write service is trying to access a read-only parameter. Or a read service tries to access a read-only parameter. Parameter Value Out Of Range 0x8030 A write service to a parameter that is outside its allowed value range Parameter Value Above Limit 0x8031 A write service accesses a parameter above the specified value range. Parameter Value Below Limit 0x8032 A write service accesses a parameter below the specified value range. Parameter Length Overrun 0x8033 The content of a write service for a parameter is greater than the length specified for the parameter. Or a data object is too large to be processed by the device application (e.g. ISDU buffer limitation). Parameter Length Underrun 0x8034 The content of a write service for a parameter is smaller than the length specified for the parameter. Or a data object is too small to be processed by the device application (e.g. ISDU buffer limitation). Function Not Available 0x8035 A write service that is not supported by the device application (for example, a system command with an unimplemented value). Function Temporarily Unavaila 0x8036 A write service that calls a device function that is not available ble due to the current state of the device application (e.g. System Command). Invalid Parameter Set 0x8040 the single parameter transmission does not match other actual parameter settings (e.g. overlapping setpoints for a binary data setting). Inconsistent Parameter Set 0x8041 At the end of a block parameter transfer with Param Download End or Param Download Store if the plausibility check reveals inconsistencies Application No Ready 0x8082 When a read or write service is denied due to a temporarily unavailable application (for example, peripheral controls during startup). 3.3.3 E_Iol Systemcommand Specifies the values for the System Command. Name Value Description Param Upload Start 0x01 Starts parameter upload Param Upload End 0x02 Stops parameter upload Param Download Start 0x03 Starts parameter download Param Download End 0x04 Stops parameter download Param Download Store 0x05 Finalizes the parameterization and starts the data storage Devcie Reset 0x80 Reset to initialization value TE1000 Version: 1.1.1 15
## Page 16

Data types and enums Name Value Description Application Reset 0x81 Application-specific parameters are reset Restore Factory Settings 0x82 Factory settings 3.3.4 ST_Iol Access Locks Structure specifies the Acess Locks. The Acess Locks determine which access is physically permitted by the IO-Link device. Name Data type b Parameter Acess BIT b Data Storage BIT b Local Parametrization BIT b Local User Interface BIT b Reserved1 BIT b Reserved2 BIT b Reserved3 BIT b Reserved4 BIT n Reserved1 BYTE 3.3.5 ST_Iol Detailed Device Status Entry Structure of the Detailed Device Status Entry Name Data type n Eventqualifier BYTE n Event Code WORD 3.3.6 ST_Iol Direct Parameter1 Defines the Direct Parameter1 as a structure. Name Data type Reserved1 BYTE Master Cycle Time BYTE Min Cycle Time BYTE Frame Capability BYTE Version ID BYTE Process Data In Len BYTE Process Data Out Len BYTE Vendor ID1 BYTE Vendor ID2 BYTE Device Id1 BYTE Device ID2 BYTE Device ID3 BYTE Reserved2 BYTE Reserved3 BYTE Reserved4 BYTE Reserved5 BYTE 16 Version: 1.1.1 TE1000
## Page 17

Data types and enums 3.3.7 ST_Iol Direct Parameter2 Structure defines the Direct Parameter2 Name Data type Device Specific Parameter01 BYTE Device Specific Parameter02 BYTE Device Specific Parameter03 BYTE Device Specific Parameter04 BYTE Device Specific Parameter05 BYTE Device Specific Parameter06 BYTE Device Specific Parameter07 BYTE Device Specific Parameter08 BYTE Device Specific Parameter09 BYTE Device Specific Parameter10 BYTE Device Specific Parameter11 BYTE Device Specific Parameter12 BYTE Device Specific Parameter13 BYTE Device Specific Parameter14 BYTE Device Specific Parameter15 BYTE Device Specific Parameter16 BYTE 3.3.8 T_Iol Detailed Device Status Event history of the IO-Link device TYPE T_Iol Detailed Device Status : ARRAY[0..63] OF ST_Iol Detailed Device Status Entry; END_TYPE 3.3.9 T_Iol Profile Characteristics Profile characteristics of the IO-Link device TYPE T_Iol Profile Characteristics : ARRAY[0..31] OF WORD; END_TYPE 3.3.10 T_Iol Max Octed String Definition of the maximum string size TYPE T_Iol Max Octed String : ARRAY[0..231] OF BYTE; END_TYPE 3.3.11 T_Iol Max String Defines the maximum size of an IO-Link string. TYPE T_Iol Max String : STRING(232); END_TYPE 3.3.12 ST_Iol Index Specifies the index and subindex at the IO-Link parameter. Name Data type n Index WORD TE1000 Version: 1.1.1 17
## Page 18

Data types and enums Name Data type n Subindex BYTE 3.4 Smart Sensor Profile 3.4.1 E_Iol Mdc_Value Status Defines the status of the process data Name Value Description OK 0 Process data are valid PDInvalid 1 Process data are invalid No Data 2 No data Out Of Range Pos 3 Process data are outside the value range Out Of Range Neg 4 Process data are outside the value range State Not Defined 5 Undefined state 18 Version: 1.1.1 TE1000
## Page 19

Functions 4 Functions 4.1 F_Iol Get Ads Error Txt Function converts an ADS error into text form. Inputs Name Type Description n Ads Err UDINT ADS Return Codes Outputs Name Type Description F_Iol Get Ads Error Txt STRING Displays the ADS return code as text string. Sample VAR hr :HRESULT; n ADSError :E_Ads Err := E_Ads Err. NOERR; s ADSError Text :STRING; END_VAR n Ads Error := F_Iol Get Ads Error(hr); s ADSError Text := F_Iol Get Ads Error Txt(n Ads Error); Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 4.2 F_Iol Get Channel State Txt Function converts state channel and port into text form. Inputs Name Type Description n Iol Ch State USINT IO-Link Channel State n Port E_Iol Port [} 12] IO-Link port TE1000 Version: 1.1.1 19
## Page 20

Functions Outputs Name Type Description F_Iol Get Channel State Txt String(255) Converts the channel state into text information. Example VAR n State Ch2 AT%I* :USINT; n Port :E_Iol Port:=E_iol Port. Port2; s Channel State Text :STRING(255); END_VAR s Channel State Text := F_Iol Get Channel State Txt(n State Ch2,n Port); Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 4.3 F_Iol Get Error Txt Returns the IO-Link error as string format in text form. Inputs Name Type Description hresult HRESULT Return value Outputs Name Type Description F_Iol Get Error Txt String(255) Shows the IO-Link error as a string Example VAR hr :HRESULT; s Error Text :STRING; END_VAR s Error Text := F_Iol Get Error Txt(hr); Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 20 Version: 1.1.1 TE1000
## Page 21

Functions 4.4 F_Iol Get Iol Error Function returns an IO-Link error code as E_Iol Error [} 14]. Inputs Name Type Description hresult HRESULT Return value Outputs Name Type Description F_Iol Get Iol Error E_Iol Error [} 14] IO-Link error code as enum Sample VAR hr :HRESULT; n IOLError :E_Iol Err := E_Iol Err. NOERR; END_VAR n IOLError := F_Iol Get Iol Error(hr); Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 4.5 F_Iol Get Iol Error Txt The function returns the IO-Link error code as a string Inputs Name Type Description n Iol Err UDINT IO-Link error Outputs Name Type Description F_Iol Get Iol Error Txt String IO-Link error code as text TE1000 Version: 1.1.1 21
## Page 22

Functions Sample VAR hr :HRESULT; n Iol Error :E_Iol Err := E_Iol Err. NOERR; s Iol Error Text :STRING; END_VAR n Iol Error := F_Iol Get Iol Error(hr); s Iol Error Text := F_Iol Get Iol Error Txt(n Iol Error); Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 4.6 F_Iol Get Port Error Function returns the state channel as E_Iol Port Error. Inputs Name Type Description n Iol Ch State USINT IO-Link Channel State Outputs Name Type Description E_Iol Get Port Error E_Iol Port Error [} 12] Display IO-Link port error Example VAR n State Ch1 AT%I* :USINT; n Iol Port Error :E_Iol Port Error; END_VAR n Iol Port Error := F_Iol Get Port Error(n State Ch1); Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 4.7 F_Iol Get Port State 22 Version: 1.1.1 TE1000
## Page 23

Functions Function converts the variable State Ch into the E_Iol Port State. The data type E_Iol Portstate can be further used afterwards. Inputs Name Type Description n Iol Ch State USINT IO-Link channel state Outputs Name Type Description E_Io LGet Port State E_Iol Port State [} 13] Displays the port state as an enum Sample VAR n State Ch2 AT%I* :USINT; n Port State :E_Iol Port State; END_VAR n Port State := F_Iol Get Port State(n State Ch2); Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 4.8 F_Iol Get Profile Id Txt Converts the E_Iol Profile Identifier type to a text format. Inputs Name Type Description profile Id E_Iol Profile Identifier [} 10] IO-Link profiles Outputs Name Type Description F_Io LGet Profile Id Txt String(255) IO-Link profiles as text form Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 TE1000 Version: 1.1.1 23
## Page 24

Functions 4.9 F_Iol Is Busy Function indicates whether a function block is still being processed. Inputs Name Type Description hresult HRESULT Return value Outputs Name Type Description F_Iol Is Busy BOOL True if function block is still being processed Sample VAR hr :HRESULT; fb IIol Std Var Slave :FB_Iol Std Var Slave; n Read :DWORD; END_VAR hr := fb IIol Std Var Slave.read(16#0019, 0, ADR(n Read), SIZEOF(n Read)); IF NOT F_Iol Is Busy(hr) THEN IF FAILED(hr) THEN //Error Handling ELSE //Success END_IF END_IF Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 24 Version: 1.1.1 TE1000
## Page 25

Function blocks 5 Function blocks 5.1 FB_Iol Read Function block for reading IO-Link parameters in a non-object-oriented solution. Inputs Name Type Description b Execute BOOL Rising edge to start the function block s Netid T-Ams Netid AMS NETID of the IO-Link master nlol Port E_lol Port [} 12] IO-Link port of the IO-Link device n Index WORD Index of the IO-Link device parameter n Subindex BYTE Subindex of the IO-Link device parameter p DSTBuf PVOID Pointer to target buffer cb Buf Len UDINT Size of the data bytes to be read t Timeout TIME Maximum allowed execution time Outputs Name Type Description b Busy BOOL Busy flag of the function block b Done BOOL Done flag of the function block b Error BOOL Error flag of the function block h Result HRESULT Return value of this function block n ADSError E_Ads Err ADS error code n Iol Error E_Iol Error [} 14] IO-Link error code Sample The following function block is part of the Io Link sample project. For more information, see the chapter Samples [} 69]. FUNCTION_BLOCK FB_Sample_01_Iol Read VAR_INPUT b Execute :BOOL := FALSE; END_VAR VAR_OUTPUT b Busy :BOOL := FALSE; b Done :BOOL := FALSE; b Error :BOOL := FALSE; n Ads Error :E_Ads Err := E_Ads Err. NOERR; n Iol Error :E_Iol Error := E_Iol Error. No Error; s Error Txt :STRING(255) := ''; s Application Tag :STRING(32) := ''; END_VAR TE1000 Version: 1.1.1 25
## Page 26

Function blocks VAR b Execute Old :BOOL; n State :INT := 0; fb Iol Read :FB_Iol Read; END_VAR //// // Execute/Busy State Machine // IF b Execute AND NOT b Execute Old AND NOT b Busy THEN b Busy := TRUE; n State := 10; // READ ELSIF NOT b Execute THEN b Busy := FALSE; b Error := FALSE; b Done := FALSE; n Ads Error := E_Ads Err. NOERR; n Iol Error := E_Iol Error. No Error; s Error Txt := ''; END_IF b Execute Old := b Execute; //// // FB State Machine // CASE n State OF // IDLE 0:; // READ 10: s Application Tag := ''; fb Iol Read(b Execute := FALSE); fb Iol Read.s Net Id := F_Create Ams Net Id(GVL_IO.s Term2Ams Net Id); fb Iol Read.n Iol Port := E_Iol Port. Port1; fb Iol Read.p DSTBuf := ADR(s Application Tag); fb Iol Read.cb Buf Len := SIZEOF(s Application Tag); fb Iol Read.n Index := 16#18; fb Iol Read.n Subindex := 0; fb Iol Read.b Execute := TRUE; n State := 20; // WAIT_FOR_DONE // WAIT_FOR_DONE 20: IF fb Iol Read.b Done THEN b Done := TRUE; b Busy := FALSE; n State := 0; // IDLE END_IF END_CASE //// // call FBs // fb Iol Read(); //// // Error Handling // IF NOT b Error AND b Busy THEN IF fb Iol Read.b Error THEN n State := 0; b Busy := FALSE; b Error := TRUE; n Ads Error := fb Iol Read.n Ads Error; n Iol Error := fb Iol Read.n Iol Error; s Error Txt := F_Iol Get Error Txt(fb Iol Read.hresult); END_IF END_IF Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 26 Version: 1.1.1 TE1000
## Page 27

Function blocks 5.2 FB_Iol Write Function block for writing IO-Link parameters in a non-object-oriented solution. Inputs Name Type Description b Execute BOOL Rising edge to start the function block s Netid T-Ams Netid AMS NETID of the IO-Link master nlol Port E_lol Port [} 12] IO-Link port of the IO-Link device n Index WORD Index of the IO-Link device parameter n Subindex BYTE Subindex of the IO-Link device parameter p SCRBuf PVOID Pointer to source buffer cb Buf Len UDINT Size of the data bytes to be read t Timeout TIME Maximum allowed execution time Outputs Name Type Description b Busy BOOL Busy flag of the function block b Done BOOL Done flag of the function block b Error BOOL Error flag of the function block h Result HRESULT Return value of this function block n ADSError E_Ads Err ADS error code n Iol Error E_Iol Error [} 14] IO-Link error code Sample The following function block is part of the Io Link sample project. For more information, see the chapter Samples [} 69]. FUNCTION_BLOCK FB_Sample_02_Iol Write VAR_INPUT b Execute : BOOL := FALSE; s Application Tag : STRING(32) := ''; END_VAR VAR_OUTPUT b Busy : BOOL := FALSE; b Done : BOOL := FALSE; b Error : BOOL := FALSE; n Ads Error : E_Ads Err := E_Ads Err. NOERR; n Iol Error : E_Iol Error := E_Iol Error. No Error; s Error Txt : STRING(255) := ''; END_VAR VAR b Execute Old : BOOL; n State : INT := 0; fb Iol Write : FB_Iol Write; END_VAR TE1000 Version: 1.1.1 27
## Page 28

Function blocks //// // Execute/Busy State Machine // IF b Execute AND NOT b Execute Old AND NOT b Busy THEN b Busy := TRUE; n State := 10; // WRITE ELSIF NOT b Execute THEN b Busy := FALSE; b Error := FALSE; b Done := FALSE; n Ads Error := E_Ads Err. NOERR; n Iol Error := E_Iol Error. No Error; s Error Txt := ''; END_IF b Execute Old := b Execute; //// // FB State Machine // CASE n State OF // IDLE 0:; // WRITE 10: s Application Tag := ''; fb Iol Write(b Execute := FALSE); fb Iol Write.s Net Id := F_Create Ams Net Id(GVL_IO.s Term2Ams Net Id); fb Iol Write.n Iol Port := GVL_IO.n Term2EPI1008; fb Iol Write.p SRCBuf := ADR(s Application Tag); fb Iol Write.cb Buf Len := INT_TO_UDINT(LEN(s Application Tag)); fb Iol Write.n Index := 16#18; fb Iol Write.n Subindex := 0; fb Iol Write.b Execute := TRUE; n State := 20; // WAIT_FOR_DONE // WAIT_FOR_DONE 20: IF fb Iol Write.b Done THEN b Done := TRUE; b Busy := FALSE; n State := 0; // IDLE END_IF END_CASE //// // call FBs // fb Iol Write(); //// // Error Handling // IF NOT b Error AND b Busy THEN IF fb Iol Write.b Error THEN n State := 0; b Busy := FALSE; b Error := TRUE; n Ads Error := fb Iol Write.n Ads Error; n Iol Error := fb Iol Write.n Iol Error; s Error Txt := F_Iol Get Error Txt(fb Iol Write.hresult); END_IF END_IF Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 28 Version: 1.1.1 TE1000
## Page 29

Function blocks 5.3 IOL_Identification And Diagnosis Function block for identification and diagnosis of an IO-Link device. This function block is implemented by the Common IO-Link Profile. The Application Specific Tag, the Function Tag and the Location Tag of an IO- Link device can be written. The function classes and Profile IDs of a device can be read. Additionally the function block gives a diagnosis on the state of a device and its identification, which can include the Vendor Name, Vendor ID, Device Name, and Device ID. Inputs Name Type Description Execute BOOL A trigger causes the function selected with the Function variable to be executed: Master Ao ENetid T_Ams Netid AMS NETID of the IO-Link master Iol Port E_Iol Port [} 12] IO-Link port of the IO-Link device Func E_Iol Iad_Function [} 9] This variable selects the functionality to be triggered by a request: 0 = no_func A request is neglected, no function is executed 1 = rd_all A request starts the read-back of the current identification and diagnostic parameter values from the device. 2 = rd_diag A request starts reading back the current diagnostic parameter values by reading Device Status and Detailed Device Status from the device. 3 = wr_ ident A request causes a previously created value for Application Specific Tag In, Location Tag In and Function Tag In to be written to the device. Backup Enable BOOL This variable configures the behavior of the FB in case of the requested function wr_ident. "true" = enabled The backup mechanism is triggered by the FB. "false" = disabled The backup mechanism is not triggered by the FB. Application Specific IN String(32) Parameters of the IO-Link device Function Tag IN String(32) Parameters of the IO-Link device Loaction Tag IN String(32) Parameters of the IO-Link device TE1000 Version: 1.1.1 29
## Page 30

Function blocks Outputs Name Type Description Done BOOL The signal is set when the FB has completed a requested operation. Busy BOOL The signal is set when the FB executes a requested operation. Error BOOL The signal is set when an error occurred during the execution of a requested operation. Ads Error E_ADSErr ADS error code Io LError E_Iol Error [} 14] IO-Link error State E_Iol Iad_State [} 9] The value represents the current status of the FB operation and the executed functions. The content is system specific and contains the status information. Profile IDList ARRAY [0..31] of List of Profile IDs supported by the device E_Iol Profile Identifier [} 10] Function Class IDList ARRAY [0..31] of List of Function Class IDs supported by the device E_Iol Profile Identifier [} 10] Identification Objects ST_Iol Identification Objects Structured list of identification objects, for more details. [} 11] Device OK BOOL The signal is set if no further diagnostic information is available, it is false if further information is available at Device Status and Detailed Device Status. Device Status E_Iol Device Status [} 14] Status of the IO-Link device Detailed Device Status T_Iol Detailed Device Status ARRAY [0..63] of ST_Detailed Device Status Entry [} 17] Example The following function block is part of the Io Link sample project. For more information, see the chapter Samples [} 69]. FUNCTION_BLOCK FB_Sample_06_Identification And Diagnosis VAR_INPUT s Application Tag In : STRING(32) := ''; s Function Tag In : STRING(32) := ''; s Location Tag In : STRING(32) := ''; b Execute : BOOL; END_VAR VAR_OUTPUT b Busy : BOOL := FALSE; b Done : BOOL := FALSE; b Error : BOOL := FALSE; s Iol Error : STRING; s Ads Error : STRING; a Profile IDList : ARRAY [0..31] OF E_Iol Profile Identifier; a Function Class IDList : ARRAY[0..31] OF E_Iol Profile Identifier; st IDent Objects : ST_Iol Identification Objects; b Device OK : BOOL; n Device Status : E_Iol Device Status; Detailed Device Status : T_Iol Detailed Device Status; END_VAR VAR b Execute Old : BOOL; n State : INT := 0; Iol Diag And Ident : IOL_Identification And Diagnosis; END_VAR //// // Execute/Busy State Machine // IF b Execute AND NOT b Execute Old AND NOT b Busy THEN b Busy := TRUE; n State := 10; // START ELSIF NOT b Execute THEN 30 Version: 1.1.1 TE1000
## Page 31

Function blocks b Busy := FALSE; b Error := FALSE; b Done := FALSE; s Iol Error:=''; s ADSError:=''; END_IF b Execute Old := b Execute; CASE n State OF // IDLE 0:; // START 10: Iol Diag And Ident(Execute := FALSE); Iol Diag And Ident. Master Aoe Net Id := F_Create Ams Net Id(GVL_IO.s Term2Ams Net Id); Iol Diag And Ident. Iol Port := E_iolport. Port4; Iol Diag And Ident. Funct := E_Iol Iad_Function. Read All; Iol Diag And Ident. Application Specific Tag In := s Application Tag In; Iol Diag And Ident. Function Tag In := s Function Tag In; Iol Diag And Ident. Location Tag In := s Location Tag In; Iol Diag And Ident. Execute := TRUE; n State := 20; // WAIT FOR DONE // WAIT FOR DONE 20: IF NOT IOl Diag And Ident. Busy AND NOT IOl Diag And Ident. Error THEN n State := 30; // DONE END_IF // DONE 30: a Profile IDList := Iol Diag And Ident. Profile IDList; a Function Class IDList := Iol Diag And Ident. Function Class IDList; st IDent Objects := Iol Diag And Ident. Identification Objects; b Device OK := Iol Diag And Ident. Device OK; n Device Status := Iol Diag And Ident. Device Status; Detailed Device Status := Iol Diag And Ident. Detailed Device Status; Iol Diag And Ident. Execute := FALSE; n State := 0; // INIT END_CASE //// // call FBs // Iol Diag And Ident(); //// // Error Handling // IF NOT b Error AND b Busy THEN IF Iol Diag And Ident. Error THEN n State := 0; b Busy := FALSE; b Error := TRUE; s Iol Error := F_Iol Get Iol Error Txt(ioldiagand Ident. Iol Error); s Ads Error := F_Iol Getads Error Txt(ioldiagandident. Ads Error); END_IF END_IF Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 TE1000 Version: 1.1.1 31
## Page 32

Function blocks 5.4 IOL_Measurement Data Channel The measuring data channel defines the process data structure, functions, and presentation of measuring sensors. The function block is defined to provide derived status signals and enable a standardized interface for user programs. Inputs Name Type Description Enable BOOL Activates the use of the function block Profile ID WORD Selected Profile ID, or process data layout 1 = SSP 3.1 = profile 0x000A 2 = SSP 3.2 = profile 0x000B 3 = SSP 3.3 = profile 0x000C 4 = SSP 3.4 = profile 0x000D Substitute Value DINT The specified value is applied to Value Real and Value DINT if Value Status is not 0. Channel State E_Iol Port State [} 13] Scale IN SINT Scale of the IO-Link device Process Data ANY_INT Measured value Outputs Name Type Description Valid BOOL If true, the supplied values are valid and can be used for further calculations. Error BOOL If true, an internal error is detected and further information is provided by the function block. Value Status E_Io LMDC_Value Status Provides error codes [} 18] Value Real LREAL Process data in real format for evaluation in the PLC Value INT DINT Process data in Dint format for evaluation in the PLC Scale INT Process data scaling factor Example The following function block is part of the Io Link sample project. For more information, see the chapter Samples [} 69]. FUNCTION_BLOCK FB_Sample_07_Measurement Data Channel VAR_INPUT n State Channel AT%I*:USINT; n Scale AT%I*:SINT; MVDistance AT%I*:INT; END_VAR VAR_OUTPUT b Valid :BOOL; b Error :BOOL; n Value Status :E_Iol Mdc_Value Status; n Value DINT :DINT; n Value REAL :REAL; n Scale Out :INT; 32 Version: 1.1.1 TE1000
## Page 33

Function blocks END_VAR VAR fb Measurement:IOL_Measurement Data Channel_INT; END_VAR fb Measurement( Enable := TRUE, Substitute Value := 500, Channel State := n State Channel, Scale In := n Scale , Measurement Value := MVDistance, Valid=>b Valid, Error=>b Error, Value Status=>n Value Status, Value Real=>n Value REAL, Value DINT=>n Value DINT, Scale=>n Scale Out ); Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 TE1000 Version: 1.1.1 33
## Page 34

Object-oriented function blocks 6 Object-oriented function blocks The object-oriented function blocks are listed here. A direct call of the function block is no longer necessary. Instead, you configure the properties and call the methods directly. The following UML diagram shows the structure and inheritance. 6.1 I_Iol Slave The interface defines all important parameters to communicate acyclically with an IO-Link device. Interfaces Type Description I_Iol Slave Defines IO-Link device Properties Name Type Access Definition loca- Initial value Description tion Master Ao ENetid T_Ams Netid Get Local AMS Netid from IO-Link master Name String(255) Get, Set Local Name Port UINT Get, Set Local Port of the IO- Link device 34 Version: 1.1.1 TE1000
## Page 35

Object-oriented function blocks 6.2 FB_IOl Slave Function block for the readout of IO-Link parameters. Sample VAR b Init Done : BOOL; s Term3Ams Net Id AT%I* : AMSNETID; n Term2EPI2328 : E_Io LPort := E_Iol Port. Port2; fb IOLSlave : FB_Iol Slave; END_VAR IF NOT b Init Done THEN b Init Done := TRUE; //Assigns it only once fb Iol Slave. Master Aoe Net Id := F_Create Ams Net Id(s Term3Ams Net Id); //Creates NETID String fb Iol Slave. Port := n Term2EPI2328; //Assigns Port fb Iol Slave. Name := 'EPI2328'; //Gives device a name END_IF Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.3.0 6.2.1 Methods 6.2.1.1 READ Reads out a parameter of the IO-Link device. Inputs Name Type Description n Index WORD Index of the IO-Link Parameter n Subindex BYTE Subindex of the IO-Link Parameter 0 for the whole Structure p DSTBuf PVOID Address of the buffer which is to receive the data that has been read. The programmer is himself responsible for dimensioning the buffer to a size that can accept LEN bytes. The buffer can be a single variable, an array or a structure, whose address can be determined with the ADR operator. cb Buf Len UDINT Number, in bytes, of the data to be read. TE1000 Version: 1.1.1 35
## Page 36

Object-oriented function blocks Outputs Name Type Description READ HRESULT Return value Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 6.2.1.2 READ_UINT16 Reads a UINT16 parameter of the IO-Link device and switches the bytes to high endian. Inputs Name Type Description n Index WORD Index of the IO-Link parameter 0 for the entire structure n Subindex BYTE Subindex of the IO-Link parameter 0 for the entire structure p Data PVOID Address of the buffer that is to receive the read data. The programmer himself is responsible for dimensioning the buffer to a size that can hold LEN bytes. The buffer can be a single variable, an array or a structure, whose address can be found with the ADR operator. Outputs Name Type Description Read_Uint16 HRESULT Return value Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 6.2.1.3 READ_UINT32 Reads a UINT32 parameter of the IO-Link device and switches the bytes to high endian. 36 Version: 1.1.1 TE1000
## Page 37

Object-oriented function blocks Inputs Name Type Description n Index WORD Index of the IO-Link parameter 0 for the entire structure n Subindex BYTE Subindex of the IO-Link parameter 0 for the entire structure p Data PVOID Address of the buffer that is to receive the read data. The programmer himself is responsible for dimensioning the buffer to a size that can hold LEN bytes. The buffer can be a single variable, an array or a structure, whose address can be found with the ADR operator. Outputs Name Type Description Read_Uint32 HRESULT Return value Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 6.2.1.4 READ_UINT64 Reads a UINT64 parameter of the IO-Link device and switches the bytes to high endian. Inputs Name Type Description n Index WORD Index of the IO-Link parameter n Subindex BYTE Subindex of the IO-Link parameter 0 for the entire structure n Data Reference to ULINT Reference to the data type ULINT Outputs Name Type Description Read_UINT64 HRESULT Return value Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 TE1000 Version: 1.1.1 37
## Page 38

Object-oriented function blocks 6.2.1.5 READ_INT16 Reads an INT16 parameter of the IO-Link device and switches the bytes to high endian. Inputs Name Type Description n Index WORD Index of the IO-Link parameter n Subindex BYTE Subindex of the IO-Link parameter 0 for the entire structure n Data Reference to INT Reference to the data type INT Outputs Name Type Description Read_INT16 HRESULT Return value Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 6.2.1.6 READ_INT32 Reads a UINT32 parameter of the IO-Link device and switches the bytes to high endian. Inputs Name Type Description n Index WORD Index of the IO-Link parameter n Subindex BYTE Subindex of the IO-Link parameter 0 for the entire structure n Data Reference to DINT Reference to the data type DINT Outputs Name Type Description Read_INT32 HRESULT Return value Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 38 Version: 1.1.1 TE1000
## Page 39

Object-oriented function blocks 6.2.1.7 READ_INT64 Reads an INT64 parameter of the IO-Link device and switches the bytes to high endian. Inputs Name Type Description n Index WORD Index of the IO-Link parameter n Subindex BYTE Subindex of the IO-Link parameter 0 for the entire structure n Data Reference to LINT Reference to the data type LINT Outputs Name Type Description Read_INT64 HRESULT Return value Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 6.2.1.8 READ_INT8 Reads a UINT8 parameter of the IO-Link device. Inputs Name Type Description n Index WORD Index of the IO-Link parameter n Subindex BYTE Subindex of the IO-Link parameter 0 for the entire structure n Data Reference to SINT Reference to the data type SINT Outputs Name Type Description Read_INT8 HRESULT Return value Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 TE1000 Version: 1.1.1 39
## Page 40

Object-oriented function blocks 6.2.1.9 READ_BOOL Reads a BOOL parameter of the IO-Link device. Inputs Name Type Description n Index WORD Index of the IO-Link Parameter n Subindex BYTE Subindex of the IO-Link Parameter 0 for the whole Structure b Data Reference to BOOL Reference to the data type BOOL Outputs Name Type Description Read_BOOL HRESULT Return value Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 6.2.1.10 READ_Octed String Reads an Octet String parameter of the IO-Link device. Inputs Name Type Description n Index WORD Index of the IO-Link Parameter n Subindex BYTE Subindex of the IO-Link Parameter 0 for the whole Structure arr Data Reference to Reference to the T_Iol Max Octed String type T_Iol Max Octed String [} 17] n Len UDINT Variable size Outputs Name Type Description Read_Octed String HRESULT Return value 40 Version: 1.1.1 TE1000
## Page 41

Object-oriented function blocks Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 6.2.1.11 READ_Real Reads a REAL parameter of the IO-Link device and switches the bytes to high endian. Inputs Name Type Description n Index WORD Index of the IO-Link Parameter n Subindex BYTE Subindex of the IO-Link Parameter 0 for the whole Structure f Data Reference to REAL Reference to the data type REAL Outputs Name Type Description Read_REAL HRESULT Return value Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 6.2.1.12 READ_String Reads a STRING parameter of the IO-Link device and switches the bytes to high endian. Inputs Name Type Description n Index WORD Index of the IO-Link Parameter n Subindex BYTE Subindex of the IO-Link Parameter 0 for the whole Structure s Data Reference to Reference to the T_Iol Max String type T_Iol Max String [} 17] Outputs Name Type Description Read_STRING HRESULT Return value TE1000 Version: 1.1.1 41
## Page 42

Object-oriented function blocks Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 6.2.1.13 READ_String_Fixed Len Reads a STRING parameter with a limited length of the IO-Link device and switches the bytes to high endian. Inputs Name Type Description n Index WORD Index of the IO-Link Parameter n Subindex BYTE Subindex of the IO-Link Parameter 0 for the whole Structure s Data Reference to Reference to the T_Iol Max String type T_Iol Max String [} 17] n Len UDINT Length of the string Outputs Name Type Description Read_String_Fixed Len HRESULT Return value Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 6.2.1.14 READ_Uint8 Reads a UINT8 parameter of the IO-Link device and switches the bytes to high endian. Inputs Name Type Description n Index WORD Index of the IO-Link Parameter n Subindex BYTE Subindex of the IO-Link Parameter 0 for the whole Structure n Data Reference to USINT Reference to the data type USINT; 42 Version: 1.1.1 TE1000
## Page 43

Object-oriented function blocks Outputs Name Type Description Read_UINT8 HRESULT Return value Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 6.2.1.15 Write Writes a parameter of an IO-Link device. Inputs Name Type Description n Index WORD Index of the IO-Link Parameter n Subindex BYTE Subindex of the IO-Link Parameter 0 for the whole Structure p DSTBuf PVOID Address of the buffer which is to receive the data that has been written. The programmer is himself responsible for dimensioning the buffer to a size that can accept LEN bytes. The buffer can be a single variable, an array or a structure, whose address can be determined with the ADR operator. cb Buf Len UDINT Number, in bytes, of the data to be written. Outputs Name Type Description Write HRESULT Return value Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 6.2.1.16 Write_BOOL Writes a BOOL parameter of the IO-Link device. TE1000 Version: 1.1.1 43
## Page 44

Object-oriented function blocks Inputs Name Type Description n Index WORD Index of the IO-Link Parameter n Subindex BYTE Subindex of the IO-Link Parameter 0 for the whole Structure b Data BOOL Value that is written Outputs Name Type Description hresult HRESULT Return value Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 6.2.1.17 Write_INT16 Writes an INT16 parameter of the IO-Link device and switches the bytes to high endian. Inputs Name Type Description n Index WORD Index of the IO-Link Parameter n Subindex BYTE Subindex of the IO-Link Parameter 0 for the whole Structure n Data INT INT value that is written Outputs Name Type Description Write_INT16 HRESULT Return value Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 6.2.1.18 Write_INT32 Writes an INT32 parameter of the IO-Link device and switches the bytes to high endian. 44 Version: 1.1.1 TE1000
## Page 45

Object-oriented function blocks Inputs Name Type Description n Index WORD Index of the IO-Link Parameter n Subindex BYTE Subindex of the IO-Link Parameter 0 for the whole Structure n Data DINT DINT value that is written Outputs Name Type Description Write_INT32 HRESULT Return value Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 6.2.1.19 Write_INT64 Writes an INT64 parameter of the IO-Link device and switches the bytes to high endian. Inputs Name Type Description n Index WORD Index of the IO-Link Parameter n Subindex BYTE Subindex of the IO-Link Parameter 0 for the whole Structure n Data LINT LINT value that is written Outputs Name Type Description Write_INT64 HRESULT Return value Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 6.2.1.20 Write_INT8 Writes an INT8 parameter of the IO-Link device. TE1000 Version: 1.1.1 45
## Page 46

Object-oriented function blocks Inputs Name Type Description n Index WORD Index of the IO-Link Parameter n Subindex BYTE Subindex of the IO-Link Parameter 0 for the whole Structure n Data SINT SINT value that is written Outputs Name Type Description Write_INT8 HRESULT Return value Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 6.2.1.21 Write_OCTEDSTRING Writes an OCTEDSTRING parameter of the IO-Link device. Inputs Name Type Description n Index WORD Index of the IO-Link Parameter n Subindex BYTE Subindex of the IO-Link Parameter 0 for the whole Structure arr Data T_Iol Max String [} 17] T_Iol Max String value that is written n Len UDINT Length of the string Outputs Name Type Description Write_OCTEDSTRING HRESULT Return value Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 6.2.1.22 Write_REAL 46 Version: 1.1.1 TE1000
## Page 47

Object-oriented function blocks Writes a REAL parameter of the IO-Link device and switches the bytes to high endian. Inputs Name Type Description n Index WORD Index of the IO-Link Parameter n Subindex BYTE Subindex of the IO-Link Parameter 0 for the whole Structure f Data REAL REAL value that is written Outputs Name Type Description Write_Real HRESULT Return value Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 6.2.1.23 Write_STRING Writes a string parameter of the IO-Link device. Inputs Name Type Description n Index WORD Index of the IO-Link Parameter n Subindex BYTE Subindex of the IO-Link Parameter 0 for the whole Structure s Data T_Iol Max String [} 17] T_Iol Max String value that is written. Outputs Name Type Description Write_STRING HRESULT Return value Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 6.2.1.24 Write_STRING_Fixed Len TE1000 Version: 1.1.1 47
## Page 48

Object-oriented function blocks Writes a string parameter with a limited length of the IO-Link device. Inputs Name Type Description n Index WORD Index of the IO-Link Parameter n Subindex BYTE Subindex of the IO-Link Parameter 0 for the whole Structure s Data T_Iol Max String [} 17] T_Iol Max String value that will be written n Len UDINT Number of characters Outputs Name Type Description Write_STRING_Fixed Len HRESULT Return value Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 6.2.1.25 Write_UINT16 Writes an UINT16 parameter of the IO-Link device and switches the bytes to high endian. Inputs Name Type Description n Index WORD Index of the IO-Link Parameter n Subindex BYTE Subindex of the IO-Link Parameter 0 for the whole Structure n Data INT INT value that is written Outputs Name Type Description Write_UINT16 HRESULT Return value Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 6.2.1.26 Write_UINT32 48 Version: 1.1.1 TE1000
## Page 49

Object-oriented function blocks Writes an UINT32 parameter of the IO-Link device and switches the bytes to high endian. Inputs Name Type Description n Index WORD Index of the IO-Link Parameter n Subindex BYTE Subindex of the IO-Link Parameter 0 for the whole Structure n Data UDINT UDINT value that is written Outputs Name Type Description Write_UINT32 HRESULT Return value Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 6.2.1.27 Write_UINT64 Writes an UINT64 parameter of the IO-Link device and switches the bytes to high endian. Inputs Name Type Description n Index WORD Index of the IO-Link Parameter n Subindex BYTE Subindex of the IO-Link Parameter 0 for the whole Structure n Data ULINT ULINT value that is written Outputs Name Type Description Write_UINT64 HRESULT Return value Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 6.2.1.28 Write_UINT8 TE1000 Version: 1.1.1 49
## Page 50

Object-oriented function blocks Writes an UINT8 parameter of the IO-Link device. Inputs Name Type Description n Index WORD Index of the IO-Link Parameter n Subindex BYTE Subindex of the IO-Link Parameter 0 for the whole Structure n Data USINT USINT value that is written Outputs Name Type Description Write_UINT8 HRESULT Return value Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 6.2.2 Sample The use of individual functions can look like this. In this sample, the Application Specific Tag is written via Write and then read and checked via Read method. The following function block is part of the Io Link sample project. For more information, see the chapter Samples [} 69]. FUNCTION_BLOCK FB_Sample_03_Iol Slave VAR_INPUT b Execute : BOOL := FALSE; s Application Tag : STRING(32) := ''; END_VAR VAR_OUTPUT b Busy : BOOL := FALSE; b Done : BOOL := FALSE; b Error : BOOL := FALSE; n Ads Error : E_Ads Err := E_Ads Err. NOERR; n Iol Error : E_Iol Error := E_Iol Error. No Error; s Error Txt : STRING(255) := ''; END_VAR VAR b Execute Old : BOOL; n State : INT := 0; fb Iol Slave : FB_Iol Slave; b Init Done : BOOL := FALSE; hr : HRESULT; s Application Tag Read : STRING(32) := ''; END_VAR //// // Init // IF NOT b Init Done THEN b Init Done := TRUE; fb Iol Slave. Master Aoe Net Id := F_Create Ams Net Id(GVL_IO.s Term2Ams Net Id); fb Iol Slave. Port := GVL_IO.n Term2EPI1008; fb Iol Slave. Name := 'EPI1008'; END_IF //// // Execute/Busy State Machine // IF b Execute AND NOT b Execute Old AND NOT b Busy THEN b Busy := TRUE; n State := 10; // WRITE 50 Version: 1.1.1 TE1000
## Page 51

Object-oriented function blocks ELSIF NOT b Execute THEN b Busy := FALSE; b Error := FALSE; b Done := FALSE; n Ads Error := E_Ads Err. NOERR; n Iol Error := E_Iol Error. No Error; s Error Txt := ''; END_IF b Execute Old := b Execute; //// // FB State Machine // CASE n State OF // IDLE 0:; // WRITE 10: hr := fb Iol Slave. Write(16#0018, 0, ADR(s Application Tag), 32); IF NOT F_Iol Is Busy(hr) THEN IF FAILED(hr) THEN b Busy := FALSE; b Error := TRUE; s Error Txt := fb Iol Slave. Error Txt; n Ads Error := F_Iol Get Ads Error(hr); n Iol Error := F_Iol Get Iol Error(hr); n State := 0; // IDLE; ELSE n State := 20; // READ; END_IF END_IF // READ 20: hr := fb Iol Slave. Read(16#0018, 16#00, ADR(s Application Tag Read), 32); IF NOT F_Iol Is Busy(hr) THEN IF FAILED(hr) THEN b Busy := FALSE; b Error := TRUE; s Error Txt := fb Iol Slave. Error Txt; n Ads Error := F_Iol Get Ads Error(hr); n Iol Error := F_Iol Get Iol Error(hr); n State := 0; // IDLE; ELSE n State := 30; // CHECK; END_IF END_IF // CHECK 30: IF s Application Tag <> s Application Tag Read THEN b Busy := FALSE; b Error := TRUE; s Error Txt := 's Application Tag and s Application Tag Read are not equal!'; ELSE b Busy := FALSE; b Done := TRUE; n State := 0; END_IF END_CASE //// // call FBs // fb Iol Slave(); 6.3 FB_Iol Std Var Slave TE1000 Version: 1.1.1 51
## Page 52

Object-oriented function blocks This function block inherits from the FB_IOl Slave [} 35]. It is intended for writing and reading standardized IO- Link parameters. Sample VAR b Init Done : BOOL; s Term3Ams Net Id AT%I* : AMSNETID; n Term2EPI2328 : E_Io LPort := E_Iol Port. Port2; fb IOLStd Var Slave : FB_Iol Std Var Slave; END_VAR IF NOT b Init Done THEN b Init Done := TRUE; //Assigns it only once fb IOLStd Var Slave. Master Aoe Net Id := F_Create Ams Net Id(s Term3Ams Net Id); //Creates NETID String fb IOLStd Var Slave. Port := n Term2EPI2328; //Assigns Port fb IOLStd Var Slave. Name := 'EPI2328'; //Gives device a name END_IF Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 6.3.1 Methods 6.3.1.1 Read Application Specific Tag Reads out the Application Specific Tag. Inputs Name Type Description data Reference to STRING(32) Variable of the buffer that is to receive the read data. Outputs Name Type Description hresult HRESULT Return value Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 6.3.1.2 Read Detailed Device Status Reads out the Detailed Device Status of an IO-Link device. 52 Version: 1.1.1 TE1000
## Page 53

Object-oriented function blocks Inputs Name Type Description Detailed Status Reference to Variable of the buffer that is to receive the read data. T_Iol Detailed Device Status [} 17] Outputs Name Type Description hresult HRESULT Return value Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 6.3.1.3 Read Device Access Locks Reads out the device access lock of an IO-Link device. Inputs Name Type Description data Reference to Specifies the device access lock ST_Iol Acess Locks [} 16] Outputs Name Type Description hresult HRESULT Return value Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 6.3.1.4 Read Device Status Reads out the device status of the IO-Link device. TE1000 Version: 1.1.1 53
## Page 54

Object-oriented function blocks Inputs Name Type Description data Reference to Variable of the buffer that is to receive the read data. E_Iol Device Status [} 14] Outputs Name Type Description hresult HRESULT Return value Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 6.3.1.5 Read Direct Parameter1 Reads out the Direct Parameter1 page of the IO-Link device. Inputs Name Type Description data Reference to Variable of the buffer that is to receive the read data. ST_Iol Direct Parameter1 [} 16] Outputs Name Type Description hresult HRESULT Return value Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 6.3.1.6 Read Direct Parameter2 Reads out the Direct Paramerer2 from an IO-Link device. 54 Version: 1.1.1 TE1000
## Page 55

Object-oriented function blocks Inputs Name Type Description data Reference to Variable of the buffer that is to receive the read data. ST_Iol Direct Parameter2 [} 17] Outputs Name Type Description hresult HRESULT Return value Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 6.3.1.7 Read Firmware Version Reads out the firmware version of an IO-Link device. Inputs Name Type Description data Reference to String(64) Variable of the buffer that is to receive the read data. Outputs Name Type Description hresult HRESULT Return value Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 6.3.1.8 Read Hardware Version Reads out the hardware version of the IO-Link device. Inputs Name Type Description data Reference to STRING(64) Variable of the buffer that is to receive the read data. TE1000 Version: 1.1.1 55
## Page 56

Object-oriented function blocks Outputs Name Type Description hresult HRESULT Return value Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 6.3.1.9 Read Product ID Reads out the product ID of the IO-Link device. Inputs Name Type Description data Reference to STRING(64) Variable of the buffer that is to receive the read data. Outputs Name Type Description hresult HRESULT Return value Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 6.3.1.10 Read Product Name Reads out the product name of the IO-Link device. Inputs Name Type Description data Reference to STRING(64) Variable of the buffer that is to receive the read data. Outputs Name Type Description hresult HRESULT Return value 56 Version: 1.1.1 TE1000
## Page 57

Object-oriented function blocks Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 6.3.1.11 Read Product Text Reads out the product text of an IO-Link device. Inputs Name Type Description data Reference to STRING(64) Variable of the buffer that is to receive the read data. Outputs Name Type Description hresult HRESULT Return value Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 6.3.1.12 Read Profile Characteristic Reads out the profile characteristics of an IO-Link device. Inputs Name Type Description data Reference to Variable of the buffer that is to receive the read data. T_Iol Profile Characteristics [} 17] Outputs Name Type Description hresult HRESULT Return value Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 TE1000 Version: 1.1.1 57
## Page 58

Object-oriented function blocks 6.3.1.13 Read Serial Number Method reads out the serial number of the IO-Link device. Inputs Name Type Description data Reference to STRING(16) Variable of the buffer that is to receive the read data. Outputs Name Type Description hresult HRESULT Return value Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 6.3.1.14 Read Vendor Name Reads out the vendor name of the IO-Link device. Inputs Name Type Description data Reference to STRING(64) Variable of the buffer that is to receive the read data. Outputs Name Type Description hresult HRESULT Return value Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 6.3.1.15 Read Vendor Text Reads out the vendor text of the IO-Link device. 58 Version: 1.1.1 TE1000
## Page 59

Object-oriented function blocks Inputs Name Type Description data Reference to STRING(64) Variable of the buffer that is to receive the read data. Outputs Name Type Description hresult HRESULT Return value Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 6.3.1.16 Sys Cmd Factory Reset Resets the IO-Link device to factory settings. Outputs Name Type Description hresult HRESULT Return value Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 6.3.1.17 Sys Cmd Application Reset Resets the IO-Link device to the application settings. Outputs Name Type Description hresult HRESULT Return value Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 TE1000 Version: 1.1.1 59
## Page 60

Object-oriented function blocks 6.3.1.18 Sys Cmd Device Reset Resets the IO-Link device to device settings. Outputs Name Type Description hresult HRESULT Return value Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 6.3.1.19 Sys Cmd Block Param Start Starts the block parameterization. Outputs Name Type Description hresult HRESULT Return value Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 6.3.1.20 Sys Cmd Block Param End Ends the block parameterization. Outputs Name Type Description hresult HRESULT Return value 60 Version: 1.1.1 TE1000
## Page 61

Object-oriented function blocks Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 6.3.1.21 Sys Cmd Store Parameter Server Sets the data storage via the PLC. Outputs Name Type Description hresult HRESULT Return value Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 6.3.1.22 Write Application Specific Tag Writes the IO-Link parameter Application Specifig Tag. Inputs Name Type Description data STRING(32) Variable of the buffer that is to receive the read data. Outputs Name Type Description hresult HRESULT Return value Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 6.3.1.23 Write Device Access Locks Writes the Device Acess Locks of an IO-Link device. TE1000 Version: 1.1.1 61
## Page 62

Object-oriented function blocks Inputs Name Type Description data Reference to Variable of the buffer that is to receive the written ST_Iol Access Locks [} 16] data. Outputs Name Type Description hresult HRESULT Return value Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 6.3.1.24 Write Direct Parameter2 Writes the Direct Parameter2 parameter of the IO-Link device. Inputs Name Type Description data Reference to Variable of the buffer that is to receive the read data. ST_Iol Direct Parameter2 [} 17] Outputs Name Type Description hresult HRESULT Return value Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 6.3.1.25 Write Profile Characteristic Writes the Profile Characteristic parameter of the IO-Link device. 62 Version: 1.1.1 TE1000
## Page 63

Object-oriented function blocks Inputs Name Type Description data Reference to Variable of the buffer that is to receive the written T_Iol Profile Characteristics data. [} 17] Outputs Name Type Description hresult HRESULT Return value Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 6.3.1.26 Write System Command Writes any system command for the IO-Link device. Inputs Name Type Description data Reference to Variable of the buffer that is to receive the written E_Iol Systemcommand data. [} 15] Outputs Name Type Description hresult HRESULT Return value Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 6.3.2 Sample In this sample, the Application Specific Tag is written using the Write Applicationspecific Tag methods and then read and checked using the Read Application Specific Tag method. FUNCTION_BLOCK FB_Sample_04_Iol Std Var Slave VAR_INPUT b Execute :BOOL := FALSE; s Application Tag :STRING(32) := ''; END_VAR VAR_OUTPUT b Busy :BOOL := FALSE; b Done :BOOL := FALSE; b Error :BOOL := FALSE; n Ads Error :E_Ads Err := E_Ads Err. NOERR; n Iol Error :E_Iol Error := E_Iol Error. No Error; TE1000 Version: 1.1.1 63
## Page 64

Object-oriented function blocks s Error Txt :STRING(255) := ''; END_VAR VAR b Execute Old :BOOL; n State :INT := 0; fb Iol Slave :FB_Iol Std Var Slave; b Init Done :BOOL := FALSE; hr :HRESULT; s Application Tag Read : STRING(32) := ''; END_VAR //// // Init // IF NOT b Init Done THEN b Init Done := TRUE; fb Iol Slave. Master Aoe Net Id := F_Create Ams Net Id(GVL_IO.s Term2Ams Net Id); //Creates NETID String fb Iol Slave. Port := GVL_IO.n Term2EPI1008; fb Iol Slave. Name := 'EPI1008'; END_IF //// // Execute/Busy State Machine // IF b Execute AND NOT b Execute Old AND NOT b Busy THEN b Busy := TRUE; n State := 10; // WRITE ELSIF NOT b Execute THEN b Busy := FALSE; b Error := FALSE; b Done := FALSE; n Ads Error := E_Ads Err. NOERR; n Iol Error := E_Iol Error. No Error; s Error Txt := ''; END_IF b Execute Old := b Execute; //// // FB State Machine // CASE n State OF // IDLE 0:; // WRITE 10: hr := fb Iol Slave. Write Application Specific Tag(s Application Tag); IF NOT F_Iol Is Busy(hr) THEN IF FAILED(hr) THEN b Busy := FALSE; b Error := TRUE; s Error Txt := fb Iol Slave. Error Txt; // TODO n Ads Error := F_Iol Get Ads Error(hr); n Iol Error := F_Iol Get Iol Error(hr); n State := 0; // IDLE; ELSE n State := 20; // WRITE; END_IF END_IF // READ 20: hr := fb Iol Slave. Read Application Specific Tag(s Application Tag Read); IF NOT F_Iol Is Busy(hr) THEN IF FAILED(hr) THEN b Busy := FALSE; b Error := TRUE; s Error Txt := fb Iol Slave. Error Txt; // TODO n Ads Error := F_Iol Get Ads Error(hr); n Iol Error := F_Iol Get Iol Error(hr); n State := 0; // IDLE; ELSE n State := 30; // CHECK; END_IF END_IF // CHECK 64 Version: 1.1.1 TE1000
## Page 65

Object-oriented function blocks 30: IF s Application Tag <> s Application Tag Read THEN b Busy := FALSE; b Error := TRUE; s Error Txt := 's Application Tag and s Application Tag Read are not equal!'; ELSE b Busy := FALSE; b Done := TRUE; n State := 0; END_IF END_CASE //// // call FBs // fb Iol Slave(); 6.4 FB_Iol Ext Ident Slave FB_Io LExt Slave inherits from the function block FB_Iol Slave. Only IO-Link devices with the profile: 0x8100 [} 10] have these parameters. Sample VAR b Init Done : BOOL; s Term3Ams Net Id AT%I* : AMSNETID; n Term2EPI2328 : E_Io LPort := E_Iol Port. Port2; fb IOLExt Ident Slave : FB_Iol Ext Ident Slave; END_VAR IF NOT b Init Done THEN b Init Done := TRUE; //Assigns it only once fb IOLExt Ident Slave. Master Aoe Net Id := F_Create Ams Net Id(s Term3Ams Net Id); //Creates NETID String fb IOLExt Ident Slave. Port := n Term2EPI2328; //Assigns Port fb IOLExt Ident Slave. Name := 'EPI2328'; //Gives device a name END_IF Requirements Development environment Required PLC library Twin CAT from v3.1.4024.25 Tc3_Io Link from v3.3.4.0 6.4.1 Methods 6.4.1.1 Read Function Tag Function to read the Function Tag. Inputs Name Type Description data Reference to STRING(32) Variable of the buffer that is to receive the read data. TE1000 Version: 1.1.1 65
## Page 66

Object-oriented function blocks Outputs Name Type Description hresult HRESULT Return value 6.4.1.2 Read Location Tag Function to read out the Location Tag. The Location Tag is a parameter that contains the location information of the IO-Link device. Inputs Name Type Description data Reference to STRING(32) Variable of the buffer that is to receive the read data. Outputs Name Type Description hresult HRESULT Return value 6.4.1.3 Write Function Tag Writes the Function Tag parameter. Inputs Name Type Description data STRING(32) Variable of the buffer that is to receive the read data. Outputs Name Type Description hresult HRESULT Return value 6.4.1.4 Write Location Tag Writes the Location Tag of an IO-Link device. 66 Version: 1.1.1 TE1000
## Page 67

Object-oriented function blocks Inputs Name Type Description data STRING(32) Variable of the buffer that is to receive the read data. Outputs Name Type Description hresult HRESULT Return value 6.4.2 Sample In this sample, the Application Specific Tag is written using the Write Applicationspecific Tag methods and then read and checked using the Read Application Specific Tag method. FUNCTION_BLOCK FB_Sample_04_Iol Std Var Slave VAR_INPUT b Execute :BOOL := FALSE; s Application Tag :STRING(32) := ''; END_VAR VAR_OUTPUT b Busy :BOOL := FALSE; b Done :BOOL := FALSE; b Error :BOOL := FALSE; n Ads Error :E_Ads Err := E_Ads Err. NOERR; n Iol Error :E_Iol Error := E_Iol Error. No Error; s Error Txt :STRING(255) := ''; END_VAR VAR b Execute Old :BOOL; n State :INT := 0; fb Iol Slave :FB_Iol Std Var Slave; b Init Done :BOOL := FALSE; hr :HRESULT; s Application Tag Read : STRING(32) := ''; END_VAR //// // Init // IF NOT b Init Done THEN b Init Done := TRUE; fb Iol Slave. Master Aoe Net Id := F_Create Ams Net Id(GVL_IO.s Term2Ams Net Id); //Creates NETID String fb Iol Slave. Port := GVL_IO.n Term2EPI1008; fb Iol Slave. Name := 'EPI1008'; END_IF //// // Execute/Busy State Machine // IF b Execute AND NOT b Execute Old AND NOT b Busy THEN b Busy := TRUE; n State := 10; // WRITE ELSIF NOT b Execute THEN b Busy := FALSE; b Error := FALSE; b Done := FALSE; n Ads Error := E_Ads Err. NOERR; n Iol Error := E_Iol Error. No Error; s Error Txt := ''; END_IF b Execute Old := b Execute; //// // FB State Machine // CASE n State OF // IDLE 0:; // WRITE 10: TE1000 Version: 1.1.1 67
## Page 68

Object-oriented function blocks hr := fb Iol Slave. Write Application Specific Tag(s Application Tag); IF NOT F_Iol Is Busy(hr) THEN IF FAILED(hr) THEN b Busy := FALSE; b Error := TRUE; s Error Txt := fb Iol Slave. Error Txt; // TODO n Ads Error := F_Iol Get Ads Error(hr); n Iol Error := F_Iol Get Iol Error(hr); n State := 0; // IDLE; ELSE n State := 20; // WRITE; END_IF END_IF // READ 20: hr := fb Iol Slave. Read Application Specific Tag(s Application Tag Read); IF NOT F_Iol Is Busy(hr) THEN IF FAILED(hr) THEN b Busy := FALSE; b Error := TRUE; s Error Txt := fb Iol Slave. Error Txt; // TODO n Ads Error := F_Iol Get Ads Error(hr); n Iol Error := F_Iol Get Iol Error(hr); n State := 0; // IDLE; ELSE n State := 30; // CHECK; END_IF END_IF // CHECK 30: IF s Application Tag <> s Application Tag Read THEN b Busy := FALSE; b Error := TRUE; s Error Txt := 's Application Tag and s Application Tag Read are not equal!'; ELSE b Busy := FALSE; b Done := TRUE; n State := 0; END_IF END_CASE //// // call FBs // fb Iol Slave(); 68 Version: 1.1.1 TE1000
## Page 69

Samples 7 Samples Sample code and configurations for this product can be obtained from the corresponding repository on Git Hub: https://github.com/Beckhoff/Plc Library_Tc3_Io Link_Sample. There you have the option to clone the repository or download a ZIP file containing the sample. TE1000 Version: 1.1.1 69
## Page 70

Appendix 8 Appendix 8.1 Parameter data exchange An intelligent IO-Link sensor/actuator can support parameterization by ISDU (Indexed Service Data Unit). The PLC must explicitly query or, when marked as such, send these acyclic service data. Access ISDU Twin CAT supports access via ADS and via the Co E directory. The respective parameter is addressed via the so-called ISDU index. The following ranges are available: Name Index range System 0x00..0x0F Identification 0x10..0x1F Diagnostic 0x20..0x2F Communication 0x30..0x3F Preferred Index 0x40..0x FE Extended Index 0x0100..0x3FFF the range 0x4000..0x FFFF is reserved The use of the implementation of these ranges is the responsibility of the sensor/actuator vendor. For clarification you see only some possible indices with designation listed here. Refer to the corresponding chapter in the info system Object description and parameterization. Direct parameters The indices 0x0000 and 0x0001 are special parameters that each IO-Link device possesses. An IO-Link master requires the information from Direct Parameter 1 to establish IO-Link communication with the device. 70 Version: 1.1.1 TE1000
## Page 71

Appendix Index Subindex Name Flag Type Definition Direct Parameter1 TE1000 Version: 1.1.1 71
## Page 72

Appendix Index Subindex Name Flag Type Definition 0x0000 0x01 Reserved ro UINT8 Reserved 0x0000 0x02 Master Cycle Time ro UINT8 Master cycle time 0x0000 0x03 Min Cycle Time ro UINT8 Minimum cycle time 0x0000 0x04 M-Sequence Capability ro UINT8 M sequence 0x0000 0x05 IO-Link Version ID ro UINT8 IO-Link Revisions-ID 0x0000 0x06 Process Data Input ro UINT8 Process data Length input length 0x0000 0x07 Process Data Output ro UINT8 Process data length output length 0x0000 0x08 Vendor ID 1 ro UINT8 Vendor ID 1 0x0000 0x09 Vendor ID 2 ro UINT8 Vendor ID 2 0x0000 0x A Device ID1 ro UINT8 Device ID 1 0x0000 0x B Device ID 2 ro UINT8 Device ID 2 0x0000 0x C Device ID3 ro UINT8 Device ID 3 0x0000 0x D Reserved ro UINT8 Reserved 0x0000 0x E Reserved ro UINT8 Reserved 0x0000 0x F Reserved ro UINT8 Reserved Direct Parameter 2 0x0001 0x01 Device Specific rw UINT8 Device-specific Parameter 1 0x0001 0x02 Device Specific rw UINT8 Device-specific Parameter 2 0x0001 0x03 Device Specific rw UINT8 Device-specific Parameter 3 0x0001 0x04 Device Specific rw UINT8 Device-specific Parameter 4 0x0001 0x05 Device Specific rw UINT8 Device-specific Parameter 5 0x0001 0x06 Device Specific rw UINT8 Device-specific Parameter 6 0x0001 0x07 Device Specific rw UINT8 Device-specific Parameter 7 0x0001 0x08 Device Specific rw UINT8 Device-specific Parameter 8 0x0001 0x09 Device Specific rw UINT8 Device-specific Parameter 9 0x0001 0x A Device Specific rw UINT8 Device-specific Parameter 10 0x0001 0x B Device Specific rw UINT8 Device-specific Parameter 11 0x0001 0x C Device Specific rw UINT8 Device-specific Parameter 12 0x0001 0x D Device Specific rw UINT8 Device-specific Parameter 13 0x0001 0x E Device Specific rw UINT8 Device-specific Parameter 14 0x0001 0x F Device Specific rw UINT8 Device-specific Parameter 15 0x0001 0x10 Device Specific rw UINT8 Device-specific Parameter 16 72 Version: 1.1.1 TE1000
## Page 73

Appendix Specified parameters The standard IO-Link parameters are also listed here. Index Subindex Name Flag Type Definition Device Access Locks 0x000C 0x01 Parameter (Write ) rw s BOOL Locks the write access Access Lock 0x000C 0x02 Data Storage Lock rw s BOOL Locks the Data Storage access 0x000C 0x03 Local Parametrization rw s BOOL Locks the local parameter Lock access 0x000C 0x04 Local Userinterface rw s BOOL Locks the local user Lock interface Detection parameters 0x0010 0x00 Vendor Name ro STRING Vendor name 0x0011 0x00 Vendor Text ro STRING Vendor text 0x0012 0x00 Product Name ro STRING Product name 0x0013 0x00 Product ID ro STRING Product ID 0x0014 0x00 Product Text ro STRING Product text 0x0015 0x00 Serial Number ro STRING Serial number 0x0016 0x00 Hardware version ro STRING Hardware version 0x0017 0x00 Firmware Version ro STRING Firmware version 0x0018 0x00 Application Specific Tag rw STRING Application specific text 0x0019 0x00 Function Tag rw STRING Function text Device Status and Detailed Device Status The parameters 0x0024 Device Status and 0x0025 Detailed Device Description are optional parameters for standard IO-Link devices. However, if an IO-Link device supports profiles, these parameters are mandatory. Index Subindex Name Flag Type Definition 0x0024 0x00 Device Status ro Uint8 Device status Detailed Device Status 0x0025 0x01 Detailed Device Status ro s Octet String Event of an IO-Link device 0x0025 0x02 Detailed Device Status ro s Octet String Event of an IO-Link device TE1000 Version: 1.1.1 73
## Page 74

Appendix Index Subindex Name Flag Type Definition 0x0025 0x03 Detailed Device Status ro s Octet String Event of an IO-Link device 0x0025 0x04 Detailed Device Status ro s Octet String Event of an IO-Link device If an IO-Link device does not support the parameter 0x0025, the event history can also be read from the Co E parameter 0x10F3 using the FB_Ec Coe Sdo Read function block. 8.2 Error Codes 8.2.1 IO-Link error codes Error codes are generated in the event of an error during ADS access to an IO-Link device. The possible error codes are listed in the following tables. Example of an Ads Return Code Ads Return Code 0x80110700 74 Version: 1.1.1 TE1000
## Page 75

Appendix - 80: Device Application Error (IO-Link Spec), - 11: Index not Available (IO-Link Spec), - 0700: General ADS Error Error Types (IO-Link Spec) Incident Error Additional Name Definition Code Code Device application 0x80 0x00 APP_DEV This Error Type shall be used if the requested service has error – no details been refused by the Device application and no detailed Index not 0x80 0x11 IDX_NOTAVAIL This Error Type shall be used whenever a read or write available access occurs to a not existing Index. Subindex not 0x80 0x12 SUBIDX_NOTAVAIL This Error Type shall be used whenever a read or write available access occurs to a not existing Subindex. Service 0x80 0x20 SERV_NOTAVAIL This Error Type shall be used if a parameter is not temporarily not accessible for a read or write service due to the current available state of the Device application. Service 0x80 0x21 SERV_NOTAVAIL_LOCCTRL This Error Type shall be used if a parameter is not temporarily not accessible for a read or write service due to an ongoing available – local local operation at the Device (for example operation or control parameterization via an on-board Device control panel). Service 0x80 0x22 SERV_NOTAVAIL_DEVCTRL This Error Type shall be used if a read or write service is temporarily not not accessible due to a remote triggered state of the available – Device device application (for example parameterization during a control remote triggered teach-in operation or calibration). Access denied 0x80 0x23 IDX_NOT_WRITEABLE This Error Type shall be used if a write service tries to access a read-only parameter. Parameter value 0x80 0x30 PAR_VALOUTOFRNG This Error Type shall be used for a write service to a out of range parameter outside its permitted range of values. Parameter value 0x80 0x31 PAR_VALGTLIM This Error Type shall be used for a write service to a above limit parameter above its specified value range. Parameter value 0x80 0x32 PAR_VALLTLIM This Error Type shall be used for a write service to a below limit parameter below its specified value range. Parameter length 0x80 0x33 VAL_LENOVRRUN This Error Type shall be used when the content of a write overrun service to a parameter is greater than the parameter specified length. This Error Type shall also be used, if a data object is too large to be processed by the Device application (for example ISDU buffer restriction). Parameter length 0x80 0x34 VAL_LENUNDRUN This Error Type shall be used when the content of a write underrun service to a parameter is less than the parameter specified length (for example write access of an Unsigned16 value to an Unsigned32 parameter). Function not 0x80 0x35 FUNC_NOTAVAIL This Error Type shall be used for a write service with a available command value not supported by the Device application (for example a System Command with a value not implemented). Function 0x80 0x36 FUNC_UNAVAILTEMP This Error Type shall be used for a write service with a temporarily command value calling a Device function not available unavailable due to the current state of the Device application (for example a System Command). Invalid parameter 0x80 0x40 PAR_SETINVALID This Error Type shall be used if values sent via single set parameter transfer are not consistent with other actual parameter settings (for example overlapping set points for a binary data setting Inconsistent 0x80 0x41 PAR_SETINCONSIST This Error Type shall be used at the termination of a block parameter set parameter transfer with Param Download End or Param Download Store if the plausibility check shows inconsistencies Application not 0x80 0x82 APP_DEVNOTRDY This Error Type shall be used if a read or write service is ready refused due to a temporarily unavailable application (for example peripheral controllers during startup). Vendor specific 0x81 0x00 UNSPECIFIC This Error Type will be propagated directly to higher level processing elements as an error (no warning) by the Vendor specific 0x81 0x01 to VENDOR_SPECIFIC Master. 0x FF TE1000 Version: 1.1.1 75
## Page 76

Appendix Derived Error Types (IO-Link Spec) Incident Error Additional Name Definition Code Code Master – 0x10 0x00 COM_ERR The Master generates a negative service response with Communication this Error Type if a communication error occurred during a error read or write service, for example the SDCI connection is interrupted. Master – ISDU 0x11 0x00 I-SERVICE_TIMEOUT The Master generates a negative service response with timeout this Error Type, if a Read or Write service is pending longer than the specified I-Service timeout in the Master. Device Event – 0x11 0x00 I-SERVICE_TIMEOUT If the Master received an Event with the Event Qualifier ISDU error (DL, and the Event Code 0x5600, a negative service response Error, single shot, indicating a service timeout is generated and returned to 0x5600) the requester (Master – ISDU timeout). Device Event – 0x11 0x00 I-SERVICE_TIMEOUT If the Master received an Event with the Event Qualifier ISDU illegal and the Event Code 0x5800, a negative service response service primitive indicating a service timeout is generated and returned to (AL, Error, single the requester (Master – ISDU timeout). shot, 0x5800) Master – ISDU 0x56 0x00 M_ ISDU_CHECKSUM The Master generates a negative service response with checksum error this Error Type, if its data link layer detects an ISDU checksum error. Master – ISDU 0x57 0x00 M_ ISDU_ILLEGAL The Master generates a negative service response with illegal service this Error Type, if its data link layer detects an ISDU primitive illegal service primitive. Device Event – 0x80 0x33 VAL_LENOVRRUN If the Master received an Event with the Event Qualifier ISDU buffer and the Event Code 0x5200, a negative service response overflow (DL, indicating a parameter length overrun is generated and Error, single shot, returned to the requester (see parameter length overrun) 0x5200) Events from legacy Devices shall be redirected in compatibility mode to this derived Error Type Further error diagnosis options Device State Inputs Device (0x1A05) It is indicated in the PDO "Device Diag" (0x F101:0D) that at least one event has occurred in the "Diag History". "Device State" is the standard status bit for Ether CAT slaves and shows, for example, that communication with one of the slaves has been interrupted. Device State Inputs (0x1A04) The status of the IO-Link devices is displayed at the respective port (see Comment field in the System Manager). Nominal/actual comparison of the parameter objects The 0x90n0 (Info Data) indices can be used to validate the 0x80n0 configuration indices of the connected IO-Link device. In the event of an error, these objects can be used to compare the configuration with the actual state. Lost Frame Counter The Lost Frame counter in object 0x A0n0:02 is for the diagnosis of the transmission quality. Twin CAT provides the possibility here to diagnose problems, e. g. with the wiring, EMC or power supply. 76 Version: 1.1.1 TE1000
## Page 77

Appendix 8.2.2 ADS Return Codes Grouping of error codes: Global error codes: ADS Return Codes [} 77]... (0x9811_0000 ...) Router error codes: ADS Return Codes [} 77]... (0x9811_0500 ...) General ADS errors: ADS Return Codes [} 78]... (0x9811_0700 ...) RTime error codes: ADS Return Codes [} 79]... (0x9811_1000 ...) Global error codes Hex Dec HRESULT Name Description 0x0 0 0x98110000 ERR_NOERROR No error. 0x1 1 0x98110001 ERR_INTERNAL Internal error. 0x2 2 0x98110002 ERR_NORTIME No real time. 0x3 3 0x98110003 ERR_ALLOCLOCKEDMEM Allocation locked – memory error. 0x4 4 0x98110004 ERR_INSERTMAILBOX Mailbox full – the ADS message could not be sent. Reducing the number of ADS messages per cycle will help. 0x5 5 0x98110005 ERR_WRONGRECEIVEHMSG Wrong HMSG. 0x6 6 0x98110006 ERR_TARGETPORTNOTFOUND Target port not found – ADS server is not started or is not reachable. 0x7 7 0x98110007 ERR_TARGETMACHINENOTFOUND Target computer not found – AMS route was not found. 0x8 8 0x98110008 ERR_UNKNOWNCMDID Unknown command ID. 0x9 9 0x98110009 ERR_BADTASKID Invalid task ID. 0x A 10 0x9811000A ERR_NOIO No IO. 0x B 11 0x9811000B ERR_UNKNOWNAMSCMD Unknown AMS command. 0x C 12 0x9811000C ERR_WIN32ERROR Win32 error. 0x D 13 0x9811000D ERR_PORTNOTCONNECTED Port not connected. 0x E 14 0x9811000E ERR_INVALIDAMSLENGTH Invalid AMS length. 0x F 15 0x9811000F ERR_INVALIDAMSNETID Invalid AMS Net ID. 0x10 16 0x98110010 ERR_LOWINSTLEVEL Installation level is too low –Twin CAT 2 license error. 0x11 17 0x98110011 ERR_NODEBUGINTAVAILABLE No debugging available. 0x12 18 0x98110012 ERR_PORTDISABLED Port disabled – Twin CAT system service not started. 0x13 19 0x98110013 ERR_PORTALREADYCONNECTED Port already connected. 0x14 20 0x98110014 ERR_AMSSYNC_W32ERROR AMS Sync Win32 error. 0x15 21 0x98110015 ERR_AMSSYNC_TIMEOUT AMS Sync Timeout. 0x16 22 0x98110016 ERR_AMSSYNC_AMSERROR AMS Sync error. 0x17 23 0x98110017 ERR_AMSSYNC_NOINDEXINMAP No index map for AMS Sync available. 0x18 24 0x98110018 ERR_INVALIDAMSPORT Invalid AMS port. 0x19 25 0x98110019 ERR_NOMEMORY No memory. 0x1A 26 0x9811001A ERR_TCPSEND TCP send error. 0x1B 27 0x9811001B ERR_HOSTUNREACHABLE Host unreachable. 0x1C 28 0x9811001C ERR_INVALIDAMSFRAGMENT Invalid AMS fragment. 0x1D 29 0x9811001D ERR_TLSSEND TLS send error – secure ADS connection failed. 0x1E 30 0x9811001E ERR_ACCESSDENIED Access denied – secure ADS access denied. Router error codes Hex Dec HRESULT Name Description 0x500 1280 0x98110500 ROUTERERR_NOLOCKEDMEMORY Locked memory cannot be allocated. 0x501 1281 0x98110501 ROUTERERR_RESIZEMEMORY The router memory size could not be changed. 0x502 1282 0x98110502 ROUTERERR_MAILBOXFULL The mailbox has reached the maximum number of possible messages. 0x503 1283 0x98110503 ROUTERERR_DEBUGBOXFULL The Debug mailbox has reached the maximum number of possible messages. 0x504 1284 0x98110504 ROUTERERR_UNKNOWNPORTTYPE The port type is unknown. 0x505 1285 0x98110505 ROUTERERR_NOTINITIALIZED The router is not initialized. 0x506 1286 0x98110506 ROUTERERR_PORTALREADYINUSE The port number is already assigned. TE1000 Version: 1.1.1 77
## Page 78

Appendix Hex Dec HRESULT Name Description 0x507 1287 0x98110507 ROUTERERR_NOTREGISTERED The port is not registered. 0x508 1288 0x98110508 ROUTERERR_NOMOREQUEUES The maximum number of ports has been reached. 0x509 1289 0x98110509 ROUTERERR_INVALIDPORT The port is invalid. 0x50A 1290 0x9811050A ROUTERERR_NOTACTIVATED The router is not active. 0x50B 1291 0x9811050B ROUTERERR_FRAGMENTBOXFULL The mailbox has reached the maximum number for fragmented messages. 0x50C 1292 0x9811050C ROUTERERR_FRAGMENTTIMEOUT A fragment timeout has occurred. 0x50D 1293 0x9811050D ROUTERERR_TOBEREMOVED The port is removed. General ADS error codes Hex Dec HRESULT Name Description 0x700 1792 0x98110700 ADSERR_DEVICE_ERROR General device error. 0x701 1793 0x98110701 ADSERR_DEVICE_SRVNOTSUPP Service is not supported by the server. 0x702 1794 0x98110702 ADSERR_DEVICE_INVALIDGRP Invalid index group. 0x703 1795 0x98110703 ADSERR_DEVICE_INVALIDOFFSET Invalid index offset. 0x704 1796 0x98110704 ADSERR_DEVICE_INVALIDACCESS Reading or writing not permitted. 0x705 1797 0x98110705 ADSERR_DEVICE_INVALIDSIZE Parameter size not correct. 0x706 1798 0x98110706 ADSERR_DEVICE_INVALIDDATA Invalid data values. 0x707 1799 0x98110707 ADSERR_DEVICE_NOTREADY Device is not ready to operate. 0x708 1800 0x98110708 ADSERR_DEVICE_BUSY Device is busy. 0x709 1801 0x98110709 ADSERR_DEVICE_INVALIDCONTEXT Invalid operating system context. This can result from use of ADS blocks in different tasks. It may be possible to resolve this through multitasking synchronization in the PLC. 0x70A 1802 0x9811070A ADSERR_DEVICE_NOMEMORY Insufficient memory. 0x70B 1803 0x9811070B ADSERR_DEVICE_INVALIDPARM Invalid parameter values. 0x70C 1804 0x9811070C ADSERR_DEVICE_NOTFOUND Not found (files, ...). 0x70D 1805 0x9811070D ADSERR_DEVICE_SYNTAX Syntax error in file or command. 0x70E 1806 0x9811070E ADSERR_DEVICE_INCOMPATIBLE Objects do not match. 0x70F 1807 0x9811070F ADSERR_DEVICE_EXISTS Object already exists. 0x710 1808 0x98110710 ADSERR_DEVICE_SYMBOLNOTFOUND Symbol not found. 0x711 1809 0x98110711 ADSERR_DEVICE_SYMBOLVERSIONINVALID Invalid symbol version. This can occur due to an online change. Create a new handle. 0x712 1810 0x98110712 ADSERR_DEVICE_INVALIDSTATE Device (server) is in invalid state. 0x713 1811 0x98110713 ADSERR_DEVICE_TRANSMODENOTSUPP Ads Trans Mode not supported. 0x714 1812 0x98110714 ADSERR_DEVICE_NOTIFYHNDINVALID Notification handle is invalid. 0x715 1813 0x98110715 ADSERR_DEVICE_CLIENTUNKNOWN Notification client not registered. 0x716 1814 0x98110716 ADSERR_DEVICE_NOMOREHDLS No further handle available. 0x717 1815 0x98110717 ADSERR_DEVICE_INVALIDWATCHSIZE Notification size too large. 0x718 1816 0x98110718 ADSERR_DEVICE_NOTINIT Device not initialized. 0x719 1817 0x98110719 ADSERR_DEVICE_TIMEOUT Device has a timeout. 0x71A 1818 0x9811071A ADSERR_DEVICE_NOINTERFACE Interface query failed. 0x71B 1819 0x9811071B ADSERR_DEVICE_INVALIDINTERFACE Wrong interface requested. 0x71C 1820 0x9811071C ADSERR_DEVICE_INVALIDCLSID Class ID is invalid. 0x71D 1821 0x9811071D ADSERR_DEVICE_INVALIDOBJID Object ID is invalid. 0x71E 1822 0x9811071E ADSERR_DEVICE_PENDING Request pending. 0x71F 1823 0x9811071F ADSERR_DEVICE_ABORTED Request is aborted. 0x720 1824 0x98110720 ADSERR_DEVICE_WARNING Signal warning. 0x721 1825 0x98110721 ADSERR_DEVICE_INVALIDARRAYIDX Invalid array index. 0x722 1826 0x98110722 ADSERR_DEVICE_SYMBOLNOTACTIVE Symbol not active. 0x723 1827 0x98110723 ADSERR_DEVICE_ACCESSDENIED Access denied. 0x724 1828 0x98110724 ADSERR_DEVICE_LICENSENOTFOUND Missing license. 0x725 1829 0x98110725 ADSERR_DEVICE_LICENSEEXPIRED License expired. 0x726 1830 0x98110726 ADSERR_DEVICE_LICENSEEXCEEDED License exceeded. 0x727 1831 0x98110727 ADSERR_DEVICE_LICENSEINVALID Invalid license. 0x728 1832 0x98110728 ADSERR_DEVICE_LICENSESYSTEMID License problem: System ID is invalid. 0x729 1833 0x98110729 ADSERR_DEVICE_LICENSENOTIMELIMIT License not limited in time. 0x72A 1834 0x9811072A ADSERR_DEVICE_LICENSEFUTUREISSUE Licensing problem: time in the future. 0x72B 1835 0x9811072B ADSERR_DEVICE_LICENSETIMETOLONG License period too long. 78 Version: 1.1.1 TE1000
## Page 79

Appendix Hex Dec HRESULT Name Description 0x72C 1836 0x9811072C ADSERR_DEVICE_EXCEPTION Exception at system startup. 0x72D 1837 0x9811072D ADSERR_DEVICE_LICENSEDUPLICATED License file read twice. 0x72E 1838 0x9811072E ADSERR_DEVICE_SIGNATUREINVALID Invalid signature. 0x72F 1839 0x9811072F ADSERR_DEVICE_CERTIFICATEINVALID Invalid certificate. 0x730 1840 0x98110730 ADSERR_DEVICE_LICENSEOEMNOTFOUND Public key not known from OEM. 0x731 1841 0x98110731 ADSERR_DEVICE_LICENSERESTRICTED License not valid for this system ID. 0x732 1842 0x98110732 ADSERR_DEVICE_LICENSEDEMODENIED Demo license prohibited. 0x733 1843 0x98110733 ADSERR_DEVICE_INVALIDFNCID Invalid function ID. 0x734 1844 0x98110734 ADSERR_DEVICE_OUTOFRANGE Outside the valid range. 0x735 1845 0x98110735 ADSERR_DEVICE_INVALIDALIGNMENT Invalid alignment. 0x736 1846 0x98110736 ADSERR_DEVICE_LICENSEPLATFORM Invalid platform level. 0x737 1847 0x98110737 ADSERR_DEVICE_FORWARD_PL Context – forward to passive level. 0x738 1848 0x98110738 ADSERR_DEVICE_FORWARD_DL Context – forward to dispatch level. 0x739 1849 0x98110739 ADSERR_DEVICE_FORWARD_RT Context – forward to real time. 0x740 1856 0x98110740 ADSERR_CLIENT_ERROR Client error. 0x741 1857 0x98110741 ADSERR_CLIENT_INVALIDPARM Service contains an invalid parameter. 0x742 1858 0x98110742 ADSERR_CLIENT_LISTEMPTY Polling list is empty. 0x743 1859 0x98110743 ADSERR_CLIENT_VARUSED Var connection already in use. 0x744 1860 0x98110744 ADSERR_CLIENT_DUPLINVOKEID The called ID is already in use. 0x745 1861 0x98110745 ADSERR_CLIENT_SYNCTIMEOUT Timeout has occurred – the remote terminal is not responding in the specified ADS timeout. The route setting of the remote terminal may be configured incorrectly. 0x746 1862 0x98110746 ADSERR_CLIENT_W32ERROR Error in Win32 subsystem. 0x747 1863 0x98110747 ADSERR_CLIENT_TIMEOUTINVALID Invalid client timeout value. 0x748 1864 0x98110748 ADSERR_CLIENT_PORTNOTOPEN Port not open. 0x749 1865 0x98110749 ADSERR_CLIENT_NOAMSADDR No AMS address. 0x750 1872 0x98110750 ADSERR_CLIENT_SYNCINTERNAL Internal error in Ads sync. 0x751 1873 0x98110751 ADSERR_CLIENT_ADDHASH Hash table overflow. 0x752 1874 0x98110752 ADSERR_CLIENT_REMOVEHASH Key not found in the table. 0x753 1875 0x98110753 ADSERR_CLIENT_NOMORESYM No symbols in the cache. 0x754 1876 0x98110754 ADSERR_CLIENT_SYNCRESINVALID Invalid response received. 0x755 1877 0x98110755 ADSERR_CLIENT_SYNCPORTLOCKED Sync Port is locked. 0x756 1878 0x98110756 ADSERR_CLIENT_REQUESTCANCELLED The request was cancelled. RTime error codes Hex Dec HRESULT Name Description 0x1000 4096 0x98111000 RTERR_INTERNAL Internal error in the real-time system. 0x1001 4097 0x98111001 RTERR_BADTIMERPERIODS Timer value is not valid. 0x1002 4098 0x98111002 RTERR_INVALIDTASKPTR Task pointer has the invalid value 0 (zero). 0x1003 4099 0x98111003 RTERR_INVALIDSTACKPTR Stack pointer has the invalid value 0 (zero). 0x1004 4100 0x98111004 RTERR_PRIOEXISTS The request task priority is already assigned. 0x1005 4101 0x98111005 RTERR_NOMORETCB No free TCB (Task Control Block) available. The maximum number of TCBs is 64. 0x1006 4102 0x98111006 RTERR_NOMORESEMAS No free semaphores available. The maximum number of semaphores is 64. 0x1007 4103 0x98111007 RTERR_NOMOREQUEUES No free space available in the queue. The maximum number of positions in the queue is 64. 0x100D 4109 0x9811100D RTERR_EXTIRQALREADYDEF An external synchronization interrupt is already applied. 0x100E 4110 0x9811100E RTERR_EXTIRQNOTDEF No external sync interrupt applied. 0x100F 4111 0x9811100F RTERR_EXTIRQINSTALLFAILED Application of the external synchronization interrupt has failed. 0x1010 4112 0x98111010 RTERR_IRQLNOTLESSOREQUAL Call of a service function in the wrong context 0x1017 4119 0x98111017 RTERR_VMXNOTSUPPORTED Intel VT-x extension is not supported. 0x1018 4120 0x98111018 RTERR_VMXDISABLED Intel VT-x extension is not enabled in the BIOS. 0x1019 4121 0x98111019 RTERR_VMXCONTROLSMISSING Missing function in Intel VT-x extension. 0x101A 4122 0x9811101A RTERR_VMXENABLEFAILS Activation of Intel VT-x fails. Specific positive HRESULT Return Codes: TE1000 Version: 1.1.1 79
## Page 80

Appendix HRESULT Name Description 0x0000_0000 S_OK No error. 0x0000_0001 S_FALSE No error. Example: successful processing, but with a negative or incomplete result. 0x0000_0203 S_PENDING No error. Example: successful processing, but no result is available yet. 0x0000_0256 S_WATCHDOG_TIMEOUT No error. Example: successful processing, but a timeout occurred. TCP Winsock error codes Hex Dec Name Description 0x274C 10060 WSAETIMEDOUT A connection timeout has occurred - error while establishing the connection, because the remote terminal did not respond properly after a certain period of time, or the established connection could not be maintained because the connected host did not respond. 0x274D 10061 WSAECONNREFUSED Connection refused - no connection could be established because the target computer has explicitly rejected it. This error usually results from an attempt to connect to a service that is inactive on the external host, that is, a service for which no server application is running. 0x2751 10065 WSAEHOSTUNREACH No route to host - a socket operation referred to an unavailable host. More Winsock error codes: Win32 error codes 8.3 Troubleshooting Tc3_Io Link is being used within another library (Custom_Lib). During integration, the compiler does not find symbols from Custom_Lib. By default, the symbols of an integrated lib are not published further. This can be changed later. To do this, open the Properties window and select Publish all IEC symbols: For more information, refer to the PLC documentation in Command properties. 80 Version: 1.1.1 TE1000
## Page 81

Support and Service 9 Support and Service Beckhoff and their partners around the world offer comprehensive support and service, making available fast and competent assistance with all questions related to Beckhoff products and system solutions. Download finder Our download finder contains all the files that we offer you for downloading. You will find application reports, technical documentation, technical drawings, configuration files and much more. The downloads are available in various formats. Beckhoff's branch offices and representatives Please contact your Beckhoff branch office or representative for local support and service on Beckhoff products! The addresses of Beckhoff's branch offices and representatives round the world can be found on our internet page: www.beckhoff.com You will also find further documentation for Beckhoff components there. Beckhoff Support Support offers you comprehensive technical assistance, helping you not only with the application of individual Beckhoff products, but also with other, wide-ranging services: • support • design, programming and commissioning of complex automation systems • and extensive training program for Beckhoff system components Hotline: +49 5246 963-157 e-mail: support@beckhoff.com Beckhoff Service The Beckhoff Service Center supports you in all matters of after-sales service: • on-site service • repair service • spare parts service • hotline service Hotline: +49 5246 963-460 e-mail: service@beckhoff.com Beckhoff Headquarters Beckhoff Automation Gmb H & Co. KG Huelshorstweg 20 33415 Verl Germany Phone: +49 5246 963-0 e-mail: info@beckhoff.com web: www.beckhoff.com TE1000 Version: 1.1.1 81
## Page 82

Trademark statements Beckhoff®, ATRO®, Ether CAT®, Ether CAT G®, Ether CAT G10®, Ether CAT P®, MX-System®, Safety over Ether CAT®, TC/BSD®, Twin CAT®, Twin CAT/BSD®, Twin SAFE®, XFC®, XPlanar® and XTS® are registered and licensed trademarks of Beckhoff Automation Gmb H. Third-party trademark statements Intel, the Intel logo, Intel Core, Xeon, Intel Atom, Celeron and Pentium are trademarks of Intel Corporation or its subsidiaries.
## Page 83

More Information: www.beckhoff.com/te1000 Beckhoff Automation Gmb H & Co. KG Hülshorstweg 20 33415 Verl Germany Phone: +49 5246 9630 info@beckhoff.com www.beckhoff.com
