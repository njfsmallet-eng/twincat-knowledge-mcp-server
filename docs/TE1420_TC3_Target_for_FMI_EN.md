---
title: "TE1420 Twin CAT 3"
product: "TE1420"
category: "Engineering_Tools"
tags: ["CAT", "TWIN"]
language: "EN"
document_type: "Manual"
version: "1"
source_pdf: "https://download.beckhoff.com/download/Document/automation/twincat3/TE1420_TC3_Target_for_FMI_EN.pdf"
release_date: "2022-07-27"
---
Manual | EN TE1420 Twin CAT 3 | Target for FMI 2022-07-27 | Version: 1

## Page 3

Table of contents Table of contents 1 Foreword.................................................................................................................................................... 5 1.1 Notes on the documentation............................................................................................................. 5 1.2 Safety instructions............................................................................................................................. 6 1.3 Notes on information security............................................................................................................ 7 2 Overview.................................................................................................................................................... 8 3 Installation................................................................................................................................................. 9 4 Licenses................................................................................................................................................... 10 5 Setting up driver signing........................................................................................................................ 11 6 Quick start............................................................................................................................................... 14 7 Parameterization of the module generation......................................................................................... 19 7.1 Creation of versioned drivers.......................................................................................................... 19 7.2 Creating TMX archives.................................................................................................................... 19 7.3 Bundling of several models in one Twin CAT driver........................................................................ 20 8 Execution of modules in Twin CAT........................................................................................................ 22 8.1 Execution as Tc COM modules........................................................................................................ 22 8.2 Execution within the PLC................................................................................................................ 22 8.3 Exception Handling......................................................................................................................... 22 9 Reference user interface........................................................................................................................ 25 9.1 'General' tab.................................................................................................................................... 26 9.2 'Build' tab......................................................................................................................................... 26 9.3 'PLC Library' tab.............................................................................................................................. 27 9.4 'New Fmu Module1' tab..................................................................................................................... 28 9.4.1 'General' tab..................................................................................................................... 29 9.4.2 'Tc Com' tab...................................................................................................................... 30 9.4.3 'PLC FB' tab..................................................................................................................... 33 10 Support and Service............................................................................................................................... 35 TE1420 Version: 1 3

## Page 4

Table of contents 4 Version: 1 TE1420

## Page 5

Foreword 1 Foreword 1.1 Notes on the documentation This description is only intended for the use of trained specialists in control and automation engineering who are familiar with applicable national standards. It is essential that the documentation and the following notes and explanations are followed when installing and commissioning the components. It is the duty of the technical personnel to use the documentation published at the respective time of each installation and commissioning. The responsible staff must ensure that the application or use of the products described satisfy all the requirements for safety, including all the relevant laws, regulations, guidelines and standards. Disclaimer The documentation has been prepared with care. The products described are, however, constantly under development. We reserve the right to revise and change the documentation at any time and without prior announcement. No claims for the modification of products that have already been supplied may be made on the basis of the data, diagrams and descriptions in this documentation. Trademarks Beckhoff®, Twin CAT®, Twin CAT/BSD®, TC/BSD®, Ether CAT®, Ether CAT G®, Ether CAT G10®, Ether CAT P®, Safety over Ether CAT®, Twin SAFE®, XFC®, XTS® and XPlanar® are registered trademarks of and licensed by Beckhoff Automation Gmb H. Other designations used in this publication may be trademarks whose use by third parties for their own purposes could violate the rights of the owners. Patent Pending The Ether CAT Technology is covered, including but not limited to the following patent applications and patents: EP1590927, EP1789857, EP1456722, EP2137893, DE102015105702 with corresponding applications or registrations in various other countries. Ether CAT® is a registered trademark and patented technology, licensed by Beckhoff Automation Gmb H, Germany Copyright © Beckhoff Automation Gmb H & Co. KG, Germany. The reproduction, distribution and utilization of this document as well as the communication of its contents to others without express authorization are prohibited. Offenders will be held liable for the payment of damages. All rights reserved in the event of the grant of a patent, utility model or design. TE1420 Version: 1 5

## Page 6

Foreword 1.2 Safety instructions Safety regulations Please note the following safety instructions and explanations! Product-specific safety instructions can be found on following pages or in the areas mounting, wiring, commissioning etc. Exclusion of liability All the components are supplied in particular hardware and software configurations appropriate for the application. Modifications to hardware or software configurations other than those described in the documentation are not permitted, and nullify the liability of Beckhoff Automation Gmb H & Co. KG. Personnel qualification This description is only intended for trained specialists in control, automation and drive engineering who are familiar with the applicable national standards. Description of symbols In this documentation the following symbols are used with an accompanying safety instruction or note. The safety instructions must be read carefully and followed without fail! DANGER Serious risk of injury! Failure to follow the safety instructions associated with this symbol directly endangers the life and health of persons. WARNING Risk of injury! Failure to follow the safety instructions associated with this symbol endangers the life and health of per- sons. CAUTION Personal injuries! Failure to follow the safety instructions associated with this symbol can lead to injuries to persons. NOTE Damage to the environment or devices Failure to follow the instructions associated with this symbol can lead to damage to the environment or equipment. Tip or pointer This symbol indicates information that contributes to better understanding. 6 Version: 1 TE1420

## Page 7

Foreword 1.3 Notes on information security The products of Beckhoff Automation Gmb H & Co. KG (Beckhoff), insofar as they can be accessed online, are equipped with security functions that support the secure operation of plants, systems, machines and networks. Despite the security functions, the creation, implementation and constant updating of a holistic security concept for the operation are necessary to protect the respective plant, system, machine and networks against cyber threats. The products sold by Beckhoff are only part of the overall security concept. The customer is responsible for preventing unauthorized access by third parties to its equipment, systems, machines and networks. The latter should be connected to the corporate network or the Internet only if appropriate protective measures have been set up. In addition, the recommendations from Beckhoff regarding appropriate protective measures should be observed. Further information regarding information security and industrial security can be found in our https://www.beckhoff.com/secguide. Beckhoff products and solutions undergo continuous further development. This also applies to security functions. In light of this continuous further development, Beckhoff expressly recommends that the products are kept up to date at all times and that updates are installed for the products once they have been made available. Using outdated or unsupported product versions can increase the risk of cyber threats. To stay informed about information security for Beckhoff products, subscribe to the RSS feed at https:// www.beckhoff.com/secinfo. TE1420 Version: 1 7

## Page 8

Overview 2 Overview The Functional Mock-up Interface (FMI) is a free standard for exchanging or coupling simulation models created with different simulation tools. This is often the case when the models are provided by different suppliers or domain-specific simulation tools are used to simulate the different aspects of a machine or plant (e.g. thermal simulation, control engineering simulation). A simulation tool that supports FMI allows a model to be exported or imported as a Functional Mock-up Unit (FMU). This can be done as a model exchange or co-simulation. In the case of the former, the pure simulation model is exported. In the latter case, the associated solvers are also exported, so that the calculations of the model in the "target simulation tool" happen analogously to the initial tool. When exporting an FMU, some simulation tools offer the choice of encapsulating the behavior of the model in a DLL or / and exporting the behavior of the model as source code. The latter option is mandatory for an FMU to be imported into Twin CAT. Thus, only FMUs whose behavior is available in the FMU as source code can be imported. 8 Version: 1 TE1420

## Page 9

Installation 3 Installation System requirements The same requirements apply for the Target for FMI as for Twin CAT 3 C/C++. The detailed description of the Twin CAT 3 C/C++ requirements can be found in the manual Twin CAT 3 C++ Chapter 4 Requirements. In the following sections, these requirements are only referred to briefly, not in detail. On the engineering PC • Microsoft Visual Studio 2017 or 2019 Professional, Premium, Ultimate or Community Edition ◦ For Visual Studio 2017 or 2019 check the Visual C++ checkbox during installation. • Twin CAT 3 XAE On the runtime PC • IPC or Embedded CX PC with Microsoft operating system based on Windows NT kernel (Win 10 and corresponding embedded versions) • Twin CAT 3 XAR ◦ Twin CAT 3.1 supports 32-bit and 64-bit operating systems. If the target is a x64 system, the created drivers must be signed. See "x64: driver signing" in the TC3 C++ manual Setup instructions If neither one of the supported Visual Studio versions nor a Twin CAT 3 setup is available, proceed as follows during the installation: 1. Install one of the supported Visual Studio versions. 2. Start Twin CAT 3 Setup. 3. Then start the TE1420-Target For FMI setup to install the TE1420. 4. Follow the instructions in the setup wizard. ð The setup is installed. If a Visual Studio and a Twin CAT installation already exists but the Visual Studio version does not meet the requirements mentioned above (e.g. Visual Studio Shell or Visual Studio without Visual C++), proceed as follows: 1. Install a suitable Visual Studio version. 2. Execute the Twin CAT 3 setup. ð Twin CAT 3 is integrated into the new or modified Visual Studio version. Driver signing for targets with x64 operating system To use an x64-operating system as runtime PC, the drivers must be signed. Details can be found in the TC3 C++ manual under Driver signing. TE1420 Version: 1 9

## Page 10

Licenses 4 Licenses Two licenses are required to use the full functionality of the TE1420 Twin CAT Target for FMI. On the one hand, the TE1420 engineering license for creating Twin CAT objects from an FMU and, on the other hand, a runtime license for executing these objects during the Twin CAT runtime. Engineering license The license TE1420 Target for FMI is required for the engineering system to create Tc COM and PLC function blocks from FMUs. Licensing is therefore carried out exclusively on the Engineering system. There is no 7-day trial license available for this product. Runtime license The TF1420 license is required to start a Twin CAT configuration with a Twin CAT object generated from an FMU. Without activated license, the module and consequently the Twin CAT system cannot be started. The TF1420 license is an extension of the C++ runtime licenses and therefore requires a TC1300 or a TC1210 with included PLC license as basic requirement. 10 Version: 1 TE1420

## Page 11

Setting up driver signing 5 Setting up driver signing Create an OEM certificate level 2 The Twin CAT objects generated using the Target for FMI are based on a tmx driver (Twin CAT Module Executable), just like Twin CAT C++ objects. The drivers must be signed with an OEM certificate level 2, so that they can be loaded on the runtime PC during the Twin CAT runtime. See the following links for detailed documentation on how to create an OEM certificate for driver signing: • General documentation on OEM certificates • Application-related documentation for tmx driver signing The most important facts in brief: • You can create your own certificate. To do this, go to Visual Studio at: Menu bar > Twin CAT > Software Protection... • You need an OEM certificate Crypto Version 2 (option: Sign Twin CAT C++ executables (*.tmx)). • All drivers (for 32-bit and for 64-bit operating systems) must be signed. • Drivers can also be created without signing and signed afterwards. • For testing purposes in the development phase, a non-countersigned certificate is sufficient. • Countersigned certificates can be ordered free of charge from Beckhoff (TC0008). Use of an OEM certificate level 2 for driver signing There are three possible variants for signing tmx drivers. 1. You can set a default certificate on an engineering PC that is always used for Twin CAT C++ and Tar- get for FMI unless you explicitly specify a different certificate. 2. You can explicitly name a certificate for each build operation. 3. You can build without a certificate and sign afterwards with the Tc Sign Tool. For Variant 1 use a Windows environment variable. Create a new environment variable at User > Variables with: Variable: Tc Sign Twin Cat Cert Name Value: Name of the desired certificate (Available certificates are located at Twin CAT\3.1\Custom Config\Certificates). For variant 2 you do not have to make any further settings in advance. Before each build process, you can define a certificate of your choice for precisely this build process. Twin CAT FMI > Build > Certificate name for Twin CAT signing TE1420 Version: 1 11

## Page 12

Setting up driver signing For variant 3 you can use the Tc Sign Tool. The Tc Sign Tool is a command line program located in the path C:\Twin CAT\3.x\sdk\Bin\. With tcsigntool /? or tcsigntool sign /? you get help how to use the tool concretely. Tc Sign Tool sign /f "C:\Twin CAT\3.1\Custom Config\Certificates\ My Certificate.tccert" /p My Password "C:\Twin CAT\3.1\Repository\TE140x Module Vendor\Modul Name\0.0.0.1\Twin CAT RT (x64)\My Driver.tmx" For variants 1 to 3, the associated password must be stored in the system in addition to specifying the certificate with the Tc Sign Tool. The password should not be entered in the source code for security reasons. With the Tc Sign Tool you can store passwords belonging to your certificates encrypted in the registry of the Windows operating system. The storage of the password is carried out with the following parameters: tcsigntool grant /f "C:\Twin CAT\3.1\Custom Config\Certificates\My Certificate.tccert" /p My Password The password is deleted with the following parameters: tcsigntool grant /f "C:\Twin CAT\3.1\Custom Config\Certificates\My Certificate.tccert" /r The unencrypted password is stored under: HKEY_CURRENT_USER\SOFTWARE\Beckhoff\Tc Sign Tool\ Behavior of the Twin CAT runtime If a Twin CAT object with signed driver created by means of the Target for FMI is used in a Twin CAT solution and loaded to a target system with Activate Configuration, please note the following: Each Twin CAT runtime (XAR) has its own white list of trusted certificates. If the certificate used for signing is not included in this white list, the driver will not be loaded. A corresponding error message is output in Twin CAT Engineering (XAE). 12 Version: 1 TE1420

## Page 13

Setting up driver signing The error message contains the instruction to execute a registry file, which was automatically created on the target system, on the target system as administrator. This process adds the used certificate to the white list. Registry file is only dependent on the OEM certificate The registry file can also be used on other target systems. It only contains information about the OEM certificate used and is not target system dependent. If you use a non-countersigned OEM certificate for signing, you must also put your target system into test mode. To do this, run the following command as an administrator on the target system: bcdedit /set testsigning yes If you are using a countersigned OEM certificate, this step is not necessary. TE1420 Version: 1 13

## Page 14

Quick start 6 Quick start Creating a Tc Com module from an FMU 1. Open the full version of a Visual Studio with integrated Twin CAT. 2. Select the option Twin CAT FMI in the menu Extensions -> Twin CAT. ð The FMI Interface Tool window opens. 3. If one or more FMUs are already included in the FMI project, restore the default state shown in the picture by pressing the button Restore default settings. 4. Use the button ... to navigate to the FMU which should be converted to a Tc Com module. 5. In the drop-down menu Generation Tool select the tool from which the FMU was exported. 6. In the Solver drop-down menu, select the solver to be used for the FMU simulation model calculations. If the model was exported as a co-simulation, then the solver is already part of the FMU. In this case, use the selection COSIMULATION here. 7. Use the button Start to start the generation of the Tc Com model. 14 Version: 1 TE1420

## Page 15

Quick start ð If the generation is successful, the output window of the TE1420 displays the message "Publish procedure completed successfully..." Background to the selection of a Generation Tool Since exporting the source code of a simulation model is done differently by the different tools, you also set some settings differently depending on the tool in the Visual Studio C++ project that is automatically created and used during the conversion. For the already supported tools, the configuration of these settings is done automatically with the selection of the Generation Tool. Further tools can also be connected by yourself. This is described in more detail in the chapter . Integrating the Tc Com module in a Twin CAT project 1. Open Twin CAT (Twin CAT XAE or Twin CAT in a Visual Studio environment). 2. Instantiate a new Tc COM object. TE1420 Version: 1 15

## Page 16

Quick start 3. Select the desired object. 4. Create a cyclic task. 16 Version: 1 TE1420

## Page 17

Quick start 5. Assign the created task to your Tc COM instance. TE1420 Version: 1 17

## Page 18

Quick start 6. Link the inputs and outputs of the module as required. 7. Select the target system and activate the configuration. ð The Tc Com module has now been integrated into your Twin CAT project. 18 Version: 1 TE1420

## Page 19

Parameterization of the module generation 7 Parameterization of the module generation A number of settings are available for importing FMUs, which influence the generation of a Twin CAT runtime object (Tc Com modules / PLC function block). These will be explained in this chapter. 7.1 Creation of versioned drivers Each runtime object imported from an FMU into Twin CAT 3 automatically contains version information. This makes it possible to transfer several versions of the same model into Twin CAT runtime objects. These can then be instantiated version-selectively in Twin CAT. Setting the version control Under the tab General you can set for the entries Version source file and Version part for increment how the version control of the runtime modules should be done. The basic version on which a version update is to be created is specified via Version source file. In the standard case $<Latest TMFile> is specified there. This searches for the last available version of the model on the local engineering PC and then uses this as the basis for the version increment. The version number consists of four digits, e.g. 1.0.3.2 or 2.12.123.14. Each digit can be incremented separately according to the scheme: <Major>.<Minor>.<Build>.<Revision>. If None is selected, no version update takes place and the last version on the engineering PC is overwritten. Via Drv File Version you can specify a fixed version. To do this, enter the target version in the input field. 7.2 Creating TMX archives In order to use the created Twin CAT objects in a project, they must be available on the engineering system in the corresponding repositories/folders. The corresponding copying to these folders can be done manually, but this is error-prone. The solution to this is the creation of a TMX archive. This is a self-extracting exe archive that copies the files into the appropriate directories so that they can be found by the Twin CAT Engineering environment. Procedure: 1. Open the tab Build. TE1420 Version: 1 19

## Page 20

Parameterization of the module generation 2. In the TMX Archive field, enter the path and name of the TMX archive to be created with the next build. ð In the specified directory you will find a self-extracting archive containing the tmx files. You can also use wildcards when specifying the path and name: e.g.: C:\temp\[Date]-[Time]-[Lib Name][Lib Version].exe This creates, for example, a TMX archive 2022-06-27-150403-Sample0.0.0.7.exe, which can then be copied to any location on an engineering system and executed. 7.3 Bundling of several models in one Twin CAT driver With the help of the TE1420 it is possible to bundle several models in one TMX driver respectively in one PLC library. This function can be used, for example, to make a collection of models (e.g. automation technology components) available in a library. Proceed as follows: ü You have already created an FMI project with a configured FMU. See step 2 in the chapter Quick start [} 14]. 1. Right-click on a free area in FMI Project Construction. 2. Select the option Add FMU. 20 Version: 1 TE1420

## Page 21

Parameterization of the module generation 3. Configure these FMUs as needed and repeat these steps until all FMUs you need are included and configured in the FMI project. 4. Press the button Start. ð The desired FMUs are bundled. When exporting FMUs, some export tools use static variables internally. For this reason, multiple FMUs from the same tool cannot be packed into one driver or library for such tools. For an overview of tools that do not support bundling, see the chapter FAQ. TE1420 Version: 1 21

## Page 22

Execution of modules in Twin CAT 8 Execution of modules in Twin CAT The following chapter describes the ways in which modules can be executed in Twin CAT. 8.1 Execution as Tc COM modules The execution of a Tc Com module created using Target for FMI is done as described in chapter Quickstart [} 14]. 8.2 Execution within the PLC With the help of the Target for FMI it is not only possible to create a Tc COM module that can be instantiated directly in the Twin CAT project. Furthermore, a PLC library can be created which allows to call the behavior of a model imported via the Target for FMI also within the PLC. Calling the imported model in the PLC works as follows: 1. Create a PLC project 2. Add the generated library to the PLC project. See also Creating and installing a PLC library. 8.3 Exception Handling Floating point exceptions can occur during runtime when processing a Tc Com module in Twin CAT that was generated with the aid of the TE1420. This can happen, for example, when an unexpected value (e.g. initial value) is passed to a function. The handling of such exceptions is described below. What is a floating point exception? A floating point exception occurs when an arithmetically not exactly executable operation is instructed in the floating point unit of the CPU. IEEE 754 defines these cases: inexact, underflow, overflow, divide-by-zero, invalid-operation. If one of these cases occurs, a status flag is set, which indicates that the arithmetic operation cannot be executed exactly. It is further defined that each arithmetic operation must return a result – one that in the majority of cases leads to the possibility of ignoring the exception. For example, a division by zero results in +inf or -inf. If a value is divided by inf in the further code, this results in zero, so that no consequential problems are to be expected. However, if inf is multiplied or other arithmetic operations are performed with inf, these are invalid operations, whose result is represented as a Not-a-Number (Na N). How does the Twin CAT Runtime react in case of exceptions? Twin CAT C++ Debugger not active The following explanations only apply if the C++ debugger is not activated on the Twin CAT runtime system. When the C++ debugger is enabled, exceptions are caught by the debugger and can be handled, see Debugging. Standard behavior Default setting in Twin CAT is that at divide-by-zero and invalid-operation the execution of the program is stopped and Twin CAT issues an error message. Task setting: Floating Point Exceptions This default setting can be changed on the level of each Twin CAT task. If the checkbox "Floating Point Exception" is unchecked, an exception does not lead to a Twin CAT stop and no error message is issued. This setting is then valid for all objects that are called by this task. As a consequence, care must be taken in the application that Na N and inf values are handled accordingly in the program code. 22 Version: 1 TE1420

## Page 23

Execution of modules in Twin CAT Checking for Na N and Inf If, for example, a Na N is passed on via mapping to a Twin CAT object that has activated floating point exceptions, an arithmetic operation with Na N naturally leads to an exception in this object and subsequently to a Twin CAT stop. Therefore, Na N or inf must be checked directly after mapping. In the PLC, corresponding functions are available in the Tc2_Utilities library, e.g. Lreal Is Na N. Try-Catch statement Another way to handle exceptions is to embed them in a try-catch statement. In the PLC the instructions __TRY, __CATCH, __FINALLY, __ENDTRY are available for this purpose. If floating point exceptions are enabled on the calling task and an exception occurs within the Try-Catch, it is caught in the Catch branch and can be handled. Accordingly, no variables are set to inf or Na N in this approach. However, it is also important to note that the code in the Try branch is run through only up to the point of the exception and then a jump is made to the Catch branch. In the application code, it should be noted that internal states in the Try branch may not be consistent. Dump files As of Twin CAT 3.1.4024.22 (XAR), dump files can be created at runtime in case of exceptions in the Tc COM object. Definition of the object behavior in case of occurring exceptions You can define the behavior of a Tc COM object when exceptions occur under the Tc COM>General tab in the Code Generation Settings in Simulink®. You must define the behavior separately for the initialization phase of the Tc COM and for the runtime phase (update phase). A total of 9 different settings are available. • Caller Exceptions (default): Exceptions are thrown as configured at the calling task. • Throw Exceptions: Exceptions in the Twin CAT object are thrown in any case, regardless of how the task is configured. ◦ An exception causes a Twin CAT error message and a Twin CAT stop. • Suppress Exceptions: Exceptions are not thrown, regardless of how the task is configured. ◦ An exception does not cause a Twin CAT stop. ◦ Outputs or internal states can be Na N or inf. • Log Exceptions: Exceptions are thrown, but do not lead to a Twin CAT stop. ◦ An exception does not cause a Twin CAT stop. ◦ Outputs or internal states can be Na N or inf. TE1420 Version: 1 23

## Page 24

Execution of modules in Twin CAT ◦ The Execution Info output is filled with information about an exception in the current cycle. If several exceptions occur in one cycle, only the first exception is displayed at the output. When the Twin CAT object is called again, the information is reset. • Log And Hold: Exceptions are thrown. The execution of the Twin CAT object is stopped. ◦ An exception does not cause a Twin CAT stop. ◦ Outputs or internal states can be Na N or inf. ◦ The Execution Info output is filled with information about an exception in the current cycle. If several exceptions occur in one cycle, only the first exception is displayed at the output. When the Twin CAT object is called again, the information is reset. ◦ The execution of the Twin CAT object is stopped after an exception occurs. Twin CAT itself remains in run mode. Restart execution: . • Log And Catch: Exceptions are caught with try-catch in the Twin CAT object. The execution of the Twin CAT object is stopped. ◦ An exception does not cause a Twin CAT stop. ◦ Outputs or internal states cannot contain Na N or inf. ◦ The Execution Info output is filled with information about an exception in the current cycle. ◦ The execution of the code ends at the point of the exception. From there, the program jumps to the catch branch, i.e. internal states can be inconsistent. ◦ The execution of the Twin CAT object is stopped after an exception occurs. Twin CAT itself remains in run mode. Restart execution: . • Log And Dump, Log Hold And Dump and Log Catch And Dump ◦ Behavior in case of Log Exceptions ◦ Additionally a dump file is stored on the runtime system in the Twin CAT folder Boot. You can see more about dump files here. 24 Version: 1 TE1420

## Page 25

Reference user interface 9 Reference user interface With the aid of the TE1420 Target for FMI, Twin CAT runtime objects (Tc Com modules or PLC function blocks) can be generated from FMUs. These are packaged in a Twin CAT driver (*.tmx) or in a PLC library. From a Twin CAT FMI project always exactly one TMX driver and/or PLC library is generated. The user interface is therefore divided into a general area, in which settings can be set that apply to all runtime objects in this Twin CAT driver/PLC library, and an object-specific part, which contains the settings for the respective runtime object. If you press the Start button, the conversion to Twin CAT runtime objects starts. At the same time, the current settings are saved to an XML file so that you can continue working on this project the next time you start the tool window. To reset the project press the Restore default settings button. Use the buttons Load settings or Save settings to load or save FMI projects. Load settings Loads an FMI project. Save settings Saves the settings of the current FMI project. Restore default settings Restores a default project. Start Starts the import or conversion of the FMUs into Twin CAT runtime objects. Context menu in the project tree Right-click on an FMU: Remove Removes the FMU from the Twin CAT FMI project. Restore defaults Sets the settings of the FMU node to the default values. After that, the FMU can be selected again. Right-click on a free area in the project tree: Restore defaults Restores the default values for all FMUs in the Twin CAT FMI project. Add new FMU Adds another FMU to the Twin CAT FMI project. Also see about this 2 'General' tab [} 26] TE1420 Version: 1 25

## Page 26

Reference user interface 2 'Build' tab [} 26] 2 'PLC Library' tab [} 27] 9.1 'General' tab General settings can be made in the General tab. By default, these are provided with placeholders and are assigned the default values. Changed settings are persisted in an xml file and are retained for new projects. These can be reset via the Restore default settings button. Lowest compatibel Twin CAT version Minimum version of the Twin CAT runtime, so that the generated Tc COM module starts. Vendor Name Vendor name, the name under which the generated Tc COM module is sorted in the module selection dialog. Version source file File in which the version information is kept. Version part for increment Part of the version number to be incremented each time a new one is created. Drv File Version File version of the generated Tc COM module Load Data Exchange Modules Loads the data exchange Tc Com modules into memory so that they can be accessed from the generated module. Maximum number of visible array elements Maximum number of visible array elements Project Folder Project folder under which the Tc COM module is to be generated. Project Name Name of the project 9.2 'Build' tab You can configure the build settings under the Build tab. 26 Version: 1 TE1420

## Page 27

Reference user interface Run the publish step after project generation Selection whether only the code should be generated or the tmx driver should also be built for the selected platforms. Platform Toolset Selection of the Visual Studio toolset used for building. Build configuration Selection of the build configuration (debug/release). Twin CAT RT(x86) Creating a tmx driver for the Twin CAT RT(x86) platform. Twin CAT RT(x64) Creating a tmx driver for the Twin CAT RT(x64) platform. Twin CAT OS(x64) Creating a tmx driver for the Twin CAT OS(x64) platform. Certificate name for Twin CAT signing Twin CAT certificate name to be used for signing the generated tmx driver. tmx Archive Name of a tmx archive that can be used for sharing the tmx files. 9.3 'PLC Library' tab You set whether the FMI project should also be created or installed as PLC library under the PLC Library tab. TE1420 Version: 1 27

## Page 28

Reference user interface Generate a PLC library Setting whether a PLC library should be created. Install the generated PLC library Setting whether the generated PLC library should also be installed. 9.4 'New Fmu Module1' tab In an FMI project, one or more FMUs can be combined in a tmx driver or in a PLC library. To add a new FMU to a project, right-click on a free area in the project tree. In the context menu that opens, you have the option to remove an FMU from the project, restore the default state or add a new FMU. In the default state or when an FMU has been added, the interface looks like the following figure: 28 Version: 1 TE1420

## Page 29

Reference user interface The settings made or the last exported FMI project is persisted, so that when exporting again, e.g. after changes in the model, these do not have to be made again. 9.4.1 'General' tab You make general settings for the respective FMU under the General tab. These are, for example, the selection of the tool that generated the FMU or the selection of the solver to be used for the calculation of the FMU. These settings are necessary because the exporting tools do not always export all the required information to an FMU or because of tool-specific peculiarities. TE1420 Version: 1 29

## Page 30

Reference user interface FMU Input: Selection of the FMU to be imported. Generation Tool: Selection of the tool that generated the FMU. Solver: Selection of the solver to be used. If an FMU is exported via Model Exchange, it contains only the corresponding differential equations describing the model. Not included in the FMU are then the solvers to solve these equations. Solvers from the internal Twin CAT solver library are available in the Solver selection field. The solvers can be selected for solving the equations. If an FMU was exported via co-simulation, it already contains the solver. Co-simulation must then be selected in the Solver selection field. 9.4.2 'Tc Com' tab Under the Tc Com tab you can make further settings that affect the Tc Com module to be generated. The basic settings are chosen in such a way that in most cases an executable Tc Com module is generated even without further settings in this area. 9.4.2.1 'General' tab Under the tab you can change the general settings of the Tc Com module to be generated. This affects not only the group name of the module, but also the online change capability and the handling of floating point exceptions. Online change support Enable/disable online change support. Goup Name Group name under which the generated Tc Com module is sorted in the selection dialog Insert Tc Com Object in the Twin CAT3 development environment. Floating point exception handling during initialization Handling of floating point exceptions during initialization of the Tc Com module. Floating point exception handling during update Handling of floating point exceptions during the call of the Tc Com module. Fmi Version Used version of the FMI standard. 30 Version: 1 TE1420

## Page 31

Reference user interface 9.4.2.2 'Wrapper' tab Under this tab you can set whether a wrapper function block should also be generated for a Tc Com module. This is generated in the formation Plc Open XML and can be imported manually into a PLC project. Unlike the settings in 'PLC Library' tab [} 27], which create a PLC library in which the individual models are represented as function blocks, the settings in the tab Tc Com->Wrapper create a function block that "wraps" the call of the Tc Com module. In this case, the actual Tc Com module "lives" outside the PLC and is only called or influenced by it. Tc Com Wrapper FB Creates a Wrapper FB. Tc Com Wrapper FB properties Creates a Wrapper FB where the variables are accessible as properties. 9.4.2.3 'Interface' tab Under this tab you can set whether a cycle time monitoring is installed in the module itself, which calculates the execution time in each cycle. TE1420 Version: 1 31

## Page 32

Reference user interface 9.4.2.4 'Additional settings' tab Under this tab, additional settings can be made which are not normally required. Use stop time Setting whether the execution of calculations stops after the duration set in the simulation system or not. Init state transition Setting at which state transition the initialization of the internal variables takes place. Switch internal value parameter online Setting whether internal parameters may be switched online. Create library for FMU source code 32 Version: 1 TE1420

## Page 33

Reference user interface 9.4.3 'PLC FB' tab Under the PLC FB tab further settings can be made, which affect the function blocks in the generated PLC library. See 'PLC Library' tab [} 27]. 9.4.3.1 'General' tab Under this tab you can make general settings for the generated PLC function blocks. Floating point exception handling during initialization Handling of floating point exceptions during initialization of the Tc Com module. Floating point exception handling during update Handling of floating point exceptions during the call of the Tc Com module. 9.4.3.2 'Additional settings' tab Under this tab, additional settings can be made that affect the generated PLC function blocks. TE1420 Version: 1 33

## Page 34

Reference user interface Monitor Execution Time Enable/disable monitoring of the execution time. 34 Version: 1 TE1420

## Page 35

Support and Service 10 Support and Service Beckhoff and their partners around the world offer comprehensive support and service, making available fast and competent assistance with all questions related to Beckhoff products and system solutions. Beckhoff's branch offices and representatives Please contact your Beckhoff branch office or representative for local support and service on Beckhoff products! The addresses of Beckhoff's branch offices and representatives round the world can be found on her internet pages: https://www.beckhoff.com You will also find further documentation for Beckhoff components there. Beckhoff Support Support offers you comprehensive technical assistance, helping you not only with the application of individual Beckhoff products, but also with other, wide-ranging services: • support • design, programming and commissioning of complex automation systems • and extensive training program for Beckhoff system components Hotline: +49 5246 963 157 Fax: +49 5246 963 9157 e-mail: support@beckhoff.com Beckhoff Service The Beckhoff Service Center supports you in all matters of after-sales service: • on-site service • repair service • spare parts service • hotline service Hotline: +49 5246 963 460 Fax: +49 5246 963 479 e-mail: service@beckhoff.com Beckhoff Headquarters Beckhoff Automation Gmb H & Co. KG Huelshorstweg 20 33415 Verl Germany Phone: +49 5246 963 0 Fax: +49 5246 963 198 e-mail: info@beckhoff.com web: https://www.beckhoff.com TE1420 Version: 1 35

## Page 37

More Information: www.beckhoff.com/te1420 Beckhoff Automation Gmb H & Co. KG Hülshorstweg 20 33415 Verl Germany Phone: +49 5246 9630 info@beckhoff.com www.beckhoff.com
