---
title: "TF5110-TF5113_TC3_Kinematic_Transformation_EN"
product: "TF5110"
category: "Motion_Control"
tags: ["KINEMATIC", "TRANSFORMATION"]
language: "EN"
document_type: "Manual"
version: "2.3.4"
source_pdf: "https://download.beckhoff.com/download/Document/automation/twincat3/TF5110-TF5113_TC3_Kinematic_Transformation_EN.pdf"
release_date: "2025-10-13"
---
Manual | EN TF5110 - TF5113 Twin CAT 3 | Kinematic Transformation 2025-10-13 | Version: 2.3.4
## Page 3

Table of contents Table of contents 1 Foreword.................................................................................................................................................... 5 1.1 Notes on the documentation............................................................................................................. 5 1.2 For your safety.................................................................................................................................. 5 1.3 Notes on information security............................................................................................................ 7 2 Introduction............................................................................................................................................... 8 3 Overview of the new functions.............................................................................................................. 11 4 Installation............................................................................................................................................... 12 5 Configuration........................................................................................................................................... 13 6 Supported Transformation..................................................................................................................... 17 6.1 General Parameters for the Kinematics.......................................................................................... 20 6.2 Static Transformation...................................................................................................................... 22 6.3 2D-Kinematics Type 1 (P_2C)........................................................................................................ 24 6.4 2D-Kinematics Type 2 (P_2C2)...................................................................................................... 25 6.5 2D-Kinematics Type 3 (S_CC)........................................................................................................ 27 6.6 2D-Kinematics H-Bot (P_2Y).......................................................................................................... 28 6.7 2D-Kinematics Type 5 (S_CC)........................................................................................................ 29 6.8 2D-Kinematics Type 6 (P_2X)......................................................................................................... 30 6.9 2D-Scissor Kinematics Type 1 (P_2X)............................................................................................ 31 6.10 3D-Kinematics Type 8 (S_CCC)..................................................................................................... 32 6.11 3D-Delta Type 1 (P_3C).................................................................................................................. 34 6.12 3D-Delta Type 2 (P_3C2)................................................................................................................ 36 6.13 3D-Delta T Type 3 (P_3C3)............................................................................................................ 37 6.14 3D-Delta Y Type 4 (P_3C4)............................................................................................................ 40 6.15 3D-Tripod Type 1 (P_3Z)................................................................................................................ 41 6.16 3D-Tripod Type 2 (P_3L)................................................................................................................ 43 6.17 3D-Cable Kinematics Type 1 (P_3Z).............................................................................................. 44 6.18 3D-Cable Kinematics Type 2 (P_3L)............................................................................................... 45 6.19 3D-Kinematics Type 7 (PXX SZ)..................................................................................................... 46 6.20 4D-SCARA (S_CCZC).................................................................................................................... 48 6.21 4D-Kinematics Type 6 (S_XCZC)................................................................................................... 49 6.22 4D-Cable-Kinematics (P_4L).......................................................................................................... 50 6.23 5D-Kinematics Type 2 (XYZab)...................................................................................................... 51 6.24 5D-Kinematics Type 3 (XYZAB)...................................................................................................... 53 6.25 6D-Stewart Platform (P_6L)............................................................................................................ 55 6.26 Six Axis Articulated (S_CBBCBC)................................................................................................... 57 6.27 Drive Torque................................................................................................................................... 58 6.28 Tool Offset....................................................................................................................................... 59 6.29 Tool Linear...................................................................................................................................... 60 6.30 Coordinate system (Coordinate Frame).......................................................................................... 61 7 User-specific transformations............................................................................................................... 65 8 Plc Library................................................................................................................................................ 77 8.1 Function Blocks............................................................................................................................... 78 TF5110 - TF5113 Version: 2.3.4 3
## Page 4

Table of contents 8.1.1 FB_Kin Config Group......................................................................................................... 78 8.1.2 FB_Kin Reset Group.......................................................................................................... 80 8.1.3 FB_Kin Calc Trafo.............................................................................................................. 82 8.1.4 FB_Kin Calc Multi Trafo...................................................................................................... 84 8.1.5 FB_Kin Unlock Trafo Param............................................................................................... 86 8.1.6 FB_Kin Lock Trafo Param................................................................................................... 89 8.1.7 FB_Kin Extended Rotation Range...................................................................................... 90 8.1.8 FB_Kin Preset Rotation...................................................................................................... 91 8.2 Functions......................................................................................................................................... 93 8.2.1 F_Kin Get Chn Operation State........................................................................................... 93 8.2.2 F_Kin Get Acs Mcs Axis Ids.................................................................................................. 94 8.2.3 F_Kin Axes In Tolerance..................................................................................................... 94 8.3 Datatypes........................................................................................................................................ 95 8.3.1 ST_Kin Axes..................................................................................................................... 95 8.3.2 E_Kin Status..................................................................................................................... 96 8.3.3 Calc Trafo.......................................................................................................................... 96 8.4 Legacy............................................................................................................................................. 98 8.4.1 FB_Kin Check Actual Status............................................................................................... 98 4 Version: 2.3.4 TF5110 - TF5113
## Page 5

Foreword 1 Foreword 1.1 Notes on the documentation This description is intended exclusively for trained specialists in control and automation technology who are familiar with the applicable national standards. The documentation and the following notes and explanations must be complied with when installing and commissioning the components. The trained specialists must always use the current valid documentation. The trained specialists must ensure that the application and use of the products described is in line with all safety requirements, including all relevant laws, regulations, guidelines, and standards. Disclaimer The documentation has been compiled with care. The products described are, however, constantly under development. We reserve the right to revise and change the documentation at any time and without notice. Claims to modify products that have already been supplied may not be made on the basis of the data, diagrams, and descriptions in this documentation. Trademarks Beckhoff®, ATRO® , Ether CAT®, Ether CAT G®, Ether CAT G10®, Ether CAT P®, MX-System®, Safety over Ether CAT®, TC/BSD®, Twin CAT®, Twin CAT/BSD®, Twin SAFE®, XFC®, XPlanar®, and XTS® are registered and licensed trademarks of Beckhoff Automation Gmb H. If third parties make use of the designations or trademarks contained in this publication for their own purposes, this could infringe upon the rights of the owners of the said designations. Ether CAT® is a registered trademark and patented technology, licensed by Beckhoff Automation Gmb H, Germany. Copyright © Beckhoff Automation Gmb H & Co. KG, Germany. The distribution and reproduction of this document, as well as the use and communication of its contents without express authorization, are prohibited. Offenders will be held liable for the payment of damages. All rights reserved in the event that a patent, utility model, or design are registered. Third-party trademarks Trademarks of third parties may be used in this documentation. You can find the trademark notices here: https://www.beckhoff.com/trademarks. 1.2 For your safety Safety regulations Read the following explanations for your safety. Always observe and follow product-specific safety instructions, which you may find at the appropriate places in this document. Exclusion of liability All the components are supplied in particular hardware and software configurations which are appropriate for the application. Modifications to hardware or software configurations other than those described in the documentation are not permitted, and nullify the liability of Beckhoff Automation Gmb H & Co. KG. TF5110 - TF5113 Version: 2.3.4 5
## Page 6

Foreword Personnel qualification This description is only intended for trained specialists in control, automation, and drive technology who are familiar with the applicable national standards. Signal words The signal words used in the documentation are classified below. In order to prevent injury and damage to persons and property, read and follow the safety and warning notices. Personal injury warnings DANGER Hazard with high risk of death or serious injury. WARNING Hazard with medium risk of death or serious injury. CAUTION There is a low-risk hazard that could result in medium or minor injury. Warning of damage to property or environment NOTICE The environment, equipment, or data may be damaged. Information on handling the product This information includes, for example: recommendations for action, assistance or further information on the product. 6 Version: 2.3.4 TF5110 - TF5113
## Page 7

Foreword 1.3 Notes on information security The products of Beckhoff Automation Gmb H & Co. KG (Beckhoff), insofar as they can be accessed online, are equipped with security functions that support the secure operation of plants, systems, machines and networks. Despite the security functions, the creation, implementation and constant updating of a holistic security concept for the operation are necessary to protect the respective plant, system, machine and networks against cyber threats. The products sold by Beckhoff are only part of the overall security concept. The customer is responsible for preventing unauthorized access by third parties to its equipment, systems, machines and networks. The latter should be connected to the corporate network or the Internet only if appropriate protective measures have been set up. In addition, the recommendations from Beckhoff regarding appropriate protective measures should be observed. Further information regarding information security and industrial security can be found in our https://www.beckhoff.com/secguide. Beckhoff products and solutions undergo continuous further development. This also applies to security functions. In light of this continuous further development, Beckhoff expressly recommends that the products are kept up to date at all times and that updates are installed for the products once they have been made available. Using outdated or unsupported product versions can increase the risk of cyber threats. To stay informed about information security for Beckhoff products, subscribe to the RSS feed at https:// www.beckhoff.com/secinfo. TF5110 - TF5113 Version: 2.3.4 7
## Page 8

Introduction 2 Introduction The TF5110 - TF5113 Twin CAT Kinematic Transformation software package is installed together with the TF5400 software package. Twin CAT Kinematic Transformation The TF5110 - TF5113 Twin CAT Kinematic Transformation is a software solution that combines robot control and conventional PLC in one system (see also https://www.beckhoff.com/tf5113/). The implementation of the entire control in one system eliminates interface losses between different CPUs for PLC, motion control and robot control. In practice, this implementation leads to a reduction of engineering costs and to reduced cycle times in the production process. In addition to the elimination of interfaces and components, the merging of PLC, robotics and motion control into one application makes the system homogeneous. Therefore, for the user there is no apparent difference in the treatment of the individual functions. Conveniently, a part on a conveyor belt operated with standard motion control can be taken and set aside by the robot quickly and handily. Since the working area of the robot is determined by the configuration and the number of axes, it depends on a number of parameters: arm lengths, angular range, center of mass, maximum load, etc. The configuration of the arms and joints determines the kinematic structure, which is divided in two main classes: serial kinematics and parallel kinematics. Serial kinematics The current position of any axis always depends on the position of the preceding axis, i.e. all axes are arranged sequentially. Examples: SCARA and crane kinematics Parallel kinematics All axes directly engage with the working platform via the kinematics. Examples: delta kinematics, shear kinematics Coordinate systems Coordinate systems are required in order to describe the positional behavior of a system. Different coordinate systems can be used as a basis for programming: • The machine coordinate system (MCS ) is a robot-based cartesian coordinate system, which usually has its origin in the robot base. 8 Version: 2.3.4 TF5110 - TF5113
## Page 9

Introduction • The world coordinate system (WCS ) is a cartesian coordinate system, which describes the whole modelled 'world'. It therefore does not refer to a specific robot, but to the whole system. The origin of a robot-based machine coordinate system (MCS) is at a particular point of the WCS. In other words, the user can specify, at which point of his “world” an industrial robot is located and how it is oriented. A WCS can contain several robots. When using a robot, world coordinates can coincide with the machine coordinates to improve transparency. • The user can position the user coordinate system (UCS) at any position and with any orientation within the world coordinate system. • The axis coordinate system (ACS) describes the position of the physical axes. It is generally not a cartesian coordinate system. Many robot joint axes perform rotary movements. Using the ACS makes it easier to take into account the limit values for angle, velocity and acceleration. If a robot axis performs rotary movements, it is often difficult for the user to predict and control the path. The axis coordinate system is usually used for referencing/homing. Kinematic transformation In many cases, robots are programmed in the MCS. Due to the way humans think, movements are usually programmed in Cartesian coordinate systems. To execute such movements, it is therefore necessary to convert between the axis coordinate system and the Cartesian space. Transformation describes, in the context of the kinematics, the calculation necessary in order to change from one coordinate system to another. There are basically two problems in considering the kinematics of robots: • The conversion from the axis coordinate system (ACS) to a Cartesian coordinate system is referred to as forward transformation. The Cartesian position of the tool center point (TCP) is calculated from the axis-specific joint coordinates of the robot. • The conversion from Cartesian coordinates of the TCP to axis coordinates, which is required in order to move the actual robot axes, is referred to as backward transformation. TF5110 - TF5113 Version: 2.3.4 9
## Page 10

Introduction Realization in Twin CAT Twin CAT Kinematic Transformation can be used to realize robotics applications. All PLC and NC features can be combined on a common hardware and software platform. Twin CAT Kinematic Transformation realizes several robot kinematics (e.g. H-Bot, delta robot, 6-axis robot) on the PC. The axes are controlled directly from the Twin CAT Motion Control system. The user can program robot movements directly in the Cartesian coordinate system. The software calculates the transformation to the axis coordinate system of the robot in each cycle. To minimize vibrations and to increase the positioning accuracy, for many kinematics a current pre-control can be activated, if the drive amplifier and the fieldbus are fast enough and interfaces for an additional current pre-control are available. Ether CAT and the Beckhoff servo axles meet these requirements. The Twin CAT function seamlessly integrates into the motion control world of Beckhoff. TF5420 Twin CAT 3 Motion Pick-and-Place is available especially for the simple realization of handling tasks. TF5100 Twin CAT 3 NC I enables programming both via G-Code (DIN 66025) and directly from the PLC (Plc Interpolation library). The functions TF5055 Twin CAT 3 NC Flying Saw and TF5050 Twin CAT 3 NC Camming enable synchronization with conveyor belts for picking and placing of workpieces, for example. In addition, standard PTP functions from the familiar Beckhoff PTP motion libraries can be used. The configuration of the robot takes place entirely in the Twin CAT 3 Engineering environment (XAE). 10 Version: 2.3.4 TF5110 - TF5113
## Page 11

Overview of the new functions 3 Overview of the new functions From V3.3.57: • New kinematics: ◦ 3D-Delta Y Type 4 (P_3C4) [} 40] ◦ 3D-Kinematics Type 8 (S_CCC) [} 32] From V3.3.25: • New kinematics: ◦ 2D-Scissor Type 1 (P_2X) [} 31] From V3.1.10.66: • New kinematics: ◦ 3D-Tripod Type 1 (P_3Z) [} 41] ◦ 3D-Tripod Type 2 (P_3L) [} 43] From V3.1.10.63: • Requires Twin CAT V3.1.4024.24 or higher From V3.1.10.30: • New kinematics: ◦ 3D-Kinematics Type 7 (PXX_SZ) [} 46] ◦ 3D-Delta T-Type 3 (P_3C3) [} 37] ◦ 3D-Cable Kinematics Type 2 (P_3L) [} 45] ◦ 4D-Kinematics Type 6 (S_XCZC) [} 49] ◦ 4D-Cable Kinematics (P_4L) [} 50] From V3.1.10.1: • New function blocks for Extended Rotation Range have been implemented: ◦ FB_Kin Preset Rotation ◦ FB_Kin Extended Rotation Range • New function F_Kin Axes In Tolerance • Requires Twin CAT V3.1.4024.7 or higher From V3.1.6.3: • The TF5400 installation package will include the TF511x Twin CAT 3 Kinematic Transformation. TF5110 - TF5113 Version: 2.3.4 11
## Page 12

Installation 4 Installation The installation of TF511x Kinematic Transformation differs from version Twin CAT 3.1 Build 4024 to the previous versions. Twin CAT Package Manager: Installation (Twin CAT 3.1 Build 4026) From Twin CAT 3.1 Build 4026, Twin CAT products are installed via the Twin CAT Package Manager. Detailed instructions on installing products can be found in the chapter Installing workloads in the Twin CAT 3.1 Build 4026 installation instructions. You can obtain a basic Twin CAT 3 installation via the following workloads: • Twin CAT. Standard. XAE (Engineering) • Twin CAT. Standard. XAR (Runtime) For TF5110-TF5112 | Twin CAT 3 Kinematic Transformation L1-L3 please install the workloads: • TF5400. Advanced Motion Pack. XAE (Engineering) • TF5400. Advanced Motion Pack. XAR (Runtime) TF5113 | Twin CAT Kinematic Transformation L4 TF5113 | Twin CAT 3 Kinematic Transformation L4 is subject to legal restrictions and is not included in the TF5400. Advanced Motion Pack workload. If required, please get in touch with your sales contact. Twin CAT setup: Installation (Twin CAT 3.1 Build 4024 and earlier) TF5110 - TF5112 | Twin CAT 3 Kinematic Transformation L1-L3 is installed up to and including Twin CAT 3.1 Build 4024 with the setup TF5400 Twin CAT 3 Advanced Motion Pack. TF5113 | Twin CAT Kinematic Transformation L4 TF5113 | Twin CAT 3 Kinematic Transformation L4 is subject to legal restrictions and is not included in the TF5400 Twin CAT Advanced Motion Pack Setup from the web pages. If required, please get in touch with your sales contact. Function level for TF5110-TF5113 The function TF5110 - TF5113 Twin CAT 3 Kinematic Transformation is divided into four different levels depending on the number of transformation axes. A higher level includes all sublevels. Level 1: supports the static transformation. This includes a translation and rotation of the coordinate system. Level 2: supports Level 1 and simple (mainly 2D) kinematic transformations such as H-Bot and 2D parallel kinematics. Level 3: Supports level 2 and more sophisticated kinematic transformations (3D, 4D), such as delta robots. Level 4: supports Level 3 and complex kinematic transformations (up to 6D). Additional licensing requirements TF5110-TF5113 Twin CAT 3 Kinematic Transformation requires the TC1260 license. 12 Version: 2.3.4 TF5110 - TF5113
## Page 13

Configuration 5 Configuration Based on PLCopen, we distinguish between two main coordinate systems (see description Introduction [} 8]): • Axis coordinate system (ACS) • Machine coordinate system (MCS) Configuring the kinematic transformation channel 1. Add all axes (ACS and MCS ) to the NC configuration in the XAE, just like PTP axes. The axes of the ACS are hardware axes and are linked with drives. The axes of the MCS are pure software axes of the simulation encoder type. All ACS and MCS axes that are used in a kinematic transformation channel must be created in the XAE. A delta robot, for example, has three ACS axes (M1... M3) and three MCS axes (X, Y, Z). 2. Right-click on “Axes” and select “Add new item”. 3. Then create the axes in the “Insert NC Axis” window, according to the kinematics. TF5110 - TF5113 Version: 2.3.4 13
## Page 14

Configuration 4. Add a kinematic channel to the XAE configuration. ð The addition of a channel creates an instance of a kinematic group. 5. Select the channel type: NC channel (for kinematic transformation) for performing a kinematic transformation. 6. Add the objects under the group representing the kinematic configuration of the user. 14 Version: 2.3.4 TF5110 - TF5113
## Page 15

Configuration 7. To start the transformation for a delta robot, select - Delta Type 1 In addition, optional tools [} 59] and coordinate systems (UCS) can be created. 8. The transformation group must know which root module is to be called. This is why the object ID of the kinematics (in this case Delta Type 1) must be selected. The kinematic object defines the number of ACS and MCS axes to be used in the PLC (see ST_Kin Axes [} 95]). TF5110 - TF5113 Version: 2.3.4 15
## Page 16

Configuration 9. Parameterize the object parameters according to the kinematics used. 10. The transformation can now be activated via the PLC (see Plc Library [} 77]). To actuate the transformation, define a cyclic channel interface in the PLC and link it with the I/O of the kinematic channel. in_st Kin To Plc AT %I* : NCTOPLC_NCICHANNEL_REF; out_st Plc To Kin AT %Q* : PLCTONC_NCICHANNEL_REF; 16 Version: 2.3.4 TF5110 - TF5113
## Page 17

Supported Transformation 6 Supported Transformation Overview Transformation type Schema Required Twin CAT function (level) Static Transformation [} 22] TF5110 Twin CAT 3 Kinematic Transformation (Level 1) 2D kinematic transformations Transformation type Schema Required Twin CAT function (level) 2D-Kinematics Type 1 (P_2C) TF5111 Twin CAT 3 Kinematic Transformation (Level 2) [} 24] 2D-Kinematics Type 2 TF5111 Twin CAT 3 Kinematic Transformation (Level 2) (P_2C2) [} 25] 2D-Kinematics Type 3 (S_CC) TF5111 Twin CAT 3 Kinematic Transformation (Level 2) [} 27] 2D-Kinematics H-Bot (P_2Y) TF5111 Twin CAT 3 Kinematic Transformation (Level 2) [} 28] 2D-Kinematics Type 5 (S_CC) TF5111 Twin CAT 3 Kinematic Transformation (Level 2) [} 29] 2D-Kinematics Type 6 (P_2X) TF5111 Twin CAT 3 Kinematic Transformation (Level 2) [} 30] 2D-Scissor Kinematics Type TF5111 Twin CAT 3 Kinematic Transformation (Level 2) 1 (P_2X) [} 31] TF5110 - TF5113 Version: 2.3.4 17
## Page 18

Supported Transformation 3D kinematic transformations Transformation type Schema Required Twin CAT function (level) 3D-Kinematics Type 8 TF5112 Twin CAT 3 Kinematic Transformation (Level 3) (S_CCC) [} 32] 3D-Delta Type 1 (P_3C) TF5112 Twin CAT 3 Kinematic Transformation (Level 3) [} 34] 3D-Delta Type 2 (P_3C2) TF5112 Twin CAT 3 Kinematic Transformation (Level 3) [} 36] 3D-Delta T Type 3 (P_3C3) TF5112 Twin CAT 3 Kinematic Transformation (Level 3) [} 37] 3D-Delta Y Type 4 (P_3C4) TF5112 Twin CAT 3 Kinematic Transformation (Level 3) [} 40] 3D-Tripod Type 1 (P_3Z) TF5112 Twin CAT 3 Kinematic Transformation (Level 3) [} 41] 3D-Tripod Type 2 (P_3L) TF5112 Twin CAT 3 Kinematic Transformation (Level 3) [} 43] 3D-Cable Type 1 (P_3Z) TF5112 Twin CAT 3 Kinematic Transformation (Level 3) [} 44] 18 Version: 2.3.4 TF5110 - TF5113
## Page 19

Supported Transformation Transformation type Schema Required Twin CAT function (level) 3D-Cable Type 2 (P_3L) TF5112 Twin CAT 3 Kinematic Transformation (Level 3) [} 45] 3D-Kinematics Type 7 TF5112 Twin CAT 3 Kinematic Transformation (Level 3) (PXX_SZ) [} 46] 4D kinematic transformations Transformation type Schema Required Twin CAT function (level) 4D-SCARA (S_CCZC) [} 48] TF5112 Twin CAT 3 Kinematic Transformation (Level 3) 4D-Kinematics Type 6 TF5112 Twin CAT 3 Kinematic Transformation (Level 3) (S_XCZC) [} 49] 4D-Cable (4D_P_4L) [} 50] TF5112 Twin CAT 3 Kinematic Transformation (Level 3) 5D and 6D kinematic transformations (export limited) TF5113 | Twin CAT Kinematic Transformation L4 TF5113 | Twin CAT 3 Kinematic Transformation L4 is subject to legal restrictions and is not included in the TF5400. Advanced Motion Pack workload or included in the TF5400 Twin CAT Advanced Motion Pack Setup from the website. If required, please get in touch with your sales contact. Transformation type Schema Required Twin CAT function (level) 5D-Kinematics Type 2 TF5113 Twin CAT 3 Kinematic Transformation (Level 4) (XYZab) [} 51] 5D-Kinematics Type 3 TF5113 Twin CAT 3 Kinematic Transformation (Level 4) (XYZAB) [} 53] Stewart Platform (P_6L) TF5113 Twin CAT 3 Kinematic Transformation (Level 4) [} 55] Six Axis Articulated TF5113 Twin CAT 3 Kinematic Transformation (Level 4) (S_CBBCBC) [} 57] TF5110 - TF5113 Version: 2.3.4 19
## Page 20

Supported Transformation Additional objects The following objects can be created and selected in the corresponding kinematics. A drop-down parameter list in the kinematics is used for the selection. Select the corresponding object ID (OTCID). Object type Description Required level and version Tool Offset [} 59] Tool offset - describes a tool at the level TF5110 Twin CAT 3 Kinematic of the kinematics flange. Transformation (Level 1) Tool Linear [} 60] Linear tool - describes a 1D tool TF5110 Twin CAT 3 Kinematic mounted on the kinematics flange, Transformation (Level 1) which offers the option to move the TCP towards the tool. Drive Torque [} 58] Drive torque - represents the inertia and TF5110 Twin CAT 3 Kinematic the efficiency of the motor and drive, to Transformation (Level 1) enable more precise calculation of the dynamic model. Coordinate Frame [} 61] Coordinate system - describes a user- TF5110 Twin CAT 3 Kinematic defined coordinate system. Transformation (Level 1) 6.1 General Parameters for the Kinematics MCS Offset The MCS offset can be used to parameterize additional offset parameters before the first axis (or before the basis) of the kinematics. For example, in the SCARA kinematics the origin of the MCS is located in the first joint (M1). The parameter Z-shift of the MCS offset can be used to parameterize the additional bar length so that the origin of the MCS resides at the robot base. Parameter Description Type Unit X-shift Static X-offset in the MCS. LREAL mm Y-shift Static Y-offset in the MCS. LREAL mm Z-shift Static Z-offset in the MCS. LREAL mm MCS to Spatial reference The MCS can be moved in a reference coordinate system using the Spatial reference parameter. All coordinate systems are right-handed (anticlockwise). Parameter Description Type Unit Translation X Translation in X direction. LREAL mm 20 Version: 2.3.4 TF5110 - TF5113
## Page 21

Supported Transformation Parameter Description Type Unit Translation Y Translation in Y direction. LREAL mm Translation Z Translation in Z direction. LREAL mm Rotation 1 First rotation angle. The interpretation is defined by LREAL ° the parameter Rotation Convention. Rotation 2 Second rotation angle. The interpretation is LREAL ° defined by the parameter Rotation Convention. Rotation 3 Third rotation angle. The interpretation is defined LREAL ° by the parameter Rotation Convention. Rotation convention The rotation convention indicates the order of the MC. Coord Int axis rotations (parameter Rotation 1-3). The letters erpretation (X, Y, Z) from left to right indicate the order of the _SO3 rotation around the corresponding axes. The number indicates the parameter (Rotation 1-3) for the value parameterization. The translation is always performed before the rotation. Spatial reference The Spatial reference parameter indicates which OTCID coordinate system is used as basis for the MCS. If the value 0 is set here, the WCS is used as the basis. To use another coordinate system as starting point for the translation, a Coordinate Frame [} 61] object can be created. The object ID of this coordinate system can be selected via the drop-down menu. Definition direction Defines the direction in which the translation is MC. Referenc programmed (from the point of view of the e Def Dir reference system or from the point of view of the MCS), see example below. Example: Definition Direction If the Definition Direction MCS -> Reference is used, the translation from the source coordinate system (MCS) to the target coordinate system (Reference) shown below is specified with negative vectors. If a positive rotation around the Z-axis (here 90°) is specified in addition to the translation, the translation is carried out first and then the target coordinate system is rotated (here +90° around the Z-axis). TF5110 - TF5113 Version: 2.3.4 21
## Page 22

Supported Transformation Example: Rotation Parameter Example values Rotation 1 180° Rotation 2 90° Rotation 3 45° Rotation convention Rotation_Z3Y2_X1_DIN9300 Z Z X X Y Y X Y Z X Y Z Initial situation First rotation around Second rotation around Third rotation around the Z axis with the degree the Y axis with the degree the X axis with the degree of ". Rotation 3" (45°) of ". Rotation 2" (90°) of ". Rotation 1" (180°) Tool offset OID Parameter Description Type Tool offset OID To define a tool for the kinematics a Tool Offset [} 59] object or a Tool OTCID Linear [} 60] object has to be created at first. The object ID of this tool can be selected via the drop-down menu. 6.2 Static Transformation The static transformation enables creation of a cartesian gantry. It supports translation and rotation between two cartesian coordinate systems. The static transformation forms the kinematic, so that the kinematic group is formed with the static transformation. In contrast, a Coordinate system (Coordinate Frame) [} 61] adds a translation and a rotation to an existing kinematic. 22 Version: 2.3.4 TF5110 - TF5113
## Page 23

Supported Transformation z' z y' x' y x First the translation is calculated, then the rotation. The order of the rotations affects the orientation of the coordinate system. The roll/pitch/yaw rule described in DIN 9300 is used as default for the rotation sequence. The calculation sequence for the forward transformation is Z, Y', X''. Parameter Description Type Unit Translation X Shift in X-direction LREAL mm Translation Y Shift in Y-direction LREAL mm Translation Z Shift in Z-direction LREAL mm Rotation 1 First rotation angle. The interpretation is defined by LREAL ° the parameter Rotation convention. Rotation 2 Second rotation angle. The interpretation is defined LREAL ° by the parameter Rotation convention. Rotation 3 Third rotation angle. The interpretation is defined LREAL ° by the parameter Rotation convention. Rotation convention The rotation convention indicates the order of the MC. Coord Int axis rotations (parameter Rotation 1-3). The letters erpretation (X, Y, Z) from left to right indicate the order of the _SO3 rotation around the corresponding axes. The number indicates the parameter (Rotation 1-3) for the value parameterization. The translatory shift is always performed before the rotation. Spatial reference The parameter Spatial reference indicates which OTCID coordinate system is used as basis for this coordinate system. If the value is set to 0, the WCS is used as basis. To use another coordinate system as starting point for the shift, a further Coordinate system (Coordinate Frame) [} 61] object can be created. The object ID of this coordinate system can be selected via the dropdown menu. Definition direction Indicates the direction in which the shift is MC. Referenc programmed (from the perspective of the reference e Def Dir system or this coordinate system). TF5110 - TF5113 Version: 2.3.4 23
## Page 24

Supported Transformation 6.3 2D-Kinematics Type 1 (P_2C) The 2D-Kinematics Type 1 (P_2C) is configured as shown in the diagram above. All motor axes are scaled in degrees; 0° is defined as shown in the diagram. The arrow indicates the positive direction. Parameters for the Kinematics Parameter Description Type Unit Inner arm length Length between pivots of the inner arm LREAL mm Outer arm length Length between pivots of the outer arm LREAL mm Displacement Length between the center of the base plate and LREAL mm the virtual rotation axes of the inner arm Parameters for the Dynamic Model Parameter Description Type Unit Inner arm mass Total mass of the inner arm LREAL kg Inner arm moment of Moment of inertia of the inner arm in relation to LREAL kg mm^2 inertia pivot point P1, which is linked with the motor Outer arm mass The mass of the external arms minus the mass of LREAL kg the joint can optionally be described as a separate parameter. First link mass Mass of the joint linking the inner and outer arm; LREAL kg can be used if the mass of the joint is not already included in the outer and inner arms. The mass of the joint linking the gripper plate with the outer arm is not specified here. It can be added to Tcp Mass. The mass of the first joint refers to the inner arm that is linked to motor 1. Second link mass See First Link Mass LREAL kg The mass of the second joint refers to the inner arm that is linked to motor 2. TCP mass Mass of the tool center point, including gripper LREAL kg plate and gripper. The payload is usually described with a separate parameter. 24 Version: 2.3.4 TF5110 - TF5113
## Page 25

Supported Transformation Parameter Description Type Unit First drive torque OID Object ID of the first drive torque (see Drive Torque OTCID [} 58]) If the motors and gear units of all motors behave in a similar way, all drive torques can be represented via an OID. Both parameters therefore refer to the same object ID. Second drive torque Object ID of the second drive torque OTCID OID General Parameters for the Kinematics General parameters that apply to any kinematics are described in the following sections: • MCS Offset [} 20], • Spatial reference definition [} 20]. For all kinematics with tool also applies: • Tool Offset OID [} 22]. Requirements Development Environment Target System Twin CAT Function Installation Package Twin CAT V3.1.4018.26 PC or CX (x86 or x64) TF5111 Twin CAT 3 Kinematic TF5400 Twin CAT 3 Advanced Transformation (Level 2) Motion Pack V3.1.6.14 6.4 2D-Kinematics Type 2 (P_2C2) The 2D-Kinematics Type 2 (P_2C2) is configured as shown in the diagram above. All motor axes are scaled in degrees; 0° is defined as shown in the diagram. The arrow indicates the positive direction. Parameters for the Kinematics Parameter Description Type Unit Inner arm length Length between pivots of the inner arm LREAL mm Outer arm length Length between pivots of the outer arm LREAL mm TF5110 - TF5113 Version: 2.3.4 25
## Page 26

Supported Transformation Parameter Description Type Unit Displacement Length between the center of the base plate and LREAL mm the virtual rotation axes of the inner arm TCP link distance Distance between pivots of the outer arm LREAL mm Parameters for the Dynamic Model Parameter Description Type Unit Inner arm mass Total mass of the inner arm LREAL kg Inner arm moment of Moment of inertia of the inner arm in relation to LREAL kg mm^2 inertia pivot point P1, which is linked with the motor. Outer arm mass The mass of the external arms minus the mass of LREAL kg the joint can optionally be described as a separate parameter. First link mass Mass of the joint linking the inner and outer arm. LREAL kg Can be used if the mass of the joint is not already included in the outer and inner arms. The mass of the joint linking the gripper plate with the outer arm is not specified here. It can be added to the TCP mass. The mass of the first joint refers to the inner arm that is linked to M1. Second link mass see First link mass LREAL kg The mass of the second joint refers to the inner arm that is linked to M2. TCP mass Mass of the TCP, including gripper plate and LREAL kg gripper. The payload is usually described with a separate parameter. First drive torque OID Object ID of the first drive torque (see Drive Torque OTCID [} 58]) If the motors and gear units of all motors behave in a similar way, all drive torques can be represented via an OID. Both parameters therefore refer to the same object ID. Second drive torque Object ID of the second drive torque OTCID OID General Parameters for the Kinematics General parameters that apply to any kinematics are described in the following sections: • MCS Offset [} 20], • Spatial reference definition [} 20]. For all kinematics with tool also applies: • Tool Offset OID [} 22]. Requirements Development Environment Target System Twin CAT Function Installation Package Twin CAT V3.1.4018.26 PC or CX (x86 or x64) TF5111 Twin CAT 3 Kinematic TF5400 Twin CAT 3 Advanced Transformation (Level 2) Motion Pack V3.1.6.14 26 Version: 2.3.4 TF5110 - TF5113
## Page 27

Supported Transformation 6.5 2D-Kinematics Type 3 (S_CC) 2D-Kinematics Type 3 (S_CC) is configured as shown in the diagram above. All motor axes are scaled in degrees; 0° is defined as shown in the diagram. The arrow indicates the positive direction. This kinematics type is implemented as a left-handed system. The shafts of motor M1 and M2 are located at the origin of the coordinate system. Parameters for the Kinematics Parameter Description Type Unit Inner arm length Length between the motor shaft and the pivot point LREAL mm of the external arm Outer arm length Length between the pivot point and the tool center LREAL mm point of the outer arm General Parameters for the Kinematics General parameters that apply to any kinematics are described in the following sections: • MCS Offset [} 20], • Spatial reference definition [} 20]. For all kinematics with tool also applies: • Tool Offset OID [} 22]. Requirements Development Environment Target System Twin CAT Function Installation Package Twin CAT V3.1.4018.26 PC or CX (x86 or x64) TF5111 Twin CAT 3 Kinematic TF5400 Twin CAT 3 Advanced Transformation (Level 2) Motion Pack V3.1.6.14 TF5110 - TF5113 Version: 2.3.4 27
## Page 28

Supported Transformation 6.6 2D-Kinematics H-Bot (P_2Y) The 2D-Kinematics H-Bot (P_2Y) is configured as shown in the diagram above. The motor axes have to be scaled in millimeters. All the other position parameters result from the kinematic constraints. The point of origin of the machine coordinate system MCS is defined by the point for that the positions of the two motors are zero. Parameters for the Dynamic Model Parameter Description Type First Drive Torqu Object ID of the first drive torque (see Drive Torque [} 58]). OTCID e OID If the motors and gear units of all motors behave in a similar way, all drive torques can be represented via an OID. Both parameters therefore refer to the same object ID. Second Drive To Object ID of the second drive torque OTCID rque OID General Parameters for the Kinematics General parameters that apply to any kinematics are described in the following sections: • MCS Offset [} 20], • Spatial reference definition [} 20]. For all kinematics with tool also applies: • Tool Offset OID [} 22]. Requirements Development Environment Target System Twin CAT Function Installation Package Twin CAT V3.1.4018.26 PC or CX (x86 or x64) TF5111 Twin CAT 3 Kinematic TF5400 Twin CAT 3 Advanced Transformation (Level 2) Motion Pack V3.1.6.14 28 Version: 2.3.4 TF5110 - TF5113
## Page 29

Supported Transformation 6.7 2D-Kinematics Type 5 (S_CC) A crank consists of a wheel with an eccentrically located pin. Two cranks whose ends lead to bearings facilitate two dimensional movements of the TCP. The cranks are moved by motors that are obstructed in a stationary machine. Parameters for the Kinematics Parameter Description Type Unit Radius R • The quantity R describes the lever arm of crank 1. LREAL mm 1 1 This lever arm is measured from the crank center to the center of the pin in the bearing. • The rotational center of crank 1 is fixed. • Crank 1 is moved by motor M1. • Motor M1 evokes movements in X-direction of the TCP. Radius R • The quantity R describes the lever arm of crank 2. LREAL mm 2 2 This lever arm is measured from the crank center to the center of the pin in the bearing. • The rotational center of crank 2 is fixed. • Crank 2 is moved by motor M2. • Motor M2 evokes movements in Y-direction of the TCP. TF5110 - TF5113 Version: 2.3.4 29
## Page 30

Supported Transformation General Parameters for the Kinematics General parameters that apply to any kinematics are described in the following sections: • MCS Offset [} 20], • Spatial reference definition [} 20]. For all kinematics with tool also applies: • Tool Offset OID [} 22]. Requirements Development Environment Target System Twin CAT Function Installation Package Twin CAT V3.1.4018.26 PC or CX (x86 or x64) TF5111 Twin CAT 3 Kinematic TF5400 Twin CAT 3 Advanced Transformation (Level 2) Motion Pack V3.1.6.14 6.8 2D-Kinematics Type 6 (P_2X) With the Kinematics the two linear axes M1 and M2 enable movements within the XY-plane. Parameters for the Kinematics Parameter Description Type Unit Flange translation X Spatial shift in X-direction. LREAL mm Arm length (L) Length of the joint segments each measured from the LREAL mm motor to the joint of the flange. Motor distance (h) The motor distance h is the Y-distance of the joints at LREAL mm the motors. (The motors M1 and M2 both move in X- direction. The motor distance h is measured from joint center point to joint center point.) Link distance (d) The link distance d is the distance between the joints LREAL mm y y in the flange. General Parameters for the Kinematics General parameters that apply to any kinematics are described in the following sections: • MCS Offset [} 20], • Spatial reference definition [} 20]. 30 Version: 2.3.4 TF5110 - TF5113
## Page 31

Supported Transformation For all kinematics with tool also applies: • Tool Offset OID [} 22]. Requirements Development Environment Target System Twin CAT Function Installation Package Twin CAT V3.1.4018.26 PC or CX (x86 or x64) TF5111 Twin CAT 3 Kinematic TF5400 Twin CAT 3 Advanced Transformation (Level 2) Motion Pack V3.1.6.14 6.9 2D-Scissor Kinematics Type 1 (P_2X) The 2D-Scissor Kinematics Type 1 is structured as shown in the diagram above. Kinematics parameters Parameter Description Type Unit Arm length Arm length from the motor axis pivot point to the LREAL mm TCP pivot point TCP link distance Distance between the pivot points of the two LREAL mm arms on the TCP General Parameters for the Kinematics General parameters that apply to any kinematics are described in the following sections: • MCS Offset [} 20], • Spatial reference definition [} 20]. For all kinematics with tool also applies: • Tool Offset OID [} 22]. Prerequisites Installation package Target platform Twin CAT function TF5400 Twin CAT 3 Advanced PC or CX (x86 or x64) TF5111 Twin CAT 3 Kinematic Motion Pack V3.3.25 Transformation (Level 2) TF5110 - TF5113 Version: 2.3.4 31
## Page 32

Supported Transformation 6.10 3D-Kinematics Type 8 (S_CCC) The 3D-Kinematics Type 8 (S_CCC) describes a serial kinematic transformation that is structured as shown in the diagram above. All joints are scaled in degrees, with the positive direction of rotation being in the direction of the arrow. The origin of the machine coordinate system (MCS) is located in joint J1. Singular positions Singular positions cannot be approached in Cartesian mode. It is only possible to approach these positions in axis mode (direct mode). Kinematics parameters Parameter Description Type Unit Arm length L1 Distance between joints J1 and J2 LREAL mm Arm length L2 Distance between joints J2 and J3 LREAL mm Arm length L3 Distance between joint J3 and the flange LREAL mm Parameters for a gear coupling If there are other motors between the physical position of a motor and the corresponding joint, there is a coupling between them. The respective coupling factor must be parameterized. 32 Version: 2.3.4 TF5110 - TF5113
## Page 33

Supported Transformation Parameter Description Type Gear coupling 1 to 2 The parameter describes the influence of the motor M1 on the LREAL joint J2. J2 = M2 + M1 * [Gear coupling 1 to 2] Gear coupling 1 to 3 The parameter describes the influence of the motor M1 on the LREAL joint J3. J3 = M3 + M1 * [Gear coupling 1 to 3] Gear coupling 2 to 3 The parameter describes the influence of the motor M2 on the LREAL joint J3. J3 = M3 + M2 * [Gear coupling 2 to 3] General Parameters for the Kinematics General parameters that apply to any kinematics are described in the following sections: • MCS Offset [} 20], • Spatial reference definition [} 20]. For all kinematics with tool also applies: • Tool Offset OID [} 22]. Prerequisites Installation package Target platform Twin CAT function TF5400 Twin CAT 3 Advanced PC or CX (x86 or x64) TF5112 Twin CAT 3 Kinematic Motion Pack V3.3.57 Transformation (Level 3) TF5110 - TF5113 Version: 2.3.4 33
## Page 34

Supported Transformation 6.11 3D-Delta Type 1 (P_3C) The 3D-Delta Kinematics Type 1 (P_3C) is configured as shown in the diagram above. The Kinematic Transformation expects ball joints (or elements with the same behavior) in the link between the arms and the lower plate. Parameterization of the center stick for aligning the gripper is optional. All motor axes are scaled in degrees; 0° is defined as shown in the diagram. The arrow indicates the positive direction. This applies for all three motors. 34 Version: 2.3.4 TF5110 - TF5113
## Page 35

Supported Transformation Parameters for the Kinematics Parameter Description Type Unit Inner arm length Length between the pivot points of the inner arm; LREAL mm this is the arm that is directly linked with the motor. Outer arm length Length between pivots of the outer arm LREAL mm Displacement Length between the center of the base plate and LREAL mm the virtual rotation axes of the inner arm TCP displacement Length between the center of the gripper plate and LREAL mm the virtual rotation axes of the outer arm Parameters for the Dynamic Model Parameter Description Type Unit Inner arm mass Total mass of the inner arm LREAL kg Inner arm moment of Moment of inertia of the inner arm in relation to LREAL kg mm^2 inertia pivot point P1, which is linked with the motor Outer arm mass Mass of the outer arm. If two bars are used, the LREAL kg total mass is required. The mass of the joint can optionally be described as a separate parameter. Link mass Mass of the joint linking the inner and outer arm. LREAL kg Can be used if the mass of the joint is not already included in the outer and inner arms. The mass of the joint linking the gripper plate with the outer arm is not specified here. It can be added to Tcp Mass. TCP mass Mass of the TCP, including gripper plate and LREAL kg gripper. The payload is usually described with a separate parameter. Center stick mass Total mass of the center stick LREAL kg Center stick: moment Moment of inertia of the center stick in relation to LREAL kg mm^2 of inertia the center of gravity (P2) Center stick: center of Length between the gripper plate and the center of LREAL mm mass displacement gravity of the bar First drive torque OID Object ID of the first drive torque (see Drive Torque OTCID [} 58]) If the motors and gear units of all motors behave in a similar way, all drive torques can be represented via an OID. All three parameters refer to the same object ID. Second drive torque Object ID of the second drive torque OTCID OID Third drive torque OID Object ID of the third drive torque OTCID General Parameters for the Kinematics General parameters that apply to any kinematics are described in the following sections: • MCS Offset [} 20], • Spatial reference definition [} 20]. For all kinematics with tool also applies: • Tool Offset OID [} 22]. TF5110 - TF5113 Version: 2.3.4 35
## Page 36

Supported Transformation Requirements Development Environment Target System Twin CAT Function Installation Package Twin CAT V3.1.4018.26 PC or CX (x86 or x64) TF5112 Twin CAT 3 Kinematic TF5400 Twin CAT 3 Advanced Transformation (Level 3) Motion Pack V3.1.6.14 6.12 3D-Delta Type 2 (P_3C2) The 3D-Delta Type 2(P_3C2) essentially corresponds to the 3D-Delta Type 1 (P_3C) [} 34], but no ball joints are required. Instead, the offset of cardan joints can be parameterized. Cardan length Kinematics parameters Parameter Description Type Unit Inner arm length Length between the pivot points of the inner arm; LREAL mm this is the arm that is directly linked with the motor. Outer arm length Length between pivot points of the outer arm LREAL mm Displacement Length between the center of the base plate and LREAL mm the virtual rotation axes of the inner arm TCP displacement Length between the center of the gripper plate LREAL mm and the virtual rotation axes of the outer arm Upper cardan length If a cardan joint is used at the upper arm LREAL mm suspension points, this parameter can be used to specify the offset of the two joints within the cardan joint. When using a ball joint, enter length 0. Lower cardan length If a cardan joint is used at the lower arm LREAL mm suspension points, this parameter can be used to specify the offset of the two joints within the cardan joint. When using a ball joint, enter length 0. Parameters for the Dynamic Model Parameter Description Type Unit Inner arm mass Total mass of the inner arm LREAL kg 36 Version: 2.3.4 TF5110 - TF5113
## Page 37

Supported Transformation Parameter Description Type Unit Inner arm moment of Moment of inertia of the inner arm in relation to LREAL kg mm^2 inertia pivot point P1, which is linked with the motor Outer arm mass Mass of the outer arm. If two bars are used, the LREAL kg total mass is required. The mass of the joint can optionally be described as a separate parameter. Link mass Mass of the joint linking the inner and outer arm. LREAL kg Can be used if the mass of the joint is not already included in the outer and inner arms. The mass of the joint linking the gripper plate with the outer arm is not specified here. It can be added to Tcp Mass. TCP mass Mass of the TCP, including gripper plate and LREAL kg gripper. The payload is usually described with a separate parameter. Center stick mass Total mass of the center stick LREAL kg Center stick: moment Moment of inertia of the center stick in relation to LREAL kg mm^2 of inertia the center of gravity (P2) Center stick: center of Length between the gripper plate and the center of LREAL mm mass displacement gravity of the bar First drive torque OID Object ID of the first drive torque (see Drive Torque OTCID [} 58]) If the motors and gear units of all motors behave in a similar way, all drive torques can be represented via an OID. All three parameters refer to the same object ID. Second drive torque Object ID of the second drive torque OTCID OID Third drive torque OID Object ID of the third drive torque OTCID General Parameters for the Kinematics General parameters that apply to any kinematics are described in the following sections: • MCS Offset [} 20], • Spatial reference definition [} 20]. For all kinematics with tool also applies: • Tool Offset OID [} 22]. Prerequisites Target platform Twin CAT function PC or CX (x86 or x64) TF5112 TC3 Kinematic Transformation (Level 3) 6.13 3D-Delta T Type 3 (P_3C3) TF5110 - TF5113 Version: 2.3.4 37
## Page 38

Supported Transformation The 3D-Delta T Type 3 (P_3C3) is structured as shown above. Two arms are directly opposite each other, while the third arm is at an angle of 90 degrees to them. This arm configuration allows two robots of this type to be placed very close together. The machine coordinate system (MCS) is located centrally between the two opposite arms at the height of motors M1 and M3. All motor axes are scaled in degrees and 0° is defined, as shown in the schematic, with the arrow indicating the positive direction of rotation. This applies to all three motors. Kinematics parameters Parameter Description Type Unit Inner arm length 1 and 3 Arm 1, Arm 3: Length from center of rotation to LREAL mm center of rotation of the inner arm (connected directly to the motor) Inner arm length 2 Arm 2: Length from center of rotation to center of LREAL mm rotation of the inner arm (connected directly to the motor) Outer arm length 1 and 3 Arm 1, Arm 3: Length between pivots of the outer LREAL mm arm Outer arm length 2 Arm 2: Length between pivots of the outer arm LREAL mm 38 Version: 2.3.4 TF5110 - TF5113
## Page 39

Supported Transformation Parameter Description Type Unit Displacement of arm 1 Arm 1, Arm 3: The distance between the MCS LREAL mm and 3, Y origin and each motor axis Displacement of arm 2, X Arm 2: The distance between the MCS origin and LREAL mm the motor axis Displacement of arm 2, Z Arm 2: The distance between the MCS origin and LREAL mm the motor axis TCP displacement of arm Arm 1, Arm 3: Length between the center of the LREAL mm 1 and 3 gripper plate and the virtual rotation axes of the outer arm TCP displacement of arm Arm 2: Length between the center of the gripper LREAL mm 2 plate and the virtual rotation axis of the outer arm General Parameters for the Kinematics General parameters that apply to any kinematics are described in the following sections: • MCS Offset [} 20], • Spatial reference definition [} 20]. For all kinematics with tool also applies: • Tool Offset OID [} 22]. Requirements Development Environment Target System Twin CAT Function Installation Package Twin CAT V3.1.4024.7 PC or CX (x86 or x64) TF5112 Twin CAT 3 Kinematic Transformation (Level 3) TF5400 Twin CAT 3 Advanced Motion Pack V3.1.10.30 TF5110 - TF5113 Version: 2.3.4 39
## Page 40

Supported Transformation 6.14 3D-Delta Y Type 4 (P_3C4) The 3D-Delta Y Type 4 (P_3C4) is structured as shown in the diagram above. All three arms are suspended at the same level. Unlike 3D-Delta Type 1 (P_3C) [} 34], the angle between arms 2 and 3 can be specified. The machine coordinate system (MCS) is located in the middle between the arms at the height of the motors. All motor axes are scaled in degrees and 0° is defined, as shown in the diagram, with the arrow indicating the positive direction of rotation. This applies to all three motors. Kinematics parameters Parameter Description Type Unit Inner arm length 1 Arm 1: Length from pivot point to pivot point LREAL mm of the inner arm (directly connected to the motor) Outer arm length 1 Arm 1: Length from pivot point to pivot point LREAL mm of the outer arm Joint displacement of arm Arm 1: The distance from the MCS origin to LREAL mm 1 the motor axis TCP displacement of arm Arm 1: Length between the center of the LREAL mm 1 gripper plate and the virtual rotation axes of the outer arm 40 Version: 2.3.4 TF5110 - TF5113
## Page 41

Supported Transformation Parameter Description Type Unit Enclosed angle Angle between arms 2 and 3 LREAL Inner arm length 2 and 3 Arm 2, arm 3: Length from pivot point to pivot LREAL mm point of the inner arm (directly connected to the motor) Outer arm length 2 and 3 Arm 2, arm 3: Length from pivot point to pivot LREAL mm point of the outer arm Joint displacement of arm Arm 2, arm 3: The distance from the MCS LREAL mm 2 and 3 origin to the motor axis TCP displacement of arm Arm 2, arm 3: Length from the center of the LREAL mm 2 and 3 gripper plate to the virtual axes of rotation of the outer arm General Parameters for the Kinematics General parameters that apply to any kinematics are described in the following sections: • MCS Offset [} 20], • Spatial reference definition [} 20]. For all kinematics with tool also applies: • Tool Offset OID [} 22]. Prerequisites Installation package Target platform Twin CAT function TF5400 Twin CAT 3 Advanced PC or CX (x86 or x64) TF5112 Twin CAT 3 Kinematic Motion Pack V3.3.57 Transformation (Level 3) 6.15 3D-Tripod Type 1 (P_3Z) TF5110 - TF5113 Version: 2.3.4 41
## Page 42

Supported Transformation The 3D-Tripod Type 1 (P_3Z) is structured as shown in the figure above. All linear axes (ACS) are scaled in mm. Kinematics parameters Parameter Description Type Unit Arm length Arm length from pivot point to pivot point LREAL mm Rail 1 X-position X-position of the 1st rail in relation to the MCS LREAL mm Rail 1 Y-position Y-position of the 1st rail in relation to the MCS LREAL mm Rail 2 X-position X-position of the 2nd rail in relation to the MCS LREAL mm Rail 2 Y-position Y-position of the 2nd rail in relation to the MCS LREAL mm Rail 3 X-position X-position of the 3rd rail in relation to the MCS LREAL mm Rail 3 Y-position Y-position of the 3rd rail in relation to the MCS LREAL mm TCP displacement Length between the center of the gripper plate and the LREAL mm virtual rotation axis of the arm General Parameters for the Kinematics General parameters that apply to any kinematics are described in the following sections: • MCS Offset [} 20], • Spatial reference definition [} 20]. For all kinematics with tool also applies: • Tool Offset OID [} 22]. Requirements Development environment Target platform Twin CAT function Installation package Twin CAT V3.1.4024.24 PC or CX (x86 or x64) TF5112 Twin CAT 3 Kinematic TF5400 Twin CAT 3 Advanced Transformation (Level 3) Motion Pack V3.1.10.66 42 Version: 2.3.4 TF5110 - TF5113
## Page 43

Supported Transformation 6.16 3D-Tripod Type 2 (P_3L) The 3D-Tripod Type 2 (P_3L) is structured as shown in the figure above. All linear axes (ACS) are scaled in millimeters (mm). The 0-position of the axes is only a "virtual" point, which cannot be approached. A positive velocity of the motors moves the tool upwards so that the linear axes cannot reach a negative position. Kinematics parameters Parameter Description Type Unit Arm length Arm length from pivot point to pivot point LREAL mm Rail angle Angle in which the guide rails of the linear motors are LREAL ° mounted. Rail shift Shift of the arm suspension points to the guide rails of LREAL mm the linear motors. Upper cardan length If a cardan joint is used at the upper arm suspension LREAL mm points, this parameter can be used to specify the shift of the two joints within the cardan joint. When using a ball joint, enter length 0. Lower cardan length If a cardan joint is used at the lower arm suspension LREAL mm points, this parameter can be used to specify the shift of the two joints within the cardan joint. When using a ball joint, enter length 0. TCP side length Side length of the virtual triangle in the TCP. LREAL mm TF5110 - TF5113 Version: 2.3.4 43
## Page 44

Supported Transformation General Parameters for the Kinematics General parameters that apply to any kinematics are described in the following sections: • MCS Offset [} 20], • Spatial reference definition [} 20]. For all kinematics with tool also applies: • Tool Offset OID [} 22]. Requirements Development environment Target platform Twin CAT function Installation package Twin CAT V3.1.4024.24 PC or CX (x86 or x64) TF5112 Twin CAT 3 Kinematic TF5400 Twin CAT 3 Advanced Transformation (Level 3) Motion Pack V3.1.10.66 6.17 3D-Cable Kinematics Type 1 (P_3Z) The 3D-Cable Kinematics Type 1 (P_3Z) is structured as shown in the diagram above. • The zero point of the machine coordinate system (MCS) is centered between the three cable suspension points, with the Z-axis pointing downwards. • All motor axes are scaled in mm, the arrow indicating the positive direction. Kinematics parameters Parameter Description Type Unit Side length L1 Distance between suspension points 2 and 3 LREAL mm Side length L2 Distance between suspension points 1 and 3 LREAL mm Side length L3 Distance between suspension points 1 and 2 LREAL mm Roll deflection length Distance between the motor shafts and deflection LREAL mm rollers 44 Version: 2.3.4 TF5110 - TF5113
## Page 45

Supported Transformation General Parameters for the Kinematics General parameters that apply to any kinematics are described in the following sections: • MCS Offset [} 20], • Spatial reference definition [} 20]. For all kinematics with tool also applies: • Tool Offset OID [} 22]. 6.18 3D-Cable Kinematics Type 2 (P_3L) The 3D-Cable Kinematics (P_3L) is structured as shown in the above schematic. The zero point of the machine coordinate system (MCS) can be anywhere in space. The hooks of the cable/ rope are defined starting from the MCS origin. All motor axes are scaled in millimeters, the arrow indicating the positive direction. Parameters for joint hooks Parameter Description Type Unit Hook 1 Hook of the first cable X-shift X-position of Hook 1 in relation to the MCS LREAL mm Y-shift Y-position of Hook 1 in relation to the MCS LREAL mm Z-shift Z-position of Hook 1 in relation to the MCS LREAL mm Hook 2 Hook of the second cable X-shift X-position of Hook 2 in relation to the MCS LREAL mm Y-shift Y-position of Hook 2 in relation to the MCS LREAL mm Z-shift Z-position of Hook 2 in relation to the MCS LREAL mm Hook 3 Hook of the central cable X-shift X-position of Hook 3 in relation to the MCS LREAL mm Y-shift Y-position of Hook 3 in relation to the MCS LREAL mm Z-shift Z-position of Hook 3 in relation to the MCS LREAL mm General Parameters for the Kinematics General parameters that apply to any kinematics are described in the following sections: • MCS Offset [} 20], TF5110 - TF5113 Version: 2.3.4 45
## Page 46

Supported Transformation • Spatial reference definition [} 20]. For all kinematics with tool also applies: • Tool Offset OID [} 22]. Requirements Development Environment Target System Twin CAT Function Installation Package Twin CAT V3.1.4024.7 PC or CX (x86 or x64) TF5112 Twin CAT 3 Kinematic Transformation (Level 3) TF5400 Twin CAT 3 Advanced Motion Pack V3.1.10.30 6.19 3D-Kinematics Type 7 (PXX SZ) The 3D-Kinematics Type 7 (PXX SZ) is structured as shown in the schematic above. The zero point of the machine coordinate system (MCS) can be anywhere in space. The hooks of the three arms are defined starting from the MCS origin. For the definition of the offset, the starting point for the central pillar is the position parallel to the Z-axis of the MCS, so that the fixed length from the central pillar to the suspension of the other two arms is the "central pillar Z-offset". At the end of the central pillar there may also be a rail, whose tip is specified by the "rail offset". All motor axes are scaled in millimeters, the arrow indicating the positive direction. 46 Version: 2.3.4 TF5110 - TF5113
## Page 47

Supported Transformation Parameters Joint Hooks Parameter Description Type Unit Hook 1 Hook of the first arm X-shift X-position of Hook 1 in relation to the MCS LREAL mm Y-shift Y-position of Hook 1 in relation to the MCS LREAL mm Z-shift Z-position of Hook 1 in relation to the MCS LREAL mm Hook 2 Hook of the second arm X-shift X-position of Hook 2 in relation to the MCS LREAL mm Y-shift Y-position of Hook 2 in relation to the MCS LREAL mm Z-shift Z-position of Hook 2 in relation to the MCS LREAL mm Hook Center Hook of the central pillar X-shift X-position of Hook Center in relation to the MCS LREAL mm Y-shift Y-position of Hook Center in relation to the MCS LREAL mm Z-shift Z-position of Hook Center in relation to the MCS LREAL mm Parameters Central Pillar The parameters for the central pillar including the rail are specified in relation to the arm position parallel to the Z-axis. Parameter Description Type Unit X1 offset Distance between the hook of the first arm and the central LREAL mm pillar in the X-direction X2 offset Distance between the hook of the second arm and the LREAL mm central pillar in the X-direction Y1 offset Distance between the hook of the first arm and the central LREAL mm pillar in the Y-direction Y2 offset Distance between the hook of the second arm and the LREAL mm central pillar in the Y-direction Z offset Distance between the hook of the central pillar and the LREAL mm connection of the arms to the central pillar Rail offset X rail offset Distance between the central point of the tip of the central LREAL mm pillar and the tip of the rail in the X-direction Y rail offset Distance between the central point of the tip of the central LREAL mm pillar and the tip of the rail in the Y-direction Z rail offset Distance between the central point of the tip of the central LREAL mm pillar and the tip of the rail in the Z-direction General Parameters for the Kinematics General parameters that apply to any kinematics are described in the following sections: • MCS Offset [} 20], • Spatial reference definition [} 20]. For all kinematics with tool also applies: • Tool Offset OID [} 22]. TF5110 - TF5113 Version: 2.3.4 47
## Page 48

Supported Transformation Requirements Development Environment Target System Twin CAT Function Installation Package Twin CAT V3.1.4024.7 PC or CX (x86 or x64) TF5112 Twin CAT 3 Kinematic Transformation (Level 3) TF5400 Twin CAT 3 Advanced Motion Pack V3.1.10.30 6.20 4D-SCARA (S_CCZC) The 4D-SCARA (Selective Compliance Assembly Robot Arm) Kinematics (S_CCZC) are configured as shown in the diagram above. The motor axes M1, M2 and M4 are scaled in degrees whereat the arrow indicates the positive direction of rotation. The third motor axis M3 is scaled in millimeters. The origin of the MCS is located in the first joint (M1). The X-axis is determined by the SCARA arm, when all rotational motor axes reside at 0°. The extension position of the SCARA arm (all rotary motor axes at position 0°) cannot be reached in cartesian mode because the robot is in a singular position there. It is only possible to drive to these positions in axis mode (Direct Mode). Parameters for the Kinematics Parameter Description Type Unit Inner arm length Length from pivot point to pivot point of the inner LREAL mm arm; this is the arm on the origin side. Outer arm length Length from pivot point to pivot point of the outer LREAL mm arm; this is the arm on the TCP side. Gear coupling Coupling factor between the axes M4 and M3. LREAL mm/° Flange rotation A Rotation angle around the local X-axis. LREAL ° Tool offset OID Object ID of a tool mounted on the kinematics OTCID flange. The flange coordinate system is rotated 180° around the X-axis so that its Z-axis points downwards. General Parameters for the Kinematics General parameters that apply to any kinematics are described in the following sections: • MCS Offset [} 20], • Spatial reference definition [} 20]. For all kinematics with tool also applies: • Tool Offset OID [} 22]. 48 Version: 2.3.4 TF5110 - TF5113
## Page 49

Supported Transformation Requirements Development Environment Target System Twin CAT Function Installation Package Twin CAT V3.1.4018.26 PC or CX (x86 or x64) TF5112 Twin CAT 3 Kinematic TF5400 Twin CAT 3 Advanced Transformation (Level 3) Motion Pack V3.1.6.14 6.21 4D-Kinematics Type 6 (S_XCZC) The 4D-Kinematics Type 6 (S_XCZC) describes a serial kinematic transformation that is structured as shown in schematic above. The motor axes M2 and M4 are scaled in degrees, the positive direction of rotation being in the direction of the arrow. The motor axes M1 and M3 are scaled in millimeters. In relation to the MCS, M1 specifies a movement on the X-axis and M3 a movement on the Z-axis. The origin of the MCS coordinate system is located on the linear axis M1 in joint M2. Moving to singular positions Singular positions, as with this robot type, e.g. M2 = +-90°, cannot be moved to in cartesian mode. It is only possible to drive to these positions in axis mode (Direct Mode). Kinematics parameters Parameter Description Type Unit Arm length Distance between rotary axis M2 and rotary axis M4 LREAL mm Arm length > 0 General Parameters for the Kinematics General parameters that apply to any kinematics are described in the following sections: • MCS Offset [} 20], • Spatial reference definition [} 20]. For all kinematics with tool also applies: • Tool Offset OID [} 22]. TF5110 - TF5113 Version: 2.3.4 49
## Page 50

Supported Transformation Requirements Development Environment Target System Twin CAT Function Installation Package Twin CAT V3.1.4024.7 PC or CX (x86 or x64) TF5112 Twin CAT 3 Kinematic Transformation (Level 3) TF5400 Twin CAT 3 Advanced Motion Pack V3.1.10.30 6.22 4D-Cable-Kinematics (P_4L) The 4D-Cable Kinematics (P_4L) is structured as shown in the above schematic. The zero point of the machine coordinate system (MCS) can be anywhere in space. The hooks of the cable/ rope are defined starting from the MCS origin. All motor axes are scaled in millimeters, the arrow indicating the positive direction. Parameters for joint hooks Parameter Description Type Unit Hook 1 Hook of the first cable X-shift X-position of Hook 1 in relation to the MCS LREAL mm Y-shift Y-position of Hook 1 in relation to the MCS LREAL mm Z-shift Z-position of Hook 1 in relation to the MCS LREAL mm Hook 2 Hook of the second cable X-shift X-position of Hook 2 in relation to the MCS LREAL mm Y-shift Y-position of Hook 2 in relation to the MCS LREAL mm Z-shift Z-position of Hook 2 in relation to the MCS LREAL mm Hook 3 Hook of the third cable X-shift X-position of Hook 3 in relation to the MCS LREAL mm Y-shift Y-position of Hook 3 in relation to the MCS LREAL mm Z-shift Z-position of Hook 3 in relation to the MCS LREAL mm Hook 4 Hook of the fourth cable X-shift X-position of Hook 4 in relation to the MCS LREAL mm 50 Version: 2.3.4 TF5110 - TF5113
## Page 51

Supported Transformation Parameter Description Type Unit Y-shift Y-position of Hook 4 in relation to the MCS LREAL mm Z-shift Z-position of Hook 4 in relation to the MCS LREAL mm TCP Tool Center Point TCP length Distance between the hooks at the TCP along the LREAL mm X-axis TCP width Distance between the hooks at the TCP along the LREAL mm Y-axis General Parameters for the Kinematics General parameters that apply to any kinematics are described in the following sections: • MCS Offset [} 20], • Spatial reference definition [} 20]. For all kinematics with tool also applies: • Tool Offset OID [} 22]. Requirements Development Environment Target System Twin CAT Function Installation Package Twin CAT V3.1.4024.7 PC or CX (x86 or x64) TF5112 Twin CAT 3 Kinematic Transformation (Level 3) TF5400 Twin CAT 3 Advanced Motion Pack V3.1.10.30 6.23 5D-Kinematics Type 2 (XYZab) The 5D-Kinematics Type 2 (XYZab) are configured as shown in the drawing above. The motors M1 to M3 (X, Y, Z) are scaled in millimeters. The motors M4 and M5 are scaled in degrees. The 0° position is the axis position shown in the drawing; the arrows indicate the positive direction of rotation. Difference of Type 2 The 5D-Kinematics Type 2 differ from the 5D-Kinematics Type 3 in the orientation of the positive direction of axis rotation around the motor axes M4 and M5. TF5110 - TF5113 Version: 2.3.4 51
## Page 52

Supported Transformation Parameters for the Kinematics Parameter Description Type Unit Handle D4 Arm length in X-direction between motor axis 4 and LREAL mm motor axis 5 as shown in the drawing. Offset 4 Offset in y-direction between motor axis 4 and TCP. LREAL mm Offset 5 Offset in X-direction between motor axis 5 and TCP. LREAL mm Offset 6 Offset in Z-direction between motor axis 4 and motor LREAL mm axis 5. Tool offset OID Object ID of a tool mounted on the kinematics flange. OTCID The flange coordinate system is rotated 180° around the X-axis so that its Z-axis points downwards. 52 Version: 2.3.4 TF5110 - TF5113
## Page 53

Supported Transformation General Parameters for the Kinematics General parameters that apply to any kinematics are described in the following sections: • MCS Offset [} 20], • Spatial reference definition [} 20]. For all kinematics with tool also applies: • Tool Offset OID [} 22]. Requirements Development Environment Target System Twin CAT Function Installation Package Twin CAT V3.1.4018.26 PC or CX (x86 or x64) TF5113 Twin CAT 3 Kinematic TF5400 Twin CAT 3 Advanced Transformation (Level 4) Motion Pack V3.1.6.14 TF5113 | Twin CAT Kinematic Transformation L4 TF5113 | Twin CAT 3 Kinematic Transformation L4 is subject to legal restrictions and is not included in the TF5400. Advanced Motion Pack workload or included in the TF5400 Twin CAT Advanced Motion Pack Setup from the website. If required, please get in touch with your sales contact. 6.24 5D-Kinematics Type 3 (XYZAB) The 5D-Kinematics Type 3 (XYZAB) are configured as shown in the drawing above. The motors M1 to M3 (X, Y, Z) are scaled in millimeters. The motors M4 and M5 are scaled in degrees. The 0° position is the axis position shown in the drawing; the arrows indicate the positive direction of rotation. Difference of Type 3 The 5D-Kinematics Type 3 differ from the 5D-Kinematics Type 2 in the orientation of the positive direction of axis rotation around the motor axes M4 and M5. Parameters for the Kinematics Parameter Description Type Unit Handle D4 Arm length in X-direction between motor axis 4 and LREAL mm motor axis 5 as shown in the drawing. Offset 4 Offset in y-direction between motor axis 4 and TCP. LREAL mm Offset 5 Offset in X-direction between motor axis 5 and TCP. LREAL mm Offset 6 Offset in Z-direction between motor axis 4 and motor LREAL mm axis 5. TF5110 - TF5113 Version: 2.3.4 53
## Page 54

Supported Transformation Parameter Description Type Unit Tool offset OID Object ID of a tool mounted on the kinematics flange. OTCID The flange coordinate system is rotated 180° around the X-axis so that its Z-axis points downwards. General Parameters for the Kinematics General parameters that apply to any kinematics are described in the following sections: • MCS Offset [} 20], • Spatial reference definition [} 20]. For all kinematics with tool also applies: 54 Version: 2.3.4 TF5110 - TF5113
## Page 55

Supported Transformation • Tool Offset OID [} 22]. Requirements Development Environment Target System Twin CAT Function Installation Package Twin CAT V3.1.4018.26 PC or CX (x86 or x64) TF5113 Twin CAT 3 Kinematic TF5400 Twin CAT 3 Advanced Transformation (Level 4) Motion Pack V3.1.6.14 TF5113 | Twin CAT Kinematic Transformation L4 TF5113 | Twin CAT 3 Kinematic Transformation L4 is subject to legal restrictions and is not included in the TF5400. Advanced Motion Pack workload or included in the TF5400 Twin CAT Advanced Motion Pack Setup from the website. If required, please get in touch with your sales contact. 6.25 6D-Stewart Platform (P_6L) For the kinematic transformation 6D-Stewart Platform (P_6L), a moving platform is supported by six cylinders. The Stewart Platform is a parallel kinematics with six degrees of freedom. The X axis of the machine coordinate system (MCS) points toward the point that is in the center between joints 1 and 2. The zero point in the Z direction is usually slightly above the lower (base) platform and in the plane that is spanned by the joint centers of the anchor points. All joints on a platform are on a circular path and thus have the same distance to the center of the platform. This distance must be specified with R (lower platform) and R (upper platform). lower upper The angle between joints 1 and 2, which is equally between joints 3 and 4 and between joints 5 and 6, is specified with as α (lower platform) and α (upper platform). lower upper The ACS axis positions always refer to the entire cylinder length L. Startup with an ACS axis position equal to 0 is therefore not possible. Kinematics parameters The following parameters are available for Stewart kinematics: TF5110 - TF5113 Version: 2.3.4 55
## Page 56

Supported Transformation Parameter Description Type Unit Flange translation Z Moves the upper level to the surface of the upper LREAL mm platform so that the thickness of the platform is taken into account. Tool offset OID Set the tool elongation. OTCID Lower radius R Radius of the lower platform. Describes the distance LREAL mm lower from the origin in the center of the lower platform to the arm joints of the lower platform. Upper radius R Radius of the upper platform. Describes the distance LREAL mm upper from the origin in the center of the upper platform to the arm joints of the upper platform. Lower angle α The angle α describes the angle between the LREAL ° lower lower anchor points of L1 and L2, L3 and L4, L5 and L6 on the lower platform. Upper angle α The angle α describes the angle between the LREAL ° upper upper anchor points of L1 and L2, L3 and L4, L5 and L6 on the upper platform. General Parameters for the Kinematics General parameters that apply to any kinematics are described in the following sections: • MCS Offset [} 20], • Spatial reference definition [} 20]. For all kinematics with tool also applies: • Tool Offset OID [} 22]. Requirements Development Environment Target System Twin CAT Function Installation Package Twin CAT V3.1.4024.11 PC or CX (x86 or x64) TF5113 Twin CAT 3 Kinematic Transformation (Level 4) TF5400 Twin CAT 3 Advanced Motion Pack V3.1.6.67 TF5113 | Twin CAT Kinematic Transformation L4 TF5113 | Twin CAT 3 Kinematic Transformation L4 is subject to legal restrictions and is not included in the TF5400. Advanced Motion Pack workload or included in the TF5400 Twin CAT Advanced Motion Pack Setup from the website. If required, please get in touch with your sales contact. 56 Version: 2.3.4 TF5110 - TF5113
## Page 57

Supported Transformation 6.26 Six Axis Articulated (S_CBBCBC) The motor axes of the Serial Six Axis Articulated (S_CBBCBC) Kinematics each are referred to in units of degree. The drawings 1. and 2. above show the kinematics with all axes in zero position. The zero positions of the axes M4 and M6 are defined in a way that the machine coordinate system and the flange coordinate system exhibit the same orientation. The drawing 3. shows the axis M3 in 90° position. The MCS origin is located within the intersection of the first kinematic joint M1 with the second kinematic joint M2. It is oriented in a way that joint M2 prescribes a rotation around the Y-axis. The center of M1 delivers the X zero coordinate. The intersection of M1 and M2 delivers the Y zero coordinate. The center of M2 delivers the Z zero coordinate. Singular Positions The positions displayed in figures 1., 2. and 3. cannot be approached in cartesian Mode because the robot resides in a singular position. Approaching these positions is only possible in axis mode (Direct Mode). Configuration Parameters Parameter Description Type Unit MCS offset Static offset to the MCS coordinate frame. X-shift Static X-offset in MCS coordinate frame. LREAL mm Y-shift Static Y-offset in MCS coordinate frame. LREAL mm Z-shift Static Z-offset in MCS coordinate frame. LREAL mm Spatial reference Specification of the spatial reference node. definition . Translation X Translation in X-direction. LREAL mm . Translation Y Translation in Y-direction. LREAL mm . Translation Z Translation in Z-direction. LREAL mm . Rotation 1 Rotation angle 1, its interpretation is set by the LREAL ° rotation convention. . Rotation 2 Rotation angle 2, its interpretation is set by the LREAL ° rotation convention. TF5110 - TF5113 Version: 2.3.4 57
## Page 58

Supported Transformation Parameter Description Type Unit . Rotation 3 Rotation angle 3, its interpretation is set by the LREAL ° rotation convention. . Rotation convention Set the interpretation of the rotation angles. MC. Coord Int erpretation _SO3 . Spatial reference Set the spatial frame of reference, 0x0 refers to OTCID WCS. . Definition direction Set the definition direction. MC. Referenc e Def Dir Parameters for the Kinematics For the Six Axis Articulated Kinematics, a serial six axis kinematic, there are the following joint parameters. Parameter Description Type Unit Arm length L1 Distance between the motor axes M2 and M3. LREAL mm Arm length L2 Distance between the motor axes M3 and M5. LREAL mm Arm length L3 Distance between the motor axis M5 and the flange. LREAL mm Arm offset D1 Distance between the motor axes M1 and M2 in X- LREAL mm direction. Arm offset D2 Distance in Y-direction between the motor axes M1 LREAL mm and M4. Arm offset D3 Distance in X-direction between the motor axes M3 LREAL mm and M5. The sign within the example sketch is positive. General Parameters for the Kinematics General parameters that apply to any kinematics are described in the following sections: • MCS Offset [} 20], • Spatial reference definition [} 20]. For all kinematics with tool also applies: • Tool Offset OID [} 22]. TF5113 | Twin CAT Kinematic Transformation L4 TF5113 | Twin CAT 3 Kinematic Transformation L4 is subject to legal restrictions and is not included in the TF5400. Advanced Motion Pack workload or included in the TF5400 Twin CAT Advanced Motion Pack Setup from the website. If required, please get in touch with your sales contact. 6.27 Drive Torque The drive torque represents the inertia and the efficiency of the motor and gear unit. It is used for the precise computation of the dynamic model. A parameter in the kinematics can be used to assign an object drive torque to a kinematics. Parameter for drive Parameter Description Unit Drive moment of inertia Rotor Moment of inertia of the motor kg mm^2 58 Version: 2.3.4 TF5110 - TF5113
## Page 59

Supported Transformation Gear unit parameters Parameter Description Unit Ratio Gear ratio Gearbox moment of inertia Moment of inertia of the gear unit in relation to the drive kg mm^2 Coulomb friction Represents the kinetic friction coefficient Nm Stokes friction Represents the friction ratio that increases proportionally to Nms the speed Required product level: Level 1 6.28 Tool Offset The user can use the tool offset to link a tool with the flange of the kinematics. Unless specified otherwise in the kinematics, the flange coordinate system is defined such that the orientation of the flange coordinate system matches that of the machine coordinate system MCS, if all axes are at 0. Parameter Description Unit Extension X X-offset of the static tool, which is mounted at the coordinate mm system of the flange of the higher-level transformation Extension Y Y-offset of the static tool, which is mounted at the coordinate mm system of the flange of the higher-level transformation Extension Z Z-offset of the static tool, which is mounted at the coordinate mm system of the flange of the higher-level transformation Creating a tool 1. First, a tool has to be created under the group of the kinematics. TF5110 - TF5113 Version: 2.3.4 59
## Page 60

Supported Transformation 2. The created tool object can be allocated to the kinematics in the parameters via its tool OID. 3. The tool can now be configured via its object parameters. 6.29 Tool Linear The Tool Linear describes a 1D tool, which is mounted at the flange of the kinematics. An additional simulation axis can be used for movement in tool direction. The 1D tool can be used to move the TCP at a certain distance from a workpiece. 60 Version: 2.3.4 TF5110 - TF5113
## Page 61

Supported Transformation Unless specified otherwise in the kinematics, the flange coordinate system is defined such that the orientation of the flange coordinate system matches that of the machine coordinate system, if all axes are at 0. If the axis position of the additional simulation axes is 0, the TCP is at the position of the tool offset (parameter L_init). Parameter Description Type Unit Length offset Tool length LREAL mm Length axis ID Axis ID of the simulation axis; when this axis is LREAL moved, the TCP moves in the direction of the linear tool. To create a tool see Tool Offset [} 59]. 6.30 Coordinate system (Coordinate Frame) The coordinate system supports a translation and a rotation. This transformation can be used to define a user coordinate system (UCS). For a general introduction, see Introduction [} 8]. z' z y' x' y x First the translation is calculated, then the rotation. The order of the rotations affects the orientation of the coordinate system. The roll/pitch/yaw rule described in DIN 9300 is used as default for the rotation sequence. The calculation sequence for the forward transformation is Z, Y', X''. Parameter Description Unit Translation X Shift in x-direction mm Translation Y Shift in y-direction mm Translation Z Shift in z-direction mm Rotation 1 First rotation angle. The interpretation is defined by the ° parameter Rotation Convention. Rotation 2 Second rotation angle. The interpretation is defined by the ° parameter Rotation Convention. Rotation 3 Third rotation angle. The interpretation is defined by the ° parameter Rotation Convention. Rotation convention The rotation convention indicates the order of the axis rotations (parameter Rotation 1-3). The letters (X, Y, Z) from left to right indicate the order of the rotation around the TF5110 - TF5113 Version: 2.3.4 61
## Page 62

Supported Transformation Parameter Description Unit corresponding axes. The number indicates the parameter (Rotation 1-3) for the value parameterization. The translatory shift is always performed before the rotation. Spatial reference The parameter Spatial reference indicates which coordinate system is used as basis for this coordinate system. If the value is set to 0, the WCS is used as basis. To use another coordinate system as starting point for the shift, a further coordinate system object can be created. The object ID of this coordinate system can be selected via the dropdown menu. Definition direction Indicates the direction in which the shift is programmed (from the perspective of the reference system or this coordinate system). 62 Version: 2.3.4 TF5110 - TF5113
## Page 63

Supported Transformation Creating a coordinate system 1. First create the coordinate system under the kinematic group. 2. The created coordinate system object can be defined in the kinematics via the parameter Spatial reference as origin of the MCS of the kinematics. TF5110 - TF5113 Version: 2.3.4 63
## Page 64

Supported Transformation 3. The coordinate system can now be configured via its object parameters. 64 Version: 2.3.4 TF5110 - TF5113
## Page 65

User-specific transformations 7 User-specific transformations In addition to the provided transformations [} 17], own kinematic transformations can also be implemented and integrated as Twin CAT C++ module. Restrictions • The function blocks FB_Kin Calc Trafo [} 82] and FB_Kin Calc Multi Trafo [} 84] cannot be used for user- specific transformations. • An Online Change is only allowed with Twin CAT C++ modules of the project type "Twin CAT 3 Versioned C++ Project". Otherwise, discontinuities may occur on the C++ side. Preparation Beforehand, the development computer must be set up once for the development of Twin CAT C++ modules. Details can be found in the Twin CAT C++ documentation. Development of a Twin CAT C++ module for 2D XC kinematics The following example of 2D XC kinematics shows how to create user-specific kinematics. The kinematics is composed of a linear axis (M1), on which there is a rotation axis (M2) with an arm. The arm length should be adjustable. NOTICE Online Change An Online Change is only allowed with Twin CAT C++ modules of the project type "Twin CAT 3 Versioned C++ Project". Otherwise, discontinuities may occur on the C++ side. Configuring the transformation module in the XAE ü Requirement: An empty Twin CAT project must be located on a development system that is set up for Twin CAT C++ development. TF5110 - TF5113 Version: 2.3.4 65
## Page 66

User-specific transformations 1. Add a Twin CAT C++ project to the empty Twin CAT project. To do this, right-click on the subtree C++ > Add New Item... 2. Select Twin CAT Versioned C++ Project as the project type and assign a name. Confirm the selection with the Add button. 66 Version: 2.3.4 TF5110 - TF5113
## Page 67

User-specific transformations 3. Select Twin CAT Module Class as module type. Confirm the selection with the Add button. 4. Give the module a name in the next step. Confirm the information with the OK button. ð A Twin CAT C++ project with module was created. Adding interfaces and parameters TF5110 - TF5113 Version: 2.3.4 67
## Page 68

User-specific transformations 5. Double-click on the tmc file in the Solution tree to open the TMC Editor to add interfaces and parameters. 6. For a user specific transformation the interface ITc Nc Trafo is required. Open the Choose data type... dialog in the TMC editor via Modules > <Module Name> > Implemented Interfaces > Add new interface (insert). 7. Select "Itc Nc Trafo" and confirm with OK. User-specific transformations can also have parameters with which the transformation can be configured. For the 2D-XC kinematics in the example, the arm length should be adjustable. Adjust arm length 68 Version: 2.3.4 TF5110 - TF5113
## Page 69

User-specific transformations 8. Add a new parameter in the TMC editor via Modules > <Module Name> > Parameters > Add new Parameter (Insert). ð With a double click on the new parameter it can be configured. TF5110 - TF5113 Version: 2.3.4 69
## Page 70

User-specific transformations 9. Configure the adjustable arm length parameter as follows: ð After the changes to the tmc file are completed, the Twin CAT TMC code generator can be executed. Run Twin CAT TMC code generator 70 Version: 2.3.4 TF5110 - TF5113
## Page 71

User-specific transformations 10. Go via the TMC Editor menu or make a right click on the C++ project > Twin CAT TMC Code Generator in the Solution tree. 11. Add the header Tc Nc Kinematics Interfaces.h in the header <Project Name>Interfaces.h. 12. The functions Forward, Backward, Trafo Supported, Get Dimensions have been automatically created at Source Files\<Trafo Name>.cpp, but do not yet contain a valid implementation. In the function Get Dimensions, a check of the number of ACS and MCS axes has to be implemented. HRESULT CMy Trafo::Get Dimensions(ULONG* p Fwd Input, ULONG* p Fwd Output) { HRESULT hr = S_OK; if (p Fwd Input && p Fwd Output) { *p Fwd Input = 2; *p Fwd Output = 2; } else { hr = E_POINTER; //pointer error } return hr; } 13. Twin CAT calls the function Get Dimensions during activation. If required, you can implement additional checks in the function that should be performed during activation. For example, checking user-specific license files. 14. When building the kinematic group (FB_Kin Config Group [} 78]) the function Trafo Supported is called. In addition, it is recommended to call the function also in the functions Forward and Backward. Axis dimensions and parameter values should be checked for validity in the function. TF5110 - TF5113 Version: 2.3.4 71
## Page 72

User-specific transformations HRESULT CMy Trafo::Trafo Supported(Tc Nc Trafo Parameter* p, bool fwd) { HRESULT hr = S_OK; if (p) { if (fwd) { if (p->dim_i != 2 || p->dim_o != 2) { // kinematics transformation error: invalid dimension hr = MAKE_ADS_HRESULT(NCERR_KINTRAFO_INVALIDDIM); } } else { if (p->dim_i != 2 || p->dim_o != 2) { // kinematics transformation error: invalid dimension hr = MAKE_ADS_HRESULT(NCERR_KINTRAFO_INVALIDDIM); } if (p->i[1] > m_Arm Length) { // kinematics transformation error: invalid position hr = MAKE_ADS_HRESULT(NCERR_KINTRAFO_INVALIDAXISPOS); } } } else { hr = E_POINTER; } return hr; } 15. Implement the (position) transformations in the functions Forward and Backward. The parameters “o” and “i” are available for this purpose. Where "i" are always the input values and "o" the output values, the same applies to the Forward function: o[0] = Position of first MCS_axis d_o[0] = Velocity of first MCS_axis dd_o[0] = Acceleration of first MCS_axis i[0] = Position of first ACS_axis d_i[0] = Velocity of first ACS_axis dd_i[0] = Acceleration of first ACS_axis It is not necessary to implement the transformations for velocity and acceleration. At the beginning of both functions the function Trafo Supported should be called to check if the positions are valid. HRESULT CMy Trafo::Forward(Tc Nc Trafo Parameter* p) { HRESULT hr = Trafo Supported(p, true); if (SUCCEEDED(hr)) { if (p->i && p->o) { p->o[0] = p->i[0] + m_Arm Length*cos_((p->i[1])*PI/180); p->o[1] = m_Arm Length * sin_((p->i[1])*PI / 180); } if (p->d_i && p->d_o) { p->d_o[0] = p->d_i[0]; p->d_o[1] = p->d_i[1]; } if (p->dd_i && p->dd_o) { p->dd_o[0] = p->dd_i[0]; p->dd_o[1] = p->dd_i[1]; } } return hr; } 72 Version: 2.3.4 TF5110 - TF5113
## Page 73

User-specific transformations HRESULT CMy Trafo::Backward(Tc Nc Trafo Parameter* p) { HRESULT hr = Trafo Supported(p,false); if (p->i && p->o) { p->o[1] = asin_(p->i[1] / m_Arm Length) * 180 / PI; p->o[0] = (p->i[0] - (cos_(p->o[1] * PI / 180)*m_Arm Length)); } if (p->d_i && p->d_o) { p->d_o[0] = p->d_i[0]; p->d_o[1] = p->d_i[1]; } if (p->dd_i && p->dd_o) { p->dd_o[0] = p->dd_i[0]; p->dd_o[1] = p->dd_i[1]; } return hr; } Creating and publishing the modules 16. Right-click on C++- > User Specific Trafo Project in the Solution tree and select Twin CAT Publish Modules. 17. Check the Build output. There should be no error message here. NC/PTP configuration 18. Create an NC project in the MOTION subtree. TF5110 - TF5113 Version: 2.3.4 73
## Page 74

User-specific transformations 19. Create the required PTP axes. 74 Version: 2.3.4 TF5110 - TF5113
## Page 75

User-specific transformations Creating a transformation 20. Create an additional NC channel (for Kinematic Transformation) in the NC project. 21. Then add the created transformation to the group of the kinematic channel. To do so, right-click on the Group > Add Object(s)... TF5110 - TF5113 Version: 2.3.4 75
## Page 76

User-specific transformations ð The Insert Tc Com Object dialog opens. 22. Select your transformation module and confirm your selection with OK. If you cannot find your module, refresh the view via Reload. 23. Parameterize the object parameters according to the kinematics used. ð The XAE configuration is now complete. ð The transformation can now be activated via the PLC (see PLC library [} 77]). Define a cyclic channel interface in the PLC to address the transformation and link it to the I/O of the kinematic channel. in_st Kin To Plc AT %I* : NCTOPLC_NCICHANNEL_REF; out_st Plc To Kin AT %Q* : PLCTONC_NCICHANNEL_REF; 76 Version: 2.3.4 TF5110 - TF5113
## Page 77

Plc Library 8 Plc Library Function block Description Kinematic Transformation FB_Kin Config Group [} 78] Configures ACS and MCS axes according to the kinematic transformation group and enables cartesian mode or joint mode (ACS). FB_Kin Reset Group [} 80] Resets the kinematic transformation group. F_Kin Get Chn Operation State [} 93] Reads the status of the kinematic transformation group cyclically. F_Kin Get Acs Mcs Axis Ids [} 94] Reads the active ACS and MCS axes of the kinematic group. Transformation calculation FB_Kin Calc Trafo [} 82] Calculates the Kinematic Transformation without link to the axes. FB_Kin Calc Multi Trafo [} 84] Calculates the Kinematic Transformation for several positions. Edit parameters and coordinate systems online FB_Kin Lock Trafo Param [} 89] Locks the parameters of the kinematic transformation group, denies write access. FB_Kin Unlock Trafo Param [} 86] Unlocks the parameters of the kinematic transformation group, enables write access. Extended rotation range FB_Kin Extended Rotation Range [} 90] Saves and restores the rotational state of the kinematic group. FB_Kin Preset Rotation [} 91] Sets the rotational state. Structures and enumerations Name Description ST_Kin Axes [} 95] Structure of the ACS and MCS axes, which form the kinematics E_Kin Status [} 96] Status of the kinematic group (enum) Development environment Target system PLC libraries to include Twin CAT 3 PC or CX (x86, x64) Tc2_Nc Kinematic Transformation Function blocks for compatibility with existing programs Function blocks for compatibility The purpose of the function blocks listed is to ensure compatibility with existing projects. It is not advisable to use these function blocks for new projects. Instead, the equivalent function blocks shown in the table above should be used. Function block Description FB_Kin Check Actual Status [} 98] Reads the status of the kinematic transformation group acyclically TF5110 - TF5113 Version: 2.3.4 77
## Page 78

Plc Library 8.1 Function Blocks 8.1.1 FB_Kin Config Group FB_Kin Config Group b Execute BOOL BOOL b Busy b Cartesian Mode BOOL BOOL b Done ↔ st Axes List Reference To ST_Kin Axes BOOL b Error ↔ st Kin Ref In Reference To NCTOPLC_NCICHANNEL_REF UDINT n Error Id The function block FB_Kin Config Group is used to configure axes according to the kinematic transformation. These are axes for the ACS (joint) and the MCS (Cartesian). The function block takes the ACS and MCS axes defined in the st Axes List and configures them in the kinematic group of st Kin Ref In. Inputs VAR_INPUT b Execute : BOOL; b Cartesian Mode : BOOL; END_VAR Name Type Description b Execute BOOL The command is triggered by a rising edge at this input. b Cartesian Mode BOOL If FALSE, the ACS axes (joint) can be moved directly. If TRUE, the movement described in the MCS axes (Cartesian) is transformed into a movement of the ACS axes (joint). The ACS axes cannot be moved directly. Inputs/outputs VAR_IN_OUT st Axes List : ST_Kin Axes; st Kin Ref In : NCTOPLC_NCICHANNEL_REF; END_VAR Name Type Description st Axes List ST_Kin Axes Determines the ACS and MCS axes included in the configuration. See ST_Kin Axes. st Kin Ref In NCTOPLC_NCICHANNEL_R Determines the kinematic group of the configuration. EF Outputs VAR_OUTPUT b Busy : BOOL; b Done : BOOL; b Error : BOOL; n Error Id : UDINT; END_VAR Name Type Description b Busy BOOL The output becomes TRUE when the command is started with b Execute and remains TRUE as long as the function block executes the command. While b Busy is TRUE, no new command is accepted at the inputs. If b Busy becomes FALSE again, the function block is ready for a new command. At the same time one of the outputs b Done or b Error is set. b Done BOOL The output becomes TRUE when the command was executed successfully. 78 Version: 2.3.4 TF5110 - TF5113
## Page 79

Plc Library Name Type Description b Error BOOL The output b Error is set to TRUE, if an error occurred during the command execution. n Error Id UDINT Contains the command-specific error code of the most recently executed command. Details of the error code can be found in the ADS error documentation or in the NC error documentation (error codes from 0x4000). Sample VAR io_X : AXIS_REF; io_Y : AXIS_REF; io_Z : AXIS_REF; io_M1 : AXIS_REF; io_M2 : AXIS_REF; io_M3 : AXIS_REF; in_st Kin To Plc AT %I* : NCTOPLC_NCICHANNEL_REF; fb Config Kin Group : FB_Kin Config Group; st Axes Config : ST_Kin Axes; b All Axes Ready : BOOL; b Execute Config Kin Group: BOOL; b User Config Kin Group : BOOL; b User Cartesian Mode : BOOL := TRUE; (*true: cartesian mode - false: direct mode (without transformation) *) END_VAR (* read the IDs from the cyclic axis interface so the axes can mapped later to the kinematic group *) st Axes Config.n Axis Ids Acs[1] := io_M1. Nc To Plc. Axis Id; st Axes Config.n Axis Ids Acs[2] := io_M2. Nc To Plc. Axis Id; st Axes Config.n Axis Ids Acs[3] := io_M3. Nc To Plc. Axis Id; st Axes Config.n Axis Ids Mcs[1] := io_X. Nc To Plc. Axis Id; st Axes Config.n Axis Ids Mcs[2] := io_Y. Nc To Plc. Axis Id; st Axes Config.n Axis Ids Mcs[3] := io_Z. Nc To Plc. Axis Id; IF b All Axes Ready AND b User Config Kin Group THEN b Execute Config Kin Group := TRUE; ELSE b Execute Config Kin Group := FALSE; END_IF fb Config Kin Group( b Execute := b Execute Config Kin Group , b Cartesian Mode := b User Cartesian Mode , st Axes List := st Axes Config, st Kin Ref In := in_st Kin To Plc ); TF5110 - TF5113 Version: 2.3.4 79
## Page 80

Plc Library State of the kinematic group Enable configuration The ACS axes must be enabled through MC_Power, to ensure that the state can reach the value Kin Status_Ready. If the ACS axes are not enabled, enable the axes and then call up FB_Kin Config Group or FB_Kin Reset Group. 8.1.2 FB_Kin Reset Group FB_Kin Reset Group b Execute BOOL BOOL b Busy n Itp Channel Id UDINT BOOL b Done ↔ st Kin Ref In Reference To NCTOPLC_NCICHANNEL_REF BOOL b Error ↔ st Axes List Reference To ST_Kin Axes UDINT n Error Id The kinematics group is reset with the function block FB_Kin Reset Group. All ACS and MCS axes are reset. In addition, the input n Itp Channel Id can be used for specifying the corresponding interpolation channel. The channel is reset, if the n Itp Channel Id is not 0. When all axes are enabled and the group was in Cartesian mode, the group returns to state Kin Status_Ready. If the group was not in Cartesian mode, the group returns to state Kin Status_Empty. If the axes are not enabled, the group remains in state Kin Status_Empty. Inputs VAR_INPUT b Execute : BOOL; n Itp Channel Id : UDINT; END_VAR Name Type Description b Execute BOOL The command is triggered by a rising edge at this input. 80 Version: 2.3.4 TF5110 - TF5113
## Page 81

Plc Library Name Type Description n Itp Channel Id UDINT ID of the corresponding interpolation channel. If the input is not 0, the corresponding interpolation channel is reset. Inputs/outputs VAR_IN_OUT st Axes List : ST_Kin Axes; st Kin Ref In : NCTOPLC_NCICHANNEL_REF; END_VAR Name Type Description st Axes List ST_Kin Axes Determines the ACS and MCS axes included in the configuration. See ST_Kin Axes. st Kin Ref In NCTOPLC_NCICHANNEL_R Determines the kinematic group of the configuration. EF Outputs VAR_OUTPUT b Busy : BOOL; b Done : BOOL; b Error : BOOL; n Error Id : UDINT; END_VAR Name Type Description b Busy BOOL The output becomes TRUE when the command is started with b Execute and remains TRUE as long as the function block executes the command. While b Busy is TRUE, no new command is accepted at the inputs. If b Busy becomes FALSE again, the function block is ready for a new command. At the same time one of the outputs b Done or b Error is set. b Done BOOL The output becomes TRUE when the command was executed successfully. b Error BOOL The output b Error is set to TRUE, if an error occurred during the command execution. n Error Id UDINT Contains the command-specific error code of the most recently executed command. Details of the error code can be found in the ADS error documentation or in the NC error documentation (error codes from 0x4000). Sample VAR fb FB_Reset Kin Group : FB_Kin Reset Group; st Axes Config : st Axes Config; in_st Kin To Plc AT %I* : NCTOPLC_NCICHANNEL_REF; END_VAR fb FB_Reset Kin Group( b Execute := TRUE, n Itp Channel Id := 3, st Kin Ref In := in_st Kin To Plc, st Axes List := st Axes Config, b Busy=> , b Done=> , b Error=> , n Error Id=> ); TF5110 - TF5113 Version: 2.3.4 81
## Page 82

Plc Library State of the kinematic group 8.1.3 FB_Kin Calc Trafo FB_Kin Calc Trafo b Execute BOOL BOOL b Busy b Forward BOOL BOOL b Done oid Trafo UDINT BOOL b Error ↔ st Axes Pos In LREAL UDINT n Error Id ↔ st Axes Pos Out LREAL ↔ u Meta Info In Reference To U_Kin Meta Info ↔ u Meta Info Out Reference To U_Kin Meta Info The function block FB_Kin Calc Trafo is used to calculate the forward or backward transformation, even if no kinematic group has been created with FB_Kin Config Group [} 78]. Inputs VAR_INPUT b Execute : BOOL; b Forward : BOOL; oid Trafo : UDINT; END_VAR Name Type Description b Execute BOOL The command is triggered by a rising edge at this input. b Forward BOOL Determines whether the forward or backward transformation is calculated. oid Trafo UDINT Object ID of the kinematic transformation object. See sample below. 82 Version: 2.3.4 TF5110 - TF5113
## Page 83

Plc Library Inputs/outputs VAR_IN_OUT st Axes Pos In : ARRAY[1..8] OF LREAL; st Axes Pos Out : ARRAY[1..8] OF LREAL; u Meta Info In : U_Kin Meta Info; u Meta Info Out : U_Kin Meta Info; END_VAR Name Type Description st Axes Pos In ARRAY[1..8] OF LREAL Array containing the input positions of the transformation. For the calculation of a forward transformation they represent the joint positions. For the calculation of a backward transformation they represent the Cartesian axis positions. st Axes Pos Out ARRAY[1..8] OF LREAL Array containing the result positions of the transformation. For the calculation of a forward transformation they represent the Cartesian axis positions. For the calculation of a backward transformation they represent the joint positions. u Meta Info In U_Kin Meta Info [} 97] In cases where different robot configurations lead to a solution, the preferred solution can be selected (see sample [} 83]). For kinematics in which this parameter is not required, a dummy variable can be assigned to this input. u Meta Info Out U_Kin Meta Info [} 97] If different solutions are possible for a transformation, the solution that was found is specified. For kinematics in which this parameter is not required, a dummy variable can be assigned to this input. Outputs VAR_OUTPUT b Busy : BOOL; b Done : BOOL; b Error : BOOL; n Error Id : UDINT; END_VAR Name Type Description b Busy BOOL The output becomes TRUE when the command is started with b Execute and remains TRUE as long as the function block executes the command. While b Busy is TRUE, no new command is accepted at the inputs. If b Busy becomes FALSE again, the function block is ready for a new command. At the same time one of the outputs b Done or b Error is set. b Done BOOL The output becomes TRUE when the command was executed successfully. b Error BOOL The output b Error is set to TRUE, if an error occurred during the command execution. n Error Id UDINT Contains the command-specific error code of the most recently executed command. Details of the error code can be found in the ADS error documentation or in the NC error documentation (error codes from 0x4000). Sample The object ID of the transformation is shown in the transformation object under the kinematic channel. SCARA transformation [} 48] - sample object ID TF5110 - TF5113 Version: 2.3.4 83
## Page 84

Plc Library VAR fb Kin Calc Trafo : FB_Kin Calc Trafo; st Axes Pos In : ARRAY[1..8] OF LREAL; st Axes Pos Out : ARRAY[1..8] OF LREAL; b User Execute : BOOL; b User Calc Fwd Trafo : BOOL; u Scara Meta Info In : U_Kin Meta Info; u Scara Meta Info Out : U_Kin Meta Info; END_VAR u Scara Meta Info In.e Scara := E_Kin Meta Info Scara.scara Left Arm; fb Kin Calc Trafo( b Execute := b User Execute, b Forward := b User Calc Fwd Trafo, oid Trafo := 16#01010070, st Axes Pos In := st Axes Pos In, st Axes Pos Out := st Axes Pos Out, u Meta Info In:= u Scara Meta Info In , u Meta Info Out:= u Scara Meta Info Out, b Busy=> , b Done=> , b Error=> , n Error Id=> ); 8.1.4 FB_Kin Calc Multi Trafo FB_Kin Calc Multi Trafo b Execute BOOL BOOL b Busy b Forward BOOL BOOL b Done oid Trafo UDINT BOOL b Error p Data In Pointer To BYTE UDINT n Error Id n Size In UDINT p Data Out Pointer To BYTE n Size Out UDINT The function block FB_Kin Calc Multi Trafo is used to calculate the forward or backward transformation for several positions, even if no kinematic group has been created with FB_Kin Config Group [} 78]. Alternatively, the function block FB_Kin Calc Trafo [} 82] can be used to calculate the kinematic transformations individually. Inputs VAR_INPUT b Execute : BOOL; b Forward : BOOL; oid Trafo : UDINT; p Data In : Pointer to BYTE; n Size In : UDINT; 84 Version: 2.3.4 TF5110 - TF5113
## Page 85

Plc Library p Data Out : Pointer to BYTE; n Size Out : UDINT; END_VAR Name Type Description b Execute BOOL The command is triggered by a rising edge at this input. b Forward BOOL Determines whether the forward or backward transformation is calculated. oid Trafo UDINT Object ID of the kinematic transformation object to be calculated. p Data In POINTER TO BYTE Pointer to the input data, consisting of an instance of ST_Kin Multi Trafo Header [} 97] and an array of input positions. For the calculation of a forward transformation they represent the joint positions. For the calculation of a backward transformation they represent the Cartesian axis positions. n Size In UDINT Size of the input data to which p Data In points p Data Out POINTER TO BYTE Pointer to the output data. n Size Out UDINT Size of the output data to which p Data Out points. Outputs VAR_OUTPUT b Busy : BOOL; b Done : BOOL; b Error : BOOL; n Error Id : UDINT; END_VAR Name Type Description b Busy BOOL The output becomes TRUE when the command is started with b Execute and remains TRUE as long as the function block executes the command. While b Busy is TRUE, no new command is accepted at the inputs. If b Busy becomes FALSE again, the function block is ready for a new command. At the same time one of the outputs b Done or b Error is set. b Done BOOL The output becomes TRUE when the command was executed successfully. b Error BOOL The output b Error is set to TRUE, if an error occurred during the command execution. n Error Id UDINT Contains the command-specific error code of the most recently executed command. Details of the error code can be found in the ADS error documentation or in the NC error documentation (error codes from 0x4000). Sample ST_Kin Calc Multi Trafo In TYPE ST_Kin Calc Multi Trafo In : STRUCT hdr : ST_Kin Multi Trafo Header; f Pos : ARRAY[1..2] OF ARRAY[1..4] OF LREAL; END_STRUCT END_TYPE ST_Kin Calc Multi Trafo Out TYPE ST_Kin Calc Multi Trafo Out : STRUCT f Pos : ARRAY[1..2] OF ARRAY[1..4] OF LREAL; f Meta Info : ARRAY[1..2] OF U_Kin Meta Info; END_STRUCT END_TYPE TF5110 - TF5113 Version: 2.3.4 85
## Page 86

Plc Library MAIN PROGRAM MAIN VAR {attribute 'Tc Init Symbol'} oid Kinematic: OTCID; n State: UDINT := 0; fb Kin Calc Multi Trafo : FB_Kin Calc Multi Trafo; st Kin Calc Multi In : ST_Kin Calc Multi Trafo In; st Kin Calc Multi Out : ST_Kin Calc Multi Trafo Out; END_VAR CASE n State OF 0: // Header for Multi Trafo st Kin Calc Multi In.hdr.n Columns In := 4; st Kin Calc Multi In.hdr.n Columns Out := 4; st Kin Calc Multi In.hdr.n Lines := 2; st Kin Calc Multi In.hdr.u Meta Info.e Scara := E_Kin Meta Info Scara.scara Left Arm; st Kin Calc Multi In.hdr.b Get Meta Info := TRUE; // Positions st Kin Calc Multi In[1][1]:=0; st Kin Calc Multi In[1][2]:=90; st Kin Calc Multi In[1][3]:=0; st Kin Calc Multi In[1][4]:=0; st Kin Calc Multi In[2][1]:=0; st Kin Calc Multi In[2][2]:=-90; st Kin Calc Multi In[2][3]:=0; st Kin Calc Multi In[2][4]:=0; n State := n State + 10; 10: fb Kin Calc Multi Trafo( b Execute := TRUE, b Forward := TRUE, oid Trafo := oid Kinematic, p Data In := ADR(st Kin Calc Multi In), n Size In := SIZEOF(st Kin Calc Multi In), p Data Out := ADR(st Kin Calc Multi Out), n Size Out := SIZEOF(st Kin Calc Multi Out) ); IF NOT fb Kin Calc Multi Trafo.b Busy THEN fb Kin Calc Multi Trafo(b Execute:= FALSE, b Forward:= TRUE, oid Trafo:= oid Kinematic, p Data In:=ADR(st Kin Calc Multi In), n Size In:= SIZEOF(st Kin Calc Multi In), p Data Out:=ADR(st Kin Calc Multi Out), n Size Out:= SIZEOF(st Kin Calc Multi Out) ); n State := n State + 10; END_IF END_CASE System requirements Development environment Target system PLC libraries to include Advanced Motion Pack V3.1.10.51 PC or CX (x64) Tc2_Nc Kinematic Transformation 8.1.5 FB_Kin Unlock Trafo Param FB_Kin Unlock Trafo Param b Execute BOOL BOOL b Busy oid Trafo UDINT BOOL b Done BOOL b Error UDINT n Error Id The function block FB_Kin Unlock Trafo Param is used to unlock transformation parameters that have an influence on the position so that these can be written. 86 Version: 2.3.4 TF5110 - TF5113
## Page 87

Plc Library Once the kinematic parameters have been unlocked, the PLC has write access via ADSWRITE. The required index group is the object ID and the index offset is the parameter ID. The written parameters are not persistent. Parameters that have no influence on the position (e.g. torques and masses) can be written without calling FB_Kin Unlock Trafo Param. CAUTION Changing the parameters can lead to discontinuities. Please note that utmost caution is required. Redefinition of kinematic parameters can lead to position setpoint step changes in the kinematic chain. After kinematic parameters have been written, writing with FB_Lock Trafo Param can be locked again. Inputs VAR_INPUT b Execute : BOOL; oid Trafo : UDINT; END_VAR Name Type Description b Execute BOOL The command is triggered by a rising edge at this input. oid Trafo UDINT Object ID of the kinematic transformation object. See sample below. Outputs VAR_OUTPUT b Busy : BOOL; b Done : BOOL; b Error : BOOL; n Error Id : UDINT; END_VAR Name Type Description b Busy BOOL The output becomes TRUE when the command is started with b Execute and remains TRUE as long as the function block executes the command. While b Busy is TRUE, no new command is accepted at the inputs. If b Busy becomes FALSE again, the function block is ready for a new command. At the same time one of the outputs b Done or b Error is set. b Done BOOL The output becomes TRUE when the command was executed successfully. b Error BOOL The output b Error is set to TRUE, if an error occurred during the command execution. n Error Id UDINT Contains the command-specific error code of the most recently executed command. Details of the error code can be found in the ADS error documentation or in the NC error documentation (error codes from 0x4000). Sample The object ID and parameter ID required for enabling a transformation parameter and for writing a corresponding new value can be read from the transformation object in the XAE. TF5110 - TF5113 Version: 2.3.4 87
## Page 88

Plc Library VAR b User Execute Unlock : BOOL; fb FB_Unlock Trafo Param : FB_Kin Unlock Trafo Param; b User Execute Write Param : BOOL; fb ADSWRITE : ADSWRITE; oid Trafo : UDINT := 16#01010170; (*Trafo object id*) pid Trafo : UDINT := 16#05010020; (*parameter id*) f Param Value : LREAL; END_VAR fb FB_Unlock Trafo Param( b Execute := b User Execute Unlock, oid Trafo := oid Trafo, b Busy=>, b Done=>, b Error=>, n Error Id=> ); (*After unlocking new parameter value can be written*) fb ADSWRITE( NETID:='' , PORT:= AMSPORT_R0_NCSAF, IDXGRP:=oid Trafo , IDXOFFS:= pid Trafo, LEN:=SIZEOF(f Param Value) , SRCADDR:= ADR(f Param Value), WRITE:=b User Execute Write Param , TMOUT:= , BUSY=> , ERR=> , ERRID=> ); 88 Version: 2.3.4 TF5110 - TF5113
## Page 89

Plc Library 8.1.6 FB_Kin Lock Trafo Param FB_Kin Lock Trafo Param b Execute BOOL BOOL b Busy oid Trafo UDINT BOOL b Done BOOL b Error UDINT n Error Id Once the transformation parameters have been modified with the aid of FB_Kin Unlock Trafo Param [} 86], the function block FB_Kin Lock Trafo Param locks the transformation parameters again, so that write access is no longer possible. Inputs VAR_INPUT b Execute : BOOL; oid Trafo : UDINT; END_VAR Name Type Description b Execute BOOL The command is triggered by a rising edge at this input. oid Trafo UDINT Object ID of the kinematic transformation object. See sample below. Outputs VAR_OUTPUT b Busy : BOOL; b Done : BOOL; b Error : BOOL; n Error Id : UDINT; END_VAR Name Type Description b Busy BOOL The output becomes TRUE when the command is started with b Execute and remains TRUE as long as the function block executes the command. While b Busy is TRUE, no new command is accepted at the inputs. If b Busy becomes FALSE again, the function block is ready for a new command. At the same time one of the outputs b Done or b Error is set. b Done BOOL The output becomes TRUE when the command was executed successfully. b Error BOOL The output b Error is set to TRUE, if an error occurred during the command execution. n Error Id UDINT Contains the command-specific error code of the most recently executed command. Details of the error code can be found in the ADS error documentation or in the NC error documentation (error codes from 0x4000). Sample SCARA transformation - sample object ID TF5110 - TF5113 Version: 2.3.4 89
## Page 90

Plc Library VAR b User Execute : BOOL; fb FB_Lock Trafo Param : FB_Kin Lock Trafo Param; oid Trafo : UDINT := 16#01010070; (*Trafo object id*) END_VAR fb FB_Lock Trafo Param( b Execute := b User Execute, oid Trafo := oid Trafo, b Busy=>, b Done=>, b Error=>, n Error Id=> ); 8.1.7 FB_Kin Extended Rotation Range FB_Kin Extended Rotation Range b Execute BOOL BOOL b Busy oid Trafo UDINT BOOL b Done b Activate BOOL BOOL b Error UDINT n Error Id Extended rotation range ü For a unique solution the standard rotation range is limited to: a)Rotation1: -180 to 180 degrees, b)Rotation2: -90 to 90 degrees, c)Rotation3: -180 to 180 degrees. ð In some 6-axis applications it is desirable to be able to rotate beyond this rotation range. The function blocks FB_Kin Extended Rotation Range and FB_Kin Preset Rotation enable the rotational state to be extended, saved and restored beyond the default values. The function block FB_Kin Extended Rotation Range is used to save and restore the rotation state of the kinematic group. If the function block is executed with b Activate:=TRUE, the rotational state is saved until the kinematic group is resolved. If the kinematic group is subsequently built or reset, the saved rotational state is restored. If the rotation deviates significantly (>10.0 degrees per axis), the saved rotational state is not restored and FB_Kin Config Group or FB_Kin Reset Group fail with error 0x815D. If the function block is executed with b Activate:=FALSE, the rotational state is not saved or restored (default behavior). 90 Version: 2.3.4 TF5110 - TF5113
## Page 91

Plc Library Inputs VAR_INPUT b Execute : BOOL; oid Trafo : UDINT; b Activate : BOOL; END_VAR Name Type Description b Execute BOOL The command is executed with a rising edge. oid Trafo UDINT Object ID (OTCID) of the kinematic transformation object. See sample below. b Activate BOOL If set to TRUE, the extended rotation range is activated. Outputs VAR_OUTPUT b Busy : BOOL; b Done : BOOL; b Error : BOOL; n Error Id : UDINT; END_VAR Name Type Description b Busy BOOL The output becomes TRUE when the command is started with b Execute and remains TRUE as long as the function block executes the command. While b Busy is TRUE, no new command is accepted at the inputs. If b Busy becomes FALSE again, the function block is ready for a new command. At the same time one of the outputs b Done or b Error is set. b Done BOOL The output becomes TRUE when the command was executed successfully. b Error BOOL The output b Error is set to TRUE, if an error occurred during the command execution. n Error Id UDINT Contains the command-specific error code of the most recently executed command. Details of the error code can be found in the ADS error documentation or in the NC error documentation (error codes from 0x4000). Requirements Development environment Target platform PLC libraries to include Twin CAT V3.1.4024.7 PC or CX (x86 or x64) Tc2_Kinematic Transformation (V3.2.7.3 or later) Advanced Motion Pack V3.1.10.1 8.1.8 FB_Kin Preset Rotation FB_Kin Preset Rotation b Execute BOOL BOOL b Busy oid Trafo UDINT BOOL b Done ↔ st Rotation LREAL BOOL b Error UDINT n Error Id The function block FB_Kin Preset Rotation is used to set the rotational state. The rotational state is not persistent and must be reset after a Twin CAT restart or if a path is started after an ACS axis movement (direct mode). TF5110 - TF5113 Version: 2.3.4 91
## Page 92

Plc Library Extended rotation range ü For a unique solution the standard rotation range is limited to: a)Rotation1: -180 to 180 degrees, b)Rotation2: -90 to 90 degrees, c)Rotation3: -180 to 180 degrees. ð In some 6-axis applications it is desirable to be able to rotate beyond this rotation range. The function blocks FB_Kin Extended Rotation Range and FB_Kin Preset Rotation enable the rotational state to be extended, saved and restored beyond the default values. Inputs VAR_INPUT b Execute : BOOL; oid Trafo : UDINT; st Rotation : ARRAY[1..3] OF LREAL; END_VAR Name Type Description b Execute BOOL The command is executed with a rising edge. oid Trafo UDINT Object ID (OTCID) of the kinematic transformation object. Example: Equivalent rotations (same tool orientation) Rotation1:= -180 Rotation1:= -180 Rotation2:= 45 Rotation2:= 45 Rotation3:= 157.95 Rotation3:= -202.05 FB_Kin Preset Rotation must be used before FB_Kin Config Group or FB_Kin Calc Trafo perform the forward transformation. To use the extended rotation range with FB_Kin Calc Trafo(b Forward:=TRUE) without a kinematic group, the meta information u Meta Info.a Data[4] := 1 must be set. Inputs/outputs VAR_IN_OUT st Rotation : ARRAY[1..3] OF LREAL; END_VAR Name Type Description st Rotation ARRAY[1..3] OF Presetting of MCS Rotation1, Rotation2 and Rotation3 LREAL Outputs VAR_OUTPUT b Busy : BOOL; b Done : BOOL; b Error : BOOL; n Error Id : UDINT; END_VAR Name Type Description b Busy BOOL The output becomes TRUE when the command is started with b Execute and remains TRUE as long as the function block executes the command. While b Busy is TRUE, no new command is accepted at the inputs. If b Busy 92 Version: 2.3.4 TF5110 - TF5113
## Page 93

Plc Library Name Type Description becomes FALSE again, the function block is ready for a new command. At the same time one of the outputs b Done or b Error is set. b Done BOOL The output becomes TRUE when the command was executed successfully. b Error BOOL The output b Error is set to TRUE, if an error occurred during the command execution. n Error Id UDINT Contains the command-specific error code of the most recently executed command. Details of the error code can be found in the ADS error documentation or in the NC error documentation (error codes from 0x4000). Requirements Development environment Target platform PLC libraries to include Twin CAT V3.1.4024.7 PC or CX (x86 or x64) Tc2_Kinematic Transformation (V3.2.7.3 or later) Advanced Motion Pack V3.1.10.1 8.2 Functions 8.2.1 F_Kin Get Chn Operation State This function returns the operating state of the kinematic channel. Function F_Kin Get Chn Operation State : E_KINSTATUS VAR_IN_OUT st Kin Ref In : NCTOPLC_NCICHANNEL_REF END_VAR Name Type Description st Kin Ref In NCTOPLC_NCICHANNEL_REF Determines the kinematic group of the configuration. Return value E_KINSTATUS [} 96]: State of the kinematic channel (see below). If an invalid version of the cyclic interface is used, Kin Status_Invalid Itf Version is returned. Sample VAR st Kin Ref In AT %I* : NCTOPLC_NCICHANNEL_REF; n Err Id : UDINT; e Kin Operation State : E_KINSTATUS; END_VAR IF F_Kin Get Chn Operation State (st Kin Ref In)<> Kin Status_Invalid Itf Version THEN e Kin Operation State := F_Kin Get Chn Operation State (st Kin Ref In); ELSE n Err Id := F_Kin Get Chn Operation State (st Kin Ref In); END_IF TF5110 - TF5113 Version: 2.3.4 93
## Page 94

Plc Library 8.2.2 F_Kin Get Acs Mcs Axis Ids This function reads the configured ACS and MCS axes of the cyclic interface. The IDs are written to st Axes List. FUNCTION F_Kin Get Acs Mcs Axis Ids : UDINT VAR_IN_OUT st Axes List : ST_Kin Axes; st Kin Ref In : NCTOPLC_NCICHANNEL_REF; END_VAR Name Type Description st Axes List ST_Kin Axes List of axis IDs for the axis coordinate system (ACS) and the machine coordinate system (MCS). st Kin Ref In NCTOPLC_NCICHANNEL_REF The structure of the cyclic channel interface between the kinematic channel and the PLC. This structure is only accessed for reading. Return value UDINT: error code Sample VAR st Axes List : ST_Kin Axes; st Kin Ref In AT %I* : NCTOPLC_NCICHANNEL_REF; n Err Id : UDINT; END_VAR n Err Id := F_Kin Get Acs Mcs Axis Ids (st Axes List, st Kin Ref In); IF n Err Id=0 THEN ;(*Axes List is valid*) END_IF 8.2.3 F_Kin Axes In Tolerance The function block F_Kin Axes In Tolerance compares two arrays element by element. The function returns TRUE if the difference between the respective array elements is within the expected tolerance. Inputs VAR_INPUT st Axes Pos In1 : ARRAY[1..8] OF LREAL; st Axes Pos In2 : ARRAY[1..8] OF LREAL; st Axes Tolerance : ARRAY[1..8] OF LREAL; END_VAR 94 Version: 2.3.4 TF5110 - TF5113
## Page 95

Plc Library Name Type Description st Axes Pos In1 ARRAY[1..8] OF LREAL First array. This is compared with the second array. st Axes Pos In2 ARRAY[1..8] OF LREAL Second array. This is compared with the first array. st Axes Tolerance ARRAY[1..8] OF LREAL Contains the tolerance for each array element to be compared. Return value BOOL: The function returns TRUE if the difference between the respective array elements is within the expected tolerance. Requirements Development environment Target platform PLC libraries to include Twin CAT V3.1.4024.7 PC or CX (x86 or x64) Tc2_Kinematic Transformation (V3.2.7.3 or later) Advanced Motion Pack V3.1.10.1 8.3 Datatypes 8.3.1 ST_Kin Axes This structure defines the axes, which form a kinematic system. TYPE ST_Kin Axes : STRUCT n Axis Ids Mcs: ARRAY[1..8] OF DWORD; n Axis Ids Acs: ARRAY[1..8] OF DWORD; END_STRUCT END_TYPE Name Type Description n Axis Ids Mcs ARRAY[1..8] OF DWORD List of axis IDs of the axes that form the MCS. Usually, the first three array elements specify the Cartesian axes (X,Y,Z), the subsequent array elements specify the rotational axes. n Axis Ids Acs ARRAY[1..8] OF DWORD List of axis IDs of the axes that form the ACS. Sample VAR st Axes Config : ST_Kin Axes; io_X : AXIS_REF; io_Y : AXIS_REF; io_Z : AXIS_REF; io_M1 : AXIS_REF; io_M2 : AXIS_REF; io_M3 : AXIS_REF; END_VAR (* read the IDs from the cyclic axis interface so the axes can mapped later to the kinematic group *) st Axes Config.n Axis Ids Acs[1] := io_M1. Nc To Plc. Axis Id; st Axes Config.n Axis Ids Acs[2] := io_M2. Nc To Plc. Axis Id; st Axes Config.n Axis Ids Acs[3] := io_M3. Nc To Plc. Axis Id; st Axes Config.n Axis Ids Mcs[1] := io_X. Nc To Plc. Axis Id; st Axes Config.n Axis Ids Mcs[2] := io_Y. Nc To Plc. Axis Id; st Axes Config.n Axis Ids Mcs[3] := io_Z. Nc To Plc. Axis Id; TF5110 - TF5113 Version: 2.3.4 95
## Page 96

Plc Library 8.3.2 E_Kin Status This enumeration defines the state of the kinematic group. TYPE E_Kin Status : ( Kin Status_Error, Kin Status_Empty, Kin Status_Unknown, Kin Status_Start Pending, Kin Status_Ready, Kin Status_Invalid Itf Version := 16#4000 ); END_TYPE Name Description Kin Status_Empty ACS axes can be moved. No transformation enabled. Kin Status_Ready MCS axes can be moved. Transformation active. Kin Status_Invalid Itf Version A function or function block is not supported by this version of the cyclic channel interface. An update is required in order to be able to use the function. Enable configuration The ACS axes must be enabled by MC_Power so that the status can reach the value Kin Status_Ready. 8.3.3 Calc Trafo 8.3.3.1 E_Kin Meta Info5DType1 TYPE E_Kin Meta Info5DType1 : ( d5Type1Quad14 := 1, d5Type1Quad23 := 2, 96 Version: 2.3.4 TF5110 - TF5113
## Page 97

Plc Library d5Type1Actual Config := 3 ); END_TYPE 8.3.3.2 E_Kin Meta Info Scara Enum for defining the arm position for 4D-SCARA [} 48] kinematics. TYPE E_Kin Meta Info Scara : ( scara Left Arm := 1, scara Right Arm := 2, scara Actual Config := 3 ); END_TYPE 8.3.3.3 ST_Kin Multi Trafo Header Header of the input data structure for the function block FB_Kin Calc Multi Trafo [} 84]. Type ST_Kin Multi Trafo Header STRUCT n Columns In : UDINT; n Columns Out : UDINT; n Lines : UDINT; b Get Meta Info : BOOL; u Meta Info : U_Kin Meta Info; END_STRUCT END_TYPE Name Type Description n Columns In UDINT Real number of columns in the input array. n Columns Out UDINT Real number of columns in the output array. n Lines UDINT Number of lines to be calculated, may be less than the actual number of lines declared. b Get Meta Info BOOL If TRUE, Meta Infos are also output. Accordingly, memory of the source data structure must be available for this purpose. u Meta Info U_Kin Meta Info [} 97] 8.3.3.4 U_Kin Meta Info Type U_Kin Meta Info UNION a Data : ARRAY[1..4] OF UDINT; e Scara : E_Kin Meta Info Scara; e5d Type1 : E_Kin Meta Info5DType1; END_UNION END_TYPE Name Type Description a Data ARRAY[1..4] OF UDINT e Scara E_Kin Meta Info Scara [} 97] Definition of the arm position with 4D-SCARA [} 48] kinematics. e5d Type1 E_Kin Meta Info5DType1 [} 96] TF5110 - TF5113 Version: 2.3.4 97
## Page 98

Plc Library 8.4 Legacy 8.4.1 FB_Kin Check Actual Status FB_Kin Check Actual Status b Execute BOOL E_Kin Status e Kin Status ↔ st Axes List Reference Reference To ST_Kin Axes BOOL b Busy ↔ st Kin Ref In Reference To NCTOPLC_NCICHANNEL_REF BOOL b Done BOOL b Error UDINT n Error Id Outdated version The sole purpose of the function block is to ensure compatibility with existing projects. For new projects, please use F_Kin Get Chn Operation State [} 93]. This function block needs more than one PLC cycle to read the status of the kinematic channel. To obtain it for each cycle, use F_Kin Get Chn Operation State [} 93]. The function block FB_Kin Check Actual Status returns the status of the kinematic channel. Inputs VAR_INPUT b Execute : BOOL; END_VAR Name Type Description b Execute BOOL The command is triggered by a rising edge at this input. Inputs/outputs VAR_IN_OUT st Axes List : ST_Kin Axes; st Kin Ref In : NCTOPLC_NCICHANNEL_REF; END_VAR Name Type Description st Axes List ST_Kin Axes Determines the ACS and MCS axes included in the configuration. See ST_Kin Axes. st Kin Ref In NCTOPLC_NCICHANNEL_R Determines the kinematic group of the configuration. EF Outputs VAR_OUTPUT e Kin Status : E_KINSTATUS; b Busy : BOOL; b Done : BOOL; b Error : BOOL; n Error Id : UDINT; END_VAR Name Type Description e Kin Status E_KINSTATUS Returns the status of the kinematic channel. See E_KINSTATUS [} 96]. b Busy BOOL The output becomes TRUE when the command is started with b Execute and remains TRUE as long as the function block executes the command. While b Busy is TRUE, no new command is accepted at the inputs. If b Busy becomes FALSE again, the function block is ready for a new command. At the same time one of the outputs b Done or b Error is set. 98 Version: 2.3.4 TF5110 - TF5113
## Page 99

Plc Library Name Type Description b Done BOOL The output becomes TRUE when the command was executed successfully. b Error BOOL The output b Error is set to TRUE, if an error occurred during the command execution. n Error Id UDINT Contains the command-specific error code of the most recently executed command. Details of the error code can be found in the ADS error documentation or in the NC error documentation (error codes from 0x4000). Sample VAR fb FB_Kin Check Actual Status : FB_Kin Check Actual Status; in_st Kin To Plc AT %I* : NCTOPLC_NCICHANNEL_REF; st Axes Config : ST_Kin Axes; e Kin Status : E_KINSTATUS; END_VAR fb FB_Kin Check Actual Status( b Execute := TRUE, st Axes List Reference := st Axes Config, st Kin Ref In := in_st Kin To Plc, e Kin Status => e Kin Status ); State of the kinematic group TF5110 - TF5113 Version: 2.3.4 99
## Page 100

Trademark statements Beckhoff®, ATRO®, Ether CAT®, Ether CAT G®, Ether CAT G10®, Ether CAT P®, MX-System®, Safety over Ether CAT®, TC/BSD®, Twin CAT®, Twin CAT/BSD®, Twin SAFE®, XFC®, XPlanar® and XTS® are registered and licensed trademarks of Beckhoff Automation Gmb H.
## Page 101

More Information: www.beckhoff.com/tf5110 Beckhoff Automation Gmb H & Co. KG Hülshorstweg 20 33415 Verl Germany Phone: +49 5246 9630 info@beckhoff.com www.beckhoff.com
