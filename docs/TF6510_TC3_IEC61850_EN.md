---
title: "TF6510 Twin CAT 3"
product: "TF6510"
category: "Communication"
tags: ["CAT", "TWIN"]
language: "EN"
document_type: "Manual"
version: "1.7.1"
source_pdf: "https://download.beckhoff.com/download/Document/automation/twincat3/TF6510_TC3_IEC61850_EN.pdf"
release_date: "2024-12-09"
---
Manual | EN TF6510 Twin CAT 3 | IEC 61850 2024-12-09 | Version: 1.7.1
## Page 3

Table of contents Table of contents 1 Foreword.................................................................................................................................................. 13 1.1 Notes on the documentation........................................................................................................... 13 1.2 For your safety................................................................................................................................ 14 1.3 Notes on information security.......................................................................................................... 15 2 Overview.................................................................................................................................................. 16 3 Installation............................................................................................................................................... 17 3.1 System requirements...................................................................................................................... 17 3.2 Installation....................................................................................................................................... 17 3.3 Installation Windows CE................................................................................................................. 20 3.4 Licensing......................................................................................................................................... 22 4 Technical introduction............................................................................................................................ 25 4.1 Overview of standards.................................................................................................................... 25 4.2 Data model...................................................................................................................................... 26 4.3 Services supported......................................................................................................................... 28 4.4 General Client - Project structure.................................................................................................... 29 4.5 General Server - Project structure.................................................................................................. 34 4.6 RT Ethernet adapter configuration.................................................................................................. 38 4.7 TCP Keep-Alive Messages............................................................................................................. 41 4.8 Firewall settings.............................................................................................................................. 43 5 Configuration........................................................................................................................................... 44 5.1 Basics and entry.............................................................................................................................. 44 5.2 Menu bar......................................................................................................................................... 51 5.2.1 File................................................................................................................................... 51 5.2.2 View................................................................................................................................. 52 5.2.3 Tools................................................................................................................................ 53 5.2.4 Help.................................................................................................................................. 53 5.3 New Project Wizard......................................................................................................................... 54 5.4 Device configuration........................................................................................................................ 61 5.5 Configuration of the data objects.................................................................................................... 62 5.6 Data Sets......................................................................................................................................... 67 5.7 Reporting......................................................................................................................................... 72 5.8 GOOSE........................................................................................................................................... 74 5.9 Automatic code generation............................................................................................................. 76 5.9.1 Code version 2.0.............................................................................................................. 81 5.10 Custom Logical Node Groups......................................................................................................... 93 5.11 Custom Logical Nodes.................................................................................................................... 93 5.12 Custom Common Data Classes...................................................................................................... 94 6 PLC API.................................................................................................................................................... 97 6.1 Libraries.......................................................................................................................................... 97 6.2 Namespaces................................................................................................................................... 97 6.2.1 Twin CAT Type System namespace.................................................................................. 97 6.2.2 Tc3_Acsi namespace....................................................................................................... 97 6.2.3 Tc3_Ber namespace........................................................................................................ 97 TF6510 Version: 1.7.1 3
## Page 4

Table of contents 6.2.4 Tc3_Collections namespace............................................................................................ 97 6.2.5 Tc3_Gse namespace....................................................................................................... 98 6.2.6 Tc3_iec61850_8_1 namespace....................................................................................... 98 6.2.7 Tc3_iec61850 namespace............................................................................................... 98 6.2.8 Tc3_Mms namespace...................................................................................................... 98 6.2.9 Tc3_Rfc1006 namespace................................................................................................ 98 6.2.10 Tc3_Sockets namespace................................................................................................. 98 6.2.11 Tc3_Tpkt namespace....................................................................................................... 98 6.2.12 Tc3_Ulosi namespace...................................................................................................... 98 6.2.13 Tc2_Tcp Ip namespace..................................................................................................... 98 6.2.14 Tc2_System namespace.................................................................................................. 98 6.3 Function blocks............................................................................................................................... 99 6.3.1 Data model....................................................................................................................... 99 6.3.2 Protocol settings............................................................................................................. 167 6.3.3 Communication.............................................................................................................. 241 6.3.4 FB_Async Service Result Class........................................................................................ 269 6.3.5 FB_Service Error Class.................................................................................................... 270 6.4 Functions....................................................................................................................................... 271 6.4.1 Accuracy_To_Utc Time Quality Accuracy......................................................................... 271 6.4.2 Acsi Analogue Value........................................................................................................ 273 6.4.3 Acsi Calendar Time.......................................................................................................... 273 6.4.4 Acsi Cell.......................................................................................................................... 274 6.4.5 Acsi Log Optional Fields................................................................................................... 275 6.4.6 Acsi Optional Fields......................................................................................................... 275 6.4.7 Acsi Originator................................................................................................................. 276 6.4.8 Acsi Phy Com Addr........................................................................................................... 277 6.4.9 Acsi Point........................................................................................................................ 277 6.4.10 Acsi Pulse Config............................................................................................................. 278 6.4.11 Acsi Quality..................................................................................................................... 279 6.4.12 Acsi Quality_To_String.................................................................................................... 280 6.4.13 Acsi Quality_To_WORD.................................................................................................. 280 6.4.14 Acsi Quality Source_To_Source...................................................................................... 281 6.4.15 Acsi Quality Validity_To_Validity...................................................................................... 282 6.4.16 Acsi Range Config........................................................................................................... 283 6.4.17 Acsi Reason Code........................................................................................................... 284 6.4.18 Acsi Scaled Value Config.................................................................................................. 285 6.4.19 Acsi Sv Optional Fields..................................................................................................... 285 6.4.20 Acsi Trigger Conditions.................................................................................................... 286 6.4.21 Acsi Unit.......................................................................................................................... 287 6.4.22 Acsi Val With Trans........................................................................................................... 287 6.4.23 Acsi Vector...................................................................................................................... 288 6.4.24 Any Buffer_To_Octet String............................................................................................. 288 6.4.25 Binary Time..................................................................................................................... 290 6.4.26 Binary Time_To_System Time......................................................................................... 290 6.4.27 Binary Time6_To_LWORD............................................................................................. 291 6.4.28 Binary Time6_To_String................................................................................................. 292 4 Version: 1.7.1 TF6510
## Page 5

Table of contents 6.4.29 Binary Time6Day_To_Date............................................................................................. 293 6.4.30 BYTE_To_Utc Time Quality............................................................................................. 294 6.4.31 Clts Every Bool................................................................................................................. 295 6.4.32 Clts Some Bool................................................................................................................ 297 6.4.33 DATE_and_TOD_To_DT............................................................................................... 298 6.4.34 Date_To_Binary Time6Day............................................................................................. 299 6.4.35 Fill Octet String................................................................................................................. 300 6.4.36 INT24............................................................................................................................. 300 6.4.37 INT128........................................................................................................................... 301 6.4.38 LTIME_To_Utc Time Fraction Of Second.......................................................................... 302 6.4.39 LWORD_To_Binary Time6............................................................................................. 303 6.4.40 LWORD_TO_MACADDR............................................................................................... 304 6.4.41 LWORD_TO_OCTET6................................................................................................... 305 6.4.42 LWORD_TO_OCTET8................................................................................................... 305 6.4.43 LWORD_To_Utc Time.................................................................................................... 306 6.4.44 Octet String_To_Any Buffer............................................................................................. 307 6.4.45 Size Of Octet String.......................................................................................................... 308 6.4.46 Source_To_Acsi Quality Source...................................................................................... 308 6.4.47 String_To_Acsi Quality.................................................................................................... 309 6.4.48 String_To_Binary Time6................................................................................................. 310 6.4.49 String_To_Utc Time........................................................................................................ 311 6.4.50 String_To_Utc Time Quality............................................................................................. 313 6.4.51 String_To_Utc Time Stamp.............................................................................................. 314 6.4.52 System Time_To_Binary Time......................................................................................... 315 6.4.53 System Time_To_Utc Time.............................................................................................. 316 6.4.54 UINT24........................................................................................................................... 317 6.4.55 UINT128......................................................................................................................... 318 6.4.56 Utc Time.......................................................................................................................... 318 6.4.57 Utc Time_To_LWORD.................................................................................................... 319 6.4.58 Utc Time_To_String........................................................................................................ 320 6.4.59 Utc Time_To_System Time.............................................................................................. 321 6.4.60 Utc Time Fraction Of Second_To_LTIME.......................................................................... 323 6.4.61 Utc Time Is Null................................................................................................................. 324 6.4.62 Utc Time Quality............................................................................................................... 324 6.4.63 Utc Time Quality_To_BYTE............................................................................................. 325 6.4.64 Utc Time Quality_To_String............................................................................................. 326 6.4.65 Utc Time Quality Accuracy_To_Accuracy......................................................................... 327 6.4.66 Utc Time Stamp_To_String.............................................................................................. 329 6.4.67 Validity_To_Acsi Quality Validity...................................................................................... 330 6.4.68 WORD_To_Acsi Quality.................................................................................................. 331 6.4.69 Zero Octet String.............................................................................................................. 332 6.5 Interfaces...................................................................................................................................... 333 6.5.1 Data model..................................................................................................................... 333 6.5.2 Protocol settings............................................................................................................. 346 6.5.3 Communication.............................................................................................................. 368 6.5.4 I_Async Service Result Class........................................................................................... 424 TF6510 Version: 1.7.1 5
## Page 6

Table of contents 6.5.5 I_Service Error Class....................................................................................................... 428 6.5.6 I_Base Stream Class....................................................................................................... 431 6.6 Data types..................................................................................................................................... 431 6.6.1 E_ACSE_Aare Diagnostic............................................................................................... 431 6.6.2 E_ACSE_Aare Result..................................................................................................... 432 6.6.3 E_ACSE_Aare Source.................................................................................................... 433 6.6.4 E_ACSE_Abrt Diagnostic................................................................................................ 433 6.6.5 E_ACSE_Abrt Source..................................................................................................... 434 6.6.6 E_Acse Authentication.................................................................................................... 434 6.6.7 E_Acsi Access Permission............................................................................................... 435 6.6.8 E_Acsi Adj St................................................................................................................... 435 6.6.9 E_Acsi Alm Lev................................................................................................................ 435 6.6.10 E_Acsi Analogue Value Pres Cond.................................................................................... 436 6.6.11 E_Acsi Ang Ref................................................................................................................ 436 6.6.12 E_Acsi Appl Add Cause.................................................................................................... 437 6.6.13 E_Acsi Appl Error............................................................................................................. 438 6.6.14 E_Acsi Auto Rec St........................................................................................................... 439 6.6.15 E_Acsi Beh...................................................................................................................... 439 6.6.16 E_Acsi CBOp Cap............................................................................................................ 440 6.6.17 E_Acsi Check.................................................................................................................. 440 6.6.18 E_Acsi Clc Intv Typ........................................................................................................... 441 6.6.19 E_Acsi Clc Mod................................................................................................................ 441 6.6.20 E_Acsi Clc Mth................................................................................................................. 442 6.6.21 E_Acsi Clc Rf Typ............................................................................................................. 442 6.6.22 E_Acsi Clc Tot VA............................................................................................................. 443 6.6.23 E_Acsi Cmd Qual............................................................................................................. 443 6.6.24 E_Acsi Ctl Models............................................................................................................ 444 6.6.25 E_Acsi Ctl Report............................................................................................................. 444 6.6.26 E_Acsi Ctl Service............................................................................................................ 444 6.6.27 E_Acsi Cyc Tr Mod........................................................................................................... 445 6.6.28 E_Acsi Dbpos.................................................................................................................. 445 6.6.29 E_Acsi Dir....................................................................................................................... 446 6.6.30 E_Acsi Dir Mod................................................................................................................ 446 6.6.31 E_Acsi EEHealth............................................................................................................. 447 6.6.32 E_Acsi Fail Mod............................................................................................................... 447 6.6.33 E_Acsi Fan Ctl................................................................................................................. 447 6.6.34 E_Acsi Fan Ctl Gen........................................................................................................... 448 6.6.35 E_Acsi Fc........................................................................................................................ 448 6.6.36 E_Acsi Fil Typ.................................................................................................................. 449 6.6.37 E_Acsi Flt Loop................................................................................................................ 450 6.6.38 E_Acsi Gn St.................................................................................................................... 450 6.6.39 E_Acsi Health.................................................................................................................. 451 6.6.40 E_Acsi Hv Ref.................................................................................................................. 451 6.6.41 E_Acsi Intr Det Mth........................................................................................................... 451 6.6.42 E_Acsi Lev Mod............................................................................................................... 452 6.6.43 E_Acsi Liv Dea Mod.......................................................................................................... 452 6 Version: 1.7.1 TF6510
## Page 7

Table of contents 6.6.44 E_Acsi Logical Node Class............................................................................................... 453 6.6.45 E_Acsi Mech Health......................................................................................................... 454 6.6.46 E_Acsi Mod..................................................................................................................... 454 6.6.47 E_Acsi Month.................................................................................................................. 454 6.6.48 E_Acsi Multiplier.............................................................................................................. 455 6.6.49 E_Acsi Occ Per................................................................................................................ 456 6.6.50 E_Acsi Occ Type.............................................................................................................. 456 6.6.51 E_Acsi Op Mod Rect......................................................................................................... 457 6.6.52 E_Acsi Op Mod Syn.......................................................................................................... 457 6.6.53 E_Acsi Or Category......................................................................................................... 458 6.6.54 E_Acsi Par Col Mod.......................................................................................................... 458 6.6.55 E_Acsi Par Mod............................................................................................................... 459 6.6.56 E_Acsi Par Tra Mod.......................................................................................................... 459 6.6.57 E_Acsi PFSign................................................................................................................ 460 6.6.58 E_Acsi Phs Ref................................................................................................................ 460 6.6.59 E_Acsi Phy Health........................................................................................................... 461 6.6.60 E_Acsi PIDAlg................................................................................................................. 461 6.6.61 E_Acsi Pmp Ctl................................................................................................................ 461 6.6.62 E_Acsi Pmp Ctl Gen......................................................................................................... 462 6.6.63 E_Acsi Pol Qty................................................................................................................. 462 6.6.64 E_Acsi POWCap............................................................................................................. 463 6.6.65 E_Acsi Quality Source..................................................................................................... 463 6.6.66 E_Acsi Quality Validity..................................................................................................... 464 6.6.67 E_Acsi Range................................................................................................................. 464 6.6.68 E_Acsi Rcd Mod............................................................................................................... 464 6.6.69 E_Acsi Re Tr Mod............................................................................................................. 465 6.6.70 E_Acsi Rot Dir.................................................................................................................. 465 6.6.71 E_Acsi Rst Mod................................................................................................................ 466 6.6.72 E_Acsi Sbo Classes......................................................................................................... 466 6.6.73 E_Acsi Seq T................................................................................................................... 467 6.6.74 E_Acsi Server Directory Class.......................................................................................... 467 6.6.75 E_Acsi Service Error........................................................................................................ 467 6.6.76 E_Acsi Service Type........................................................................................................ 468 6.6.77 E_Acsi Set Charact.......................................................................................................... 469 6.6.78 E_Acsi Sev...................................................................................................................... 470 6.6.79 E_Acsi Sh Op Cap............................................................................................................ 470 6.6.80 E_Acsi SIUnit.................................................................................................................. 471 6.6.81 E_Acsi Spt End St............................................................................................................. 473 6.6.82 E_Acsi St Clc Tun............................................................................................................. 474 6.6.83 E_Acsi Str Week Day........................................................................................................ 475 6.6.84 E_Acsi Sw Op Cap............................................................................................................ 475 6.6.85 E_Acsi Sw Typ................................................................................................................. 476 6.6.86 E_Acsi Tcmd................................................................................................................... 476 6.6.87 E_Acsi Tm Syn................................................................................................................. 477 6.6.88 E_Acsi Tnk Typ................................................................................................................ 477 6.6.89 E_Acsi Tpc Rx Mod........................................................................................................... 477 TF6510 Version: 1.7.1 7
## Page 8

Table of contents 6.6.90 E_Acsi Tpc Tx Mod........................................................................................................... 478 6.6.91 E_Acsi Tr Beh.................................................................................................................. 478 6.6.92 E_Acsi Trg Mod................................................................................................................ 479 6.6.93 E_Acsi Tr Mod.................................................................................................................. 479 6.6.94 E_Acsi Typ Rs Crv............................................................................................................ 479 6.6.95 E_Acsi Unb Det Mth.......................................................................................................... 480 6.6.96 E_Acsi Un Blk Mod........................................................................................................... 480 6.6.97 E_Acsi VLan Priority........................................................................................................ 481 6.6.98 E_Acsi Week Day............................................................................................................ 481 6.6.99 E_Acsi Wei Mod............................................................................................................... 482 6.6.100 E_Async Environment State............................................................................................ 482 6.6.101 E_Async Service State..................................................................................................... 483 6.6.102 E_Event Completion....................................................................................................... 483 6.6.103 E_Gse Dispatch Mode..................................................................................................... 484 6.6.104 E_Gse Dispatch Mode..................................................................................................... 484 6.6.105 E_Gse Go CBPublisher State........................................................................................... 484 6.6.106 E_Gse Go CBSubscriber State......................................................................................... 485 6.6.107 E_Gse Link Status........................................................................................................... 485 6.6.108 E_Gse Retransmission Strategy...................................................................................... 486 6.6.109 E_Mms Vmd Logical Status.............................................................................................. 486 6.6.110 E_Mms Vmd Physical Status............................................................................................ 486 6.6.111 E_Rfc1006Tpdu Size...................................................................................................... 487 6.6.112 E_Scsm Edition............................................................................................................... 487 6.6.113 E_Scsm Link Status......................................................................................................... 487 6.6.114 E_Tcp Link Status............................................................................................................ 488 6.6.115 E_Tcp Socket Type.......................................................................................................... 488 6.6.116 E_Trace Level................................................................................................................. 488 6.6.117 E_Utc Time Accuracy....................................................................................................... 489 6.6.118 External data types........................................................................................................ 490 6.6.119 ST_Acsi Analogue Value................................................................................................. 494 6.6.120 ST_Acsi Calendar Time................................................................................................... 494 6.6.121 ST_Acsi Cell.................................................................................................................... 495 6.6.122 ST_Acsi Data Set Class Info.............................................................................................. 495 6.6.123 ST_Acsi Functional Constraints....................................................................................... 496 6.6.124 ST_Acsi IEDGroup Class Info........................................................................................... 497 6.6.125 ST_Acsi Intelligent Electronic Device Class Info................................................................. 497 6.6.126 ST_Acsi Logical Device Class Info.................................................................................... 497 6.6.127 ST_Acsi Logical Node Class Info....................................................................................... 497 6.6.128 ST_Acsi Log Optional Fields............................................................................................. 498 6.6.129 ST_Acsi Optional Fields................................................................................................... 498 6.6.130 ST_Acsi Originator.......................................................................................................... 499 6.6.131 ST_Acsi Phy Com Addr.................................................................................................... 499 6.6.132 ST_Acsi Point.................................................................................................................. 500 6.6.133 ST_Acsi Pres Cond.......................................................................................................... 500 6.6.134 ST_Acsi Pulse Config...................................................................................................... 502 6.6.135 ST_Acsi Quality............................................................................................................... 503 8 Version: 1.7.1 TF6510
## Page 9

Table of contents 6.6.136 ST_Acsi Range Config..................................................................................................... 504 6.6.137 ST_Acsi Reason Code..................................................................................................... 504 6.6.138 ST_Acsi Scaled Value Config........................................................................................... 505 6.6.139 ST_Acsi Sv Optional Fields............................................................................................... 505 6.6.140 ST_Acsi Trigger Conditions............................................................................................. 506 6.6.141 ST_Acsi Unit................................................................................................................... 507 6.6.142 ST_Acsi Val With Trans.................................................................................................... 507 6.6.143 ST_Acsi Vector............................................................................................................... 507 6.6.144 ST_Gse Adapter Info....................................................................................................... 508 6.6.145 ST_Gse Go CBPublisher Tx............................................................................................. 508 6.6.146 ST_Gse Go CBSubscriber Rx........................................................................................... 509 6.6.147 ST_Scsm Additional Cause Diagnostic Event Info............................................................. 510 6.6.148 ST_Scsm Br CBJob Info................................................................................................... 511 6.6.149 ST_Scsm Br CBValues Set............................................................................................... 511 6.6.150 ST_Scsm Command Termination Event Info..................................................................... 511 6.6.151 ST_Scsm Confirmed Event Info........................................................................................ 512 6.6.152 ST_Scsm Go CBJob Info.................................................................................................. 513 6.6.153 ST_Scsm Go CBValues Set............................................................................................. 513 6.6.154 ST_Scsm Report Event Info.............................................................................................. 513 6.6.155 ST_Scsm Ur CBJob Info................................................................................................... 514 6.6.156 ST_Scsm Ur CBValues Set.............................................................................................. 515 6.6.157 ST_Service Error Class.................................................................................................... 515 6.6.158 T_Acsi Object Name........................................................................................................ 515 6.6.159 T_Acsi Object Reference................................................................................................. 515 6.6.160 T_Acsi Tag...................................................................................................................... 516 6.6.161 T_Acsi Vis String129........................................................................................................ 516 6.6.162 T_Binary Time................................................................................................................. 516 6.6.163 T_INT24......................................................................................................................... 516 6.6.164 T_INT128....................................................................................................................... 517 6.6.165 T_Mms Integer8.............................................................................................................. 517 6.6.166 T_Mms Integer16............................................................................................................ 517 6.6.167 T_Mms Integer32............................................................................................................ 517 6.6.168 T_Mms String.................................................................................................................. 517 6.6.169 T_Mms Visible String....................................................................................................... 518 6.6.170 T_OCTET6..................................................................................................................... 518 6.6.171 T_OCTET8..................................................................................................................... 518 6.6.172 T_OCTET16................................................................................................................... 518 6.6.173 T_OCTET32................................................................................................................... 518 6.6.174 T_OCTET64................................................................................................................... 518 6.6.175 T_UINT24....................................................................................................................... 519 6.6.176 T_UINT128..................................................................................................................... 519 6.6.177 T_Utc Time...................................................................................................................... 519 6.6.178 T_Utc Time Quality.......................................................................................................... 520 6.6.179 U_Acsi Analogue Ctl Val................................................................................................... 520 6.6.180 U_Acsi Ctl Val.................................................................................................................. 521 6.6.181 U_Acsi Enumerated Ctl Val............................................................................................... 521 TF6510 Version: 1.7.1 9
## Page 10

Table of contents 6.7 Parameter lists.............................................................................................................................. 522 6.7.1 Param_Acsi.................................................................................................................... 522 6.7.2 Param_Gse.................................................................................................................... 528 6.7.3 Param_Sockets.............................................................................................................. 528 6.8 Global variables............................................................................................................................ 528 6.8.1 TC_EVENTS constants.................................................................................................. 528 6.8.2 TC_EVENT_CLASSES constants................................................................................. 615 6.8.3 GVL_Acsi constants....................................................................................................... 618 7 Examples............................................................................................................................................... 623 7.1 General Client - Project structure.................................................................................................. 623 7.2 Client - Base Sample Project........................................................................................................ 628 7.3 Client - Read Data (Get All Data Values, Get Data Values).............................................................. 629 7.4 Client - Write Data (Set All Data Values, Set Data Values)............................................................... 630 7.5 Client - Report Control Blocks (Unbuffered, Buffered).................................................................. 631 7.6 Client - Direct Control with normal security................................................................................... 643 7.7 Client - SBO Control with normal security..................................................................................... 644 7.8 Client - Direct Control with enhanced security.............................................................................. 645 7.9 Client - SBO Control with enhanced security................................................................................ 646 7.10 Client - Read/Write Data Set Values (Get Data Set Values, Set Data Set Values)............................. 648 7.11 Client - GOOSE Subscriber (Get Go CBData Values, Set Go CBData Values)................................. 652 7.12 Client - GOOSE Subscriber (without Client-Server communication)............................................ 652 7.13 Client - User defined timestamp clock source............................................................................... 654 7.14 Client - Dynamic created Data Sets (Create Data Set, Delete Data Set).......................................... 655 7.15 General Server - Project structure................................................................................................ 659 7.16 Server - Base Sample Project....................................................................................................... 663 7.17 Server – GOOSE Publisher (Get Go CBData Values, Set Go CBData Values)................................. 663 7.18 Server - GOOSE Publisher (without Client-Server communication)............................................. 663 7.19 Server - Direct Control with normal security.................................................................................. 666 7.20 Server - Direct Control with enhanced security............................................................................. 669 7.21 Server - SBO Control with normal security................................................................................... 672 7.22 Server - SBO Control with enhanced security............................................................................... 677 7.23 Server - User defined timestamp clock source............................................................................. 683 7.24 Server - Unbuffered Reporting...................................................................................................... 684 7.25 Server - Data access events......................................................................................................... 687 7.26 Server - Buffered Reporting.......................................................................................................... 688 7.27 Multiple GOOSE publishers/subscribers on one network adapter (without client-server communica- tion)............................................................................................................................................... 693 7.28 TLS - Secure client-server communication using certificates or PSK (pre-shared key)................ 701 7.29 Authentication, negotiation of supported services and optional communication parameters........ 706 8 Appendix................................................................................................................................................ 717 8.1 Binary-Time LWORD format specification.................................................................................... 717 8.2 Binary-Time string format specification......................................................................................... 717 8.3 UTC-Time LWORD format specification....................................................................................... 718 8.4 UTC-Time-Quality BYTE format specification............................................................................... 720 8.5 UTC-Time-Quality string format specification............................................................................... 721 8.6 UTC-Time string format specification............................................................................................ 722 10 Version: 1.7.1 TF6510
## Page 11

Table of contents 8.7 Quality-String format specification................................................................................................ 723 8.8 Quality-WORD format specification.............................................................................................. 724 8.9 FAQ - frequently asked questions and answers........................................................................... 725 TF6510 Version: 1.7.1 11
## Page 12

Table of contents 12 Version: 1.7.1 TF6510
## Page 13

Foreword 1 Foreword 1.1 Notes on the documentation This description is intended exclusively for trained specialists in control and automation technology who are familiar with the applicable national standards. For installation and commissioning of the components, it is absolutely necessary to observe the documentation and the following notes and explanations. The qualified personnel is obliged to always use the currently valid documentation. The responsible staff must ensure that the application or use of the products described satisfies all requirements for safety, including all the relevant laws, regulations, guidelines, and standards. Disclaimer The documentation has been prepared with care. The products described are, however, constantly under development. We reserve the right to revise and change the documentation at any time and without notice. No claims to modify products that have already been supplied may be made on the basis of the data, diagrams, and descriptions in this documentation. Trademarks Beckhoff®, Twin CAT®, Twin CAT/BSD®, TC/BSD®, Ether CAT®, Ether CAT G®, Ether CAT G10®, Ether CAT P®, Safety over Ether CAT®, Twin SAFE®, XFC®, XTS® and XPlanar® are registered and licensed trademarks of Beckhoff Automation Gmb H. If third parties make use of designations or trademarks used in this publication for their own purposes, this could infringe upon the rights of the owners of the said designations. Patents The Ether CAT Technology is covered, including but not limited to the following patent applications and patents: EP1590927, EP1789857, EP1456722, EP2137893, DE102015105702 and similar applications and registrations in several other countries. Ether CAT® is registered trademark and patented technology, licensed by Beckhoff Automation Gmb H, Germany Copyright © Beckhoff Automation Gmb H & Co. KG, Germany. The distribution and reproduction of this document as well as the use and communication of its contents without express authorization are prohibited. Offenders will be held liable for the payment of damages. All rights reserved in the event that a patent, utility model, or design are registered. TF6510 Version: 1.7.1 13
## Page 14

Foreword 1.2 For your safety Safety regulations Read the following explanations for your safety. Always observe and follow product-specific safety instructions, which you may find at the appropriate places in this document. Exclusion of liability All the components are supplied in particular hardware and software configurations which are appropriate for the application. Modifications to hardware or software configurations other than those described in the documentation are not permitted, and nullify the liability of Beckhoff Automation Gmb H & Co. KG. Personnel qualification This description is only intended for trained specialists in control, automation, and drive technology who are familiar with the applicable national standards. Signal words The signal words used in the documentation are classified below. In order to prevent injury and damage to persons and property, read and follow the safety and warning notices. Personal injury warnings DANGER Hazard with high risk of death or serious injury. WARNING Hazard with medium risk of death or serious injury. CAUTION There is a low-risk hazard that could result in medium or minor injury. Warning of damage to property or environment NOTICE The environment, equipment, or data may be damaged. Information on handling the product This information includes, for example: recommendations for action, assistance or further information on the product. 14 Version: 1.7.1 TF6510
## Page 15

Foreword 1.3 Notes on information security The products of Beckhoff Automation Gmb H & Co. KG (Beckhoff), insofar as they can be accessed online, are equipped with security functions that support the secure operation of plants, systems, machines and networks. Despite the security functions, the creation, implementation and constant updating of a holistic security concept for the operation are necessary to protect the respective plant, system, machine and networks against cyber threats. The products sold by Beckhoff are only part of the overall security concept. The customer is responsible for preventing unauthorized access by third parties to its equipment, systems, machines and networks. The latter should be connected to the corporate network or the Internet only if appropriate protective measures have been set up. In addition, the recommendations from Beckhoff regarding appropriate protective measures should be observed. Further information regarding information security and industrial security can be found in our https://www.beckhoff.com/secguide. Beckhoff products and solutions undergo continuous further development. This also applies to security functions. In light of this continuous further development, Beckhoff expressly recommends that the products are kept up to date at all times and that updates are installed for the products once they have been made available. Using outdated or unsupported product versions can increase the risk of cyber threats. To stay informed about information security for Beckhoff products, subscribe to the RSS feed at https:// www.beckhoff.com/secinfo. TF6510 Version: 1.7.1 15
## Page 16

Overview 2 Overview IEC 61850 is a communication protocol for data exchange in electrical substations. The Twin CAT product for IEC 61850 offers this type of communication directly from the Twin CAT control system in the form of a PLC programming interface. The entire communication stack is mapped in the PLC. The products can also be used on the protocols based on IEC 61850. This is particularly true in the field of wind turbines for the data models of IEC 61400-25. In addition to the PLC programming interface, there is also a configurator for the data model. It can read and generate the IEC 61850 icd files. It can also automatically generate the necessary PLC code for the mapping of the data model, allowing the user to concentrate on the actual application. In addition to the client/server communication, Twin CAT also supports the GOOSE protocol, which is based directly on the Ethernet layer. Product components The product TF6510 IEC 61850 consists of the following components: • PLC libraries: Tc3_IEC61850.compiled-library, Tc3_IEC61850_8_1.compiled-library, Tc3_Gse.compiled-library, Tc3_Mms.compiled-library, Tc3_Acsi.compiled-library, Tc3_Ber.compiled-library, Tc3_Rfc1006.compiled-library, Tc3_Collections.compiled-library, Tc3_Tpkt.compiled-library, Tc3_Ulosi.compiled-library, • Other products: TF6310 TCP/IP Server • Twin CAT Telecontrol Configurator: Configurator for the IEC 61850 / IEC 61400-25 data model 16 Version: 1.7.1 TF6510
## Page 17

Installation 3 Installation 3.1 System requirements Development environment A pure development environment describes a computer on which PLC programs are developed but not executed. The following components must be installed on a development computer: • Twin CAT 3.1.4024.0 XAE (Engineering) or higher • Twin CAT 3 function TF6510 • A 7-day trial license can be used (multiple times, if required) for the development environment (see Licensing [} 22]). Runtime environment A runtime environment describes a computer on which PLC programs are executed. The following components must be installed on a runtime computer: • Twin CAT 3.1.4024.0 XAR (Runtime) or higher • Twin CAT 3 function TF6510 • Licenses for TC1200 PLC and TF6510 • A 7-day trial license can be used for testing purposes (see Licensing [} 22]) Development and runtime environment on one computer If a computer is to be used as a runtime and development environment (to test a PLC program before it is loaded into the runtime environment, for example), the following requirements must be met: • Twin CAT 3.1.4024.0 XAE (Engineering) or higher • Twin CAT 3 function TF6510 • Licenses for TC1200 PLC and TF6510 • A 7-day trial license can be used for testing purposes (see Licensing [} 22]) 3.2 Installation The following section describes how to install the Twin CAT 3 Function for Windows-based operating systems. ü The Twin CAT 3 Function setup file was downloaded from the Beckhoff website. 1. Run the setup file as administrator. To do this, select the command Run as administrator in the context menu of the file. ð The installation dialog opens. TF6510 Version: 1.7.1 17
## Page 18

Installation 2. Accept the end user licensing agreement and click Next. 3. Enter your user data. 18 Version: 1.7.1 TF6510
## Page 19

Installation 4. If you want to install the full version of the Twin CAT 3 Function, select Complete as installation type. If you want to install the Twin CAT 3 Function components separately, select Custom. 5. Select Next, then Install to start the installation. ð A dialog box informs you that the Twin CAT system must be stopped to proceed with the installation. TF6510 Version: 1.7.1 19
## Page 20

Installation 6. Confirm the dialog with Yes. 7. Select Finish to exit the setup. ð The Twin CAT 3 Function has been successfully installed. 3.3 Installation Windows CE The following section describes how to install a Twin CAT 3 function (TFxxx) on a Beckhoff Embedded PC with Windows CE. 1. Download and install the setup file [} 20] 2. Transfer the CAB file to the Windows CE device [} 21] 3. Run the CAB file on the Windows CE device [} 21] If an older TFxxx version is already installed on the Windows CE device, it can be updated: • Software upgrade [} 21] Download and install the setup file The CAB installation file for Windows CE is part of the TFxxx setup. This is made available on the Beckhoff website www.beckhoff.com and automatically contains all versions for Windows XP, Windows 7 and Windows CE (x86 and ARM). 20 Version: 1.7.1 TF6510
## Page 21

Installation Download the TFxxx setup file and install the Twin CAT 3 function as described in the Installation [} 17] section. After the installation, the installation folder contains three directories (one directory per hardware platform): • CE-ARM: ARM-based embedded PCs running Windows CE, e.g. CX8090, CX9020 • CE-X86: X86-based embedded PCs running Windows CE, e.g. CX50xx, CX20x0 • Win32: embedded PCs running Windows XP, Windows 7 or Windows Embedded Standard The CE-ARM and CE-X86 directories contain the CAB files of the Twin CAT 3 function for Windows CE in relation to the respective hardware platform of the Windows CE device. Example: installation folder "TF6310" Transfer the CAB file to the Windows CE device Transfer the corresponding CAB file to the Windows CE device. There are various options for transferring the executable file: • via network shares • via the integrated FTP server • via Active Sync • via CF/SD cards Further information can be found in the Beckhoff Information System in the "Operating Systems" documentation (Embedded PC > Operating Systems > CE). Run the CAB file on the Windows CE device After transferring the CAB file to the Windows CE device, double-click the file there. Confirm the installation dialog with OK. Then restart the Windows CE device. After restarting the device, the files of the Twin CAT 3 function (TFxxxx) are automatically loaded in the background and are then available. The software is installed in the following directory on the Windows CE device: \Hard Disk\Twin CAT\Functions\TFxxxx Software upgrade If an older version of the Twin CAT 3 function is already installed on the Windows CE device, carry out the following steps on the Windows CE device to upgrade to a new version: 1. Open the CE Explorer by clicking Start > Run and entering "Explorer". 2. Navigate to \Hard Disk\Twin CAT\Functions\TFxxx\xxxx. 3. Rename the file Tc*.exe to Tc*.old. TF6510 Version: 1.7.1 21
## Page 22

Installation 4. Restart the Windows CE device. 5. Transfer the new CAB file to the Windows CE device. 6. Run the CAB file on the Windows CE device and install the new version. 7. Delete the file Tc*.old. 8. Restart the Windows CE device. ð The new version is active after the restart. 3.4 Licensing The Twin CAT 3 function can be activated as a full version or as a 7-day test version. Both license types can be activated via the Twin CAT 3 development environment (XAE). Licensing the full version of a Twin CAT 3 Function A description of the procedure to license a full version can be found in the Beckhoff Information System in the documentation "Twin CAT 3 Licensing". Licensing the 7-day test version of a Twin CAT 3 Function A 7-day test version cannot be enabled for a Twin CAT 3 license dongle. 1. Start the Twin CAT 3 development environment (XAE). 2. Open an existing Twin CAT 3 project or create a new project. 3. If you want to activate the license for a remote device, set the desired target system. To do this, select the target system from the Choose Target System drop-down list in the toolbar. ð The licensing settings always refer to the selected target system. When the project is activated on the target system, the corresponding Twin CAT 3 licenses are automatically copied to this system. 4. In the Solution Explorer, double-click License in the SYSTEM subtree. ð The Twin CAT 3 license manager opens. 22 Version: 1.7.1 TF6510
## Page 23

Installation 5. Open the Manage Licenses tab. In the Add License column, check the check box for the license you want to add to your project (e.g. "TF4100 TC3 Controller Toolbox"). 6. Open the Order Information (Runtime) tab. ð In the tabular overview of licenses, the previously selected license is displayed with the status “missing”. 7. Click 7-Day Trial License... to activate the 7-day trial license. ð A dialog box opens, prompting you to enter the security code displayed in the dialog. 8. Enter the code exactly as it is displayed and confirm the entry. 9. Confirm the subsequent dialog, which indicates the successful activation. ð In the tabular overview of licenses, the license status now indicates the expiry date of the license. TF6510 Version: 1.7.1 23
## Page 24

Installation 10. Restart the Twin CAT system. ð The 7-day trial version is enabled. 24 Version: 1.7.1 TF6510
## Page 25

Technical introduction 4 Technical introduction 4.1 Overview of standards IEC 61850 is a general transmission protocol for the protective and control equipment in electrical substations in medium and high voltage systems (station automation). This communication is physically based on Ethernet technology. The server-client communication is currently supported in Twin CAT via MMS (Manufacturing Message Specification) and GOOSE. The communication stack, as shown in the illustration below, is implemented layer by layer in the Twin CAT PLC in the form of libraries. IEC 61850, which was published in 2004, is strictly object-oriented and its data model is hierarchically structured. The various data models are explained in the following chapter. Application example In this case, the use of IEC 61400-25 enables all wind turbines from different manufacturers in a wind farm to communicate with a central station. Standardization avoids the use of vendor-specific protocols, which would lead to increased application expenditure. BECKHOFF supports this method with the implementation of IEC 61850 or IEC 61400-25 respectively in the Twin CAT Automation suite. TF6510 Version: 1.7.1 25
## Page 26

Technical introduction 4.2 Data model IEC 61850 is the basic standard for various application specializations. Each specialization defines its own data model or extends the basic data model of IEC 61850. Standard Data models IEC 61850 Basic data models for protective and control equipment in electrical substations IEC 61850-7-410 (former: IEC 62344) Data models for communication in hydroelectric power plants IEC 61850-7-420 (former: IEC 62350) Data models for distributed/decentralized power generation and storage IEC 61400-25 Data models for the communication and monitoring of wind turbines In principle, the data models are divided into five hierarchical levels. The corresponding standards specify all necessary Logical Nodes, Data Objects and Data Attributes. Depending on the application, Logical Devices or server/client must be configured on the basis of the defined models. In the associated Beckhoff product, the configuration can be done in the Twin CAT Telecontrol Configurator [} 44] tool. 26 Version: 1.7.1 TF6510
## Page 27

Technical introduction TF6510 Version: 1.7.1 27
## Page 28

Technical introduction Hierarchical levels The server forms the first hierarchical level in the data model of IEC 61850 or IEC 61400-25 respectively. The server offers a connection point for a device, allowing Server corresponding Ethernet-based communication systems to be connected. In this case Twin CAT, with the libraries belonging to the protocol, would represent such a server on an Industrial PC or embedded device. The Logical Devices form the second hierarchical level in the data model of IEC 61850 and IEC 61400-25. This level subdivides a single physical device into Logical Device several separate parts known as Logical Devices. The advantage of this subdivision is that functions or objects that belong together can be placed together on account of their commonalities and, for example, switched to a different operation mode. Different Logical Nodes from the third hierarchical level can be implemented, depending on the device. The Logical Nodes form the second hierarchical level in the data model of IEC 61850 and IEC 61400-25. They represent the information of all conceivable sub- Logical Node functions that can occur in digital station control technology and, among other things, in wind turbines. These include all protective functions as well as automation functions and functions for the processing of measured values and counter values. For all standardized IEC 61850 and IEC 61400-25 Logical Nodes there are defined identifiers that always consist of an abbreviation with four letters. For example, the abbreviation XSWI stands for Circuit Switch. A Logical Device may consist of several such nodes. A Logical Node can consist of several Data Objects, which form the fourth hierarchical level of the IEC 61850 or IEC 61400-25 data model. A special feature Data Object of this hierarchical level is that data objects in turn can be hierarchically nested. For instance, a data object can consist of several sub-data objects before a basic or complex data type is ultimately accessed in a Common Data Class (CDC). The data attributes form the lowest hierarchical level of IEC 61850 and IEC 61400-25. They represent the detailed information or values of the data objects. Data Attribute Since the same number of data attributes is always defined for many data objects, the attributes of an object are combined in so-called Common Data Classes (CDC). The associated CDC is specified for each data object; the data objects are therefore specializations of the CDC. 4.3 Services supported In general, TF6510 supports Server and Client, as well as GOOSE according to IEC 61850. Here you will find an overview of the IEC 61850 services supported by Twin CAT. 28 Version: 1.7.1 TF6510
## Page 29

Technical introduction Service model Supported services Server (Device) Get Server Directory Application association Associate Abort Release Logical device Get Logical Device Directory Logical Node Get Logical Node Directory Get All Data Values Data Get Data Values Set Data Values Get Data Definition Get Data Directory Data set Get Data Set Values Set Data Set Values Get Data Set Directory Create Data Set Delete Data Set Reporting Buffered RCB: Report Get BRCBValues Set BRCBValues Unbuffered RCB: Report Get URCBValues Set URCBValues Generic substation events (GSE) GOOSE support for publisher and subscriber GOOSE CB: Send GOOSEMessage Get Go CBValues Set GOCBValues Control Select Select With Value Cancel Operate Command Termination Time Activated Operate 4.4 General Client - Project structure Each of the client sample projects follows a general structure, which this document aims to explain. This structure includes the nesting of the function blocks in the Solution Explorer and the structure of the state machine in the client function block, which establishes the connection to the server and implements the data exchange. The basic structure of the Twin CAT IEC 61850 sample projects is based on the PLC project structure automatically generated by the Twin CAT Telecontrol Configurator. The Twin CAT Telecontrol Configurator in turn uses the "Twin CAT XAE Project (XML format)" as a template when generating the solution. The data models communicated in the samples reflect different IEC 61850 servers. They differ from sample to sample and are enclosed with the source code as icd files. The ICD files can also be used by third-party software for the simulation of a server. TF6510 Version: 1.7.1 29
## Page 30

Technical introduction First of all, a brief examination of the structure of a Twin CAT IEC 61850 PLC client project: The generated solution name (unless specified otherwise) corresponds to the Twin CAT Telecontrol Configurator project name. The automatically generated Twin CAT PLC project name (unless specified otherwise) on the other hand has the following structure: "[Project name]_[IEDName]_Client". As standard, every sample project has a "DUTs", a "GVLs" and a "POUs" folder. A Global Variable List (GVL) with the name "Tc Telecontrol" is stored in the "GVLs" folder. The following function blocks are instantiated and initialized in this Global Variable List (see source code below): • A Client function block instance of the type: FB_[IEDName]Client (connection management and data exchange). • An IED data model function block instance of the type: FB_IED_[IEDName]. • Optional (depending on the GOOSE Subscriber configuration): one or more function block instances of the type: "FB_[IEDName]Gse" for GOOSE communication and GSE management. In addition, the code version used during code generation and the version of the Twin CAT Telecontrol Configurator used are also stored there. Namespace: Tc Telecontrol Type: Global Variable List (GVL) VAR_GLOBAL ip Creator : I_Acsi Code Creator Class := GVL_Acsi Vars. Creator. Set Code Rev(code Rev:=2). Set Gui Ver(major:=1, minor:=0, build:=93, revision:=10); fb[IEDName] : FB_IED_[IEDName]; fb[IEDName]Client : FB_[IEDName]Client := (fb Connection:=(ip IED:=fb[IEDName],settings:=(s Remote H ost:='127.0.0.1'))); fb[IEDName]Gse : FB_[IEDName]Gse := (fb Adapter:=(ip IED:=fb[IEDName], settings:=(s Multicast Add r:='01-0C-CD-01-00-00', e Dispatch Mode:=E_Gse Dispatch Mode. Non Promiscuous))); END_VAR In the "POUs" folder there is a further folder: "[IEDName]", which contains the entire hierarchical structure of the IED data model as function blocks. This folder also contains the IED function block that is instanced in the global variable list and has already been mentioned. The Client function block: "FB_[IEDName]Client", which implements the establishment of the connection and the data exchange with an IEC 61850 Server, is located on the same level. The Twin CAT PLC project contains a "MAIN" program as standard. This is called cyclically by a Twin CAT task and in turn calls the program "P_IEC61850MAIN". The program "P_IEC61850MAIN" encapsulates the call of the client function block and of the optional GSE function block, separates the IEC 61850 communication from the remainder of the PLC machine program and helps, for example, with the implementation of further clients. PROGRAM MAIN VAR END_VAR P_IEC61850MAIN(); PROGRAM P_IEC61850MAIN VAR END_VAR fb[IEDName]Client(); fb[IEDName]Gse(); 30 Version: 1.7.1 TF6510
## Page 31

Technical introduction In the FB_[IEDName]Client function block, there is a state machine, the basic states of which are used in every client sample. These states are graphically illustrated in the following diagram: State 0 (Init state): the state machine is in this state as soon as the PLC program has been started. Commands for the management of the client/server connection are handled here (and in State 1). This is mainly controlled via four Boolean variables. When set, these variables then activate the corresponding commands (in this case these are once-only method calls at the client function block). • _b Abort: calls the method "Abort Req", which activates the command to abort the client connection to the server. • _b Connect: calls the method "Associate Req", which activates the command to establish a new client connection to the server. • _b Disconnect: calls the method "Release Req", which activates the command for the controlled release of an existing client connection to the server. • _b Reconnect: also calls the method "Associate Req" if the Client connection to the Server has been aborted/disconnected, but is to be restored automatically. The methods listed above, which are called once only in this state, require longer than one PLC cycle for their execution. For this reason the state machine switches to a wait state (State 1), in which the termination of the activated command is awaited. If the client connection to the server has already been established beforehand, the state machine will switch to the data transmission state (State 10). State 1 (Wait State): in this state, the client waits until the command processing for the management of the client/server connection is no longer busy. As long as the connection is established, terminated or aborted, the state machine is in state 1. As soon as the command has been successfully processed, the state machine is returned to state 0 (Init state). State 10 (Data exchange): if the state machine is in this state, then the client connection to the server has already been successfully established. The client is ready for the data transmission to the server. During the data transmission, commands are activated for the transmission or reception of the data. In this state the sample projects differ from one another. Different methods or auxiliary function blocks are called here, depending on the desired functionality or logic in the application. In addition, the client function block can be extended by further states. TF6510 Version: 1.7.1 31
## Page 32

Technical introduction All method calls that activate commands for data transmission require several PLC cycles for successful execution, therefore the state machine must be set to State 11 (Wait state) after calling such a method. In the case of an active connection and no data transmission, the state machine switches between States 0 and 10. The state machine is reset to State 0 in order to react to changes in the client-server connection status and to handle them in State 0. State 11 (Wait state): this state is a further wait state. As soon as a data transmission command (activated in State 10) has been executed, the state machine is set to State 11 and waits until the command execution is no longer busy. The state machine then switches to State 0. State 100 (Error state): as soon as an error occurs during the activation or processing of a command, the state machine is set to State 100. The error is logged here and the state machine reset to State 0. FUNCTION_BLOCK FB_[IEDName]Client VAR_INPUT fb Connection : FB_iec61850Client Class; END_VAR VAR _b Abort : BOOL; _b Disconnect : BOOL; _b Connect : BOOL; _b Reconnect : BOOL := TRUE; _b Read All Data : BOOL := TRUE; state : BYTE; e State : E_Async Environment State; b Busy : BOOL; b Success : BOOL; ip Result : I_Async Service Result Class; s Last Error Result : T_Max String; fb Abort Reason : FB_Service Error Class := (st Error:=SUCCESS_EVENT); s Last Abort Reason : T_Max String; n Invoke ID : UDINT; e Service Error : E_Acsi Service Error; n Service Error : UDINT; n Cmd Error : UDINT; s Obj Reference : T_Acsi Object Reference; s Ctrl Reference : T_Acsi Object Reference; b Get Server Directory : BOOL := TRUE; b Get Logical Device Directory: BOOL := TRUE; b Get Logical Node Directory : BOOL := TRUE; b Get All Server Values : BOOL := TRUE; b Get All Server Values : BOOL := TRUE; b Get All Data Values_LLN0_ST : BOOL := TRUE; b Get Data Values_LLN0_ST_Beh: BOOL := TRUE; END_VAR fb Connection. Execute(); e State:= fb Connection.e State; CASE state OF 0: IF _b Abort THEN _b Abort:= FALSE; b Success:= fb Connection. Abort Req(ip Reason:=fb Abort Reason, ip Sink:=0, ip Result=>ip Result) ; state:= SEL(b Success, 100, 1); ELSIF e State = E_Async Environment State. Idle AND (_b Connect OR _b Reconnect) THEN _b Connect:= FALSE; b Get All Server Values:= SEL(_b Read All Data, b Get All Server Values, TRUE); b Success:= fb Connection. Associate Req(ip Sink:=0, ip Result=>ip Result); state:= SEL(b Success, 100, 1); ELSIF e State = E_Async Environment State. Established AND _b Disconnect THEN _b Disconnect:= FALSE; b Success:= fb Connection. Release Req(ip Sink:=0, ip Result=>ip Result); state:= SEL(b Success, 100, 1); ELSIF e State = E_Async Environment State. Established THEN state:= 10; END_IF _b Connect:= FALSE; _b Disconnect:= FALSE; 1: IF ip Result <> 0 THEN ip Result. Execute(); IF NOT (b Busy:=ip Result. Is Busy()) THEN state:= SEL(ip Result. Is Completed(), 100, 0); END_IF 32 Version: 1.7.1 TF6510
## Page 33

Technical introduction END_IF 10: IF b Get Server Directory THEN b Get Server Directory:= FALSE; b Success:= fb Connection. Get Server Directory Req(ip Server:=fb[IEDName], e Class:=E_Acsi Serve r Directory Class. Logical Device, h User:=0, ip Sink:=0, n Invoke ID=>n Invoke ID, ip Result=>ip Result); state:= SEL(b Success, 100, 11); ELSIF b Get Logical Device Directory THEN b Get Logical Device Directory:= FALSE; b Success:= fb Connection. Get Logical Device Directory Req(ip Logical Device:=fb[IEDName]. IEDLD1 , h User:=0, ip Sink:=0, n Invoke ID=>n Invoke ID, ip Result=>ip Result); state:= SEL(b Success, 100, 11); ELSIF b Get Logical Node Directory THEN b Get Logical Node Directory:= FALSE; b Success:= fb Connection. Get Logical Node Directory Req(ip Logical Node:=fb[IEDName]. IEDLD1. LLN 0, e Class:=E_Acsi Logical Node Class. Data Set, h User:=0, ip Sink:=0, n Invoke ID=>n Invoke ID, ip Result=>ip Re sult); state:= SEL(b Success, 100, 11); ELSIF b Get All Server Values THEN b Get All Server Values:= FALSE; b Success:= fb Connection. Get All Server Values Req(ip Server:=fb[IEDName], h User:=0, ip Sink:=0 , n Invoke ID=>n Invoke ID, ip Result=>ip Result); state:= SEL(b Success, 100, 11); ELSIF b Get All Data Values_LLN0_ST THEN b Get All Data Values_LLN0_ST:= FALSE; b Success:= fb Connection. Get All Data Values Req(ip Logical Node:=fb[IEDName]. IEDLD1. LLN0, e Fc: =E_Acsi Fc. ST_, h User:=0, ip Sink:=0, n Invoke ID=>n Invoke ID, ip Result=>ip Result); state:= SEL(b Success, 100, 11); ELSIF b Get Data Values_LLN0_ST_Beh THEN b Get Data Values_LLN0_ST_Beh:= FALSE; b Success:= fb Connection. Get Data Values Req(ip Data:=fb[IEDName]. IEDLD1. LLN0. Beh, e Fc:=E_Acs i Fc. ST_, h User:=0, ip Sink:=0, n Invoke ID=>n Invoke ID, ip Result=>ip Result); state:= SEL(b Success, 100, 11); ELSE state:= 0; END_IF 11: IF ip Result <> 0 THEN ip Result. Execute(); IF NOT (b Busy:=ip Result. Is Busy()) THEN state:= SEL(ip Result. Is Completed(), 100, 0); END_IF END_IF 100: state:= 0; IF ip Result <> 0 THEN n Cmd Error:= n Cmd Error + 1; s Last Error Result:= ip Result. Dump(); END_IF END_CASE GOOSE Subscriber (optional) Twin CAT Telecontrol Configurator can also generate the PLC code for a GOOSE subscriber in a client project during PLC code generation (see code sample below). This requires that the user has previously created the GOOSE components such as Go CBs (goose control blocks) in the Twin CAT Telecontrol Configurator or imported them from an SCL file (e.g. ICD file). By default, a function block with the name: "FB_[IEDName]Gse" is instantiated during code generation and added to the Global Variable List "Tc Telecontrol". This function block establishes the connection between a network adapter of the Twin CAT control computer, the IED data model and the GOOSE configuration in the Go CBs. The Go CBs are instantiated in the IED data model (usually in LLN0). Each Go CB has a function block subelement with the name: "Subscriber". The subscription can be enabled or disabled from the PLC code via the "Subscriber" method calls. By default, the subscription is enabled for all Go CBs when the PLC program is started. This is controlled by the "b Subscriber" variable initialized with "TRUE". A rising edge at the "b Unsubscribe" variable can be used to disable the subscription for all Go CBs. Subscriber commands issued through these methods are executed immediately, without wait cycles or further states required to complete command processing. The "Subscriber" described here reads the configuration and updates the status of the Go CB (attribute "Go Ena" is set to "TRUE" or "FALSE", for example), but it does not use the client-server services such as "Set Go CBValues" or "Get Go CBValues" to enable or disable the "Publisher" on the server side. This means that the generated code already implements a subscriber that can be enabled or disabled, for example, in the first PLC cycle or from the PLC code at any time. The required Go CB configuration settings (Go CB attribute values) can be made via initialization values. However, the Go CBs can already be configured in the Twin CAT Telecontrol Configurator. The initialization values are automatically generated and assigned during TF6510 Version: 1.7.1 33
## Page 34

Technical introduction code generation. If the Subscriber has been activated and the configuration of the Go CB and the network adapter matches the receiving GOOSE frame, then the GOOSE data is copied (mapped) into the Twin CAT IED data model. The "Execute" method must be called cyclically the rest of the time. Among other things, it is responsible for updating the status information in the Go CB. FUNCTION_BLOCK FB_[IEDName]Gse IMPLEMENTS I_Gse Link Status Event Sink VAR_INPUT fb Adapter : FB_Gse Adapter Class := (ip Link Status:=THIS^); END_VAR VAR e Link Status : E_Gse Link Status; b Success : BOOL; ip Error : I_Service Error Class; b Subscribe : BOOL := TRUE; b Unsubscribe : BOOL; END_VAR b Success:= fb Adapter. Execute(ip Error=>ip Error); IF b Subscribe THEN b Subscribe:= FALSE; b Success:= fb[IEDName]. IEDLD1. LLN0.gocb01. Subscriber. Enable(ip Adapter:=fb Adapter, ip Error=>ip Err or); b Success:= fb[IEDName]. IEDLD1. LLN0.gocb02. Subscriber. Enable(ip Adapter:=fb Adapter, ip Error=>ip Err or); b Success:= fb[IEDName]. IEDLD1. LLN0.gocb03. Subscriber. Enable(ip Adapter:=fb Adapter, ip Error=>ip Err or); ELSIF b Unsubscribe THEN b Unsubscribe:= FALSE; b Success:= fb[IEDName]. IEDLD1. LLN0.gocb01. Subscriber. Disable(ip Error=>ip Error); b Success:= fb[IEDName]. IEDLD1. LLN0.gocb02. Subscriber. Disable(ip Error=>ip Error); b Success:= fb[IEDName]. IEDLD1. LLN0.gocb03. Subscriber. Disable(ip Error=>ip Error); ELSE b Success:= fb[IEDName]. IEDLD1. LLN0.gocb01. Subscriber. Execute(ip Error=>ip Error); b Success:= fb[IEDName]. IEDLD1. LLN0.gocb02. Subscriber. Execute(ip Error=>ip Error); b Success:= fb[IEDName]. IEDLD1. LLN0.gocb03. Subscriber. Execute(ip Error=>ip Error); END_IF In the project tree under the I/O-Device branch you will find a network adapter instance named "GSE (RT Ethernet adapter)". This adapter instance must be configured accordingly, i.e. the I/O configuration must be adapted to the existing hardware and to the target platform on which the project is to run. A new I/O configuration is also necessary if you change the target platform. This configuration must be done manually in Twin CAT XAE. In addition to the I/O configuration of the network adapter, a link must be established between the network adapter and the PLC function blocks for Goose communication. The link can be used to forward the data received from the network adapter to the instance of the function block: "FB_[IEDName]Gse". In the opposite direction the instance of the function block "FB_[IEDName]Gse" can forward the data to be sent to the network adapter. Here you can find more information: RT Ethernet adapter Configuration [} 38]. 4.5 General Server - Project structure All sample Server projects also follow a general structure, similar to the sample Client projects. In contrast to the client, the connection at the server is not actively established on the server side. After the program start, the server waits for a connection request from a client and accepts or rejects it. In addition, it must be possible for the server to establish connections to multiple clients. This results in a different server project structure than for the client. The basic structure of the Twin CAT IEC 61850 Server sample projects is based on the PLC project structure automatically generated by the Twin CAT Telecontrol Configurator. The Twin CAT Telecontrol Configurator in turn uses the "Twin CAT XAE Project (XML format)" as a template when generating the solution. The data models communicated in the samples reflect different IEC 61850 servers. They differ from sample to sample and are enclosed with the source code as ICD files. The ICD files can also be used by third-party software for simulation purposes. Structure of a Twin CAT IEC 61850 PLC Server project: 34 Version: 1.7.1 TF6510
## Page 35

Technical introduction The generated solution name (unless specified otherwise) corresponds to the Twin CAT Telecontrol Configurator project name. The automatically generated Twin CAT PLC project name (unless specified otherwise) on the other hand has the following structure: "[Project name]_[IEDName]_Server". As standard, every sample project has a "DUTs", a "GVLs" and a "POUs" folder. A Global Variable List (GVL) with the name "Tc Telecontrol" is stored in the "GVLs" folder. The following function blocks are instantiated and initialized in this Global Variable List (see source code below): • A server function block instance of the type: "FB_iec61850Server Class" (server configuration settings and connection management). • At least one instance of the server session function block of the type: "FB_[IEDName]Server Session[1..n]" (connection management of a single connection and data exchange with a client). At this point, manually add additional instances of the Server Session function block if you want the server to communicate simultaneously with more than one client. • An IED data model function block instance of the type: "FB_IED_[IEDName]". • Optional (depending on the GOOSE publisher configuration): one or more function block instances of the type: "FB_[IEDName]Gse" for GOOSE communication and GSE management. In addition, the code version used during code generation and the version of the Twin CAT Telecontrol Configurator used are also stored there. Namespace: Tc Telecontrol Type: Global Variable List (GVL) VAR_GLOBAL ip Creator : I_Acsi Code Creator Class := GVL_Acsi Vars. Creator. Set Code Rev(code Rev:=2 ). Set Gui Ver(major:=1, minor:=1, build:=94, revision:=1); fb[IEDName] : FB_IED_[IEDName]; fb[IEDName]Server : FB_iec61850Server Class := (ip IED:=fb[IEDName], settings:=(b Enable:=T RUE, s Local Host:='127.0.0.1')); fb[IEDName]Server Session1 : FB_[IEDName]Server Session := (fb Connection:=(ip Server:=fb[IEDName]Se rver, settings:=(b Enable:=TRUE))); fb[IEDName]Gse : FB_[IEDName]Gse := (fb Adapter:=(ip IED:=fb[IEDName], settings:=(s Mult icast Addr:='01-0C-CD-01-00-00', e Dispatch Mode:=E_Gse Dispatch Mode. Non Promiscuous))); END_VAR In the "POUs" folder there is a further folder: "[IEDName]", which contains the entire hierarchical structure of the IED data model as function blocks. This folder also contains the IED data model function block that is instantiated in the Global Variable List and that has already been mentioned. The server session function block: "FB_[IEDName]Server Session", which implements the establishment of the connection and the data exchange with an IEC 61850 Client, is located on the same level. The Twin CAT PLC project contains a "MAIN" program as standard. This is called cyclically by a Twin CAT task and in turn calls the program "P_IEC61850MAIN". The program "P_IEC61850MAIN" encapsulates the call of the server, server session and the optional Gse function block, separates the IEC 61850 communication from the rest of the PLC machine program. PROGRAM MAIN VAR END_VAR P_IEC61850MAIN(); TF6510 Version: 1.7.1 35
## Page 36

Technical introduction PROGRAM P_IEC61850MAIN VAR END_VAR fb[IEDName]Server. Execute(); fb[IEDName]Server Session1(); fb[IEDName]Gse(); In the FB_[IEDName]Server Session function block, there is a state machine, the basic states of which are used in every server sample (see source code below). The server session function block is responsible for establishing connections and exchanging data with a single client. If there are multiple simultaneous client connections, multiple instances of this function block are required and instantiated. State 0 (Init state): the state machine is in this state as soon as the PLC program has been started. Commands for the management of a client-server connection are handled here (and in State 1). Normally, the server session function block remains in this state and waits for a connection request from a client. The server then establishes a connection as soon as the connection request is detected. This happens automatically and does not require any further commands from the PLC application. If the server has established a connection to the client, the state machine switches to the data transmission state (State 10). It is also possible to close an already established connection. This is controlled via two Boolean variables. When set, these variables enable the corresponding commands (in this case these are once-only method calls on the server session function block). • _b Abort: calls the method "Abort Req", which activates the command to abort the server connection to the client. • _b Disconnect: calls the method "Release Req", which activates the command for the controlled release of an existing server connection to the client. As a rule, however, it is the client that should terminate its active connection to the server. The methods listed above require longer than one PLC cycle for their execution. For this reason the state machine switches to a wait state (State 1), in which the termination of the activated command is awaited. State 1 (Wait State): in this state, the server session function block waits until the command processing for the management of the server client connection is no longer busy. As long as the connection is being released or interrupted, the state machine is in State 1. The state machine is reset to State 0 (Init State) as soon as the command has been successfully executed. State 10 (Data exchange): if the state machine is in this state, then the server connection to the client has already been successfully established. The server session function block is ready for data transmission to the server. The server data transmission to the client takes place automatically in the background and does not have to be initiated by the PLC application. It is the client that triggers a data transmission in the server by a request. The state machine switches between states 0 and 10 when there is an active connection. The state machine is reset to State 0 in order to react to changes in the client-server connection status and to handle them in State 0. State 100 (Error state): as soon as an error occurs during the activation or processing of a command, the state machine is set to State 100. The error is logged here and the state machine reset to State 0. FUNCTION_BLOCK FB_[IEDName]Server Session VAR_INPUT fb Connection : FB_iec61850Connection Class := (ip Abort Ind:=THIS^, ip Associate Ind:=THIS^, ip Re lease Ind:=THIS^); END_VAR VAR _b Abort : BOOL; _b Disconnect : BOOL; state : BYTE; e State : E_Async Environment State; b Busy : BOOL; b Success : BOOL; ip Result : I_Async Service Result Class; s Last Error Result : T_Max String; fb Abort Reason : FB_Service Error Class := (st Error:=SUCCESS_EVENT); s Last Abort Reason : T_Max String; END_VAR fb Connection. Execute(); e State:= fb Connection.e State; CASE state OF 36 Version: 1.7.1 TF6510
## Page 37

Technical introduction 0: IF _b Abort THEN _b Abort:= FALSE; b Success:= fb Connection. Abort Req(ip Reason:=fb Abort Reason, ip Sink:=0, ip Result=>ip Result) ; state:= SEL(b Success, 100, 1); ELSIF e State = E_Async Environment State. Established AND _b Disconnect THEN _b Disconnect:= FALSE; b Success:= fb Connection. Release Req(ip Sink:=0, ip Result=>ip Result); state:= SEL(b Success, 100, 1); ELSIF e State = E_Async Environment State. Established THEN state:= 10; END_IF _b Disconnect:= FALSE; 1: IF ip Result <> 0 THEN ip Result. Execute(); IF NOT (b Busy:=ip Result. Is Busy()) THEN state:= SEL(ip Result. Is Completed(), 100, 0); END_IF END_IF 10: state:= 0; 100: state:= 0; IF ip Result <> 0 THEN s Last Error Result:= ip Result. Dump(); END_IF END_CASE GOOSE Publisher (optional) Twin CAT Telecontrol Configurator can also generate the PLC code for a GOOSE publisher in a server project during PLC code generation (see code sample below). However, this is only possible if the user has previously created the GOOSE components such as Go CBs (goose control blocks) in the Twin CAT Telecontrol Configurator or imported them from an SCL file (e.g. ICD file). By default, a function block with the name: "FB_[IEDName]Gse" is instantiated during code generation and added to the Global Variable List "Tc Telecontrol". This function block establishes the connection between a network adapter of the Twin CAT control computer, the IED data model and the GOOSE configuration in the Go CBs. The Go CBs are instantiated in the IED data model (usually in LLN0). Each Go CB has a function block subelement with the name: "Publisher". The "Publisher" method calls can be used to start or stop publishing from the PLC code. By default, publishing is started at PLC program start for all Go CBs. This is controlled by the "b Start" variable initialized with "TRUE". Publishing can be stopped for all Go CBs via a rising edge at the "b Stop" variable. Publisher commands issued through these methods are executed immediately, without wait cycles or further states required to complete command processing. The "Publisher" described here reads the configuration and does update the status of the Go CB (attribute "Go Ena" is set to "TRUE" or "FALSE", for example), but it does not use the client-server services such as "Set Go CBValues" or "Get Go CBValues" to start or stop the Publisher. This means that the generated code already implements a publisher that can be started or stopped, for example, in the first PLC cycle or from the PLC code at any time. The required Go CB configuration settings (Go CB attribute values) can be made via initialization values. However, the Go CBs can already be configured in the Twin CAT Telecontrol Configurator. The initialization values are then automatically generated and assigned during code generation. If the Publisher has been started and the configuration of the Go CB and the network adapter shows a match, then the Publisher immediately starts sending the first GOOSE frames (including frame repetitions). The "Update" method has a special significance. Every time it is called, the "Publisher" immediately sends a new GOOSE frame (and automatically new frame repetitions). This means that the application can set all relevant GOOSE dataset data in the IED data model first and then initiate the sending of the changed dataset data with the "Update" method call. The "Execute" method must be called cyclically the rest of the time. It is responsible for sending the frame repetitions and updating the status information in the Go CB. FUNCTION_BLOCK FB_[IEDName]Gse IMPLEMENTS I_Gse Link Status Event Sink VAR_INPUT fb Adapter : FB_Gse Adapter Class := (ip Link Status:=THIS^); END_VAR VAR e Link Status : E_Gse Link Status; b Success : BOOL; ip Error : I_Service Error Class; b Start : BOOL := TRUE; b Stop : BOOL; b Update : BOOL; END_VAR TF6510 Version: 1.7.1 37
## Page 38

Technical introduction b Success:= fb Adapter. Execute(ip Error=>ip Error); IF b Start THEN b Start:= FALSE; b Success:= fb[IEDName]. IEDLD1. LLN0.gocb01. Publisher. Start(ip Adapter:=fb Adapter, ip Error=>ip Error ); b Success:= fb[IEDName]. IEDLD1. LLN0.gocb02. Publisher. Start(ip Adapter:=fb Adapter, ip Error=>ip Error ); b Success:= fb[IEDName]. IEDLD1. LLN0.gocb03. Publisher. Start(ip Adapter:=fb Adapter, ip Error=>ip Error ); ELSIF b Stop THEN b Stop:= FALSE; b Success:= fb[IEDName]. IEDLD1. LLN0.gocb01. Publisher. Stop(ip Error=>ip Error); b Success:= fb[IEDName]. IEDLD1. LLN0.gocb02. Publisher. Stop(ip Error=>ip Error); b Success:= fb[IEDName]. IEDLD1. LLN0.gocb03. Publisher. Stop(ip Error=>ip Error); ELSIF b Update THEN b Update:= FALSE; b Success:= fb[IEDName]. IEDLD1. LLN0.gocb01. Publisher. Update(ip Error=>ip Error); b Success:= fb[IEDName]. IEDLD1. LLN0.gocb02. Publisher. Update(ip Error=>ip Error); b Success:= fb[IEDName]. IEDLD1. LLN0.gocb03. Publisher. Update(ip Error=>ip Error); ELSE b Success:= fb[IEDName]. IEDLD1. LLN0.gocb01. Publisher. Execute(ip Error=>ip Error); b Success:= fb[IEDName]. IEDLD1. LLN0.gocb02. Publisher. Execute(ip Error=>ip Error); b Success:= fb[IEDName]. IEDLD1. LLN0.gocb03. Publisher. Execute(ip Error=>ip Error); END_IF The GSE block implements the "I_Gse Link Status Event Sink" interface. The method: "On Link Status Change" belongs to this interface implementation and is called whenever the status of the network connection (at the network adapter) changes. The PLC application can, for example, query or check the network connection status via "e Link Status" variable. METHOD On Link Status Change VAR_INPUT ip Adapter : I_Gse Adapter Class; e Status : E_Gse Link Status; END_VAR VAR END_VAR e Link Status:= e Status; In the project tree under the I/O-Device branch you will find a network adapter instance named "GSE (RT Ethernet adapter)". This adapter instance must be configured accordingly, i.e. the I/O configuration must be adapted to the existing hardware and to the target platform on which the project is to run. A new I/O configuration is also necessary if you change the target platform. This configuration must be done manually in Twin CAT XAE. In addition to the I/O configuration of the network adapter, a link must be established between the network adapter and the PLC function blocks for Goose communication. The link can be used to forward the data received from the network adapter to the instance of the function block: "FB_[IEDName]Gse". In the opposite direction the instance of the function block "FB_[IEDName]Gse" can forward the data to be sent to the network adapter. Here you can find more information: RT Ethernet adapter Configuration [} 38]. 4.6 RT Ethernet adapter configuration The Twin CAT Telecontrol Configurator generates the PLC standard code for the "Publisher" or "Subscriber" whenever corresponding Goose control block instances have been configured or imported from an ICD file. In order for these instances to be able to communicate with the outside world, a network adapter (RT Ethernet adapter) is required that can send (Publisher) or receive (Subscriber) the Goose messages. The Twin CAT Telecontrol Configurator automatically creates such an adapter instance of the type "Real-Time Ethernet Adapter (Multiple Protocol Handler)" during project generation. It can be found later in the project tree under the I/O Devices junction. This adapter instance must be configured accordingly, i.e. the I/O configuration must be adapted to the existing hardware and to the target platform on which the project is to run. A new I/O configuration is also necessary if you change the target platform. This configuration must be done manually in Twin CAT XAE. The following image shows a network adapter instance created by the Twin CAT Telecontrol Configurator that has not yet been configured. In order to use the real-time network adapter and thus the GOOSE communication, the device used must have a compatible network adapter. The list of supported network chips can be found here: Supported network controllers. 38 Version: 1.7.1 TF6510
## Page 39

Technical introduction In addition to the I/O configuration of the network adapter, a link must be established between the network adapter and the PLC function blocks for Goose communication. This link can be used to forward the data received from the network adapter to the instance of the "FB_[IEDName]Gse" function block. In the opposite direction the instance of the function block "FB_[IEDName]Gse" can forward the data to be sent to the network adapter. Adding an adapter manually If the network adapter is not yet present below the I/O configuration, it can be added later. 1. In the project tree, right-click Devices. 2. Select the context menu entry Add New Item…. 3. From the device list Ethernet select Real-Time Ethernet Adapter (Multiple Protocol Handler). 4. Confirm your selection with Ok. ð This adds the adapter. Adapter configuration ü Open the adapter properties dialog with a double right mouse click on the adapter. 1. Switch to the Adapter tab. TF6510 Version: 1.7.1 39
## Page 40

Technical introduction 2. There select the command Search.... 3. Select an adapter from the list of found adapters and confirm this with OK. ð This completes the adapter configuration. In the next step a link must be established between the adapter and the PLC function block instance "FB_[IEDName]Gse". Link adapter with PLC function block instance The link between the network adapter and the PLC function block instance "FB_[IEDName]Gse" is established via a so-called object ID (oid). The object ID's available in the project are displayed on the PLC project instance dialog under the Symbol Initialization tab. The project must have been previously compiled at least once for the tab and object IDs to appear. NOTICE A real-time network adapter can be linked with max. 20 instances of the PLC function block instance "FB_[IEDName]Gse" via the object ID. ü Open the adapter properties dialog with a double right mouse click on the adapter. 1. Switch to the Icon Initialization tab. 2. In the column Value select your network adapter GSE (RT Ethernet Adapter) from the drop-down box. 40 Version: 1.7.1 TF6510
## Page 41

Technical introduction 3. Save all changes in the solution. ð This completes the configuration and linking of the real-time network adapter. 4.7 TCP Keep-Alive Messages A Keep-Alive telegram is a confirmation message or an acknowledge. This makes it possible to check in the background whether a communication partner who has established a connection is still active and thus still participating in the communication. If a communication partner is no longer active, the communication channel is closed cleanly and regularly to be free for a new participant. Keep-Alive under Windows Keep-Alive can be configured under Windows by the keys "Keep Alive Time" and "Keep Alive Interval" in the registry. The default value for the keep alive time is set to two hours, the interval time, i.e. the time until a non-answered alive request is repeated, is set to one second by default. All values are given in milliseconds. If the corresponding keys do not already exist in the registry, they must be created as follows. These are not Twin CAT settings, but specific settings of the operating system. Further information can therefore be found in the operating system documentation, for example, on the Microsoft website. Under Windows W2K, XP, Windows Embedded Standard: • In the folder HKEY_LOCAL_MACHINE\SYSTEM\Current Control Set\Services\Tcpip\Parameters\ an object named Keep Alive Time must be created as DWORD. To do this, add Edit > New > DWORD Value. If you set 0x4E20 as the value here, this corresponds to 20 seconds. • In the folder HKEY_LOCAL_MACHINE\SYSTEM\Current Control Set\Services\Tcpip\Parameters\ an object named Keep Alive Interval must be created as DWORD. To do this, add Edit > New > DWORD Value. If you set 0x1388 as value here, this corresponds to 5 seconds. Under Windows CE: • In the folder HKEY_LOCAL_MACHINE\Comm\Tcp Ip\Parms\ an object with the name Keep Alive Time must be created as DWORD. To do this, add Edit > New > DWORD Value. If you set 0x4E20 as the value here, this corresponds to 20 seconds. • In the folder HKEY_LOCAL_MACHINE\Comm\Tcp Ip\Parms\ an object named Keep Alive Interval must be created as DWORD. To do this, add Edit > New > DWORD Value. If you set 0x1388 as value here, this corresponds to 5 seconds. TF6510 Version: 1.7.1 41
## Page 42

Technical introduction Keep-Alive under TC/BSD The "sysctl" parameters are used by the operating system to configure TCP Keep-Alive messages. • keepidle: Amount of time, in milliseconds, that the connection must be idle before keepalive probes (if enabled) are sent. The default is 7200000 msec (2 hours). • keepintvl: The interval, in milliseconds, between keepalive probes sent to remote machines, when no response is received on a keepidle probe. The default is 75000 msec. > sysctl -d net.inet.tcp | grep -e keep net.inet.tcp.keepidle: time before keepalive probes begin net.inet.tcp.keepintvl: time between keepalive probes net.inet.tcp.keepinit: time to establish connection net.inet.tcp.keepcnt: Number of keepalive probes to send net.inet.tcp.always_keepalive: Assume SO_KEEPALIVE on all TCP connections Sample: keepidle is set to 4000 (ms) and keepintvl to 4000 (ms). 42 Version: 1.7.1 TF6510
## Page 43

Technical introduction sysctl net.inet.tcp.keepidle=4000 sysctl net.inet.tcp.keepintvl=4000 Permanent (persistent) configuration of TCP Keep-Alive messages is done in the file /etc/sysctl.conf. See also here: https://www.freebsd.org/cgi/man.cgi?query=tcp 4.8 Firewall settings The IEC 61850 uses the TCP/IP as transport protocol (T-profile) during the client/server communication (MMS mapping). Please ensure that the corresponding TCP port is enabled if a firewall is used. The table below lists ports that have to be taken into account when a firewall is used. Description Type Protocol Port Connection Oriented Protocol TCP 102 Transport Protocol (COTP, ISO 8073) Configuration under Windows The Windows Firewall is configured via the corresponding dialog in the Control Panel. For more information on configuration, refer to the Windows or firewall documentation. NOTICE Enable the port If an embedded controller without monitor connector and USB is used, please ensure that Remote Display (Windows CE) or Remote Desktop (Windows XP/Windows Vista) is enabled in the firewall. Otherwise the computer administration via the network is no longer possible. Configuration under TC/BSD ü Log in to the console. Default login data: Login: Administrator Password: 1 ü Alternatively, for example, via the Git BASH console: ssh Administrator@[Your IPAddress] 1. Next, you need to modify the firewall configuration file to enable the corresponding TCP/IP port. The following command opens the configuration file in the editor: doas ee /etc/pf.conf 2. The following entry is added to the configuration file (if not already present): #allow traffic to TCL/IP port 102 Pass in quick proto tcp to port 102 keep state 3. Escape calls the menu in the editor. 4. Save the changes and exit the editor. ð The configuration is now complete. Other useful commands: Reboot device: doas shutdown -r now Disable firewall: doas pfctl -d Enable firewall: doas pfctl -e TF6510 Version: 1.7.1 43
## Page 44

Configuration 5 Configuration 5.1 Basics and entry The Twin CAT Telecontrol Configurator is intended for graphic configuration of the IEC 61850 or IEC 61400-25 data model. ICD files can be read, created and modified. The configuration for Twin CAT control is made available through automatic PLC code generation. Functions of the main toolbar The buttons are described from left to right in the table below. New Project Creates a new configuration by initially allowing the selection of a storage location for a new ICD file. The following wizard opens for the preconfiguration of the data model. Open ICD file Imports/opens an ICD file Save ICD-file Exports/saves a currently opened ICD file Save ICD-file as... Exports/saves an ICD file under a new name Generate PLC code Generates PLC code for the created configuration Actuation of the New Project button in the toolbar or in the Configurator menu first causes a dialog to open in which a new ICD file can be saved. In the following, the wizard shown here opens for the preconfiguration of the data model. Here, it is possible to make common settings for the project and to add the supported control block types to the data model. 44 Version: 1.7.1 TF6510
## Page 45

Configuration The Importing/Opening and Exporting/Saving of ICD files should be controllable intuitively. There is no configurator-specific file format. A further main function is the generation of PLC code. This can be started via the Generate PLC code button. The entire data model configuration is thereby converted to structured text, and basic function blocks and calls are generated at the same time. The basic architecture of the Telecontrol Configurator is divided into three main parts: 1. The working part in which the data model is defined. Among other things, optional objects can be added or deselected, data sets added, reports and GOOSE control blocks configured, and default values set. 2. Further options and information can be found in the Properties. 3. The Message window displays information and error messages. Add Intelligent Electronic Devices To add more Intelligent Electric Devices, you can click the SCL Data Model node in the data model to execute a New Intelligent Electronic Device via the toolbar in the project window (a) or via the context menu for the node (b). TF6510 Version: 1.7.1 45
## Page 46

Configuration Add Logical Devices To add more Logical Devices, you can click the Data Model node of the corresponding Intelligent Electronic Device to execute a New Logical Device via the toolbar in the project window (a) or via the context menu for the node (b). 46 Version: 1.7.1 TF6510
## Page 47

Configuration Add Logical Nodes To configure additional Logical Nodes, you can click the device in order to execute New Logical Nodes via the toolbar in the project window (a) or via the context menu of the node (b). TF6510 Version: 1.7.1 47
## Page 48

Configuration In this case the following wizard starts, where you can select the standard from which you wish to serve yourself. The group of Logical Nodes and the type of node itself in the following. A prefix can optionally be issued. 48 Version: 1.7.1 TF6510
## Page 49

Configuration Default settings The Telecontrol Configurator also offers the possibility of saving some default settings across different projects. Open the settings via the Tools menu in the main toolbar and select Settings. In the following, you will see a new window that is divided into 2 parts. On the one hand, general configurator settings; and on the other hand, default settings for PLC code generation. These default settings serve as initial values and can be adapted before PLC code generation. You have the possibility of defining the maximum size of the log file in the General configurator settings. Here, you can select any amount between 1 k B and 1024 k B. If you set a value that is smaller than the current size of the log file, then the oldest log entries are removed until the file size corresponds to the new value. In addition, there is an option here to handle conditional Data Objects during ICD file import. This option is used to import the data model in compliance with the standard. This setting is optional because this may change your existing data model. If this setting is enabled, you will be informed about changes made automatically to the data model in the message window during ICD import. TF6510 Version: 1.7.1 49
## Page 50

Configuration You can set default values in the Settings for PLC code generation. This allows you to specify whether you want to generate a client or a server by default, or which development environment you want to use for generation. Here you can also set whether to generate subfolders by default to organize the data model. In addition, you can set whether a query is displayed when the Deploy Twin CAT Telecontrol dialog is closed prematurely, asking whether the settings made should nevertheless be saved until the next time the dialog is opened. Here you can also select that the settings made should never be saved. The following options are for the PLC code to be generated. "Create unique ID for indexed RCBs" is used to generate unique report IDs for indexed report control blocks. If a standard-specific enum no longer matches the default assigned values due to editing, the "Create custom enums for edited standard enums" option can be used to specify that a new user-defined enum is created for this purpose instead of using the existing enum from the PLC library. It is also possible to automatically select the "Merge to existing Project" option when starting the Deploy Twin CAT Telecontrol dialog, if a PLC project already exists at the storage location of the respective ICD file. With the "Always merge" option you can determine here whether this should be selected automatically at each start of the dialog or only at the first dialog start of the current ICD project. The last option allows you to set whether the log window should remain in the foreground by default during code generation. Log file Critical errors in the Telecontrol Configurator are stored in a log file. These can be found in the installation directory of the configurator. You can define the file size for the log file in the general configurator settings. By default it is set to 1024 k B. If the file size exceeds the set maximum value, then the oldest log entries are deleted from the file in order to comply with the maximum value. The log file is in XML format. A log entry always contains information about the severity of the message and when the message occurred. If the error occurs during PLC code generation, the PLC Export category is also saved. Each log entry also contains a readable message entry for independent troubleshooting. This is provided for cases where an error occurs due to misapplication, for example when an attempt is made to import an invalid ICD file. The encrypted stack entry helps to localize the error, if it is a Telecontrol Configurator error that cannot be solved independently and you contact our support about it. 50 Version: 1.7.1 TF6510
## Page 51

Configuration 5.2 Menu bar Navigation File: Basic functions such as creating/opening/saving/closing ICD files, exiting the Telecontrol Configurator. View: Functions for the Telecontrol Configurator interface. Tools: Function for PLC code generation and settings. Help: Information about the Telecontrol Configurator. 5.2.1 File Basic functions such as creating/opening/saving/closing ICD files, exiting the Telecontrol Configurator. New Project… Creates a new configuration by initially allowing the selection of a storage location for a new ICD file. A wizard opens afterwards for the preconfiguration of the data model. Full description [} 44] Open… Imports/opens an ICD file. TF6510 Version: 1.7.1 51
## Page 52

Configuration Open Recent ▶ Imports/opens an ICD file from a list of the last 10 projects opened with the Telecontrol Configurator. Long paths are shortened, you can see the full path in the respective tooltip. Save Exports/saves a currently opened ICD file. Save As… Exports/saves an ICD file under a new name. Close Project Closes the currently opened ICD file. Exit Exits the Telecontrol Configurator. 5.2.2 View Functions for the Telecontrol Configurator interface. Messages Displays the Messages window. Properties Displays the Properties window. Reset Layout Resets the layout of the Telecontrol Configurator. 52 Version: 1.7.1 TF6510
## Page 53

Configuration 5.2.3 Tools Function for PLC code generation and settings. Create PLC project… Opens the dialog for automatic code generation. Full description [} 76] Settings Opens the general default settings of the Telecontrol Configurator. Full description [} 44] 5.2.4 Help Information about the Telecontrol Configurator. About Twin CAT Telecontrol Configurator... Opens a dialog with current information about the Configurator. Here you can see, among other things, the currently installed version number and the licenses of the third-party providers used (3). The version numbers stand for the product version (1) and Configurator version (2). TF6510 Version: 1.7.1 53
## Page 54

Configuration 5.3 New Project Wizard You can use the New Project wizard to preconfigure a new data model by following the steps. It is possible to make common settings for the project and to add the supported control block types to the data model. Select project type At the beginning of the wizard, you can decide whether you want to configure a Client or Server. This has no effect on the data model. This default setting can be adapted at any time in the PLC code generation. 54 Version: 1.7.1 TF6510
## Page 55

Configuration Add Intelligent Electronic Devices On the following page you can add additional Intelligent Electronic Devices, short IEDs to the new project. At least one IED is required for configuration. You have the possibility to assign a name and an IP address to each Intelligent Electronic Device. In the case of a server configuration, this is the IP address at which the server can be reached. For client configuration, the IP address of the server to be connected. The data model is preconfigured with an Intelligent Electronic Device by default. TF6510 Version: 1.7.1 55
## Page 56

Configuration Add Logical Nodes On the following page you can add Logical Devices to the selected Intelligent Electronic Device. At least one Logical Device per Intelligent Electronic Device is required for configuration. In addition, you can add any Logical Nodes to the selected Logical Device. When selecting Logical Nodes, you can select the default. The group of Logical Nodes and the type of node in the following. A prefix can optionally be issued. Each Intelligent Electronic Device is preconfigured by default with a Logical Device and the two mandatory Logical Nodes LLN0 and LPHD. 56 Version: 1.7.1 TF6510
## Page 57

Configuration Add Data Sets On the following page you can add any Data Sets to the selected Intelligent Electronic Device. You can assign a name and assign the Data Set to a Logical Node. In the New Project Wizard, it is not possible to add Functional Constraints and Data Attributes to the Data Sets. You can do this after completing the wizard in the working area of the configurator. TF6510 Version: 1.7.1 57
## Page 58

Configuration Add Report Control Blocks On the following page you can add any Report Control Blocks to the selected Intelligent Electronic Device. You have the possibility to select the name and the assigned Logical Node. Additionally you can assign a Data Set, choose between Unbuffered and Buffered Report and index the selected Report Control Block with the selected maximum value. 58 Version: 1.7.1 TF6510
## Page 59

Configuration Add GOOSE Control Blocks On the following page you can add any GOOSE Control Blocks to the selected Intelligent Electronic Device. In addition to the options to select the name and the assigned Logical Node, you can still also assign a Data Set here. As soon as a GOOSE Control Block has been added, the GOOSE type of the project is displayed on the right side. In the event of a Client configuration, it is a GOOSE Subscriber; in the event of a Server configuration, it is a GOOSE Publisher. TF6510 Version: 1.7.1 59
## Page 60

Configuration Overview At the end of the wizard, you will once again see the previously configured data model. Once you have completed the preconfiguration, you can press the Create button to save the preconfiguration under the previously selected file name. Now you can make further settings or generate PLC code in the configurator. Alternatively, you can close the wizard at any time by clicking the Close button. If this is the case, the preconfiguration is not saved. 60 Version: 1.7.1 TF6510
## Page 61

Configuration 5.4 Device configuration You can configure various device settings in properties. TF6510 Version: 1.7.1 61
## Page 62

Configuration Set authentication options In the configurator, you can choose between two authentication options: "none" and "password". If you select "password", another entry appears with a default password that is generated during automatic code generation. The password cannot be set in the configurator, as IEC 61850 does not provide for the password to be saved in the ICD file. Displaying the default password only serves to improve traceability in the automatically generated code. Set communication parameters You can set the IP address of the device in the communication parameters. 5.5 Configuration of the data objects In the working area for the data model, you can show all of the objects additionally defined for the node in the standard via the toolbar (a) or via the context menu (b) using the command Toggle visible DOs / DAs. 62 Version: 1.7.1 TF6510
## Page 63

Configuration In addition, all objects are given a checkbox with which the optional objects can be added or deselected. The checkbox tick is blue for optional objects and red for required objects. Required objects can also be switched on and off via a command in the context menu of the respective object. However, in the interests of the standard this is not advisable. Default values can be set for the selected attributes in the Value column. To avoid unintentional entries, this is not possible for deselected attributes. Many objects offer enums, which enable a selection via a drop-down box. Numbers and texts can be entered directly. These values are later exported to the PLC code. The adjacent reset button allows you to delete the configured value. TF6510 Version: 1.7.1 63
## Page 64

Configuration Logical Devices Management Hierarchy To model complex functions, it may be necessary to group several logical devices into a management hierarchy. This is built up with the attribute set Src Ref of the object Gr Ref in the Logical Node LLN0 by optionally referencing a Logical Device via the value of the attribute. If no other logical device is referenced in a logical device, it is itself considered a root logical device. Representative for this, in the Twin CAT Telecontrol Configurator the name of the own Logical Device is provided with a (self) label to make this clear. The root logical device can be additionally specified in the context menu of the logical device. 64 Version: 1.7.1 TF6510
## Page 65

Configuration Condition-dependent data objects In addition to the required and optional objects, there are also the condition-dependent data objects, which may be present, be added or not be present in the data model, depending on the condition. Condition- dependent data objects are handled differently in the Configurator, depending on the condition. If a condition is not automatically handled by the Configurator, a message is displayed at the respective object. In addition, a Tool Tip is displayed which contains the respective condition description. The following example shows how the condition C1 of the Common LN Logical Node was integrated. This Logical Node represents the basis of all Logical Nodes and is inherited from them. In the Logical Node LLN0, the three objects Nam Plt, Health and Mod are added as required according to the standard. In the ANCR1 Logical Node, however, they are listed only as optional, since the LLN0 Logical Node of the Root Logical Device is not involved. TF6510 Version: 1.7.1 65
## Page 66

Configuration In the Properties window of the respective data object, you can see the condition designation under which you can find the condition in the IEC61850 standard. 66 Version: 1.7.1 TF6510
## Page 67

Configuration 5.6 Data Sets Data Sets can be added on the left-hand side in the data model tree. On the one hand via the toolbar (a) and on the other hand via the context menu (b). A dialog then opens in which you can enter the name of the Data Set. After confirming the dialog, the Data Set is listed in the Data Setlist. TF6510 Version: 1.7.1 67
## Page 68

Configuration Create Data Set Adding elements to the Data Set Data Attributes and Functional Constraints can be added to the Data Set via the toolbar (a) or via the context menu. Depending on which element is selected in the data model tree, this can be done in several ways. 68 Version: 1.7.1 TF6510
## Page 69

Configuration With Data Attributes, it is possible to complete the assignment directly via the context menu (d). TF6510 Version: 1.7.1 69
## Page 70

Configuration Configure Data Set independently (b) With the following dialog, it is possible to configure a Data Set clearly by ticking the desired elements. You can filter the displayed Functional Constraints using the right column. Add Functional Constraints (c) In the following dialog, you can select to which new or existing Data Set the Functional Constraint is to be added. You can also choose to add a specific Functional Constraint or all Functional Constraints present in the Data Object. Add Data Attributes (d) In addition to the configuration via the context menu, you can also add a Data Attribute to the Data Set via the toolbar. This opens the following dialog, where you can select to which new or existing Data Set the Data Attribute is to be added. 70 Version: 1.7.1 TF6510
## Page 71

Configuration If you select a Data Set from the Data Setlist from (1), all data attributes and Functional Constraints associated with the Data Set are displayed in the right-hand window (2). The source of the selected attribute is documented in the properties (3). Assign Data Sets to control blocks Data Sets can be linked directly in the properties of the respective control block. On the other hand, you can assign the respective Data Set to multiple control blocks directly via the associated context menu. TF6510 Version: 1.7.1 71
## Page 72

Configuration The following dialog shows all existing control blocks and the respective Data Set currently assigned. It is also possible to add new control blocks. To assign the Data Set selected in the data model tree to a control block, you can tick it directly. Alternatively, it is possible to assign other Data Sets that already exist to the respective control blocks via the selection field. All currently available Data Sets are displayed in the right column. 5.7 Reporting Report Control Blocks can be generated via a button in the toolbar (a), or alternatively from the context menu in the data model tree under Report Control Blocks (b). 72 Version: 1.7.1 TF6510
## Page 73

Configuration It is possible to create Buffered or Unbuffered report control blocks. The assignment to a Logical Node can be selected in the dialog, as can an appropriate name. If you select a created Report Control Block in the tree, you can make settings in the properties. Depending on whether it is an unbuffered or buffered Report Control Block, different default settings are available. In addition to the default settings, there are settings for the PLC server. Further information can be found in chapter Server - Buffered Reporting [} 688]. TF6510 Version: 1.7.1 73
## Page 74

Configuration 5.8 GOOSE GOOSE Control Blocks can be generated via a button in the toolbar (a), or alternatively from the context menu in the data model tree under GOOSE (b). 74 Version: 1.7.1 TF6510
## Page 75

Configuration The assignment to a Logical Node can be selected in the dialog, as can a corresponding name. If you select the GOOSE block created in the tree (1), you can make GOOSE-specific settings in the Properties and thus implement the link to one of the created Data Sets (2), for example. TF6510 Version: 1.7.1 75
## Page 76

Configuration 5.9 Automatic code generation Automatic PLC code generation The code generated by the Twin CAT Telecontrol Configurator is merely an application example, which can also be adapted from version to version. There are several possible ways of implementing a functional application with the IEC 61850 function blocks. ü Automatic PLC code generation from the Twin CAT Telecontrol Configurator is carried out via the Twin CAT Automation Interface. 1. Pressing the button Create PLC Project in the toolbar(a) or in the Tools menu of the configurator(b) opens the Deploy Twin CAT Telecontrol dialog. 76 Version: 1.7.1 TF6510
## Page 77

Configuration 2. In the Telecontrol tab you have the possibility to choose between client and server configuration ( Project type). If GOOSE Control Blocks are present in the project to be generated, the associated GOOSE type is also automatically selected. 3. In the Solution tab, select a path (Solution Path) and assign the names for Solution, XAE Project and PLC Project. You can either create a new solution or integrate the changes into an existing solution using the Twin CAT Project Compare tool. To do this, first select the option Merge to existing Project and then an existing SLN file with the adjacent button "...". Under Project data structure you can additionally select whether subfolders (Create sub folders) should be generated. By default, these are generated to map the configured data model in the folder hierarchy. TF6510 Version: 1.7.1 77
## Page 78

Configuration If you use longer names for the components of the data model, it may be necessary not to generate subfolders in order not to exceed the maximum path length. 4. In the IDE tab you have the possibility to use a development environment of your choice for PLC code generation (Target IDE Version). The prerequisite for this is an existing Twin CAT integration in the development environment. In addition, you can set whether the development environment should remain open after PLC code generation is complete ( Keep IDE open) and whether the development environment should be visible during PLC code generation (Show IDE during code generation). 78 Version: 1.7.1 TF6510
## Page 79

Configuration 5. The last, concluding tab Summary provides a brief overview of the settings made. The PLC code generation is started as soon as you press the Deploy button. ð During PLC code generation, the progress is displayed in the automatically opening log window. 6. To get more detailed information about the individual categories, such as IDE or Twin CAT PLC Code Generation, you can click on the respective category. With the Bring to Front option the log window remains permanently in the foreground. TF6510 Version: 1.7.1 79
## Page 80

Configuration ð After the generation is completed, a new instance of the selected development environment is opened. The PLC code is completely transparent so that the application can be written in the best possible way. ð Regardless of whether PLC code is generated for an IEC 61850 client or server, the Global Variable List Tc Telecontrol forms the entry point. VAR_GLOBAL ip Creator : I_Acsi Code Creator Class := GVL_Acsi Vars. Creator. Set Code Rev(code Rev:=2). Set Gui Ver(major:=1, minor:=0, build:=93, revision:=10); fb[IEDName] : FB_IED_[IEDName]; fb[IEDName]Client : FB_[IEDName]Client := (fb Connection:=(ip IED:=fb[IEDName],settings:=(s Remote H ost:='127.0.0.1'))); fb[IEDName]Gse : FB_[IEDName]Gse := (fb Adapter:=(ip IED:=fb[IEDName], settings:=(s Multicast Add r:='01-0C-CD-01-00-00', e Dispatch Mode:=E_Gse Dispatch Mode. Non Promiscuous))); END_VAR In addition to the data model, you will find the FB_[IEDName]Client for the client, for example. This is an application function block that encapsulates the FB_iec61850Client Class and the complete communication. Here it is particularly important to specify the IP address of the server, which you can also do in the configurator. If you generate a server, the Global Variable List looks slightly different. VAR_GLOBAL ip Creator : I_Acsi Code Creator Class := GVL_Acsi Vars. Creator. Set Code Rev(code Rev:=2 ). Set Gui Ver(major:=1, minor:=1, build:=94, revision:=1); fb[IEDName] : FB_IED_[IEDName]; fb[IEDName]Server : FB_iec61850Server Class := (ip IED:=fb[IEDName], settings:=(b Enable:=T RUE, s Local Host:='127.0.0.1')); fb[IEDName]Server Session1 : FB_[IEDName]Server Session := (fb Connection:=(ip Server:=fb[IEDName]Se rver, settings:=(b Enable:=TRUE))); fb[IEDName]Gse : FB_[IEDName]Gse := (fb Adapter:=(ip IED:=fb[IEDName], settings:=(s Mult icast Addr:='01-0C-CD-01-00-00', e Dispatch Mode:=E_Gse Dispatch Mode. Non Promiscuous))); END_VAR The FB_iec61850Server Class and the sessions required for communication are not encapsulated in an application function block, since multiple sessions can also be created here in parallel for different clients. 80 Version: 1.7.1 TF6510
## Page 81

Configuration 5.9.1 Code version 2.0 The code version is supplied since the release v1.1.94.2. It is also always listed in the generated PLC code in the global variables Tc Telecontrol. ip Creator :I_Acsi Code Creator Class := GVL_Acsi Vars. Creator. Set Code Rev(code Rev:=2). Set Gui Ver(major:=1, minor:=1, build:=94, revision:=2); TF6510 Version: 1.7.1 81
## Page 82

Configuration 5.9.1.1 Client 82 Version: 1.7.1 TF6510
## Page 83

Configuration Custom enum types: User-defined enum types that do not exist in the standard system. GVL: The client connection instance, the IED data model function block instance, and optionally one or more GOOSE communication function block instances are instantiated and initialized in the Global Variable List. In addition, the code version used during code generation and the version of the Twin CAT Telecontrol Configurator used are also stored there. Datamodel: The entire hierarchical structure of the IED data model as function blocks. Also includes the IED block that is instantiated in the Global Variable List. Client: This block contains a state machine, the basic states of which are used in every Client example. The block instance is required for connection management and data exchange. GSE / GSE Adapter: This function block connects a network adapter of the Twin CAT control computer with the GOOSE control blocks in the data model and controls the execution of these control blocks. To be able to use GOOSE communication, the real-time network adapter must be commissioned and linked. This is explained in RT Ethernet adapter configuration [} 38]. The GSE adapter is a network adapter for GOOSE communication whose network status is constantly queried by the GSE function block. Main: The Twin CAT PLC project contains a "MAIN" program as standard. This is called cyclically by a Twin CAT task and in turn calls the program "P_IEC61850MAIN". The program "P_IEC61850MAIN" encapsulates the call of the Client block and of the optional GSE block, separates the IEC 61850 communication from the remainder of the PLC machine program and helps, for example, with the implementation of further Clients. 5.9.1.1.1 E_[Enum Name] User-defined enum types that do not exist in the standard system. The maximum indices are -32768 and 32767, because it is a 16-bit integer. The naming of the enum values from the ICD file is applied only as a comment. Syntax Example Definition: {attribute 'qualified_only'} {attribute 'strict'} TYPE E_[Enum Name] : ( e_1 := 1, (*Ok*) e_2 := 2, (*Warning*) e_3 := 3, (*Alarm*) ... ) SINT; END_TYPE TF6510 Version: 1.7.1 83
## Page 84

Configuration Values Name Description e_1 User-defined enum value, corresponds to "OK" in the ICD file. e_2 User-defined enum value, corresponds to "Warning" in the ICD file. e_3 User-defined enum value, corresponds to "Alarm" in the ICD file. … Any other user-defined enum values in the index range between -32768 and 32767. 5.9.1.1.2 Tc Telecontrol (GVL) The client connection instance, the IED data model function block instance, and optionally one or more GOOSE communication function block instances are instantiated and initialized in the Global Variable List. In addition, the code version used during code generation and the version of the Twin CAT Telecontrol Configurator used are also stored there. Full description [} 29] Syntax Definition: VAR_GLOBAL ip Creator : I_Acsi Code Creator Class := GVL_Acsi Vars. Creator. Set Code Rev(code Rev:=2). Set Gui Ver(major:=1, minor:=0, build:=93, revision:=10); fb[IEDName] : FB_IED_[IEDName]; fb[IEDName]Client : FB_[IEDName]Client := (fb Connection:=(ip IED:=fb[IEDName],settings:=(s Remote H ost:='127.0.0.1'))); fb[IEDName]Gse : FB_[IEDName]Gse := (fb Adapter:=(ip IED:=fb[IEDName], settings:=(s Multicast Add r:='01-0C-CD-01-00-00', e Dispatch Mode:=E_Gse Dispatch Mode. Non Promiscuous))); END_VAR 5.9.1.1.3 FB_[Enum Name] User-defined enum types that do not exist in the standard system. Full description [} 99] Syntax Definition: {attribute 'no_explicit_call' := 'Direct call not allowed for type FB_[Enum Name]'} {attribute 'call_after_init'} FUNCTION_BLOCK FB_[Enum Name] EXTENDS FB_Acsi BAType ENUMERATED VAR _e Value: E_Custom Enum Type; _e Config: E_Custom Enum Type; {attribute 'hide'} ip Init: I_Acsi Common Attribute Class := THIS^. Add DAValue(e P:=E_Acsi P. Actual, in:=_e Value). Add DAVal ue(e P:=E_Acsi P. Config, in:=_e Config). Add DAType(in:=THIS^. T(in:=E_Acsi Basic Type. Enum)); END_VAR 5.9.1.1.4 FB_[IEDName]Client This block contains a state machine, the basic states of which are used in every Client example. The block instance is required for connection management and data exchange. Full description [} 29] Syntax Declaration: 84 Version: 1.7.1 TF6510
## Page 85

Configuration FUNCTION_BLOCK FB_[IEDName]Client VAR_INPUT fb Connection : FB_iec61850Client Class; END_VAR VAR _b Abort : BOOL; _b Disconnect : BOOL; _b Connect : BOOL; _b Reconnect : BOOL := TRUE; _b Read All Data : BOOL := TRUE; state : BYTE; e State : E_Async Environment State; b Busy : BOOL; b Success : BOOL; ip Result : I_Async Service Result Class; s Last Error Result : T_Max String; fb Abort Reason : FB_Service Error Class := (st Error:=SUCCESS_EVENT); s Last Abort Reason : T_Max String; n Invoke ID : UDINT; e Service Error : E_Acsi Service Error; n Service Error : UDINT; n Cmd Error : UDINT; s Obj Reference : T_Acsi Object Reference; s Ctrl Reference : T_Acsi Object Reference; b Get Server Directory : BOOL := TRUE; b Get Logical Device Directory: BOOL := TRUE; b Get Logical Node Directory : BOOL := TRUE; b Get All Server Values : BOOL := TRUE; b Get All Server Values : BOOL := TRUE; b Get All Data Values_LLN0_ST : BOOL := TRUE; b Get Data Values_LLN0_ST_Beh: BOOL := TRUE; END_VAR fb Connection. Execute(); e State:= fb Connection.e State; CASE state OF 0: IF _b Abort THEN _b Abort:= FALSE; b Success:= fb Connection. Abort Req(ip Reason:=fb Abort Reason, ip Sink:=0, ip Result=>ip Result) ; state:= SEL(b Success, 100, 1); ELSIF e State = E_Async Environment State. Idle AND (_b Connect OR _b Reconnect) THEN _b Connect:= FALSE; b Get All Server Values:= SEL(_b Read All Data, b Get All Server Values, TRUE); b Success:= fb Connection. Associate Req(ip Sink:=0, ip Result=>ip Result); state:= SEL(b Success, 100, 1); ELSIF e State = E_Async Environment State. Established AND _b Disconnect THEN _b Disconnect:= FALSE; b Success:= fb Connection. Release Req(ip Sink:=0, ip Result=>ip Result); state:= SEL(b Success, 100, 1); ELSIF e State = E_Async Environment State. Established THEN state:= 10; END_IF _b Connect:= FALSE; _b Disconnect:= FALSE; 1: IF ip Result <> 0 THEN ip Result. Execute(); IF NOT (b Busy:=ip Result. Is Busy()) THEN state:= SEL(ip Result. Is Completed(), 100, 0); END_IF END_IF 10: IF b Get Server Directory THEN b Get Server Directory:= FALSE; b Success:= fb Connection. Get Server Directory Req(ip Server:=fb[IEDName], e Class:=E_Acsi Serve r Directory Class. Logical Device, h User:=0, ip Sink:=0, n Invoke ID=>n Invoke ID, ip Result=>ip Result); state:= SEL(b Success, 100, 11); ELSIF b Get Logical Device Directory THEN b Get Logical Device Directory:= FALSE; b Success:= fb Connection. Get Logical Device Directory Req(ip Logical Device:=fb[IEDName]. IEDLD1 , h User:=0, ip Sink:=0, n Invoke ID=>n Invoke ID, ip Result=>ip Result); state:= SEL(b Success, 100, 11); ELSIF b Get Logical Node Directory THEN b Get Logical Node Directory:= FALSE; b Success:= fb Connection. Get Logical Node Directory Req(ip Logical Node:=fb[IEDName]. IEDLD1. LLN 0, e Class:=E_Acsi Logical Node Class. Data Set, h User:=0, ip Sink:=0, n Invoke ID=>n Invoke ID, ip Result=>ip Re TF6510 Version: 1.7.1 85
## Page 86

Configuration sult); state:= SEL(b Success, 100, 11); ELSIF b Get All Server Values THEN b Get All Server Values:= FALSE; b Success:= fb Connection. Get All Server Values Req(ip Server:=fb[IEDName], h User:=0, ip Sink:=0 , n Invoke ID=>n Invoke ID, ip Result=>ip Result); state:= SEL(b Success, 100, 11); ELSIF b Get All Data Values_LLN0_ST THEN b Get All Data Values_LLN0_ST:= FALSE; b Success:= fb Connection. Get All Data Values Req(ip Logical Node:=fb[IEDName]. IEDLD1. LLN0, e Fc: =E_Acsi Fc. ST_, h User:=0, ip Sink:=0, n Invoke ID=>n Invoke ID, ip Result=>ip Result); state:= SEL(b Success, 100, 11); ELSIF b Get Data Values_LLN0_ST_Beh THEN b Get Data Values_LLN0_ST_Beh:= FALSE; b Success:= fb Connection. Get Data Values Req(ip Data:=fb[IEDName]. IEDLD1. LLN0. Beh, e Fc:=E_Acs i Fc. ST_, h User:=0, ip Sink:=0, n Invoke ID=>n Invoke ID, ip Result=>ip Result); state:= SEL(b Success, 100, 11); ELSE state:= 0; END_IF 11: IF ip Result <> 0 THEN ip Result. Execute(); IF NOT (b Busy:=ip Result. Is Busy()) THEN state:= SEL(ip Result. Is Completed(), 100, 0); END_IF END_IF 100: state:= 0; IF ip Result <> 0 THEN n Cmd Error:= n Cmd Error + 1; s Last Error Result:= ip Result. Dump(); END_IF END_CASE 5.9.1.1.5 FB_[IEDName]Gse This function block connects a network adapter of the Twin CAT control computer with the GOOSE control blocks in the data model and controls the execution of these control blocks. To be able to use GOOSE communication, the real-time network adapter must be commissioned and linked. This is explained in RT Ethernet adapter configuration [} 38]. Full description [} 29] Syntax Definition: FUNCTION_BLOCK FB_[IEDName]Gse IMPLEMENTS I_Gse Link Status Event Sink VAR_INPUT fb Adapter : FB_Gse Adapter Class := (ip Link Status:=THIS^); END_VAR VAR e Link Status : E_Gse Link Status; b Success : BOOL; ip Error : I_Service Error Class; b Subscribe : BOOL := TRUE; b Unsubscribe : BOOL; END_VAR b Success:= fb Adapter. Execute(ip Error=>ip Error); IF b Subscribe THEN b Subscribe:= FALSE; b Success:= fb[IEDName]. IEDLD1. LLN0.gocb01. Subscriber. Enable(ip Adapter:=fb Adapter, ip Error=>ip Err or); b Success:= fb[IEDName]. IEDLD1. LLN0.gocb02. Subscriber. Enable(ip Adapter:=fb Adapter, ip Error=>ip Err or); b Success:= fb[IEDName]. IEDLD1. LLN0.gocb03. Subscriber. Enable(ip Adapter:=fb Adapter, ip Error=>ip Err or); ELSIF b Unsubscribe THEN b Unsubscribe:= FALSE; b Success:= fb[IEDName]. IEDLD1. LLN0.gocb01. Subscriber. Disable(ip Error=>ip Error); b Success:= fb[IEDName]. IEDLD1. LLN0.gocb02. Subscriber. Disable(ip Error=>ip Error); b Success:= fb[IEDName]. IEDLD1. LLN0.gocb03. Subscriber. Disable(ip Error=>ip Error); ELSE b Success:= fb[IEDName]. IEDLD1. LLN0.gocb01. Subscriber. Execute(ip Error=>ip Error); 86 Version: 1.7.1 TF6510
## Page 87

Configuration b Success:= fb[IEDName]. IEDLD1. LLN0.gocb02. Subscriber. Execute(ip Error=>ip Error); b Success:= fb[IEDName]. IEDLD1. LLN0.gocb03. Subscriber. Execute(ip Error=>ip Error); END_IF 5.9.1.1.6 MAIN The Twin CAT PLC project contains a "MAIN" program as standard. This is called cyclically by a Twin CAT task and in turn calls the program "P_IEC61850MAIN". Full description [} 29] Syntax Definition: PROGRAM MAIN VAR END_VAR P_IEC61850MAIN(); 5.9.1.1.7 P_IEC61850MAIN The program "P_IEC61850MAIN" encapsulates the call of the Client block and of the optional GSE block, separates the IEC 61850 communication from the remainder of the PLC machine program and helps, for example, with the implementation of further Clients. Full description [} 29] Syntax Definition: PROGRAM P_IEC61850MAIN VAR END_VAR fb[IEDName]Client(); fb[IEDName]Gse(); TF6510 Version: 1.7.1 87
## Page 88

Configuration 5.9.1.2 Server 88 Version: 1.7.1 TF6510
## Page 89

Configuration Custom enum types: User-defined enum types that do not exist in the standard system. GVL: In the Global Variable List, at least one instance of the server session function block, the IED data model function block instance, and optionally one or more GOOSE communication function block instances are instantiated and initialized. In addition, the code version used during code generation and the version of the Twin CAT Telecontrol Configurator used are also stored there. Datamodel: The entire hierarchical structure of the IED data model as function blocks. Also includes the IED block that is instantiated in the Global Variable List. GSE / GSE adapter: This function block connects a network adapter of the Twin CAT control computer with the GOOSE control blocks in the data model and controls the execution of these control blocks. To be able to use GOOSE communication, the real-time network adapter must be commissioned and linked. This is explained in RT Ethernet adapter configuration [} 38]. The GSE adapter is a network adapter for GOOSE communication whose network status is constantly queried by the GSE function block. Server: This block contains a state machine, the basic states of which are used in every Server example. The Server session block is responsible for establishing connections and exchanging data with a single Client. If there are multiple simultaneous Client connections, multiple instances of this block are required and instantiated. Main: The Twin CAT PLC project contains a "MAIN" program as standard. This is called cyclically by a Twin CAT task and in turn calls the program "P_IEC61850MAIN". The program "P_IEC61850MAIN" encapsulates the call of the Server session block and the optional GSE block. It also separates the IEC 61850 communication from the rest of the PLC machine program. 5.9.1.2.1 E_[Enum Name] User-defined enum types that do not exist in the standard system. The maximum indices are -32768 and 32767, because it is a 16-bit integer. The naming of the enum values from the ICD file is applied only as a comment. Syntax Example Definition: {attribute 'qualified_only'} {attribute 'strict'} TYPE E_[Enum Name] : ( e_1 := 1, (*Ok*) e_2 := 2, (*Warning*) e_3 := 3, (*Alarm*) ... ) SINT; END_TYPE TF6510 Version: 1.7.1 89
## Page 90

Configuration Values Name Description e_1 User-defined enum value, corresponds to "OK" in the ICD file. e_2 User-defined enum value, corresponds to "Warning" in the ICD file. e_3 User-defined enum value, corresponds to "Alarm" in the ICD file. … Any other user-defined enum values in the index range between -32768 and 32767. 5.9.1.2.2 Tc Telecontrol (GVL) In the Global Variable List, at least one instance of the server session function block, the IED data model function block instance, and optionally one or more GOOSE communication function block instances are instantiated and initialized. In addition, the code version used during code generation and the version of the Twin CAT Telecontrol Configurator used are also stored there. Full description [} 34] Syntax Definition: VAR_GLOBAL ip Creator : I_Acsi Code Creator Class := GVL_Acsi Vars. Creator. Set Code Rev(code Rev:=2 ). Set Gui Ver(major:=1, minor:=1, build:=94, revision:=1); fb[IEDName] : FB_IED_[IEDName]; fb[IEDName]Server : FB_iec61850Server Class := (ip IED:=fb[IEDName], settings:=(b Enable:=T RUE, s Local Host:='127.0.0.1')); fb[IEDName]Server Session1 : FB_[IEDName]Server Session := (fb Connection:=(ip Server:=fb[IEDName]Se rver, settings:=(b Enable:=TRUE))); fb[IEDName]Gse : FB_[IEDName]Gse := (fb Adapter:=(ip IED:=fb[IEDName], settings:=(s Mult icast Addr:='01-0C-CD-01-00-00', e Dispatch Mode:=E_Gse Dispatch Mode. Non Promiscuous))); END_VAR 5.9.1.2.3 FB_[Enum Name] User-defined enum types that do not exist in the standard system. Full description [} 99] Syntax Definition: {attribute 'no_explicit_call' := 'Direct call not allowed for type FB_[Enum Name]'} {attribute 'call_after_init'} FUNCTION_BLOCK FB_[Enum Name] EXTENDS FB_Acsi BAType ENUMERATED VAR _e Value: E_Custom Enum Type; _e Config: E_Custom Enum Type; {attribute 'hide'} ip Init: I_Acsi Common Attribute Class := THIS^. Add DAValue(e P:=E_Acsi P. Actual, in:=_e Value). Add DAVal ue(e P:=E_Acsi P. Config, in:=_e Config). Add DAType(in:=THIS^. T(in:=E_Acsi Basic Type. Enum)); END_VAR 5.9.1.2.4 FB_[IEDName]Gse This function block connects a network adapter of the Twin CAT control computer with the GOOSE control blocks in the data model and controls the execution of these control blocks. To be able to use GOOSE communication, the real-time network adapter must be commissioned and linked. This is explained in RT Ethernet adapter configuration [} 38]. Full description [} 34] 90 Version: 1.7.1 TF6510
## Page 91

Configuration Syntax Definition: FUNCTION_BLOCK FB_[IEDName]Gse IMPLEMENTS I_Gse Link Status Event Sink VAR_INPUT fb Adapter : FB_Gse Adapter Class := (ip Link Status:=THIS^); END_VAR VAR e Link Status : E_Gse Link Status; b Success : BOOL; ip Error : I_Service Error Class; b Start : BOOL := TRUE; b Stop : BOOL; b Update : BOOL; END_VAR b Success:= fb Adapter. Execute(ip Error=>ip Error); IF b Start THEN b Start:= FALSE; b Success:= fb[IEDName]. IEDLD1. LLN0.gocb01. Publisher. Start(ip Adapter:=fb Adapter, ip Error=>ip Error ); b Success:= fb[IEDName]. IEDLD1. LLN0.gocb02. Publisher. Start(ip Adapter:=fb Adapter, ip Error=>ip Error ); b Success:= fb[IEDName]. IEDLD1. LLN0.gocb03. Publisher. Start(ip Adapter:=fb Adapter, ip Error=>ip Error ); ELSIF b Stop THEN b Stop:= FALSE; b Success:= fb[IEDName]. IEDLD1. LLN0.gocb01. Publisher. Stop(ip Error=>ip Error); b Success:= fb[IEDName]. IEDLD1. LLN0.gocb02. Publisher. Stop(ip Error=>ip Error); b Success:= fb[IEDName]. IEDLD1. LLN0.gocb03. Publisher. Stop(ip Error=>ip Error); ELSIF b Update THEN b Update:= FALSE; b Success:= fb[IEDName]. IEDLD1. LLN0.gocb01. Publisher. Update(ip Error=>ip Error); b Success:= fb[IEDName]. IEDLD1. LLN0.gocb02. Publisher. Update(ip Error=>ip Error); b Success:= fb[IEDName]. IEDLD1. LLN0.gocb03. Publisher. Update(ip Error=>ip Error); ELSE b Success:= fb[IEDName]. IEDLD1. LLN0.gocb01. Publisher. Execute(ip Error=>ip Error); b Success:= fb[IEDName]. IEDLD1. LLN0.gocb02. Publisher. Execute(ip Error=>ip Error); b Success:= fb[IEDName]. IEDLD1. LLN0.gocb03. Publisher. Execute(ip Error=>ip Error); END_IF The GSE block implements the "I_Gse Link Status Event Sink" interface. The method: "On Link Status Change" belongs to this interface implementation and is called whenever the status of the network connection (at the network adapter) changes. The PLC application can, for example, query or check the network connection status via "e Link Status" variable. METHOD On Link Status Change VAR_INPUT ip Adapter : I_Gse Adapter Class; e Status : E_Gse Link Status; END_VAR VAR END_VAR e Link Status:= e Status; 5.9.1.2.5 FB_[IEDName]Server Session This block contains a state machine, the basic states of which are used in every Server example. The Server session block is responsible for establishing connections and exchanging data with a single Client. If there are multiple simultaneous Client connections, multiple instances of this block are required and instantiated. Full description [} 34] Syntax Definition: FUNCTION_BLOCK FB_[IEDName]Server Session VAR_INPUT fb Connection : FB_iec61850Connection Class := (ip Abort Ind:=THIS^, ip Associate Ind:=THIS^, ip Re lease Ind:=THIS^); END_VAR TF6510 Version: 1.7.1 91
## Page 92

Configuration VAR _b Abort : BOOL; _b Disconnect : BOOL; state : BYTE; e State : E_Async Environment State; b Busy : BOOL; b Success : BOOL; ip Result : I_Async Service Result Class; s Last Error Result : T_Max String; fb Abort Reason : FB_Service Error Class := (st Error:=SUCCESS_EVENT); s Last Abort Reason : T_Max String; END_VAR fb Connection. Execute(); e State:= fb Connection.e State; CASE state OF 0: IF _b Abort THEN _b Abort:= FALSE; b Success:= fb Connection. Abort Req(ip Reason:=fb Abort Reason, ip Sink:=0, ip Result=>ip Result) ; state:= SEL(b Success, 100, 1); ELSIF e State = E_Async Environment State. Established AND _b Disconnect THEN _b Disconnect:= FALSE; b Success:= fb Connection. Release Req(ip Sink:=0, ip Result=>ip Result); state:= SEL(b Success, 100, 1); ELSIF e State = E_Async Environment State. Established THEN state:= 10; END_IF _b Disconnect:= FALSE; 1: IF ip Result <> 0 THEN ip Result. Execute(); IF NOT (b Busy:=ip Result. Is Busy()) THEN state:= SEL(ip Result. Is Completed(), 100, 0); END_IF END_IF 10: state:= 0; 100: state:= 0; IF ip Result <> 0 THEN s Last Error Result:= ip Result. Dump(); END_IF END_CASE 5.9.1.2.6 MAIN The Twin CAT PLC project contains a "MAIN" program as standard. This is called cyclically by a Twin CAT task and in turn calls the program "P_IEC61850MAIN". Full description [} 34] Syntax Definition: PROGRAM MAIN VAR END_VAR P_IEC61850MAIN(); 5.9.1.2.7 P_IEC61850MAIN The program "P_IEC61850MAIN" encapsulates the call of the Server session block and the optional GSE block. It also separates the IEC 61850 communication from the rest of the PLC machine program. Full description [} 34] Syntax Definition: 92 Version: 1.7.1 TF6510
## Page 93

Configuration PROGRAM P_IEC61850MAIN VAR END_VAR fb[IEDName]Server. Execute(); fb[IEDName]Server Session1(); fb[IEDName]Gse(); 5.10 Custom Logical Node Groups With the function Custom Logical Node Groups it is possible to define own Logical Node Groups. The new elements are written to a private database. This way, they are also available again for each new configuration. In the shown window Name and Description of the Logical Node Group can be adjusted. By confirming with the button Create the new Logical Node Group is written into the private database and is available for configuration from now on. At the top of the window, you can also select an already created Logical Node Group to edit or delete it. 5.11 Custom Logical Nodes With the function Custom Logical Nodes it is possible to define own Logical Nodes or to extend existing Logical Nodes. The new elements are written to a private database. This way, they are also available again for each new configuration. TF6510 Version: 1.7.1 93
## Page 94

Configuration In the window shown, you can define your own Logical Nodes. For this purpose, for each Data Object Name and a Common Data Class can be selected. Furthermore, the data object can be assigned to a group, so that a categorization in the configurator leads to an increase in clarity. In the Presence column you can set whether the element should be added by default or whether it should be optional. By using the arrows on the left side of the window, the order of the Data Objects can be adjusted. In addition, new Data Objects can be added or existing ones deleted. In the figure shown here, the logical node defined in the standard XSWI (Circuit Switch) is extended in a user-defined way. For this purpose, a Logical Node can be selected for editing at the top right of the window. One custom Logical Node with the same name can be created per Logical Node from the default. Additional custom Logical Nodes must be given individual names. By confirming with the button Create the new Logical Node is written into the private database and is available for configuration from now on. 5.12 Custom Common Data Classes With the function Custom Common Data Classes it is possible to define own Common Data Classes or to extend existing Common Data Classes. The new elements are written to a private database. This way, they are also available again for each new configuration. 94 Version: 1.7.1 TF6510
## Page 95

Configuration In the window shown, you can define your own Common Data Classes. For this purpose, a name, data type, a functional constraint and the trigger options can be set for each Data Attribute. In the Presence column you can set whether the element should be added by default or whether it should be optional. Using the arrows on the left side of the window, the order of the Data Attributes can be adjusted. In addition, new Data Attributes can be added or existing ones deleted. In addition, the Sub Data Objects of the Common Data Class can be configured. Name and Common Data Class can be selected for the individual Sub Data Objects. In the Presence column you can set whether the element should be added by default or whether it should be optional. By using the arrows on the left side of the window, the order of the Sub Data Objects can be adjusted. In addition, new Sub Data Objects can be added or existing ones deleted. TF6510 Version: 1.7.1 95
## Page 96

Configuration In the figure shown here, the Common Data Class DEL (Delta) defined in the standard is extended in a user- defined way. For this purpose, a Common Data Class can be selected for editing at the top right of the window. One user-defined Common Data Class with the same name can be created per Common Data Class from the standard. Additional user-defined Common Data Classes must be given individual names. By confirming with the button Create the new Common Data Class is written into the private database and is available for configuration from now on. 96 Version: 1.7.1 TF6510
## Page 97

PLC API 6 PLC API 6.1 Libraries Twin CAT IEC 61131 PLC libraries. • Tc3_Acsi (Tc3_Acsi.compiled-library) • Tc3_Ber (Tc3_Ber.compiled-library) • Tc3_Collections (Tc3_Collections.compiled-library) • Tc3_Gse (Tc3_Gse.compiled-library) • Tc3_iec61850 (Tc3_iec61850.compiled-library) • Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) • Tc3_Mms (Tc3_Mms.compiled-library) • Tc3_Rfc1006 (Tc3_Rfc1006.compiled-library) • Tc3_Sockets (Tc3_Sockets.compiled-library) • Tc3_Tpkt (Tc3_Tpkt.compiled-library) • Tc3_Ulosi (Tc3_Ulosi.compiled-library) 6.2 Namespaces 6.2.1 Twin CAT Type System namespace Type: Twin CAT system resource Library: Not required Global Variable Lists • TC_EVENTS [} 528] • TC_EVENT_CLASSES [} 615] 6.2.2 Tc3_Acsi namespace Type: IEC 61131 PLC library Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Global Variable Lists • GVL_Acsi [} 618] Parameter lists • Param_Acsi [} 522] 6.2.3 Tc3_Ber namespace Type: IEC 61131 PLC library Library: Tc3_Ber (Tc3_Ber.compiled-library) 6.2.4 Tc3_Collections namespace Type: IEC 61131 PLC library Library: Tc3_Collections (Tc3_Collections.compiled-library) TF6510 Version: 1.7.1 97
## Page 98

PLC API 6.2.5 Tc3_Gse namespace Type: IEC 61131 PLC library Library: Tc3_Gse (Tc3_Gse.compiled-library) 6.2.6 Tc3_iec61850_8_1 namespace Type: IEC 61131 PLC library Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) 6.2.7 Tc3_iec61850 namespace Type: IEC 61131 PLC library Library: Tc3_iec61850 (Tc3_iec61850.compiled-library) 6.2.8 Tc3_Mms namespace Type: IEC 61131 PLC library Library: Tc3_Mms (Tc3_Mms.compiled-library) 6.2.9 Tc3_Rfc1006 namespace Type: IEC 61131 PLC library Library: Tc3_Rfc1006 (Tc3_Rfc1006.compiled-library) 6.2.10 Tc3_Sockets namespace Type: IEC 61131 PLC library Library: Tc3_Sockets (Tc3_Sockets.compiled-library) 6.2.11 Tc3_Tpkt namespace Type: IEC 61131 PLC library Library: Tc3_Tpkt (Tc3_Tpkt.compiled-library) 6.2.12 Tc3_Ulosi namespace Type: IEC 61131 PLC library Library: Tc3_Ulosi (Tc3_Ulosi.compiled-library) 6.2.13 Tc2_Tcp Ip namespace Type: IEC 61131 PLC library Library: Tc2_Tcp Ip (Tc2_Tcp Ip.compiled-library) 6.2.14 Tc2_System namespace Type: IEC 61131 PLC library Library: Tc2_System (Tc2_System.compiled-library) 98 Version: 1.7.1 TF6510
## Page 99

PLC API 6.3 Function blocks 6.3.1 Data model 6.3.1.1 Data attributes 6.3.1.1.1 FB_Acsi BAType BOOLEAN Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType BOOLEAN FUNCTION_BLOCK FB_Acsi BAType BOOLEAN EXTENDS FB_Acsi Common Attribute Class Properties Name Type Access Description b Value BOOL Get,Set Attribute value. 6.3.1.1.2 FB_Acsi BAType CODEDENUM Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType CODEDENUM FUNCTION_BLOCK FB_Acsi BAType CODEDENUM EXTENDS FB_Acsi Common Attribute Class Properties Name Type Access Description b Fix Len BOOL Get,Set Attribute data length (FALSE:= variable length (default value), TRUE:= fixed length). s Any T_Max String Get, Set Attribute value as formatted binary string. 6.3.1.1.3 FB_Acsi BAType ENUMERATED Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED FUNCTION_BLOCK FB_Acsi BAType ENUMERATED EXTENDS FB_Acsi Common Attribute Class TF6510 Version: 1.7.1 99
## Page 100

PLC API Properties Name Type Access Description i Any SINT Get,Set Attribute value as 8-bit signed integer. i16Any INT Get, Set Attribute value as 16-bit signed integer. 6.3.1.1.4 FB_Acsi BAType FLOAT32 Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType FLOAT32 FUNCTION_BLOCK FB_Acsi BAType FLOAT32 EXTENDS FB_Acsi Common Attribute Class Properties Name Type Access Description f Value REAL Get,Set Attribute value, 32-bit floating point number with simple accuracy according to IEEE 754. 6.3.1.1.5 FB_Acsi BAType FLOAT64 Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] - > FB_Acsi BAType FLOAT64 FUNCTION_BLOCK FB_Acsi BAType FLOAT64 EXTENDS FB_Acsi Common Attribute Class Properties Name Type Access Description f Value LREAL Get,Set Attribute value, 64-bit floating point number with double accuracy according to IEEE 754. 6.3.1.1.6 FB_Acsi BAType INT8 Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType INT8 FUNCTION_BLOCK FB_Acsi BAType INT8 EXTENDS FB_Acsi Common Attribute Class Properties Name Type Access Description i Value SINT Get,Set Attribute value. 100 Version: 1.7.1 TF6510
## Page 101

PLC API 6.3.1.1.7 FB_Acsi BAType INT8U Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType INT8U FUNCTION_BLOCK FB_Acsi BAType INT8U EXTENDS FB_Acsi Common Attribute Class Properties Name Type Access Description n Value BYTE Get,Set Attribute value. 6.3.1.1.8 FB_Acsi BAType INT16 Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType INT16 FUNCTION_BLOCK FB_Acsi BAType INT16 EXTENDS FB_Acsi Common Attribute Class Properties Name Type Access Description i Value INT Get,Set Attribute value. 6.3.1.1.9 FB_Acsi BAType INT16U Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType INT16U FUNCTION_BLOCK FB_Acsi BAType INT16U EXTENDS FB_Acsi Common Attribute Class Properties Name Type Access Description n Value WORD Get,Set Attribute value. 6.3.1.1.10 FB_Acsi BAType INT24 Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType INT24 TF6510 Version: 1.7.1 101
## Page 102

PLC API FUNCTION_BLOCK FB_Acsi BAType INT24 EXTENDS FB_Acsi Common Attribute Class Properties Name Type Access Description i Value T_INT24 [} 516] Get,Set Attribute value. 6.3.1.1.11 FB_Acsi BAType INT24U Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType INT24U FUNCTION_BLOCK FB_Acsi BAType INT24U EXTENDS FB_Acsi Common Attribute Class Properties Name Type Access Description n Value T_UINT24 [} 519] Get,Set Attribute value. 6.3.1.1.12 FB_Acsi BAType INT32 Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType INT32 FUNCTION_BLOCK FB_Acsi BAType INT32 EXTENDS FB_Acsi Common Attribute Class Properties Name Type Access Description i Value DINT Get,Set Attribute value. 6.3.1.1.13 FB_Acsi BAType INT32U Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType INT32U FUNCTION_BLOCK FB_Acsi BAType INT32U EXTENDS FB_Acsi Common Attribute Class Properties Name Type Access Description n Value DWORD Get,Set Attribute value. 102 Version: 1.7.1 TF6510
## Page 103

PLC API 6.3.1.1.14 FB_Acsi BAType INT64 Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType INT64 FUNCTION_BLOCK FB_Acsi BAType INT64 EXTENDS FB_Acsi Common Attribute Class Properties Name Type Access Description i Value LINT Get,Set Attribute value. 6.3.1.1.15 FB_Acsi BAType INT64U Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType INT64U FUNCTION_BLOCK FB_Acsi BAType INT64U EXTENDS FB_Acsi Common Attribute Class Properties Name Type Access Description n Value LWORD Get,Set Attribute value. 6.3.1.1.16 FB_Acsi BAType INT128 Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType INT128 FUNCTION_BLOCK FB_Acsi BAType INT128 EXTENDS FB_Acsi Common Attribute Class Properties Name Type Access Description i Value T_INT28 [} 517] Get,Set Attribute value. 6.3.1.1.17 FB_Acsi BAType INT128U Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy TF6510 Version: 1.7.1 103
## Page 104

PLC API FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType INT128U FUNCTION_BLOCK FB_Acsi BAType INT128U EXTENDS FB_Acsi Common Attribute Class Properties Name Type Access Description n Value T_UINT128 [} 519] Get,Set Attribute value. 6.3.1.1.18 FB_Acsi BAType OCTETSTRING Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType OCTETSTRING FUNCTION_BLOCK FB_Acsi BAType OCTETSTRING EXTENDS FB_Acsi Common Attribute Class Properties Name Type Access Description b Fix Len BOOL Get,Set Attribute data length (FALSE:= variable length (default value), TRUE:= fixed length). s Any T_Max String Get, Set Attribute value as formatted hexadecimal string. Samples: "AA BB CC DD 01 02" or "00 12 34". 6.3.1.1.19 FB_Acsi BAType UNICODESTRING Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType UNICODESTRING FUNCTION_BLOCK FB_Acsi BAType UNICODESTRING EXTENDS FB_Acsi Common Attribute Class Properties Name Type Access Description b Fix Len BOOL Get,Set Attribute data length (FALSE:= variable length (default value), TRUE:= fixed length). s Any WSTRING(255) Get, Set Attribute value. 6.3.1.1.20 FB_Acsi BAType VISIBLESTRING Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType VISIBLESTRING 104 Version: 1.7.1 TF6510
## Page 105

PLC API FUNCTION_BLOCK FB_Acsi BAType VISIBLESTRING EXTENDS FB_Acsi Common Attribute Class Properties Name Type Access Description b Fix Len BOOL Get,Set Attribute data length (FALSE:= variable length (default value), TRUE:= fixed length). s Any T_Max String Get, Set Attribute value. 6.3.1.1.21 FB_Acsi DAType Addr Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType OCTETSTRING [} 104] -> FB_Acsi DAType Addr FUNCTION_BLOCK FB_Acsi DAType Addr EXTENDS FB_Acsi BAType OCTETSTRING Properties Name Type Access Description o Value T_OCTET6 [} 518] Get,Set Attribute value. 6.3.1.1.22 FB_Acsi DAType Adj St Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Adj St FUNCTION_BLOCK FB_Acsi DAType Adj St EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Adj St [} 435] Get,Set Attribute value. 6.3.1.1.23 FB_Acsi DAType Alm Lev Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Alm Lev FUNCTION_BLOCK FB_Acsi DAType Alm Lev EXTENDS FB_Acsi BAType ENUMERATED TF6510 Version: 1.7.1 105
## Page 106

PLC API Properties Name Type Access Description e Value E_Acsi Alm Lev [} 435] Get,Set Attribute value. 6.3.1.1.24 FB_Acsi DAType Analogue Value Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi DAType Analogue Value FUNCTION_BLOCK FB_Acsi DAType Analogue Value EXTENDS FB_Acsi Common Attribute Class Inputs Name Type Description i FB_Acsi BAType INT32 [} 102] Attribute for displaying the analog value as an integer. f FB_Acsi BAType FLOAT32 [} 100] Attribute for displaying the analog value as a floating point number. Methods Name Description Get Float PVal [} 106] Reads the floating point process value. Get Int PVal [} 107] Reads the integer process value. Set Float PVal [} 107] Writes the floating point process value. Set Int PVal [} 107] Writes the integer process value. Set PVal [} 107] Writes the floating point and integer process value. Properties Name Type Access Description b Presence BOOL Get,Set Attribute visibility. [} 338] Fc [} 338] DWORD Get,Set Functional group. f Value REAL Get,Set Value of the data attribute: f. i Value DINT Get,Set Value of the data attribute: i. 6.3.1.1.24.1 Get Float PVal Reads the attribute "f" of "Analog Value" (floating-point representation of the analog value) and scales the attribute value into a Twin CAT process value of type: LREAL. METHOD Get Float PVal : BOOL VAR_INPUT ip Unit : I_Acsi DAType Unit; END_VAR VAR_OUTPUT f Process : LREAL; END_VAR 106 Version: 1.7.1 TF6510
## Page 107

PLC API 6.3.1.1.24.2 Get Int PVal Reads the attribute "i" of "Analog Value" (integer representation of the analog value) and scales the attribute value into a Twin CAT process value of type: LREAL. METHOD Get Int PVal : BOOL VAR_INPUT ip SVC : I_Acsi DAType Scaled Value Config; END_VAR VAR_OUTPUT f Process : LREAL; END_VAR 6.3.1.1.24.3 Set Float PVal Scales a Twin CAT process value of type: LREAL and writes the attribute value to the attribute "f" of "Analog Value" (floating-point representation of the analog value). METHOD Set Float PVal : BOOL VAR_INPUT f Process : LREAL; ip Unit : I_Acsi DAType Unit; END_VAR 6.3.1.1.24.4 Set Int PVal Scales a Twin CAT process value of type: LREAL and writes the attribute value to the attribute "i" of "Analog Value" (integer representation of the analog value). METHOD Set Int PVal : BOOL VAR_INPUT f Process : LREAL; ip SVC : I_Acsi DAType Scaled Value Config; END_VAR 6.3.1.1.24.5 Set PVal Scales a Twin CAT process value of type: LREAL and writes the attribute value to the attribute of "i" or "f" of "Analog Value" (analog value as integer or floating point number). METHOD Set PVal : BOOL VAR_INPUT f Process : LREAL; ip Unit : I_Acsi DAType Unit; ip SVC : I_Acsi DAType Scaled Value Config; END_VAR 6.3.1.1.25 FB_Acsi DAType Ang Ref Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Ang Ref FUNCTION_BLOCK FB_Acsi DAType Ang Ref EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Ang Ref [} 436] Get,Set Attribute value. TF6510 Version: 1.7.1 107
## Page 108

PLC API 6.3.1.1.26 FB_Acsi DAType Appl Add Cause Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Appl Add Cause FUNCTION_BLOCK FB_Acsi DAType Appl Add Cause EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Appl Add Cause Get,Set Attribute value. [} 437] 6.3.1.1.27 FB_Acsi DAType Appl Error Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Appl Error FUNCTION_BLOCK FB_Acsi DAType Appl Error EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Appl Error [} 438] Get,Set Attribute value. 6.3.1.1.28 FB_Acsi DAType Auto Rec St Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Auto Rec St FUNCTION_BLOCK FB_Acsi DAType Auto Rec St EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Auto Rec St [} 439] Get,Set Attribute value. 6.3.1.1.29 FB_Acsi DAType Beh Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy 108 Version: 1.7.1 TF6510
## Page 109

PLC API FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Beh FUNCTION_BLOCK FB_Acsi DAType Beh EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Beh [} 439] Get,Set Attribute value. 6.3.1.1.30 FB_Acsi DAType Calendar Time Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi DAType Calendar Time FUNCTION_BLOCK FB_Acsi DAType Calendar Time EXTENDS FB_Acsi Common Attribute Class Inputs Name Type Description occ FB_Acsi BAType INT16U [} 101] Data attribute. occ Type FB_Acsi DAType Occ Type [} 122] Data attribute. occ Per FB_Acsi DAType Occ Per [} 122] Data attribute. week Day FB_Acsi DAType Week Day [} 146] Data attribute. month FB_Acsi DAType Month [} 121] Data attribute. day FB_Acsi BAType INT8U [} 101] Data attribute. hr FB_Acsi BAType INT8U [} 101] Data attribute. mn FB_Acsi BAType INT8U [} 101] Data attribute. Properties Name Type Access Description b Presence BOOL Get,Set Attribute visibility. [} 338] Fc [} 338] DWORD Get,Set Functional group. n Occ WORD Get,Set Value of the data attribute. e Occ Type E_Acsi Occ Type Get,Set Value of the data attribute. [} 456] e Occ Per E_Acsi Occ Per Get,Set Value of the data attribute. [} 456] e Week Day E_Acsi Week Day Get,Set Value of the data attribute. [} 481] e Month E_Acsi Month [} 454] Get,Set Value of the data attribute. n Day BYTE Get,Set Value of the data attribute. n Hr BYTE Get,Set Value of the data attribute. n Mn BYTE Get,Set Value of the data attribute. TF6510 Version: 1.7.1 109
## Page 110

PLC API 6.3.1.1.31 FB_Acsi DAType CBOp Cap Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType CBOp Cap FUNCTION_BLOCK FB_Acsi DAType CBOp Cap EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi CBOp Cap [} 440] Get,Set Attribute value. 6.3.1.1.32 FB_Acsi DAType Cell Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi DAType Cell FUNCTION_BLOCK FB_Acsi DAType Cell EXTENDS FB_Acsi Common Attribute Class Inputs Name Type Description x Start FB_Acsi DAType Analogue Value [} 106] Data attribute. x End FB_Acsi DAType Analogue Value [} 106] Data attribute. y Start FB_Acsi DAType Analogue Value [} 106] Data attribute. y End FB_Acsi DAType Analogue Value [} 106] Data attribute. Properties Name Type Access Description b Presence BOOL Get,Set Attribute visibility. [} 338] Fc [} 338] DWORD Get,Set Functional group. f XStart REAL Get,Set Value of the data attribute. f XEnd REAL Get,Set Value of the data attribute. f YStart REAL Get,Set Value of the data attribute. f YEnd REAL Get,Set Value of the data attribute. 6.3.1.1.33 FB_Acsi DAType Check Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy 110 Version: 1.7.1 TF6510
## Page 111

PLC API FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType CODEDENUM [} 99] -> FB_Acsi DAType Check FUNCTION_BLOCK FB_Acsi DAType Check EXTENDS FB_Acsi BAType CODEDENUM Properties Name Type Access Description e Value E_Acsi Check [} 440] Get,Set Attribute value as enumeration type. b0 BOOL Get,Set Attribute value. b1 BOOL Get,Set Attribute value. n Value BYTE(0..3) Get,Set Attribute value in Twin CAT PLC BYTE format. 6.3.1.1.34 FB_Acsi DAType Clc Intv Typ Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Clc Intv Typ FUNCTION_BLOCK FB_Acsi DAType Clc Intv Typ EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Clc Intv Typ [} 441] Get,Set Attribute value. 6.3.1.1.35 FB_Acsi DAType Clc Mod Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Clc Mod FUNCTION_BLOCK FB_Acsi DAType Clc Mod EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Clc Mod [} 441] Get,Set Attribute value. 6.3.1.1.36 FB_Acsi DAType Clc Mth Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Clc Mth FUNCTION_BLOCK FB_Acsi DAType Clc Mth EXTENDS FB_Acsi BAType ENUMERATED TF6510 Version: 1.7.1 111
## Page 112

PLC API Properties Name Type Access Description e Value E_Acsi Clc Mth [} 442] Get,Set Attribute value. 6.3.1.1.37 FB_Acsi DAType Clc Rf Typ Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Clc Rf Typ FUNCTION_BLOCK FB_Acsi DAType Clc Rf Typ EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Clc Rf Typ [} 442] Get,Set Attribute value. 6.3.1.1.38 FB_Acsi DAType Clc Tot VA Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Clc Tot VA FUNCTION_BLOCK FB_Acsi DAType Clc Tot VA EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Clc Tot VA [} 443] Get,Set Attribute value. 6.3.1.1.39 FB_Acsi DAType Cmd Qual Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Cmd Qual FUNCTION_BLOCK FB_Acsi DAType Cmd Qual EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Cmd Qual [} 443] Get,Set Attribute value. 112 Version: 1.7.1 TF6510
## Page 113

PLC API 6.3.1.1.40 FB_Acsi DAType Ctl Models Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Ctl Models FUNCTION_BLOCK FB_Acsi DAType Ctl Models EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Ctl Models [} 444] Get,Set Attribute value. 6.3.1.1.41 FB_Acsi DAType Currency Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType VISIBLESTRING [} 104] -> FB_Acsi DAType Currency FUNCTION_BLOCK FB_Acsi DAType Currency EXTENDS FB_Acsi BAType VISIBLESTRING Properties Name Type Access Description s Value STRING(3) Get,Set Attribute value. 6.3.1.1.42 FB_Acsi DAType Cyc Tr Mod Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Cyc Tr Mod FUNCTION_BLOCK FB_Acsi DAType Cyc Tr Mod EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Cyc Tr Mod [} 445] Get,Set Attribute value. 6.3.1.1.43 FB_Acsi DAType Dbpos Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy TF6510 Version: 1.7.1 113
## Page 114

PLC API FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType CODEDENUM [} 99] -> FB_Acsi DAType Dbpos FUNCTION_BLOCK FB_Acsi DAType Dbpos EXTENDS FB_Acsi BAType CODEDENUM Properties Name Type Access Description e Value E_Acsi Dbpos [} 445] Get,Set Attribute value as enumeration type. b0 BOOL Get,Set Attribute value. b1 BOOL Get,Set Attribute value. n Value BYTE(0..3) Get,Set Attribute value in Twin CAT PLC BYTE format. 6.3.1.1.44 FB_Acsi DAType Dir Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Dir FUNCTION_BLOCK FB_Acsi DAType Dir EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Dir [} 446] Get,Set Attribute value. 6.3.1.1.45 FB_Acsi DAType Dir Mod Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Dir Mod FUNCTION_BLOCK FB_Acsi DAType Dir Mod EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Dir Mod [} 446] Get,Set Attribute value. 6.3.1.1.46 FB_Acsi DAType EEHealth Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType EEHealth FUNCTION_BLOCK FB_Acsi DAType EEHealth EXTENDS FB_Acsi BAType ENUMERATED 114 Version: 1.7.1 TF6510
## Page 115

PLC API Properties Name Type Access Description e Value E_Acsi EEHealth [} 447] Get,Set Attribute value. 6.3.1.1.47 FB_Acsi DAType Entry ID Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType OCTETSTRING [} 104] -> FB_Acsi DAType Entry ID FUNCTION_BLOCK FB_Acsi DAType Entry ID EXTENDS FB_Acsi BAType OCTETSTRING Properties Name Type Access Description n Value LWORD Get,Set Attribute value in Twin CAT PLC LWORD format. The 8 bytes of the octet string can be set or queried as a hexadecimal value. Samples: LWORD#16#1122334455667788 corresponds to Octet String: „11 22 33 44 55 66 77 88“. LWORD#16#000000000000AABB corresponds to Octet String: „00 00 00 00 00 00 AA BB“. LWORD#16#AABB000000000000 corresponds to Octet String: „AA BB 00 00 00 00 00 00“. o Value T_OCTET8 Get,Set Attribute value. [} 518] 6.3.1.1.48 FB_Acsi DAType Entry Time Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi DAType Entry Time FUNCTION_BLOCK FB_Acsi DAType Entry Time EXTENDS FB_Acsi Common Attribute Class TF6510 Version: 1.7.1 115
## Page 116

PLC API Properties Name Type Ac- Description cess t Value T_Binary Time Get,S Attribute value as a structured type. et [} 516] Time Of Da TOD Get,S Attribute value: Number of milliseconds since midnight of the current y et day in Twin CAT PLC TOD format. Day WORD Get,S Attribute value: Number of days since 1 January 1984 in Twin CAT et PLC WORD format. D DATE Get,S Attribute value: Number of days since 1 January 1984 in Twin CAT et PLC DATE format. s Value STRING(26) Get,S Attribute value: Binary time information as a string with the following et format: „BT#1984-01-01-00:00:00.000“. n Value LWORD(0..16#FFF Get,S Attribute value in Twin CAT PLC LWORD format. (only the lowest 48 FFFFFFFFF) et bits are used). 6.3.1.1.49 FB_Acsi DAType Fail Mod Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Fail Mod FUNCTION_BLOCK FB_Acsi DAType Fail Mod EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Fail Mod [} 447] Get,Set Attribute value. 6.3.1.1.50 FB_Acsi DAType Fan Ctl Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Fan Ctl FUNCTION_BLOCK FB_Acsi DAType Fan Ctl EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Fan Ctl [} 447] Get,Set Attribute value. 6.3.1.1.51 FB_Acsi DAType Fan Ctl Gen Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy 116 Version: 1.7.1 TF6510
## Page 117

PLC API FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Fan Ctl Gen FUNCTION_BLOCK FB_Acsi DAType Fan Ctl Gen EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Fan Ctl Gen [} 448] Get,Set Attribute value. 6.3.1.1.52 FB_Acsi DAType Fil Typ Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Fil Typ FUNCTION_BLOCK FB_Acsi DAType Fil Typ EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Fil Typ [} 449] Get,Set Attribute value. 6.3.1.1.53 FB_Acsi DAType Flt Loop Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Flt Loop FUNCTION_BLOCK FB_Acsi DAType Flt Loop EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Flt Loop [} 450] Get,Set Attribute value. 6.3.1.1.54 FB_Acsi DAType Gn St Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Gn St FUNCTION_BLOCK FB_Acsi DAType Gn St EXTENDS FB_Acsi BAType ENUMERATED TF6510 Version: 1.7.1 117
## Page 118

PLC API Properties Name Type Access Description e Value E_Acsi Gn St [} 450] Get,Set Attribute value. 6.3.1.1.55 FB_Acsi DAType Health Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Health FUNCTION_BLOCK FB_Acsi DAType Health EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Health [} 451] Get,Set Attribute value. 6.3.1.1.56 FB_Acsi DAType Hv Ref Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Hv Ref FUNCTION_BLOCK FB_Acsi DAType Hv Ref EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Hv Ref [} 451] Get,Set Attribute value. 6.3.1.1.57 FB_Acsi DAType Intr Det Mth Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Intr Det Mth FUNCTION_BLOCK FB_Acsi DAType Intr Det Mth EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Intr Det Mth Get,Set Attribute value. [} 451] 118 Version: 1.7.1 TF6510
## Page 119

PLC API 6.3.1.1.58 FB_Acsi DAType Last Appl Error Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi DAType Appl Error FUNCTION_BLOCK FB_Acsi DAType Last Appl Error EXTENDS FB_Acsi Common Attribute Class IMPLEMENTS I_Acsi DATyp e Last Appl Error Interfaces Type Description I_Acsi DAType Last Appl Error [} 346] Interface pointer of the Last Appl Error object instance. Inputs Name Type Description Cntrl Obj FB_Acsi DAType Vis String129 [} 145] Data attribute. Error FB_Acsi DAType Appl Error [} 108] Data attribute. Origin FB_Acsi DAType Originator [} 126] Data attribute. ctl Num FB_Acsi BAType INT8U [} 101] Data attribute. Add Cause FB_Acsi DAType Appl Add Cause [} 108] Data attribute. Properties Name Type Access Description b Presence [} 338] BOOL Get,Set Attribute visibility. Fc [} 338] DWORD Get,Set Functional group. s Cntrl Obj STRING(129) Get,Set Attribute value. e Error E_Acsi Appl Error [} 438] Get,Set Attribute value. st Origin ST_Acsi Originator [} 499] Get,Set Attribute value. n Ctl Num BYTE Get,Set Attribute value. e Add Cause E_Acsi Appl Add Cause Get,Set Attribute value. [} 437] 6.3.1.1.59 FB_Acsi DAType Lev Mod Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Lev Mod FUNCTION_BLOCK FB_Acsi DAType Lev Mod EXTENDS FB_Acsi BAType ENUMERATED TF6510 Version: 1.7.1 119
## Page 120

PLC API Properties Name Type Access Description e Value E_Acsi Lev Mod [} 452] Get,Set Attribute value. 6.3.1.1.60 FB_Acsi DAType Liv Dea Mod Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Liv Dea Mod FUNCTION_BLOCK FB_Acsi DAType Liv Dea Mod EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Liv Dea Mod Get,Set Attribute value. [} 452] 6.3.1.1.61 FB_Acsi DAType Mech Health Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Mech Health FUNCTION_BLOCK FB_Acsi DAType Mech Health EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Mech Health Get,Set Attribute value. [} 454] 6.3.1.1.62 FB_Acsi DAType Mod Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149]-> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Mod FUNCTION_BLOCK FB_Acsi DAType Mod EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Mod [} 454] Get,Set Attribute value. 120 Version: 1.7.1 TF6510
## Page 121

PLC API 6.3.1.1.63 FB_Acsi DAType Month Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Month FUNCTION_BLOCK FB_Acsi DAType Month EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Month [} 454] Get,Set Attribute value. 6.3.1.1.64 FB_Acsi DAType Multiplier Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Multiplier FUNCTION_BLOCK FB_Acsi DAType Multiplier EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Multiplier [} 455] Get,Set Attribute value. 6.3.1.1.65 FB_Acsi DAType Object Name Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType VISIBLESTRING [} 104] -> FB_Acsi DAType Object Name FUNCTION_BLOCK FB_Acsi DAType Object Name EXTENDS FB_Acsi BAType VISIBLESTRING Properties Name Type Access Description s Value T_Acsi Object Name Get,Set Attribute value. [} 515] 6.3.1.1.66 FB_Acsi DAType Obj Ref Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy TF6510 Version: 1.7.1 121
## Page 122

PLC API FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType VISIBLESTRING [} 104] -> FB_Acsi DAType Obj Ref FUNCTION_BLOCK FB_Acsi DAType Obj Ref EXTENDS FB_Acsi BAType VISIBLESTRING Properties Name Type Access Description s Value T_Acsi Object Reference [} 515] Get,Set Attribute value. 6.3.1.1.67 FB_Acsi DAType Occ Per Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Occ Per FUNCTION_BLOCK FB_Acsi DAType Occ Per EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Occ Per [} 456] Get,Set Attribute value. 6.3.1.1.68 FB_Acsi DAType Occ Type Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Occ Type FUNCTION_BLOCK FB_Acsi DAType Occ Type EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Occ Type [} 456] Get,Set Attribute value. 6.3.1.1.69 FB_Acsi DAType Octet16 Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType OCTETSTRING [} 104] -> FB_Acsi DAType Octet16 FUNCTION_BLOCK FB_Acsi DAType Octet16 EXTENDS FB_Acsi BAType OCTETSTRING 122 Version: 1.7.1 TF6510
## Page 123

PLC API Properties Name Type Access Description o Value T_OCTET16 [} 518] Get,Set Attribute value. 6.3.1.1.70 FB_Acsi DAType Octet32 Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType OCTETSTRING [} 104] -> FB_Acsi DAType Octet32 FUNCTION_BLOCK FB_Acsi DAType Octet32 EXTENDS FB_Acsi BAType OCTETSTRING Properties Name Type Access Description o Value T_OCTET32 [} 518] Get,Set Attribute value. 6.3.1.1.71 FB_Acsi DAType Octet64 Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType OCTETSTRING [} 104] -> FB_Acsi DAType Octet64 FUNCTION_BLOCK FB_Acsi DAType Octet64 EXTENDS FB_Acsi BAType OCTETSTRING Properties Name Type Access Description o Value T_OCTET64 [} 518] Get,Set Attribute value. 6.3.1.1.72 FB_Acsi DAType Octet8 Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType OCTETSTRING [} 104] -> FB_Acsi DAType Octet8 FUNCTION_BLOCK FB_Acsi DAType Octet8 EXTENDS FB_Acsi BAType OCTETSTRING Properties Name Type Access Description o Value T_OCTET8 [} 518] Get,Set Attribute value. TF6510 Version: 1.7.1 123
## Page 124

PLC API 6.3.1.1.73 FB_Acsi DAType Op Mod Rect Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Op Mod Rect FUNCTION_BLOCK FB_Acsi DAType Op Mod Rect EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Op Mod Rect Get,Set Attribute value. [} 457] 6.3.1.1.74 FB_Acsi DAType Op Mod Syn Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Op Mod Syn FUNCTION_BLOCK FB_Acsi DAType Op Mod Syn EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Op Mod Syn Get,Set Attribute value. [} 457] 6.3.1.1.75 FB_Acsi DAType Opt Flds Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi DAType Opt Flds FUNCTION_BLOCK FB_Acsi DAType Opt Flds EXTENDS FB_Acsi Common Attribute Class 124 Version: 1.7.1 TF6510
## Page 125

PLC API Properties Name Type Access Description c Value ST_Acsi Optional Fields Get,Set Attribute value as a structured type. [} 498] Sequence Number BOOL Get,Set Attribute value. Report Time Stamp BOOL Get,Set Attribute value. Reason For Inclusion BOOL Get,Set Attribute value. Data Set Name BOOL Get,Set Attribute value. Data Reference BOOL Get,Set Attribute value. Buffer Overflow BOOL Get,Set Attribute value. Entry ID BOOL Get,Set Attribute value. Conf Revision BOOL Get,Set Attribute value. Segmentation BOOL Get,Set Attribute value. n Value WORD(0..1023) Get,Set Information about the optional fields transferred in the report in Twin CAT PLC WORD format (only the lower 10 bits are used). 6.3.1.1.76 FB_Acsi DAType Or Category Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Or Category FUNCTION_BLOCK FB_Acsi DAType Or Category EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Or Category Get,Set Attribute value. [} 458] 6.3.1.1.77 FB_Acsi DAType Or Ident Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType OCTETSTRING [} 104] -> FB_Acsi DAType Or Ident FUNCTION_BLOCK FB_Acsi DAType Or Ident EXTENDS FB_Acsi BAType OCTETSTRING Properties Name Type Access Description o Value T_OCTET64 [} 518] Get,Set Attribute value. TF6510 Version: 1.7.1 125
## Page 126

PLC API 6.3.1.1.78 FB_Acsi DAType Originator Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi DAType Originator FUNCTION_BLOCK FB_Acsi DAType Originator EXTENDS FB_Acsi Common Attribute Class Inputs Name Type Description or Cat FB_Acsi DAType Or Category [} 125] Data attribute. or Ident FB_Acsi DAType Or Ident [} 125] Data attribute. Properties Name Type Access Description b Presence BOOL Get,Set Attribute visibility. [} 338] Fc [} 338] DWORD Get,Set Functional group. st Origin ST_Acsi Originator Get,Set Attribute value as a structured type. [} 499] e Or Cat E_Acsi Or Category Get,Set Attribute value. [} 458] e Or Ident T_OCTET64 [} 518] Get,Set Attribute value. 6.3.1.1.79 FB_Acsi DAType Par Col Mod Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Par Col Mod FUNCTION_BLOCK FB_Acsi DAType Par Col Mod EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Par Col Mod Get,Set Attribute value. [} 458] 6.3.1.1.80 FB_Acsi DAType Par Mod Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy 126 Version: 1.7.1 TF6510
## Page 127

PLC API FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Par Mod FUNCTION_BLOCK FB_Acsi DAType Par Mod EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Par Mod [} 459] Get,Set Attribute value. 6.3.1.1.81 FB_Acsi DAType Par Tra Mod Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Par Tra Mod FUNCTION_BLOCK FB_Acsi DAType Par Tra Mod EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Par Tra Mod Get,Set Attribute value. [} 459] 6.3.1.1.82 FB_Acsi DAType PFSign Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType PFSign FUNCTION_BLOCK FB_Acsi DAType PFSign EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi PFSign [} 460] Get,Set Attribute value. 6.3.1.1.83 FB_Acsi DAType Phs Ref Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Phs Ref FUNCTION_BLOCK FB_Acsi DAType Phs Ref EXTENDS FB_Acsi BAType ENUMERATED TF6510 Version: 1.7.1 127
## Page 128

PLC API Properties Name Type Access Description e Value E_Acsi Phs Ref [} 460] Get,Set Attribute value. 6.3.1.1.84 FB_Acsi DAType Phy Com Addr Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi DAType Phy Com Addr FUNCTION_BLOCK FB_Acsi DAType Phy Com Addr EXTENDS FB_Acsi Common Attribute Class Inputs Name Type Description Addr FB_Acsi DAType Addr [} 105] Data attribute. PRIORITY FB_Acsi BAType INT8U [} 101] Data attribute. VID FB_Acsi BAType INT16U [} 101] Data attribute. APPID FB_Acsi BAType INT16U [} 101] Data attribute. Properties Name Type Access Description b Presence [} 338] BOOL Get,Set Attribute visibility. Fc [} 338] DWORD Get,Set Functional group. o Addr T_OCTET6 [} 518] Get,Set Attribute value. n PRIORITY BYTE(0..7) Get,Set Attribute value. n VID WORD(0..4095) Get,Set Attribute value. n APPID WORD Get,Set Attribute value. 6.3.1.1.85 FB_Acsi DAType Phy Health Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Phy Health FUNCTION_BLOCK FB_Acsi DAType Phy Health EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Phy Health [} 461] Get,Set Attribute value. 128 Version: 1.7.1 TF6510
## Page 129

PLC API 6.3.1.1.86 FB_Acsi DAType PIDAlg Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType PIDAlg FUNCTION_BLOCK FB_Acsi DAType PIDAlg EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi PIDAlg [} 461] Get,Set Attribute value. 6.3.1.1.87 FB_Acsi DAType Pmp Ctl Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Pmp Ctl FUNCTION_BLOCK FB_Acsi DAType Pmp Ctl EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Pmp Ctl [} 461] Get,Set Attribute value. 6.3.1.1.88 FB_Acsi DAType Pmp Ctl Gen Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Pmp Ctl Gen FUNCTION_BLOCK FB_Acsi DAType Pmp Ctl Gen EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Pmp Ctl Gen Get,Set Attribute value. [} 462] 6.3.1.1.89 FB_Acsi DAType Point Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy TF6510 Version: 1.7.1 129
## Page 130

PLC API FB_Acsi Common Node Class [} 155]-> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi DAType Point FUNCTION_BLOCK FB_Acsi DAType Point EXTENDS FB_Acsi Common Attribute Class Inputs Name Type Description x Val FB_Acsi DAType Analogue Value [} 106] Data attribute. y Val FB_Acsi DAType Analogue Value [} 106] Data attribute. z Val FB_Acsi DAType Analogue Value [} 106] Data attribute. Properties Name Type Access Description b Presence BOOL Get,Set Attribute visibility. [} 338] Fc [} 338] DWORD Get,Set Functional group. f XVal REAL Get,Set Attribute value. f YVal REAL Get,Set Attribute value. f ZVal REAL Get,Set Attribute value. 6.3.1.1.90 FB_Acsi DAType Pol Qty Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Pol Qty FUNCTION_BLOCK FB_Acsi DAType Pol Qty EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Pol Qty [} 462] Get,Set Attribute value. 6.3.1.1.91 FB_Acsi DAType POWCap Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType POWCap FUNCTION_BLOCK FB_Acsi DAType POWCap EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi POWCap [} 463] Get,Set Attribute value. 130 Version: 1.7.1 TF6510
## Page 131

PLC API 6.3.1.1.92 FB_Acsi DAType Pulse Config Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi DAType Pulse Config FUNCTION_BLOCK FB_Acsi DAType Pulse Config EXTENDS FB_Acsi Common Attribute Class Inputs Name Type Description cmd Qual FB_Acsi DAType Cmd Qual [} 112] Data attribute. on Dur FB_Acsi BAType INT32U [} 102] Data attribute. off Dur FB_Acsi BAType INT32U [} 102] Data attribute. num Pls FB_Acsi BAType INT32U [} 102] Data attribute. Properties Name Type Access Description b Presence [} 338] BOOL Get,Set Attribute visibility. Fc [} 338] DWORD Get,Set Functional group. e Cmd Qual E_Acsi Cmd Qual Get,Set Attribute value. [} 443] n On Dur DWORD Get,Set Attribute value. n Off Dur DWORD Get,Set Attribute value. n Num Pls DWORD Get,Set Attribute value. 6.3.1.1.93 FB_Acsi DAType Quality Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi DAType Quality FUNCTION_BLOCK FB_Acsi DAType Quality EXTENDS FB_Acsi Common Attribute Class TF6510 Version: 1.7.1 131
## Page 132

PLC API Properties Name Type Access Description q Value ST_Acsi Quality [} 503] Get,Set Attribute value as a structured type. e Validity E_Acsi Quality Validity Get,Set Attribute value. [} 464] Overflow BOOL Get,Set Attribute value. Out Of Range BOOL Get,Set Attribute value. Bad Reference BOOL Get,Set Attribute value. Oscillatory BOOL Get,Set Attribute value. Failure BOOL Get,Set Attribute value. Old Data BOOL Get,Set Attribute value. Inconsistent BOOL Get,Set Attribute value. Inaccurate BOOL Get,Set Attribute value. Test BOOL Get,Set Attribute value. e Source E_Acsi Quality Source Get,Set Attribute value. [} 463] Operator Blocked BOOL Get,Set Attribute value. n Value WORD(0..8191) Get,Set Attribute value in Twin CAT PLC WORD format. 6.3.1.1.94 FB_Acsi DAType Range Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Range FUNCTION_BLOCK FB_Acsi DAType Range EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Range [} 464] Get,Set Attribute value. 6.3.1.1.95 FB_Acsi DAType Range Config Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi DAType Range Config FUNCTION_BLOCK FB_Acsi DAType Range Config EXTENDS FB_Acsi Common Attribute Class 132 Version: 1.7.1 TF6510
## Page 133

PLC API Inputs Name Type Description hh Lim FB_Acsi DAType Analogue Value [} 106] Data attribute. h Lim FB_Acsi DAType Analogue Value [} 106] Data attribute. l Lim FB_Acsi DAType Analogue Value [} 106] Data attribute. ll Lim FB_Acsi DAType Analogue Value [} 106] Data attribute. min_ FB_Acsi DAType Analogue Value [} 106] Data attribute. max_ FB_Acsi DAType Analogue Value [} 106] Data attribute. lim Db FB_Acsi BAType INT32U [} 102] Data attribute. Properties Name Type Access Description b Presence BOOL Get,Set Attribute visibility. [} 338] Fc [} 338] DWORD Get,Set Functional group. f HHLim REAL Get,Set Attribute value. f HLim REAL Get,Set Attribute value. f LLim REAL Get,Set Attribute value. f LLLim REAL Get,Set Attribute value. f Max REAL Get,Set Attribute value. f Min REAL Get,Set Attribute value. n Lim Db DWORD(0..100000) Get,Set Attribute value. 6.3.1.1.96 FB_Acsi DAType Rcd Mod Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Rcd Mod FUNCTION_BLOCK FB_Acsi DAType Rcd Mod EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Rcd Mod [} 464] Get,Set Attribute value. 6.3.1.1.97 FB_Acsi DAType Reason Code Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155]-> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi DAType Reason Code FUNCTION_BLOCK FB_Acsi DAType Reason Code EXTENDS FB_Acsi Common Attribute Class TF6510 Version: 1.7.1 133
## Page 134

PLC API Properties Name Type Access Description c Value ST_Acsi Reason Code [} 504] Get,Set Attribute value as a structured type. Data Change BOOL Get,Set Attribute value. Quality Change BOOL Get,Set Attribute value. Data Update BOOL Get,Set Attribute value. Integrity BOOL Get,Set Attribute value. General Interrogation BOOL Get,Set Attribute value. Application Trigger BOOL Get,Set Attribute value. n Value BYTE(0..127) Get,Set Attribute value in Twin CAT PLC BYTE format. 6.3.1.1.98 FB_Acsi DAType Re Tr Mod Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Re Tr Mod FUNCTION_BLOCK FB_Acsi DAType Re Tr Mod EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Re Tr Mod [} 465] Get,Set Attribute value. 6.3.1.1.99 FB_Acsi DAType Rot Dir Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Rot Dir FUNCTION_BLOCK FB_Acsi DAType Rot Dir EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Rot Dir [} 465] Get,Set Attribute value. 6.3.1.1.100 FB_Acsi DAType Rst Mod Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Rst Mod 134 Version: 1.7.1 TF6510
## Page 135

PLC API FUNCTION_BLOCK FB_Acsi DAType Rst Mod EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Rst Mod [} 466] Get,Set Attribute value. 6.3.1.1.101 FB_Acsi DAType Sbo Classes Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Sbo Classes FUNCTION_BLOCK FB_Acsi DAType Sbo Classes EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Sbo Classes Get,Set Attribute value. [} 466] 6.3.1.1.102 FB_Acsi DAType Scaled Value Config Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147]-> FB_Acsi DAType Scaled Value Config FUNCTION_BLOCK FB_Acsi DAType Scaled Value Config EXTENDS FB_Acsi Common Attribute Class IMPLEMENTS I_Acsi D AType Scaled Value Config Interfaces Type Description I_Acsi DAType Scaled Value Config [} 333] Interface pointer of the Scaled Value Config object instance. Inputs Name Type Description scale Factor FB_Acsi BAType FLOAT32 [} 100] Data attribute. offset FB_Acsi BAType FLOAT32 [} 100] Data attribute. Methods Name Description Scale ATo P [} 333] Scales an attribute value into a process value. Scale PTo A [} 333] Scales a process value into an attribute value. TF6510 Version: 1.7.1 135
## Page 136

PLC API Properties Name Type Access Description b Presence [} 338] BOOL Get,Set Attribute visibility. Fc [} 338] DWORD Get,Set Functional group. f Offset REAL Get,Set Attribute value: Scaling offset. f Scale Factor REAL Get,Set Attribute value: Scaling factor. 6.3.1.1.103 FB_Acsi DAType Seq T Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Seq T FUNCTION_BLOCK FB_Acsi DAType Seq T EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Seq T [} 467] Get,Set Attribute value. 6.3.1.1.104 FB_Acsi DAType Service Error Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Service Error FUNCTION_BLOCK FB_Acsi DAType Service Error EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Service Error Get,Set Attribute value. [} 467] 6.3.1.1.105 FB_Acsi DAType Set Charact Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149]-> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Set Charact FUNCTION_BLOCK FB_Acsi DAType Set Charact EXTENDS FB_Acsi BAType ENUMERATED 136 Version: 1.7.1 TF6510
## Page 137

PLC API Properties Name Type Access Description e Value E_Acsi Set Charact Get,Set Attribute value. [} 469] 6.3.1.1.106 FB_Acsi DAType Sev Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Sev FUNCTION_BLOCK FB_Acsi DAType Sev EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Sev [} 470] Get,Set Attribute value. 6.3.1.1.107 FB_Acsi DAType Sh Op Cap Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Sh Op Cap FUNCTION_BLOCK FB_Acsi DAType Sh Op Cap EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Sh Op Cap [} 470] Get,Set Attribute value. 6.3.1.1.108 FB_Acsi DAType SIUnit Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType SIUnit FUNCTION_BLOCK FB_Acsi DAType SIUnit EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi SIUnit [} 471] Get,Set Attribute value. TF6510 Version: 1.7.1 137
## Page 138

PLC API 6.3.1.1.109 FB_Acsi DAType Spt End St Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Spt End St FUNCTION_BLOCK FB_Acsi DAType Spt End St EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Spt End St [} 473] Get,Set Attribute value. 6.3.1.1.110 FB_Acsi DAType St Clc Tun Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType St Clc Tun FUNCTION_BLOCK FB_Acsi DAType St Clc Tun EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi St Clc Tun [} 474] Get,Set Attribute value. 6.3.1.1.111 FB_Acsi DAType Str Week Day Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Str Week Day FUNCTION_BLOCK FB_Acsi DAType Str Week Day EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Str Week Day Get,Set Attribute value. [} 475] 6.3.1.1.112 FB_Acsi DAType Sw Op Cap Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy 138 Version: 1.7.1 TF6510
## Page 139

PLC API FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Sw Op Cap FUNCTION_BLOCK FB_Acsi DAType Sw Op Cap EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Sw Op Cap [} 475] Get,Set Attribute value. 6.3.1.1.113 FB_Acsi DAType Sw Typ Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Sw Typ FUNCTION_BLOCK FB_Acsi DAType Sw Typ EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Sw Typ [} 476] Get,Set Attribute value. 6.3.1.1.114 FB_Acsi DAType Tcmd Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType CODEDENUM [} 99] -> FB_Acsi DAType Tcmd FUNCTION_BLOCK FB_Acsi DAType Tcmd EXTENDS FB_Acsi BAType CODEDENUM Properties Name Type Access Description e Value E_Acsi Tcmd [} 476] Get,Set Attribute value as enumeration type. b0 BOOL Get,Set Attribute value. b1 BOOL Get,Set Attribute value. n Value BYTE(0..3) Get,Set Attribute value in Twin CAT PLC BYTE format. 6.3.1.1.115 FB_Acsi DAType Time Stamp Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi DAType Time Stamp FUNCTION_BLOCK FB_Acsi DAType Time Stamp EXTENDS FB_Acsi Common Attribute Class TF6510 Version: 1.7.1 139
## Page 140

PLC API Properties Name Type Access Description t Value T_Utc Time [} 519] Get,Set Attribute value: Time information as a structured type. Second Since Epoch DT Get,Set Attribute value. Fraction Of Second T_UINT24 [} 519] Get,Set Attribute value. Quality T_Utc Time Quality [} 520] Get,Set Attribute value: Quality as a structured type. Leap Seconds Known BOOL Get,Set Attribute value. Clock Failure BOOL Get,Set Attribute value. Clock Not Synchronized BOOL Get,Set Attribute value. e Accuracy E_Utc Time Accuracy Get,Set Attribute value. [} 489] s Value STRING(39) Get,Set Attribute value: Time information as a string with the following format: "UT#1970-01-01-00:00:00.000000000| 000|0". n Value LWORD Get,Set Attribute value: Time information in Twin CAT PLC LWORD format. 6.3.1.1.116 FB_Acsi DAType Tm Syn Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Tm Syn FUNCTION_BLOCK FB_Acsi DAType Tm Syn EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Tm Syn [} 477] Get,Set Attribute value. 6.3.1.1.117 FB_Acsi DAType Tnk Typ Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Tnk Typ FUNCTION_BLOCK FB_Acsi DAType Tnk Typ EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Tnk Typ [} 477] Get,Set Attribute value. 140 Version: 1.7.1 TF6510
## Page 141

PLC API 6.3.1.1.118 FB_Acsi DAType Tpc Rx Mod Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Tpc Rx Mod FUNCTION_BLOCK FB_Acsi DAType Tpc Rx Mod EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Tpc Rx Mod Get,Set Attribute value. [} 477] 6.3.1.1.119 FB_Acsi DAType Tpc Tx Mod Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Tpc Tx Mod FUNCTION_BLOCK FB_Acsi DAType Tpc Tx Mod EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Tpc Tx Mod Get,Set Attribute value. [} 478] 6.3.1.1.120 FB_Acsi DAType Tr Beh Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Tr Beh FUNCTION_BLOCK FB_Acsi DAType Tr Beh EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Tr Beh [} 478] Get,Set Attribute value. 6.3.1.1.121 FB_Acsi DAType Trg Mod Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy TF6510 Version: 1.7.1 141
## Page 142

PLC API FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Trg Mod FUNCTION_BLOCK FB_Acsi DAType Trg Mod EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Trg Mod [} 479] Get,Set Attribute value. 6.3.1.1.122 FB_Acsi DAType Trigger Conditions Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi DAType Trigger Conditions FUNCTION_BLOCK FB_Acsi DAType Trigger Conditions EXTENDS FB_Acsi Common Attribute Class Properties Name Type Access Description c Value ST_Acsi Trigger Conditions [} 506] Get,Set Attribute value as a structured type. Data Change BOOL Get,Set Attribute value. Quality Change BOOL Get,Set Attribute value. Data Update BOOL Get,Set Attribute value. Integrity BOOL Get,Set Attribute value. General Interrogation BOOL Get,Set Attribute value. n Value BYTE(0..63) Get,Set Attribute value in Twin CAT PLC BYTE format. 6.3.1.1.123 FB_Acsi DAType Tr Mod Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Tr Mod FUNCTION_BLOCK FB_Acsi DAType Tr Mod EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Tr Mod [} 479] Get,Set Attribute value. 6.3.1.1.124 FB_Acsi DAType Typ Rs Crv Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) 142 Version: 1.7.1 TF6510
## Page 143

PLC API Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Typ Rs Crv FUNCTION_BLOCK FB_Acsi DAType Typ Rs Crv EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Typ Rs Crv [} 479] Get,Set Attribute value. 6.3.1.1.125 FB_Acsi DAType Unb Det Mth Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Unb Det Mth FUNCTION_BLOCK FB_Acsi DAType Unb Det Mth EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Unb Det Mth Get,Set Attribute value. [} 480] 6.3.1.1.126 FB_Acsi DAType Un Blk Mod Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Un Blk Mod FUNCTION_BLOCK FB_Acsi DAType Un Blk Mod EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Un Blk Mod Get,Set Attribute value. [} 480] 6.3.1.1.127 FB_Acsi DAType Unicode255 Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType UNICODESTRING [} 104] -> FB_Acsi DAType Unicode255 FUNCTION_BLOCK FB_Acsi BAType Unicode255 EXTENDS FB_Acsi BAType UNICODESTRING TF6510 Version: 1.7.1 143
## Page 144

PLC API Properties Name Type Access Description s Value WSTRING(255) Get,Set Attribute value. 6.3.1.1.128 FB_Acsi DAType Unit Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi DAType Unit FUNCTION_BLOCK FB_Acsi DAType Unit EXTENDS FB_Acsi Common Attribute Class IMPLEMENTS I_Acsi DAType Unit Interfaces Type Description I_Acsi DAType Unit [} 334] Interface pointer of the unit object instance. Inputs Name Type Description SIUnit FB_Acsi DAType SIUnit [} 137] Data attribute. multiplier FB_Acsi DAType Multiplier [} 121] Data attribute. Methods Name Description Scale ATo P [} 334] Scales an attribute value into a process value. Scale PTo A [} 334] Scales a process value into an attribute value. Properties Name Type Access Description b Presence BOOL Get,Set Attribute visibility. [} 338] Fc [} 338] DWORD Get,Set Functional group. e Multiplier E_Acsi Multiplier Get,Set Attribute value: Multiplier. [} 455] e SIUnit E_Acsi SIUnit [} 471] Get,Set Attribute value: SI unit. 6.3.1.1.129 FB_Acsi DAType Val With Trans Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy 144 Version: 1.7.1 TF6510
## Page 145

PLC API FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi DAType Val With Trans FUNCTION_BLOCK FB_Acsi DAType Val With Trans EXTENDS FB_Acsi Common Attribute Class Inputs Name Type Description pos Val FB_Acsi BAType INT8 [} 100] Data attribute. trans Ind FB_Acsi BAType BOOLEAN [} 99] Data attribute. Properties Name Type Access Description b Presence BOOL Get,Set Attribute visibility. [} 338] Fc [} 338] DWORD Get,Set Functional group. i Pos Val SINT(-64..63) Get,Set Attribute value. b Trans Ind BOOL Get,Set Attribute value. 6.3.1.1.130 FB_Acsi DAType Vector Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi DAType Vector FUNCTION_BLOCK FB_Acsi DAType Vector EXTENDS FB_Acsi Common Attribute Class Inputs Name Type Description mag FB_Acsi DAType Analogue Value [} 106] Data attribute. ang FB_Acsi DAType Analogue Value [} 106] Data attribute. Properties Name Type Access Description b Presence BOOL Get,Set Attribute visibility. [} 338] Fc [} 338] DWORD Get,Set Functional group. f Mag REAL Get,Set Attribute value. i Mag DINT Get,Set Attribute value. f Ang REAL Get,Set Attribute value. i Ang DINT Get,Set Attribute value. 6.3.1.1.131 FB_Acsi DAType Vis String129 Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) TF6510 Version: 1.7.1 145
## Page 146

PLC API Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType VISIBLESTRING [} 104] -> FB_Acsi DAType Vis String129 FUNCTION_BLOCK FB_Acsi DAType Vis String129 EXTENDS FB_Acsi BAType VISIBLESTRING Properties Name Type Access Description s Value STRING(129) Get,Set Attribute value. 6.3.1.1.132 FB_Acsi DAType Vis String255 Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType VISIBLESTRING [} 104] -> FB_Acsi DAType Vis String255 FUNCTION_BLOCK FB_Acsi DAType Vis String255 EXTENDS FB_Acsi BAType VISIBLESTRING Properties Name Type Access Description s Value STRING(255) Get,Set Attribute value. 6.3.1.1.133 FB_Acsi DAType Vis String64 Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType VISIBLESTRING [} 104] -> FB_Acsi DAType Vis String64 FUNCTION_BLOCK FB_Acsi DAType Vis String64 EXTENDS FB_Acsi BAType VISIBLESTRING Properties Name Type Access Description s Value STRING(64) Get,Set Attribute value. 6.3.1.1.134 FB_Acsi DAType Week Day Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Week Day FUNCTION_BLOCK FB_Acsi DAType Week Day EXTENDS FB_Acsi BAType ENUMERATED 146 Version: 1.7.1 TF6510
## Page 147

PLC API Properties Name Type Access Description e Value E_Acsi Week Day [} 481] Get,Set Attribute value as enumeration type. 6.3.1.1.135 FB_Acsi DAType Wei Mod Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi DAType Wei Mod FUNCTION_BLOCK FB_Acsi DAType Wei Mod EXTENDS FB_Acsi BAType ENUMERATED Properties Name Type Access Description e Value E_Acsi Wei Mod [} 482] Get,Set Attribute value. 6.3.1.1.136 FB_Acsi DAType Dat Set Ref Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType VISIBLESTRING [} 104] -> FB_Acsi DAType Obj Ref [} 121] - > FB_Acsi DAType Dat Set Ref FUNCTION_BLOCK FB_Acsi DAType Dat Set Ref EXTENDS FB_Acsi DAType Obj Ref Properties Name Type Access Description ip Dat Set I_Acsi Common Data Set Get The referenced data set. Class [} 338] 6.3.1.2 FB_Acsi Common Attribute Class The function block FB_Acsi Common Attribute Class is one of the basic function blocks of the Twin CAT IEC 61850 data model. Each data attribute instance (data attribute, DA) generated by the Twin CAT Telecontrol Configurator is derived/extended from FB_Acsi Common Attribute Class. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class FUNCTION_BLOCK FB_Acsi Common Attribute Class EXTENDS FB_Acsi Common Data Class IMPLEMENTS I_Acsi Common Att ribute Class TF6510 Version: 1.7.1 147
## Page 148

PLC API Interfaces Type Description I_Acsi Common Attribute Class [} 334] Interface of the data attribute instance. Methods Name Description Add Attribute To Container [} 335] Adds a data attribute object to the container of another data attribute object Properties - 6.3.1.3 FB_Acsi Common Buffered Report Control Block Class The function block FB_Acsi Common Buffered Report Control Class is one of the basic function blocks of the Twin CAT IEC 61850 data model. Each report control block instance for buffered reports (buffered report control block, BRCB) generated by the Twin CAT Telecontrol Configurator is derived/extended from FB_Acsi Common Buffered Report Control Block Class. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] - > FB_Acsi Common Control Block Class [} 148] -> FB_Acsi Common Buffered Report Control Block Class FUNCTION_BLOCK FB_Acsi Common Buffered Report Control Block Class EXTENDS FB_Acsi Common Control Block Class I MPLEMENTS I_Acsi Common Buffered Report Control Block Class Interfaces Type Description I_Acsi Common Buffered Report Control Class [} 335] Interface of the report control block instance. Methods - Properties - 6.3.1.4 FB_Acsi Common Control Block Class The function block FB_Acsi Common Control Block Class belongs to the basic function blocks of the Twin CAT IEC 61850 data model. The function block serves as the basis for all control block function blocks. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] - > FB_Acsi Common Control Block Class FUNCTION_BLOCK FB_Acsi Common Control Block Class EXTENDS FB_Acsi Common Data Class IMPLEMENTS I_Acsi Common Control Block Class 148 Version: 1.7.1 TF6510
## Page 149

PLC API Interfaces Type Description I_Acsi Common Control Block Class [} 335] Interface of the general control block. 6.3.1.5 FB_Acsi Common Controllable Data Class The function block FB_Acsi Common Controllable Data Class is one of the basic function blocks of the Twin CAT IEC 61850 data model. Each switch control instances generated by the Twin CAT Telecontrol Configurator (common data class, CDC: SPC, DPC, INC,...) is derived/extended from FB_Acsi Common Controllable Data Class. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] - > FB_Acsi Common Controllable Data Class FUNCTION_BLOCK FB_Acsi Common Controllable Data Class EXTENDS FB_Acsi Common Data Class IMPLEMENTS I_Acsi Co mmon Controllable Data Class Interfaces Type Description I_Acsi Common Controllable Data Class [} 336] Interface of the object instance for the switch control. Methods - Properties - 6.3.1.6 FB_Acsi Common Data Class The function block FB_Acsi Common Data Class is one of the basic function blocks of the Twin CAT IEC 61850 data model. Each data object instance (DO) generated by the Twin CAT Telecontrol Configurator is derived/extended by FB_Acsi Common Data Class. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class FUNCTION_BLOCK FB_Acsi Common Data Class EXTENDS FB_Acsi Common Node Class IMPLEMENTS I_Acsi Common Data Clas s Interfaces Type Description I_Acsi Common Data Class [} 336] Interface of the data object instance. TF6510 Version: 1.7.1 149
## Page 150

PLC API Methods Name Description Add Attribute To Container [} 336] Adds a data attribute object to the container of another data object Add Data To Container [} 337] Adds a data object to the container of another data object Add To Data Set [} 337] Adds a data object to the member container of the data set Delete From Data Set [} 337] Removes a data object from the member container of the data set Properties Name Type Access Description b Presence [} 338] BOOL Get,Set Attribute visibility Fc [} 338] DWORD Get,Set Functional group Trg Op [} 338] DWORD Get,Set Report trigger 6.3.1.7 FB_Acsi Common Data Set Class The function block FB_Acsi Common Data Set Class is one of the basic function blocks of the Twin CAT IEC 61850 data model. Each dataset instance generated by the Twin CAT Telecontrol Configurator is derived/ extended from FB_Acsi Common Data Set Class. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Set Class FUNCTION_BLOCK FB_Acsi Common Data Set Class EXTENDS FB_Acsi Common Node Class IMPLEMENTS I_Acsi Common Data S et Class VAR_OUTPUT st Info : ST_Acsi Data Set Class Info; END_VAR Interfaces Type Description I_Acsi Common Data Set Class [} 338] Interface of the dataset instance. Outputs Name Type Description st Info ST_Acsi Data Set Class Info [} 495] Status and statistics data of the data set instance. Methods Name Description Add Member [} 339] Adds a new data object to the member container Delete Member [} 339] Removes a data object from the member container Delete All Members Removes all data objects from the member container [} 339] 150 Version: 1.7.1 TF6510
## Page 151

PLC API Methods for event handling Name Description On Init [} 339] Initializes/configures the data objects in the member container Properties Name Type Access Description n Members UDINT Get Number of data objects in the member container 6.3.1.8 FB_Acsi Common Goose Control Block Class The function block FB_Acsi Common Goose Control Block Class belongs to the basic function blocks of the Twin CAT IEC 61850 data model. Each GOOSE control block instance generated by the Twin CAT Telecontrol Configurator has been derived/extended from FB_Acsi Common Goose Control Block Class. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] - > FB_Acsi Common Control Block Class [} 148] -> FB_Acsi Common Goose Control Block Class FUNCTION_BLOCK FB_Acsi Common Goose Control Block Class EXTENDS FB_Acsi Common Control Block Class IMPLEMENTS I_Acsi Common Goose Control Block Class Interfaces Type Description I_Acsi Common Goose Control Block Class [} 340] Interface of the GOOSE control block instance. 6.3.1.9 FB_Acsi Common IEDGroup Class The function block FB_Acsi Common IEDGroup Class belongs to the basic function blocks of the Twin CAT IEC 61850 data models. Objects derived/extended from FB_Acsi Common IEDGroup Class represent a group of several IEDs. All IEDs in this group use the same "Real-Time Ethernet Adapter (Multiple Protocol Handler)" for communication. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common IEDGroup Class FUNCTION_BLOCK FB_Acsi Common IEDGroup Class IMPLEMENTS I_Acsi Common IEDGroup Class VAR_OUTPUT st Info : ST_Acsi IEDGroup Class Info; END_VAR Interfaces Type Description I_Acsi Common IEDGroup Class [} 340] Interface of the object instance of a group of IEDs. TF6510 Version: 1.7.1 151
## Page 152

PLC API Outputs Name Type Description st Info ST_Acsi IEDGroup Class Info [} 497] Status and statistical data of the IED group. Methods Name Description Add IEDTo Container [} 152] Adds a new device to the container of the IED group. Properties Name Type Access Description n IEDs UDINT Get Number of IEDs in the container. s Object Name T_Acsi Object Name Get, Set Object name. [} 515] Day T_Acsi Tag [} 516] Get, Set Additional object information. 6.3.1.9.1 Add IEDTo Container Adds a new IED to the container of the IED group. METHOD FINAL Add IEDTo Container : BOOL VAR_INPUT ip IED : I_Acsi Common Intelligent Electronic Device Class; END_VAR VAR_OUTPUT b Matched : BOOL; ip Dir Node : I_Acsi IEDContainer Class; END_VAR ip IED: Interface pointer of type I_Acsi Common Intelligent Electronic Device Class [} 340] of the IED device to be added to the container. b Matched: If TRUE, the object already exists in the container. ip Dir Node: interface pointer of the new container list item. Return parameter: Positive message (TRUE) on success or negative feedback (FALSE) on error. 6.3.1.10 FB_Acsi Common Intelligent Electronic Device Class The function block FB_Acsi Common Intelligent Electronic Device Class is one of the basic function blocks of the Twin CAT IEC 61850 data model. Each server instance (IED) generated by the Twin CAT Telecontrol Configurator is derived/extended from FB_Acsi Common Intelligent Electronic Device Class. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Intelligent Electronic Device Class FUNCTION_BLOCK FB_Acsi Common Intelligent Electronic Device Class EXTENDS FB_Acsi Common Node Class IMPLEMEN TS I_Acsi Common Intelligent Electronic Device Class VAR_OUTPUT st Info : ST_Acsi Intelligent Electronic Device Class Info; END_VAR 152 Version: 1.7.1 TF6510
## Page 153

PLC API Interfaces Type Description I_Acsi Common Intelligent Electronic Device Class [} 340] Interface of the object instance of the top level of the server data structure. Outputs Name Type Description st Info ST_Acsi Intelligent Electronic Device Class Info Status and statistical data of the IED. [} 497] Methods Name Description Add Logical Device To Container [} 341] Adds a new logical device to the server container Properties Name Type Access Description n Logical Devices UDINT Get Number of logical devices in the server container 6.3.1.11 FB_Acsi Common Logical Device Class The function block FB_Acsi Common Logical Device Class is one of the basic function blocks of the Twin CAT IEC 61850 data model. Each instance of the logical device (LD) generated by the Twin CAT Telecontrol Configurator is derived/extended from FB_Acsi Common Logical Device Class. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Logical Device Class FUNCTION_BLOCK FB_Acsi Common Logical Device Class EXTENDS FB_Acsi Common Node Class IMPLEMENTS I_Acsi Commo n Logical Device Class VAR_OUTPUT st Info : ST_Acsi Logical Device Class Info; END_VAR Interfaces Type Description I_Acsi Common Logical Device Class [} 341] Interface of the object instance of the logical device. Outputs Name Type Description st Info ST_Acsi Logical Device Class Info Status and statistics data of the logical device. [} 497] TF6510 Version: 1.7.1 153
## Page 154

PLC API Methods Name Description Add Logical Node To Container [} 342] Adds a new logical node Properties Name Type Access Description n Logical Nodes UDINT Get Number of logical node in the container of the logical device 6.3.1.12 FB_Acsi Common Logical Node Class The function block FB_Acsi Common Logical Node Class is one of the basic function blocks of the Twin CAT IEC 61850 data model. Each instance of the logical node (LN) generated by the Twin CAT Telecontrol Configurator is derived/extended from FB_Acsi Common Logical Node Class. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Logical Node Class FUNCTION_BLOCK FB_Acsi Common Logical Node Class EXTENDS FB_Acsi Common Node Class IMPLEMENTS I_Acsi Common L ogical Node Class VAR_OUTPUT st Info : ST_Acsi Logical Node Class Info; END_VAR Interfaces Type Description I_Acsi Common Logical Node Class [} 342] Interface of the object instance of the logical node. Outputs Name Type Description st Info ST_Acsi Logical Node Class Info [} 497] Status and statistics data of the logical node. Methods Name Description Add Data To Container [} 343] Adds a new data object Add Data Set To Container [} 343] Adds a new data set Add Unbuffered Report Control Block To Containe Adds a new report control block instance for unbuffered reports r [} 343] Add Buffered Report Control Block To Container Adds a new report control block instance for buffered reports [} 344] Add Goose Control Block To Container [} 344] Adds a new goose control block instance 154 Version: 1.7.1 TF6510
## Page 155

PLC API Properties Name Type Access Description n Data Sets UDINT Get Number of data sets in the container of the logical node n Buffered Report Control Blocks UDINT Get Number of report control block instances for unbuffered reports n Unbuffered Report Control Blocks UDINT Get Number of report control block instances for buffered reports n Goose Control Blocks UDINT Get Number of goose control block instances 6.3.1.13 FB_Acsi Common Node Class The function block FB_Acsi Common Node Class is one of the basic function blocks of the Twin CAT IEC 61850 data model. Each object instance generated by the Twin CAT Telecontrol Configurator is derived/ extended from the basic FB_Acsi Common Node Class. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class FUNCTION_BLOCK FB_Acsi Common Node Class IMPLEMENTS I_Acsi Common Node Class Interfaces Type Description I_Acsi Common Node Class [} 344] Interface of the basic node instance. Methods Name Description Get Object Reference Returns the reference path of an object instance [} 345] Get Server Object [} 345] Provides the interface pointer of the object instance of the server Properties Name Type Access Description s Object Name T_Acsi Object Name Get,Set Object name [} 346] [} 515] 6.3.1.14 FB_Acsi Common Unbuffered Report Control Block Class The function block FB_Acsi Common Unbuffered Report Control Block Class is one of the basic function blocks of the Twin CAT IEC 61850 data model. Each report control block instance for unbuffered reports (unbuffered report control block, URCB) generated by the Twin CAT Telecontrol Configurator is derived/extended from FB_Acsi Common Unbuffered Report Control Block Class. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy TF6510 Version: 1.7.1 155
## Page 156

PLC API FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] - > FB_Acsi Common Control Block Class [} 148] -> FB_Acsi Common Unbuffered Report Control Block Class FUNCTION_BLOCK FB_Acsi Common Unbuffered Report Control Block Class EXTENDS FB_Acsi Common Control Block Class IMPLEMENTS I_Acsi Common Unbuffered Report Control Block Class Interfaces Type Description I_Acsi Common Unbuffered Report Control Block Class [} 346] Interface of the report control block instance. Methods - Properties - 6.3.1.15 Switch control 6.3.1.15.1 FB_Acsi CDC_Cancel_Analog Value Use: APC. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] - > FB_Acsi CDC_Cancel_Analogue Value FUNCTION_BLOCK FB_Acsi CDC_Cancel_Analogue Value EXTENDS FB_Acsi Common Data Class Inputs Name Type Description ctl Val FB_Acsi DAType Analogue Value [} 106] Data attribute. oper Tm FB_Acsi DAType Time Stamp [} 139] Data attribute. origin FB_Acsi DAType Originator [} 126] Data attribute. ctl Num FB_Acsi BAType INT8U [} 101] Data attribute. T FB_Acsi DAType Time Stamp [} 139] Data attribute. Test FB_Acsi BAType BOOLEAN [} 99] Data attribute. 6.3.1.15.2 FB_Acsi CDC_Cancel_BOOLEAN Use: SPC, DPC. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi CDC_Cancel_BOOLEAN FUNCTION_BLOCK FB_Acsi CDC_Cancel_BOOLEAN EXTENDS FB_Acsi Common Data Class 156 Version: 1.7.1 TF6510
## Page 157

PLC API Inputs Name Type Description ctl Val FB_Acsi BAType BOOLEAN Data attribute: Control value (FALSE:= Off, TRUE:= On). [} 99] oper Tm FB_Acsi DAType Time Stamp Data attribute. [} 139] origin FB_Acsi DAType Originator Data attribute. [} 126] ctl Num FB_Acsi BAType INT8U [} 101] Data attribute. T FB_Acsi DAType Time Stamp Data attribute. [} 139] Test FB_Acsi BAType BOOLEAN Data attribute. [} 99] 6.3.1.15.3 FB_Acsi CDC_Cancel_CODEDENUM Use: BSC, BAC. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] - > FB_Acsi CDC_Cancel_CODEDENUM FUNCTION_BLOCK FB_Acsi CDC_Cancel_CODEDENUM EXTENDS FB_Acsi Common Data Class Inputs Name Type Description ctl Val FB_Acsi DAType Tcmd [} 139] Data attribute. oper Tm FB_Acsi DAType Time Stamp [} 139] Data attribute. origin FB_Acsi DAType Originator [} 126] Data attribute. ctl Num FB_Acsi BAType INT8U [} 101] Data attribute. T FB_Acsi DAType Time Stamp [} 139] Data attribute. Test FB_Acsi BAType BOOLEAN [} 99] Data attribute. 6.3.1.15.4 FB_Acsi CDC_Cancel_ENUMERATED Use: ENC. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] - > FB_Acsi CDC_Cancel_ENUMERATED FUNCTION_BLOCK FB_Acsi CDC_Cancel_ENUMERATED EXTENDS FB_Acsi Common Data Class TF6510 Version: 1.7.1 157
## Page 158

PLC API Inputs Name Type Description ctl Val FB_Acsi CDC_ENUMERATED_ctl Val [} 159] Data attribute. oper Tm FB_Acsi DAType Time Stamp [} 139] Data attribute. origin FB_Acsi DAType Originator [} 126] Data attribute. ctl Num FB_Acsi BAType INT8U [} 101] Data attribute. T FB_Acsi DAType Time Stamp [} 139] Data attribute. Test FB_Acsi BAType BOOLEAN [} 99] Data attribute. 6.3.1.15.5 FB_Acsi CDC_Cancel_INT32 Use: INC. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi CDC_Cancel_INT32 FUNCTION_BLOCK FB_Acsi CDC_Cancel_INT32 EXTENDS FB_Acsi Common Data Class Inputs Name Type Description ctl Val FB_Acsi BAType INT32 [} 102] Data attribute. oper Tm FB_Acsi DAType Time Stamp [} 139] Data attribute. origin FB_Acsi DAType Originator [} 126] Data attribute. ctl Num FB_Acsi BAType INT8U [} 101] Data attribute. T FB_Acsi DAType Time Stamp [} 139] Data attribute. Test FB_Acsi BAType BOOLEAN [} 99] Data attribute. 6.3.1.15.6 FB_Acsi CDC_Cancel_INT8 Use: ISC. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi CDC_Cancel_INT8 FUNCTION_BLOCK FB_Acsi CDC_Cancel_INT8 EXTENDS FB_Acsi Common Data Class 158 Version: 1.7.1 TF6510
## Page 159

PLC API Inputs Name Type Description ctl Val FB_Acsi BAType INT8 [} 100] Data attribute. oper Tm FB_Acsi DAType Time Stamp [} 139] Data attribute. Origin FB_Acsi DAType Originator [} 126] Data attribute. ctl Num FB_Acsi BAType INT8U [} 101] Data attribute. T FB_Acsi DAType Time Stamp [} 139] Data attribute. Test FB_Acsi BAType BOOLEAN [} 99] Data attribute. 6.3.1.15.7 FB_Acsi CDC_ENUMERATED_ctl Val Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType ENUMERATED [} 99] -> FB_Acsi CDC_ENUMERATED_ctl Val FUNCTION_BLOCK FB_Acsi CDC_ENUMERATED_ctl Val EXTENDS FB_Acsi BAType ENUMERATED Properties - 6.3.1.15.8 FB_Acsi CDC_Oper_Analog Value Use: APC. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] - > FB_Acsi CDC_Oper_Analogue Value FUNCTION_BLOCK FB_Acsi CDC_Oper_Analogue Value EXTENDS FB_Acsi Common Data Class Inputs Name Type Description ctl Val FB_Acsi DAType Analogue Value [} 106] Data attribute. oper Tm FB_Acsi DAType Time Stamp [} 139] Data attribute. origin FB_Acsi DAType Originator [} 126] Data attribute. ctl Num FB_Acsi BAType INT8U [} 101] Data attribute. T FB_Acsi DAType Time Stamp [} 139] Data attribute. Test FB_Acsi BAType BOOLEAN [} 99] Data attribute. Check FB_Acsi DAType Check [} 110] Data attribute. 6.3.1.15.9 FB_Acsi CDC_Oper_BOOLEAN Use: SPC, DPC. TF6510 Version: 1.7.1 159
## Page 160

PLC API Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi CDC_Oper_BOOLEAN FUNCTION_BLOCK FB_Acsi CDC_Oper_BOOLEAN EXTENDS FB_Acsi Common Data Class Inputs Name Type Description ctl Val FB_Acsi BAType BOOLEAN Data attribute: Control value (FALSE:= Off, TRUE:= On). [} 99] oper Tm FB_Acsi DAType Time Stamp Data attribute. [} 139] origin FB_Acsi DAType Originator Data attribute. [} 126] ctl Num FB_Acsi BAType INT8U [} 101] Data attribute. T FB_Acsi DAType Time Stamp Data attribute. [} 139] Test FB_Acsi BAType BOOLEAN Data attribute. [} 99] Check FB_Acsi DAType Check [} 110] Data attribute. 6.3.1.15.10 FB_Acsi CDC_Oper_CODEDENUM Use: BSC, BAC. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] - > FB_Acsi CDC_Oper_CODEDENUM FUNCTION_BLOCK FB_Acsi CDC_Oper_CODEDENUM EXTENDS FB_Acsi Common Data Class Inputs Name Type Description ctl Val FB_Acsi DAType Tcmd [} 139] Data attribute. oper Tm FB_Acsi DAType Time Stamp [} 139] Data attribute. origin FB_Acsi DAType Originator [} 126] Data attribute. ctl Num FB_Acsi BAType INT8U [} 101] Data attribute. T FB_Acsi DAType Time Stamp [} 139] Data attribute. Test FB_Acsi BAType BOOLEAN [} 99] Data attribute. Check FB_Acsi DAType Check [} 110] Data attribute. 6.3.1.15.11 FB_Acsi CDC_Oper_ENUMERATED Use: ENC. 160 Version: 1.7.1 TF6510
## Page 161

PLC API Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] - > FB_Acsi CDC_Oper_ENUMERATED FUNCTION_BLOCK FB_Acsi CDC_Oper_ENUMERATED EXTENDS FB_Acsi Common Data Class Inputs Name Type Description ctl Val FB_Acsi CDC_ENUMERATED_ctl Val [} 159] Data attribute. oper Tm FB_Acsi DAType Time Stamp [} 139] Data attribute. origin FB_Acsi DAType Originator [} 126] Data attribute. ctl Num FB_Acsi BAType INT8U [} 101] Data attribute. T FB_Acsi DAType Time Stamp [} 139] Data attribute. Test FB_Acsi BAType BOOLEAN [} 99] Data attribute. Check FB_Acsi DAType Check [} 110] Data attribute. 6.3.1.15.12 FB_Acsi CDC_Oper_INT32 Use: INC. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi CDC_Oper_INT32 FUNCTION_BLOCK FB_Acsi CDC_Oper_INT32 EXTENDS FB_Acsi Common Data Class Inputs Name Type Description ctl Val FB_Acsi BAType INT32 [} 102] Data attribute. oper Tm FB_Acsi DAType Time Stamp [} 139] Data attribute. origin FB_Acsi DAType Originator [} 126] Data attribute. ctl Num FB_Acsi BAType INT8U [} 101] Data attribute. T FB_Acsi DAType Time Stamp [} 139] Data attribute. Test FB_Acsi BAType BOOLEAN [} 99] Data attribute. Check FB_Acsi DAType Check [} 110] Data attribute. 6.3.1.15.13 FB_Acsi CDC_Oper_INT8 Use: ISC. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi CDC_Oper_INT8 FUNCTION_BLOCK FB_Acsi CDC_Oper_INT8 EXTENDS FB_Acsi Common Data Class TF6510 Version: 1.7.1 161
## Page 162

PLC API Inputs Name Type Description ctl Val FB_Acsi BAType INT8 [} 100] Data attribute. oper Tm FB_Acsi DAType Time Stamp [} 139] Data attribute. origin FB_Acsi DAType Originator [} 126] Data attribute. ctl Num FB_Acsi BAType INT8U [} 101] Data attribute. T FB_Acsi DAType Time Stamp [} 139] Data attribute. Test FB_Acsi BAType BOOLEAN [} 99] Data attribute. Check FB_Acsi DAType Check [} 110] Data attribute. 6.3.1.15.14 FB_Acsi CDC_SBO Select before operate. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi Common Attribute Class [} 147] -> FB_Acsi BAType VISIBLESTRING [} 104] -> FB_Acsi CDC_SBO FUNCTION_BLOCK FB_Acsi CDC_SBO EXTENDS FB_Acsi BAType VISIBLESTRING Properties Name Type Access Description s Value STRING(129) Get,Set Attribute value. 6.3.1.15.15 FB_Acsi CDC_SBOw_Analog Value Use: APC. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] - > FB_Acsi CDC_SBOw_Analogue Value FUNCTION_BLOCK FB_Acsi CDC_SBOw_Analogue Value EXTENDS FB_Acsi Common Data Class Inputs Name Type Description ctl Val FB_Acsi DAType Analogue Value [} 106] Data attribute. oper Tm FB_Acsi DAType Time Stamp [} 139] Data attribute. origin FB_Acsi DAType Originator [} 126] Data attribute. ctl Num FB_Acsi BAType INT8U [} 101] Data attribute. T FB_Acsi DAType Time Stamp [} 139] Data attribute. Test FB_Acsi BAType BOOLEAN [} 99] Data attribute. Check FB_Acsi DAType Check [} 110] Data attribute. 162 Version: 1.7.1 TF6510
## Page 163

PLC API 6.3.1.15.16 FB_Acsi CDC_SBOw_BOOLEAN Use: SPC, DPC. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi CDC_SBOw_BOOLEAN FUNCTION_BLOCK FB_Acsi CDC_SBOw_BOOLEAN EXTENDS FB_Acsi Common Data Class Inputs Name Type Description ctl Val FB_Acsi BAType BOOLEAN [} 99] Data attribute: Control value (FALSE:= Off, TRUE:= On). oper Tm FB_Acsi DAType Time Stamp [} 139] Data attribute origin FB_Acsi DAType Originator [} 126] Data attribute ctl Num FB_Acsi BAType INT8U [} 101] Data attribute T FB_Acsi DAType Time Stamp [} 139] Data attribute Test FB_Acsi BAType BOOLEAN [} 99] Data attribute Check FB_Acsi DAType Check [} 110] Data attribute 6.3.1.15.17 FB_Acsi CDC_SBOw_CODEDENUM Use: BSC, BAC. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] - > FB_Acsi CDC_SBOw_CODEDENUM FUNCTION_BLOCK FB_Acsi CDC_SBOw_CODEDENUM EXTENDS FB_Acsi Common Data Class Inputs Name Type Description ctl Val FB_Acsi DAType Tcmd [} 139] Data attribute. oper Tm FB_Acsi DAType Time Stamp [} 139] Data attribute. origin FB_Acsi DAType Originator [} 126] Data attribute. ctl Num FB_Acsi BAType INT8U [} 101] Data attribute. T FB_Acsi DAType Time Stamp [} 139] Data attribute. Test FB_Acsi BAType BOOLEAN [} 99] Data attribute. Check FB_Acsi DAType Check [} 110] Data attribute. 6.3.1.15.18 FB_Acsi CDC_SBOw_ENUMERATED Use: ENC. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) TF6510 Version: 1.7.1 163
## Page 164

PLC API Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] - > FB_Acsi CDC_SBOw_ENUMERATED FUNCTION_BLOCK FB_Acsi CDC_SBOw_ENUMERATED EXTENDS FB_Acsi Common Data Class Inputs Name Type Description ctl Val FB_Acsi CDC_ENUMERATED_ctl Val [} 159] Data attribute. oper Tm FB_Acsi DAType Time Stamp [} 139] Data attribute. origin FB_Acsi DAType Originator [} 126] Data attribute. ctl Num FB_Acsi BAType INT8U [} 101] Data attribute. T FB_Acsi DAType Time Stamp [} 139] Data attribute. Test FB_Acsi BAType BOOLEAN [} 99] Data attribute. Check FB_Acsi DAType Check [} 110] Data attribute. 6.3.1.15.19 FB_Acsi CDC_SBOw_INT32 Use: INC. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi CDC_SBOw_INT32 FUNCTION_BLOCK FB_Acsi CDC_SBOw_INT32 EXTENDS FB_Acsi Common Data Class Inputs Name Type Description ctl Val FB_Acsi BAType INT32 [} 102] Data attribute. oper Tm FB_Acsi DAType Time Stamp [} 139] Data attribute. origin FB_Acsi DAType Originator [} 126] Data attribute. ctl Num FB_Acsi BAType INT8U [} 101] Data attribute. T FB_Acsi DAType Time Stamp [} 139] Data attribute. Test FB_Acsi BAType BOOLEAN [} 99] Data attribute. Check FB_Acsi DAType Check [} 110] Data attribute. 6.3.1.15.20 FB_Acsi CDC_SBOw_INT8 Use: ISC. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] -> FB_Acsi CDC_SBOw_INT8 FUNCTION_BLOCK FB_Acsi CDC_SBOw_INT8 EXTENDS FB_Acsi Common Data Class 164 Version: 1.7.1 TF6510
## Page 165

PLC API Inputs Name Type Description ctl Val FB_Acsi BAType INT8 [} 100] Data attribute. oper Tm FB_Acsi DAType Time Stamp [} 139] Data attribute. origin FB_Acsi DAType Originator [} 126] Data attribute. ctl Num FB_Acsi BAType INT8U [} 101] Data attribute. T FB_Acsi DAType Time Stamp [} 139] Data attribute. Test FB_Acsi BAType BOOLEAN [} 99] Data attribute. Check FB_Acsi DAType Check [} 110] Data attribute. 6.3.1.16 Control blocks 6.3.1.16.1 FB_Acsi Buffered Report Control Block The function block FB_Acsi Buffered Report Control Block contains the default data attributes of a report control block for buffered reports. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] - > FB_Acsi Common Control Block Class [} 148] -> FB_Acsi Common Buffered Report Control Block Class [} 148] - > FB_Acsi Buffered Report Control Block FUNCTION_BLOCK FB_Acsi Buffered Report Control Block EXTENDS FB_Acsi Common Buffered Report Control Block Clas s Inputs Name Type Description Rpt ID FB_Acsi DAType Vis String129 [} 145] Data attribute, Ed1=>Rpt ID:Vis Str[65]! Rpt Ena FB_Acsi BAType BOOLEAN [} 99] Data attribute. Dat Set FB_Acsi DAType Dat Set Ref [} 147] Data attribute. Conf Rev FB_Acsi BAType INT32U [} 102] Data attribute. Opt Flds FB_Acsi DAType Opt Flds [} 124] Data attribute. Buf Tm FB_Acsi BAType INT32U [} 102] Data attribute. Sq Num FB_Acsi BAType INT16U [} 101] Data attribute. Trg Ops FB_Acsi DAType Trigger Conditions [} 142] Data attribute. Intg Pd FB_Acsi BAType INT32U [} 102] Data attribute. GI FB_Acsi BAType BOOLEAN [} 99] Data attribute. Purge Buf FB_Acsi BAType BOOLEAN [} 99] Data attribute. Entry ID FB_Acsi DAType Entry ID [} 115] Data attribute. Time Of Entry FB_Acsi DAType Entry Time [} 115] Data attribute. Resv Tms FB_Acsi BAType INT16 [} 101] Data attribute, Ed2. Owner FB_Acsi DAType Octet64 [} 123] Data attribute, Ed2. TF6510 Version: 1.7.1 165
## Page 166

PLC API 6.3.1.16.2 FB_Acsi Goose Control Block The function block FB_Acsi Goose Control Block contains the standard data attributes of a GOOSE control block. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] - > FB_Acsi Common Control Block Class [} 148] -> FB_Acsi Common Goose Control Block Class [} 151] - > FB_Acsi Goose Control Block FUNCTION_BLOCK FB_Acsi Goose Control Block EXTENDS FB_Acsi Common Goose Control Block Class Inputs Name Type Description Go Ena FB_Acsi BAType BOOLEAN [} 99] Data attribute, enables/disables the GOOSE control block. Go ID FB_Acsi DAType Vis String129 [} 145] Data attribute, the ID used for the GOOSE messages. Dat Set FB_Acsi DAType Dat Set Ref [} 147] Data attribute used for the GOOSE messages. Conf Rev FB_Acsi BAType INT32U [} 102] Data attribute, the revision number of the GOOSE control block configuration. Nds Com FB_Acsi BAType BOOLEAN [} 99] Data attribute, indicates whether the GOOSE control block is not yet fully configured. Dst Address FB_Acsi DAType Phy Com Addr [} 128] Data attribute, the destination address of the GOOSE messages. Min Time FB_Acsi BAType INT32U [} 102] Data attribute, time between direct send after data change and first retry in milliseconds. Max Time FB_Acsi BAType INT32U [} 102] Data attribute, maximum time between repeated transmissions of a GOOSE message in milliseconds. Fixed Offs FB_Acsi BAType BOOLEAN [} 99] Data attribute, enables/disables coding with fixed instead of dynamic lengths. 6.3.1.16.3 FB_Acsi Unbuffered Report Control Block The function block FB_Acsi Unbuffered Report Control Block contains the default data attributes of a report control block for unbuffered reports. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] - > FB_Acsi Common Control Block Class [} 148] -> FB_Acsi Common Unbuffered Report Control Block Class [} 155] - > FB_Acsi Unbuffered Report Control Block FUNCTION_BLOCK FB_Acsi Unbuffered Report Control Block EXTENDS FB_Acsi Common Unbuffered Report Control Block Class 166 Version: 1.7.1 TF6510
## Page 167

PLC API Inputs Name Type Description Rpt ID FB_Acsi DAType Vis String129 [} 145] Data attribute, Ed1=>Rpt ID:Vis Str[65]! Rpt Ena FB_Acsi BAType BOOLEAN [} 99] Data attribute Resv FB_Acsi BAType BOOLEAN [} 99] Data attribute Dat Set FB_Acsi DAType Dat Set Ref [} 147] Data attribute Conf Rev FB_Acsi BAType INT32U [} 102] Data attribute Opt Flds FB_Acsi DAType Opt Flds [} 124] Data attribute Buf Tm FB_Acsi BAType INT32U [} 102] Data attribute Sq Num FB_Acsi BAType INT8U [} 101] Data attribute Trg Ops FB_Acsi DAType Trigger Conditions [} 142] Data attribute Intg Pd FB_Acsi BAType INT32U [} 102] Data attribute GI FB_Acsi BAType BOOLEAN [} 99] Data attribute Owner FB_Acsi DAType Octet64 [} 123] Data attribute, Ed2. 6.3.2 Protocol settings 6.3.2.1 FB_Gse Adapter Settings Class The function block FB_Gse Adapter Settings Class is used to configure a network adapter that can be used for GSE communication. Namespace: Tc3_Gse [} 98] Library: Tc3_Gse (Tc3_Gse.compiled-library) Inheritance hierarchy FB_Gse Adapter Settings Class FUNCTION_BLOCK FB_Gse Adapter Settings Class IMPLEMENTS I_Gse Adapter Settings Class Interfaces Type Description I_Gse Adapter Settings Class [} 346] Interface for configuring the network adapter. TF6510 Version: 1.7.1 167
## Page 168

PLC API Properties 168 Version: 1.7.1 TF6510
## Page 169

PLC API Name Type Access Definition Initial value Description location b Exec Go CB BOOL Get FALSE Enables/disables automatic calling of the Pubs I_Gse Adapt "Execute" method of the Publisher GOOSE control blocks by the adapter. er Settings C lass [} 346] Set Local b Exec Go CB BOOL Get FALSE Enables/disables automatic calling of the Subs I_Gse Adapt "Execute" method of the Subscriber GOOSE control blocks by the adapter. er Settings C lass [} 346] Set Local b Simulation BOOL Get FALSE Enables/disables the GOOSE simulation I_Gse Adapt bit field. er Settings C lass [} 346] Set Local e Adapter Prio Get Tc Ethernet Adapt Priority of the network adapter. Tc Ethern I_Gse Adapt er Priority. Tc Ether net Adapter Priorit et Adapte er Settings C y High r Priority lass [} 346] [} 492] Set Local e Dispatch Mo Get E_Gse Dispatch M Setting whether received Ethernet de E_Gse Dis I_Gse Adapt ode. telegrams are forwarded to the operating Non Promiscuous system. patch Mo er Settings C de lass [} 346] [} 484] Set Local mac Addr Get [0, 0, 0, 0, 0, 0] MAC address of the network adapter. ETHERN I_Gse Adapt (not set, '00-00-00-00-00- ET_ADD er Settings C 00') RESS lass [} 346] [} 490] Set I_Gse Adapt er Settings C lass [} 346] TF6510 Version: 1.7.1 169
## Page 170

PLC API Name Type Access Definition Initial value Description location multicast Add Get [0, 0, 0, 0, 0, 0] Selected single subscriber multicast r ETHERN I_Gse Adapt (not set, address of the network adapter. If set, the '00-00-00-00-00- network adapter block instance receives ET_ADD er Settings C 00') only the subscriber messages sent to this RESS lass [} 346] exact address. In this case, the address is [} 490] Set Local used as a filter for the subscriber messages. All other messages are forwarded either to the operating system or (if available) to further instances of the network adapter block. Info: From Twin CAT TF6510 IEC 61850 Telecontrol v3.1.98.0 and higher: If this address is not set ('00-00-00-00-00-00'), then all multicast addresses and APPIDs configured on the Subscriber control block instances are used as filters for the Subscriber messages. In this case, different multicast addresses can be configured in the GOOSE control block instances, for example. The configured Subscriber APPIDs (if used > 0), must match the APPIDs on the Publisher page. All received messages that cannot be assigned to a control block are forwarded to the operating system or to further instances of the network adapter block. oid OTCID Get 0 Twin CAT object ID of the network adapter. [} 491] I_Gse Adapt To configure the parameter, see: RT er Settings C Ethernet adapter configuration [} 38]. lass [} 346] Set Local s Mac Addr STRING Get ’00-00-00-00-00- Text representation of the MAC address of (17) I_Gse Adapt 00‘ (not set) the network adapter. er Settings C lass [} 346] s Multicast Ad STRING Get ’00-00-00-00-00- Text representation of the multicast dr (17) I_Gse Adapt 00‘ (not set) address of the network adapter. er Settings C lass [} 346] Set I_Gse Adapt er Settings C lass [} 346] 6.3.2.2 FB_Scsm Client Settings Class The function block FB_Scsm Client Settings Class is used to configure the SCSM communication layer. 170 Version: 1.7.1 TF6510
## Page 171

PLC API Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) Inheritance hierarchy FB_Socket Client Settings Class [} 230] -> FB_Tpkt Client Settings Class [} 223] -> FB_Rfc1006Client Settings Class [} 215] -> FB_Ulosi Client Settings Class [} 202] -> FB_Mms Client Serttings Class [} 185] - > FB_Scsm Client Settings Class FUNCTION_BLOCK FB_Scsm Client Settings Class EXTENDS FB_Mms Client Settings Class IMPLEMENTS I_Scsm Client S ettings Class Interfaces Type Description I_Scsm Client Settings Class [} 347] Interface for configuring the SCSM communication layer Methods Name Description Defaults [} 348] Resets the configuration settings to the default values. Inputs Name Type Definition location Description services FB_Mms Service Support Optio Inherited from Configuration of the ns [} 192] FB_Mms Client Settings Class supported MMS protocol services. [} 185] parameters FB_Mms Parameter Support O -//- Configuration of the supported MMS protocol ptions [} 193] parameters. extended Services FB_Mms Additional Support O -//- Configuration of the additionally supported MMS ptions [} 193] protocol services. extended Parameter FB_Mms Additional CBBOption -//- Configuration of the s supported MMS-CBB s [} 194] protocol parameters. TF6510 Version: 1.7.1 171
## Page 172

PLC API Properties 172 Version: 1.7.1 TF6510
## Page 173

PLC API Name Type Access Definition Initial value Description location b Auto Cleanu BOOL Get,Set Inherited fr TRUE Enables/disables the automatic clean-up/ p om FB_Soc closure of the unused sockets (e.g. after program download or PLC reset). ket Client Se ttings Class [} 230] s Srv Net ID T_Ams N Get,Set -//- ‘‘ Twin CAT network address of the Twin CAT TCP/IP server (TF6310). With the empty et ID string, the network address of the local [} 491] Twin CAT system is used. n Remote Port UDINT Get,Set -//- 102 TCP/IP port number of the server. s Remote Hos T_Ipv4Ad Get,Set -//- ‘127.0.0.1‘ IPv4 network address of the server. t dr [} 491] t Connect TIME Get,Set -//- T#45s Earliest time on expiry of which a new connection can be established. t Ads Timeout TIME Get,Set -//- DEFAULT_ADS_ Maximum timeout time for ADS services TIMEOUT that may not be exceeded. t Socket Time TIME Get,Set -//- T#5s Maximum timeout time during the out execution of the confirmed services that may not be exceeded. b Throttle Mod BOOL Get,Set -//- TRUE Enables/disables the receive data throttle e polling mode. throttle Times T_Throttl Get,Set -//- Param_Sockets.c Configuration of the cycle times for the Default Receiver T receive data throttle polling mode. e Times hrottle Times [} 492] e Trace Socke E_Trace L Get,Set -//- E_Trace Level. No Configures the priority level for the logging t ne of the error messages and log messages. evel [} 488] ip TLS I_Socket Get,Set -//- 0 Configuration parameters of the TLS (Transport Layer Security) protocol layer. Tls Settin Value null = not configured. gs Class [} 365] b Eva Link Stat BOOL Get,Set -//- FALSE Configures the evaluation mode for the link us Err status error of the network adapter. If "FALSE" then disabled, short connection interruptions are bridged. If "TRUE" is enabled, the connection is terminated when a connection error is detected. t Tpkt Timeout TIME Get,Set Inherited fr T#10s Maximum time that may not be exceeded om FB_Tpk during the execution of the confirmed services. t Client Setti ngs Class [} 223] e Trace Tpkt E_Trace L Get,Set -//- E_Trace Level. No Configures the priority level for the logging ne of the error messages and log messages. evel [} 488] TF6510 Version: 1.7.1 173
## Page 174

PLC API Name Type Access Definition Initial value Description location s Calling_T_S STRING Get,Set Inherited fr ’00 00’ RFC 1006 parameter: Calling transport elector om FB_Rfc address selector (source). 1006Client Settings Cla ss [} 215] s Called_T_S STRING Get,Set -//- ’00 01’ RFC 1006 parameter: Called transport elector address selector (destination). e Tpdu Size E_Rfc100 Get,Set -//- E_Rfc1006Tpdu S Maximum TPDU byte length. ize. Size_1024 6Tpdu Siz e [} 487] t Rfc1006Tim TIME Get,Set -//- T#15s Maximum time that may not be exceeded eout during the execution of the confirmed services. e Trace Rfc10 E_Trace L Get,Set -//- E_Trace Level. No Configures the priority level for the logging 06 ne of the error messages and log messages. evel [} 488] s Calling_S_S STRING Get,Set Inherited fr ’00 01‘ Calling-S-selector. elector om FB_Ulo si Client Sett ings Class [} 202] s Called_S_S STRING Get,Set -//- ’00 01‘ Called-S-selector. elector n Session Req WORD Get,Set -//- 2 Session requirements. With the setting uirement 16#FFFF, the value is optional and is not transmitted. s Calling_P_S STRING Get,Set -//- ’00 00 00 01‘ Calling-P-selector. elector s Called_P_S STRING Get,Set -//- ’00 00 00 01‘ Called-P-selector. elector n Present Req BYTE Get,Set -//- 0 Presentation requirements. With the uirements setting: 0, the value is transmitted and with the setting 16#FF, the value is optional and is not transmitted. n Present Prot BYTE Get,Set -//- 16#FF Presentation protocol version. With the ocol Version setting 1, the value is transmitted and with the setting 16#FF, the value is optional and is not transmitted. n Protocol_Ve BYTE Get,Set -//- 16#FF Association Control Service protocol rsion version. With the setting 1, the value is transmitted and with the setting 16#FF, the value is optional and is not transmitted. s Context_Na STRING Get,Set -//- '1.0.9506.2.3' Application context name (object identifier, me dotted presentation), MMS. s Called_AP_ STRING Get,Set -//- '1.1.1.999.1' Called-AP-title. With the empty string, the Title value is optional and is not transmitted. n Called_AE_ UDINT Get,Set -//- 12 Called-AE-qualifier. With the setting Qualifier 16#FFFFFFFFFF, the value is optional and is not transmitted. n Called_AP_ UDINT Get,Set -//- 16#FFFFFFFF Called-AP-invocation-identifier. With the Inv ID setting 16#FFFFFFFFFF, the value is optional and is not transmitted. 174 Version: 1.7.1 TF6510
## Page 175

PLC API Name Type Access Definition Initial value Description location n Called_AE_ UDINT Get,Set -//- 16#FFFFFFFF Called-AE-invocation-identifier. With the Inv ID setting 16#FFFFFFFFFF, the value is optional and is not transmitted. s Calling_AP_ STRING Get,Set -//- '1.1.1.999' Calling-AP-title. With the empty string, the Title value is optional and is not transmitted. n Calling_AE UDINT Get,Set -//- 12 Calling-AE-qualifier. With the setting _Qualifier 16#FFFFFFFFFF, the value is optional and is not transmitted. n Calling_AP UDINT Get,Set -//- 16#FFFFFFFF Calling-AP-invocation-identifier. With the _Inv ID setting 16#FFFFFFFFFF, the value is optional and is not transmitted. n Calling_AE UDINT Get,Set -//- 16#FFFFFFFF Calling-AE-invocation-identifier. With the _Inv ID setting 16#FFFFFFFFFF, the value is optional and is not transmitted. n Requiremen BYTE Get,Set -//- 0 Association Control Service requirements. ts The value: 1 enables the authentication function and the value: 0 disables it. s Mechanism STRING Get,Set -//- '2.2.3.1' Authentication mechanism name. If there is _Name no empty string and the authentication function is enabled, the value is transmitted. s Authent_Val STRING Get,Set -//- ‘‘ Authentication value (password). If there is ue no empty string and the authentication function is enabled, the value is transmitted. s Responding STRING Get,Set -//- ‘‘ Responding authentication value _Value (password). If there is no empty string and the authentication function is enabled and the authentication mode is mutual, the value is transmitted. e Acse_Authe E_Acse A Get,Set -//- E_Acse Authentic Authentication mode. nt ation. Unilateral uthentic ation [} 434] t Ulosi Timeou TIME Get,Set -//- T#20s Maximum time that may not be exceeded t during the execution of the confirmed services. e Trace Ulosi E_Trace L Get,Set -//- E_Trace Level. No Configures the priority level for the logging ne of the error messages and log messages. evel [} 488] n Local Detail T_Mms In Get,Set Inherited fr 65000 MMS Initiate-Request PDU-Parameter: teger32 om FB_Mm local Detail Calling. [} 517] s Client Setti ngs Class [} 185] n Max Serv Ou T_Mms In Get,Set -//- 10 MMS Initiate-Request PDU parameter: t Calling proposed Max Serv Outstanding Calling teger16 [} 517] n Max Serv Ou T_Mms In Get,Set -//- 10 MMS Initiate-Request PDU parameter: t Called proposed Max Serv Outstanding Called. teger16 [} 517] TF6510 Version: 1.7.1 175
## Page 176

PLC API Name Type Access Definition Initial value Description location n Nesting Lev T_Mms In Get,Set -//- 5 MMS Initiate-Request PDU parameter: el proposed Data Structure Nesting Level. teger8 [} 517] n Mms Versio T_Mms In Get,Set -//- 16#0001 MMS init Request Detail parameter: n Number proposed Version Number. teger16 [} 517] ip Parameters I_Mms Pa Get,Set -//- - Interface pointer of the object for the configuration of the MMS init Request Detail rameter S parameter: proposed Parameter CBB. upport O ptions [} 351] ip Services I_Mms Se Get,Set -//- - Interface pointer of the object for the configuration of the MMS init Request Detail rvice Sup parameter: services Supported Calling. port Opti ons [} 351] ip Extended S I_Mms A Get,Set -//- - Interface pointer of the object for the ervices configuration of the MMS init Request Detail dditional parameter: additional Supported Calling. Support Options [} 352] ip Extended P I_Mms A Get,Set -//- - Interface pointer of the object for the arameters configuration of the MMS init Request Detail dditional parameter: additional Cbb Supported Calling. CBBOpti ons [} 352] s Provilege Cl T_Mms Vi Get,Set -//- ‘‘ MMS-init Request Detail parameter: ass Identity privilege Class Identity Called. sible Strin g [} 518] t Mms Timeou TIME Get,Set -//- T#25s Maximum time that may not be exceeded t during the execution of the confirmed services. e Trace Mms E_Trace L Get,Set -//- E_Trace Level. No Configures the priority level for the logging ne of the error messages and log messages. evel [} 488] b Auto Init Dat BOOL Get I_Scsm Clie TRUE Enables/disables the automatic a Sets initialization of the Data Sets/Data Set nt Settings member. Class [} 347] Set Local e Scsm Editio E_Scsm E Get I_Scsm Clie E_Scsm Edition. E IEC 61850 data model edition (1 or 2) n d2 dition nt Settings [} 487] Class [} 347] Set Local 176 Version: 1.7.1 TF6510
## Page 177

PLC API Name Type Access Definition Initial value Description location t Scsm Timeo TIME Get I_Scsm Clie T#30s Maximum time that may not be exceeded ut during the execution of the confirmed nt Settings services. Class [} 347] Set Local e Trace Scsm T_Trace L Get I_Scsm Clie E_Trace Level. No Configures the priority level for the logging ne of the error messages and log messages. evel nt Settings [} 488] Class [} 347] Set Local 6.3.2.3 FB_Scsm Connection Settings Class The function block FB_Scsm Connection Settings Class is used to configure the SCSM communication layer. The configuration settings only apply to a selected server session function block instance. Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) Inheritance hierarchy FB_Socket Connection Settings Class [} 233] -> FB_Tpkt Connection Settings Class [} 226] - > FB_Rfc1006Connection Settings Class [} 218] -> FB_Ulosi Connection Settings Class [} 207] - > FB_Mms Connection Settings Class [} 194] -> FB_Scsm Connection Settings Class FUNCTION_BLOCK FB_Scsm Connection Settings Class EXTENDS FB_Mms Connection Settings Class IMPLEMENTS I_Scs m Connection Settings Class Interfaces Type Description I_Scsm Connection Settings Class [} 348] Interface for configuring the SCSM communication layer. Methods Name Description Defaults [} 348] Resets the configuration settings to the default values. TF6510 Version: 1.7.1 177
## Page 178

PLC API Properties Name Type Access Definition Initial value Description location b Enable BOOL Get,Set Inherited fr FALSE Enables/disables the establishment of the om FB_Soc incoming connection in a server session function block instance. ket Connect ion Settings Class [} 233] b Trace BOOL Get,Set -//- TRUE Enables/disables the logging of error messages and log messages in a server session function block instance. e Accept Get,Set -//- E_Socket Accept Configures the acceptance mode for E_Socke Mode.e ACCEPT_ incoming connections. The incoming t Accept ALL connections can be accepted or rejected Mode by a session function block instance depending on the network address and/or port number of the client. By default, connections to all clients are accepted. n Accept Port UDINT Get,Set -//- 102 Configures the TCP/IP port number of the remote communication partner (clients) to be accepted. s Accept Host Get,Set -//- ‘127.0.0.1‘ Configures the IPv4 network address of T_IPv4Ad the remote communication partner (clients) to be accepted. dr [} 491] s Authent_Val STRING Get,Set Inherited fr ‘‘ Connection-specific authentication ue om FB_Ulo password. Remote communication partner (client) connected to the selected server si Connecti session function block instance can on Settings successfully authenticate with the server Class using this password. [} 207] 6.3.2.4 FB_Scsm Server Settings Class The function block FB_Scsm Server Settings Class is used for the configuration of the SCSM communication layer. Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) Inheritance hierarchy FB_Socket Server Settings Class [} 234] -> FB_Tpkt Server Settings Class [} 227] -> FB_Rfc1006Server Settings Class [} 219] -> FB_Ulosi Server Settings Class [} 209] -> FB_Mms Server Settings Class [} 195] - > FB_Scsm Server Settings Class FUNCTION_BLOCK FB_Scsm Server Settings Class EXTENDS FB_Mms Server Settings Class IMPLEMENTS I_Scsm Server S ettings Class 178 Version: 1.7.1 TF6510
## Page 179

PLC API Interfaces Type Description I_Scsm Server Settings Class [} 349] Interface for configuring the SCSM communication layer Methods Name Description Defaults [} 349] Resets the configuration settings to the default values. Inputs Name Type Definition location Description services FB_Mms Service Support Inherited from Configuration of the supported MMS Options [} 192] FB_Mms Server Settings Clas protocol services. s [} 195] parameters FB_Mms Parameter Supp -//- Configuration of the supported MMS protocol parameters. ort Options [} 193] extended Service FB_Mms Additional Supp -//- Configuration of the additionally s supported MMS protocol services. ort Options [} 193] extended Parame FB_Mms Additional CBBO -//- Configuration of the supported MMS- ters CBB protocol parameters. ptions [} 194] TF6510 Version: 1.7.1 179
## Page 180

PLC API Properties 180 Version: 1.7.1 TF6510
## Page 181

PLC API Name Type Access Definition Initial value Description location b Auto Cleanu BOOL Get,Set Inherited fr TRUE Enables/disables the automatic clean-up/ p om FB_Soc closure of the unused sockets (e.g. after program download or PLC reset). ket Server S ettings Clas s [} 234] b Enable BOOL Get,Set -//- FALSE Enables/disables establishing the server connections. "TRUE" enables the Listen command (listening and incoming connections are accepted) and "FALSE" disables it. s Srv Net ID T_Ams N Get,Set -//- ‘‘ Twin CAT network address of the Twin CAT TCP/IP server (TF6310). With the empty et ID string, the network address of the local [} 491] Twin CAT system is used. n Local Port UDINT Get,Set -//- 102 TCP/IP port number of the server. s Local Host T_Ipv4Ad Get,Set -//- ‘127.0.0.1‘ IPv4 network address of the server. dr [} 491] t Accept TIME Get,Set -//- T#1s Retry cycle time for the internal TCP/IP socket Accept commands. t Listen TIME Get,Set -//- T#1s Retry cycle time for the internal TCP/IP socket Listen command. t Ads Timeout TIME Get,Set -//- DEFAULT_ADS_ Maximum timeout time for ADS services TIMEOUT that may not be exceeded. t Socket Time TIME Get,Set -//- T#5s Maximum timeout time during the out execution of the confirmed services that may not be exceeded. b Throttle Mod BOOL Get,Set -//- TRUE Enables/disables the receive data throttle e polling mode. throttle Times T_Throttl Get,Set -//- Param_Sockets.c Configuration of the cycle times for the Default Receiver T receive data throttle polling mode. e Times hrottle Times [} 492] e Trace Socke E_Trace L Get,Set -//- E_Trace Level. No Configures the priority level for the logging t ne of the error messages and log messages. evel [} 488] ip TLS I_Socket Get,Set -//- 0 Configuration parameters of the TLS (Transport Layer Security) protocol layer. Tls Settin Value null = not configured. gs Class [} 365] b Eva Link Stat BOOL Get,Set -//- FALSE Configures the evaluation mode for the link us Err status error of the network adapter. If "FALSE" then disabled, short connection interruptions are bridged. If "TRUE" is enabled, the connection is terminated when a connection error is detected. t Tpkt Timeout TIME Get,Set Inherited fr T#10s Maximum time that may not be exceeded om FB_Tpk during the execution of the confirmed services. t Server Sett ings Class [} 227] TF6510 Version: 1.7.1 181
## Page 182

PLC API Name Type Access Definition Initial value Description location e Trace Tpkt E_Trace L Get,Set -//- E_Trace Level. No Configures the priority level for the logging ne of the error messages and log messages. evel [} 488] s Calling_T_S STRING Get,Set Inherited fr ’00 00’ RFC 1006 parameter: Calling transport elector om FB_Rfc address selector (source). 1006Server Settings Cla ss [} 219] s Called_T_S STRING Get,Set -//- ’00 01’ RFC 1006 parameter: Called transport elector address selector (destination). e Tpdu Size E_Rfc100 Get,Set -//- E_Rfc1006Tpdu S Maximum TPDU byte length. ize. Size_1024 6Tpdu Siz e [} 487] t Rfc1006Tim TIME Get,Set -//- T#15s Maximum time that may not be exceeded eout during the execution of the confirmed services. e Trace Rfc10 E_Trace L Get,Set -//- E_Trace Level. No Configures the priority level for the logging 06 ne of the error messages and log messages. evel [} 488] s Calling_S_S STRING Get,Set Inherited fr ’00 01‘ Calling-S-selector. elector om FB_Ulo si Server Set tings Class [} 209] s Called_S_S STRING Get,Set -//- ’00 01‘ Called-S-selector. elector n Session Req WORD Get,Set -//- 2 Session requirements. With the setting uirement 16#FFFF, the value is optional and is not transmitted. s Calling_P_S STRING Get,Set -//- ’00 00 00 01‘ Calling-P-selector. elector s Called_P_S STRING Get,Set -//- ’00 00 00 01‘ Called-P-selector. elector n Present Req BYTE Get,Set -//- 0 Presentation requirements. With the uirements setting: 0, the value is transmitted and with the setting 16#FF, the value is optional and is not transmitted. n Present Prot BYTE Get,Set -//- 16#FF Presentation protocol version. With the ocol Version setting 1, the value is transmitted and with the setting 16#FF, the value is optional and is not transmitted. n Protocol_Ve BYTE Get,Set -//- 16#FF Association Control Service protocol rsion version. With the setting 1, the value is transmitted and with the setting 16#FF, the value is optional and is not transmitted. s Context_Na STRING Get,Set -//- '1.0.9506.2.3' Applicaton context name (object identifier, me dotted presentation), MMS. s Called_AP_ STRING Get,Set -//- '1.1.1.999.1' Called-AP-title. With the empty string, the Title value is optional and is not transmitted. 182 Version: 1.7.1 TF6510
## Page 183

PLC API Name Type Access Definition Initial value Description location n Called_AE_ UDINT Get,Set -//- 12 Called-AE-qualifier. With the setting Qualifier 16#FFFFFFFFFF, the value is optional and is not transmitted. n Called_AP_ UDINT Get,Set -//- 16#FFFFFFFF Called-AP-invocation-identifier. With the Inv ID setting 16#FFFFFFFFFF, the value is optional and is not transmitted. n Called_AE_ UDINT Get,Set -//- 16#FFFFFFFF Called-AE-invocation-identifier. With the Inv ID setting 16#FFFFFFFFFF, the value is optional and is not transmitted. s Calling_AP_ STRING Get,Set -//- '1.1.1.999' Calling-AP-title. With the empty string, the Title value is optional and is not transmitted. n Calling_AE UDINT Get,Set -//- 12 Calling-AE-qualifier. With the setting _Qualifier 16#FFFFFFFFFF, the value is optional and is not transmitted. n Calling_AP UDINT Get,Set -//- 16#FFFFFFFF Calling-AP-invocation-identifier. With the _Inv ID setting 16#FFFFFFFFFF, the value is optional and is not transmitted. n Calling_AE UDINT Get,Set -//- 16#FFFFFFFF Calling-AE-invocation-identifier. With the _Inv ID setting 16#FFFFFFFFFF, the value is optional and is not transmitted. n Requiremen BYTE Get,Set -//- 0 Association Control Service requirements. ts The value: 1 enables the authentication function and the value: 0 disables it. s Mechanism STRING Get,Set -//- '2.2.3.1' Authentication mechanism name. If there is _Name no empty string and the authentication function is enabled, the value is transmitted. s Authent_Val STRING Get,Set -//- ‘‘ Authentication value (password). If there is ue no empty string and the authentication function is enabled, the value is transmitted. s Responding STRING Get,Set -//- ‘‘ Responding authentication value _Value (password). If no empty string, the authentication function is enabled and authentication mode: Mutual then the value is transmitted. e Acse_Authe E_Acse A Get,Set -//- E_Acse Authentic Authentication mode. nt ation. Unilateral uthentic ation [} 434] t Ulosi Timeou TIME Get,Set -//- T#20s Maximum time that may not be exceeded t during the execution of the confirmed services. e Trace Ulosi E_Trace L Get,Set -//- E_Trace Level. No Configures the priority level for the logging ne of the error messages and log messages. evel [} 488] n Local Detail T_Mms In Get,Set Inherited fr 65000 MMS Initiate-Request PDU-Parameter: teger32 om FB_Mm local Detail Calling. [} 517] s Server Sett ings Class [} 195] TF6510 Version: 1.7.1 183
## Page 184

PLC API Name Type Access Definition Initial value Description location n Max Serv Ou T_Mms In Get,Set -//- 10 MMS Initiate-Request PDU parameter: t Calling proposed Max Serv Outstanding Calling teger16 [} 517] n Max Serv Ou T_Mms In Get,Set -//- 10 MMS Initiate-Request PDU parameter: t Called proposed Max Serv Outstanding Called. teger16 [} 517] n Nesting Lev T_Mms In Get,Set -//- 5 MMS Initiate-Request PDU parameter: el proposed Data Structure Nesting Level. teger8 [} 517] n Mms Versio T_Mms In Get,Set -//- 16#0001 MMS init Request Detail parameter: n Number proposed Version Number. teger16 [} 517] ip Parameters I_Mms Pa Get,Set -//- - Interface pointer of the object for the configuration of the MMS init Request Detail rameter S parameter: proposed Parameter CBB. upport O ptions [} 351] ip Services I_Mms Se Get,Set -//- - Interface pointer of the object for the configuration of the MMS init Request Detail rvice Sup parameter: services Supported Calling. port Opti ons [} 351] ip Extended S I_Mms A Get,Set -//- - Interface pointer of the object for the ervices configuration of the MMS init Request Detail dditional parameter: additional Supported Calling. Support Options [} 352] ip Extended P I_Mms A Get,Set -//- - Interface pointer of the object for the arameters configuration of the MMS init Request Detail dditional parameter: additional Cbb Supported Calling. CBBOpti ons [} 352] s Provilege Cl T_Mms Vi Get,Set -//- ‘‘ MMS-init Request Detail parameter: ass Identity privilege Class Identity Called. sible Strin g [} 518] t Mms Timeou TIME Get,Set -//- T#25s Maximum time that may not be exceeded t during the execution of the confirmed services. e Trace Mms E_Trace L Get,Set -//- E_Trace Level. No Configures the priority level for the logging ne of the error messages and log messages. evel [} 488] b Auto Init Dat BOOL Get I_Scsm Serv TRUE Enables/disables the automatic a Sets initialization of the Data Sets/Data Set er Settings member. Class [} 349] Set Local 184 Version: 1.7.1 TF6510
## Page 185

PLC API Name Type Access Definition Initial value Description location e Scsm Editio E_Scsm E Get I_Scsm Serv E_Scsm Edition. E IEC 61850 data model edition (1 or 2) n d2 dition er Settings [} 487] Class [} 349] Set Local t Scsm Timeo TIME Get I_Scsm Serv T#30s Maximum time that may not be exceeded ut during the execution of the confirmed er Settings services. Class [} 349] Set Local e Trace Scsm T_Trace L Get I_Scsm Serv E_Trace Level. No Configures the priority level for the logging ne of the error messages and log messages. evel er Settings [} 488] Class [} 349] Set Local 6.3.2.5 FB_Mms Client Settings Class The function block FB_Mms Client Settings Class is used for the configuration of the MMS communication layer. Namespace: Tc3_Mms [} 98] Library: Tc3_Mms (Tc3_Mms.compiled-library) Inheritance hierarchy FB_Socket Client Settings Class [} 230] -> FB_Tpkt Client Settings Class [} 223] -> FB_Rfc1006Client Settings Class [} 215] -> FB_Ulosi Client Settings Class [} 202] -> FB_Mms Client Settings Class FUNCTION_BLOCK FB_Mms Client Settings Class EXTENDS FB_Ulosi Client Settings Class IMPLEMENTS I_Mms Client S ettings Class Interfaces Type Description I_Mms Client Settings Class [} 349] Interface for configuring the MMS communication layer. Methods Name Description Defaults [} 352] Resets the configuration settings to the default values. TF6510 Version: 1.7.1 185
## Page 186

PLC API Inputs Name Type Initial value Description services FB_Mms Service Support Options .n Used Bits := Object for the c Mms Services Support Opti configuration of the [} 192] ons Bit Size (* default: 85 supported MMS protocol *), services. .b Status := TRUE, .b Get Name List := TRUE, .b Identify := TRUE, .b Read := TRUE, .b Write := TRUE, .b Get Variable Access Attrib utes := TRUE, .b Define Named Variable Lis t := TRUE, .b Get Named Variable List At tributes := TRUE, .b Delete Named Variable Lis t := TRUE, .b Get Domain Attributes := TRUE, .b Information Report := TRUE, .b Conclude := TRUE, .b Cancel := TRUE parameters FB_Mms Parameter Support Option .n Used Bits := .c Mms Para Object for the meter Support Options Bit Si configuration of the s [} 193] ze (* default := 11 *), supported MMS protocol .b Str1 := TRUE, parameters. .b Str2 := TRUE, .b Vnam := TRUE, .b Valt := TRUE, .b Vlis := TRUE extended Services FB_Mms Additional Support Option .n Used Bits := Object for the c Mms Additional Support Op configuration of the s [} 193] tions Bit Size (* default := 0, additionally supported not used *) MMS protocol services. extended Paramet FB_Mms Additional CBBOptions .n Used Bits := Object for the ers c Mms Additional Cbb Option configuration of the [} 194] s Bit Size (* default := 0, not additionally supported used *) MMS-CBB protocol parameters. 186 Version: 1.7.1 TF6510
## Page 187

PLC API Properties TF6510 Version: 1.7.1 187
## Page 188

PLC API Name Type Access Definition Initial value Description location b Auto Cleanu BOOL Get,Set Inherited fr TRUE Enables/disables the automatic clean-up/ p om FB_Soc closure of the unused sockets (e.g. after program download or PLC reset). ket Client Se ttings Class [} 230] s Srv Net ID T_Ams N Get,Set -//- ‘‘ Twin CAT network address of the Twin CAT TCP/IP server (TF6310). With the empty et ID string, the network address of the local [} 491] Twin CAT system is used. n Remote Port UDINT Get,Set -//- 102 TCP/IP port number of the server. s Remote Hos T_Ipv4Ad Get,Set -//- ‘127.0.0.1‘ IPv4 network address of the server. t dr [} 491] t Connect TIME Get,Set -//- T#45s Earliest time on expiry of which a new connection can be established. t Ads Timeout TIME Get,Set -//- DEFAULT_ADS_ Maximum timeout time for ADS services TIMEOUT that may not be exceeded. t Socket Time TIME Get,Set -//- T#5s Maximum timeout time during the out execution of the confirmed services that may not be exceeded. b Throttle Mod BOOL Get,Set -//- TRUE Enables/disables the receive data throttle e polling mode. throttle Times T_Throttl Get,Set -//- Param_Sockets.c Configuration of the cycle times for the Default Receiver T receive data throttle polling mode. e Times hrottle Times [} 492] e Trace Socke E_Trace L Get,Set -//- E_Trace Level. No Configures the priority level for the logging t ne of the error messages and log messages. evel [} 488] ip TLS I_Socket Get,Set -//- 0 Configuration parameters of the TLS (Transport Layer Security) protocol layer. Tls Settin Value null = not configured. gs Class [} 365] b Eva Link Stat BOOL Get,Set -//- FALSE Configures the evaluation mode for the link us Err status error of the network adapter. If "FALSE" then disabled, short connection interruptions are bridged. If "TRUE" is enabled, the connection is terminated when a connection error is detected. t Tpkt Timeout TIME Get,Set Inherited fr T#10s Maximum time that may not be exceeded om FB_Tpk during the execution of the confirmed services. t Client Setti ngs Class [} 223] e Trace Tpkt E_Trace L Get,Set -//- E_Trace Level. No Configures the priority level for the logging ne of the error messages and log messages. evel [} 488] 188 Version: 1.7.1 TF6510
## Page 189

PLC API Name Type Access Definition Initial value Description location s Calling_T_S STRING Get,Set Inherited fr ’00 00’ RFC 1006 parameter: Calling transport elector om FB_Rfc address selector (source). 1006Client Settings Cla ss [} 215] s Called_T_S STRING Get,Set -//- ’00 01’ RFC 1006 parameter: Called transport elector address selector (destination). e Tpdu Size E_Rfc100 Get,Set -//- E_Rfc1006Tpdu S Maximum TPDU byte length. ize. Size_1024 6Tpdu Siz e [} 487] t Rfc1006Tim TIME Get,Set -//- T#15s Maximum time that may not be exceeded eout during the execution of the confirmed services. e Trace Rfc10 E_Trace L Get,Set -//- E_Trace Level. No Configures the priority level for the logging 06 ne of the error messages and log messages. evel [} 488] s Calling_S_S STRING Get,Set Inherited fr ’00 01‘ Calling-S-selector. elector om FB_Ulo si Client Sett ings Class [} 202] s Called_S_S STRING Get,Set -//- ’00 01‘ Called-S-selector. elector n Session Req WORD Get,Set -//- 2 Session requirements. With the setting uirement 16#FFFF, the value is optional and is not transmitted. s Calling_P_S STRING Get,Set -//- ’00 00 00 01‘ Calling-P-selector. elector s Called_P_S STRING Get,Set -//- ’00 00 00 01‘ Called-P-selector. elector n Present Req BYTE Get,Set -//- 0 Presentation requirements. With the uirements setting: 0, the value is transmitted and with the setting 16#FF, the value is optional and is not transmitted. n Present Prot BYTE Get,Set -//- 16#FF Presentation protocol version. With the ocol Version setting 1, the value is transmitted and with the setting 16#FF, the value is optional and is not transmitted. n Protocol_Ve BYTE Get,Set -//- 16#FF Association Control Service protocol rsion version. With the setting 1, the value is transmitted and with the setting 16#FF, the value is optional and is not transmitted. s Context_Na STRING Get,Set -//- '1.0.9506.2.3' Application context name (object identifier, me dotted presentation), MMS. s Called_AP_ STRING Get,Set -//- '1.1.1.999.1' Called-AP-title. With the empty string, the Title value is optional and is not transmitted. n Called_AE_ UDINT Get,Set -//- 12 Called-AE-qualifier. With the setting Qualifier 16#FFFFFFFFFF, the value is optional and is not transmitted. n Called_AP_ UDINT Get,Set -//- 16#FFFFFFFF Called-AP-invocation-identifier. With the Inv ID setting 16#FFFFFFFFFF, the value is optional and is not transmitted. TF6510 Version: 1.7.1 189
## Page 190

PLC API Name Type Access Definition Initial value Description location n Called_AE_ UDINT Get,Set -//- 16#FFFFFFFF Called-AE-invocation-identifier. With the Inv ID setting 16#FFFFFFFFFF, the value is optional and is not transmitted. s Calling_AP_ STRING Get,Set -//- '1.1.1.999' Calling-AP-title. With the empty string, the Title value is optional and is not transmitted. n Calling_AE UDINT Get,Set -//- 12 Calling-AE-qualifier. With the setting _Qualifier 16#FFFFFFFFFF, the value is optional and is not transmitted. n Calling_AP UDINT Get,Set -//- 16#FFFFFFFF Calling-AP-invocation-identifier. With the _Inv ID setting 16#FFFFFFFFFF, the value is optional and is not transmitted. n Calling_AE UDINT Get,Set -//- 16#FFFFFFFF Calling-AE-invocation-identifier. With the _Inv ID setting 16#FFFFFFFFFF, the value is optional and is not transmitted. n Requiremen BYTE Get,Set -//- 0 Association Control Service requirements. ts The value: 1 enables the authentication function and the value: 0 disables it. s Mechanism STRING Get,Set -//- '2.2.3.1' Authentication mechanism name. If there is _Name no empty string and the authentication function is enabled, the value is transmitted. s Authent_Val STRING Get,Set -//- ‘‘ Authentication value (password). If there is ue no empty string and the authentication function is enabled, the value is transmitted. s Responding STRING Get,Set -//- ‘‘ Responding authentication value _Value (password). If no empty string, the authentication function is enabled and authentication mode: Mutual then the value is transmitted. e Acse_Authe E_Acse A Get,Set -//- E_Acse Authentic Authentication mode. nt ation. Unilateral uthentic ation [} 434] t Ulosi Timeou TIME Get,Set -//- T#20s Maximum time that may not be exceeded t during the execution of the confirmed services. e Trace Ulosi E_Trace L Get,Set -//- E_Trace Level. No Configures the priority level for the logging ne of the error messages and log messages. evel [} 488] n Local Detail T_Mms In Get I_Mms Clie 65000 MMS Initiate-Request PDU-Parameter: local Detail Calling. teger32 nt Settings [} 517] Class [} 349] Set Local n Max Serv Ou T_Mms In Get I_Mms Clie 10 MMS Initiate-Request PDU parameter: t Calling proposed Max Serv Outstanding Calling teger16 nt Settings [} 517] Class [} 349] Set Local 190 Version: 1.7.1 TF6510
## Page 191

PLC API Name Type Access Definition Initial value Description location n Max Serv Ou T_Mms In Get I_Mms Clie 10 MMS Initiate-Request PDU parameter: t Called proposed Max Serv Outstanding Called. teger16 nt Settings [} 517] Class [} 349] Set Local n Nesting Lev T_Mms In Get I_Mms Clie 5 MMS Initiate-Request PDU parameter: el proposed Data Structure Nesting Level. teger8 nt Settings [} 517] Class [} 349] Set Local n Mms Versio T_Mms In Get I_Mms Clie 16#0001 MMS init Request Detail parameter: n Number proposed Version Number. teger16 nt Settings [} 517] Class [} 349] Set Local ip Parameters I_Mms Pa Get I_Mms Clie - Interface pointer of the object for the configuration of the MMS init Request Detail rameter S nt Settings parameter: proposed Parameter CBB. upport O Class ptions [} 349] [} 351] Set Local ip Services I_Mms Se Get I_Mms Clie - Interface pointer of the object for the configuration of the MMS init Request Detail rvice Sup nt Settings parameter: services Supported Calling. port Opti Class ons [} 349] [} 351] Set Local ip Extended S I_Mms A Get I_Mms Clie - Interface pointer of the object for the ervices configuration of the MMS init Request Detail dditional nt Settings parameter: additional Supported Calling. Support Class Options [} 349] [} 352] Set Local ip Extended P I_Mms A Get I_Mms Clie - Interface pointer of the object for the arameters configuration of the MMS init Request Detail dditional nt Settings parameter: additional Cbb Supported Calling. CBBOpti Class ons [} 349] [} 352] Set Local s Provilege Cl T_Mms Vi Get I_Mms Clie ‘‘ MMS-init Request Detail parameter: ass Identity privilege Class Identity Called. sible Strin nt Settings g [} 518] Class [} 349] Set Local t Mms Timeou TIME Get I_Mms Clie T#25s Maximum time that may not be exceeded t during the execution of the confirmed nt Settings services. Class [} 349] Set Local TF6510 Version: 1.7.1 191
## Page 192

PLC API Name Type Access Definition Initial value Description location e Trace Mms E_Trace L Get I_Mms Clie E_Trace Level. No Configures the priority level for the logging ne of the error messages and log messages. evel nt Settings [} 488] Class [} 349] Set Local 6.3.2.5.1 FB_Mms Service Support Options The function block FB_Mms Service Support Options is used to configure the supported MMS protocol services. Inheritance hierarchy FB_Mms Service Supportoptions FUNCTION_BLOCK FB_Mms Service Support Options IMPLEMENTS I_Mms Service Support Options Interfaces Type Description I_Mms Service Support Options [} 351] Interface for the configuration of the supported MMS protocol services. Properties Name Type Access Initial value Description b Cancel BOOL Get,Set FALSE b Conclude BOOL Get,Set FALSE b Define Named Type BOOL Get,Set FALSE b Define Named Variable BOOL Get,Set FALSE b Define Named Variable List BOOL Get,Set FALSE b Define Scattered Access BOOL Get,Set FALSE b Delete Named Type BOOL Get,Set FALSE b Delete Named Variable List BOOL Get,Set FALSE b Delete Variable Access BOOL Get,Set FALSE b Get Domain Attributes BOOL Get,Set FALSE b Get Named Type Attributes BOOL Get,Set FALSE b Get Named Variable List Attributes BOOL Get,Set FALSE b Get Name List BOOL Get,Set FALSE b Get Scattered Access Attributes BOOL Get,Set FALSE b Get Variable Access Attributes BOOL Get,Set FALSE b Identify BOOL Get,Set FALSE b Information Report BOOL Get,Set FALSE b Read BOOL Get,Set FALSE b Rename BOOL Get,Set FALSE b Status BOOL Get,Set FALSE b Write BOOL Get,Set FALSE 192 Version: 1.7.1 TF6510
## Page 193

PLC API 6.3.2.5.2 FB_Mms Parameter Support Options The function block FB_Mms Parameter Support Options is used to configure the supported MMS protocol parameters. Inheritance hierarchy FB_Mms Parameter Support Options FUNCTION_BLOCK FB_Mms Parameter Support Options IMPLEMENTS I_Mms Parameter Support Options Interfaces Type Description I_Mms Parameter Support Options [} 351] Interface for the configuration of the supported MMS protocol parameters. Properties Name Type Access Initial value Description b Cspi BOOL Get,Set FALSE b Csr BOOL Get,Set FALSE b Str1 BOOL Get,Set FALSE Array support b Str2 BOOL Get,Set FALSE Structure support b Vadr BOOL Get,Set FALSE b Valt BOOL Get,Set FALSE Support for index and index range values (alternate access) b Vlis BOOL Get,Set FALSE Support for named Variable List b Vnam BOOL Get,Set FALSE Support for named Variables 6.3.2.5.3 FB_Mms Additional Support Options The function block FB_Mms Additional Support Options is used to configure the additionally supported MMS protocol services. Inheritance hierarchy FB_Mms Additional Support Options FUNCTION_BLOCK FB_Mms Additional Support Options IMPLEMENTS I_Mms Additional Support Options Interfaces Type Description I_Mms Additional Support Options [} 352] Interface for the configuration of the additionally supported MMS protocol services. Properties Name Type Access Initial value Description b Vmd Reset BOOL Get,Set FALSE b Vmd Stop BOOL Get,Set FALSE b Select BOOL Get, Set FALSE TF6510 Version: 1.7.1 193
## Page 194

PLC API 6.3.2.5.4 FB_Mms Additional CBBOptions The function block FB_Mms Additional CBBOptions is used to configure the additionally supported MMS CBB Protocol parameters. Inheritance hierarchy FB_Mms Additional CBBOptions FUNCTION_BLOCK FB_Mms Additional CBBOptions IMPLEMENTS I_Mms Additional CBBOptions Interfaces Type Description I_Mms Additional CBBOptions [} 352] Interface for the configuration of the additionally supported MMS-CBB protocol parameters. Properties Name Type Access Initial value Description b Dei BOOL Get,Set FALSE b Des BOOL Get,Set FALSE b Red BOOL Get, Set FALSE 6.3.2.6 FB_Mms Connection Settings Class The function block FB_Mms Connection Settings Class is used to configure the MMS communication layer. The configuration settings only apply to a selected server session function block instance. Namespace: Tc3_Mms [} 98] Library: Tc3_Mms (Tc3_Mms.compiled-library) Inheritance hierarchy FB_Socket Connection Settings Class [} 233] -> FB_Tpkt Connection Settings Class [} 226] - > FB_Rfc1006Connection Settings Class [} 218] -> FB_Ulosi Connection Settings Class [} 207] - > FB_Mms Connection Settings Class FUNCTION_BLOCK FB_Mms Connection Settings Class EXTENDS FB_Ulosi Connection Settings Class IMPLEMENTS I_Mm s Connection Settings Class Interfaces Type Description I_Mms Connection Settings Class [} 353] Interface for configuring the MMS communication layer. Methods Name Description Defaults [} 353] Resets the configuration settings to the default values. 194 Version: 1.7.1 TF6510
## Page 195

PLC API Properties Name Type Access Definition Initial value Description location b Enable BOOL Get,Set Inherited fr FALSE Enables/disables the establishment of the om FB_Soc incoming connection in a server session function block instance. ket Connect ion Settings Class [} 233] b Trace BOOL Get,Set -//- TRUE Enables/disables the logging of error messages and log messages in a server session function block instance. e Accept Get,Set -//- E_Socket Accept Configures the acceptance mode for E_Socke Mode.e ACCEPT_ incoming connections. The incoming t Accept ALL connections can be accepted or rejected Mode by a session function block instance depending on the network address and/or port number of the client. By default, connections to all clients are accepted. n Accept Port UDINT Get,Set -//- 102 Configures the TCP/IP port number of the remote communication partner (clients) to be accepted. s Accept Host Get,Set -//- ‘127.0.0.1‘ Configures the IPv4 network address of T_IPv4Ad the remote communication partner (clients) to be accepted. dr [} 491] s Authent_Val STRING Get,Set Inherited fr ‘‘ Connection-specific authentication ue om FB_Ulo password. Remote communication partner (client) connected to the selected server si Connecti session function block instance can on Settings successfully authenticate with the server Class using this password. [} 207] 6.3.2.7 FB_Mms Server Settings Class The function block FB_Mms Server Settings Class is used for the configuration of the MMS communication layer. Namespace: Tc3_Mms [} 98] Library: Tc3_Mms (Tc3_Mms.compiled-library) Inheritance hierarchy FB_Socket Server Settings Class [} 234] -> FB_Tpkt Server Settings Class [} 227] -> FB_Rfc1006Server Settings Class [} 219] -> FB_Ulosi Server Settings Class [} 209] -> FB_Mms Server Settings Class FUNCTION_BLOCK FB_Mms Server Settings Class EXTENDS FB_Ulosi Server Settings Class IMPLEMENTS I_Mms Server S ettings Class TF6510 Version: 1.7.1 195
## Page 196

PLC API Interfaces Type Description I_Mms Server Settings Class [} 353] Interface for configuring the MMS communication layer. Methods Name Description Defaults [} 354] Resets the configuration settings to the default values. Inputs Name Type Initial value Description services FB_Mms Service Supp .n Used Bits := Object for the configuration of the supported c Mms Services Support Opti MMS protocol services. ort Options [} 192] ons Bit Size (* default: 85 *), .b Status := TRUE, .b Get Name List := TRUE, .b Identify := TRUE, .b Read := TRUE, .b Write := TRUE, .b Get Variable Access Attribu tes := TRUE, .b Define Named Variable List := TRUE, .b Get Named Variable List Att ributes := TRUE, .b Delete Named Variable List := TRUE, .b Get Domain Attributes := TRUE, .b Information Report := TRUE, .b Conclude := TRUE, .b Cancel := TRUE parameters FB_Mms Parameter S .n Used Bits := .c Mms Param Object for the configuration of the supported eter Support Options Bit Size MMS protocol parameters. upport Options (* default := 11 *), [} 193] .b Str1 := TRUE, .b Str2 := TRUE, .b Vnam := TRUE, .b Valt := TRUE, .b Vlis := TRUE extended Ser FB_Mms Additional S .n Used Bits := Object for the configuration of the vices c Mms Additional Support Opt additionally supported MMS protocol upport Options ions Bit Size (* default := 0, services. [} 193] not used *) extended Par FB_Mms Additional C .n Used Bits := Object for the configuration of the ameters c Mms Additional Cbb Option additionally supported MMS-CBB protocol BBOptions [} 194] s Bit Size (* default := 0, not parameters. used *) 196 Version: 1.7.1 TF6510
## Page 197

PLC API Properties TF6510 Version: 1.7.1 197
## Page 198

PLC API Name Type Access Definition Initial value Description location b Auto Cleanu BOOL Get,Set Inherited fr TRUE Enables/disables the automatic clean-up/ p om FB_Soc closure of the unused sockets (e.g. after program download or PLC reset). ket Server S ettings Clas s [} 234] b Enable BOOL Get,Set -//- FALSE Enables/disables establishing the server connections. "TRUE" enables the Listen command (listening and incoming connections are accepted) and "FALSE" disables it. s Srv Net ID T_Ams N Get,Set -//- ‘‘ Twin CAT network address of the Twin CAT TCP/IP server (TF6310). With the empty et ID string, the network address of the local [} 491] Twin CAT system is used. n Local Port UDINT Get,Set -//- 102 TCP/IP port number of the server. s Local Host T_Ipv4Ad Get,Set -//- ‘127.0.0.1‘ IPv4 network address of the server. dr [} 491] t Accept TIME Get,Set -//- T#1s Retry cycle time for the internal TCP/IP socket Accept commands. t Listen TIME Get,Set -//- T#1s Retry cycle time for the internal TCP/IP socket Listen command. t Ads Timeout TIME Get,Set -//- DEFAULT_ADS_ Maximum timeout time for ADS services TIMEOUT that may not be exceeded. t Socket Time TIME Get,Set -//- T#5s Maximum timeout time during the out execution of the confirmed services that may not be exceeded. b Throttle Mod BOOL Get,Set -//- TRUE Enables/disables the receive data throttle e polling mode. throttle Times T_Throttl Get,Set -//- Param_Sockets.c Configuration of the cycle times for the Default Receiver T receive data throttle polling mode. e Times hrottle Times [} 492] e Trace Socke E_Trace L Get,Set -//- E_Trace Level. No Configures the priority level for the logging t ne of the error messages and log messages. evel [} 488] ip TLS I_Socket Get,Set -//- 0 Configuration parameters of the TLS (Transport Layer Security) protocol layer. Tls Settin Value null = not configured. gs Class [} 365] b Eva Link Stat BOOL Get,Set -//- FALSE Configures the evaluation mode for the link us Err status error of the network adapter. If "FALSE" then disabled, short connection interruptions are bridged. If "TRUE" is enabled, the connection is terminated when a connection error is detected. t Tpkt Timeout TIME Get,Set Inherited fr T#10s Maximum time that may not be exceeded om FB_Tpk during the execution of the confirmed services. t Server Sett ings Class [} 227] 198 Version: 1.7.1 TF6510
## Page 199

PLC API Name Type Access Definition Initial value Description location e Trace Tpkt E_Trace L Get,Set -//- E_Trace Level. No Configures the priority level for the logging ne of the error messages and log messages. evel [} 488] b Eva Link Stat BOOL us Err s Calling_T_S STRING Get,Set Inherited fr ’00 00’ RFC 1006 parameter: Calling transport elector om FB_Rfc address selector (source). 1006Server Settings Cla ss [} 219] s Called_T_S STRING Get,Set -//- ’00 01’ RFC 1006 parameter: Called transport elector address selector (destination). e Tpdu Size E_Rfc100 Get,Set -//- E_Rfc1006Tpdu S Maximum TPDU byte length. ize. Size_1024 6Tpdu Siz e [} 487] t Rfc1006Tim TIME Get,Set -//- T#15s Maximum time that may not be exceeded eout during the execution of the confirmed services. e Trace Rfc10 E_Trace L Get,Set -//- E_Trace Level. No Configures the priority level for the logging 06 ne of the error messages and log messages. evel [} 488] s Calling_S_S STRING Get,Set Inherited fr ’00 01‘ Calling-S-selector. elector om FB_Ulo si Server Set tings Class [} 209] s Called_S_S STRING Get,Set -//- ’00 01‘ Called-S-selector. elector n Session Req WORD Get,Set -//- 2 Session requirements. With the setting uirement 16#FFFF, the value is optional and is not transmitted. s Calling_P_S STRING Get,Set -//- ’00 00 00 01‘ Calling-P-selector. elector s Called_P_S STRING Get,Set -//- ’00 00 00 01‘ Called-P-selector. elector n Present Req BYTE Get,Set -//- 0 Presentation requirements. With the uirements setting: 0, the value is transmitted and with the setting 16#FF, the value is optional and is not transmitted. n Present Prot BYTE Get,Set -//- 16#FF Presentation protocol version. With the ocol Version setting 1, the value is transmitted and with the setting 16#FF, the value is optional and is not transmitted. n Protocol_Ve BYTE Get,Set -//- 16#FF Association Control Service protocol rsion version. With the setting 1, the value is transmitted and with the setting 16#FF, the value is optional and is not transmitted. s Context_Na STRING Get,Set -//- '1.0.9506.2.3' Application context name (object identifier, me dotted presentation), MMS. s Called_AP_ STRING Get,Set -//- '1.1.1.999.1' Called-AP-title. With the empty string, the Title value is optional and is not transmitted. TF6510 Version: 1.7.1 199
## Page 200

PLC API Name Type Access Definition Initial value Description location n Called_AE_ UDINT Get,Set -//- 12 Called-AE-qualifier. With the setting Qualifier 16#FFFFFFFFFF, the value is optional and is not transmitted. n Called_AP_ UDINT Get,Set -//- 16#FFFFFFFF Called-AP-invocation-identifier. With the Inv ID setting 16#FFFFFFFFFF, the value is optional and is not transmitted. n Called_AE_ UDINT Get,Set -//- 16#FFFFFFFF Called-AE-invocation-identifier. With the Inv ID setting 16#FFFFFFFFFF, the value is optional and is not transmitted. s Calling_AP_ STRING Get,Set -//- '1.1.1.999' Calling-AP-title. With the empty string, the Title value is optional and is not transmitted. n Calling_AE UDINT Get,Set -//- 12 Calling-AE-qualifier. With the setting _Qualifier 16#FFFFFFFFFF, the value is optional and is not transmitted. n Calling_AP UDINT Get,Set -//- 16#FFFFFFFF Calling-AP-invocation-identifier. With the _Inv ID setting 16#FFFFFFFFFF, the value is optional and is not transmitted. n Calling_AE UDINT Get,Set -//- 16#FFFFFFFF Calling-AE-invocation-identifier. With the _Inv ID setting 16#FFFFFFFFFF, the value is optional and is not transmitted. n Requiremen BYTE Get,Set -//- 0 Association Control Service requirements. ts The value: 1 enables the authentication function and the value: 0 disables it. s Mechanism STRING Get,Set -//- '2.2.3.1' Authentication mechanism name. If there is _Name no empty string and the authentication function is enabled, the value is transmitted. s Authent_Val STRING Get,Set -//- ‘‘ Authentication value (password). If there is ue no empty string and the authentication function is enabled, the value is transmitted. s Responding STRING Get,Set -//- ‘‘ Responding authentication value _Value (password). If no empty string, the authentication function is enabled and authentication mode: Mutual then the value is transmitted. e Acse_Authe E_Acse A Get,Set -//- E_Acse Authentic Authentication mode. nt ation. Unilateral uthentic ation [} 434] t Ulosi Timeou TIME Get,Set -//- T#20s Maximum time that may not be exceeded t during the execution of the confirmed services. e Trace Ulosi E_Trace L Get,Set -//- E_Trace Level. No Configures the priority level for the logging ne of the error messages and log messages. evel [} 488] n Local Detail T_Mms In Get I_Mms Serv 65000 MMS Initiate-Request PDU-Parameter: local Detail Calling. teger32 er Settings [} 517] Class [} 353] Set Local 200 Version: 1.7.1 TF6510
## Page 201

PLC API Name Type Access Definition Initial value Description location n Max Serv Ou T_Mms In Get I_Mms Serv 10 MMS Initiate-Request PDU parameter: t Calling proposed Max Serv Outstanding Calling teger16 er Settings [} 517] Class [} 353] Set Local n Max Serv Ou T_Mms In Get I_Mms Serv 10 MMS Initiate-Request PDU parameter: t Called proposed Max Serv Outstanding Called. teger16 er Settings [} 517] Class [} 353] Set Local n Nesting Lev T_Mms In Get I_Mms Serv 5 MMS Initiate-Request PDU parameter: el proposed Data Structure Nesting Level. teger8 er Settings [} 517] Class [} 353] Set Local n Mms Versio T_Mms In Get I_Mms Serv 16#0001 MMS init Request Detail parameter: n Number proposed Version Number. teger16 er Settings [} 517] Class [} 353] Set Local ip Parameters I_Mms Pa Get I_Mms Serv - Interface pointer of the object for the configuration of the MMS init Request Detail rameter S er Settings parameter: proposed Parameter CBB. upport O Class ptions [} 353] [} 351] Set Local ip Services I_Mms Se Get I_Mms Serv - Interface pointer of the object for the configuration of the MMS init Request Detail rvice Sup er Settings parameter: services Supported Calling. port Opti Class ons [} 353] [} 351] Set Local ip Extended S I_Mms A Get I_Mms Serv - Interface pointer of the object for the ervices configuration of the MMS init Request Detail dditional er Settings parameter: additional Supported Calling. Support Class Options [} 353] [} 352] Set Local ip Extended P I_Mms A Get I_Mms Serv - Interface pointer of the object for the arameters configuration of the MMS init Request Detail dditional er Settings parameter: additional Cbb Supported Calling. CBBOpti Class ons [} 353] [} 352] Set Local s Provilege Cl T_Mms Vi Get I_Mms Serv ‘‘ MMS-init Request Detail parameter: ass Identity privilege Class Identity Called. sible Strin er Settings g [} 518] Class [} 353] Set Local TF6510 Version: 1.7.1 201
## Page 202

PLC API Name Type Access Definition Initial value Description location t Mms Timeou TIME Get I_Mms Serv T#25s Maximum time that may not be exceeded t during the execution of the confirmed er Settings services. Class [} 353] Set Local e Trace Mms E_Trace L Get I_Mms Serv E_Trace Level. No Configures the priority level for the logging ne of the error messages and log messages. evel er Settings [} 488] Class [} 353] Set Local 6.3.2.8 FB_Ulosi Client Settings Class The function block FB_Ulosi Client Settings Class is used to configure the ULOSI (Upper Layer OSI) communication layer. Namespace: Tc3_Ulosi [} 98] Library: Tc3_Ulosi (Tc3_Ulosi.compiled-library) Inheritance hierarchy FB_Socket Client Settings Class [} 230] -> FB_Tpkt Client Settings Class [} 223] -> FB_Rfc1006Client Settings Class [} 215] -> FB_Ulosi Client Settings Class FUNCTION_BLOCK FB_Ulosi Client Settings Class EXTENDS FB_Rfc1006Client Settings Class IMPLEMENTS I_Ulosi C lient Settings Class Interfaces Type Description I_Ulosi Client Settings Class [} 355] Interface for configuring the ULOSI communication layer. Methods Name Description Defaults [} 356] Resets the configuration settings to the default values. 202 Version: 1.7.1 TF6510
## Page 203

PLC API Properties TF6510 Version: 1.7.1 203
## Page 204

PLC API Name Type Access Definition Initial value Description location b Auto Cleanu BOOL Get,Set Inherited fr TRUE Enables/disables the automatic clean-up/ p om FB_Soc closure of the unused sockets (e.g. after program download or PLC reset). ket Client Se ttings Class [} 230] s Srv Net ID T_Ams N Get,Set -//- ‘‘ Twin CAT network address of the Twin CAT TCP/IP server (TF6310). With the empty et ID string, the network address of the local [} 491] Twin CAT system is used. n Remote Port UDINT Get,Set -//- 102 TCP/IP port number of the server. s Remote Hos T_Ipv4Ad Get,Set -//- ‘127.0.0.1‘ IPv4 network address of the server. t dr [} 491] t Connect TIME Get,Set -//- T#45s Earliest time on expiry of which a new connection can be established. t Ads Timeout TIME Get,Set -//- DEFAULT_ADS_ Maximum timeout time for ADS services TIMEOUT that may not be exceeded. t Socket Time TIME Get,Set -//- T#5s Maximum timeout time during the out execution of the confirmed services that may not be exceeded. b Throttle Mod BOOL Get,Set -//- TRUE Enables/disables the receive data throttle e polling mode. throttle Times T_Throttl Get,Set -//- Param_Sockets.c Configuration of the cycle times for the Default Receiver T receive data throttle polling mode. e Times hrottle Times [} 492] e Trace Socke E_Trace L Get,Set -//- E_Trace Level. No Configures the priority level for the logging t ne of the error messages and log messages. evel [} 488] ip TLS I_Socket Get,Set -//- 0 Configuration parameters of the TLS Tls Settin (Transport Layer Security) protocol layer. gs Class Value null = not configured. b Eva Link Stat BOOL Get,Set -//- FALSE Configures the evaluation mode for the link us Err status error of the network adapter. If "FALSE" then disabled, short connection interruptions are bridged. If "TRUE" is enabled, the connection is terminated when a connection error is detected. t Tpkt Timeout TIME Get,Set Inherited fr T#10s Maximum time that may not be exceeded om FB_Tpk during the execution of the confirmed services. t Client Setti ngs Class [} 223] e Trace Tpkt E_Trace L Get,Set -//- E_Trace Level. No Configures the priority level for the logging ne of the error messages and log messages. evel [} 488] s Calling_T_S STRING Get,Set Inherited fr ’00 00’ RFC 1006 parameter: Calling transport elector om FB_Rfc address selector (source). 1006Client Settings Cla ss [} 215] 204 Version: 1.7.1 TF6510
## Page 205

PLC API Name Type Access Definition Initial value Description location s Called_T_S STRING Get,Set -//- ’00 01’ RFC 1006 parameter: Called transport elector address selector (destination). e Tpdu Size E_Rfc100 Get,Set -//- E_Rfc1006Tpdu S Maximum TPDU byte length. ize. Size_1024 6Tpdu Siz e [} 487] t Rfc1006Tim TIME Get,Set -//- T#15s Maximum time that may not be exceeded eout during the execution of the confirmed services. e Trace Rfc10 E_Trace L Get,Set -//- E_Trace Level. No Configures the priority level for the logging 06 ne of the error messages and log messages. evel [} 488] s Calling_S_S STRING Get I_Ulosi Clie ’00 01‘ Calling-S-selector. elector nt Settings Class [} 355] Set Local s Called_S_S STRING Get I_Ulosi Clie ’00 01‘ Called-S-selector. elector nt Settings Class [} 355] Set Local n Session Req WORD Get I_Ulosi Clie 2 Session requirements. With the setting uirement 16#FFFF, the value is optional and is not nt Settings transmitted. Class [} 355] Set Local s Calling_P_S STRING Get I_Ulosi Clie ’00 00 00 01‘ Calling-P-selector. elector nt Settings Class [} 355] Set Local s Called_P_S STRING Get I_Ulosi Clie ’00 00 00 01‘ Called-P-selector. elector nt Settings Class [} 355] Set Local n Present Req BYTE Get I_Ulosi Clie 0 Presentation requirements. With the uirements setting: 0, the value is transmitted and with nt Settings the setting 16#FF, the value is optional and Class is not transmitted. [} 355] Set Local n Present Prot BYTE Get I_Ulosi Clie 16#FF Presentation protocol version. With the ocol Version setting 1, the value is transmitted and with nt Settings the setting 16#FF, the value is optional and Class is not transmitted. [} 355] Set Local TF6510 Version: 1.7.1 205
## Page 206

PLC API Name Type Access Definition Initial value Description location n Protocol_Ve BYTE Get I_Ulosi Clie 16#FF Association Control Service protocol rsion version. With the setting 1, the value is nt Settings transmitted and with the setting 16#FF, the Class value is optional and is not transmitted. [} 355] Set Local s Context_Na STRING Get I_Ulosi Clie '1.0.9506.2.3' Application context name (object identifier, me dotted presentation), MMS. nt Settings Class [} 355] Set Local s Called_AP_ STRING Get I_Ulosi Clie '1.1.1.999.1' Called-AP-title. With the empty string, the Title value is optional and is not transmitted. nt Settings Class [} 355] Set Local n Called_AE_ UDINT Get I_Ulosi Clie 12 Called-AE-qualifier. With the setting Qualifier 16#FFFFFFFFFF, the value is optional and nt Settings is not transmitted. Class [} 355] Set Local n Called_AP_ UDINT Get I_Ulosi Clie 16#FFFFFFFF Called-AP-invocation-identifier. With the Inv ID setting 16#FFFFFFFFFF, the value is nt Settings optional and is not transmitted. Class [} 355] Set Local n Called_AE_ UDINT Get I_Ulosi Clie 16#FFFFFFFF Called-AE-invocation-identifier. With the Inv ID setting 16#FFFFFFFFFF, the value is nt Settings optional and is not transmitted. Class [} 355] Set Local s Calling_AP_ STRING Get I_Ulosi Clie '1.1.1.999' Calling-AP-title. With the empty string, the Title value is optional and is not transmitted. nt Settings Class [} 355] Set Local n Calling_AE UDINT Get I_Ulosi Clie 12 Calling-AE-qualifier. With the setting _Qualifier 16#FFFFFFFFFF, the value is optional and nt Settings is not transmitted. Class [} 355] Set Local n Calling_AP UDINT Get I_Ulosi Clie 16#FFFFFFFF Calling-AP-invocation-identifier. With the _Inv ID setting 16#FFFFFFFFFF, the value is nt Settings optional and is not transmitted. Class [} 355] Set Local 206 Version: 1.7.1 TF6510
## Page 207

PLC API Name Type Access Definition Initial value Description location n Calling_AE UDINT Get I_Ulosi Clie 16#FFFFFFFF Calling-AE-invocation-identifier. With the _Inv ID setting 16#FFFFFFFFFF, the value is nt Settings optional and is not transmitted. Class [} 355] Set Local n Requiremen BYTE Get I_Ulosi Clie 0 Association Control Service requirements. ts The value: 1 enables the authentication nt Settings function and the value: 0 disables it. Class [} 355] Set Local s Mechanism STRING Get I_Ulosi Clie '2.2.3.1' Authentication mechanism name. If there is _Name no empty string and the authentication nt Settings function is enabled, the value is Class transmitted. [} 355] Set Local s Authent_Val STRING Get I_Ulosi Clie ‘‘ Authentication value (password). If there is ue no empty string and the authentication nt Settings function is enabled, the value is Class transmitted. [} 355] Set Local s Responding STRING Get I_Ulosi Clie ‘‘ Responding authentication value _Value (password). If no empty string, the nt Settings authentication function is enabled and Class authentication mode: Mutual then the value [} 355] is transmitted. Set Local e Acse_Authe E_Acse A Get I_Ulosi Clie E_Acse Authentic Authentication mode. nt ation. Unilateral uthentic nt Settings ation Class [} 434] [} 355] Set Local t Ulosi Timeou TIME Get I_Ulosi Clie T#20s Maximum time that may not be exceeded t during the execution of the confirmed nt Settings services. Class [} 355] Set Local e Trace Ulosi E_Trace L Get I_Ulosi Clie E_Trace Level. No Configures the priority level for the logging ne of the error messages and log messages. evel nt Settings [} 488] Class [} 355] Set Local 6.3.2.9 FB_Ulosi Connection Settings Class The function block FB_Ulosi Connection Settings Class is used to configure the ULOSI communication layer (Upper Layer OSI). The configuration settings only apply to a selected server session function block instance. TF6510 Version: 1.7.1 207
## Page 208

PLC API Namespace: Tc3_Ulosi [} 98] Library: Tc3_Ulosi (Tc3_Ulosi.compiled-library) Inheritance hierarchy FB_Socket Connection Settings Class [} 233] -> FB_Tpkt Connection Settings Class [} 226] - > FB_Rfc1006Connection Settings Class [} 218] -> FB_Ulosi Connection Settings Class FUNCTION_BLOCK FB_Ulosi Connection Settings Class EXTENDS FB_Rfc1006Connection Settings Class IMPLEMENTS I_Ulosi Connection Settings Class Interfaces Type Description I_Ulosi Connection Settings Class [} 357] Interface for configuring the ULOSI communication layer. Methods Name Description Defaults [} 357] Resets the configuration settings to the default values. Properties Name Type Access Definition Initial value Description location b Enable BOOL Get,Set Inherited fr FALSE Enables/disables the establishment of the om FB_Soc incoming connection in a server session function block instance. ket Connect ion Settings Class [} 233] b Trace BOOL Get,Set -//- TRUE Enables/disables the logging of error messages and log messages in a server session function block instance. e Accept Get,Set -//- E_Socket Accept Configures the acceptance mode for E_Socke Mode.e ACCEPT_ incoming connections. The incoming t Accept ALL connections can be accepted or rejected Mode by a session function block instance depending on the network address and/or port number of the client. By default, connections to all clients are accepted. n Accept Port UDINT Get,Set -//- 102 Configures the TCP/IP port number of the remote communication partner (clients) to be accepted. s Accept Host Get,Set -//- ‘127.0.0.1‘ Configures the IPv4 network address of T_IPv4Ad the remote communication partner (clients) to be accepted. dr [} 491] s Authent_Val STRING Get ‘‘ Connection-specific authentication ue I_Ulosi Con password. Remote communication partner (client) connected to the selected server nection Sett session function block instance can ings Class successfully authenticate with the server [} 357] using this password. Set Local 208 Version: 1.7.1 TF6510
## Page 209

PLC API 6.3.2.10 FB_Ulosi Server Settings Class The function block FB_Ulosi Server Settings Class is used to configure the ULOSI (Upper Layer OSI) communication layer. Namespace: Tc3_Ulosi [} 98] Library: Tc3_Ulosi (Tc3_Ulosi.compiled-library) Inheritance hierarchy FB_Socket Server Settings Class [} 234] -> FB_Tpkt Server Settings Class [} 227] -> FB_Rfc1006Server Settings Class [} 219] -> FB_Ulosi Server Settings Class FUNCTION_BLOCK FB_Ulosi Server Settings Class EXTENDS FB_Rfc1006Server Settings Class IMPLEMENTS I_Ulosi S erver Settings Class Interfaces Type Description I_Ulosi Server Settings Class [} 357] Interface for configuring the ULOSI communication layer. Methods Name Description Defaults [} 358] Resets the configuration settings to the default values. TF6510 Version: 1.7.1 209
## Page 210

PLC API Properties 210 Version: 1.7.1 TF6510
## Page 211

PLC API Name Type Access Definition Initial value Description location b Auto Cleanu BOOL Get,Set Inherited fr TRUE Enables/disables the automatic clean-up/ p om FB_Soc closure of the unused sockets (e.g. after program download or PLC reset). ket Server S ettings Clas s [} 234] b Enable BOOL Get,Set -//- FALSE Enables/disables establishing the server connections. "TRUE" enables the Listen command (listening and incoming connections are accepted) and "FALSE" disables it. s Srv Net ID T_Ams N Get,Set -//- ‘‘ Twin CAT network address of the Twin CAT TCP/IP server (TF6310). With the empty et ID string, the network address of the local [} 491] Twin CAT system is used. n Local Port UDINT Get,Set -//- 102 TCP/IP port number of the server. s Local Host T_Ipv4Ad Get,Set -//- ‘127.0.0.1‘ IPv4 network address of the server. dr [} 491] t Accept TIME Get,Set -//- T#1s Retry cycle time for the internal TCP/IP socket Accept commands. t Listen TIME Get,Set -//- T#1s Retry cycle time for the internal TCP/IP socket Listen command. t Ads Timeout TIME Get,Set -//- DEFAULT_ADS_ Maximum timeout time for ADS services TIMEOUT that may not be exceeded. t Socket Time TIME Get,Set -//- T#5s Maximum timeout time during the out execution of the confirmed services that may not be exceeded. b Throttle Mod BOOL Get,Set -//- TRUE Enables/disables the receive data throttle e polling mode. throttle Times T_Throttl Get,Set -//- Param_Sockets.c Configuration of the cycle times for the Default Receiver T receive data throttle polling mode. e Times hrottle Times [} 492] e Trace Socke E_Trace L Get,Set -//- E_Trace Level. No Configures the priority level for the logging t ne of the error messages and log messages. evel [} 488] ip TLS I_Socket Get,Set -//- 0 Configuration parameters of the TLS (Transport Layer Security) protocol layer. Tls Settin Value null = not configured. gs Class [} 365] b Eva Link Stat BOOL Get,Set -//- FALSE Configures the evaluation mode for the link us Err status error of the network adapter. If "FALSE" then disabled, short connection interruptions are bridged. If "TRUE" is enabled, the connection is terminated when a connection error is detected. t Tpkt Timeout TIME Get,Set Inherited fr T#10s Maximum time that may not be exceeded om FB_Tpk during the execution of the confirmed services. t Server Sett ings Class [} 227] TF6510 Version: 1.7.1 211
## Page 212

PLC API Name Type Access Definition Initial value Description location e Trace Tpkt E_Trace L Get,Set -//- E_Trace Level. No Configures the priority level for the logging ne of the error messages and log messages. evel [} 488] s Calling_T_S STRING Get,Set Inherited fr ’00 00’ RFC 1006 parameter: Calling transport elector om FB_Rfc address selector (source). 1006Server Settings Cla ss [} 219] s Called_T_S STRING Get,Set -//- ’00 01’ RFC 1006 parameter: Called transport elector address selector (destination). e Tpdu Size E_Rfc100 Get,Set -//- E_Rfc1006Tpdu S Maximum TPDU byte length. ize. Size_1024 6Tpdu Siz e [} 487] t Rfc1006Tim TIME Get,Set -//- T#15s Maximum time that may not be exceeded eout during the execution of the confirmed services. e Trace Rfc10 E_Trace L Get,Set -//- E_Trace Level. No Configures the priority level for the logging 06 ne of the error messages and log messages. evel [} 488] s Calling_S_S STRING Get I_Ulosi Serv ’00 01‘ Calling-S-selector. elector er Settings Class [} 357] Set Local s Called_S_S STRING Get I_Ulosi Serv ’00 01‘ Called-S-selector. elector er Settings Class [} 357] Set Local n Session Req WORD Get I_Ulosi Serv 2 Session requirements. With the setting uirement 16#FFFF, the value is optional and is not er Settings transmitted. Class [} 357] Set Local s Calling_P_S STRING Get I_Ulosi Serv ’00 00 00 01‘ Calling-P-selector. elector er Settings Class [} 357] Set Local s Called_P_S STRING Get I_Ulosi Serv ’00 00 00 01‘ Called-P-selector. elector er Settings Class [} 357] Set Local 212 Version: 1.7.1 TF6510
## Page 213

PLC API Name Type Access Definition Initial value Description location n Present Req BYTE Get I_Ulosi Serv 0 Presentation requirements. With the uirements setting: 0, the value is transmitted and with er Settings the setting 16#FF, the value is optional and Class is not transmitted. [} 357] Set Local n Present Prot BYTE Get I_Ulosi Serv 16#FF Presentation protocol version. With the ocol Version setting 1, the value is transmitted and with er Settings the setting 16#FF, the value is optional and Class is not transmitted. [} 357] Set Local n Protocol_Ve BYTE Get I_Ulosi Serv 16#FF Association Control Service protocol rsion version. With the setting 1, the value is er Settings transmitted and with the setting 16#FF, the Class value is optional and is not transmitted. [} 357] Set Local s Context_Na STRING Get I_Ulosi Serv '1.0.9506.2.3' Application context name (object identifier, me dotted presentation), MMS. er Settings Class [} 357] Set Local s Called_AP_ STRING Get I_Ulosi Serv '1.1.1.999.1' Called-AP-title. With the empty string, the Title value is optional and is not transmitted. er Settings Class [} 357] Set Local n Called_AE_ UDINT Get I_Ulosi Serv 12 Called-AE-qualifier. With the setting Qualifier 16#FFFFFFFFFF, the value is optional and er Settings is not transmitted. Class [} 357] Set Local n Called_AP_ UDINT Get I_Ulosi Serv 16#FFFFFFFF Called-AP-invocation-identifier. With the Inv ID setting 16#FFFFFFFFFF, the value is er Settings optional and is not transmitted. Class [} 357] Set Local n Called_AE_ UDINT Get I_Ulosi Serv 16#FFFFFFFF Called-AE-invocation-identifier. With the Inv ID setting 16#FFFFFFFFFF, the value is er Settings optional and is not transmitted. Class [} 357] Set Local s Calling_AP_ STRING Get I_Ulosi Serv '1.1.1.999' Calling-AP-title. With the empty string, the Title value is optional and is not transmitted. er Settings Class [} 357] Set Local TF6510 Version: 1.7.1 213
## Page 214

PLC API Name Type Access Definition Initial value Description location n Calling_AE UDINT Get I_Ulosi Serv 12 Calling-AE-qualifier. With the setting _Qualifier 16#FFFFFFFFFF, the value is optional and er Settings is not transmitted. Class [} 357] Set Local n Calling_AP UDINT Get I_Ulosi Serv 16#FFFFFFFF Calling-AP-invocation-identifier. With the _Inv ID setting 16#FFFFFFFFFF, the value is er Settings optional and is not transmitted. Class [} 357] Set Local n Calling_AE UDINT Get I_Ulosi Serv 16#FFFFFFFF Calling-AE-invocation-identifier. With the _Inv ID setting 16#FFFFFFFFFF, the value is er Settings optional and is not transmitted. Class [} 357] Set Local n Requiremen BYTE Get I_Ulosi Serv 0 Association Control Service requirements. ts The value: 1 enables the authentication er Settings function and the value: 0 disables it. Class [} 357] Set Local s Mechanism STRING Get I_Ulosi Serv '2.2.3.1' Authentication mechanism name. If there is _Name no empty string and the authentication er Settings function is enabled, the value is Class transmitted. [} 357] Set Local s Authent_Val STRING Get I_Ulosi Serv ‘‘ Authentication value (password). If there is ue no empty string and the authentication er Settings function is enabled, the value is Class transmitted. [} 357] Set Local s Responding STRING Get I_Ulosi Serv ‘‘ Responding authentication value _Value (password). If no empty string, the er Settings authentication function is enabled and Class authentication mode: Mutual then the value [} 357] is transmitted. Set Local e Acse_Authe E_Acse A Get I_Ulosi Serv E_Acse Authentic Authentication mode. nt ation. Unilateral uthentic er Settings ation Class [} 434] [} 357] Set Local t Ulosi Timeou TIME Get I_Ulosi Serv T#20s Maximum time that may not be exceeded t during the execution of the confirmed er Settings services. Class [} 357] Set Local 214 Version: 1.7.1 TF6510
## Page 215

PLC API Name Type Access Definition Initial value Description location e Trace Ulosi E_Trace L Get I_Ulosi Serv E_Trace Level. No Configures the priority level for the logging ne of the error messages and log messages. evel er Settings [} 488] Class [} 357] Set Local 6.3.2.11 FB_Rfc1006Client Settings Class The function block FB_Rfc1006Client Settings Class is used to configure the RFC1006 communication layer. Namespace: Tc3_Rfc1006 [} 98] Library: Tc3_Rfc1006 (Tc3_Rfc1006.compiled-library) Inheritance hierarchy FB_Socket Client Settings Class [} 230] -> FB_Tpkt Client Settings Class [} 223] - > FB_Rfc1006Client Settings Class FUNCTION_BLOCK FB_Rfc1006Client Settings Class EXTENDS FB_Tpkt Client Settings Class IMPLEMENTS I_Rfc1006 Client Settings Class Interfaces Type Description I_Rfc1006Client Settings Class [} 359] Interface for configuring the RFC1006 communication layer Methods Name Description Defaults [} 359] Resets the configuration settings to the default values. TF6510 Version: 1.7.1 215
## Page 216

PLC API Properties 216 Version: 1.7.1 TF6510
## Page 217

PLC API Name Type Access Definition Initial value Description location b Auto Cleanu BOOL Get,Set Inherited TRUE Enables/disables the automatic clean-up/ p from closure of the unused sockets (e.g. after FB_Socket program download or PLC reset). Client Setti ngs Class [} 230] s Srv Net ID T_Ams N Get,Set -//- ‘‘ Twin CAT network address of the Twin CAT TCP/IP server (TF6310). With the empty et ID string, the network address of the local [} 491] Twin CAT system is used. n Remote Port UDINT Get,Set -//- 102 TCP/IP port number of the server. s Remote Hos T_Ipv4Ad Get,Set -//- ‘127.0.0.1‘ IPv4 network address of the server. t dr [} 491] t Connect TIME Get,Set -//- T#45s Earliest time on expiry of which a new connection can be established. t Ads Timeout TIME Get,Set -//- DEFAULT_ADS_ Maximum timeout time for ADS services TIMEOUT that may not be exceeded. t Socket Time TIME Get,Set -//- T#5s Maximum timeout time during the out execution of the confirmed services that may not be exceeded. b Throttle Mod BOOL Get,Set -//- TRUE Enables/disables the receive data throttle e polling mode. throttle Times T_Throttl Get,Set -//- Param_Sockets.c Configuration of the cycle times for the Default Receiver T receive data throttle polling mode. e Times hrottle Times [} 492] e Trace Socke E_Trace L Get,Set -//- E_Trace Level. No Configures the priority level for the logging t ne of the error messages and log messages. evel [} 488] ip TLS I_Socket Get,Set -//- 0 Configuration parameters of the TLS (Transport Layer Security) protocol layer. Tls Settin Value null = not configured. gs Class [} 365] b Eva Link Stat BOOL Get,Set -//- FALSE Configures the evaluation mode for the link us Err status error of the network adapter. If "FALSE" then disabled, short connection interruptions are bridged. If "TRUE" is enabled, the connection is terminated when a connection error is detected. t Tpkt Timeout TIME Get,Set Inherited T#10s Maximum time that may not be exceeded from during the execution of the confirmed FB_Tpkt Cli services. ent Settings Class [} 223] e Trace Tpkt E_Trace L Get,Set -//- E_Trace Level. No Configures the priority level for the logging ne of the error messages and log messages. evel [} 488] TF6510 Version: 1.7.1 217
## Page 218

PLC API Name Type Access Definition Initial value Description location s Calling_T_S STRING Get I_Rfc1006C ’00 00’ RFC 1006 parameter: Calling transport elector address selector (source). lient Settin gs Class [} 359] Set Local s Called_T_S STRING Get I_Rfc1006C ’00 01’ RFC 1006 parameter: Called transport elector address selector (destination). lient Settin gs Class [} 359] Set Local e Tpdu Size E_Rfc100 Get I_Rfc1006C E_Rfc1006Tpdu S Maximum TPDU byte length. ize. Size_1024 6Tpdu Siz lient Settin e [} 487] gs Class [} 359] Set Local t Rfc1006Tim TIME Get I_Rfc1006C T#15s Maximum time that may not be exceeded eout during the execution of the confirmed lient Settin services. gs Class [} 359] Set Local e Trace Rfc10 E_Trace L Get I_Rfc1006C E_Trace Level. No Configures the priority level for the logging 06 ne of the error messages and log messages. evel lient Settin [} 488] gs Class [} 359] Set Local 6.3.2.12 FB_Rfc1006Connection Settings Class The function block FB_Rfc1006Connection Settings Class is used to configure the RFC1006 communication layer. The configuration settings only apply to a selected server session function block instance. Namespace: Tc3_Rfc1006 [} 98] Library: Tc3_Rfc1006 (Tc3_Rfc1006.compiled-library) Inheritance hierarchy FB_Socket Connection Settings Class [} 233] -> FB_Tpkt Connection Settings Class [} 226] - > FB_Rfc1006Connection Settings Class FUNCTION_BLOCK FB_Rfc1006Connection Settings Class EXTENDS FB_Tpkt Connection Settings Class IMPLEMENTS I _Rfc1006Connection Settings Class Interfaces Type Description I_Rfc1006Connection Settings Class [} 359] Interface for configuring the RFC1006 communication layer. 218 Version: 1.7.1 TF6510
## Page 219

PLC API Methods Name Description Defaults [} 360] Resets the configuration settings to the default values. Properties Name Type Access Definition Initial value Description location b Enable BOOL Get,Set Inherited fr FALSE Enables/disables the establishment of the om FB_Soc incoming connection in a server session function block instance. ket Connect ion Settings Class [} 233] b Trace BOOL Get,Set -//- TRUE Enables/disables the logging of error messages and log messages in a server session function block instance. e Accept Get,Set -//- E_Socket Accept Configures the acceptance mode for E_Socke Mode.e ACCEPT_ incoming connections. The incoming t Accept ALL connections can be accepted or rejected Mode by a session function block instance depending on the network address and/or port number of the client. By default, connections to all clients are accepted. n Accept Port UDINT Get,Set -//- 102 Configures the TCP/IP port number of the remote communication partner (clients) to be accepted. s Accept Host Get,Set -//- ‘127.0.0.1‘ Configures the IPv4 network address of T_IPv4Ad the remote communication partner (clients) to be accepted. dr [} 491] 6.3.2.13 FB_Rfc1006Server Settings Class The function block FB_Rfc1006Server Settings Class is used to configure the RFC1006 communication layer. Namespace: Tc3_Rfc1006 [} 98] Library: Tc3_Rfc1006 (Tc3_Rfc1006.compiled-library) Inheritance hierarchy FB_Socket Server Settings Class [} 234] -> FB_Tpkt Server Settings Class [} 227] - > FB_Rfc1006Server Settings Class FUNCTION_BLOCK FB_Rfc1006Server Settings Class EXTENDS FB_Tpkt Server Settings Class IMPLEMENTS I_Rfc1006 Server Settings Class Interfaces Type Description I_Rfc1006Server Settings Class [} 360] Interface for configuring the RFC1006 communication layer TF6510 Version: 1.7.1 219
## Page 220

PLC API Methods Name Description Defaults [} 360] Resets the configuration settings to the default values. 220 Version: 1.7.1 TF6510
## Page 221

PLC API Properties TF6510 Version: 1.7.1 221
## Page 222

PLC API Name Type Access Definition Initial value Description location b Auto Cleanu BOOL Get,Set Inherited TRUE Enables/disables the automatic clean-up/ p from closure of the unused sockets (e.g. after FB_Socket S program download or PLC reset). erver Settin gs Class [} 234] b Enable BOOL Get,Set -//- FALSE Enables/disables establishing the server connections. "TRUE" enables the Listen command (listening and incoming connections are accepted) and "FALSE" disables it. s Srv Net ID T_Ams N Get,Set -//- ‘‘ Twin CAT network address of the Twin CAT TCP/IP server (TF6310). With the empty et ID string, the network address of the local [} 491] Twin CAT system is used. n Local Port UDINT Get,Set -//- 102 TCP/IP port number of the server. s Local Host T_Ipv4Ad Get,Set -//- ‘127.0.0.1‘ IPv4 network address of the server. dr [} 491] t Accept TIME Get,Set -//- T#1s Retry cycle time for the internal TCP/IP socket Accept commands. t Listen TIME Get,Set -//- T#1s Retry cycle time for the internal TCP/IP socket Listen command. t Ads Timeout TIME Get,Set -//- DEFAULT_ADS_ Maximum timeout time for ADS services TIMEOUT that may not be exceeded. t Socket Time TIME Get,Set -//- T#5s Maximum timeout time during the out execution of the confirmed services that may not be exceeded. b Throttle Mod BOOL Get,Set -//- TRUE Enables/disables the receive data throttle e polling mode. throttle Times T_Throttl Get,Set -//- Param_Sockets.c Configuration of the cycle times for the Default Receiver T receive data throttle polling mode. e Times hrottle Times [} 492] e Trace Socke E_Trace L Get,Set -//- E_Trace Level. No Configures the priority level for the logging t ne of the error messages and log messages. evel [} 488] ip TLS I_Socket Get,Set -//- 0 Configuration parameters of the TLS (Transport Layer Security) protocol layer. Tls Settin Value null = not configured. gs Class [} 365] b Eva Link Stat BOOL Get,Set -//- FALSE Configures the evaluation mode for the link us Err status error of the network adapter. If "FALSE" then disabled, short connection interruptions are bridged. If "TRUE" is enabled, the connection is terminated when a connection error is detected. t Tpkt Timeout TIME Get,Set Inherited T#10s Maximum time that may not be exceeded from during the execution of the confirmed FB_Tpkt Ser services. ver Settings Class [} 227] 222 Version: 1.7.1 TF6510
## Page 223

PLC API Name Type Access Definition Initial value Description location e Trace Tpkt E_Trace L Get,Set -//- E_Trace Level. No Configures the priority level for the logging ne of the error messages and log messages. evel [} 488] s Calling_T_S STRING Get I_Rfc1006S ’00 00’ RFC 1006 parameter: Calling transport elector address selector (source). erver Settin gs Class [} 360] Set Local s Called_T_S STRING Get I_Rfc1006S ’00 01’ RFC 1006 parameter: Called transport elector address selector (destination). erver Settin gs Class [} 360] Set Local e Tpdu Size E_Rfc100 Get I_Rfc1006S E_Rfc1006Tpdu S Maximum TPDU byte length. ize. Size_1024 6Tpdu Siz erver Settin e [} 487] gs Class [} 360] Set Local t Rfc1006Tim TIME Get I_Rfc1006S T#15s Maximum time that may not be exceeded eout during the execution of the confirmed erver Settin services. gs Class [} 360] Set Local e Trace Rfc10 E_Trace L Get I_Rfc1006S E_Trace Level. No Configures the priority level for the logging 06 ne of the error messages and log messages. evel erver Settin [} 488] gs Class [} 360] Set Local 6.3.2.14 FB_Tpkt Client Settings Class The function block FB_Tpkt Client Settings Class is used to configure the TPKT communication layer. Namespace: Tc3_Tpkt [} 98] Library: Tc3_Tpkt (Tc3_Tpkt.compiled-library) Inheritance hierarchy FB_Socket Client Settings Class [} 230] -> FB_Tpkt Client Settings Class FUNCTION_BLOCK FB_Tpkt Client Settings Class EXTENDS FB_Socket Client Settings Class IMPLEMENTS I_Tpkt Clie nt Settings Class Interfaces Type Description I_Tpkt Client Settings Class [} 361] Interface for configuring the TPKT communication layer. TF6510 Version: 1.7.1 223
## Page 224

PLC API Methods Name Description Defaults [} 361] Resets the configuration settings to the default values. 224 Version: 1.7.1 TF6510
## Page 225

PLC API Properties Name Type Access Definition Initial value Description location b Auto Cleanu BOOL Get,Set Inherited TRUE Enables/disables the automatic clean-up/ p from closure of the unused sockets (e.g. after FB_Socket program download or PLC reset). Client Setti ngs Class [} 230] s Srv Net ID T_Ams N Get,Set -//- ‘‘ Twin CAT network address of the Twin CAT TCP/IP server (TF6310). With the empty et ID string, the network address of the local [} 491] Twin CAT system is used. n Remote Port UDINT Get,Set -//- 102 TCP/IP port number of the server. s Remote Hos T_Ipv4Ad Get,Set -//- ‘127.0.0.1‘ IPv4 network address of the server. t dr [} 491] t Connect TIME Get,Set -//- T#45s Earliest time on expiry of which a new connection can be established. t Ads Timeout TIME Get,Set -//- DEFAULT_ADS_ Maximum timeout time for ADS services TIMEOUT that may not be exceeded. t Socket Time TIME Get,Set -//- T#5s Maximum timeout time during the out execution of the confirmed services that may not be exceeded. b Throttle Mod BOOL Get,Set -//- TRUE Enables/disables the receive data throttle e polling mode. throttle Times T_Throttl Get,Set -//- Param_Sockets.c Configuration of the cycle times for the Default Receiver T receive data throttle polling mode. e Times hrottle Times [} 492] e Trace Socke E_Trace L Get,Set -//- E_Trace Level. No Configures the priority level for the logging t ne of the error messages and log messages. evel [} 488] ip TLS I_Socket Get,Set -//- 0 Configuration parameters of the TLS (Transport Layer Security) protocol layer. Tls Settin Value null = not configured. gs Class [} 365] b Eva Link Stat BOOL Get,Set -//- FALSE Configures the evaluation mode for the link us Err status error of the network adapter. If "FALSE" then disabled, short connection interruptions are bridged. If "TRUE" is enabled, the connection is terminated when a connection error is detected. t Tpkt Timeout TIME Get I_Tpkt Clien T#10s Maximum time that may not be exceeded during the execution of the confirmed t Settings Cl services. ass [} 361] Set Local e Trace Tpkt E_Trace L Get I_Tpkt Clien E_Trace Level. No Configures the priority level for the logging ne of the error messages and log messages. evel t Settings Cl [} 488] ass [} 361] Set Local TF6510 Version: 1.7.1 225
## Page 226

PLC API 6.3.2.15 FB_Tpkt Connection Settings Class The function block FB_Tpkt Connection Settings Class is used to configure the TPKT communication layer. The configuration settings only apply to a selected server session function block instance. Namespace: Tc3_Tpkt [} 98] Library: Tc3_Tpkt (Tc3_Tpkt.compiled-library) Inheritance hierarchy FB_Socket Connection Settings Class [} 233] -> FB_Tpkt Connection Settings Class FUNCTION_BLOCK FB_Tpkt Connection Settings Class EXTENDS FB_Socket Connection Settings Class IMPLEMENTS I_ Tpkt Connection Settings Class Interfaces Type Description I_Tpkt Connection Settings Class [} 361] Interface for configuring the TPKT communication layer. Methods Name Description Defaults [} 362] Resets the configuration settings to the default values. Properties Name Type Access Definition Initial value Description location b Enable BOOL Get,Set Inherited fr FALSE Enables/disables the establishment of the om FB_Soc incoming connection in a server session function block instance. ket Connect ion Settings Class [} 233] b Trace BOOL Get,Set -//- TRUE Enables/disables the logging of error messages and log messages in a server session function block instance. e Accept Get,Set -//- E_Socket Accept Configures the acceptance mode for E_Socke Mode.e ACCEPT_ incoming connections. The incoming t Accept ALL connections can be accepted or rejected Mode by a session function block instance depending on the network address and/or port number of the client. By default, connections to all clients are accepted. n Accept Port UDINT Get,Set -//- 102 Configures the TCP/IP port number of the remote communication partner (clients) to be accepted. s Accept Host Get,Set -//- ‘127.0.0.1‘ Configures the IPv4 network address of T_IPv4Ad the remote communication partner (clients) to be accepted. dr [} 491] 226 Version: 1.7.1 TF6510
## Page 227

PLC API 6.3.2.16 FB_Tpkt Server Settings Class The function block FB_Tpkt Server Settings Class is used to configure the TPKT communication layer. Namespace: Tc3_Tpkt [} 98] Library: Tc3_Tpkt (Tc3_Tpkt.compiled-library) Inheritance hierarchy FB_Socket Server Settings Class [} 234] -> FB_Tpkt Server Settings Class FUNCTION_BLOCK FB_Tpkt Server Settings Class EXTENDS FB_Socket Server Settings Class IMPLEMENTS I_Tpkt Serv er Settings Class Interfaces Type Description I_Tpkt Server Settings Class [} 362] Interface for configuring the TPKT communication layer. Methods Name Description Defaults [} 362] Resets the configuration settings to the default values. TF6510 Version: 1.7.1 227
## Page 228

PLC API Properties 228 Version: 1.7.1 TF6510
## Page 229

PLC API Name Type Access Definition Initial value Description location b Auto Cleanu BOOL Get,Set Inherited TRUE Enables/disables the automatic clean-up/ p from closure of the unused sockets (e.g. after FB_Socket S program download or PLC reset). erver Settin gs Class [} 234] b Enable BOOL Get,Set -//- FALSE Enables/disables establishing the server connections. "TRUE" enables the Listen command (listening and incoming connections are accepted) and "FALSE" disables it. s Srv Net ID T_Ams N Get,Set -//- ‘‘ Twin CAT network address of the Twin CAT TCP/IP server (TF6310). With the empty et ID string, the network address of the local [} 491] Twin CAT system is used. n Local Port UDINT Get,Set -//- 102 TCP/IP port number of the server. s Local Host T_Ipv4Ad Get,Set -//- ‘127.0.0.1‘ IPv4 network address of the server. dr [} 491] t Accept TIME Get,Set -//- T#1s Retry cycle time for the internal TCP/IP socket Accept commands. t Listen TIME Get,Set -//- T#1s Retry cycle time for the internal TCP/IP socket Listen command. t Ads Timeout TIME Get,Set -//- DEFAULT_ADS_ Maximum timeout time for ADS services TIMEOUT that may not be exceeded. t Socket Time TIME Get,Set -//- T#5s Maximum timeout time during the out execution of the confirmed services that may not be exceeded. b Throttle Mod BOOL Get,Set -//- TRUE Enables/disables the receive data throttle e polling mode. throttle Times T_Throttl Get,Set -//- Param_Sockets.c Configuration of the cycle times for the Default Receiver T receive data throttle polling mode. e Times hrottle Times [} 492] e Trace Socke E_Trace L Get,Set -//- E_Trace Level. No Configures the priority level for the logging t ne of the error messages and log messages. evel [} 488] ip TLS I_Socket Get,Set -//- 0 Configuration parameters of the TLS (Transport Layer Security) protocol layer. Tls Settin Value null = not configured. gs Class [} 365] b Eva Link Stat BOOL Get,Set -//- FALSE Configures the evaluation mode for the link us Err status error of the network adapter. If "FALSE" then disabled, short connection interruptions are bridged. If "TRUE" is enabled, the connection is terminated when a connection error is detected. t Tpkt Timeout TIME Get I_Tpkt Serv T#10s Maximum time that may not be exceeded during the execution of the confirmed er Settings services. Class [} 362] Set Local TF6510 Version: 1.7.1 229
## Page 230

PLC API Name Type Access Definition Initial value Description location e Trace Tpkt E_Trace L Get I_Tpkt Serv E_Trace Level. No Configures the priority level for the logging ne of the error messages and log messages. evel er Settings [} 488] Class [} 362] Set Local 6.3.2.17 FB_Socket Client Settings Class The function block FB_Socket Client Settings Class is used to configure the TCP/IP communication layer. Namespace: Tc3_Sockets [} 98] Library: Tc3_Sockets (Tc3_Sockets.compiled-library) Inheritance hierarchy FB_Socket Client Settings Class FUNCTION_BLOCK FB_Socket Client Settings Class IMPLEMENTS I_Socket Client Settings Class Interfaces Type Description I_Socket Client Settings Class [} 362] Interface for configuring the TCP/IP communication layer. Methods Name Description Defaults [} 363] Resets the configuration settings to the default values. 230 Version: 1.7.1 TF6510
## Page 231

PLC API Properties TF6510 Version: 1.7.1 231
## Page 232

PLC API Name Type Access Definition Initial value Description location b Auto Cleanu BOOL Get I_Socket Cli TRUE Enables/disables the automatic clean-up/ p closure of the unused sockets (e.g. after ent Settings program download or PLC reset). Class [} 362] Set Local s Srv Net ID T_Ams N Get I_Socket Cli ‘‘ Twin CAT network address of the Twin CAT TCP/IP server (TF6310). With the empty et ID ent Settings string, the network address of the local [} 491] Class Twin CAT system is used. [} 362] Set Local n Remote Port UDINT Get I_Socket Cli 102 TCP/IP port number of the server. ent Settings Class [} 362] Set Local s Remote Hos T_Ipv4Ad Get I_Socket Cli ‘127.0.0.1‘ IPv4 network address of the server. t dr ent Settings [} 491] Class [} 362] Set Local t Connect TIME Get I_Socket Cli T#45s Earliest time on expiry of which a new connection can be established. ent Settings Class [} 362] Set Local t Ads Timeout TIME Get I_Socket Cli DEFAULT_ADS_ Maximum timeout time for ADS services TIMEOUT that may not be exceeded. ent Settings Class [} 362] Set Local t Socket Time TIME Get I_Socket Cli T#5s Maximum timeout time during the out execution of the confirmed services that ent Settings may not be exceeded. Class [} 362] Set Local b Throttle Mod BOOL Get I_Socket Cli TRUE Enables/disables the receive data throttle e polling mode. ent Settings Class [} 362] Set Local throttle Times T_Throttl Get I_Socket Cli Param_Sockets.c Configuration of the cycle times for the Default Receiver T receive data throttle polling mode. e Times ent Settings hrottle Times [} 492] Class [} 362] Set Local 232 Version: 1.7.1 TF6510
## Page 233

PLC API Name Type Access Definition Initial value Description location e Trace Socke E_Trace L Get I_Socket Cli E_Trace Level. No Configures the priority level for the logging t ne of the error messages and log messages. evel ent Settings [} 488] Class [} 362] Set Local ip TLS I_Socket Get I_Socket Tls 0 Configuration parameters of the TLS (Transport Layer Security) protocol layer. Tls Settin Settings Cla Value null = not configured. gs Class ss [} 365] [} 365] Set Local b Eva Link Stat BOOL Get I_Socket Cli FALSE Configures the evaluation mode for the link us Err status error of the network adapter. If ent Settings "FALSE" then disabled, short connection Class interruptions are bridged. If "TRUE" is [} 362] enabled, the connection is terminated Set Local when a connection error is detected. 6.3.2.18 FB_Socket Connection Settings Class The function block FB_Socket Connection Settings Class is used to configure the TCP/IP communication layer. The configuration settings only apply to a selected server session function block instance. Namespace: Tc3_Sockets [} 98] Library: Tc3_Sockets (Tc3_Sockets.compiled-library) Inheritance hierarchy FB_Socket Connection Settings Class FUNCTION_BLOCK FB_Socket Connection Settings Class IMPLEMENTS I_Socket Connection Settings Class Interfaces Type Description I_Socket Connection Settings Class [} 363] Interface for configuring the TCP/IP communication layer. Methods Name Description Defaults [} 364] Resets the configuration settings to the default values. TF6510 Version: 1.7.1 233
## Page 234

PLC API Properties Name Type Access Definition Initial value Description location b Enable BOOL Get FALSE Enables/disables the establishment of the I_Socket Co incoming connection in a server session function block instance. nnection Se ttings Class [} 363] Set Local b Trace BOOL Get TRUE Enables/disables the logging of error I_Socket Co messages and log messages in a server session function block instance. nnection Se ttings Class [} 363] Set Local e Accept Get E_Socket Accept Configures the acceptance mode for E_Socke I_Socket Co Mode.e ACCEPT_ incoming connections. The incoming t Accept ALL connections can be accepted or rejected nnection Se Mode by a session function block instance ttings Class depending on the network address and/or [} 363] port number of the client. By default, Set Local connections to all clients are accepted. n Accept Port UDINT Get 102 Configures the TCP/IP port number of the I_Socket Co remote communication partner (clients) to be accepted. nnection Se ttings Class [} 363] Set Local s Accept Host Get ‘127.0.0.1‘ Configures the IPv4 network address of T_IPv4Ad I_Socket Co the remote communication partner (clients) to be accepted. dr nnection Se [} 491] ttings Class [} 363] Set Local 6.3.2.19 FB_Socket Server Settings Class The function block FB_Socket Server Settings Class is used to configure the TCP/IP communication layer. Namespace: Tc3_Sockets [} 98] Library: Tc3_Sockets (Tc3_Sockets.compiled-library) Inheritance hierarchy FB_Socket Server Settings Class FUNCTION_BLOCK FB_Socket Server Settings Class IMPLEMENTS I_Socket Server Settings Class 234 Version: 1.7.1 TF6510
## Page 235

PLC API Interfaces Type Description I_Socket Server Settings Class [} 364] Interface for configuring the TCP/IP communication layer. Methods Name Description Defaults [} 365] Resets the configuration settings to the default values. TF6510 Version: 1.7.1 235
## Page 236

PLC API Properties 236 Version: 1.7.1 TF6510
## Page 237

PLC API Name Type Access Definition Initial value Description location b Auto Cleanu BOOL Get I_Socket Se TRUE Enables/disables the automatic clean-up/ p closure of the unused sockets (e.g. after rver Setting program download or PLC reset). s Class [} 364] Set Local b Enable BOOL Get I_Socket Se FALSE Enables/disables establishing the server connections. "TRUE" enables the Listen rver Setting command (listening and incoming s Class connections are accepted) and "FALSE" [} 364] disables it. Set Local s Srv Net ID T_Ams N Get I_Socket Se ‘‘ Twin CAT network address of the Twin CAT TCP/IP server (TF6310). With the empty et ID rver Setting string, the network address of the local [} 491] s Class Twin CAT system is used. [} 364] Set Local n Local Port UDINT Get I_Socket Se 102 TCP/IP port number of the server. rver Setting s Class [} 364] Set Local s Local Host T_Ipv4Ad Get I_Socket Se ‘127.0.0.1‘ IPv4 network address of the server. dr rver Setting [} 491] s Class [} 364] Set Local t Accept TIME Get I_Socket Se T#1s Retry cycle time for the internal TCP/IP socket Accept commands. rver Setting s Class [} 364] Set Local t Listen TIME Get I_Socket Se T#1s Retry cycle time for the internal TCP/IP socket Listen command. rver Setting s Class [} 364] Set Local t Ads Timeout TIME Get I_Socket Se DEFAULT_ADS_ Maximum timeout time for ADS services TIMEOUT that may not be exceeded. rver Setting s Class [} 364] Set Local t Socket Time TIME Get I_Socket Se T#5s Maximum timeout time during the out execution of the confirmed services that rver Setting may not be exceeded. s Class [} 364] Set Local TF6510 Version: 1.7.1 237
## Page 238

PLC API Name Type Access Definition Initial value Description location b Throttle Mod BOOL Get I_Socket Se TRUE Enables/disables the receive data throttle e polling mode. rver Setting s Class [} 364] Set Local throttle Times T_Throttl Get I_Socket Se Param_Sockets.c Configuration of the cycle times for the Default Receiver T receive data throttle polling mode. e Times rver Setting hrottle Times [} 492] s Class [} 364] Set Local e Trace Socke E_Trace L Get I_Socket Se E_Trace Level. No Configures the priority level for the logging t ne of the error messages and log messages. evel rver Setting [} 488] s Class [} 364] Set Local ip TLS I_Socket Get I_Socket Tls 0 Configuration parameters of the TLS (Transport Layer Security) protocol layer. Tls Settin Settings Cla Value null = not configured. gs Class ss [} 365] [} 365] Set Local b Eva Link Stat BOOL Get I_Socket Se FALSE Configures the evaluation mode for the link us Err status error of the network adapter. If rver Setting "FALSE" then disabled, short connection s Class interruptions are bridged. If "TRUE" is [} 364] enabled, the connection is terminated Set Local when a connection error is detected. 6.3.2.20 FB_Socket Tls Settings Class The FB_Socket Tls Settings Class function block is used to configure the TLS (Transport Layer Security) communication layer. TLS enables secure IEC 61850 client-server communication. Namespace: Tc3_Sockets [} 98] Library: Tc3_Sockets (Tc3_Sockets.compiled-library) Inheritance hierarchy FB_Socket Tls Settings Class FUNCTION_BLOCK FB_Socket Tls Settings Class IMPLEMENTS I_Socket Tls Settings Class Interfaces Type Description I_Socket Tls Settings Class [} 365] TLS configuration interface 238 Version: 1.7.1 TF6510
## Page 239

PLC API Methods Name Description Add Ca [} 366] Saves the file path of the CA certificate in the TLS configuration settings Add Cert [} 367] Saves the file path of the client or server certificate in the TLS configuration settings Add Crl [} 367] Saves the file path of the Certificate Revocation List (CRL) in the TLS configuration settings Add Psk [} 367] Saves the PSK (pre-shared key) and PSK identity string in the TLS configuration settings Reset [} 368] Resets all TLS configuration settings Set Connect Flags [} 368] Saves additional, optional TLS configuration settings of the client Set Listen Flags [} 368] Saves additional, optional TLS configuration settings of the server TF6510 Version: 1.7.1 239
## Page 240

PLC API Properties Name Type Access Definition lo- Initial value Description cation n Secure Por UDINT Get 3782 Secure ISO TP0 (IANA) port t I_Socket Tls Setti number for TLS communication ngs Class [} 365] Set Local connect Flag Get DEFAULT_TLSC Additional TLS configuration s ST_Tls Connect Fl I_Socket Tls Setti ONNECTFLAGS settings of the client ags ngs Class [} 365] listen Flags Get DEFAULT_TLSLI Additional TLS configuration ST_Tls Listen Flag I_Socket Tls Setti STENFLAGS settings of the server s ngs Class [} 365] psk Key PVOID Get 0 Points to the first byte of the I_Socket Tls Setti PSK key ngs Class [} 365] psk Key Len UDINT(0.. TCPAD Get 0 Byte length of the PSK key S_TLS_MAX_PS I_Socket Tls Setti K_KEY_SIZE) ngs Class [} 365] s Ca Path STRING(TCPAD Get '' File path of the CA certificate S_TLS_CERTIFI I_Socket Tls Setti CATE_PATH_SI ngs Class ZE) [} 365] s Cert Path STRING(TCPAD Get '' File path of the client or server S_TLS_CERTIFI I_Socket Tls Setti certificate CATE_PATH_SI ngs Class ZE) [} 365] s Crl Path STRING(TCPAD Get '' File path of the certificate S_TLS_CERTIFI I_Socket Tls Setti revocation list (CRL) CATE_PATH_SI ngs Class ZE) [} 365] s Identity STRING(TCPAD Get '' Identity string of the PSK key S_TLS_PSK_IDE I_Socket Tls Setti NTITY_SIZE) ngs Class [} 365] s Key Path STRING(TCPAD Get '' File path of the private key S_TLS_CERTIFI I_Socket Tls Setti CATE_PATH_SI ngs Class ZE) [} 365] s Key Pwd STRING(TCPAD Get '' Password string of the S_TLS_KEY_PA I_Socket Tls Setti certificate SSWORD_SIZE) ngs Class [} 365] 240 Version: 1.7.1 TF6510
## Page 241

PLC API 6.3.3 Communication 6.3.3.1 FB_iec61850Client Class The function block FB_iec61850Common Class implements interfaces for communication and data exchange between the Twin CAT PLC client application and the IEC 61850 server. Namespace: Tc3_iec61850 [} 98] Library: Tc3_iec61850 (Tc3_iec61850.compiled-library) Inheritance hierarchy FB_iec61850Client Class FUNCTION_BLOCK FB_iec61850Client Class IMPLEMENTS I_Scsm Client Class, I_Scsm System Clock Event Sink, I_Scsm Abort Ind Event Sink, I_Scsm Associate Cnf Event Sink, I_Scsm Release Ind Event Sink, I_Scsm Release Cnf Event Sink, I_Scsm Get Data Values Cnf Event Sink, I_Scsm Set Data Values Cnf Event Sink, I_Scsm Control Cnf Event Sink, I_Scsm Get Server Directory Cnf Event Sink, I_Scsm Get Logical Device Directory Cnf Event Sink, I_Scsm Get Logical Node Directory Cnf Event Sink, I_Scsm Create Data Set Cnf Event Sink, I_Scsm Delete Data Set Cnf Event Sink, I_Scsm Get Data Set Directory Cnf Event Sink, I_Scsm Report Ind Event Sink, I_Scsm Last Appl Error Ind Event Sink, I_Scsm Command Termination Ind Event Sink, I_Scsm Identify Cnf Event Sink, I_Scsm Status Cnf Event Sink VAR_INPUT settings : FB_Scsm Client Settings Class; END_VAR TF6510 Version: 1.7.1 241
## Page 242

PLC API Interfaces Type Description I_Scsm Client Class [} 373] Interfaces for establishment of communication and data exchange. I_Scsm Abort Ind Event Sink [} 400] Interface of the Abort service event handling routine. I_Scsm Associate Cnf Event Sink [} 400] Interface of the Associate service event handling routine. I_Scsm Release Cnf Event Sink [} 412] Interface of the Release service event handling routine. I_Scsm Release Ind Event Sink [} 412] Interface of the Release service event handling routine. I_Scsm Get Data Values Cnf Event Sink Interface of the Get Data Values service event handling routine. [} 408] I_Scsm Set Data Values Cnf Event Sink Interface of the Set Data Values event handling routine. [} 414] I_Scsm Control Cnf Event Sink [} 405] Interface of the control service event handling routine for switch control (Operate, Cancel, Select, Select With Value). I_Scsm Get Server Directory Cnf Event Sin Interface of the Get Server Directory service event handling routine. k [} 410] I_Scsm Get Logical Device Directory Cnf E Interface of the Get Logical Device Directory service event handling routine. vent Sink [} 408] I_Scsm Get Logical Node Directory Cnf Ev Interface of the Get Logical Node Directory service event handling routine. ent Sink [} 409] I_Scsm Create Data Set Cnf Event Sink Interface of the Create Data Set service event handling routine. [} 406] I_Scsm Delete Data Set Cnf Event Sink Interface of the Delete Data Set service event handling routine. [} 406] I_Scsm Get Data Set Directory Cnf Event S Interface of the Get Data Set Directory service event handling routine. ink [} 407] I_Scsm System Clock Event Sink [} 415] Interface of the System Clock service event handling routine. I_Scsm Report Ind Event Sink [} 413] Interface of the Report service event handling routine. I_Scsm Last Appl Error Ind Event Sink Interface of the Last App Error service event handling routine. [} 411] I_Scsm Command Termination Ind Even Interface of the command termination event handling routine interface for switch control. t Sink [} 405] I_Scsm Identify Cnf Event Sink [} 410] Interface of the MMS-Identify service event handling routine. I_Scsm Status Cnf Event Sink [} 415] Interface of the MMS-Status service event handling routine. Inputs Name Type Description settings FB_Scsm Client Settings Class Protocol settings for the communication layer. [} 170] 242 Version: 1.7.1 TF6510
## Page 243

PLC API Methods Name Description Execute This method triggers the execution of the communication layer. Associate Req [} 376] Enables the service: Associate. Release Req [} 377] Enables the service: Release. Release Rsp [} 377] Responds to the service: Release. Abort Req [} 378] Enables the service: Abort. Control Cancel Req [} 378] Enables the service: Cancel. Control Operate Req [} 379] Enables the service: Operate. Control Select Req [} 380] Enables the service: Select. Control Select With Value Req [} 381] Enables the service: Select With Value. Create Data Set Req [} 382] Enables the service: Create Data Set. Delete Data Set Req [} 383] Enables the service: Delete Data Set. Get All Data Values Req [} 383] Enables the service: Get All Data Values. Get All Logical Device Values Req [} 384] Enables the service: Get All Logical Device Values (Twin CAT specific). Get All Server Values Req [} 384] Enables the service: Get All Server Values (Twin CAT specific). Get Br CBValues Req [} 385] Enables the service: Get BRCBValues. Get Data Set Directory Req [} 386] Enables the service: Get Data Set Directory. Get Data Set Values Req [} 386] Enables the service: Get Data Set Values. Get Data Values Req [} 387] Enables the service: Get Data Values. Get Go CBValues Req [} 387] Enables the service: Get Go CBValues. Get Gs CBValues Req Enables the service: Get Gs CBValues. Get LCBValues Req Enables the service: Get LCBValues. Get Logical Device Directory Req [} 388] Enables the service: Get Logical Device Directory. Get Logical Node Directory Req [} 389] Enables the service: Get Logical Node Directory. Get Msv CBValues Req Enables the service: Get MSVCBValues. Get Server Directory Req [} 389] Enables the service: Get Server Directory. Get Sg CBValues Req Enables the service: Get SGCBValues Req. Get Ur CBValues Req [} 390] Enables the service: Get URCBValues. Get Usv CBValues Req Enables the service: Get USVCBValues. Set All Data Values Req [} 391] Enables the service: Set All Data Values (Twin CAT specific). Set Br CBValues Req [} 391] Enables the service: Set BRCBValues. Set Data Set Values Req [} 392] Enables the service: Set Data Set Values (Twin CAT specific). Set Data Values Req [} 392] Enables the service: Set Data Values. Set Go CBValues Req [} 393] Enables the service: Set Go CBValues. Set Gs CBValues Req Enables the service: Set Gs CBValues. Set LCBValues Req Enables the service: Set LCBValues. Set Msv CBValues Req Enables the service: Set MSVCBValues. Set Sg CBValues Req Enables the service: Set SGCBValues. Set Ur CBValues Req [} 394] Enables the service: Set URCBValues. Set Usv CBValues Req Enables the service: Set USVCBValues. Identify Req [} 394] Enables the service: MMS-Identify. Status Req [} 395] Enables the service: MMS-Status. TF6510 Version: 1.7.1 243
## Page 244

PLC API Methods of event handling (callback methods) Name Description On Associate Cnf [} 401] User-defined associate service event handling routine. On Release Cnf [} 412] User-defined release service event handling routine. On Release Ind [} 413] User-defined release service event handling routine. On Abort Ind [} 400] User-defined abort service event handling routine. On Control Cnf [} 406] User-defined control service event handling routine for switch control (Operate, Cancel, Select, Select With Value). On Create Data Set Cnf [} 406] User-defined Create Data Set service event handling routine. On Delete Data Set Cnf [} 407] User-defined Delete Data Set service event handling routine. On Get Data Set Directory Cnf User-defined Get Data Set Directory service event handling routine. [} 407] On Get Data Values Cnf [} 408] User-defined Get Data Values service event handling routine. On Get Logical Device Directory Cn User-defined Get Logical Device Directory service event handling routine. f [} 409] On Get Logical Node Directory Cnf User-defined Get Logical Node Directory service event handling routine. [} 409] On Get Server Directory Cnf User-defined Get Server Directory service event handling routine. [} 410] On Last Appl Error Ind [} 411] User-defined Last Appl Error service event handling routine. On Buffered Report Ind [} 413] User-defined buffered report service event handling routine. On Unbuffered Report Ind [} 414] User-defined unbuffered report service event handling routine. On Set Data Values Cnf [} 414] User-defined Set Data Values service event handling routine. On Get System Time [} 416] User-defined system clock service event handling routine. On Command Termination Ind User-defined command termination event handling routine for switch control. [} 405] On Identify Cnf [} 411] User-defined MMS-identify service event handling routine. On Status Cnf [} 415] User-defined MMS-Status service event handling routine. 244 Version: 1.7.1 TF6510
## Page 245

PLC API Properties TF6510 Version: 1.7.1 245
## Page 246

PLC API Name Type Ac- Description cess ip IED I_Acsi Common Intelligent Get,S Interface pointer of an object with the implementation of the et top-level of the IEC 61850 data model. [} 395] Electronic Device Class [} 340] e Link Statu E_Scsm Link Status [} 487] Get Client-Link-Status. Link status of the network adapter (client s sockets). e State E_Async Environment State Get Environmental state of the communication connection. [} 482] ip Settings I_Scsm Client Settings Class Get Protocol settings for the communication layer. [} 347] ip Associate I_Scsm Associate Cnf Event Set Interface pointer of an object with a user-defined Cnf Sink [} 400] implementation of the event handling routine: On Associate Cnf [} 401]. ip Release C I_Scsm Release Cnf Event Si Set Interface pointer of an object with a user-defined nf nk [} 412] implementation of the event handling routine: On Release Cnf [} 412]. ip Release I I_Scsm Release Ind Event Si Set Interface pointer of an object with a user-defined nd nk [} 412] implementation of the event handling routine: On Release Ind [} 413]. ip Abort Ind I_Scsm Abort Ind Event Sink Set Interface pointer of an object with a user-defined [} 400] implementation of the event handling routine: On Abort Ind [} 400]. ip System Cl I_Scsm System Clock Event S Set Interface pointer of an object with a user-defined ock implementation of the event handling routine: ink [} 415] On Get System Time [} 416]. ip Control C I_Scsm Control Cnf Event Si Set Interface pointer of an object with a user-defined nf nk [} 405] implementation of the event handling routine: On Control Cnf [} 406]. ip Create Da I_Scsm Create Data Set Cnf E Set Interface pointer of an object with a user-defined ta Set Cnf implementation of the event handling routine: vent Sink [} 406] On Create Data Set Cnf [} 406]. ip Delete Da I_Scsm Delete Data Set Cnf E Set Interface pointer of an object with a user-defined ta Set Cnf implementation of the event handling routine: vent Sink [} 406] On Delete Data Set Cnf [} 407]. ip Get Data S I_Scsm Get Data Set Directo Set Interface pointer of an object with a user-defined et Directory implementation of the event handling routine: ry Event Sink [} 407] Cnf On Get Data Set Directory Cnf [} 407]. ip Get Data V I_Scsm Get Data Values Cnf E Set Interface pointer of an object with a user-defined alues Cnf implementation of the event handling routine: vent Sink [} 408] On Get Data Values Cnf [} 408]. ip Get Logic I_Scsm Get Logical Device D Set Interface pointer of an object with a user-defined al Device Dir implementation of the event handling routine: irectory Cnf Event Sink ectory Cnf On Get Logical Device Directory Cnf [} 409]. [} 408] ip Get Logic I_Scsm Get Logical Node Dir Set Interface pointer of an object with a user-defined al Node Dire implementation of the event handling routine: ectory Cnf Event Sink ctory Cnf On Get Logical Node Directory Cnf [} 409]. [} 409] ip Get Serve I_Scsm Get Server Directory Set Interface pointer of an object with a user-defined r Directory C implementation of the event handling routine: Cnf Event Sink [} 410] nf On Get Server Directory Cnf [} 410]. ip Identify C I_Scsm Identify Cnf Event Si Set Interface pointer of an object with a user-defined nf nk [} 410] implementation of the event handling routine: On Identify Cnf [} 411]. 246 Version: 1.7.1 TF6510
## Page 247

PLC API Name Type Ac- Description cess ip Last Appl I_Scsm Last Appl Error Ind Ev Set Interface pointer of an object with a user-defined Error Ind implementation of the event handling routine: ent Sink [} 411] On Last Appl Error Ind [} 411]. ip Report Ind I_Scsm Report Ind Event Sin Set Interface pointer of an object with a user-defined implementation of the event handling routine: k [} 413] On Buffered Report Ind [} 413] and On Unbuffered Report Ind [} 414]. ip Set Data V I_Scsm Set Data Values Cnf E Set Interface pointer of an object with a user-defined alues Cnf implementation of the event handling routine: vent Sink [} 414] On Set Data Values Cnf [} 414]. ip Status Cnf I_Scsm Status Cnf Event Sink Set Interface pointer of an object with a user-defined [} 415] implementation of the event handling routine: On Status Cnf [} 415]. ip Comman I_Scsm Command Terminat Set Interface pointer of an object with a user-defined d Terminati implementation of the event handling routine: ion Ind Event Sink [} 405] on Ind On Command Termination Ind [} 405]. ip Associati I_Scsm Association Class Get Interface pointer of an object that identifies the client on connection. [} 402] s Desc STRING Get,S The description of the client connection. et 6.3.3.2 FB_iec61850Connection Class The function block FB_iec61850Connection Class implements interfaces for establishing communication and exchanging data between the Twin CAT PLC server application and the IEC 61850 client. A function block instance implements a server session (a server connection with a remote client). Namespace: Tc3_iec61850 [} 98] Library: Tc3_iec61850 (Tc3_iec61850.compiled-library) Inheritance hierarchy FB_iec61850Connection Class FUNCTION_BLOCK FB_iec61850Connection Class IMPLEMENTS I_Scsm Connection Class, I_Scsm Abort Ind Event Sink, I_Scsm Associate Ind Event Sink, I_Scsm Release Cnf Event Sink, I_Scsm Release Ind Event Sink VAR_INPUT settings : FB_Scsm Connection Settings Class; END_VAR Interfaces Type Description I_Scsm Connection Class [} 396] Interfaces for establishment of communication and data exchange. I_Scsm Abort Ind Event Sink [} 400] Interface of the Abort service event handling routine. I_Scsm Associate Ind Event Sink [} 401] Interface of the Associate service event handling routine. I_Scsm Release Cnf Event Sink [} 412] Interface of the Release service event handling routine. I_Scsm Release Ind Event Sink [} 412] Interface of the Release service event handling routine. TF6510 Version: 1.7.1 247
## Page 248

PLC API Inputs Name Type Description settings FB_Scsm Connection Settings Class Protocol settings for the communication layer. [} 177] Methods Name Description Execute This method triggers the execution of the communication layer. Associate Rsp [} 397] Responds to the service: Associate. Release Req [} 397] Enables the service: Release. Release Rsp [} 398] Responds to the service: Release. Abort Req [} 397] Enables the service: Abort. Methods of event handling (callback methods) Name Description On Associate Ind [} 401] User-defined Associate service event handling routine. On Release Cnf [} 412] User-defined release service event handling routine. On Release Ind [} 413] User-defined release service event handling routine. On Abort Ind [} 400] User-defined abort service event handling routine. Properties Name Type Access Description e Link St E_Scsm Link Status Get Server Link status. Link status of the network adapter (accepted atus sockets). [} 487] e State E_Async Environmen Get Environmental state of the communication connection. t State [} 482] ip Settin I_Scsm Connection S Get Protocol settings for the communication layer. gs ettings Class [} 348] ip Serve I_Scsm Server Class Get,Set Interface pointer of an object that implements the server (container). r [} 398] ip Assoc I_Scsm Associate Ind E Set Interface pointer of an object with a user-defined implementation of iate Ind vent Sink [} 401] the event handling routine: On Associate Ind [} 401]. ip Relea I_Scsm Release Cnf Ev Set Interface pointer of an object with a user-defined implementation of se Cnf ent Sink [} 412] the event handling routine: On Release Cnf [} 412]. ip Relea I_Scsm Release Ind Ev Set Interface pointer of an object with a user-defined implementation of se Ind ent Sink [} 412] the event handling routine: On Release Ind [} 413]. ip Abort I I_Scsm Abort Ind Even Set Interface pointer of an object with a user-defined implementation of nd t Sink [} 400] the event handling routine: On Abort Ind [} 400]. ip Assoc I_Scsm Association Cl Get Interface pointer of an object that identifies the server connection iation (session). ass [} 402] s Desc STRING Get,Set The description of the server connection (session). 248 Version: 1.7.1 TF6510
## Page 249

PLC API 6.3.3.3 FB_iec61850Server Class Fig. 1: The function block FB_iec61850Server Class implements an interface for establishment of communication and data exchange between the Twin CAT Server application and the IEC 61850 Client. Namespace: Tc3_iec61850 [} 98] Library: Tc3_iec61850 (Tc3_iec61850.compiled-library) Inheritance hierarchy FB_iec61850Server Class FUNCTION_BLOCK FB_iec61850Server Class IMPLEMENTS I_Scsm Server Class VAR_INPUT settings : FB_Scsm Server Settings Class; END_VAR Interfaces Type Description I_Scsm Server Class [} 398] Interfaces for establishment of communication and data exchange. Inputs Name Type Description settings FB_Scsm Server Settings Class [} 178] Protocol settings for the communication layer. Methods Name Description Add Connection [} 399] Adds a connection instance to the Server. Execute This method triggers the execution of the communication layer as well as the connection instances. Remove Connection [} 399] Removes a connection instance from the server. TF6510 Version: 1.7.1 249
## Page 250

PLC API Properties Name Type Ac- Description cess e Link Stat E_Scsm Link Status Get Server link status of the network adapter (listener sockets). us [} 487] ip Connec I_Scsm Connection Get Interface pointer from an object with the implementation of the first tions connection instance. Class [} 396] ip IED I_Acsi Common Intel Get, Interface pointer of an object with the implementation of the top-level of Set the IEC 61850 data model. ligent Electronic Dev ice Class [} 340] ip Setting I_Scsm Server Settin Get Protocol settings for the communication layer. s gs Class [} 349] ip System I_Scsm System Clock Set Interface pointer of an object with a user-defined implementation of the Clock Event Sink [} 415] event handling routine: On Get System Time [} 416]. n Items UDINT Get The number of connection instances. s Desc STRING Get, The description of the server (container). Set 6.3.3.4 Control block access 6.3.3.4.1 FB_Scsm Br CBImpl Class The function block FB_Scsm Br CBImpl Class contains the client and server implementation of the properties and functions of a BRCB control block. For each configured GOOSE control block an instance of FB_Gse Br CBImpl Class is created by the Twin CAT Telecontrol Configurator. Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] - > FB_Acsi Common Control Block Class [} 148] -> FB_Acsi Common Buffered Report Control Block Class [} 148] - > FB_Acsi Buffered Report Control Block [} 165] -> FB_Scsm Br CBImpl Class FUNCTION_BLOCK FB_Scsm Br CBImpl Class EXTENDS FB_Acsi Buffered Report Control Block IMPLEMENTS I_Scsm Br CBI mpl Class VAR_INPUT 250 Version: 1.7.1 TF6510
## Page 251

PLC API Client : FB_Scsm Br CBClient Job Class; Server : FB_Scsm Br CBServer Job Class; END_VAR Interfaces Type Description I_Scsm Br CBImpl Class [} 416] Interface of the BRCB control block implementation. Inputs Name Type Definition location Description Client FB_Scsm Br CBClient Job Cl Local Client implementation of the BRCB control block. ass [} 252] Server FB_Scsm Br CBServer Job Cl Local Server implementation of the BRCB control block. ass [} 253] Rpt ID FB_Acsi DAType Vis String1 Inherited from Data attribute, 29 [} 145] FB_Acsi Buffered Report Control Ed1=>Rpt ID:Vis Str[65]! Block [} 165] Rpt Ena FB_Acsi BAType BOOLEAN -//- Data attribute [} 99] Dat Set FB_Acsi DAType Dat Set Ref -//- Data attribute [} 147] Conf Rev FB_Acsi BAType INT32U -//- Data attribute [} 102] Opt Flds FB_Acsi DAType Opt Flds -//- Data attribute [} 124] Buf Tm FB_Acsi BAType INT32U -//- Data attribute [} 102] Sq Num FB_Acsi BAType INT16U -//- Data attribute [} 101] Trg Ops FB_Acsi DAType Trigger Co -//- Data attribute nditions [} 142] Intg Pd FB_Acsi BAType INT32U -//- Data attribute [} 102] GI FB_Acsi BAType BOOLEAN -//- Data attribute [} 99] Purge Buf FB_Acsi BAType BOOLEAN -//- Data attribute [} 99] Entry ID FB_Acsi DAType Entry ID -//- Data attribute [} 115] Time Of Entry FB_Acsi DAType Entry Time -//- Data attribute [} 115] Resv Tms FB_Acsi BAType INT16 -//- Data attribute, Ed2. [} 101] Owner FB_Acsi DAType Octet64 -//- Data attribute, Ed2. [} 123] TF6510 Version: 1.7.1 251
## Page 252

PLC API Properties Name Type Ac- Definition lo- Description cess cation b GI BOOL Get, I_Scsm Br CBImpl Attribute value: Enabling the general interrogation Set command. Class [} 416] b Purge BOOL Get, -//- Attribute value: Enabling the purge command. Buf Set b Rpt En BOOL Get, -//- Attribute value: Enabling/disabling the RCB control a Set block. Further configuration needed. c Opt Fld ST_Acsi Optional Fi Get, -//- Attribute value: Configuration of the optional fields that s Set are transferred with a report. elds [} 498] c Trg Op ST_Acsi Trigger Co Get, -//- Attribute value: Configuration of the trigger options for s Set sending a report. nditions [} 506] i Resv T INT Get, -//- Attribute value: Configuration of the time for reserving ms Set the RCB for a specific client. n Buf Tm DWORD Get, -//- Attribute value: Configuration of the max. report buffer Set time in milliseconds. n Conf R DWORD Get, -//- Attribute value: Revision number of the RCB control ev Set block configuration. n Entry I LWORD Get, -//- Attribute value: ID of the report entry as 64-bit D Set numerical value. n Intg Pd DWORD Get, -//- Attribute value: Configuration of the max. time between Set integrity reports in milliseconds. n Sq Nu WORD Get, -//- Attribute value: Report sequence number. m Set o Entry I T_OCTET8 [} 518] Get, -//- Attribute value: ID of the report entry as octet string. D Set o Owner T_OCTET64 Get, -//- Attribute value: Owner of the RCB. IP address of the Set client which has reserved the RCB for itself (offline/ [} 518] online reservation). s Dat Set T_Acsi Object Refer Get, -//- Attribute value: Name of the linked data set. Set ence [} 515] s Rpt ID T_Acsi Vis String12 Get, -//- Attribute value: Report identification string. Set 9 [} 516] t Time Of T_Binary Time Get, -//- Attribute value: Report timestamp. Entry Set [} 516] ip Dat Se I_Acsi Common Da Get -//- Interface pointer of the linked data set. t ta Set Class [} 338] ip Client I_Scsm Br CBClient J Get -//- Interface pointer of the client implementation of the BRCB control block. ob Class [} 417] ip Server I_Scsm Br CBServer Get -//- Interface pointer of the server implementation of the BRCB control block. Job Class [} 419] 6.3.3.4.2 FB_Scsm Br CBClient Job Class Client implementation of the BRCB control block. 252 Version: 1.7.1 TF6510
## Page 253

PLC API Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) Inheritance hierarchy FB_Async Service Result Class [} 269] -> FB_Scsm Br CBClient Job Class FUNCTION_BLOCK FB_Scsm Br CBClient Job Class EXTENDS FB_Async Service Result Class IMPLEMENTS I_Scsm Br CBCli ent Job Class VAR_OUTPUT st Info : ST_Scsm Br CBJob Info; END_VAR Interfaces Type Description I_Scsm Br CBClient Job Class [} 417] Client interface of the BRCB control block implementation. Outputs Name Type Description st Info ST_Scsm Br CBJob Info [} 511] Information received in the last report message. Methods Name Description Enable Req [} 418] Enables the control block. Disable Req [} 418] Disables the control block. GIreq [} 418] Enables the general interrogation command. Purge Buf Req [} 419] Enables the Purge command. Resync Req [} 419] Enables the Resync command. Properties Name Type Ac- Description cess c Opt Flds ST_Acsi Optional Fields Set Optional fields that are transferred in a report. [} 498] c Trg Ops ST_Acsi Trigger Conditions Set Trigger options for sending a report. [} 506] i Resv Tms INT(-1..3600) Set Configures the time for reserving the RCB for a specific client. n Buf Tm DWORD Set Max. report buffer time in milliseconds. n Intg Pd DWORD Set Max. time between integrity reports in milliseconds. s Rpt ID T_Acsi Vis String129 [} 516] Set Report identification string. 6.3.3.4.3 FB_Scsm Br CBServer Job Class Server implementation of the BRCB control block. TF6510 Version: 1.7.1 253
## Page 254

PLC API Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) Inheritance hierarchy FB_Async Service Result Class [} 269] -> FB_Scsm Br CBServer Job Class FUNCTION_BLOCK FB_Scsm Br CBServer Job Class EXTENDS FB_Async Service Result Class IMPLEMENTS I_Scsm Br CBSer ver Job Class VAR_OUTPUT st Info : ST_Scsm Br CBJob Info; END_VAR Interfaces Type Description I_Scsm Br CBServer Job Class [} 419] Server interface of the BRCB control block implementation. Outputs Name Type Description st Info ST_Scsm Br CBJob Info [} 511] Information sent in the last report message. Methods Name Description Execute [} 419] Runs the RCB state machine of the server. Properties Name Type Ac- Description cess b Overwrite Same Cycle Cha BOO Set If TRUE, multiple value changes within a PLC cycle and a data nges L object are treated as single value changes (only one report is generated). If FALSE, each value change generates its own report. b Replace Buffered MX BOO Set Configures whether data of the functional group "MX" should be L handled separately, like data of the functional group "ST". n Max Buffer Entries UDIN Set Configures the maximum number of buffered report entries. T s Resv Client STRI Set String with the IP address of the client preconfigured in SCL NG (offline reservation). Example: '192.168.10.140'. If set, then in the server access to the RCB instance is restricted to the client with this IP address ("Client LN" entries in the SCL). Default: Empty string (online reservation). With the empty string, each client can dynamically reserve access to the RCB for itself. 254 Version: 1.7.1 TF6510
## Page 255

PLC API 6.3.3.4.4 FB_Scsm Go CBImpl Class The function block FB_Scsm Go CBImpl Class contains the client and server implementation of the properties and functions of a GOOSE control block. Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] - > FB_Acsi Common Control Block Class [} 148] -> FB_Acsi Common Goose Control Block Class [} 151] - > FB_Acsi Goose Control Block [} 166] -> FB_Scsm Go CBImpl Class FUNCTION_BLOCK FB_Scsm Go CBImpl Class EXTENDS FB_Acsi Goose Control Block IMPLEMENTS I_Scsm Go CBImpl Class VAR_INPUT Client : FB_Scsm Go CBClient Job Class; Server : FB_Scsm Go CBServer Job Class; END_VAR Interfaces Type Description I_Scsm Go CBImpl Class [} 420] Interface of the GOOSE control block implementation. TF6510 Version: 1.7.1 255
## Page 256

PLC API Inputs Name Type Definition location Description Client FB_Scsm Go CBClient Jo Local Client implementation of the GOOSE control block. b Class [} 257] Server FB_Scsm Go CBServer J Local Server implementation of the GOOSE control block. ob Class [} 258] Go Ena FB_Acsi BAType BOOLE Inherited from Data attribute AN [} 99] FB_Acsi Goose Control Block [} 166] Go ID FB_Acsi DAType Vis Stri -//- Data attribute ng129 [} 145] Dat Set FB_Acsi DAType Dat Set -//- Data attribute Ref [} 147] Conf Rev FB_Acsi BAType INT32 -//- Data attribute U [} 102] Nds Com FB_Acsi BAType BOOLE -//- Data attribute AN [} 99] Dst Address FB_Acsi DAType Phy Co -//- Data attribute m Addr [} 128] Min Time FB_Acsi BAType INT32 -//- Data attribute U [} 102] Max Time FB_Acsi BAType INT32 -//- Data attribute U [} 102] Fixed Offs FB_Acsi BAType BOOLE -//- Data attribute AN [} 99] 256 Version: 1.7.1 TF6510
## Page 257

PLC API Properties Name Type Access Definition loca- Description tion b Fixed Off BOOL Get I_Scsm Go CBImpl Cl Attribute value: Enables/disables coding with s fixed lengths. ass [} 420] b Go Ena BOOL Get, Set -//- Attribute value: Enables/disables the GOOSE control block. b Nds Com BOOL Get -//- Attribute value: Indicates whether the GOOSE control block requires further configuration. e PRIORIT E_Acsi VLan Priority Get -//- Priority level in the VLAN network. Y [} 481] ip Dat Set I_Acsi Common Data S Get -//- Interface pointer to the linked data set. et Class [} 338] mac Addr ETHERNET_ADDRESS Get -//- Target MAC address. [} 490] n APPID WORD Get -//- Application Identifier. n Conf Rev UDINT Get -//- Revision number of the configuration of the GOOSE control block. n Max Tim DWORD Get -//- Maximum time between repeated e transmissions of a GOOSE message in milliseconds. n Min Time DWORD Get -//- Time between direct sending after data change and first repetition in milliseconds. n VID WORD(0..4095) Get -//- ID of the VLAN network. o Addr T_OCTET6 [} 518] Get -//- Target MAC address. s Addr STRING(17) Get -//- Target MAC address. s Dat Set T_Acsi Object Referenc Get, Set -//- Name of the linked data set. e [} 515] s Go ID T_Acsi Vis String129 Get, Set -//- The ID of the GOOSE messages. [} 516] ip Client I_Scsm Go CBClient Job Get -//- Interface pointer of the client implementation of the GOCB control block. Class [} 420] ip Server I_Scsm Go CBServer Jo Get -//- Interface pointer of the server implementation of the GOCB control block. b Class [} 421] 6.3.3.4.5 FB_Scsm Go CBClient Job Class Client implementation of the GOCB control block. Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) Inheritance hierarchy FB_Async Service Result Class [} 269] -> FB_Scsm Go CBClient Job Class TF6510 Version: 1.7.1 257
## Page 258

PLC API FUNCTION_BLOCK FB_Scsm Go CBClient Job Class EXTENDS FB_Async Service Result Class IMPLEMENTS I_Scsm Go CBCli ent Job Class VAR_OUTPUT st Info : ST_Scsm Go CBJob Info; END_VAR Interfaces Type Description I_Scsm Go CBClient Job Class [} 420] Client interface of the GOCB control block implementation. Outputs Name Type Description st Info ST_Scsm Go CBJob Info [} 513] Methods Name Description Enable Req [} 421] Enables the control block. Disable Req [} 421] Disables the control block. Properties Name Type Access Description s Go ID T_Acsi Vis String129 [} 516] Set GOOSE message identification string. 6.3.3.4.6 FB_Scsm Go CBServer Job Class Server implementation of the GOCB control block. Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) Inheritance hierarchy FB_Async Service Result Class [} 269] -> FB_Scsm Go CBServer Job Class FUNCTION_BLOCK FB_Scsm Go CBServer Job Class EXTENDS FB_Async Service Result Class IMPLEMENTS I_Scsm Go CBSer ver Job Class Interfaces Type Description I_Scsm Go CBServer Job Class [} 421] Server interface of the GOCB control block implementation. Methods Name Description Execute [} 421] Runs the GOCB state machine of the server. 258 Version: 1.7.1 TF6510
## Page 259

PLC API 6.3.3.4.7 FB_Scsm Ur CBImpl Class The function block FB_Scsm Ur CBImpl Class contains the client and server implementation of the properties and functions of a URCB control block. For each configured GOOSE control block an instance of FB_Scsm Ur CBImpl Class is created by the Twin CAT Telecontrol Configurator. Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] - > FB_Acsi Common Control Block Class [} 148] -> FB_Acsi Common Unbuffered Report Control Block Class [} 155] - > FB_Acsi Unbuffered Report Control Block [} 166] -> FB_Scsm Ur CBImpl Class FUNCTION_BLOCK FB_Scsm Ur CBImpl Class EXTENDS FB_Acsi Unbuffered Report Control Block IMPLEMENTS I_Scsm Ur C BImpl Class VAR_INPUT Client : FB_Scsm Ur CBClient Job Class; Server : FB_Scsm Ur CBServer Job Class; END_VAR Interfaces Type Description I_Scsm Ur CBImpl Class [} 422] Interface of the URCB control block implementation. TF6510 Version: 1.7.1 259
## Page 260

PLC API Inputs Name Type Definition location Description Client FB_Scsm Ur CBClient Job Cla Local Client implementation of the URCB control block. ss [} 261] Server FB_Scsm Ur CBServer Job Cla Local Server implementation of the URCB control block. ss [} 262] Rpt ID FB_Acsi DAType Vis String1 Inherited from Data attribute, Ed1=>Rpt ID:Vis Str[65]! 29 [} 145] FB_Acsi Unbuffered Report Contr ol Block [} 166] Rpt Ena FB_Acsi BAType BOOLEAN -//- Data attribute [} 99] Resv FB_Acsi BAType BOOLEAN -//- Data attribute [} 99] Dat Set FB_Acsi DAType Dat Set Ref -//- Data attribute [} 147] Conf Rev FB_Acsi BAType INT32U -//- Data attribute [} 102] Opt Flds FB_Acsi DAType Opt Flds -//- Data attribute [} 124] Buf Tm FB_Acsi BAType INT32U -//- Data attribute [} 102] Sq Num FB_Acsi BAType INT8U -//- Data attribute [} 101] Trg Ops FB_Acsi DAType Trigger Con -//- Data attribute ditions [} 142] Intg Pd FB_Acsi BAType INT32U -//- Data attribute [} 102] GI FB_Acsi BAType BOOLEAN -//- Data attribute [} 99] Owner FB_Acsi DAType Octet64 -//- Data attribute, Ed2. [} 123] 260 Version: 1.7.1 TF6510
## Page 261

PLC API Properties Name Type Ac- Definition lo- Description cess cation b GI BOOL Get, I_Scsm Ur CBI Attribute value: Enabling the general interrogation Set command. mpl Class [} 422] b Resv BOOL Get, -//- Attribute value: Reservation of the RCB. Set b Rpt E BOOL Get, -//- Attribute value: Enabling/disabling the RCB control block. na Set Further configuration needed. c Opt Fl ST_Acsi Optional Fi Get, -//- Attribute value: Configuration of the optional fields that are ds Set transmitted with a report. elds [} 498] c Trg O ST_Acsi Trigger Co Get, -//- Attribute value: Configuration of the trigger options for ps Set sending a report. nditions [} 506] n Buf T DWORD Get, -//- Attribute value: Configuration of the max. report buffer time m Set in milliseconds. n Conf DWORD Get, -//- Attribute value: Revision number of the RCB control block Rev Set configuration. n Intg P DWORD Get, -//- Attribute value: Configuration of the max. time between d Set integrity reports in milliseconds. n Sq N BYTE Get, -//- Attribute value: Report sequence number. um Set o Own T_OCTET64 Get, -//- Attribute value: Owner of the RCB. IP address of the client er Set which has reserved the RCB for itself (offline/online [} 518] reservation). s Dat S T_Acsi Object Refe Get, -//- Attribute value: Name of the linked data set. et Set rence [} 515] s Rpt I T_Acsi Vis String12 Get, -//- Attribute value: Report identification string. D Set 9 [} 516] ip Dat S I_Acsi Common Da Get -//- Interface pointer of the linked data set. et ta Set Class [} 338] ip Clie I_Scsm Ur CBClient Get -//- Interface pointer of the client implementation of the URCB nt control block. Job Class [} 422] ip Serv I_Scsm Ur CBServe Get -//- Interface pointer of the server implementation of the URCB er control block. r Job Class [} 423] 6.3.3.4.8 FB_Scsm Ur CBClient Job Class Client implementation of the URCB control block. Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) Inheritance hierarchy FB_Async Service Result Class [} 269] -> FB_Scsm Ur CBClient Job Class TF6510 Version: 1.7.1 261
## Page 262

PLC API FUNCTION_BLOCK FB_Scsm Ur CBClient Job Class EXTENDS FB_Async Service Result Class IMPLEMENTS I_Scsm Ur CBCli ent Job Class VAR_OUTPUT st Info : ST_Scsm Ur CBJob Info; END_VAR Interfaces Type Description I_Scsm Ur CBClient Job Class [} 422] Client interface of the URCB control block implementation. Outputs Name Type Description st Info ST_Scsm Ur CBJob Info [} 514] Information received in the last report message. Methods Name Description Enable Req [} 423] Enables the control block. Disable Req [} 423] Disables the control block. GIreq [} 423] Enables the general interrogation command. Properties Name Type Access Description c Opt Flds ST_Acsi Optional Fields Set Optional fields that are transferred in a report. [} 498] c Trg Ops ST_Acsi Trigger Conditions Set Trigger options for sending a report. [} 506] n Buf Tm DWORD Set Max. report buffer time in milliseconds. n Intg Pd DWORD Set Max. time between integrity reports in milliseconds. s Rpt ID T_Acsi Vis String129 [} 516] Set Report identification string. 6.3.3.4.9 FB_Scsm Ur CBServer Job Class Server implementation of the URCB control block. Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) Inheritance hierarchy FB_Async Service Result Class [} 269] -> FB_Scsm Ur CBServer Job Class FUNCTION_BLOCK FB_Scsm Ur CBServer Job Class EXTENDS FB_Async Service Result Class IMPLEMENTS I_Scsm Ur CBSer ver Job Class VAR_OUTPUT st Info : ST_Scsm Ur CBJob Info; END_VAR 262 Version: 1.7.1 TF6510
## Page 263

PLC API Interfaces Type Description I_Scsm Ur CBServer Job Class [} 423] Server interface of the URCB control block implementation. Outputs Name Type Description st Info ST_Scsm Ur CBJob Info [} 514] Information sent in the last report message. Methods Name Description Execute [} 424] Runs the RCB state machine of the server. Properties Name Type Ac- Description cess b Overwrite Same Cycle Ch BOOL Set If TRUE, multiple value changes within a PLC cycle and a data anges object are treated as single value changes (only one report is generated). If FALSE, each value change generates its own report. b Replace Buffered MX BOOL Set Configures whether data of the functional group "MX" should be handled separately, like data of the functional group "ST". s Resv Client STRIN Set String with the IP address of the client preconfigured in SCL (offline G reservation). Example: '192.168.10.140'. If set, then in the server access to the RCB instance is restricted to the client with this IP address ("Client LN" entries in the SCL). Default: Empty string (online reservation). With the empty string, each client can dynamically reserve access to the RCB for itself. 6.3.3.5 GOOSE 6.3.3.5.1 FB_Gse Adapter Class The function block FB_Gse Adapter Class implements interfaces for exchanging the high-priority GSE data (Global System Event) over a selected network interface. These data include GOOSE, GSSE or SV (Sampled Values) messages. To be able to execute the communication, each instance of FB_Gse Adapter Class must be connected to a corresponding network adapter. This is explained in RT Ethernet adapter configuration [} 38]. Namespace: Tc3_Gse [} 98] Library: Tc3_Gse (Tc3_Gse.compiled-library) Inheritance hierarchy FB_Service Error Class [} 270] -> FB_Gse Adapter Class FUNCTION_BLOCK FB_Gse Adapter Class EXTENDS FB_Service Error Class IMPLEMENTS I_Gse Adapter Class, I_Gse Ad apter Event Sink VAR_INPUT settings : FB_Gse Adapter Settings Class; TF6510 Version: 1.7.1 263
## Page 264

PLC API END_VAR VAR_OUTPUT st Info : ST_Gse Adapter Info; END_VAR Interfaces Type Description I_Gse Adapter Class [} 368] Interface for data exchange. I_Gse Adapter Event Sink Inputs Name Type Description settings FB_Gse Adapter Settings Class [} 167] Adapter configuration settings. Methods Name Description Start Publisher Starts the publishing process on all GOCBs. [} 265] Stop Publisher Stops the publishing process on all GOCBs. [} 265] Subscribe Starts the subscriber process on all GOCBs. [} 265] Unsubscribe Stops the subscriber process for all GOCBs. [} 265] Properties Name Type Ac- Description cess ip Gro I_Acsi Common IEDGroup Cl Set Interface pointer from an IED group. up ass [} 340] ip IED I_Acsi Common Intelligent El Set Interface pointer of an object with the implementation of the top- level of the IEC 61850 data model. ectronic Device Class [} 340] ip Link I_Gse Link Status Event Sink Set Interface pointer of an object with a user-defined implementation Statu of the event handling routine: On Link Status Change. [} 372] s ip Setti I_Gse Adapter Settings Class Get Protocol settings of the GSE adapter. Returns an interface ngs pointer to "settings". [} 346] ip Syst I_Gse System Clock Event Sin Set Interface pointer of an object with a user-defined implementation em Cl of the event handling routine: On Get System Time. k [} 372] ock Outputs Name Type Description st Info ST_Gse Adapter Info [} 508] Statistical information on GSE communication (e.g. on the number of telegrams received or sent). 264 Version: 1.7.1 TF6510
## Page 265

PLC API 6.3.3.5.1.1 Start Publisher Starts the publishing process on all GOCBs. METHOD FINAL Start Publisher : BOOL VAR_OUTPUT ip Error : I_Service Error Class; END_VAR ip Error: Interface pointer of type I_Service Error Class [} 428]. This pointer can be used to query the error code, error source or error text in the event of a negative feedback. Return parameter: Positive feedback (TRUE) on success or negative feedback (FALSE) on error. 6.3.3.5.1.2 Stop Publisher Stops the publishing process on all GOCBs. METHOD FINAL Stop Publisher : BOOL VAR_OUTPUT ip Error : I_Service Error Class; END_VAR ip Error: Interface pointer of type I_Service Error Class [} 428]. This pointer can be used to query the error code, error source or error text in the event of a negative feedback. Return parameter: Positive feedback (TRUE) on success or negative feedback (FALSE) on error. 6.3.3.5.1.3 Subscribe Starts the subscriber process on all GOCBs. METHOD FINAL Subscribe : BOOL VAR_OUTPUT ip Error : I_Service Error Class; END_VAR ip Error: Interface pointer of type I_Service Error Class [} 428]. This pointer can be used to query the error code, error source or error text in the event of a negative feedback. Return parameter: Positive feedback (TRUE) on success or negative feedback (FALSE) on error. 6.3.3.5.1.4 Unsubscribe Stops the subscriber process for all GOCBs. METHOD FINAL Unsubscribe : BOOL VAR_OUTPUT ip Error : I_Service Error Class; END_VAR ip Error: Interface pointer of type I_Service Error Class [} 428]. This pointer can be used to query the error code, error source or error text in the event of a negative feedback. Return parameter: Positive feedback (TRUE) on success or negative feedback (FALSE) on error. TF6510 Version: 1.7.1 265
## Page 266

PLC API 6.3.3.5.2 FB_Gse Go CBImpl Class The function block FB_Gse Go CBImpl Class contains the implementation of the properties of a GOOSE control block as well as the functions for Publisher and Subscriber. For each configured GOOSE control block an instance of FB_Gse Go CBImpl Class is created by the Twin CAT Telecontrol Configurator. For more information on code generation for GOOSE, see Automatic code generation [} 76]. Namespace: Tc3_Gse [} 98] Library: Tc3_Gse (Tc3_Gse.compiled-library) Inheritance hierarchy FB_Acsi Common Node Class [} 155] -> FB_Acsi Common Data Class [} 149] - > FB_Acsi Common Control Block Class [} 148] -> FB_Acsi Common Goose Control Block Class [} 151] - > FB_Acsi Goose Control Block [} 166] -> FB_Scsm Go CBImpl Class [} 255] -> FB_Gse Go CBImpl Class FUNCTION_BLOCK FB_Gse Go CBImpl Class EXTENDS FB_Scsm Go CBImpl Class IMPLEMENTS I_Gse Go CBImpl Class VAR_INPUT Publisher : FB_Gse Go CBPublisher Class; Subscriber : FB_Gse Go CBSubscriber Class; END_VAR Interfaces Type Description I_Gse Go CBImpl Class [} 369] Interface of the GOOSE control block implementation. 266 Version: 1.7.1 TF6510
## Page 267

PLC API Inputs Name Type Definition location Description Publisher FB_Gse Go CBPublisher Cla Local Publisher implementation of the GOOSE control block. ss [} 267] Subscriber FB_Gse Go CBSubscriber Cl Local Subscriber implementation of the GOOSE control block. ass [} 268] Client FB_Scsm Go CBClient Job Cl Inherited from Client implementation of the GOOSE control ass [} 257] FB_Scsm Go CBImpl Cla block. ss [} 255] Server FB_Scsm Go CBServer Job C -//- Server implementation of the GOOSE control block. lass [} 258] Go Ena FB_Acsi BAType BOOLEAN Inherited from Data attribute [} 99] FB_Acsi Goose Control Block [} 166] Go ID FB_Acsi DAType Vis String1 -//- Data attribute 29 [} 145] Dat Set FB_Acsi DAType Dat Set Ref -//- Data attribute [} 147] Conf Rev FB_Acsi BAType INT32U -//- Data attribute [} 102] Nds Com FB_Acsi BAType BOOLEAN -//- Data attribute [} 99] Dst Address FB_Acsi DAType Phy Com A -//- Data attribute ddr [} 128] Min Time FB_Acsi BAType INT32U -//- Data attribute [} 102] Max Time FB_Acsi BAType INT32U -//- Data attribute [} 102] Fixed Offs FB_Acsi BAType BOOLEAN -//- Data attribute [} 99] Example For more information on how to use the GOOSE control block, see: Client - GOOSE Subscriber (without Client-Server communication) [} 652] and Server - GOOSE Publisher (without Client-Server communication) [} 663]. 6.3.3.5.3 FB_Gse Go CBPublisher Class Publisher implementation of the GOOSE control block. Namespace: Tc3_Gse [} 98] Library: Tc3_Gse (Tc3_Gse.compiled-library) Inheritance hierarchy FB_Service Error Class [} 270] -> FB_Gse Go CBPublisher Class TF6510 Version: 1.7.1 267
## Page 268

PLC API FUNCTION_BLOCK FB_Gse Go CBPublisher Class EXTENDS FB_Service Error Class IMPLEMENTS I_Gse Go CBPublisher Cl ass VAR_OUTPUT st Tx : ST_Gse Go CBPublisher Tx; END_VAR Interfaces Type Description I_Gse Go CBPublisher Class [} 369] Interface of the GOOSE control block implementation. Outputs Name Type Description st Tx ST_Gse Go CBPublisher Tx [} 508] Information sent in the last GOOSE message. Methods Name Description Execute [} 370] Executes the Publisher state machine. Start [} 370] Starts sending GOOSE messages. Stop [} 370] Stops sending GOOSE messages. Update [} 370] Triggers an immediate sending of a GOOSE message. Properties Name Type Access Description b Test BOOL Set Simulation/test flag of GOOSE messages. At value TRUE the simulation and test flag is set in the GOOSE message. e Strategy E_Gse Retransmission Strateg Set Configures the algorithm for the repeated GOOSE messages. y [} 486] n Multiplier BYTE(1..16#FF) Set Configures the multiplier for the time interval of repeated GOOSE messages. Default value: Param_Acsi.c Default_Go CB_Multiplier (2). ip Adapter I_Gse Adapter Class [} 368] Set Interface of the GOOSE network adapter. 6.3.3.5.4 FB_Gse Go CBSubscriber Class Subscriber implementation of the GOOSE control block. Namespace: Tc3_Gse [} 98] Library: Tc3_Gse (Tc3_Gse.compiled-library) Inheritance hierarchy FB_Service Error Class [} 270] -> FB_Gse Go CBSubscriber Class FUNCTION_BLOCK FB_Gse Go CBSubscriber Class EXTENDS FB_Service Error Class IMPLEMENTS I_Gse Go CBSubscriber Class VAR_OUTPUT st Rx : ST_Gse Go CBSubscriber Rx; END_VAR 268 Version: 1.7.1 TF6510
## Page 269

PLC API Interfaces Type Description I_Gse Go CBSubscriber Class [} 370] Interface of the GOOSE control block implementation. Outputs Name Type Description st Tx ST_Gse Go CBSubscriber Rx [} 509] Information received in the last GOOSE message. Methods Name Description Execute [} 371] Executes the Subscriber state machine. Enable [} 371] Starts receiving GOOSE messages. Disable [} 371] Stops receiving GOOSE messages. 6.3.4 FB_Async Service Result Class The function block FB_Async Service Result Class implements the I_Async Service Result Class [} 424] interface for status query and tracking of asynchronous processes. The methods of the communication function block FB_iec61850Common Class [} 241] for establishing/disconnecting the connection and activation of the IEC 61850 services return the interface pointer of type I_Async Service Result Class [} 424] as parameter. The application can use this pointer to monitor and query the status/progress of service execution. Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) Inheritance hierarchy FB_Async Service Result Class FUNCTION_BLOCK FB_Async Service Result Class IMPLEMENTS I_Async Service Result Class Interfaces Type Description I_Async Service Result Class [} 424] Interface for status query and tracking of asynchronous processes. TF6510 Version: 1.7.1 269
## Page 270

PLC API Methods Name Description Copy From [} 425] Copies object data from another object instance. Dump [} 425] Converts own object data into a formatted string. Equal [} 425] Value comparison of own object data with external data values. Equal Ex [} 425] Value comparison of own object data with external data values. Equal To [} 425] Value comparison of own object data with the data of another object instance. Is Aborted [} 426] Checks whether the service was aborted. Is Busy [} 426] Checks whether the service is still running. Is Completed [} 426] Checks whether the service execution was completed successfully. Is Failed [} 426] Checks whether the service execution was completed with an error. Set Aborted [} 426] Sets the abort status. Set Aborted Ex [} 427] Sets the abort status. Set Busy [} 427] Sets the status to busy. Set Completed [} 427] Sets the status to completed (without error). Set Failed [} 428] Sets the error state. Set Failed Ex [} 428] Sets the error state. Properties Name Type Access Description e State E_Async Service State [} 483] Get Status information [} 428] 6.3.5 FB_Service Error Class The function block FB_Service Error Class implements the I_Service Error Class [} 428] interface for error query and storage. The methods of the object instances of the Twin CAT IEC 61850 data model and some services for establishing/disconnecting the connection return the interface pointer of type I_Service Error Class [} 428] in the event of an error. This pointer can be used to perform a more detailed error analysis. Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) Inheritance hierarchy FB_Service Error Class FUNCTION_BLOCK FB_Service Error Class IMPLEMENTS I_Service Error Class Interfaces Type Description I_Service Error Class [} 428] Interface for error query and storage. 270 Version: 1.7.1 TF6510
## Page 271

PLC API Methods Name Description Copy From [} 429] Copies object data from another object instance. Dump [} 429] Converts own object data to a formatted string (e.g. for log outputs). Equal [} 429] Value comparison of own object data (error information) with external data values. Equal Ex [} 430] Value comparison of own object data (error information) with external data values. Equal To [} 430] Value comparison of own object data (error information) with the data of another object instance. Is Failed [} 430] Checks own object data (error information) for failure. Is Succeeded [} 430] Checks own object data (error information) for success. Set Failed Ex [} 430] Stores error information in its own object instance. Set Succeeded [} 431] Stores success information in its own object instance. Properties Name Type Access Description st Error [} 431] ST_Service Error Class [} 515] Get Object data as a structured type. 6.4 Functions 6.4.1 Accuracy_To_Utc Time Quality Accuracy Converts the value of the enumeration type E_Utc Time Accuracy [} 489] (accuracy of the time information) into five Boolean values. These five output values correspond to the bit components: Accuracy0.. Accuracy4 of the structured type T_Utc Time Quality [} 520]. Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) Syntax FUNCTION Accuracy_To_Utc Time Quality Accuracy VAR_INPUT in : E_Utc Time Accuracy; END_VAR VAR_OUTPUT b Accuracy0 : BOOL; b Accuracy1 : BOOL; b Accuracy2 : BOOL; b Accuracy3 : BOOL; b Accuracy4 : BOOL; END_VAR Inputs Name Type Description in E_Utc Time Accuracy [} 489] Accuracy of the seconds fraction. This value determines the max. number of significant bits of the T_Utc Time [} 519].fraction Of Second component. TF6510 Version: 1.7.1 271
## Page 272

PLC API Outputs Converted information as T_Utc Time Quality [} 520]. Accuracy0..4 bit components. See: Coding of the UTC- Time. Quality. Accuracy0..4 bits [} 719]. Name Type Description b Accuracy0 BOOL Accuracy MSB bit 0. b Accuracy1 BOOL Accuracy bit 1. b Accuracy2 BOOL Accuracy bit 2. b Accuracy3 BOOL Accuracy bit 3. b Accuracy4 BOOL Accuracy MSB bit 4. Return value None. Sample METHOD Utc Time Quality Accuracy_To From_Accuracy : BOOL VAR_INPUT fb IED : REFERENCE TO FB_IED; END_VAR VAR Quality : T_Utc Time Quality; s Quality : STRING; END_VAR IF NOT __ISVALIDREF(fb IED) THEN RETURN; END_IF Quality. Leap Seconds Known := FALSE; Quality. Clock Failure := FALSE; Quality. Clock Not Synchronized := FALSE; Accuracy_To_Utc Time Quality Accuracy( E_Utc Time Accuracy. Null,(* Null bits accuracy *) b Accuracy0=>Quality. Accuracy0, b Accuracy1=>Quality. Accuracy1, b Accuracy2=>Quality. Accuracy2, b Accuracy3=>Quality. Accuracy3, b Accuracy4=>Quality. Accuracy4 ); s Quality := Utc Time Quality_To_String(Quality);(* s Quality := 'UQ#000|0' *) IF fb IED. Relay. LLN0. Beh.t.e Accuracy <> Utc Time Quality Accuracy_To_Accuracy(Quality) THEN Quality := fb IED. Relay. LLN0. Beh.t. Quality; END_IF Quality. Leap Seconds Known := FALSE; Quality. Clock Failure := FALSE; Quality. Clock Not Synchronized := FALSE; Accuracy_To_Utc Time Quality Accuracy( E_Utc Time Accuracy._03,(* 3 bits accuracy *) b Accuracy0=>Quality. Accuracy0, b Accuracy1=>Quality. Accuracy1, b Accuracy2=>Quality. Accuracy2, b Accuracy3=>Quality. Accuracy3, b Accuracy4=>Quality. Accuracy4 ); s Quality := Utc Time Quality_To_String(Quality);(* s Quality := 'UQ#000|3' *) IF fb IED. Relay. LLN0. Health.t.e Accuracy <> Utc Time Quality Accuracy_To_Accuracy(Quality) THEN Quality := fb IED. Relay. LLN0. Health.t. Quality; END_IF Quality. Leap Seconds Known := FALSE; Quality. Clock Failure := FALSE; Quality. Clock Not Synchronized := FALSE; Accuracy_To_Utc Time Quality Accuracy( E_Utc Time Accuracy._05,(* 5 bits accuracy *) b Accuracy0=>Quality. Accuracy0, b Accuracy1=>Quality. Accuracy1, b Accuracy2=>Quality. Accuracy2, b Accuracy3=>Quality. Accuracy3, b Accuracy4=>Quality. Accuracy4 ); s Quality := Utc Time Quality_To_String(Quality);(* s Quality := 'UQ#000|5' *) IF fb IED. Relay. LLN0. Mod_.t.e Accuracy <> Utc Time Quality Accuracy_To_Accuracy(Quality) THEN Quality := fb IED. Relay. LLN0. Mod_.t. Quality; END_IF 272 Version: 1.7.1 TF6510
## Page 273

PLC API Quality. Leap Seconds Known := FALSE; Quality. Clock Failure := FALSE; Quality. Clock Not Synchronized := FALSE; Accuracy_To_Utc Time Quality Accuracy( E_Utc Time Accuracy. Unspecified,(* Unspecified accuracy *) b Accuracy0=>Quality. Accuracy0, b Accuracy1=>Quality. Accuracy1, b Accuracy2=>Quality. Accuracy2, b Accuracy3=>Quality. Accuracy3, b Accuracy4=>Quality. Accuracy4 ); s Quality := Utc Time Quality_To_String(Quality);(* s Quality := 'UQ#000|31' *) IF fb IED. Relay. MMXU1.ph V.phs A.t.e Accuracy <> Utc Time Quality Accuracy_To_Accuracy(Quality) THEN Quality := fb IED. Relay. MMXU1.ph V.phs A.t. Quality; END_IF Utc Time Quality Accuracy_To From_Accuracy := TRUE; 6.4.2 Acsi Analogue Value Initializes the data elements of the structure: ST_Acsi Analogue Value. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) FUNCTION Acsi Analogue Value : ST_Acsi Analogue Value VAR_INPUT i : DINT; f : REAL; END_VAR Inputs Name Type Description i DINT Data element "i" to be set. f REAL Data element "f" to be set. Return value Name Type Description Acsi Analogue Value ST_Acsi Analogue Value [} 494] Structure with initialized data elements. Example METHOD FINAL Sample_Acsi Analogue Value : BOOL VAR mag: ST_Acsi Analogue Value; END_VAR mag:=Acsi Analogue Value(i:=0, f:=12.45); Sample_Acsi Analogue Value:=TRUE; 6.4.3 Acsi Calendar Time Initializes the data elements of the structure: ST_Acsi Calendar Time. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) FUNCTION Acsi Calendar Time : ST_Acsi Calendar Time VAR_INPUT occ : WORD; occ Type : E_Acsi Occ Type; occ Per : E_Acsi Occ Per; week Day : E_Acsi Week Day; month : E_Acsi Month; day : BYTE; hr : BYTE; mn : BYTE; END_VAR TF6510 Version: 1.7.1 273
## Page 274

PLC API Inputs Name Type Description occ WORD Data element "occ" to be set. occ Type E_Acsi Occ Type [} 456] Data element "occ Type" to be set. occ Per E_Acsi Occ Per [} 456] Data element "occ Per" to be set. week Day E_Acsi Week Day [} 481] Data element "week Day" to be set. month E_Acsi Month [} 454] Data element "month" to be set. day BYTE Data element "day" to be set. hr BYTE Data element "hr" to be set. mn BYTE Data element "mn" to be set. Return value Name Type Description Acsi Calendar Time ST_Acsi Calendar Time [} 494] Structure with initialized data elements. Example METHOD FINAL Sample_Acsi Calendar Time : BOOL VAR cal Tm: ST_Acsi Calendar Time; END_VAR cal Tm:=Acsi Calendar Time(occ:=0, occ Type:=E_Acsi Occ Type. Time_, occ Per:=E_Acsi Occ Per. Hour, week Day:=E_Acsi Week Day. Friday, month:=E_Acsi Month. April, day:=1, hr:=0, mn:=0); Sample_Acsi Calendar Time:=TRUE; 6.4.4 Acsi Cell Initializes the data elements of the structure: ST_Acsi Cell. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) FUNCTION Acsi Cell : ST_Acsi Cell VAR_INPUT x Start : REAL; x End : REAL; y Start : REAL; y End : REAL; END_VAR Inputs Name Type Description x Start REAL Data element "x Start" to be set. x End REAL Data element "x End" to be set. y Start REAL Data element "y Start" to be set. y End REAL Data element "y End" to be set. Return value Name Type Description Acsi Cell ST_Acsi Cell [} 495] Structure with initialized data elements. 274 Version: 1.7.1 TF6510
## Page 275

PLC API Example METHOD FINAL Sample_Acsi Cell : BOOL VAR cell: ST_Acsi Cell; END_VAR cell:=Acsi Cell(x Start:=1.0, x End:=1.0, y Start:=1.0, y End:=1.0); Sample_Acsi Cell:=TRUE; 6.4.5 Acsi Log Optional Fields Initializes the data elements of the structure: ST_Acsi Log Optional Fields. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) FUNCTION Acsi Log Optional Fields : ST_Acsi Log Optional Fields VAR_INPUT Reason For Inclusion : BOOL; END_VAR Inputs Name Type Description Reason For Inclusion BOOL Data element "Reason For Inclusion" to be set. Return value Name Type Description Acsi Log Optional Fields ST_Acsi Log Optional Fields Structure with initialized data elements. [} 498] Example METHOD FINAL Sample_Acsi Log Optional Fields : BOOL VAR fields : ST_Acsi Log Optional Fields; END_VAR fields:=Acsi Log Optional Fields(Reason For Inclusion:=FALSE); Sample_Acsi Log Optional Fields:=TRUE; 6.4.6 Acsi Optional Fields Initializes the data elements of the structure: ST_Acsi Optional Fields. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) FUNCTION Acsi Optional Fields : ST_Acsi Optional Fields VAR_INPUT Sequence Number : BOOL; Report Time Stamp : BOOL; Reason For Inclusion : BOOL; Data Set Name : BOOL; Data Reference : BOOL; Buffer Overflow : BOOL; Entry ID : BOOL; Conf Revision : BOOL; Segmentation : BOOL; END_VAR TF6510 Version: 1.7.1 275
## Page 276

PLC API Inputs Name Type Description Sequence Number BOOL Data element "Sequence Number" to be set. Report Time Stamp BOOL Data element "Report Time Stamp" to be set. Reason For Inclusion BOOL Data element "Reason For Inclusion" to be set. Data Set Name BOOL Data element "Data Set Name" that is to be set. Data Reference BOOL Data element "Data Reference" to be set. Buffer Overflow BOOL Data element "Buffer Overflow" to be set. Entry ID BOOL Data element "Entry ID" to be set. Conf Revision BOOL Data element "Conf Revision" to be set. Segmentation BOOL Data element "Segmentation" to be set. Return value Name Type Description Acsi Optional Fields ST_Acsi Optional Fields Structure with initialized data elements. [} 498] Example METHOD FINAL Sample_Acsi Optional Fields : BOOL VAR fields : ST_Acsi Optional Fields; END_VAR fields:=Acsi Optional Fields(Sequence Number:=FALSE, Report Time Stamp:=FALSE, Reason For Inclusion:=FALSE, Data Set Name:=FALSE, Data Reference:=FALSE, Buffer Overflow:=FALSE, Entry ID:=FALSE, Conf Revision:=0, Segmentation:=FALSE); Sample_Acsi Optional Fields:=TRUE; 6.4.7 Acsi Originator Initializes the data elements of the structure: ST_Acsi Originator. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) FUNCTION Acsi Originator : ST_Acsi Originator VAR_INPUT or Cat : E_Acsi Or Category; or Ident : T_OCTET64; END_VAR Inputs Name Type Description or Cat E_Acsi Or Category Data element "or Cat" to be set. [} 458] or Ident T_OCTET64 [} 518] Data element "or Ident" to be set. Return value Name Type Description Acsi Originator ST_Acsi Originator [} 499] Structure with initialized data elements. 276 Version: 1.7.1 TF6510
## Page 277

PLC API Example METHOD FINAL Sample_Acsi Originator : BOOL VAR org: ST_Acsi Originator; or Ident : T_OCTET64:=[16#36,16#31, 16#38, 16#35, 16#30]; END_VAR org:=Acsi Originator(or Cat:=E_Acsi Or Category. Station Control, or Ident:=or Ident); Sample_Acsi Originator:=TRUE; 6.4.8 Acsi Phy Com Addr Initializes the data elements of the structure: ST_Acsi Phy Com Addr. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) FUNCTION Acsi Phy Com Addr : ST_Acsi Phy Com Addr VAR_INPUT Addr : T_OCTET6; PRIORITY : BYTE; VID : WORD; APPID : WORD; END_VAR Inputs Name Type Description Addr T_OCTET6 [} 518] Data element "Addr" to be set. PRIORITY BYTE Data element "PRIORITY" to be set. VID WORD Data element "VID" to be set. APPID WORD Data element "APPID" to be set. Return value Name Type Description Acsi Phy Com Addr ST_Acsi Phy Com Addr [} 499] Structure with initialized data elements. Example METHOD FINAL Sample_Acsi Phy Com Addr : BOOL VAR addr: ST_Acsi Phy Com Addr; END_VAR addr:=Acsi Phy Com Addr(Addr:=LWORD_TO_OCTET6(16#AC3040506001), PRIORITY:=4, VID:=16#0001, APPID:=16#00 01); Sample_Acsi Phy Com Addr:=TRUE; 6.4.9 Acsi Point Initializes the data elements of the structure: ST_Acsi Point. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) FUNCTION Acsi Point : ST_Acsi Point VAR_INPUT x Val : REAL; y Val : REAL; z Val : REAL; END_VAR TF6510 Version: 1.7.1 277
## Page 278

PLC API Inputs Name Type Description x Val REAL Data element "x Val" to be set. y Val REAL Data element "y Val" to be set. z Val REAL Data element "z Val" to be set. Return value Name Type Description Acsi Point ST_Acsi Point [} 500] Structure with initialized data elements. Example METHOD FINAL Sample_Acsi Point : BOOL VAR point: ST_Acsi Point; END_VAR point:=Acsi Point(x Val:=1.0, y Val:=1.0, z Val:=1.0); Sample_Acsi Point:=TRUE; 6.4.10 Acsi Pulse Config Initializes the data elements of the structure: ST_Acsi Pulse Config. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) FUNCTION Acsi Pulse Config : ST_Acsi Pulse Config VAR_INPUT cmd Qual : E_Acsi Cmd Qual; on Dur : DWORD; off Dur : DWORD; num Pls : DWORD; END_VAR Inputs Name Type Description cmd Qual E_Acsi Cmd Qual Data element "cmd Qual" to be set. [} 443] on Dur DWORD Data element "on Dur" to be set. off Dur DWORD Data element "off Dur" to be set. num Pls DWORD Data element "num Pls" to be set. Return value Name Type Description Acsi Pulse Config ST_Acsi Pulse Config [} 502] Structure with initialized data elements. Example METHOD FINAL Sample_Acsi Pulse Config : BOOL VAR config: ST_Acsi Pulse Config; END_VAR config:=Acsi Pulse Config(cmd Qual:=E_Acsi Cmd Qual. Pulse, on Dur:=10, off Dur:=10, num Pls:=1); Sample_Acsi Pulse Config:=TRUE; 278 Version: 1.7.1 TF6510
## Page 279

PLC API 6.4.11 Acsi Quality Initializes the data elements of the structure: ST_Acsi Quality. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) FUNCTION Acsi Quality : ST_Acsi Quality VAR_INPUT Validity0 : BOOL; Validity1 : BOOL; Overflow : BOOL; Out Of Range : BOOL; Bad Reference : BOOL; Oscillatory : BOOL; Failure : BOOL; Old Data : BOOL; Inconsistent : BOOL; Inaccurate : BOOL; Source : BOOL; Test : BOOL; Operator Blocked : BOOL; END_VAR Inputs Name Type Description Validity0 BOOL Data element "Validity0" to be set. Validity1 BOOL Data element "Validity1" to be set. Overflow BOOL Data element "Overflow" to be set. Out Of Range BOOL Data element "Out Of Range" to be set. Bad Reference BOOL Data element "Bad Reference" to be set. Oscillatory BOOL Data element "Oscillatory" to be set. Failure BOOL Data element "Failure" to be set. Old Data BOOL Data element "Old Data" to be set. Inconsistent BOOL Data element "Inconsistent" to be set. Inaccurate BOOL Data element "Inaccurate" to be set. Source BOOL Data element "Source" to be set. Test BOOL Data element "Test" to be set. Operator Blocked BOOL Data element "Operator Blocked" to be set. Return value Name Type Description Acsi Quality ST_Acsi Quality [} 503] Structure with initialized data elements. Example METHOD FINAL Sample_Acsi Quality : BOOL VAR q: ST_Acsi Quality; END_VAR q:=Acsi Quality(Validity0:=0, Validity1:=0, Overflow:=0, Out Of Range:=0, Bad Reference:=0, Oscillatory:=0, Failure:=0, Old Data:=0, Inconsistent:=0, Inaccurate:=0, Source:=0, Test:=0, Operator Blocked:=0); Sample_Acsi Quality:=TRUE; TF6510 Version: 1.7.1 279
## Page 280

PLC API 6.4.12 Acsi Quality_To_String Converts the components of the structured type ST_Acsi Quality [} 503] into a formatted Quality string. The resulting string has the following structure: 'Q#vv|ORBSFDCA|s|TB'. It corresponds to the Twin CAT Quality- String format specification [} 723]. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax FUNCTION Acsi Quality_To_String : STRING(18) VAR_INPUT in : ST_Acsi Quality; END_VAR Inputs Name Type Description in ST_Acsi Quality [} 503] The information to be converted as a Quality structure. Return value Name Type Description Acsi Quality_To_String STRING(18) Converted information as a Quality string. Sample METHOD Acsi Quality_To From_String : BOOL VAR_INPUT fb IED : REFERENCE TO FB_IED; END_VAR VAR q Value : ST_Acsi Quality; s Value : STRING; END_VAR IF NOT __ISVALIDREF(fb IED) THEN RETURN; END_IF q Value := String_To_Acsi Quality('Q#00|00000000|0|00'); s Value := Acsi Quality_To_String(q Value);(* s Value := 'Q#00|00000000|0|00' *) IF fb IED. Relay. LLN0. Beh.q.s Value <> Acsi Quality_To_String(q Value) THEN q Value := fb IED. Relay. LLN0. Beh.q.q Value; END_IF q Value := String_To_Acsi Quality('Q#01|00110011|0|01'); s Value := Acsi Quality_To_String(q Value);(* s Value := 'Q#01|00110011|0|01' *) IF fb IED. Relay. LLN0. Health.q.s Value <> Acsi Quality_To_String(q Value) THEN q Value := fb IED. Relay. LLN0. Health.q.q Value; END_IF q Value := String_To_Acsi Quality('Q#10|11001100|1|10'); s Value := Acsi Quality_To_String(q Value);(* s Value := 'Q#10|11001100|1|10' *) IF fb IED. Relay. LLN0. Mod_.q.s Value <> Acsi Quality_To_String(q Value) THEN q Value := fb IED. Relay. LLN0. Mod_.q.q Value; END_IF Acsi Quality_To From_String := TRUE; 6.4.13 Acsi Quality_To_WORD Converts the components of the structured type: ST_Acsi Quality [} 503] into binary data of the type WORD. The coding of the components in the WORD corresponds to the Twin CAT Quality-WORD format specification [} 724]. 280 Version: 1.7.1 TF6510
## Page 281

PLC API Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax FUNCTION Acsi Quality_To_Word : WORD(0..8191) VAR_INPUT in : ST_Acsi Quality; END_VAR Inputs Name Type Description in ST_Acsi Quality The information to be converted as a Quality structure. [} 503] Return value Name Type Description Acsi Quality_To_WORD WORD(0..8191) Converted information as Quality binary data. Sample METHOD Acsi Quality_To From_WORD : BOOL VAR_INPUT fb IED : REFERENCE TO FB_IED; END_VAR VAR q Value : ST_Acsi Quality; s Value : STRING; n Value : WORD; END_VAR IF NOT __ISVALIDREF(fb IED) THEN RETURN; END_IF q Value := WORD_To_Acsi Quality(0); s Value := Acsi Quality_To_String(q Value);(* s Value := 'Q#00|00000000|0|00' *) n Value := Acsi Quality_To_WORD(q Value);(* n Value := 2#00000000_00000000 *) IF fb IED. Relay. LLN0. Beh.q.n Value <> n Value THEN q Value := fb IED. Relay. LLN0. Beh.q.q Value; END_IF q Value := String_To_Acsi Quality('Q#01|00110011|0|01'); s Value := Acsi Quality_To_String(q Value);(* s Value := 'Q#01|00110011|0|01' *) n Value := Acsi Quality_To_Word(q Value);(* n Value := 2#00010011_00110010 *) IF fb IED. Relay. LLN0. Health.q.n Value <> n Value THEN q Value := fb IED. Relay. LLN0. Health.q.q Value; END_IF q Value := String_To_Acsi Quality('Q#10|11001100|1|10'); s Value := Acsi Quality_To_String(q Value);(* s Value := 'Q#10|11001100|1|10' *) n Value := Acsi Quality_To_Word(q Value);(* n Value := 2#00001100_11001101 *) IF fb IED. Relay. LLN0. Mod_.q.n Value <> n Value THEN q Value := fb IED. Relay. LLN0. Mod_.q.q Value; END_IF Acsi Quality_To From_WORD := TRUE; 6.4.14 Acsi Quality Source_To_Source Converts the Source-Bit component of the structured type: ST_Acsi Quality [} 503] into the enumeration type: E_Acsi Quality Source [} 463]. Only the Source-Bit component is converted. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) TF6510 Version: 1.7.1 281
## Page 282

PLC API Syntax FUNCTION Acsi Quality Source_To_Source : E_Acsi Quality Source VAR_INPUT in : ST_Acsi Quality; END_VAR Inputs Name Type Description in ST_Acsi Quality The information to be converted as a Quality-Source-Bit component. [} 503] Return value Name Type Description Acsi Quality Source_To_Source E_Acsi Quality Sourc Converted information as a Quality-Source enumeration type. e [} 463] Sample METHOD Acsi Quality Source_To From_Source : BOOL VAR_INPUT fb IED : REFERENCE TO FB_IED; END_VAR VAR q Value : ST_Acsi Quality; s Value : STRING; END_VAR IF NOT __ISVALIDREF(fb IED) THEN RETURN; END_IF Validity_To_Acsi Quality Validity(E_Acsi Quality Validity. Good, b Validity0=>q Value. Validity0, b Validity1 => q Value. Validity1 ); q Value. Overflow := FALSE; q Value. Out Of Range := FALSE; q Value. Bad Reference := FALSE; q Value. Oscillatory := FALSE; q Value. Failure := FALSE; q Value. Old Data := FALSE; q Value. Inconsistent := FALSE; q Value. Inaccurate := FALSE; q Value. Source := Source_To_Acsi Quality Source(E_Acsi Quality Source. Substituted); q Value. Test := TRUE; q Value. Operator Blocked := FALSE; s Value := Acsi Quality_To_String(q Value);(* s Value := 'Q#00|00000000|1|10' *) IF fb IED. Relay. LLN0. Beh.q.e Source <> Acsi Quality Source_To_Source(q Value) THEN q Value := fb IED. Relay. LLN0. Beh.q.q Value; END_IF Acsi Quality Source_To From_Source := TRUE; 6.4.15 Acsi Quality Validity_To_Validity Converts the Validity0 and Validity1 bit components of the structured type: ST_Acsi Quality [} 503] into the enumeration type: E_Acsi Quality Validity [} 464]. Only the Validity0 and Validity1 bit components are converted. See also: Coding of the Quality-Validity0..1-bits [} 723]. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) 282 Version: 1.7.1 TF6510
## Page 283

PLC API Syntax FUNCTION Acsi Quality Validity_To_Validity : E_Acsi Quality Validity VAR_INPUT in : ST_Acsi Quality; END_VAR Inputs Name Type Description in ST_Acsi Quality [} 503] The information to be converted as Quality-Validity bit components. Return value Name Type Description Acsi Quality Validity_T E_Acsi Quality Validity Converted information as Quality-Validity enumeration type. o_Validity [} 464] Sample METHOD Acsi Quality Validity_To From_Validity : BOOL VAR_INPUT fb IED : REFERENCE TO FB_IED; END_VAR VAR q Value : ST_Acsi Quality; s Value : STRING; END_VAR IF NOT __ISVALIDREF(fb IED) THEN RETURN; END_IF Validity_To_Acsi Quality Validity(E_Acsi Quality Validity. Good, b Validity0=>q Value. Validity0, b Validity1 =>q Value. Validity1); q Value. Overflow := FALSE; q Value. Out Of Range := FALSE; q Value. Bad Reference := FALSE; q Value. Oscillatory := FALSE; q Value. Failure := FALSE; q Value. Old Data := FALSE; q Value. Inconsistent := FALSE; q Value. Inaccurate := FALSE; q Value. Source := Source_To_Acsi Quality Source(E_Acsi Quality Source. Process); q Value. Test := FALSE; q Value. Operator Blocked := FALSE; s Value := Acsi Quality_To_String(q Value);(* s Value := 'Q#00|00000000|0|00' *) IF fb IED. Relay. LLN0. Beh.q.e Validity <> Acsi Quality Validity_To_Validity(q Value) THEN q Value := fb IED. Relay. LLN0. Beh.q.q Value; END_IF Acsi Quality Validity_To From_Validity := TRUE; 6.4.16 Acsi Range Config Initializes the data elements of the structure: ST_Acsi Range Config. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) FUNCTION Acsi Range Config : ST_Acsi Range Config VAR_INPUT hh Lim : ST_Acsi Analogue Value; h Lim : ST_Acsi Analogue Value; l Lim : ST_Acsi Analogue Value; ll Lim : ST_Acsi Analogue Value; min_ : ST_Acsi Analogue Value; TF6510 Version: 1.7.1 283
## Page 284

PLC API max_ : ST_Acsi Analogue Value; lim Db : DWORD; END_VAR Inputs Name Type Description hh Lim ST_Acsi Analogue Value [} 494] Data element "hh Lim" to be set. h Lim ST_Acsi Analogue Value [} 494] Data element "h Lim" to be set. l Lim ST_Acsi Analogue Value [} 494] Data element "l Lim" to be set. ll Lim ST_Acsi Analogue Value [} 494] Data element "ll Lim" to be set. min_ ST_Acsi Analogue Value [} 494] Data element "min_" to be set. max_ ST_Acsi Analogue Value [} 494] Data element "max_" to be set. lim Db DWORD Data element "lim Db" to be set. Return value Name Type Description Acsi Range Config ST_Acsi Range Config [} 504] Structure with initialized data elements. Example METHOD FINAL Sample_Acsi Range Config : BOOL VAR range: ST_Acsi Range Config; END_VAR range:=Acsi Range Config(hh Lim:=Acsi Analogue Value(0,0), h Lim:=Acsi Analogue Value(0,0), l Lim:=Acsi Analog ue Value(0,0), ll Lim:=Acsi Analogue Value(0,0), min_:=Acsi Analogue Value(0,0), max_:=Acsi Analogue Value(0 ,0), lim Db:=0); Sample_Acsi Range Config:=TRUE; 6.4.17 Acsi Reason Code Initializes the data elements of the structure: ST_Acsi Reason Code. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) FUNCTION Acsi Reason Code : ST_Acsi Reason Code VAR_INPUT Data Change : BOOL; Quality Change : BOOL; Data Update : BOOL; Integrity : BOOL; General Interrogation : BOOL; Application Trigger : BOOL; END_VAR Inputs Name Type Description Data Change BOOL Data element "Data Change" to be set. Quality Change BOOL Data element "Quality Change" to be set. Data Update BOOL Data element "Data Update" to be set. Integrity BOOL Data element "Integrity" to be set. General Interrogation BOOL Data element "General Interrogation" to be set. Application Trigger BOOL Data element "Application Trigger" that is to be set. 284 Version: 1.7.1 TF6510
## Page 285

PLC API Return value Name Type Description Acsi Reason Code ST_Acsi Reason Code [} 504] Structure with initialized data elements. Example METHOD FINAL Sample_Acsi Reason Code : BOOL VAR reason : ST_Acsi Reason Code; END_VAR reason:=Acsi Reason Code(Data Change:=TRUE, Quality Change:=TRUE, Data Update:=TRUE, Integrity:=FALSE, General Interrogation:=FALSE, Application Trigger:=FALSE); Sample_Acsi Reason Code:=TRUE; 6.4.18 Acsi Scaled Value Config Initializes the data elements of the structure: ST_Acsi Scaled Value Config. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) FUNCTION Acsi Scaled Value Config : ST_Acsi Scaled Value Config VAR_INPUT scale Factor : REAL; offset : REAL; END_VAR Inputs Name Type Description scale Factor REAL Data element "scale Factor" to be set. offset REAL Data element "offset" to be set. Return value Name Type Description Acsi Scaled Value Config ST_Acsi Scaled Value Config [} 505] Structure with initialized data elements. Example METHOD FINAL Sample_Acsi Scaled Value Config : BOOL VAR config: ST_Acsi Scaled Value Config; END_VAR config:=Acsi Scaled Value Config(scale Factor:=1.0, offset:=100); Sample_Acsi Scaled Value Config:=TRUE; 6.4.19 Acsi Sv Optional Fields Initializes the data elements of the structure: ST_Acsi Sv Optional Fields. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) FUNCTION Acsi Sv Optional Fields : ST_Acsi Sv Optional Fields VAR_INPUT Refresh Time : BOOL; Sample Synchronized : BOOL; Sample Rate : BOOL; Data Set Name : BOOL; Security : BOOL; TF6510 Version: 1.7.1 285
## Page 286

PLC API Sample Mode : BOOL; Synch Source Identity : BOOL; END_VAR Inputs Name Type Description Refresh Time BOOL Data element "Refresh Time" to be set. Sample Synchronized BOOL Data element "Sample Synchronized" to be set. Sample Rate BOOL Data element "Sample Rate" to be set. Data Set Name BOOL Data element "Data Set Name" that is to be set. Security BOOL Data element "Security" to be set. Sample Mode BOOL Data element "Sample Mode" to be set. Synch Source Identity BOOL Data element "Synch Source Identity" to be set. Return value Name Type Description Acsi Sv Optional Fields ST_Acsi Sv Optional Fields Structure with initialized data elements. [} 505] Example METHOD FINAL Sample_Acsi Sv Optional Fields : BOOL VAR fields : ST_Acsi Sv Optional Fields; END_VAR fields:=Acsi Sv Optional Fields(Refresh Time:=FALSE, Sample Synchronized:=FALSE, Sample Rate:=FALSE, Data Set Name:=TRUE, Security:=FALSE, Sample Mode:=FALSE, Synch Source Identity:=FALSE); Sample_Acsi Sv Optional Fields:=TRUE; 6.4.20 Acsi Trigger Conditions Initializes the data elements of the structure: ST_Acsi Trigger Conditions. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) FUNCTION Acsi Trigger Conditions : ST_Acsi Trigger Conditions VAR_INPUT Data Change : BOOL; Quality Change : BOOL; Data Update : BOOL; Integrity : BOOL; General Interrogation : BOOL; END_VAR Inputs Name Type Description Data Change BOOL Data element "Data Change" to be set. Quality Change BOOL Data element "Quality Change" to be set. Data Update BOOL Data element "Data Update" to be set. Integrity BOOL Data element "Integrity" to be set. General Interrogation BOOL Data element "General Interrogation" to be set. 286 Version: 1.7.1 TF6510
## Page 287

PLC API Return value Name Type Description Acsi Trigger Conditio ST_Acsi Trigger Conditions [} 506] Structure with initialized data elements. ns Example METHOD FINAL Sample_Acsi Trigger Conditions : BOOL VAR trigger : ST_Acsi Trigger Conditions; END_VAR trigger:=Acsi Trigger Conditions(Data Change:=TRUE, Quality Change:=TRUE, Data Update:=TRUE, Integrity:=F ALSE, General Interrogation:=FALSE); Sample_Acsi Trigger Conditions:=TRUE; 6.4.21 Acsi Unit Initializes the data elements of the structure: ST_Acsi Unit. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) FUNCTION Acsi Unit : ST_Acsi Unit VAR_INPUT SIUnit : E_Acsi SIUnit; multiplier : E_Acsi Multiplier; END_VAR Inputs Name Type Description SIUnit E_Acsi SIUnit [} 471] Data element "SIUnit" to be set. multiplier E_Acsi Multiplier Data element "multiplier" to be set. [} 455] Return value Name Type Description Acsi Unit ST_Acsi Unit [} 507] Structure with initialized data elements. Example METHOD FINAL Sample_Acsi Unit : BOOL VAR unit: ST_Acsi Unit; END_VAR unit:=Acsi Unit(SIUnit:=E_Acsi SIUnit. Ampere, multiplier:=E_Acsi Multiplier. Milli); Sample_Acsi Unit:=TRUE; 6.4.22 Acsi Val With Trans Initializes the data elements of the structure: ST_Acsi Val With Trans. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) FUNCTION Acsi Val With Trans : ST_Acsi Val With Trans VAR_INPUT pos Val : SINT; trans Ind : BOOL; END_VAR TF6510 Version: 1.7.1 287
## Page 288

PLC API Inputs Name Type Description pos Val SINT Data element "pos Val" to be set. trans Ind BOOL Data element "trans Ind" to be set. Return value Name Type Description Acsi Val With Trans ST_Acsi Val With Trans [} 507] Structure with initialized data elements. Example METHOD FINAL Sample_Acsi Val With Trans : BOOL VAR val T : ST_Acsi Val With Trans; END_VAR val T:=Acsi Val With Trans(pos Val:=1, trans Ind:=FALSE); Sample_Acsi Val With Trans:=TRUE; 6.4.23 Acsi Vector Initializes the data elements of the structure: ST_Acsi Vector. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) FUNCTION Acsi Vector : ST_Acsi Vector VAR_INPUT mag : ST_Acsi Analogue Value; ang : ST_Acsi Analogue Value; END_VAR Inputs Name Type Description mag ST_Acsi Analogue Value [} 494] Data element "mag" to be set. ang ST_Acsi Analogue Value [} 494] Data element "ang" to be set. Return value Name Type Description Acsi Vector ST_Acsi Vector [} 507] Structure with initialized data elements. Example METHOD FINAL Sample_Acsi Vector : BOOL VAR vector : ST_Acsi Vector; END_VAR vector:=Acsi Vector(mag:=Acsi Analogue Value(0, 0), ang:=Acsi Analogue Value(0, 0)); Sample_Acsi Vector:=TRUE; 6.4.24 Any Buffer_To_Octet String Converts and copies the data of any variable into the octet string or one-dimensional byte array. Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) 288 Version: 1.7.1 TF6510
## Page 289

PLC API FUNCTION Any Buffer_To_Octet String : UDINT VAR_IN_OUT target : ARRAY[*] OF BYTE; END_VAR VAR_INPUT p Source : PVOID; cb Source : UDINT; b Swap Bytes : BOOL; END_VAR VAR_OUTPUT b Underflow : BOOL; b Overflow : BOOL; END_VAR / Inputs/Outputs Name Type Description target ARRAY[*] OF BYTE Target variable. Inputs Name Type Description p Source PVOID Address pointer of the source variable. cb Source UDINT Byte size of the source variable. b Swap Bytes BOOL With TRUE the data bytes are exchanged. Outputs Name Type Description b Underflow BOOL If TRUE then the source variable is smaller than the target variable. b Overflow BOOL If TRUE then the source variable is greater than the target variable. Return value Name Type Description Any Buffer_To_Octet String UDINT Number of successfully copied data bytes. Example METHOD FINAL Sample_Any Buffer_To_Octet String : BOOL VAR s Value : STRING:='0123456789'; ui64 : LWORD:=16#3031323334353637; ui32 : UDINT:=16#30313233; o6 : T_OCTET6; o8 : T_OCTET8; o64 : T_OCTET64; size : UDINT; b Overflow : BOOL; b Underflow : BOOL; END_VAR size:=Any Buffer_To_Octet String(target:=o6, p Source:=ADR(s Value), cb Source:=SIZEOF(s Value), b Swap Byte s:=FALSE, b Underflow=>b Underflow, b Overflow=>b Overflow);(* size:=6 *) size:=Any Buffer_To_Octet String(target:=o8, p Source:=ADR(ui64), cb Source:=SIZEOF(ui64), b Swap Bytes:=T RUE, b Underflow=>b Underflow, b Overflow=>b Overflow);(* size:=8 *) size:=Any Buffer_To_Octet String(target:=o64, p Source:=ADR(ui32), cb Source:=SIZEOF(ui32), b Swap Bytes:= TRUE, b Underflow=>b Underflow, b Overflow=>b Overflow);(* size:=4 *) Sample_Any Buffer_To_Octet String:=TRUE; TF6510 Version: 1.7.1 289
## Page 290

PLC API 6.4.25 Binary Time Initializes the data elements of the structure: T_Binary Time. Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) FUNCTION Binary Time : T_Binary Time VAR_INPUT time Of Day : TOD; day : WORD; END_VAR Inputs Name Type Description time Of Day TOD Number of milliseconds since midnight of the current day. day WORD Number of days since January 1, 1984. Return value Name Type Description Binary Time T_Binary Time [} 516] Structure with initialized data elements. Example METHOD FINAL Sample_Binary Time : BOOL VAR t: T_Binary Time; END_VAR t:=Binary Time(time Of Day:=TOD#12:00:00.000, day:=DATE_To_Binary Time6Day(in:=D#2023-01-01)); Sample_Binary Time:=(t.time Of Day = TOD#12:00:00.000) AND (t.day = 14245); 6.4.26 Binary Time_To_System Time Converts the time information of type T_Binary Time [} 516] (binary time format) to the time information of type TIMESTRUCT [} 493] (system time format). In case of conversion error the output variable "b Overflow" has the value "TRUE" and the returned system time value has the date:1970-01-01 and the time: 0h0m0s0ms. Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) Syntax FUNCTION Binary Time_To_System Time : TIMESTRUCT VAR_INPUT in : T_Binary Time; END_VAR VAR_OUTPUT b Overflow : BOOL; END_VAR Inputs Name Type Description in T_Binary Time [} 516] The time information to be converted as a Binary- Time structure. 290 Version: 1.7.1 TF6510
## Page 291

PLC API Outputs Name Type Description b Overflow BOOL Date overflow if "TRUE". In this case, the binary time to be converted has a date (T_Binary Time [} 516].day member) greater than 2106-02-07. Return value Name Type Description Binary Time_To_System Time TIMESTRUCT [} 493] Converted time information as a System-Time structure. Sample PROGRAM MAIN VAR t System : TIMESTRUCT; t Binary : T_Binary Time; b Overflow : BOOL; END_VAR t System.w Year:=2022; t System.w Month:=9; t System.w Day:=16; t System.w Hour:=12; t System.w Minute:=52; t System.w Second:=4; t System.w Milliseconds:=500; t Binary:=System Time_To_Binary Time(in:=t System, b Overflow=>b Overflow); (* Returns t Binary.time Of Day = TOD#12:52:04.500 and t Binary.day = 14138 *) t Binary.day:=1; t Binary.time Of Day:=TOD#01:30:15.500; t System:=Binary Time_To_System Time(in:=t Binary, b Overflow=>b Overflow);(* Returns system- time date: 1984-01-02 and time: 01h30m15s500ms*) 6.4.27 Binary Time6_To_LWORD Converts the components of the structured type T_Binary Time [} 516] into binary data of the type LWORD. The coding of the components in LWORD corresponds to the Twin CAT Binary-Time LWORD format specification [} 717]. Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) Syntax FUNCTION Binary Time6_To_LWORD : LWORD(0.. 16#FFFFFFFFFFFF); VAR_INPUT in : T_Binary Time; END_VAR VAR_OUTPUT b Error : BOOL; END_VAR Inputs Name Type Description in T_Binary Time [} 516] The time information to be converted as a Binary-Time structure. TF6510 Version: 1.7.1 291
## Page 292

PLC API Outputs Name Type Description b Error BOOL The output is "TRUE" if the value of the in.time Of Day component is greater than "TOD#23:59:59,999". In this case the function returns the value "0". Return value Name Type Description Binary Time_To_LWORD LWORD(0..16#FFFFFFFFFFFF); Converted time information as Binary-Time binary data. Sample METHOD Binary Time6_To From_LWORD : BOOL VAR_INPUT fb IED : REFERENCE TO FB_IED; END_VAR VAR t Value : T_Binary Time; s Value : STRING; END_VAR IF NOT __ISVALIDREF(fb IED) THEN RETURN; END_IF t Value := LWORD_To_Binary Time6(0); s Value := Binary Time6_To_String(t Value);(* s Value := 'BT#1984-01-01-00:00:00' *) IF fb IED. Relay. LLN0.brcb1. Time Of Entry.n Value <> Binary Time6_To_LWORD(t Value) THEN t Value := fb IED. Relay. LLN0.brcb1. Time Of Entry.t Value; END_IF t Value := LWORD_To_Binary Time6(1); s Value := Binary Time6_To_String(t Value);(* s Value := 'BT#1984-01-01-00:00:00.001'*) IF fb IED. Relay. LLN0.brcb2. Time Of Entry.n Value <> Binary Time6_To_LWORD(t Value) THEN t Value := fb IED. Relay. LLN0.brcb2. Time Of Entry.t Value; END_IF t Value := String_To_Binary Time6('BT#2017-03-21-11:22:33.44'); s Value := Binary Time6_To_String(t Value);(* s Value := 'BT#2017-03-21-11:22:33.440'*) IF fb IED. Relay. LLN0.brcb3. Time Of Entry.n Value <> Binary Time6_To_LWORD(t Value) THEN t Value := fb IED. Relay. LLN0.brcb3. Time Of Entry.t Value; END_IF Binary Time6_To From_LWORD := TRUE; 6.4.28 Binary Time6_To_String Converts the components of the structured type T_Binary Time [} 516] into a formatted Binary-Time string. The resulting string has the following structure: ‘BT#[YYYY-MM-DD-]hh:mm:ss[.nnn]‘. It corresponds to the Twin CAT Binary-Time string format specification [} 717]. Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) Syntax FUNCTION Binary Time6_To_String : STRING(26) VAR_INPUT in : T_Binary Time; END_VAR VAR_OUTPUT b Error : BOOL; END_VAR 292 Version: 1.7.1 TF6510
## Page 293

PLC API Inputs Name Type Description in T_Binary Time [} 516] The time information to be converted as a Binary-Time structure. Outputs Name Type Description b Error BOOL The output is "TRUE" if the value of the in.day component is greater than "16#AE35" (this corresponds to February 7, 2106). In this case the function returns an empty string. Return value Name Type Description Binary Time6_To_String STRING(26) Converted time information as a Binary-Time string. Sample METHOD Binary Time6_To From_String : BOOL VAR_INPUT fb IED : REFERENCE TO FB_IED; END_VAR VAR t Value : T_Binary Time; s Value : STRING; END_VAR IF NOT __ISVALIDREF(fb IED) THEN RETURN; END_IF t Value := String_To_Binary Time6('BT#01:02:03'); s Value := Binary Time6_To_String(t Value); (* s Value := 'BT#1984-01-01-01:02:03' *) IF fb IED. Relay. LLN0.brcb1. Time Of Entry.s Value <> s Value THEN t Value := fb IED. Relay. LLN0.brcb1. Time Of Entry.t Value; END_IF t Value := String_To_Binary Time6('BT#04:05:06.7'); s Value := Binary Time6_To_String(t Value);(* s Value := 'BT#1984-01-01-04:05:06.700' *) IF fb IED. Relay. LLN0.brcb2. Time Of Entry.s Value <> s Value THEN t Value := fb IED. Relay. LLN0.brcb2. Time Of Entry.t Value; END_IF t Value := String_To_Binary Time6('BT#2017-01-18-11:12:13'); s Value := Binary Time6_To_String(t Value);(* s Value := 'BT#2017-01-18-11:12:13' *) IF fb IED. Relay. LLN0.brcb3. Time Of Entry.s Value <> s Value THEN t Value := fb IED. Relay. LLN0.brcb3. Time Of Entry.t Value; END_IF Binary Time6_To From_String := TRUE; 6.4.29 Binary Time6Day_To_Date Converts the number of days since January 1, 1984 from type WORD to a date of type DATE. The function returns the max. representable DATE value "D#2106-02-07" if the day to be converted is greater than the value "16#AE35". Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) Syntax FUNCTION Binary Time6Day_To_Date : DATE VAR_INPUT in : WORD(0..16#AE35); END_VAR TF6510 Version: 1.7.1 293
## Page 294

PLC API VAR_OUTPUT b Error : BOOL; END_VAR Inputs Name Type Description in WORD(0..16#AE35) The number of days since January 1, 1984 to be converted. This value corresponds to the value of the T_Binary Time [} 516].day component. Outputs Name Type Description b Error BOOL The output is "TRUE" if the input value is greater than "16#AE35" (February 7, 2106). In this case the function returns the value "D#1970-01-01". Return value Name Type Description Binary Time6Day_To_Date DATE Date in the DATE format. Sample METHOD FINAL Binary Time6Day_To From_Date : BOOL VAR t Value : T_Binary Time; d : DATE; s Value : STRING; END_VAR t Value.time Of Day:=TOD#00:00:00.125; t Value.day:=Date_To_Binary Time6Day(D#1984-01-01);(* t Value.day:=16#0000 *) s Value:=Binary Time6_To_String(t Value);(* s Value:='BT#1984-01-01-00:00:00.125' *) d:=Binary Time6Day_To_Date(t Value.day);(* d:=D#1984-01-01 *) t Value.time Of Day:=TOD#01:02:03.125; t Value.day:=Date_To_Binary Time6Day(D#1984-01-02);(* t Value.day:=16#0001 *) s Value:=Binary Time6_To_String(t Value);(* s Value:='BT#1984-01-02-01:02:03.125' *) d:=Binary Time6Day_To_Date(t Value.day);(* d:=D#1984-01-02 *) t Value.time Of Day:=TOD#04:05:06.125; t Value.day:=Date_To_Binary Time6Day(D#2018-03-21);(* t Value.day:=16#30D2 *) s Value:=Binary Time6_To_String(t Value);(* s Value:='BT#2018-03-21-04:05:06.125' *) d:=Binary Time6Day_To_Date(t Value.day);(* d:=D#2018-03-21 *) t Value.time Of Day:=TOD#07:08:09; t Value.day:=t Value.day + 7;(* add 7 days *) s Value:=Binary Time6_To_String(t Value);(* s Value:='BT#2018-03-28-07:08:09' *) d:=Binary Time6Day_To_Date(t Value.day);(* d:=D#2018-03-28 *) Binary Time6Day_To From_Date:=TRUE; 6.4.30 BYTE_To_Utc Time Quality Converts the binary data of the type BYTE into the components of the structured type T_Utc Time Quality [} 520]. The coding of the components in BYTE corresponds to the Twin CAT UTC-Time-Quality-BYTE format specification [} 720]. Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) 294 Version: 1.7.1 TF6510
## Page 295

PLC API Syntax FUNCTION BYTE_To_Utc Time Quality : T_Utc Time Quality VAR_INPUT in : BYTE; END_VAR Inputs Name Type Description in BYTE The information to be converted as UTC-Time-Quality binary data. Return value Name Type Description BYTE_To_Utc Time Quality T_Utc Time Quality Converted information as UTC-Time-Quality structure. [} 520] Sample METHOD Utc Time Quality_To From_Byte : BOOL VAR_INPUT fb IED : REFERENCE TO FB_IED; END_VAR VAR Quality : T_Utc Time Quality; s Quality : STRING; u8 : BYTE; END_VAR IF NOT __ISVALIDREF(fb IED) THEN RETURN; END_IF Quality := Byte_To_Utc Time Quality(0); u8 := Utc Time Quality_To_Byte(Quality);(* u8 := 2#00000000 => 0 bits accuracy *) s Quality := Utc Time Quality_To_String(Quality);(* s Quality := 'UQ#000|00' *) IF Utc Time Quality_To_Byte(fb IED. Relay. LLN0. Beh.t. Quality) <> u8 THEN Quality := fb IED. Relay. LLN0. Beh.t. Quality; END_IF Quality := String_To_Utc Time Quality('UQ#000|03'); u8 := Utc Time Quality_To_Byte(Quality);(* u8 := 2#11000000 => 3 bits accuracy *) s Quality := Utc Time Quality_To_String(Quality);(* s Quality := 'UQ#000|03' *) IF Utc Time Quality_To_Byte(fb IED. Relay. LLN0. Health.t. Quality) <> u8 THEN Quality := fb IED. Relay. LLN0. Health.t. Quality; END_IF Quality := String_To_Utc Time Quality('UQ#001|05'); u8 := Utc Time Quality_To_Byte(Quality); (* u8 := 2#10100100 => 5 bits accuracy, Clock Not Synchronized := 1 *) s Quality := Utc Time Quality_To_String(Quality);(* s Quality := 'UQ#001|05' *) IF Utc Time Quality_To_Byte(fb IED. Relay. LLN0. Mod_.t. Quality) <> u8 THEN Quality := fb IED. Relay. LLN0. Mod_.t. Quality; END_IF Quality := String_To_Utc Time Quality('UQ#000|31'); u8 := Utc Time Quality_To_Byte(Quality);(* u8 := 2#11111000 => unspecified accuracy *) s Quality := Utc Time Quality_To_String(Quality);(* s Quality := 'UQ#000|31' *) IF Utc Time Quality_To_Byte(fb IED. Relay. MMXU1.ph V.phs A.t. Quality) <> u8 THEN Quality := fb IED. Relay. MMXU1.ph V.phs A.t. Quality; END_IF Utc Time Quality_To From_Byte := TRUE; 6.4.31 Clts Every Bool This function checks whether all elements of a boolean array have the same value as the b Test function input parameter. TF6510 Version: 1.7.1 295
## Page 296

PLC API Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) Syntax FUNCTION Clts Every Bool : BOOL VAR_INPUT b Test: BOOL; END_VAR VAR_IN_OUT in: ARRAY[*] OF BOOL; END_VAR VAR_OUTPUT index: DINT; END_VAR Inputs Name Type Description b Test BOOL Test value that is compared with all array elements. Inputs/outputs Name Type Description in ARRAY[*] OF BOOL The boolean array variable to check. Outputs Name Type Description index DINT Index number of the first array element whose value is not equal to the b Test input parameter. This value is 0 if the function return parameter is "TRUE". Return value Name Type Description Clts Every Bool BOOL "TRUE" if all array elements have the same value as the b Test function input parameter. "FALSE" if at least one array element has an unequal value like the b Test function input parameter. Sample PROGRAM MAIN VAR a: ARRAY[1..5] OF BOOL; index: DINT; b Result: BOOL; END_VAR a[1]:=FALSE; a[2]:=FALSE; a[3]:=TRUE; a[4]:=FALSE; a[5]:=TRUE; b Result:=Clts Every Bool(b Test:=TRUE, in:=a, index=>index);(* return value is FALSE, index = 1 *) b Result:=Clts Every Bool(b Test:=FALSE, in:=a, index=>index);(* return value is FALSE, index = 3 *) a[1]:=TRUE; a[2]:=TRUE; a[4]:=TRUE; b Result:=Clts Every Bool(b Test:=TRUE, in:=a, index=>index);(* return value is TRUE, index = 0 *) 296 Version: 1.7.1 TF6510
## Page 297

PLC API 6.4.32 Clts Some Bool This function checks whether at least one array element of a boolean array has the same value as the b Test function input parameter. Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) Syntax FUNCTION Clts Some Bool : BOOL VAR_INPUT b Test: BOOL; END_VAR VAR_IN_OUT in: ARRAY[*] OF BOOL; END_VAR VAR_OUTPUT index: DINT; END_VAR Inputs Name Type Description b Test BOOL Test value that is compared with all array elements. Inputs/outputs Name Type Description in ARRAY[*] OF BOOL The boolean array variable to check. Outputs Name Type Description index DINT Index of the first array element whose value is equal to the b Test function input parameter. This value is 0 if the function return value is "FALSE". Return value Name Type Description Clts Some Bool BOOL "TRUE" if at least one array element has the same value as the b Test function input parameter. "FALSE" if none of the array elements has the same value as the b Test function input parameter. Sample PROGRAM MAIN VAR a: ARRAY[1..5] OF BOOL; index: DINT; b Result: BOOL; END_VAR a[1]:=FALSE; a[2]:=FALSE; a[3]:=FALSE; a[4]:=FALSE; a[5]:=FALSE; b Result:=Clts Some Bool(b Test:=TRUE, in:=a, index=>index);(* return value is FALSE, index = 0 *) a[1]:=FALSE; a[2]:=FALSE; a[3]:=TRUE; a[4]:=FALSE; TF6510 Version: 1.7.1 297
## Page 298

PLC API a[5]:=TRUE; b Result:=Clts Some Bool(b Test:=TRUE, in:=a, index=>index);(* return value is TRUE, index = 3 *) b Result:=Clts Some Bool(b Test:=FALSE, in:=a, index=>index);(* return value is TRUE, index = 1 *) 6.4.33 DATE_and_TOD_To_DT Combines the date of type DATE and the time of type TIME_OF_DAY (TOD) to the time information of type DATE_AND_TIME (DT). Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) Syntax FUNCTION DATE_and_TOD_To_DT : DT VAR_INPUT d : DATE; t : TOD; END_VAR VAR_OUTPUT w Milliseconds : WORD; END_VAR Inputs Name Type Description d DATE Date. t TOD Time. Outputs Name Type Description w Milliseconds WORD Millisecond rest of the TOD time which could not be converted to the DATE_AND_TIME type. The DATE_AND_TIME type has the max. resolution of one second. Return value Name Type Description DATE_and_TOD_To_DT DT Combined time information of type DATE_AND_TIME. Sample PROGRAM MAIN VAR d : DATE:= D#2022-09-15; t : TOD:=TOD#17:24:56.789; date And Time : DT; w Milliseconds : WORD; END_VAR d:=D#2022-09-15; t:=TOD#17:24:56.789; date And Time:=DATE_and_TOD_To_DT(d:=d, t:=t, w Milliseconds=>w Milliseconds); (* Result is: DT#2022-09-15-17:24:56, w Milliseconds = 789 *) d:=D#2022-08-16; t:=TOD#10:00:00.000; date And Time:=DATE_and_TOD_To_DT(d:=d, t:=t, w Milliseconds=>w Milliseconds); (* Result is: DT#2022-08-16-10:00:00, w Milliseconds = 0 *) 298 Version: 1.7.1 TF6510
## Page 299

PLC API 6.4.34 Date_To_Binary Time6Day Converts a date of type: DATE to the number of days since January 1, 1984 of type WORD. The function returns the value "0" if the date to be converted is before January 1, 1984. Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) Syntax FUNCTION Date_To_Binary Time6Day : WORD(0..16#AE35) VAR_INPUT in : DATE := D#1984-01-01; END_VAR VAR_OUTPUT b Error : BOOL; END_VAR Inputs Name Type Description in DATE The date to be converted. Outputs Name Type Description b Error BOOL The output is "TRUE" if the input value is smaller than "D#1984-01-01". In this case the function returns the value "0". Return value Name Type Description Date_To_Binary Time6Day WORD Converted number of days since January 1, 1984. This value corresponds to the value of the T_Binary Time [} 516].day component. Sample METHOD FINAL Binary Time6Day_To From_Date : BOOL VAR t Value : T_Binary Time; d : DATE; s Value : STRING; END_VAR t Value.time Of Day:=TOD#00:00:00.125; t Value.day:=Date_To_Binary Time6Day(D#1984-01-01);(* t Value.day:=16#0000 *) s Value:=Binary Time6_To_String(t Value);(* s Value:='BT#1984-01-01-00:00:00.125' *) d:=Binary Time6Day_To_Date(t Value.day);(* d:=D#1984-01-01 *) t Value.time Of Day:=TOD#01:02:03.125; t Value.day:=Date_To_Binary Time6Day(D#1984-01-02);(* t Value.day:=16#0001 *) s Value:=Binary Time6_To_String(t Value);(* s Value:='BT#1984-01-02-01:02:03.125' *) d:=Binary Time6Day_To_Date(t Value.day);(* d:=D#1984-01-02 *) t Value.time Of Day:=TOD#04:05:06.125; t Value.day:=Date_To_Binary Time6Day(D#2018-03-21);(* t Value.day:=16#30D2 *) s Value:=Binary Time6_To_String(t Value);(* s Value:='BT#2018-03-21-04:05:06.125' *) d:=Binary Time6Day_To_Date(t Value.day);(* d:=D#2018-03-21 *) t Value.time Of Day:=TOD#07:08:09; t Value.day:=t Value.day + 7;(* add 7 days *) s Value:=Binary Time6_To_String(t Value);(* s Value:='BT#2018-03-28-07:08:09' *) d:=Binary Time6Day_To_Date(t Value.day);(* d:=D#2018-03-28 *) Binary Time6Day_To From_Date:=TRUE; TF6510 Version: 1.7.1 299
## Page 300

PLC API 6.4.35 Fill Octet String Overwrites all octets of an octet string with a given value. Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) FUNCTION Fill Octet String : UDINT VAR_IN_OUT o : ARRAY[*] OF BYTE; END_VAR VAR_INPUT fill Octet : BYTE; END_VAR / Inputs/Outputs Name Type Description o ARRAY[*] OF BYTE Octet string to be overwritten. Inputs Name Type Description fill Octet BYTE Value with which the octets are to be overwritten. Return value Name Type Description Fill Octet String UDINT Number of octets overwritten. Example METHOD FINAL Sample_Fill Octet String : BOOL VAR o6 : T_OCTET6:=[6(0)]; o8 : T_OCTET8:=[8(0)]; o64 : T_OCTET64:=[64(0)]; size: UDINT; END_VAR size:=Fill Octet String(o:=o6, fill Octet:=16#FF);(* size:=6, all octets: 16#FF *) size:=Fill Octet String(o:=o8, fill Octet:=16#BB);(* size:=8, all octets: 16#BB *) size:=Fill Octet String(o:=o64, fill Octet:=16#CC);(* size:=64, all octets: 16#CC *) Sample_Fill Octet String:=TRUE; 6.4.36 INT24 Initializes a signed 24-bit number of the type: T_INT24. Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) FUNCTION INT24 : T_INT24 VAR_INPUT Hi : BYTE; Mi : BYTE; Lo : BYTE; END_VAR 300 Version: 1.7.1 TF6510
## Page 301

PLC API Inputs Name Type Description Hi BYTE Top 8 bits to be set. Mi BYTE Middle 8 bits to be set. Lo BYTE Lowest 8 bits to be set. Return value Name Type Description INT24 T_INT24 [} 516] 24-bit number. Example METHOD FINAL Sample_INT24 : BOOL VAR i Value: T_INT24; END_VAR i Value:=INT24(16#AB, 16#CD, 16#EF);(* i Value:=16#ABCDEF *) Sample_INT24:=TRUE; 6.4.37 INT128 Initializes a signed 128-bit number of the type: T_INT128. Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) FUNCTION INT128 : T_INT128 VAR_INPUT Hi : LWORD; Lo : LWORD; END_VAR Inputs Name Type Description Hi LWORD Upper 64 bits to be set. Lo LWORD Lower 64 bits to be set. Return value Name Type Description INT128 T_INT128 [} 517] 128-bit number. Example METHOD FINAL Sample_INT128 : BOOL VAR i Value: T_INT128; END_VAR i Value:=INT128(16#0000000000ABCDEF, 16#1234567890000001); (* i Value:=16#0000000000ABCDEF_1234567890000001 *) Sample_INT128:=TRUE; TF6510 Version: 1.7.1 301
## Page 302

PLC API 6.4.38 LTIME_To_Utc Time Fraction Of Second Converts the fraction of a second of the type LTIME into the type T_UINT24 [} 519]. The converted value corresponds to the value of the T_Utc Time [} 519].fraction Of Second component. The LTIME value is coded in 24 bits in a special way. See: Coding of the UTC-Time.fraction Of Second0..23-bits [} 718]. The input value must be <= LTIME#999ms999us9999ns. The maximum resolution for the conversion is approx. 60 ns. Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) Syntax FUNCTION LTIME_To_Utc Time Fraction Of Second : T_UINT24 VAR_INPUT in : LTIME; END_VAR VAR_OUTPUT b Overflow : BOOL; seconds Over : LWORD; nanosec : LWORD; attosec : LWORD; END_VAR Inputs Name Type Description in LTIME The fraction of a second to be converted. Outputs Name Type Description b Overflow BOOL Additional output parameter, which provides information about the input value overflow. This value is "TRUE" if the input value is >= LTIME#1s, otherwise it is "FALSE". seconds Over LWORD Additional output parameter that returns the number of overflow seconds. nanosec LWORD Additional output parameter that returns the input value in nanoseconds. attosec LWORD Additional output parameter that returns the input value in attoseconds. Return value Name Type Description LTIME_To_Utc Time Fraction Of Se T_UINT24 Converted fraction of a second as binary data. cond [} 519] Sample METHOD Utc Time Fraction Of Second_To From_LTIME : BOOL VAR t Value : T_Utc Time; s Value : STRING; t Fos : LTIME; nanosec : LWORD; END_VAR t Value.quality := String_To_Utc Time Quality('UQ#000|24'); t Value.second Since Epoch := DT#2018-03-28-12:13:14; t Value.fraction Of Second := LTIME_To_Utc Time Fraction Of Second(LTIME#0NS); (* t Value.fraction Of Second := [16#00, 16#00, 16#00], 0 significant bits *) s Value := Utc Time_To_String(t Value);(* s Value := 'UT#2018-03-28-12:13:14.000000000|000|24' *) 302 Version: 1.7.1 TF6510
## Page 303

PLC API t Fos := Utc Time Fraction Of Second_To_LTIME(t Value.fraction Of Second, nanosec=>nanosec); (* t Fos := LTIME#0ns, nanosec := 0 *) t Value.fraction Of Second := LTIME_To_Utc Time Fraction Of Second(LTIME#750MS); (* t Value.fraction Of Second := [16#03, 16#00, 16#00], 3 significant bits *) s Value := Utc Time_To_String(t Value);(* s Value := 'UT#2018-03-28-12:13:14.750000000|000|24' *) t Fos := Utc Time Fraction Of Second_To_LTIME(t Value.fraction Of Second, nanosec=>nanosec); (* t Fos := LTIME#750ms, nanosec := 750000000 *) t Value.fraction Of Second := LTIME_To_Utc Time Fraction Of Second(LTIME#968MS750US); (* t Value.fraction Of Second := [16#1F, 16#00, 16#00], 5 significant bits *) s Value := Utc Time_To_String(t Value);(* s Value := 'UT#2018-03-28-12:13:14.968750000|000|24' *) t Fos := Utc Time Fraction Of Second_To_LTIME(t Value.fraction Of Second, nanosec=>nanosec); (* t Fos := LTIME#968ms750us, nanosec := 968750000 *) t Value.fraction Of Second := LTIME_To_Utc Time Fraction Of Second(LTIME#998MS46US875NS); (* t Value.fraction Of Second := [16#FF, 16#01, 16#00], 9 significant bits *) s Value := Utc Time_To_String(t Value);(* s Value := 'UT#2018-03-28-12:13:14.998046875|000|24' *) t Fos := Utc Time Fraction Of Second_To_LTIME(t Value.fraction Of Second, nanosec=>nanosec); (* t Fos := LTIME#998ms46us875ns, nanosec := 998046875 *) t Value.fraction Of Second := LTIME_To_Utc Time Fraction Of Second(LTIME#999MS999US999NS); (* t Value.fraction Of Second := [16#FF, 16#FF, 16#FF], 24 significant bits *) s Value := Utc Time_To_String(t Value);(* s Value := 'UT#2018-03-28-12:13:14.999999940|000|24' *) t Fos := Utc Time Fraction Of Second_To_LTIME(t Value.fraction Of Second, nanosec=>nanosec); (* t Fos := LTIME#999ms999us940ns, nanosec := 999999940 *) Utc Time Fraction Of Second_To From_LTIME := TRUE; 6.4.39 LWORD_To_Binary Time6 Converts the binary data of the type LWORD into the components of the structured type T_Binary Time [} 516]. The coding of the components in LWORD corresponds to the Twin CAT Binary-Time LWORD format specification [} 717]. Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) Syntax FUNCTION LWORD_To_Binary Time6 : T_Binary Time VAR_INPUT in : LWORD(0..16#FFFFFFFFFFFF); END_VAR VAR_OUTPUT b Error : BOOL; END_VAR Inputs Name Type Description in LWORD(0..16#FFFFFFFFFFFF) The time information to be converted as Binary-Time binary data. Outputs Name Type Description b Error BOOL The output is "TRUE" if the value of bits 0..31 (time Of Day component) is greater than "TOD#23:59:59.999". In this case the function returns the value "STRUCT(time Of Day := TOD#00:00:00, day := 0)". Return value Name Type Description LWORD_To_Binary Time6 T_Binary Time [} 516] Converted time information as Binary-Time structure. TF6510 Version: 1.7.1 303
## Page 304

PLC API Sample METHOD Binary Time6_To From_LWORD : BOOL VAR_INPUT fb IED : REFERENCE TO FB_IED; END_VAR VAR t Value : T_Binary Time; s Value : STRING; END_VAR IF NOT __ISVALIDREF(fb IED) THEN RETURN; END_IF t Value := LWORD_To_Binary Time6(0); s Value := Binary Time6_To_String(t Value);(* s Value := 'BT#1984-01-01-00:00:00' *) IF fb IED. Relay. LLN0.brcb1. Time Of Entry.n Value <> Binary Time6_To_LWORD(t Value) THEN t Value := fb IED. Relay. LLN0.brcb1. Time Of Entry.t Value; END_IF t Value := LWORD_To_Binary Time6(1); s Value := Binary Time6_To_String(t Value);(* s Value := 'BT#1984-01-01-00:00:00.001'*) IF fb IED. Relay. LLN0.brcb2. Time Of Entry.n Value <> Binary Time6_To_LWORD(t Value) THEN t Value := fb IED. Relay. LLN0.brcb2. Time Of Entry.t Value; END_IF t Value := String_To_Binary Time6('BT#2017-03-21-11:22:33.44'); s Value := Binary Time6_To_String(t Value);(* s Value := 'BT#2017-03-21-11:22:33.440'*) IF fb IED. Relay. LLN0.brcb3. Time Of Entry.n Value <> Binary Time6_To_LWORD(t Value) THEN t Value := fb IED. Relay. LLN0.brcb3. Time Of Entry.t Value; END_IF Binary Time6_To From_LWORD := TRUE; 6.4.40 LWORD_TO_MACADDR Converts the binary data of type LWORD to type ETHERNET_ADDRESS. The LWORD bytes are converted and swapped during conversion according to the following scheme: The least significant byte becomes the last and the most significant converted byte becomes the first octet of the MAC address. Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) FUNCTION LWORD_TO_MACADDR : ETHERNET_ADDRESS VAR_INPUT in: LWORD(0..16#FFFFFFFFFFFF); END_VAR Inputs Name Type Description in LWORD(0..16#FFFFFFFFFFFF) The LWORD value to be converted. Return value Name Type Description LWORD_TO_MACADDR ETHERNET_ADDRESS [} 490] Octet string with the maximum length of 8 octets. Example METHOD FINAL Sample_LWORD_TO_MACADDR : BOOL VAR mac: ETHERNET_ADDRESS; END_VAR mac:=LWORD_TO_MACADDR(16#00B0D063C226); (* mac:=00-B0-D0-63-C2-26 *) Sample_LWORD_TO_MACADDR:=TRUE; 304 Version: 1.7.1 TF6510
## Page 305

PLC API 6.4.41 LWORD_TO_OCTET6 Converts the binary data of type LWORD to type T_OCTET6. The two most significant bytes are ignored and not converted. The remaining LWORD bytes are converted and swapped during conversion according to the following scheme: the least significant byte becomes the last and the most significant converted byte becomes the first octet of the octet string. Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) FUNCTION LWORD_TO_OCTET6 : T_OCTET6 VAR_INPUT in: LWORD(0..16#FFFFFFFFFFFF); END_VAR Inputs Name Type Description in LWORD(0..16#FFFFFFFFFFFF) The LWORD value to be converted. Return value Name Type Description LWORD_TO_OCTET6 T_OCTET6 [} 518] Octet string with the maximum length of 6 octets. Example METHOD FINAL Sample_LWORD_TO_OCTET6 : BOOL VAR o: T_OCTET6; END_VAR o:=LWORD_TO_OCTET6(16#010CCD010001); (* o:=[16#01,16#0C,16#CD,16#01,16#00,16#01] *) Sample_LWORD_TO_OCTET6:=TRUE; 6.4.42 LWORD_TO_OCTET8 Converts the binary data of type LWORD to type T_OCTET8. The LWORD bytes are converted and swapped during the conversion according to the following scheme: the least significant byte becomes the last and the most significant converted byte becomes the first octet of the octet string. Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) FUNCTION LWORD_TO_OCTET8 : T_OCTET8 VAR_INPUT in: LWORD; END_VAR Inputs Name Type Description in LWORD The LWORD value to be converted. Return value Name Type Description LWORD_TO_OCTET8 T_OCTET8 [} 518] Octet string with the maximum length of 8 octets. TF6510 Version: 1.7.1 305
## Page 306

PLC API Example METHOD FINAL Sample_LWORD_TO_OCTET8 : BOOL VAR o: T_OCTET8; END_VAR o:=LWORD_TO_OCTET8(16#0102030405060708); (* o:=[16#01,16#02,16#03,16#04,16#05,16#06,16#07,16#08] *) Sample_LWORD_TO_OCTET8:=TRUE; 6.4.43 LWORD_To_Utc Time Converts the binary data of the type LWORD into the components of the structured type T_Utc Time [} 519]. The coding of the components in LWORD corresponds to the Twin CAT UTC-Time-LWORD format specification [} 718]. Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) Syntax FUNCTION LWORD_To_Utc Time : T_Utc Time VAR_INPUT in : LWORD; END_VAR Inputs Name Type Description in LWORD The time information to be converted as UTC-Time binary data. Return value Name Type Description LWORD_To_Utc Time T_Utc Time [} 519] Converted time information as UTC-Time structure. Sample METHOD Utc Time_To From_LWORD : BOOL VAR t Value : T_Utc Time; s Value : STRING; END_VAR t Value := LWORD_To_Utc Time(0); s Value := Utc Time_To_String(t Value);(* s Value := 'UT#1970-01-01-00:00:00.000000000|000|0' *) IF Utc Time_To_LWORD(t Value) = 0 THEN t Value.second Since Epoch := DT#2000-01-01-00:00:0; t Value.fraction Of Second := LTIME_TO_Utc Time Fraction Of Second( LTIME#0MS ); t Value.quality. Leap Seconds Known := FALSE; t Value.quality. Clock Failure := FALSE; t Value.quality. Clock Not Synchronized := TRUE; Accuracy_To_Utc Time Quality Accuracy( E_Utc Time Accuracy._03, b Accuracy0=>t Value.quality. Accuracy0, b Accuracy1=>t Value.quality. Accuracy1, b Accuracy2=>t Value.quality. Accuracy2, b Accuracy3=>t Value.quality. Accuracy3, b Accuracy4=>t Value.quality. Accuracy4 ); s Value := Utc Time_To_String(t Value);(* s Value := 'UT#2000-01-01-00:00:00.000000000|001|3' *) END_IF Utc Time_To From_LWORD := TRUE; 306 Version: 1.7.1 TF6510
## Page 307

PLC API 6.4.44 Octet String_To_Any Buffer Converts and copies the data from an octet string or a one-dimensional byte array to any variable. Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) FUNCTION Octet String_To_Any Buffer : UDINT VAR_IN_OUT source : ARRAY[*] OF BYTE; END_VAR VAR_INPUT p Target : PVOID; cb Target :UDINT; b Swap Bytes : BOOL; END_VAR VAR_OUTPUT b Underflow : BOOL; b Overflow : BOOL; END_VAR / Inputs/Outputs Name Type Description source ARRAY[*] OF BYTE Source variable Inputs Name Type Description p Target PVOID Address pointer of the target variable. cb Target UDINT Byte size of the target variable. b Swap Bytes BOOL With TRUE the data bytes are exchanged. Outputs Name Type Description b Underflow BOOL If TRUE then the source variable is smaller than the target variable. b Overflow BOOL If TRUE then the source variable is greater than the target variable. Return value Name Type Description Octet String_To_Any Buffer UDINT Number of successfully copied data bytes. Example METHOD FINAL Sample_Octet String_To_Any Buffer : BOOL VAR s Value : STRING; ui64 : LWORD; ui32 : UDINT; o6 : T_OCTET6:=[16#30, 16#31, 16#32, 16#33, 16#34, 16#35]; o8 : T_OCTET8:=[16#30, 16#31, 16#32, 16#33, 16#34, 16#35, 16#36, 16#37]; o64 : T_OCTET64:=[16#30, 16#31, 16#32, 16#33, 16#34, 16#35, 16#36, 16#37, 16#38, 16#39]; size : UDINT; b Overflow : BOOL; b Underflow : BOOL; END_VAR size:=Octet String_To_Any Buffer(source:=o6, p Target:=ADR(s Value), cb Target:=SIZEOF(s Value), b Swap Byte s:=FALSE, b Underflow=>b Underflow, b Overflow=>b Overflow);(* size:=6 *) size:=Octet String_To_Any Buffer(source:=o8, p Target:=ADR(ui64), cb Target:=SIZEOF(ui64), b Swap Bytes:=T RUE, b Underflow=>b Underflow, b Overflow=>b Overflow);(* size:=8 *) size:=Octet String_To_Any Buffer(source:=o64, p Target:=ADR(ui32), cb Target:=SIZEOF(ui32), b Swap Bytes:= TF6510 Version: 1.7.1 307
## Page 308

PLC API TRUE, b Underflow=>b Underflow, b Overflow=>b Overflow);(* size:=4 *) Sample_Octet String_To_Any Buffer:=(s Value = '012345') AND (ui64 = 16#3031323334353637) AND (ui32 = 16 #30313233); 6.4.45 Size Of Octet String Determines the byte size of any octet string (1-dimensional byte array). Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) FUNCTION Size Of Octet String : UDINT VAR_IN_OUT o : ARRAY[*] OF BYTE; END_VAR / Inputs/Outputs Name Type Description o ARRAY[*] OF BYTE Octet string whose size is to be determined. Return value Name Type Description Size Of Octet String UDINT Octet string byte size. Example METHOD FINAL Sample_Size Of Octet String : BOOL VAR o6 : T_OCTET6:=[6(0)]; o8 : T_OCTET8:=[8(0)]; o64 : T_OCTET64:=[64(0)]; size: UDINT; END_VAR size:=Size Of Octet String(o:=o6);(* size:=6 *) size:=Size Of Octet String(o:=o8);(* size:=8 *) size:=Size Of Octet String(o:=o64);(* size:=64 *) Sample_Size Of Octet String:=TRUE; 6.4.46 Source_To_Acsi Quality Source Converts the value of the enumeration type E_Acsi Quality Source [} 463] into a Boolean value. This output value corresponds to the Source-Bit component of the structured type ST_Acsi Quality [} 503]. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax FUNCTION Source_To_Acsi Quality Source : BOOL VAR_INPUT in : E_Acsi Quality Source; END_VAR Inputs Name Type Description in E_Acsi Quality Source [} 463] The information to be converted as an enumeration type. 308 Version: 1.7.1 TF6510
## Page 309

PLC API Return value Name Type Description Source_To_Acsi Quality Source BOOL Converted information as an ST_Acsi Quality [} 503]. Source- Bit component. Sample METHOD Acsi Quality Source_To From_Source : BOOL VAR_INPUT fb IED : REFERENCE TO FB_IED; END_VAR VAR q Value : ST_Acsi Quality; s Value : STRING; END_VAR IF NOT __ISVALIDREF(fb IED) THEN RETURN; END_IF Validity_To_Acsi Quality Validity(E_Acsi Quality Validity. Good, b Validity0=>q Value. Validity0, b Validity1 => q Value. Validity1 ); q Value. Overflow := FALSE; q Value. Out Of Range := FALSE; q Value. Bad Reference := FALSE; q Value. Oscillatory := FALSE; q Value. Failure := FALSE; q Value. Old Data := FALSE; q Value. Inconsistent := FALSE; q Value. Inaccurate := FALSE; q Value. Source := Source_To_Acsi Quality Source(E_Acsi Quality Source. Substituted); q Value. Test := TRUE; q Value. Operator Blocked := FALSE; s Value := Acsi Quality_To_String(q Value);(* s Value := 'Q#00|00000000|1|10' *) IF fb IED. Relay. LLN0. Beh.q.e Source <> Acsi Quality Source_To_Source(q Value) THEN q Value := fb IED. Relay. LLN0. Beh.q.q Value; END_IF Acsi Quality Source_To From_Source := TRUE; 6.4.47 String_To_Acsi Quality Converts the quality information formatted as a string into the components of the structured type ST_Acsi Quality [} 503]. The string to be converted must be specified and has the following structure: 'Q#vv| ORBSFDCA|s|TB'. It corresponds to the Twin CAT Quality-String format specification [} 723]. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax FUNCTION String_To_Acsi Quality : ST_Acsi Quality VAR_INPUT in : STRING(18) := 'Q#00|00000000|0|00'; END_VAR VAR_OUTPUT b Error : BOOL; END_VAR Inputs Name Type Description in STRING(18) The information to be converted as a Quality string. TF6510 Version: 1.7.1 309
## Page 310

PLC API Outputs Name Type Description b Error BOOL This output is "TRUE" if the input string could not be converted without error. Return value Name Type Description String_To_Acsi Quality ST_Acsi Quality [} 503] Converted information as a Quality structure. Sample METHOD Acsi Quality_To From_String : BOOL VAR_INPUT fb IED : REFERENCE TO FB_IED; END_VAR VAR q Value : ST_Acsi Quality; s Value : STRING; END_VAR IF NOT __ISVALIDREF(fb IED) THEN RETURN; END_IF q Value := String_To_Acsi Quality('Q#00|00000000|0|00'); s Value := Acsi Quality_To_String(q Value);(* s Value := 'Q#00|00000000|0|00' *) IF fb IED. Relay. LLN0. Beh.q.s Value <> Acsi Quality_To_String(q Value) THEN q Value := fb IED. Relay. LLN0. Beh.q.q Value; END_IF q Value := String_To_Acsi Quality('Q#01|00110011|0|01'); s Value := Acsi Quality_To_String(q Value);(* s Value := 'Q#01|00110011|0|01' *) IF fb IED. Relay. LLN0. Health.q.s Value <> Acsi Quality_To_String(q Value) THEN q Value := fb IED. Relay. LLN0. Health.q.q Value; END_IF q Value := String_To_Acsi Quality('Q#10|11001100|1|10'); s Value := Acsi Quality_To_String(q Value);(* s Value := 'Q#10|11001100|1|10' *) IF fb IED. Relay. LLN0. Mod_.q.s Value <> Acsi Quality_To_String(q Value) THEN q Value := fb IED. Relay. LLN0. Mod_.q.q Value; END_IF Acsi Quality_To From_String := TRUE; 6.4.48 String_To_Binary Time6 Converts the Binary-Time time information formatted as a string into the components of the structured type T_Binary Time [} 516]. The string to be converted must be specified and has the following structure: ‘BT#[YYYY-MM-DD-]hh:mm:ss[.n[n[n]]]‘. It corresponds to the Twin CAT Binary-Time string format specification [} 717]. Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) Syntax FUNCTION String_To_Binary Time6 : T_Binary Time VAR_INPUT in : STRING(26); END_VAR VAR_OUTPUT b Error : BOOL; END_VAR 310 Version: 1.7.1 TF6510
## Page 311

PLC API Inputs Name Type Description in STRING(26) The time information to be converted as a Binary-Time string. Outputs Name Type Description b Error BOOL This output is "TRUE" if the input string could not be converted without error. In this case the function returns the value "STRUCT(time Of Day := TOD#00:00:00, day := 0)". Return value Name Type Description String_To_Binary Time6 T_Binary Time [} 516] Converted time information as Binary-Time structure. Sample METHOD Binary Time6_To From_String : BOOL VAR_INPUT fb IED : REFERENCE TO FB_IED; END_VAR VAR t Value : T_Binary Time; s Value : STRING; END_VAR IF NOT __ISVALIDREF(fb IED) THEN RETURN; END_IF t Value := String_To_Binary Time6('BT#01:02:03'); s Value := Binary Time6_To_String(t Value); (* s Value := 'BT#1984-01-01-01:02:03' *) IF fb IED. Relay. LLN0.brcb1. Time Of Entry.s Value <> s Value THEN t Value := fb IED. Relay. LLN0.brcb1. Time Of Entry.t Value; END_IF t Value := String_To_Binary Time6('BT#04:05:06.7'); s Value := Binary Time6_To_String(t Value);(* s Value := 'BT#1984-01-01-04:05:06.700' *) IF fb IED. Relay. LLN0.brcb2. Time Of Entry.s Value <> s Value THEN t Value := fb IED. Relay. LLN0.brcb2. Time Of Entry.t Value; END_IF t Value := String_To_Binary Time6('BT#2017-01-18-11:12:13'); s Value := Binary Time6_To_String(t Value);(* s Value := 'BT#2017-01-18-11:12:13' *) IF fb IED. Relay. LLN0.brcb3. Time Of Entry.s Value <> s Value THEN t Value := fb IED. Relay. LLN0.brcb3. Time Of Entry.t Value; END_IF Binary Time6_To From_String := TRUE; 6.4.49 String_To_Utc Time Converts the UTC-Time information formatted as a string into the components of the structured type T_Utc Time [} 519]. The string to be converted is specified and has the following structure: 'UT#YYYY-MM- DD-hh:mm:ss.nnnnnnnnn|LFC|A[A]'. It corresponds to the Twin CAT UTC-Time string format specification [} 722]. Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) TF6510 Version: 1.7.1 311
## Page 312

PLC API Syntax FUNCTION String_To_Utc Time : T_Utc Time VAR_INPUT in : STRING(39) := 'UT#1970-01-01-00:00:00.000000000|000|0'; END_VAR VAR_OUTPUT b Error : BOOL; END_VAR Inputs Name Type Description in STRING(39) The time information to be converted as a UTC-Time string. Outputs Name Type Description b Error BOOL This output is "TRUE" if the input string could not be converted without error. Return value Name Type Description String_To_Utc Time T_Utc Time [} 519] Converted time information as UTC-Time structure. Sample 'UT#2017-01-16-11:22:33.750000000|001|24' means date "2017-01-16", time "11:22:33" and "750" ms, leap seconds unknown, timer has no error, time is not synchronized. METHOD Utc Time_To From_String : BOOL VAR_INPUT fb IED : REFERENCE TO FB_IED; END_VAR VAR t Value : T_Utc Time; s Value : STRING; END_VAR IF NOT __ISVALIDREF(fb IED) THEN RETURN; END_IF t Value := String_To_Utc Time('UT#1970-01-01-00:00:00.000000000|000|0'); s Value := Utc Time_To_String(t Value);(* s Value := 'UT#1970-01-01-00:00:00.000000000|000|0' *) IF fb IED. Relay. LLN0. Beh.t.s Value <> s Value THEN t Value := fb IED. Relay. LLN0. Beh.t.t Value; END_IF t Value := String_To_Utc Time('UT#2018-03-21-14:56:55.125000000|010|3'); (* Clock Failure := 1, accuracy := 3 bits *) s Value := Utc Time_To_String(t Value);(* s Value := 'UT#2018-03-21-14:56:55.125000000|010|3' *) IF fb IED. Relay. LLN0. Health.t.s Value <> s Value THEN t Value := fb IED. Relay. LLN0. Health.t.t Value; END_IF t Value := String_To_Utc Time('UT#2017-01-16-11:22:33.750000000|001|24'); (* Clock Not Synchronized := 1, accuracy := 24 bits *) s Value := Utc Time_To_String(t Value);(* s Value := 'UT#2017-01-16-11:22:33.750000000|001|24' *) IF fb IED. Relay. LLN0. Mod_.t.s Value <> s Value THEN t Value := fb IED. Relay. LLN0. Mod_.t.t Value; END_IF Utc Time_To From_String := TRUE; 312 Version: 1.7.1 TF6510
## Page 313

PLC API 6.4.50 String_To_Utc Time Quality Converts the UTC-Time-Quality information formatted as a string into the components of the structured type T_Utc Time Quality [} 520]. The string to be converted must be specified and has the following structure: 'UQ#LFC|A[A]'. It corresponds to the Twin CAT UTC-Time-Quality string format specification [} 721]. Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) Syntax FUNCTION String_To_Utc Time Quality : T_Utc Time Quality VAR_INPUT in : STRING(9) := 'UQ#000|0'; END_VAR VAR_OUTPUT b Error : BOOL; END_VAR Inputs Name Type Description in STRING(9) The information to be converted as a UTC-Time-Quality string. Outputs Name Type Description b Error BOOL This output is "TRUE" if the input string could not be converted without error. Return value Name Type Description String_To_Utc Time Quality T_Utc Time Quality Converted information as UTC-Time-Quality structure. [} 520] Sample The return value: 'UQ#001|3' means that leap seconds are not known. Timer has no error and is not synchronized, the resolution of the time information of the seconds fraction is 3 bits. METHOD Utc Time Quality_To From_String : BOOL VAR_INPUT fb IED : REFERENCE TO FB_IED; END_VAR VAR Quality : T_Utc Time Quality; s Quality : STRING; END_VAR IF NOT __ISVALIDREF(fb IED) THEN RETURN; END_IF Quality := String_To_Utc Time Quality('UQ#000|0'); s Quality := Utc Time Quality_To_String(Quality);(* s Quality := 'UQ#000|0' *) IF fb IED. Relay. LLN0. Beh.t.s Quality <> s Quality THEN Quality := fb IED. Relay. LLN0. Beh.t. Quality; END_IF Quality := String_To_Utc Time Quality('UQ#001|3'); s Quality := Utc Time Quality_To_String(Quality);(* s Quality := 'UQ#001|3' *) IF fb IED. Relay. LLN0. Health.t.s Quality <> s Quality THEN Quality := fb IED. Relay. LLN0. Health.t. Quality; END_IF TF6510 Version: 1.7.1 313
## Page 314

PLC API Quality := String_To_Utc Time Quality('UQ#000|31'); s Quality := Utc Time Quality_To_String(Quality);(* s Quality := 'UQ#000|31' *) IF fb IED. Relay. LLN0. Mod_.t.s Quality <> s Quality THEN Quality := fb IED. Relay. LLN0. Mod_.t. Quality; END_IF Utc Time Quality_To From_String := TRUE; 6.4.51 String_To_Utc Time Stamp Converts the UTC timestamp information formatted as a string into the components of the structured type T_Utc Time [} 519]. The string to be converted is specified and has the following structure: 'US#YYY-MM-DD- hh:mm:ss.nnnnnnn' where: YYYY:=year MM:=month DD:=day hh:=hour mm:=minutes ss:=seconds nnnnnnn:=nanoseconds (9 decimal places). The T_Utc Time [} 519]. Quality component is not set during conversion (all bits have the value 0). Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) Syntax FUNCTION String_To_Utc Time Stamp : T_Utc Time VAR_INPUT in : STRING(32):='US#1970-01-01-00:00:00.000000000'; END_VAR VAR_OUTPUT b Error : BOOL; second Since Epoch : DT; fraction Of Second : T_UINT24; END_VAR Inputs Name Type Description in STRING(32) The time information to convert as a formatted UTC timestamp string. Outputs Name Type Description b Error BOOL The output is "TRUE" if the input value could not be converted without error. second Since Epoch DT Value of converted T_Utc Time [} 519].second Since Epoch component. fraction Of Second T_UINT24 Value of converted T_Utc Time [} 519].fractionof Second [} 519] component. Return value Name Type Description String_To_Utc Time Stamp T_Utc Time [} 519] Converted timestamp information as UTC time structure. 314 Version: 1.7.1 TF6510
## Page 315

PLC API Sample PROGRAM MAIN VAR t Utc : T_Utc Time; s Utc : STRING; b Error : BOOL; second Since Epoch : DT; fraction Of Second : T_UINT24; END_VAR t Utc:=String_To_Utc Time Stamp(in:='US#2022-09-15-16:12:34.750000000' , b Error=>b Error, second Since Epo ch=>second Since Epoch, fraction Of Second=>fraction Of Second); s Utc:=Utc Time Stamp_To_String(in:=t Utc, b Error=>b Error); (* => s Utc = 'US#2022-09-15-16:12:34.750000000' *) t Utc.second Since Epoch:=DT#2022-09-15-00:00:00; t Utc.fraction Of Second[0]:=0; t Utc.fraction Of Second[1]:=0; t Utc.fraction Of Second[2]:=0; s Utc:=Utc Time Stamp_To_String(in:=t Utc, b Error=>b Error); (* => s Utc ='US#2022-09-15-00:00:00.000000000' *) 6.4.52 System Time_To_Binary Time Converts the time information of type TIMESTRUCT [} 493] (system time format) to the time information of type T_Binary Time [} 516] (binary time format). In case of conversion error the output variable "b Overflow" has the value "TRUE" and the returned binary time value has the date:1984-01-01 and the time: 0h0m0s0ms. Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) Syntax FUNCTION System Time_To_Binary Time : T_Binary Time VAR_INPUT in : TIMESTRUCT; END_VAR VAR_OUTPUT b Overflow : BOOL; END_VAR Inputs Name Type Description in TIMESTRUCT [} 493] The time information to be converted as a System-Time structure. Outputs Name Type Description b Overflow BOOL Date overflow if "TRUE". In this case the system time to be converted has a date greater than 2106-02-07. Return value Name Type Description System Time_To_Binary Time T_Binary Time [} 516] Converted time information as Binary-Time structure. Sample PROGRAM MAIN VAR t System : TIMESTRUCT; TF6510 Version: 1.7.1 315
## Page 316

PLC API t Binary : T_Binary Time; b Overflow : BOOL; END_VAR t System.w Year:=2022; t System.w Month:=9; t System.w Day:=16; t System.w Hour:=12; t System.w Minute:=52; t System.w Second:=4; t System.w Milliseconds:=500; t Binary:=System Time_To_Binary Time(in:=t System, b Overflow=>b Overflow); (* Returns t Binary.time Of Day = TOD#12:52:04.500 and t Binary.day = 14138 *) t Binary.day:=1; t Binary.time Of Day:=TOD#01:30:15.500; t System:=Binary Time_To_System Time(in:=t Binary, b Overflow=>b Overflow);(* Returns system- time date: 1984-01-02 and time: 01h30m15s500ms*) 6.4.53 System Time_To_Utc Time Converts the time information from type TIMESTRUCT [} 493] (system time format) to type T_Utc Time [} 519]. Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) Syntax FUNCTION System Time_To_Utc Time : T_Utc Time VAR_INPUT in : TIMESTRUCT; w Microseconds : WORD(0..999); w Nanoseconds : WORD(0..999); b Leap Seconds Known : BOOL; b Clock Failure : BOOL; b Clock Not Synchronized : BOOL; e Accuracy : E_Utc Time Accuracy; END_VAR Inputs Name Type Description in TIMESTRUCT [} 493] The time information to be converted as a System-Time structure. w Microseconds WORD(0..999) Fraction of the millisecond in microseconds: „0..999“. w Nanoseconds WORD(0..999) Fraction of the microsecond in nanoseconds: „0..999“. b Leap Seconds Known BOOL Quality of the leap seconds: "FALSE" := unknown; "TRUE" := known; b Clock Failure BOOL Quality of the timer: "FALSE" := good; "TRUE" := erroneous; b Clock Not Synchronized BOOL Quality of the time synchronization: "FALSE" := synchronized; "TRUE" := not synchronized; e Accuracy E_Utc Time Accuracy [} 489] Accuracy of the fraction of the second as an enumeration type. Return value Name Type Description System Time_To_Utc Time T_Utc Time [} 519] Converted time information as UTC-Time structure. 316 Version: 1.7.1 TF6510
## Page 317

PLC API Sample The time information: 2018-03-20-11:33:05.125000000 is converted with the max. accuracy of 24 bits (max. resolution ~60ns). The components of the system time have the following values: w Year := 2018, w Month := 3, w Day := 20, w Hour := 11, w Minute := 33, w Second := 5, w Milliseconds := 125, w Day Of Week := 2. METHOD Utc Time_To From_System Time : BOOL VAR t System : TIMESTRUCT; s System : STRING; t Utc : T_Utc Time; s Utc : STRING; w Microseconds : WORD; w Nanoseconds : WORD; END_VAR t System.w Year := 2000; t System.w Month := 1; t System.w Day := 1; t System.w Hour := 0; t System.w Minute := 0; t System.w Second := 0; t System.w Milliseconds := 0; t System.w Day Of Week := 0; s System := System Time_To_String(t System);(* s System := '2000-01-01-00:00:00:000' *) t Utc := System Time_To_Utc Time(t System, 0, 0, FALSE, FALSE, TRUE, E_Utc Time Accuracy. Unspecified); s Utc := Utc Time_To_String(t Utc);(* s Utc := 'UT#2000-01-01-00:00:00:000000000|001|31' *) IF t Utc.quality. Clock Not Synchronized THEN t Utc.second Since Epoch := DT#2018-03-20-11:33:05; t Utc.fraction Of Second := LTIME_TO_Utc Time Fraction Of Second( LTIME#125MS0US0NS ); t Utc.quality. Leap Seconds Known := FALSE; t Utc.quality. Clock Failure := FALSE; t Utc.quality. Clock Not Synchronized := FALSE; Accuracy_To_Utc Time Quality Accuracy( E_Utc Time Accuracy._03, b Accuracy0=>t Utc.quality. Accuracy0, b Accuracy1=>t Utc.quality. Accuracy1, b Accuracy2=>t Utc.quality. Accuracy2, b Accuracy3=>t Utc.quality. Accuracy3, b Accuracy4=>t Utc.quality. Accuracy4 ); s Utc := Utc Time_To_String(t Utc);(* s Utc := 'UT#2018-03-20-11:33:05.125000000|000|3' *) t System := Utc Time_To_System Time(t Utc, w Microseconds=>w Microseconds, w Nanoseconds=>w Nanoseconds) ; s System := System Time_To_String(t System);(* s System := '2018-03-20-11:33:05.125' *) END_IF Utc Time_To From_System Time := TRUE; 6.4.54 UINT24 Initializes an unsigned 24-bit number of type: T_UINT24. Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) FUNCTION UINT24 : T_UINT24 VAR_INPUT Hi : BYTE; Mi : BYTE; Lo : BYTE; END_VAR Inputs Name Type Description Hi BYTE Top 8 bits to be set. Mi BYTE Middle 8 bits to be set. Lo BYTE Lowest 8 bits to be set. TF6510 Version: 1.7.1 317
## Page 318

PLC API Return value Name Type Description UINT24 T_UINT24 [} 519] 24-bit number. Example METHOD FINAL Sample_UINT24 : BOOL VAR n Value: T_UINT24; END_VAR n Value:=UINT24(16#12, 16#34, 16#56);(* n Value:=16#123456 *) Sample_UINT24:=TRUE; 6.4.55 UINT128 Initializes an unsigned 128-bit number of type: T_UINT128. Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) FUNCTION UINT128 : T_UINT128 VAR_INPUT Hi : LWORD; Lo : LWORD; END_VAR Inputs Name Type Description Hi LWORD Top 64 bits to be set. Lo LWORD Lowest 64 bits to be set. Return value Name Type Description UINT128 T_UINT128 [} 519] 128-bit number. Example METHOD FINAL Sample_UINT128 : BOOL VAR n Value: T_UINT128; END_VAR n Value:=UINT128(16#1122334455667788, 16#0000000000000001); (* n Value:=16#1122334455667788_0000000000000001 *) Sample_UINT128:=TRUE; 6.4.56 Utc Time Initializes the data elements of the structure: T_Utc Time. Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) FUNCTION Utc Time : T_Utc Time VAR_INPUT second Since Epoch : DT; fraction Of Second : T_UINT24; quality : T_Utc Time Quality; END_VAR 318 Version: 1.7.1 TF6510
## Page 319

PLC API Inputs Name Type Description second Since Epo DT Number of whole seconds since January 1, 1970. ch fraction Of Second T_UINT24 [} 519] Seconds fraction encoded as 24-bit number. quality T_Utc Time Quality [} 520] Additional information about the quality and accuracy of the time information. Return value Name Type Description Utc Time T_Utc Time [} 519] Structure with initialized data elements. Example METHOD FINAL Sample_Utc Time : BOOL VAR t: T_Utc Time; END_VAR t:=Utc Time(second Since Epoch:=DT#2023-01-01-00:00:00.000, fraction Of Second:=UINT24(0, 0, 0), quality: =Utc Time Quality(FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE)); Sample_Utc Time:=TRUE; 6.4.57 Utc Time_To_LWORD Converts the components of the structured type T_Utc Time [} 519] into the binary data of the type LWORD. The coding of the components in LWORD corresponds to the Twin CAT UTC-Time LWORD format specification [} 718]. Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) Syntax FUNCTION Utc Time_To_LWORD : LWORD VAR_INPUT in : T_Utc Time; END_VAR Inputs Name Type Description in T_Utc Time [} 519] The time information to be converted as a UTC-Time structure. Return value Name Type Description Utc Time_To_LWORD LWORD Converted time information as UTC-Time binary data. Sample METHOD Utc Time_To From_LWORD : BOOL VAR t Value : T_Utc Time; s Value : STRING; END_VAR t Value := LWORD_To_Utc Time(0); s Value := Utc Time_To_String(t Value);(* s Value := 'UT#1970-01-01-00:00:00.000000000|000|0' *) TF6510 Version: 1.7.1 319
## Page 320

PLC API IF Utc Time_To_LWORD(t Value) = 0 THEN t Value.second Since Epoch := DT#2000-01-01-00:00:0; t Value.fraction Of Second := LTIME_TO_Utc Time Fraction Of Second( LTIME#0MS ); t Value.quality. Leap Seconds Known := FALSE; t Value.quality. Clock Failure := FALSE; t Value.quality. Clock Not Synchronized := TRUE; Accuracy_To_Utc Time Quality Accuracy( E_Utc Time Accuracy._03, b Accuracy0=>t Value.quality. Accuracy0, b Accuracy1=>t Value.quality. Accuracy1, b Accuracy2=>t Value.quality. Accuracy2, b Accuracy3=>t Value.quality. Accuracy3, b Accuracy4=>t Value.quality. Accuracy4 ); s Value := Utc Time_To_String(t Value);(* s Value := 'UT#2000-01-01-00:00:00.000000000|001|3' *) END_IF Utc Time_To From_LWORD := TRUE; 6.4.58 Utc Time_To_String Converts the components of the structured type T_Utc Time [} 519] into a formatted UTC-Time string. The resulting string has the following structure: 'UT#YYYY-MM-DD-hh:mm:ss.nnnnnnnnn|LFC|A[A]'. It corresponds to the Twin CAT UTC-Time string format specification [} 722]. Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) Syntax FUNCTION Utc Time_To_String : STRING(39) VAR_INPUT in : T_Utc Time; END_VAR VAR_OUTPUT b Error : BOOL; END_VAR Inputs Name Type Description in T_Utc Time [} 519] The time information to be converted as a UTC-Time structure. Outputs Name Type Description b Error BOOL The output is "TRUE" if the input value could not be converted without error. Return value Name Type Description Utc Time_To_String STRING(39) Converted time information as a UTC-Time string. Sample 'UT#2017-01-16-11:22:33.750000000|001|24' means date "2017-01-16", time "11:22:33" and "750" ms, leap seconds unknown, timer has no error, time is not synchronized. METHOD Utc Time_To From_String : BOOL VAR_INPUT fb IED : REFERENCE TO FB_IED; END_VAR VAR t Value : T_Utc Time; s Value : STRING; END_VAR 320 Version: 1.7.1 TF6510
## Page 321

PLC API IF NOT __ISVALIDREF(fb IED) THEN RETURN; END_IF t Value := String_To_Utc Time('UT#1970-01-01-00:00:00.000000000|000|0'); s Value := Utc Time_To_String(t Value);(* s Value := 'UT#1970-01-01-00:00:00.000000000|000|0' *) IF fb IED. Relay. LLN0. Beh.t.s Value <> s Value THEN t Value := fb IED. Relay. LLN0. Beh.t.t Value; END_IF t Value := String_To_Utc Time('UT#2018-03-21-14:56:55.125000000|010|3'); (* Clock Failure := 1, accuracy := 3 bits *) s Value := Utc Time_To_String(t Value);(* s Value := 'UT#2018-03-21-14:56:55.125000000|010|3' *) IF fb IED. Relay. LLN0. Health.t.s Value <> s Value THEN t Value := fb IED. Relay. LLN0. Health.t.t Value; END_IF t Value := String_To_Utc Time('UT#2017-01-16-11:22:33.750000000|001|24'); (* Clock Not Synchronized := 1, accuracy := 24 bits *) s Value := Utc Time_To_String(t Value);(* s Value := 'UT#2017-01-16-11:22:33.750000000|001|24' *) IF fb IED. Relay. LLN0. Mod_.t.s Value <> s Value THEN t Value := fb IED. Relay. LLN0. Mod_.t.t Value; END_IF Utc Time_To From_String := TRUE; 6.4.59 Utc Time_To_System Time Converts the time information of type T_Utc Time [} 519] to the time information of type TIMESTRUCT [} 493] (system time format). Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) Syntax FUNCTION Utc Time_To_System Time : TIMESTRUCT VAR_INPUT in : T_Utc Time; END_VAR VAR_OUTPUT w Microseconds : WORD(0..999); w Nanoseconds : WORD(0..999); b Leap Seconds Known : BOOL; b Clock Failure : BOOL; b Clock Not Synchronized : BOOL; e Accuracy : E_Utc Time Accuracy; END_VAR Inputs Name Type Description in T_Utc Time [} 519] The time information to be converted as a UTC-Time structure. TF6510 Version: 1.7.1 321
## Page 322

PLC API Outputs Name Type Description w Microseconds WORD(0..999) Optional output parameter. Fraction of the millisecond in microseconds. w Nanoseconds WORD(0..999) Optional output parameter. Fraction of the microsecond in nanoseconds. b Leap Seconds K BOOL Optional output parameter. Quality of the leap nown seconds. b Clock Failure BOOL Optional output parameter. Quality of the timer. b Clock Not Synch BOOL Optional output parameter. Quality of the time ronized synchronization. e Accuracy E_Utc Time Accuracy [} 489] Accuracy of the seconds fraction. This value determines the max. number of significant bits of the T_Utc Time [} 519].fraction Of Second component. Return value Name Type Description Utc Time_To_System Time TIMESTRUCT [} 493] Converted time information as a System-Time structure. Sample The time information: 2018-03-20-11:33:05.125000000 is converted with the max. accuracy of 24 bits (max. resolution ~60ns). The components of the system time have the following values: w Year := 2018, w Month := 3, w Day := 20, w Hour := 11, w Minute := 33, w Second := 5, w Milliseconds := 125, w Day Of Week := 2. METHOD Utc Time_To From_System Time : BOOL VAR t System : TIMESTRUCT; s System : STRING; t Utc : T_Utc Time; s Utc : STRING; w Microseconds : WORD; w Nanoseconds : WORD; END_VAR t System.w Year := 2000; t System.w Month := 1; t System.w Day := 1; t System.w Hour := 0; t System.w Minute := 0; t System.w Second := 0; t System.w Milliseconds := 0; t System.w Day Of Week := 0; s System := System Time_To_String(t System);(* s System := '2000-01-01-00:00:00:000' *) t Utc := System Time_To_Utc Time(t System, 0, 0, FALSE, FALSE, TRUE, E_Utc Time Accuracy. Unspecified); s Utc := Utc Time_To_String(t Utc);(* s Utc := 'UT#2000-01-01-00:00:00:000000000|001|31' *) IF t Utc.quality. Clock Not Synchronized THEN t Utc.second Since Epoch := DT#2018-03-20-11:33:05; t Utc.fraction Of Second := LTIME_TO_Utc Time Fraction Of Second( LTIME#125MS0US0NS ); t Utc.quality. Leap Seconds Known := FALSE; t Utc.quality. Clock Failure := FALSE; t Utc.quality. Clock Not Synchronized := FALSE; Accuracy_To_Utc Time Quality Accuracy( E_Utc Time Accuracy._03, b Accuracy0=>t Utc.quality. Accuracy0, b Accuracy1=>t Utc.quality. Accuracy1, b Accuracy2=>t Utc.quality. Accuracy2, b Accuracy3=>t Utc.quality. Accuracy3, b Accuracy4=>t Utc.quality. Accuracy4 ); s Utc := Utc Time_To_String(t Utc);(* s Utc := 'UT#2018-03-20-11:33:05.125000000|000|3' *) t System := Utc Time_To_System Time(t Utc, w Microseconds=>w Microseconds, w Nanoseconds=>w Nanoseconds) ; 322 Version: 1.7.1 TF6510
## Page 323

PLC API s System := System Time_To_String(t System);(* s System := '2018-03-20-11:33:05.125' *) END_IF Utc Time_To From_System Time := TRUE; 6.4.60 Utc Time Fraction Of Second_To_LTIME Converts the fraction of a second of the type T_UINT24 [} 519] into the type LTIME. The binary data to be converted correspond to the type of the T_Utc Time [} 519].fraction Of Second component. The 24 bits must be coded in a special way. See: Coding of the UTC-Time.fraction Of Second0..23-bits [} 718]. The T_Utctime [} 519]. Quality. Accuracy0..4-bit components determine the max. number of significant fraction Of Second bits and the max. resolution than can be attained when converting (~60 ns). Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) Syntax FUNCTION Utc Time Fraction Of Second_To_LTIME : LTIME VAR_INPUT in : T_UINT24; END_VAR VAR_OUTPUT nanosec : LWORD; attosec : LWORD; END_VAR Inputs Name Type Description in T_UINT24 [} 519] The fraction of the second to be converted as binary data. Outputs Name Type Description nanosec LWORD Optional output parameter. Fraction of the second in nanoseconds. attosec LWORD Optional output parameter. Fraction of the second in attoseconds. Return value Name Type Description Utc Time Fraction Of Second_To_LTIME LTIME Converted fraction of a second in nanoseconds. Sample METHOD Utc Time Fraction Of Second_To From_LTIME : BOOL VAR t Value : T_Utc Time; s Value : STRING; t Fos : LTIME; nanosec : LWORD; END_VAR t Value.quality := String_To_Utc Time Quality('UQ#000|24'); t Value.second Since Epoch := DT#2018-03-28-12:13:14; t Value.fraction Of Second := LTIME_To_Utc Time Fraction Of Second(LTIME#0NS); (* t Value.fraction Of Second := [16#00, 16#00, 16#00], 0 significant bits *) s Value := Utc Time_To_String(t Value);(* s Value := 'UT#2018-03-28-12:13:14.000000000|000|24' *) t Fos := Utc Time Fraction Of Second_To_LTIME(t Value.fraction Of Second, nanosec=>nanosec); (* t Fos := LTIME#0ns, nanosec := 0 *) TF6510 Version: 1.7.1 323
## Page 324

PLC API t Value.fraction Of Second := LTIME_To_Utc Time Fraction Of Second(LTIME#750MS); (* t Value.fraction Of Second := [16#03, 16#00, 16#00], 3 significant bits *) s Value := Utc Time_To_String(t Value);(* s Value := 'UT#2018-03-28-12:13:14.750000000|000|24' *) t Fos := Utc Time Fraction Of Second_To_LTIME(t Value.fraction Of Second, nanosec=>nanosec); (* t Fos := LTIME#750ms, nanosec := 750000000 *) t Value.fraction Of Second := LTIME_To_Utc Time Fraction Of Second(LTIME#968MS750US); (* t Value.fraction Of Second := [16#1F, 16#00, 16#00], 5 significant bits *) s Value := Utc Time_To_String(t Value);(* s Value := 'UT#2018-03-28-12:13:14.968750000|000|24' *) t Fos := Utc Time Fraction Of Second_To_LTIME(t Value.fraction Of Second, nanosec=>nanosec); (* t Fos := LTIME#968ms750us, nanosec := 968750000 *) t Value.fraction Of Second := LTIME_To_Utc Time Fraction Of Second(LTIME#998MS46US875NS); (* t Value.fraction Of Second := [16#FF, 16#01, 16#00], 9 significant bits *) s Value := Utc Time_To_String(t Value);(* s Value := 'UT#2018-03-28-12:13:14.998046875|000|24' *) t Fos := Utc Time Fraction Of Second_To_LTIME(t Value.fraction Of Second, nanosec=>nanosec); (* t Fos := LTIME#998ms46us875ns, nanosec := 998046875 *) t Value.fraction Of Second := LTIME_To_Utc Time Fraction Of Second(LTIME#999MS999US999NS); (* t Value.fraction Of Second := [16#FF, 16#FF, 16#FF], 24 significant bits *) s Value := Utc Time_To_String(t Value);(* s Value := 'UT#2018-03-28-12:13:14.999999940|000|24' *) t Fos := Utc Time Fraction Of Second_To_LTIME(t Value.fraction Of Second, nanosec=>nanosec); (* t Fos := LTIME#999ms999us940ns, nanosec := 999999940 *) Utc Time Fraction Of Second_To From_LTIME := TRUE; 6.4.61 Utc Time Is Null This function returns "TRUE" if all components of the structured type T_Utc Time [} 519] are "0". Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) Syntax FUNCTION Utc Time Is Null : BOOL VAR_INPUT in : T_Utc Time; END_VAR Inputs Name Type Description in T_Utc Time [} 519] UTC-Time value to be checked. Return value Name Type Description Utc Time Is Null BOOL TRUE if all components of UTC-Time are "0". Sample PROGRAM P_Utc Time Is Null VAR t : T_Utc Time; b Null : BOOL; END_VAR t := SEL( b Null, Null_Time Stamp, String_To_Utc Time('UT#2018-03-21-15:58:03.125000000|000|3') ); b Null := Utc Time Is Null(t); 6.4.62 Utc Time Quality Initializes the data elements of the structure: T_Utc Time Quality. Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) 324 Version: 1.7.1 TF6510
## Page 325

PLC API FUNCTION Utc Time Quality : T_Utc Time Quality VAR_INPUT Leap Seconds Known : BOOL; Clock Failure : BOOL; Clock Not Synchronized : BOOL; Accuracy0 : BOOL; Accuracy1 : BOOL; Accuracy2 : BOOL; Accuracy3 : BOOL; Accuracy4 : BOOL; END_VAR Inputs Name Type Description Leap Seconds Kno BOOL Data element "Leap Seconds Known" to be set. wn Clock Failure BOOL Data element "Clock Failure" to be set. Clock Not Synchro BOOL Data element "Clock Not Synchronized" to be set. nized Accuracy0 BOOL Data element "Accuracy0" to be set. Accuracy1 BOOL Data element "Accuracy1" to be set. Accuracy2 BOOL Data element "Accuracy2" to be set. Accuracy3 BOOL Data element "Accuracy3" to be set. Accuracy4 BOOL Data element "Accuracy4" to be set. Return value Name Type Description Utc Time Quality T_Utc Time Quality [} 520] Structure with initialized data elements. Example METHOD FINAL Sample_Utc Time Quality : BOOL VAR q: T_Utc Time Quality; END_VAR q:=Utc Time Quality(FALSE, FALSE, TRUE, FALSE, FALSE, FALSE, FALSE, FALSE); (* q. Clock Not Synchronized:=TRUE, all other elements: FALSE *) Sample_Utc Time Quality:=TRUE; 6.4.63 Utc Time Quality_To_BYTE Converts the components of the structured type T_Utc Time Quality [} 520] into the binary data of the type BYTE. The coding of the components in BYTE corresponds to the Twin CAT UTC-Time-Quality-BYTE format specification [} 720]. Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) Syntax FUNCTION Utc Time Quality_To_BYTE : BYTE VAR_INPUT in : T_Utc Time Quality; END_VAR Inputs Name Type Description in T_Utc Time Quality [} 520] The information to be converted as UTC-Time-Quality structure. TF6510 Version: 1.7.1 325
## Page 326

PLC API Return value Name Type Description Utc Time Quality_To_BYTE BYTE Converted information as UTC-Time-Quality binary data. Sample METHOD Utc Time Quality_To From_Byte : BOOL VAR_INPUT fb IED : REFERENCE TO FB_IED; END_VAR VAR Quality : T_Utc Time Quality; s Quality : STRING; u8 : BYTE; END_VAR IF NOT __ISVALIDREF(fb IED) THEN RETURN; END_IF Quality := Byte_To_Utc Time Quality(0); u8 := Utc Time Quality_To_Byte(Quality);(* u8 := 2#00000000 => 0 bits accuracy *) s Quality := Utc Time Quality_To_String(Quality);(* s Quality := 'UQ#000|00' *) IF Utc Time Quality_To_Byte(fb IED. Relay. LLN0. Beh.t. Quality) <> u8 THEN Quality := fb IED. Relay. LLN0. Beh.t. Quality; END_IF Quality := String_To_Utc Time Quality('UQ#000|03'); u8 := Utc Time Quality_To_Byte(Quality);(* u8 := 2#11000000 => 3 bits accuracy *) s Quality := Utc Time Quality_To_String(Quality);(* s Quality := 'UQ#000|03' *) IF Utc Time Quality_To_Byte(fb IED. Relay. LLN0. Health.t. Quality) <> u8 THEN Quality := fb IED. Relay. LLN0. Health.t. Quality; END_IF Quality := String_To_Utc Time Quality('UQ#001|05'); u8 := Utc Time Quality_To_Byte(Quality); (* u8 := 2#10100100 => 5 bits accuracy, Clock Not Synchronized := 1 *) s Quality := Utc Time Quality_To_String(Quality);(* s Quality := 'UQ#001|05' *) IF Utc Time Quality_To_Byte(fb IED. Relay. LLN0. Mod_.t. Quality) <> u8 THEN Quality := fb IED. Relay. LLN0. Mod_.t. Quality; END_IF Quality := String_To_Utc Time Quality('UQ#000|31'); u8 := Utc Time Quality_To_Byte(Quality);(* u8 := 2#11111000 => unspecified accuracy *) s Quality := Utc Time Quality_To_String(Quality);(* s Quality := 'UQ#000|31' *) IF Utc Time Quality_To_Byte(fb IED. Relay. MMXU1.ph V.phs A.t. Quality) <> u8 THEN Quality := fb IED. Relay. MMXU1.ph V.phs A.t. Quality; END_IF Utc Time Quality_To From_Byte := TRUE; 6.4.64 Utc Time Quality_To_String Converts the components of the structured type T_Utc Time Quality [} 520] into a formatted UTC-Time-Quality string. The resulting string has the following structure: 'UQ#LFC|A[A]'. It corresponds to the Twin CAT UTC- Time-Quality string format specification [} 721]. Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) Syntax FUNCTION Utc Time Quality_To_String : STRING(9) VAR_INPUT in : T_Utc Time Quality; END_VAR VAR_OUTPUT b Error : BOOL; END_VAR 326 Version: 1.7.1 TF6510
## Page 327

PLC API Inputs Name Type Description in T_Utc Time Quality [} 520] The information to be converted as UTC-Time-Quality structure. Outputs Name Type Description b Error BOOL The output is "TRUE" if the input value could not be converted without error. Return value Name Type Description Utc Time Quality_To_String STRING(9) Converted information as a UTC-Time-Quality string. Sample The return value: 'UQ#001|3' means that leap seconds are not known. Timer has no error and is not synchronized, the resolution of the time information of the seconds fraction is 3 bits. METHOD Utc Time Quality_To From_String : BOOL VAR_INPUT fb IED : REFERENCE TO FB_IED; END_VAR VAR Quality : T_Utc Time Quality; s Quality : STRING; END_VAR IF NOT __ISVALIDREF(fb IED) THEN RETURN; END_IF Quality := String_To_Utc Time Quality('UQ#000|0'); s Quality := Utc Time Quality_To_String(Quality);(* s Quality := 'UQ#000|0' *) IF fb IED. Relay. LLN0. Beh.t.s Quality <> s Quality THEN Quality := fb IED. Relay. LLN0. Beh.t. Quality; END_IF Quality := String_To_Utc Time Quality('UQ#001|3'); s Quality := Utc Time Quality_To_String(Quality);(* s Quality := 'UQ#001|3' *) IF fb IED. Relay. LLN0. Health.t.s Quality <> s Quality THEN Quality := fb IED. Relay. LLN0. Health.t. Quality; END_IF Quality := String_To_Utc Time Quality('UQ#000|31'); s Quality := Utc Time Quality_To_String(Quality);(* s Quality := 'UQ#000|31' *) IF fb IED. Relay. LLN0. Mod_.t.s Quality <> s Quality THEN Quality := fb IED. Relay. LLN0. Mod_.t. Quality; END_IF Utc Time Quality_To From_String := TRUE; 6.4.65 Utc Time Quality Accuracy_To_Accuracy Converts the accuracy of the time information of the structured type T_Utc Time Quality [} 520] to the enumeration type E_Utc Time Accuracy [} 489]. Only the Accuracy0..4-bit components are converted. These variables determined the max. number of significant bits in the T_Utc Time [} 519].fraction Of Second component. Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) TF6510 Version: 1.7.1 327
## Page 328

PLC API Syntax FUNCTION Utc Time Quality Accuracy_To_Accuracy : E_Utc Time Accuracy VAR_INPUT in : T_Utc Time Quality; END_VAR Inputs Name Type Description in T_Utc Time Quality [} 520] The information to be converted as UTC-Time- Quality. Accuracy0..4-bit components. See: Coding of the Accuracy0..4-bits [} 719]. Return value Name Type Description Utc Time Quality Accu E_Utc Time Accuracy [} 489] Converted information as Accuracy enumerator type. racy_To_Accuracy Sample METHOD Utc Time Quality Accuracy_To From_Accuracy : BOOL VAR_INPUT fb IED : REFERENCE TO FB_IED; END_VAR VAR Quality : T_Utc Time Quality; s Quality : STRING; END_VAR IF NOT __ISVALIDREF(fb IED) THEN RETURN; END_IF Quality. Leap Seconds Known := FALSE; Quality. Clock Failure := FALSE; Quality. Clock Not Synchronized := FALSE; Accuracy_To_Utc Time Quality Accuracy( E_Utc Time Accuracy. Null,(* Null bits accuracy *) b Accuracy0=>Quality. Accuracy0, b Accuracy1=>Quality. Accuracy1, b Accuracy2=>Quality. Accuracy2, b Accuracy3=>Quality. Accuracy3, b Accuracy4=>Quality. Accuracy4 ); s Quality := Utc Time Quality_To_String(Quality);(* s Quality := 'UQ#000|0' *) IF fb IED. Relay. LLN0. Beh.t.e Accuracy <> Utc Time Quality Accuracy_To_Accuracy(Quality) THEN Quality := fb IED. Relay. LLN0. Beh.t. Quality; END_IF Quality. Leap Seconds Known := FALSE; Quality. Clock Failure := FALSE; Quality. Clock Not Synchronized := FALSE; Accuracy_To_Utc Time Quality Accuracy( E_Utc Time Accuracy._03,(* 3 bits accuracy *) b Accuracy0=>Quality. Accuracy0, b Accuracy1=>Quality. Accuracy1, b Accuracy2=>Quality. Accuracy2, b Accuracy3=>Quality. Accuracy3, b Accuracy4=>Quality. Accuracy4 ); s Quality := Utc Time Quality_To_String(Quality);(* s Quality := 'UQ#000|3' *) IF fb IED. Relay. LLN0. Health.t.e Accuracy <> Utc Time Quality Accuracy_To_Accuracy(Quality) THEN Quality := fb IED. Relay. LLN0. Health.t. Quality; END_IF Quality. Leap Seconds Known := FALSE; Quality. Clock Failure := FALSE; Quality. Clock Not Synchronized := FALSE; Accuracy_To_Utc Time Quality Accuracy( E_Utc Time Accuracy._05,(* 5 bits accuracy *) b Accuracy0=>Quality. Accuracy0, b Accuracy1=>Quality. Accuracy1, b Accuracy2=>Quality. Accuracy2, b Accuracy3=>Quality. Accuracy3, b Accuracy4=>Quality. Accuracy4 ); s Quality := Utc Time Quality_To_String(Quality);(* s Quality := 'UQ#000|5' *) 328 Version: 1.7.1 TF6510
## Page 329

PLC API IF fb IED. Relay. LLN0. Mod_.t.e Accuracy <> Utc Time Quality Accuracy_To_Accuracy(Quality) THEN Quality := fb IED. Relay. LLN0. Mod_.t. Quality; END_IF Quality. Leap Seconds Known := FALSE; Quality. Clock Failure := FALSE; Quality. Clock Not Synchronized := FALSE; Accuracy_To_Utc Time Quality Accuracy( E_Utc Time Accuracy. Unspecified,(* Unspecified accuracy *) b Accuracy0=>Quality. Accuracy0, b Accuracy1=>Quality. Accuracy1, b Accuracy2=>Quality. Accuracy2, b Accuracy3=>Quality. Accuracy3, b Accuracy4=>Quality. Accuracy4 ); s Quality := Utc Time Quality_To_String(Quality);(* s Quality := 'UQ#000|31' *) IF fb IED. Relay. MMXU1.ph V.phs A.t.e Accuracy <> Utc Time Quality Accuracy_To_Accuracy(Quality) THEN Quality := fb IED. Relay. MMXU1.ph V.phs A.t. Quality; END_IF Utc Time Quality Accuracy_To From_Accuracy := TRUE; 6.4.66 Utc Time Stamp_To_String Converts the components of the structured type T_Utc Time [} 519] into a formatted UTC timestamp string. The resulting string has the following structure: 'US#YYY-MM-DD-hh:mm:ss.nnnnnnn': YYYY:=year MM:=month DD:=day hh:=hour mm:=minutes ss:=seconds nnnnnnn:=nanoseconds (9 decimal places). The T_Utc Time [} 519]. Quality component is not converted to the string. Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) Syntax FUNCTION Utc Time Stamp_To_String : STRING(32) VAR_INPUT in : T_Utc Time; END_VAR VAR_OUTPUT b Error : BOOL; END_VAR Inputs Name Type Description in T_Utc Time [} 519] The time information to be converted as a UTC-Time structure. Outputs Name Type Description b Error BOOL The output is "TRUE" if the input value could not be converted without error. Return value Name Type Description Utc Time Stamp_To_String STRING(32) Converted time information as a formatted UTC timestamp string. TF6510 Version: 1.7.1 329
## Page 330

PLC API Sample PROGRAM MAIN VAR t Utc : T_Utc Time; s Utc : STRING; b Error : BOOL; second Since Epoch : DT; fraction Of Second : T_UINT24; END_VAR t Utc:=String_To_Utc Time Stamp(in:='US#2022-09-15-16:12:34.750000000' , b Error=>b Error, second Since Epo ch=>second Since Epoch, fraction Of Second=>fraction Of Second); s Utc:=Utc Time Stamp_To_String(in:=t Utc, b Error=>b Error); (* => s Utc = 'US#2022-09-15-16:12:34.750000000' *) t Utc.second Since Epoch:=DT#2022-09-15-00:00:00; t Utc.fraction Of Second[0]:=0; t Utc.fraction Of Second[1]:=0; t Utc.fraction Of Second[2]:=0; s Utc:=Utc Time Stamp_To_String(in:=t Utc, b Error=>b Error); (* => s Utc ='US#2022-09-15-00:00:00.000000000' *) 6.4.67 Validity_To_Acsi Quality Validity Converts the value of the enumeration type E_Acsi Quality Validity [} 464] into two Boolean values. These two output values correspond to the Validity0 and Validity1 bit components of the structured type ST_Acsi Quality [} 503]. See also: Coding of the Validity0..1-bits [} 723]. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax FUNCTION Validity_To_Acsi Quality Validity VAR_INPUT in : E_Acsi Quality Validity; END_VAR VAR_OUTPUT b Validity0 : BOOL; b Validity1 : BOOL; END_VAR Inputs Name Type Description in E_Acsi Quality Validity [} 464] The information to be converted as an enumeration type. Outputs Converted information as ST_Acsi Quality [} 503]. Validity0..1-bit components. Name Type Description b Validity0 BOOL Validity MSB bit. b Validity1 BOOL Validity LSB bit. Return value None. Sample METHOD Acsi Quality Validity_To From_Validity : BOOL VAR_INPUT fb IED : REFERENCE TO FB_IED; END_VAR VAR 330 Version: 1.7.1 TF6510
## Page 331

PLC API q Value : ST_Acsi Quality; s Value : STRING; END_VAR IF NOT __ISVALIDREF(fb IED) THEN RETURN; END_IF Validity_To_Acsi Quality Validity(E_Acsi Quality Validity. Good, b Validity0=>q Value. Validity0, b Validity1 =>q Value. Validity1); q Value. Overflow := FALSE; q Value. Out Of Range := FALSE; q Value. Bad Reference := FALSE; q Value. Oscillatory := FALSE; q Value. Failure := FALSE; q Value. Old Data := FALSE; q Value. Inconsistent := FALSE; q Value. Inaccurate := FALSE; q Value. Source := Source_To_Acsi Quality Source(E_Acsi Quality Source. Process); q Value. Test := FALSE; q Value. Operator Blocked := FALSE; s Value := Acsi Quality_To_String(q Value);(* s Value := 'Q#00|00000000|0|00' *) IF fb IED. Relay. LLN0. Beh.q.e Validity <> Acsi Quality Validity_To_Validity(q Value) THEN q Value := fb IED. Relay. LLN0. Beh.q.q Value; END_IF Acsi Quality Validity_To From_Validity := TRUE; 6.4.68 WORD_To_Acsi Quality Converts the binary data of the type WORD into the components of the structured type ST_Acsi Quality [} 503]. The coding of the components in the WORD corresponds to the Twin CAT Quality-WORD format specification [} 724]. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax FUNCTION Word_To_Acsi Quality : ST_Acsi Quality VAR_INPUT in : WORD(0..8191); END_VAR Inputs Name Type Description in WORD(0..8191) The information to be converted as Quality binary data. Return value Name Type Description WORD_To_Acsi Quality ST_Acsi Quality [} 503] Converted information as a Quality structure. Sample METHOD Acsi Quality_To From_WORD : BOOL VAR_INPUT fb IED : REFERENCE TO FB_IED; END_VAR VAR q Value : ST_Acsi Quality; s Value : STRING; n Value : WORD; END_VAR IF NOT __ISVALIDREF(fb IED) THEN RETURN; END_IF TF6510 Version: 1.7.1 331
## Page 332

PLC API q Value := WORD_To_Acsi Quality(0); s Value := Acsi Quality_To_String(q Value);(* s Value := 'Q#00|00000000|0|00' *) n Value := Acsi Quality_To_WORD(q Value);(* n Value := 2#00000000_00000000 *) IF fb IED. Relay. LLN0. Beh.q.n Value <> n Value THEN q Value := fb IED. Relay. LLN0. Beh.q.q Value; END_IF q Value := String_To_Acsi Quality('Q#01|00110011|0|01'); s Value := Acsi Quality_To_String(q Value);(* s Value := 'Q#01|00110011|0|01' *) n Value := Acsi Quality_To_Word(q Value);(* n Value := 2#00010011_00110010 *) IF fb IED. Relay. LLN0. Health.q.n Value <> n Value THEN q Value := fb IED. Relay. LLN0. Health.q.q Value; END_IF q Value := String_To_Acsi Quality('Q#10|11001100|1|10'); s Value := Acsi Quality_To_String(q Value);(* s Value := 'Q#10|11001100|1|10' *) n Value := Acsi Quality_To_Word(q Value);(* n Value := 2#00001100_11001101 *) IF fb IED. Relay. LLN0. Mod_.q.n Value <> n Value THEN q Value := fb IED. Relay. LLN0. Mod_.q.q Value; END_IF Acsi Quality_To From_WORD := TRUE; 6.4.69 Zero Octet String Overwrites all octets of an octet string with the value: 0. Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) FUNCTION Zero Octet String : UDINT VAR_IN_OUT o : ARRAY[*] OF BYTE; END_VAR / Inputs/Outputs Name Type Description o ARRAY[*] OF BYTE Octet string whose octets are to be overwritten with 0. Return value Name Type Description Zero Octet String UDINT Number of octets overwritten. Example METHOD FINAL Sample_Zero Octet String : BOOL VAR o6 : T_OCTET6:=[6(16#FF)]; o8 : T_OCTET8:=[8(16#FF)]; o64 : T_OCTET64:=[64(16#FF)]; size: UDINT; END_VAR size:=Zero Octet String(o:=o6);(* size:=6, all octets: 0 *) size:=Zero Octet String(o:=o8);(* size:=8, all octets: 0 *) size:=Zero Octet String(o:=o64);(* size:=64, all octets: 0 *) Sample_Zero Octet String:=TRUE; 332 Version: 1.7.1 TF6510
## Page 333

PLC API 6.5 Interfaces 6.5.1 Data model 6.5.1.1 Data attributes 6.5.1.1.1 I_Acsi DAType Scaled Value Config Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy I_Acsi Common Node Class [} 344] -> I_Acsi Common Data Class [} 336] -> I_Asci Common Attribute Class [} 334] - > I_Acsi DAType Scaled Value Config INTERFACE I_Acsi DAType Scaled Value Config EXTENDS I_Acsi Common Attribute Class Methods Name Description Scale ATo P [} 333] Scales an attribute value into a process value Scale PTo A [} 333] Scales a process value into an attribute value Properties Name Type Access Description f Offset REAL Get,Set Attribute value: Scaling offset f Scale Factor REAL Get,Set Attribute value: Scaling factor 6.5.1.1.1.1 Scale ATo P Scales an attribute value of type DINT (attribute i of Analog Value) to a process value of type LREAL. The conversion formula is: METHOD Scale ATo P : LREAL VAR_INPUT i Value : DINT; END_VAR Return parameter: Scaled process value 6.5.1.1.1.2 Scale PTo A Scales a process value of type LREAL to an attribute value of type DINT (attribute i of Analog Value). The conversion formula is: METHOD Scale PTo A : DINT VAR_INPUT f Process : LREAL; END_VAR Return parameter: Scaled attribute value TF6510 Version: 1.7.1 333
## Page 334

PLC API 6.5.1.1.2 I_Acsi DAType Unit Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy I_Acsi Common Node Class [} 344] -> I_Acsi Common Data Class [} 336] -> I_Asci Common Attribute Class [} 334] - > I_Acsi DAType Unit INTERFACE I_Acsi DAType Unit EXTENDS I_Acsi Common Data Class, I_Acsi Common Attribute Class Methods Name Description Scale ATo P [} 334] Scales an attribute value into a process value Scale PTo A [} 334] Scales a process value into an attribute value Properties Name Type Access Description e Multiplier E_Acsi Multiplier [} 455] Get,Set Attribute value: Multiplier e SIUnit E_Acsi SIUnit [} 471] Get,Set Attribute value: SI unit 6.5.1.1.2.1 Scale ATo P Scales an attribute value of type REAL (attribute f of Analog Value) to a process value of type LREAL. The conversion formula is: METHOD Scale ATo P : LREAL VAR_INPUT f Value : REAL; END_VAR Return parameter: Scaled process value 6.5.1.1.2.2 Scale PTo A Scales a process value of type LREAL to an attribute value of type REAL (attribute f of Analog Value). The conversion formula is: METHOD Scale PTo A : REAL VAR_INPUT f Process : LREAL; END_VAR Return parameter: Scaled attribute value 6.5.1.2 I_Acsi Common Attribute Class Objects that implement this interface are at the fifth hierarchical level (or higher) of the IEC 61850 data model and are referred to as data attributes (DA). Data attributes are the smallest object units. They contain detailed information such as data object values. Multiple data attributes are often grouped into larger units (common data classes, CDC), for example binary counter reading, BCR. There are also attributes that contain further attributes (e.g. Analog Value, Range Config or Unit). Such attributes are referred to as 334 Version: 1.7.1 TF6510
## Page 335

PLC API "constructed attributes". This can result in further, deeper hierarchical levels. The Twin CAT Telecontrol Configurator generates function blocks for these levels, which are derived/extended from FB_Acsi Common Attribute Class [} 147]. All function blocks derived from FB_Acsi Common Attribute Class [} 147] automatically have the interface referred to above implemented by default. For objects that implement this interface, the same services can be used as for the I_Acsi Common Data Class [} 336] interface (e.g. Get Data Values, Set Data Values). Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy I_Acsi Common Node Class [} 344] -> I_Acsi Common Data Class [} 336] -> I_Acsi Common Attribute Class INTERFACE I_Acsi Common Attribute Class EXTENDS I_Acsi Common Data Class Methods Name Description Add Attribute To Container [} 335] Adds a data attribute object to the container of another data attribute object 6.5.1.2.1 Add Attribute To Container This method is used to add a data attribute object (DA) to the container of another data attribute object (DA). METHOD Add Attribute To Container : BOOL VAR_INPUT ip Attribute : I_Acsi Common Attribute Class; END_VAR ip Attribute: Interface pointer of type I_Acsi Common Attribute Class [} 334] of the data attribute object, which is to be added to the container. Return parameter: Positive message (TRUE) on success, negative message (FALSE) on error. 6.5.1.3 I_Acsi Common Buffered Report Control Block Class Objects that implement this interface are report control block instances for buffered reports (buffered report control blocks, BRCBs). The Twin CAT Telecontrol Configurator generates report control block instances, which are derived/extended from FB_Acsi Common Buffered Report Control Block Class [} 148]. All function blocks derived from FB_Acsi Common Buffered Report Control Block Class [} 148] automatically have the interface referred to above implemented by default. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy I_Acsi Common Node Class [} 344] -> I_Acsi Common Data Class [} 336] -> I_Acsi Common Control Block Class [} 335] -> I_Acsi Common Buffered Report Control Block Class INTERFACE I_Acsi Common Buffered Report Control Block Class EXTENDS I_Acsi Common Control Block Class 6.5.1.4 I_Acsi Common Control Block Class All objects that are control block instances implement an interface that inherits from this interface. This interface serves as the base interface for all control blocks. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy TF6510 Version: 1.7.1 335
## Page 336

PLC API I_Acsi Common Node Class [} 344] -> I_Acsi Common Data Class [} 336] -> I_Acsi Common Control Block Class INTERFACE I_Acsi Common Control Block Class EXTENDS I_Acsi Common Data Class 6.5.1.5 I_Acsi Common Controllable Data Class Objects that implement this interface can be used to run services such as Control, Operate, Cancel, Select or Select With Value. The Twin CAT Telecontrol Configurator generates function blocks for this purpose, which are derived/extended from FB_Acsi Common Controllable Data Class [} 149]. All function blocks derived from FB_Acsi Common Controllable Data Class [} 149] automatically have the interface referred to above implemented by default. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy I_Acsi Common Node Class [} 344] -> I_Acsi Common Data Class [} 336] - > I_Acsi Common Controllable Data Class INTERFACE I_Acsi Common Controllable Data Class EXTENDS I_Acsi Common Data Class 6.5.1.6 I_Acsi Common Data Class Objects that implement this interface are at the fourth hierarchical level of the IEC 61850 data model and are referred to as data objects (DO). IEC 61850-7-4 defines the scope of these data objects. Some data objects are mandatory, others are optional. Data objects can also serve as containers for other data objects. The Twin CAT Telecontrol Configurator generates function blocks for these levels, which are derived/extended from FB_Acsi Common Data Class [} 149]. All function blocks derived from FB_Acsi Common Data Class [} 149] automatically have the interface referred to above implemented by default. Services such as Get Data Values, Set Data Values can be applied to objects that implement this interface. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy I_Acsi Common Node Class [} 344] -> I_Acsi Common Data Class INTERFACE I_Acsi Common Data Class EXTENDS I_Acsi Common Node Class Methods Name Description Add Attribute To Container [} 336] Adds a data attribute object to the container of another data object Add Data To Container [} 337] Adds a data object to the container of another data object Add To Data Set [} 337] Adds a data object to the member container of the data set Delete From Data Set [} 337] Removes a data object from the member container of the data set Properties Name Type Access Description b Presence [} 338] BOOL Get,Set Attribute visibility Fc [} 338] DWORD Get,Set Functional group Trg Op [} 338] DWORD Get,Set Report trigger 6.5.1.6.1 Add Attribute To Container This method is used to add a data attribute object (DA) to the container of a data object (DO). 336 Version: 1.7.1 TF6510
## Page 337

PLC API METHOD Add Attribute To Container : BOOL VAR_INPUT ip Attribute : I_Acsi Common Attribute Class; END_VAR ip Attribute: Interface pointer of type I_Acsi Common Attribute Class [} 334] of the data attribute object, which is to be added to the container. Return parameter: Positive message (TRUE) on success, negative message (FALSE) on error. 6.5.1.6.2 Add Data To Container This method is used to add a data object (DO) to the container of another data object (DO). METHOD FINAL Add Data To Container : BOOL VAR_INPUT ip Data : I_Acsi Common Data Class; END_VAR ip Data: Interface pointer of type I_Acsi Common Attribute Class [} 336] of the data object, which is to be added to the container. Return parameter: Positive message (TRUE) on success, negative message (FALSE) on error. 6.5.1.6.3 Add To Data Set This method is used to add a data object (DO) to the member container of the data set. METHOD FINAL Add To Data Set : BOOL VAR_INPUT ip Data Set : I_Acsi Common Data Set Class; e Fc : E_Acsi Fc; END_VAR VAR_OUTPUT b Matched : BOOL; ip Dir Node : I_Acsi Data Set Member Class; END_VAR ip Data Set: Interface pointer of type I_Acsi Common Data Set Class [} 338] of the data set in whose member container the data object is to be added. e Fc: Functional group of the data object of type E_Acsi Fc [} 448]. b Matched: If TRUE, the data object is already in the member container. ip Dir Node: interface pointer of the new container list item. Return parameter: Positive message (TRUE) on success, negative message (FALSE) on error. 6.5.1.6.4 Delete From Data Set This method is used to remove a data object (DO) from the member container of the data set. METHOD FINAL Delete From Data Set : BOOL VAR_INPUT ip Data Set : I_Acsi Common Data Set Class; e Fc : E_Acsi Fc; END_VAR ip Data Set: Interface pointer of type I_Acsi Common Data Set Class [} 338] of the data set from whose member container the data object is to be removed. e Fc: Functional group of the data object of type E_Acsi Fc [} 448]. Return parameter: Positive message (TRUE) on success, negative message (FALSE) on error. TF6510 Version: 1.7.1 337
## Page 338

PLC API 6.5.1.6.5 b Presence This property determines whether the instance of a data object or data attribute is mandatory or optional. Setting the visibility of a constructed data attribute also sets the visibility of the lower-level data attribute to the same value. PROPERTY b Presence : BOOL {GET,SET} b Presence: Visibility/existence: • TRUE : = mandatory; • FALSE : = optional; 6.5.1.6.6 Trg Op This property specifies the trigger of a report (spontaneous transfer of data object or data attributes information). PROPERTY Trg Op : DWORD {GET,SET} Trg Op: Report trigger. One or more values can be ORed. 6.5.1.6.7 Fc This property specifies the functional group to which a data object or data attribute belongs. Setting the functional group of a constructed data attribute also sets the visibility of the lower-level data attribute to the same value. PROPERTY Fc : DWORD {GET,SET} Fc: Functional group. One or more values can be ORed. 6.5.1.7 I_Acsi Common Data Set Class Objects that implement this interface are data set instances. Twin CAT Telecontrol Configurator generates data set instances, which are derived/extended from FB_Acsi Common Data Set Class [} 150]. All function blocks derived from FB_Acsi Common Data Set Class [} 150] automatically have the interface referred to above implemented by default. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy I_Acsi Common Node Class [} 344] -> I_Acsi Common Data Set Class INTERFACE I_Acsi Common Data Set Class EXTENDS I_Acsi Common Node Class Methods Name Description Add Member [} 339] Adds a new data object to the member container Delete Member [} 339] Removes a data object from the member container Delete All Members Removes all data objects from the member container [} 339] Methods for event handling Name Description On Init [} 339] Initializes/configures the data objects in the member container 338 Version: 1.7.1 TF6510
## Page 339

PLC API Properties Name Type Access Description n Members UDINT Get Number of data objects in the member container 6.5.1.7.1 Add Member This method is used to add a data object (DO) to the member container of a data set. METHOD FINAL Add Member : BOOL VAR_INPUT ip Data : I_Acsi Common Data Class; e Fc : E_Acsi Fc; END_VAR VAR_OUTPUT b Matched : BOOL; ip Dir Node: I_Acsi Data Set Member Class; END_VAR ip Data: Interface pointer of type I_Acsi Common Data Class [} 336] of the data object, which is to be added to the member container. e Fc: Functional group of the data object of type E_Acsi Fc [} 448]. b Matched: If TRUE, the data object is already in the member container. ip Dir Node: interface pointer of the new container list item. Return parameter: Positive message (TRUE) on success, negative message (FALSE) on error. 6.5.1.7.2 Delete Member This method is used to remove a data object (DO) from the member container of the data set. METHOD FINAL Delete Member : BOOL VAR_INPUT ip Data : I_Acsi Common Data Class; e Fc : E_Acsi Fc; END_VAR ip Data: Interface pointer of type I_Acsi Common Data Class [} 336] of the data object, which is to be removed from the member container. e Fc: Functional group of the data object of type E_Acsi Fc [} 448]. Return parameter: Positive message (TRUE) on success, negative message (FALSE) on error. 6.5.1.7.3 Delete All Members This method is used to remove all data objects (DO) and data attributes (DA) from the member container of the data set. METHOD FINAL Delete All Members : BOOL VAR_OUTPUT n Deleted : UDINT; END_VAR n Deleted: Number of deleted data object and data attributes members. Return parameter: Positive message (TRUE) on success, negative message (FALSE) on error. 6.5.1.7.4 On Init This method can, but does not have to, be overloaded by the application. It can be used to fill the member container of the data set with the data object and data attribute references. METHOD On Init : BOOL TF6510 Version: 1.7.1 339
## Page 340

PLC API Return parameter: Positive message (TRUE) on success, negative message (FALSE) on error. 6.5.1.8 I_Acsi Common Goose Control Block Class Objects implementing this interface are control block instances for Generic Object Oriented Substation Events (GOOSE). The Twin CAT Telecontrol Configurator generates GOOSE control block instances that are derived/extended from FB_Acsi Common Goose Control Block Class [} 151]. All function blocks derived from FB_Acsi Common Goose Control Block Class [} 151] automatically have a default implementation of the above interface. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy I_Acsi Common Node Class [} 344] -> I_Acsi Common Data Class [} 336] -> I_Acsi Common Control Block Class [} 335] -> I_Acsi Common Goose Control Block Class INTERFACE I_Acsi Common Goose Control Block Class EXTENDS I_Acsi Common Control Block Class 6.5.1.9 I_Acsi Common IEDGroup Class Objects implementing this interface represent a group of multiple IEDs. All IEDs in this group use the same "Real-Time Ethernet Adapter (Multiple Protocol Handler)" for communication. These objects serve as containers for multiple server instances (e.g. multiple GOOSE Subscribers or Publishers). Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy __System. IQuery Interface -> I_Acsi Common IEDGroup Class INTERFACE I_Acsi Common IEDGroup Class EXTENDS __System. IQuery Interface Properties Name Type Access Description n IEDs UDINT Get Number of IEDs in the container. s Object Name T_Acsi Object Name [} 515] Get Object name. Day T_Acsi Tag [} 516] Get Additional object information. 6.5.1.10 I_Acsi Common Intelligent Electronic Device Class Objects that implement this interface are located in the top hierarchical level of the IEC 61850 data model. This level can also be referred to as a server instance. The Twin CAT Telecontrol Configurator generates function blocks for this level, which are derived/extended from FB_Acsi Common Intelligent Electronic Device Class [} 152]. All function blocks derived from FB_Acsi Common Intelligent Electronic Device Class [} 152] automatically have the interface referred to above implemented by default. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy I_Acsi Common Node Class [} 344] -> I_Acsi Common Intelligent Electronic Device Class INTERFACE I_Acsi Common Intelligent Electronic Device Class EXTENDS I_Acsi Common Node Class 340 Version: 1.7.1 TF6510
## Page 341

PLC API Methods Name Description Add Logical Device To Container [} 341] Adds a new logical device to the server container Properties Name Type Access Description n Logical Devices UDINT Get Number of logical devices in the server container 6.5.1.10.1 Add Logical Device To Container This method is used to add an object instance of the logical device (LD) to the server container (intelligent logical device, IED). METHOD FINAL Add Logical Device To Container : BOOL VAR_INPUT ip Logical Device : I_Acsi Common Logical Device Class; END_VAR VAR_OUTPUT b Matched : BOOL; ip Dir Node : I_Acsi Logical Device Container Class; END_VAR ip Logical Device: Interface pointer of type I_Acsi Common Logical Device Class [} 341] of the logical device, which is to be added to the container. b Matched: If TRUE, the object already exists in the container. ip Dir Node: interface pointer of the new container list item. Return parameter: Positive message (TRUE) on success, negative message (FALSE) on error. 6.5.1.11 I_Acsi Common Logical Device Class Objects that implement this interface are located in the second hierarchical level of the IEC 61850 data model. This level is referred to a logical device (LD). The Twin CAT Telecontrol Configurator generates function blocks for this level, which are derived/extended from FB_Acsi Common Logical Device Class [} 153]. All function blocks derived from FB_Acsi Common Logical Device Class [} 153] automatically have the interface referred to above implemented by default. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy I_Acsi Common Node Class [} 344] -> I_Acsi Common Logical Node Class INTERFACE I_Acsi Common Logical Device Class EXTENDS I_Acsi Common Node Class Methods Name Description Add Logical Node To Container [} 342] Adds a new logical node Properties Name Type Access Description n Logical Nodes UDINT Get Number of logical node in the container of the logical device TF6510 Version: 1.7.1 341
## Page 342

PLC API 6.5.1.11.1 Add Logical Node To Container This method is used to add an object instance of the logical node (LN) to the container of the logical device (LD). METHOD FINAL Add Logical Node To Container : BOOL VAR_INPUT ip Logical Node : I_Acsi Common Logical Node Class; END_VAR VAR_OUTPUT b Matched : BOOL; ip Dir Node : I_Acsi Logical Node Container Class; END_VAR ip Logical Node: Interface pointer of type I_Acsi Common Logical Node Class [} 342] of the logical node, which is to be added to the container. b Matched: If TRUE, the object already exists in the container. ip Dir Node: interface pointer of the new container list item. Return parameter: Positive message (TRUE) on success, negative message (FALSE) on error. 6.5.1.12 I_Acsi Common Logical Node Class Objects that implement this interface are located in the third hierarchical level of the IEC 61850 data model. This level is referred to as logical node (LN). The Twin CAT Telecontrol Configurator generates function blocks for this level, which are derived/extended from FB_Acsi Common Logical Node Class [} 154]. All function blocks derived from FB_Acsi Common Logical Node Class [} 154] automatically have the interface referred to above implemented by default. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy I_Acsi Common Node Class [} 344] -> I_Acsi Common Logical Node Class INTERFACE I_Acsi Common Logical Node Class EXTENDS I_Acsi Common Node Class Methods Name Description Add Data To Container [} 343] Adds a new data object Add Data Set To Container [} 343] Adds a new data set Add Unbuffered Report Control Block To Containe Adds a new report control block instance for unbuffered reports r [} 343] Add Buffered Report Control Block To Container Adds a new report control block instance for buffered reports [} 344] Add Goose Control Block To Container [} 344] Adds a new goose control block instance Properties Name Type Access Description n Data Sets UDINT Get Number of data sets in the container of the logical node n Buffered Report Control Blocks UDINT Get Number of report control block instances for unbuffered reports n Unbuffered Report Control Blocks UDINT Get Number of report control block instances for buffered reports n Goose Control Blocks UDINT Get Number of goose control block instances 342 Version: 1.7.1 TF6510
## Page 343

PLC API 6.5.1.12.1 Add Data To Container This method is used to add a data object (DO) to the container of the logical node (LN). METHOD FINAL Add Data To Container : BOOL VAR_INPUT ip Data : I_Acsi Common Data Class; END_VAR VAR_OUTPUT b Matched : BOOL; ip Dir Node : I_Acsi Data Container Class; END_VAR ip Data: Interface pointer of type I_Acsi Common Attribute Class [} 336] of the data object, which is to be added to the container. b Matched: If TRUE, the object already exists in the container. ip Dir Node: interface pointer of the new container list item. Return parameter: Positive message (TRUE) on success, negative message (FALSE) on error. 6.5.1.12.2 Add Data Set To Container This method is used to add an object instance of the data set to the container of the logical node (LN). METHOD FINAL Add Data Set To Container : BOOL VAR_INPUT ip Data Set : I_Acsi Common Data Set Class; END_VAR VAR_OUTPUT b Matched : BOOL; ip Dir Node : I_Acsi Data Set Container Class; END_VAR ip Data Set: Interface pointer of type I_Acsi Common Data Set Class [} 338] of the data set, which is to be added to the container. b Matched: If TRUE, the object already exists in the container. ip Dir Node: interface pointer of the new container list item. Return parameter: Positive message (TRUE) on success, negative message (FALSE) on error. 6.5.1.12.3 Add Unbuffered Report Control Block To Container This method is used to add a report control block instance for unbuffered reports (unbuffered report control block, URCB) to the container of the logical node (LN). METHOD FINAL Add Unbuffered Report Control Block To Container : BOOL VAR_INPUT ip Unbuffered Report Control Block : I_Acsi Common Unbuffered Report Control Block Class; END_VAR VAR_OUTPUT b Matched : BOOL; ip Dir Node : I_Acsi Ur CBContainer Class; END_VAR ip Unbuffered Report Control Block: Interface pointer of type I_Acsi Unbuffered Report Control Block Class [} 346] of the report control block instance, which is to be added to the container. b Matched: If TRUE, the object already exists in the container. ip Dir Node: interface pointer of the new container list item. Return parameter: Positive message (TRUE) on success, negative message (FALSE) on error. TF6510 Version: 1.7.1 343
## Page 344

PLC API 6.5.1.12.4 Add Buffered Report Control Block To Container This method is used to add a report control block instance for buffered reports (Buffered Report Control Block, BRCB) to the container of the logical node (LN). METHOD FINAL Add Buffered Report Control Block To Container : BOOL VAR_INPUT ip Buffered Report Control Block : I_Acsi Common Buffered Report Control Block Class; END_VAR VAR_OUTPUT b Matched : BOOL; ip Dir Node : I_Acsi Br CBContainer Class; END_VAR ip Buffered Report Control Block: Interface pointer of type I_Acsi Buffered Report Control Block Class [} 335] of the report control block instance, which is to be added to the container. b Matched: If TRUE, the object already exists in the container. ip Dir Node: interface pointer of the new container list item. Return parameter: Positive message (TRUE) on success, negative message (FALSE) on error. 6.5.1.12.5 Add Goose Control Block To Container This method is used to add a goose control block instance (generic object oriented substation event control block, GCB) to the container of the logical node (LN). METHOD FINAL Add Goose Control Block To Container : BOOL VAR_INPUT ip Goose Control Block : I_Acsi Common Goose Control Block Class; END_VAR VAR_OUTPUT b Matched : BOOL; ip Dir Node : I_Acsi Go CBContainer Class; END_VAR ip Goose Control Block: Interface pointer of type I_Acsi Common Goose Control Block Class of the goose control block instance, which is to be added to the container. b Matched: If TRUE, the object already exists in the container. ip Dir Node: interface pointer of the new container list item. Return parameter: Positive message (TRUE) on success, negative message (FALSE) on error. 6.5.1.13 I_Acsi Common Node Class Objects that implement this interface form the basis of the Twin CAT IEC 61850 data model. All function blocks generated by the Twin CAT Telecontrol Configurator implement this interface or are derived from the function block FB_Acsi Common Node Class [} 155], which implements this interface. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy I_Acsi Common Node Class INTERFACE I_Acsi Common Node Class Methods Name Description Get Object Reference Returns the reference path of an object instance [} 345] Get Server Object [} 345] Provides the interface pointer of the object instance of the server 344 Version: 1.7.1 TF6510
## Page 345

PLC API Properties Name Type Access Description s Object Name T_Acsi Object Name Get,Set Object name [} 346] [} 515] 6.5.1.13.1 Get Object Reference This method can be used to determine the reference path of an object instance of the Twin CAT IEC 61850 data model. The query of the server object instance (IEDs) returns the name of the server. In all other object instances above the server, the server name is not included in the reference path. The name of the functional group is not included in the reference path of the object instances above the logical nodes (LN). METHOD Get Object Reference : T_Acsi Object Reference Return parameter: String containing the reference path of the object instance. Example: Extract from a fictitious Twin CAT IEC 61850 data model: MA2C03 {IED} -MA2C03Relay {LD} -LLN0 {LN} -Mod {DO} st Val {DA} q {DA} t {DA} +Beh {DO} +Health {DO} +Nam Plt {DO} +LPHD1 {LN} ... Declaration part: PROGRAM MAIN VAR s Ref : T_Acsi Object Reference; END_VAR Implementation: s Ref := MA2C03. Get Object Reference(); (*'MA2C03'*) s Ref := MA2C03. MA2C03Relay. Get Object Reference(); (*'MA2C03Relay'*) s Ref := MA2C03. MA2C03Relay. LLN0. Get Object Reference(); (*'MA2C03Relay/LLN0'*) s Ref := MA2C03. MA2C03Relay. LLN0. Mod_. Get Object Reference(); (*'MA2C03Relay/LLN0. Mod'*) s Ref := MA2C03. MA2C03Relay. LLN0. Mod_.st Val. Get Object Reference();(*'MA2C03Relay/LLN0. Mod.st Val'*) s Ref := MA2C03. MA2C03Relay. LLN0. Mod_.q. Get Object Reference(); (*'MA2C03Relay/LLN0. Mod.q'*) s Ref := MA2C03. MA2C03Relay. LLN0. Mod_.t. Get Object Reference(); (*'MA2C03Relay/LLN0. Mod.t'*) s Ref := MA2C03. MA2C03Relay. LLN0. Beh. Get Object Reference(); (*'MA2C03Relay/LLN0. Beh'*) s Ref := MA2C03. MA2C03Relay. LLN0. Health. Get Object Reference(); (*'MA2C03Relay/LLN0. Health'*) s Ref := MA2C03. MA2C03Relay. LLN0. Nam Plt. Get Object Reference(); (*'MA2C03Relay/LLN0. Nam Plt'*) s Ref := MA2C03. MA2C03Relay. LPHD1. Get Object Reference(); (*'MA2C03Relay/LPHD1'*) 6.5.1.13.2 Get Server Object This method can be used to determine the interface pointer of the server object instance (top level of the IEC 61850 data model, IED). METHOD Get Server Object : BOOL VAR_OUTPUT ip Server : I_Acsi Common Intelligent Electronic Device Class; END_VAR ip Server: Interface pointer of type I_Acsi Common Intelligent Electronic Device Class [} 340] of the server object instance. Return parameter: Positive message (TRUE) on success, negative message (FALSE) on error. TF6510 Version: 1.7.1 345
## Page 346

PLC API 6.5.1.13.3 s Object Name PROPERTY s Object Name : T_Acsi Object Name (GET) s Object Name: Object name as string of type T_Acsi Object Name [} 515]. 6.5.1.14 I_Acsi Common Unbuffered Report Control Block Class Objects that implement this interface are report control block instances for unbuffered reports (unbuffered report control blocks, UBRCBs). The Twin CAT Telecontrol Configurator generates report control block instances, which are derived/extended from FB_Acsi Common Unbuffered Report Control Block Class [} 155]. All function blocks derived from FB_Acsi Common Unbuffered Report Control Block Class [} 155] automatically have the interface referred to above implemented by default. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy I_Acsi Common Node Class [} 344] -> I_Acsi Common Data Class [} 336] -> I_Acsi Common Control Block Class [} 335] -> I_Acsi Common Unbuffered Report Control Block Class INTERFACE I_Acsi Common Unbuffered Report Control Block Class EXTENDS I_Acsi Common Control Block Class 6.5.1.15 I_Acsi DAType Last Appl Error Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Inheritance hierarchy I_Acsi Common Node Class [} 344] -> I_Acsi Common Data Class [} 336] -> I_Asci Common Attribute Class [} 334] - > I_Acsi DAType Last Appl Error INTERFACE I_Acsi DAType Last Appl Error EXTENDS I_Acsi Common Attribute Class Properties Name Type Access Description s Cntrl Obj STRING(129) Get,Set Attribute value e Error E_Acsi Appl Error [} 438] Get,Set Attribute value st Origin ST_Acsi Originator [} 499] Get,Set Attribute value n Ctl Num BYTE Get,Set Attribute value e Add Cause E_Acsi Appl Add Cause Get,Set Attribute value [} 437] 6.5.2 Protocol settings 6.5.2.1 I_Gse Adapter Settings Class Objects that implement this interface are used to configure a network adapter that can be used for GSE communication. Namespace: Tc3_Gse [} 98] Library: Tc3_Gse (Tc3_Gse.compiled-library) Inheritance hierarchy I_Gse Adapter Settings Class INTERFACE I_Gse Adapter Settings Class 346 Version: 1.7.1 TF6510
## Page 347

PLC API Properties Name Type Ac- Description ces s b Exec Go BOOL Get Enables/disables automatic calling of the "Execute" method of the Publisher CBPubs GOOSE control blocks by the adapter. b Exec Go BOOL Get Enables/disables automatic calling of the "Execute" method of the Subscriber CBSubs GOOSE control blocks by the adapter. b Simulati BOOL Get Enables/disables the GOOSE simulation bit field. on e Adapter Tc Ethernet Ad Get Priority of the network adapter. Prio apter Priority [} 492] e Dispatc E_Gse Dispatc Get Setting whether received Ethernet telegrams are forwarded to the operating h Mode system. h Mode [} 484] mac Addr ETHERNET_A Get MAC address of the network adapter. DDRESS Set [} 490] multicast ETHERNET_A Get Selected single subscriber multicast address of the network adapter. If set, the Addr network adapter block instance receives only the subscriber messages sent to DDRESS this exact address. In this case, the address is used as a filter for the [} 490] subscriber messages. All other messages are forwarded either to the operating system or (if available) to further instances of the network adapter block. INFO: From Twin CAT TF6510 IEC 61850 Telecontrol v3.1.98.0 and higher: If this address has not been set ('00-00-00-00-00-00'), then all multicast addresses and APPIDs configured on the subscriber control block instances are used as filters for the subscriber messages. In this case, different multicast addresses can be configured in the GOOSE control block instances, for example. The configured Subscriber APPID's (if used > 0), must correspond to the APPID's on the Publisher page. All received messages that cannot be assigned to a control block are forwarded to the operating system or to further instances of the network adapter block. oid OTCID Get Twin CAT object ID of the network adapter. [} 491] s Mac Add STRING(17) Get Text representation of the MAC address of the network adapter. r s Multicas STRING(17) Get Text representation of the multicast address of the network adapter. t Addr Set 6.5.2.2 I_Scsm Client Settings Class Objects that implement this interface are used for configuring the SCSM communication layer (specific communication service mapping). Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) Inheritance hierarchy I_Socket Client Settings Class [} 362] -> I_Tpkt Client Settings Class [} 361] -> I_Rfc1006Client Settings Class [} 359] -> I_Ulosi Client Settings Class [} 355] -> I_Mms Client Settings Class [} 349] - > I_Scsm Client Settings Class TF6510 Version: 1.7.1 347
## Page 348

PLC API INTERFACE I_Scsm Client Settings Class EXTENDS I_Mms Client Settings Class Methods Name Description Defaults [} 348] Resets the configuration settings to the default values. Properties Name Type Access Description b Get Data Set Director BOOL Get Enables/disables the automatic y Members Reload initialization of the Data Sets/Data Set member. e Scsm Edition E_Scsm Edition [} 487] Get IEC 61850 data model edition (1 or 2) t Scsm Timeout TIME Get Maximum time that may not be exceeded during the execution of the confirmed services. e Trace Scsm T_Trace Level [} 488] Get Configures the priority level for the logging of the error messages and log messages. 6.5.2.2.1 Defaults This method resets the configuration settings to the default values. METHOD Defaults VAR_INPUT b All Of : BOOL; END_VAR b All Of: The value "FALSE" only resets the settings of the derived (current) class. If the value is "TRUE", the inherited settings of all base classes are also reset. 6.5.2.3 I_Scsm Connection Settings Class Objects that implement this interface are used for configuring the SCSM communication layer (specific communication service mapping). The configuration settings only apply to a selected server session function block instance. Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) Inheritance hierarchy I_Socket Connection Settings Class [} 363] -> I_Tpkt Connection Settings Class [} 361] - > I_Rfc1006Connection Settings Class [} 359] -> I_Ulosi Connection Settings Class [} 357] - > I_Mms Connection Settings Class [} 353] -> I_Scsm Connection Settings Class INTERFACE I_Scsm Connection Settings Class EXTENDS I_Mms Connection Settings Class Methods Name Description Defaults [} 348] Resets the configuration settings to the default values. 6.5.2.3.1 Defaults This method resets the configuration settings to the default values. 348 Version: 1.7.1 TF6510
## Page 349

PLC API METHOD Defaults VAR_INPUT b All Of : BOOL; END_VAR b All Of: The value "FALSE" only resets the settings of the derived (current) class. If the value is "TRUE", the inherited settings of all base classes are also reset. 6.5.2.4 I_Scsm Server Settings Class Objects that implement this interface are used for configuring the SCSM communication layer (specific communication service mapping). Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) Inheritance hierarchy I_Socket Server Settings Class [} 364] -> I_Tpkt Server Settings Class [} 362] -> I_Rfc1006Server Settings Class [} 360] -> I_Ulosi Server Settings Class [} 357] -> I_Mms Server Settings Class [} 353] - > I_Scsm Server Settings Class INTERFACE I_Scsm Server Settings Class EXTENDS I_Mms Server Settings Class Methods Name Description Defaults [} 349] Resets the configuration settings to the default values. Properties Name Type Access Description b Get Data Set Director BOOL Get Enables/disables the automatic y Members Reload initialization of the Data Sets/Data Set member. e Scsm Edition E_Scsm Edition [} 487] Get IEC 61850 data model edition (1 or 2) t Scsm Timeout TIME Get Maximum time that may not be exceeded during the execution of the confirmed services. e Trace Scsm T_Trace Level [} 488] Get Configures the priority level for the logging of the error messages and log messages. 6.5.2.4.1 Defaults This method resets the configuration settings to the default values. METHOD Defaults VAR_INPUT b All Of : BOOL; END_VAR b All Of: The value "FALSE" only resets the settings of the derived (current) class. If the value is "TRUE", the inherited settings of all base classes are also reset. 6.5.2.5 I_Mms Client Settings Class Objects that implement this interface are used to configure the MMS communication layer. Namespace: Tc3_Mms [} 98] Library: Tc3_Mms (Tc3_Mms.compiled-library) TF6510 Version: 1.7.1 349
## Page 350

PLC API Inheritance hierarchy I_Socket Client Settings Class [} 362] -> I_Tpkt Client Settings Class [} 361] -> I_Rfc1006Client Settings Class [} 359] -> I_Ulosi Client Settings Class [} 355] -> I_Mms Client Settings Class INTERFACE I_Mms Client Settings Class EXTENDS I_Ulosi Client Settings Class Methods Name Description Defaults [} 352] Resets the configuration settings to the default values. Properties Name Type Access Description n Local Detail T_Mms Integer32 [} 517] Get MMS Initiate-Request PDU parameter: local Detail Calling. n Max Serv Out Calling T_Mms Integer16 [} 517] Get MMS Initiate-Request PDU parameter: proposed Max Serv Outstanding Cal ling n Max Serv Out Called T_Mms Integer16 [} 517] Get MMS Initiate-Request PDU parameter: proposed Max Serv Outstanding Cal led. n Nesting Level T_Mms Integer8 [} 517] Get MMS Initiate-Request PDU parameter: proposed Data Structure Nesting Le vel. n Mms Version Number T_Mms Integer16 [} 517] Get MMS init Request Detail parameter: proposed Version Number. ip Parameters I_Mms Parameter Support Options Get Interface pointer of the object for the configuration of the MMS [} 351] init Request Detail parameter: proposed Parameter CBB. ip Services I_Mms Service Support Options Get Interface pointer of the object for the configuration of the MMS [} 351] init Request Detail parameter: services Supported Calling. ip Extended Services I_Mms Additional Support Options Get Interface pointer of the object for the configuration of the MMS [} 352] init Request Detail parameter: additional Supported Calling. ip Extended Parameters I_Mms Additional CBBOptions Get Interface pointer of the object for the configuration of the MMS [} 352] init Request Detail parameter: additional Cbb Supported Calling. s Provilege Class Identity T_Mms Visible String [} 518] Get MMS-init Request Detail parameter: privilege Class Identity Called. t Mms Timeout TIME Get Maximum time that may not be exceeded during the execution of the confirmed services. e Trace Mms E_Trace Level [} 488] Get Configures the priority level for the logging of the error messages and log messages. 350 Version: 1.7.1 TF6510
## Page 351

PLC API 6.5.2.5.1 I_Mms Service Support Options Configures the supported services of the MMS communication layer. Inheritance hierarchy I_Mms Service Support Options INTERFACE I_Mms Service Support Options Properties Name Type Access Description b Cancel BOOL Get,Set b Conclude BOOL Get,Set b Define Named Type BOOL Get,Set b Define Named Variable BOOL Get,Set b Define Named Variable List BOOL Get,Set b Define Scattered Access BOOL Get,Set b Delete Named Type BOOL Get,Set b Delete Named Variable List BOOL Get,Set b Delete Variable Access BOOL Get,Set b Get Domain Attributes BOOL Get,Set b Get Named Type Attributes BOOL Get,Set b Get Named Variable List Attributes BOOL Get,Set b Get Name List BOOL Get,Set b Get Scattered Access Attributes BOOL Get,Set b Get Variable Access Attributes BOOL Get,Set b Identify BOOL Get,Set b Information Report BOOL Get,Set b Read BOOL Get,Set b Rename BOOL Get,Set b Status BOOL Get,Set b Write BOOL Get,Set 6.5.2.5.2 I_Mms Parameter Support Options Configures the supported parameters of the MMS communication layer. Inheritance hierarchy I_Mms Parameter Support Options INTERFACE I_Mms Parameter Support Options TF6510 Version: 1.7.1 351
## Page 352

PLC API Properties Name Type Access Description b Cspi BOOL Get,Set b Csr BOOL Get,Set b Str1 BOOL Get,Set Array support b Str2 BOOL Get,Set Structure support b Vadr BOOL Get,Set b Valt BOOL Get,Set Support for index and index range values (alternate access) b Vlis BOOL Get,Set Support for named Variable List b Vnam BOOL Get,Set Support for named Variables 6.5.2.5.3 I_Mms Additional Support Options Configures the additionally supported MMS services. Inheritance hierarchy I_Mms Additional Support Options INTERFACE I_Mms Additional Support Options Properties Name Type Access Description b Vmd Reset BOOL Get,Set b Vmd Stop BOOL Get,Set b Select BOOL Get, Set 6.5.2.5.4 I_Mms Additional CBBOptions Configures the additionally supported MMS CBB parameters. Inheritance hierarchy I_Mms Additional CBBOptions INTERFACE I_Mms Additional CBBOptions Properties Name Type Access Description b Dei BOOL Get,Set b Des BOOL Get,Set b Red BOOL Get, Set 6.5.2.5.5 Defaults This method resets the configuration settings to the default values. METHOD Defaults VAR_INPUT b All Of : BOOL; END_VAR b All Of: The value "FALSE" only resets the settings of the derived (current) class. If the value is "TRUE", the inherited settings of all base classes are also reset. 352 Version: 1.7.1 TF6510
## Page 353

PLC API 6.5.2.6 I_Mms Connection Settings Class Objects that implement this interface are used to configure the MMS communication layer. The configuration settings only apply to a selected server session function block instance. Namespace: Tc3_Mms [} 98] Library: Tc3_Mms (Tc3_Mms.compiled-library) Inheritance hierarchy I_Socket Connection Settings Class [} 363] -> I_Tpkt Connection Settings Class [} 361] - > I_Rfc1006Connection Settings Class [} 359] -> I_Ulosi Connection Settings Class [} 357] - > I_Mms Connection Settings Class INTERFACE I_Mms Connection Settings Class EXTENDS I_Ulosi Connection Settings Class Methods Name Description Defaults [} 353] Resets the configuration settings to the default values. 6.5.2.6.1 Defaults This method resets the configuration settings to the default values. METHOD Defaults VAR_INPUT b All Of : BOOL; END_VAR b All Of: The value "FALSE" only resets the settings of the derived (current) class. If the value is "TRUE", the inherited settings of all base classes are also reset. 6.5.2.7 I_Mms Server Settings Class Objects that implement this interface are used to configure the MMS communication layer. Namespace: Tc3_Mms [} 98] Library: Tc3_Mms (Tc3_Mms.compiled-library) Inheritance hierarchy I_Socket Server Settings Class [} 364] -> I_Tpkt Server Settings Class [} 362] -> I_Rfc1006Server Settings Class [} 360] -> I_Ulosi Server Settings Class [} 357] -> I_Mms Server Settings Class INTERFACE I_Mms Server Settings Class EXTENDS I_Ulosi Server Settings Class Methods Name Description Defaults [} 354] Resets the configuration settings to the default values. TF6510 Version: 1.7.1 353
## Page 354

PLC API Properties Name Type Access Description n Local Detail T_Mms Integer32 [} 517] Get MMS Initiate-Request PDU parameter: local Detail Calling. n Max Serv Out Calling T_Mms Integer16 [} 517] Get MMS Initiate-Request PDU parameter: proposed Max Serv Outstanding Cal ling n Max Serv Out Called T_Mms Integer16 [} 517] Get MMS Initiate-Request PDU parameter: proposed Max Serv Outstanding Cal led. n Nesting Level T_Mms Integer8 [} 517] Get MMS Initiate-Request PDU parameter: proposed Data Structure Nesting Le vel. n Mms Version Number T_Mms Integer16 [} 517] Get MMS init Request Detail parameter: proposed Version Number. ip Parameters I_Mms Parameter Support Options Get Interface pointer of the object for the configuration of the MMS [} 351] init Request Detail parameter: proposed Parameter CBB. ip Services I_Mms Service Support Options Get Interface pointer of the object for the configuration of the MMS [} 351] init Request Detail parameter: services Supported Calling. ip Extended Services I_Mms Additional Support Options Get Interface pointer of the object for the configuration of the MMS [} 352] init Request Detail parameter: additional Supported Calling. ip Extended Parameters I_Mms Additional CBBOptions Get Interface pointer of the object for the configuration of the MMS [} 352] init Request Detail parameter: additional Cbb Supported Calling. s Provilege Class Identity T_Mms Visible String [} 518] Get MMS-init Request Detail parameter: privilege Class Identity Called. t Mms Timeout TIME Get Maximum time that may not be exceeded during the execution of the confirmed services. e Trace Mms E_Trace Level [} 488] Get Configures the priority level for the logging of the error messages and log messages. 6.5.2.7.1 Defaults This method resets the configuration settings to the default values. METHOD Defaults VAR_INPUT b All Of : BOOL; END_VAR b All Of: The value "FALSE" only resets the settings of the derived (current) class. If the value is "TRUE", the inherited settings of all base classes are also reset. 354 Version: 1.7.1 TF6510
## Page 355

PLC API 6.5.2.8 I_Ulosi Client Settings Class Objects that implement this interface are used to configure the ULOSI communication layer (upper layer OSI). Namespace: Tc3_Ulosi [} 98] Library: Tc3_Ulosi (Tc3_Ulosi.compiled-library) Inheritance hierarchy I_Socket Client Settings Class [} 362] -> I_Tpkt Client Settings Class [} 361] -> I_Rfc1006Client Settings Class [} 359] -> I_Ulosi Client Settings Class INTERFACE I_Ulosi Client Settings Class EXTENDS I_Rfc1006Client Settings Class Methods Name Description Defaults [} 356] Resets the configuration settings to the default values. TF6510 Version: 1.7.1 355
## Page 356

PLC API Properties Name Type Access Description s Calling_S_Sele STRING Get Calling-S-selector. ctor s Called_S_Sele STRING Get Called-S-selector. ctor n Session Requir WORD Get Session requirements. ement s Calling_P_Sele STRING Get Calling-P-selector. ctor s Called_P_Sele STRING Get Called-P-selector. ctor n Present Require BYTE Get Presentation requirements. ments n Present Protoco BYTE Get Presentation protocol version. l Version n Protocol_Versi BYTE Get Association Control Service protocol version. on s Context_Name STRING Get Application context name (object identifier, dotted presentation), MMS. s Called_AP_Titl STRING Get Called-AP-title. e n Called_AE_Qu UDINT Get Called-AE-qualifier. alifier n Called_AP_Inv I UDINT Get Called-AP-invocation-identifier. D n Called_AE_Inv I UDINT Get Called-AE-invocation-identifier. D s Calling_AP_Titl STRING Get Calling-AP-title. e n Calling_AE_Qu UDINT Get Calling-AE-qualifier. alifier n Calling_AP_Inv UDINT Get Calling-AP-invocation-identifier. ID n Calling_AE_Inv UDINT Get Calling-AE-invocation-identifier. ID n Requirements BYTE Get Association Control Service requirements. s Mechanism_Na STRING Get Authentication mechanism name. me s Authent_Value STRING Get Authentication value (password). s Responding_V STRING Get Responding authentication value (password). alue e Acse_Authent E_Acse Authenticati Get Authentication mode. on [} 434] t Ulosi Timeout TIME Get Maximum time that may not be exceeded during the execution of the confirmed services. e Trace Ulosi E_Trace Level Get Configures the priority level for the logging of the error messages and log messages. [} 488] 6.5.2.8.1 Defaults This method resets the configuration settings to the default values. 356 Version: 1.7.1 TF6510
## Page 357

PLC API METHOD Defaults VAR_INPUT b All Of : BOOL; END_VAR b All Of: The value "FALSE" only resets the settings of the derived (current) class. If the value is "TRUE", the inherited settings of all base classes are also reset. 6.5.2.9 I_Ulosi Connection Settings Class Objects that implement this interface are used to configure the ULOSI communication layer (upper layer OSI). The configuration settings only apply to a selected server session function block instance. Namespace: Tc3_Ulosi [} 98] Library: Tc3_Ulosi (Tc3_Ulosi.compiled-library) Inheritance hierarchy I_Socket Connection Settings Class [} 363] -> I_Tpkt Connection Settings Class [} 361] - > I_Rfc1006Connection Settings Class [} 359] -> I_Ulosi Connection Settings Class INTERFACE I_Ulosi Connection Settings Class EXTENDS I_Rfc1006Connection Settings Class Methods Name Description Defaults [} 357] Resets the configuration settings to the default values. Properties Name Type Access Description s Authent_Value STRING Get Connection-specific authentication password. Remote communication partner (client) connected to the selected server session function block instance can successfully authenticate with the server using this password. 6.5.2.9.1 Defaults This method resets the configuration settings to the default values. METHOD Defaults VAR_INPUT b All Of : BOOL; END_VAR b All Of: The value "FALSE" only resets the settings of the derived (current) class. If the value is "TRUE", the inherited settings of all base classes are also reset. 6.5.2.10 I_Ulosi Server Settings Class Objects that implement this interface are used to configure the ULOSI communication layer (upper layer OSI). Namespace: Tc3_Ulosi [} 98] Library: Tc3_Ulosi (Tc3_Ulosi.compiled-library) Inheritance hierarchy I_Socket Server Settings Class [} 364] -> I_Tpkt Server Settings Class [} 362] -> I_Rfc1006Server Settings Class [} 360] -> I_Ulosi Server Settings Class INTERFACE I_Ulosi Server Settings Class EXTENDS I_Rfc1006Server Settings Class TF6510 Version: 1.7.1 357
## Page 358

PLC API Methods Name Description Defaults [} 358] Resets the configuration settings to the default values. Properties Name Type Ac- Description cess s Calling_S_Selecto STRING Get Calling-S-selector. r s Called_S_Selector STRING Get Called-S-selector. n Session Requirem WORD Get Session requirements. ent s Calling_P_Selecto STRING Get Calling-P-selector. r s Called_P_Selector STRING Get Called-P-selector. n Present Requireme BYTE Get Presentation requirements. nts n Present Protocol Ve BYTE Get Presentation protocol version. rsion n Protocol_Version BYTE Get Association Control Service protocol version. s Context_Name STRING Get Application context name (object identifier, dotted presentation), MMS. s Called_AP_Title STRING Get Called-AP-title. n Called_AE_Qualifi UDINT Get Called-AE-qualifier. er n Called_AP_Inv ID UDINT Get Called-AP-invocation-identifier. n Called_AE_Inv ID UDINT Get Called-AE-invocation-identifier. s Calling_AP_Title STRING Get Calling-AP-title. n Calling_AE_Qualifi UDINT Get Calling-AE-qualifier. er n Calling_AP_Inv ID UDINT Get Calling-AP-invocation-identifier. n Calling_AE_Inv ID UDINT Get Calling-AE-invocation-identifier. n Requirements BYTE Get Association Control Service requirements. s Mechanism_Name STRING Get Authentication mechanism name. s Authent_Value STRING Get Authentication value (password). s Responding_Value STRING Get Responding authentication value (password). e Acse_Authent E_Acse Authen Get Authentication mode. tication [} 434] t Ulosi Timeout TIME Get Maximum time that may not be exceeded during the execution of the confirmed services. e Trace Ulosi E_Trace Level Get Configures the priority level for the logging of the error messages and log messages. [} 488] 6.5.2.10.1 Defaults This method resets the configuration settings to the default values. METHOD Defaults VAR_INPUT b All Of : BOOL; END_VAR 358 Version: 1.7.1 TF6510
## Page 359

PLC API b All Of: The value "FALSE" only resets the settings of the derived (current) class. If the value is "TRUE", the inherited settings of all base classes are also reset. 6.5.2.11 I_Rfc1006Client Settings Class Objects that implement this interface are used to configure the RFC1006 communication layer. Namespace: Tc3_Rfc1006 [} 98] Library: Tc3_Rfc1006 (Tc3_Rfc1006.compiled-library) Inheritance hierarchy I_Socket Client Settings Class [} 362] -> I_Tpkt Client Settings Class [} 361] -> I_Rfc1006Client Settings Class INTERFACE I_Rfc1006Client Settings Class EXTENDS I_Tpkt Client Settings Class Methods Name Description Defaults [} 359] Resets the configuration settings to the default values. Properties Name Type Access Description s Calling_T_Selector STRING Get RFC 1006 parameter: Calling transport address selector (source). s Called_T_Selector STRING Get RFC 1006 parameter: Called transport address selector (destination). e Tpdu Size E_Rfc1006Tpdu Size Get Maximum TPDU byte length. [} 487] t Rfc1006Timeout TIME Get Maximum time that may not be exceeded during the execution of the confirmed services. e Trace Rfc1006 E_Trace Level [} 488] Get Configures the priority level for the logging of the error messages and log messages. 6.5.2.11.1 Defaults This method resets the configuration settings to the default values. METHOD Defaults VAR_INPUT b All Of : BOOL; END_VAR b All Of: The value "FALSE" only resets the settings of the derived (current) class. If the value is "TRUE", the inherited settings of all base classes are also reset. 6.5.2.12 I_Rfc1006Connection Settings Class Objects that implement this interface are used to configure the RFC1006 communication layer. The configuration settings only apply to a selected server session function block instance. Namespace: Tc3_Rfc1006 [} 98] Library: Tc3_Rfc1006 (Tc3_Rfc1006.compiled-library) Inheritance hierarchy I_Socket Connection Settings Class [} 363] -> I_Tpkt Connection Settings Class [} 361] - > I_Rfc1006Connection Settings Class INTERFACE I_Rfc1006Connection Settings Class EXTENDS I_Tpkt Connection Settings Class TF6510 Version: 1.7.1 359
## Page 360

PLC API Methods Name Description Defaults [} 360] Resets the configuration settings to the default values. 6.5.2.12.1 Defaults This method resets the configuration settings to the default values. METHOD Defaults VAR_INPUT b All Of : BOOL; END_VAR b All Of: The value "FALSE" only resets the settings of the derived (current) class. If the value is "TRUE", the inherited settings of all base classes are also reset. 6.5.2.13 I_Rfc1006Server Settings Class Objects that implement this interface are used to configure the RFC1006 communication layer. Namespace: Tc3_Rfc1006 [} 98] Library: Tc3_Rfc1006 (Tc3_Rfc1006.compiled-library) Inheritance hierarchy I_Socket Server Settings Class [} 364] -> I_Tpkt Server Settings Class [} 362] -> I_Rfc1006Server Settings Class INTERFACE I_Rfc1006Server Settings Class EXTENDS I_Tpkt Server Settings Class Methods Name Description Defaults [} 360] Resets the configuration settings to the default values. Properties Name Type Access Description s Calling_T_Selector STRING Get RFC 1006 parameter: Calling transport address selector (source). s Called_T_Selector STRING Get RFC 1006 parameter: Called transport address selector (destination). e Tpdu Size E_Rfc1006Tpdu Size Get Maximum TPDU byte length. [} 487] t Rfc1006Timeout TIME Get Maximum time that may not be exceeded during the execution of the confirmed services. 6.5.2.13.1 Defaults This method resets the configuration settings to the default values. METHOD Defaults VAR_INPUT b All Of : BOOL; END_VAR b All Of: The value "FALSE" only resets the settings of the derived (current) class. If the value is "TRUE", the inherited settings of all base classes are also reset. 360 Version: 1.7.1 TF6510
## Page 361

PLC API 6.5.2.14 I_Tpkt Client Settings Class Objects that implement this interface are used to configure the TPKT communication layer (ISO transport services on top of the TCP). Namespace: Tc3_Tpkt [} 98] Library: Tc3_Tpkt (Tc3_Tpkt.compiled-library) Inheritance hierarchy I_Socket Client Settings Class [} 362] -> I_Tpkt Client Settings Class INTERFACE I_Tpkt Client Settings Class EXTENDS I_Socket Client Settings Class Methods Name Description Defaults [} 361] Resets the configuration settings to the default values. Properties Name Type Access Description t Tpkt Timeout TIME Get Maximum time that may not be exceeded during the execution of the confirmed services. e Trace Tpkt E_Trace Level [} 488] Get Configures the priority level for the logging of the error messages and log messages. 6.5.2.14.1 Defaults This method resets the configuration settings to the default values. METHOD Defaults VAR_INPUT b All Of : BOOL; END_VAR b All Of: The value "FALSE" only resets the settings of the derived (current) class. If the value is "TRUE", the inherited settings of all base classes are also reset. 6.5.2.15 I_Tpkt Connection Settings Class Objects that implement this interface are used to configure the TPKT communication layer (ISO transport services on top of the TCP). The configuration settings only apply to a selected server session function block instance. Namespace: Tc3_Tpkt [} 98] Library: Tc3_Tpkt (Tc3_Tpkt.compiled-library) Inheritance hierarchy I_Socket Connection Settings Class [} 363] -> I_Tpkt Connection Settings Class INTERFACE I_Tpkt Connection Settings Class EXTENDS I_Socket Connection Settings Class Methods Name Description Defaults [} 362] Resets the configuration settings to the default values. TF6510 Version: 1.7.1 361
## Page 362

PLC API 6.5.2.15.1 Defaults This method resets the configuration settings to the default values. METHOD Defaults VAR_INPUT b All Of : BOOL; END_VAR b All Of: The value "FALSE" only resets the settings of the derived (current) class. If the value is "TRUE", the inherited settings of all base classes are also reset. 6.5.2.16 I_Tpkt Server Settings Class Objects that implement this interface are used to configure the TPKT communication layer (ISO transport services on top of the TCP). Namespace: Tc3_Tpkt [} 98] Library: Tc3_Tpkt (Tc3_Tpkt.compiled-library) Inheritance hierarchy I_Socket Server Setttngs Class [} 364] -> I_Tpkt Server Settings Class INTERFACE I_Tpkt Server Settings Class EXTENDS I_Socket Server Settings Class Methods Name Description Defaults [} 362] Resets the configuration settings to the default values. Properties Name Type Access Description t Tpkt Timeout TIME Get Maximum time that may not be exceeded during the execution of the confirmed services. e Trace Tpkt E_Trace Level [} 488] Get Configures the priority level for the logging of the error messages and log messages. 6.5.2.16.1 Defaults This method resets the configuration settings to the default values. METHOD Defaults VAR_INPUT b All Of : BOOL; END_VAR b All Of: The value "FALSE" only resets the settings of the derived (current) class. If the value is "TRUE", the inherited settings of all base classes are also reset. 6.5.2.17 I_Socket Client Settings Class Objects that implement this interface are used to configure the TCP/IP communication layer. Namespace: Tc3_Sockets [} 98] Library: Tc3_Sockets (Tc3_Sockets.compiled-library) Inheritance hierarchy I_Socket Client Settings Class -> __System. IQuery Interface INTERFACE I_Socket Client Settings Class EXTENDS __System. IQuery Interface 362 Version: 1.7.1 TF6510
## Page 363

PLC API Methods Name Description Defaults [} 363] Resets the configuration settings to the default values. Properties Name Type Access Description b Auto Cleanup BOOL Get Enables/disables the automatic clean-up/ closure of the unused sockets (e.g. after program download or PLC reset). s Srv Net ID T_Ams Net ID Get Twin CAT network address of the Twin CAT TCP/IP server (TF6310). With [} 491] the empty string, the network address of the local Twin CAT system is used. n Remote Port UDINT Get TCP/IP port number of the server. s Remote Host T_Ipv4Addr Get IPv4 network address of the server. [} 491] t Connect TIME Get Earliest time on expiry of which a new connection can be established. t Ads Timeout TIME Get Maximum time that must not be exceeded during the execution of the ADS services. t Socket Timeout TIME Get Maximum time that may not be exceeded during the execution of the confirmed services. b Throttle Mode BOOL Get Enables/disables the receive data throttle polling mode. throttle Times T_Throttle Times Get Configuration of the cycle times for the receive data throttle polling mode. [} 492] e Trace Socket E_Trace Level Get Configures the priority level for the logging of the error messages and log messages. [} 488] ip TLS I_Socket Tls Settin Get Configuration parameters of the TLS (Transport Layer Security) protocol layer. gs Class [} 365] b Eva Link Status Err BOOL Get Configures the evaluation mode for the link status error of the network adapter. 6.5.2.17.1 Defaults This method resets the configuration settings to the default values. METHOD Defaults VAR_INPUT b All Of : BOOL; END_VAR b All Of: The value "FALSE" only resets the settings of the derived (current) class. If the value is "TRUE", the inherited settings of all base classes are also reset. 6.5.2.18 I_Socket Connection Settings Class Objects that implement this interface are used to configure the TCP/IP communication layer. The configuration settings only apply to a selected server session function block instance. Namespace: Tc3_Sockets [} 98] Library: Tc3_Sockets (Tc3_Sockets.compiled-library) Inheritance hierarchy TF6510 Version: 1.7.1 363
## Page 364

PLC API I_Socket Connection Settings Class -> __System. IQuery Interface INTERFACE I_Socket Connection Settings Class EXTENDS __System. IQuery Interface Methods Name Description Defaults [} 364] Resets the configuration settings to the default values. Properties Name Type Access Description b Enable BOOL Get Reads the configured activation mode for incoming connections. b Trace BOOL Get Reads the configured activation mode for trace log messages. e Accept E_Socket Accept Mode Get Reads the configured acceptance mode for incoming connections. n Accept Port UDINT Get Reads the configured TCP/IP port number to be accepted. s Accept Host T_IPv4Addr [} 491] Get Reads out the configured IPv4 network address to be accepted. 6.5.2.18.1 Defaults This method resets the configuration settings to the default values. METHOD Defaults VAR_INPUT b All Of : BOOL; END_VAR b All Of: The value "FALSE" only resets the settings of the derived (current) class. If the value is "TRUE", the inherited settings of all base classes are also reset. 6.5.2.19 I_Socket Server Settings Class Objects that implement this interface are used to configure the TCP/IP communication layer. Namespace: Tc3_Sockets [} 98] Library: Tc3_Sockets (Tc3_Sockets.compiled-library) Inheritance hierarchy I_Socket Server Settings Class -> __System. IQuery Interface INTERFACE I_Socket Server Settings Class EXTENDS __System. IQuery Interface Methods Name Description Defaults [} 365] Resets the configuration settings to the default values. 364 Version: 1.7.1 TF6510
## Page 365

PLC API Properties Name Type Ac- Description cess b Auto Cleanup BOOL Get Enables/disables the automatic clean-up/closure of the unused sockets (e.g. after program download or PLC reset). b Enable BOOL Get Enables/disables establishing the server connections. "TRUE" enables the Listen command (listening and incoming connections are accepted) and "FALSE" disables it. s Srv Net ID T_Ams Net ID [} 491] Get Twin CAT network address of the Twin CAT TCP/IP server (TF6310). With the empty string, the network address of the local Twin CAT system is used. n Local Port UDINT Get TCP/IP port number of the server. s Local Host T_Ipv4Addr [} 491] Get IPv4 network address of the server. t Listen TIME Get Retry cycle time for the internal TCP/IP socket Listen command. t Accept TIME Get Retry cycle time for the internal TCP/IP socket Accept commands. t Ads Timeout TIME Get Maximum time that must not be exceeded during the execution of the ADS services. t Socket Timeout TIME Get Maximum time that may not be exceeded during the execution of the confirmed services. b Throttle Mode BOOL Get Enables/disables the receive data throttle polling mode. throttle Times T_Throttle Times Get Configuration of the cycle times for the receive data throttle polling mode. [} 492] e Trace Socket E_Trace Level [} 488] Get Configures the priority level for the logging of the error messages and log messages. ip TLS I_Socket Tls Settings Cl Get Configuration parameters of the TLS (Transport Layer Security) protocol layer. ass [} 365] b Eva Link Status Er BOOL Get Configures the evaluation mode for the link status error of r the network adapter. 6.5.2.19.1 Defaults This method resets the configuration settings to the default values. METHOD Defaults VAR_INPUT b All Of : BOOL; END_VAR b All Of: The value "FALSE" only resets the settings of the derived (current) class. If the value is "TRUE", the inherited settings of all base classes are also reset. 6.5.2.20 I_Socket Tls Settings Class Objects that implement this interface are used to configure the TLS (Transport Layer Security) communication layer. Namespace: Tc3_Sockets [} 98] Library: Tc3_Sockets (Tc3_Sockets.compiled-library) Inheritance hierarchy I_Socket Tls Settings Class -> __System. IQuery Interface INTERFACE I_Socket Tls Settings Class EXTENDS __System. IQuery Interface TF6510 Version: 1.7.1 365
## Page 366

PLC API Methods Name Description Add Ca [} 366] Saves the file path of the CA certificate in the TLS configuration settings. Add Cert [} 367] Saves the file path of the client or server certificate in the TLS configuration settings. Add Crl [} 367] Saves the file path of the Certificate Revocation List (CRL) in the TLS configuration settings. Add Psk [} 367] Saves the PSK key and PSK identity string in the TLS configuration settings. Reset [} 368] Resets all TLS configuration settings. Set Connect Flags [} 368] Saves additional, optional TLS configuration settings of the client. Set Listen Flags [} 368] Saves additional, optional TLS configuration settings of the server. Properties Name Type Ac- Description cess n Secure P UDINT Get Secure ISO TP0 (IANA) port number for TLS ort communication. connect Fl ST_Tls Connect Flags Get Additional TLS configuration settings of the client. ags listen Flag ST_Tls Listen Flags Get Additional TLS configuration settings of the server. s psk Key PVOID Get Points to the first byte of the PSK key. psk Key Le UDINT(0.. TCPADS_TLS_MAX_PS Get Byte length of the PSK key. n K_KEY_SIZE) s Ca Path STRING(TCPADS_TLS_CERTIFIC Get File path of the CA certificate. ATE_PATH_SIZE) s Cert Path STRING(TCPADS_TLS_CERTIFIC Get File path of the client or server certificate. ATE_PATH_SIZE) s Crl Path STRING(TCPADS_TLS_CERTIFIC Get File path from the certificate revocation list (CRL). ATE_PATH_SIZE) s Identity STRING(TCPADS_TLS_PSK_IDEN Get Identity string of the PSK key. TITY_SIZE) s Key Path STRING(TCPADS_TLS_CERTIFIC Get File path of the private key. ATE_PATH_SIZE) s Key Pwd STRING(TCPADS_TLS_KEY_PAS Get Password string of the certificate. SWORD_SIZE) 6.5.2.20.1 Add Ca This method saves the file path of the CA certificate in the TLS configuration settings. METHOD FINAL Add Ca : I_Socket Tls Settings Class VAR_INPUT s Ca Path : STRING(TCPADS_TLS_CERTIFICATE_PATH_SIZE); END_VAR s Ca Path: File path of the CA certificate. Return parameter: Own interface pointer of type I_Socket Tls Settings Class [} 365]. 366 Version: 1.7.1 TF6510
## Page 367

PLC API 6.5.2.20.2 Add Cert This method saves the file path of the server or client certificate in the TLS configuration settings. METHOD FINAL Add Cert : I_Socket Tls Settings Class VAR_INPUT s Cert Path : STRING(TCPADS_TLS_CERTIFICATE_PATH_SIZE); s Key Path : STRING(TCPADS_TLS_CERTIFICATE_PATH_SIZE); s Key Pwd : STRING(TCPADS_TLS_KEY_PASSWORD_SIZE); END_VAR s Cert Path: File path of the server or client certificate. s Key Path: File path of the private key. s Key Pwd: Password string of the certificate. Return parameter: Own interface pointer of type I_Socket Tls Settings Class [} 365]. 6.5.2.20.3 Add Crl This method saves the file path of the certificate revocation list (CRL) in the TLS configuration settings. METHOD FINAL Add Crl : I_Socket Tls Settings Class VAR_INPUT s Crl Path : STRING(TCPADS_TLS_CERTIFICATE_PATH_SIZE); END_VAR s Crl Path: File path of the certificate revocation list (CRL). Return parameter: Own interface pointer of type I_Socket Tls Settings Class [} 365]. 6.5.2.20.4 Add Psk This method saves the PSK (pre-shared key) and the PSK identity string in the TLS configuration settings. METHOD FINAL Add Psk : I_Socket Tls Settings Class VAR_IN_OUT key : ARRAY[*] OF BYTE; END_VAR VAR_INPUT s Identity : STRING(TCPADS_TLS_PSK_IDENTITY_SIZE); END_VAR key: Data buffer with the PSK key (variable length array). s Identity: PSK Identity string. Return parameter: Own interface pointer of type I_Socket Tls Settings Class [} 365]. TF6510 Version: 1.7.1 367
## Page 368

PLC API 6.5.2.20.5 Reset This method resets all TLS configuration settings. METHOD FINAL Reset : I_Socket Tls Settings Class Return parameter: Own interface pointer of type I_Socket Tls Settings Class [} 365]. 6.5.2.20.6 Set Connect Flags This method saves additional, optional TLS configuration settings of the client. METHOD FINAL Set Connect Flags : I_Socket Tls Settings Class VAR_INPUT flags : ST_Tls Connect Flags; END_VAR flags: Parameter of type ST_Tls Connect Flags with additional, optional TLS configuration settings of the client. The value of the "flags" member variable "b Noserver Cert Check" determines whether the server certificate is checked (FALSE, default) or not checked (TRUE). The value of the "flags" member variable "b Ignore Cn Mismatch" determines whether a mismatch in the "Common Name" of the certificate is ignored (TRUE) or reported as an error (FALSE, default). Return parameter: Own interface pointer of type I_Socket Tls Settings Class [} 365]. 6.5.2.20.7 Set Listen Flags This method saves additional, optional TLS configuration settings of the server. METHOD FINAL Set Listen Flags : I_Socket Tls Settings Class VAR_INPUT flags : ST_Tls Listen Flags; END_VAR flags: parameter of type ST_Tls Listen Flags with additional, optional TLS configuration settings of the server. The value of the "flags" member variable "b No Client Cert" determines whether the configuration of the client certificate is required (FALSE, default) or not required (TRUE). Return parameter: Own interface pointer of type I_Socket Tls Settings Class [} 365]. 6.5.3 Communication 6.5.3.1 GOOSE 6.5.3.1.1 I_Gse Adapter Class Interface pointers of this type identify network adapters usable for GSE communication. Namespace: Tc3_Gse [} 98] Library: Tc3_Gse (Tc3_Gse.compiled-library) 368 Version: 1.7.1 TF6510
## Page 369

PLC API Inheritance hierarchy I_Gse Adapter Class INTERFACE I_Gse Adapter Class Properties Name Type Access Description ip Settings I_Gse Adapter Settings Clas Get Protocol settings of the GSE adapter. s [} 346] 6.5.3.1.2 I_Gse Go CBImpl Class Objects implementing this interface are control block instances for Generic Object Oriented Substation Events (GOOSE). For each configured GOOSE control block, the Twin CAT Telecontrol Configurator generates an instance of the function block FB_Gse Go CBImpl Class [} 266], which implements this interface. Namespace: Tc3_Gse [} 98] Library: Tc3_Gse (Tc3_Gse.compiled-library) Inheritance hierarchy I_Acsi Common Node Class [} 344] -> I_Acsi Common Data Class [} 336] -> I_Acsi Common Control Block Class [} 335] -> I_Acsi Common Goose Control Block Class [} 340] -> I_Scsm Go CBImpl Class [} 420] - > I_Gse Go CBImpl Class INTERFACE I_Gse Go CBImpl Class EXTENDS I_Scsm Go CBImpl Class Properties Name Type Access Description ip Publisher I_Gse Go CBPublisher Cla Get Implementation of the Publisher. ss [} 369] ip Subscribe I_Gse Go CBSubscriber Cl Get Implementation of the Subscriber. r ass [} 370] 6.5.3.1.3 I_Gse Go CBPublisher Class Objects that implement this interface control the behavior of a GOOSE Publisher. Namespace: Tc3_Gse [} 98] Library: Tc3_Gse (Tc3_Gse.compiled-library) Inheritance hierarchy I_Service Error Class [} 428] -> I_Gse Go CBPublisher Class INTERFACE I_Gse Go CBPublisher Class EXTENDS I_Service Error Class Methods Name Description Execute [} 370] Executes the Publisher state machine. Start [} 370] Starts sending GOOSE messages. Stop [} 370] Stops sending GOOSE messages. Update [} 370] Triggers an immediate sending of a GOOSE message. TF6510 Version: 1.7.1 369
## Page 370

PLC API 6.5.3.1.3.1 Execute Executes the Publisher state machine. METHOD Execute : BOOL VAR_OUTPUT ip Error : I_Service Error Class; END_VAR ip Error: Interface pointer of type I_Service Error Class [} 428]. This pointer can be used to query the error code, error source or error text in the event of a negative feedback. Return parameter: Positive feedback (TRUE) on success or negative feedback (FALSE) on error. 6.5.3.1.3.2 Start Starts sending GOOSE messages. METHOD Start : BOOL VAR_INPUT ip Adapter : I_Gse Adapter Class; END_VAR VAR_OUTPUT ip Error : I_Service Error Class; END_VAR ip Adapter: Interface pointer of type I_Gse Adapter Class [} 368]. This pointer identifies the network adapter to be used for sending GOOSE messages. ip Error: Interface pointer of type I_Service Error Class [} 428]. This pointer can be used to query the error code, error source or error text in the event of a negative feedback. Return parameter: Positive feedback (TRUE) on success or negative feedback (FALSE) on error. 6.5.3.1.3.3 Stop Stops sending GOOSE messages. METHOD Stop : BOOL VAR_OUTPUT ip Error : I_Service Error Class; END_VAR ip Error: Interface pointer of type I_Service Error Class [} 428]. This pointer can be used to query the error code, error source or error text in the event of a negative feedback. Return parameter: Positive feedback (TRUE) on success or negative feedback (FALSE) on error. 6.5.3.1.3.4 Update Triggers an immediate sending of a new GOOSE message. New messages are sent when the value of GOOSE dataset members changes. Message replays are sent automatically, in the background, triggered by the Execute method of the Publisher state machine. METHOD Update : BOOL VAR_OUTPUT ip Error : I_Service Error Class; END_VAR ip Error: Interface pointer of type I_Service Error Class [} 428]. This pointer can be used to query the error code, error source or error text in the event of a negative feedback. Return parameter: Positive feedback (TRUE) on success or negative feedback (FALSE) on error. 6.5.3.1.4 I_Gse Go CBSubscriber Class Objects that implement this interface control the behavior of a GOOSE Subscriber. 370 Version: 1.7.1 TF6510
## Page 371

PLC API Namespace: Tc3_Gse [} 98] Library: Tc3_Gse (Tc3_Gse.compiled-library) Inheritance hierarchy I_Service Error Class [} 428] -> I_Gse Go CBSubscriber Class INTERFACE I_Gse Go CBSubscriber Class EXTENDS I_Service Error Class Methods Name Description Execute [} 371] Executes the Subscriber state machine. Enable [} 371] Starts receiving GOOSE messages. Disable [} 371] Stops receiving GOOSE messages. 6.5.3.1.4.1 Execute Executes the Subscriber state machine. METHOD Execute : BOOL VAR_OUTPUT ip Error : I_Service Error Class; END_VAR ip Error: Interface pointer of type I_Service Error Class [} 428]. This pointer can be used to query the error code, error source or error text in the event of a negative feedback. Return parameter: Positive feedback (TRUE) on success or negative feedback (FALSE) on error. 6.5.3.1.4.2 Enable Starts receiving GOOSE messages. METHOD Enable : BOOL VAR_INPUT ip Adapter : I_Gse Adapter Class; END_VAR VAR_OUTPUT ip Error : I_Service Error Class; END_VAR ip Adapter: Interface pointer of type I_Gse Adapter Class [} 368]. This pointer identifies the network adapter to be used for sending GOOSE messages. ip Error: Interface pointer of type I_Service Error Class [} 428]. This pointer can be used to query the error code, error source or error text in the event of a negative feedback. Return parameter: Positive feedback (TRUE) on success or negative feedback (FALSE) on error. 6.5.3.1.4.3 Disable Stops receiving GOOSE messages. METHOD Disable : BOOL VAR_OUTPUT ip Error : I_Service Error Class; END_VAR ip Error: Interface pointer of type I_Service Error Class [} 428]. This pointer can be used to query the error code, error source or error text in the event of a negative feedback. Return parameter: Positive feedback (TRUE) on success or negative feedback (FALSE) on error. TF6510 Version: 1.7.1 371
## Page 372

PLC API 6.5.3.1.5 I_Gse Link Status Event Sink Objects that implement this interface have a user-defined "Link Status Change" service event handling routine. Namespace: Tc3_Gse [} 98] Library: Tc3_Gse (Tc3_Gse.compiled-library) Inheritance hierarchy I_Gse Link Status Event Sink INTERFACE I_Gse Link Status Event Sink EXTENDS __System. IQuery Interface Methods for event handling Name Description On Link Status Change [} 372] User-defined "Link Status Change" service event handling routine 6.5.3.1.5.1 On Link Status Change METHOD On Link Status Change VAR_INPUT ip Adapter : I_Gse Adapter Class; e Status : E_Gse Link Status; END_VAR ip Adapter: interface pointer of type: I_Gse Adapter Class [} 368]. This pointer indicates the instance whose status has changed. e Status: the current status of type E_Gse Link Status [} 485]. 6.5.3.1.6 I_Gse System Clock Event Sink Objects that implement this interface have a user-defined system clock service event handling routine for access to an external time source. Namespace: Tc3_Gse [} 98] Library: Tc3_Gse (Tc3_Gse.compiled-library) Inheritance hierarchy I_Gse System Clock Event Sink INTERFACE I_Gse System Clock Event Sink EXTENDS __System. IQuery Interface Methods for event handling Name Description On Get System Time User-defined system clock service event handling routine [} 372] 6.5.3.1.6.1 On Get System Time METHOD On Get System Time : BOOL VAR_INPUT ip Adapter : I_Gse Adapter Class; END_VAR VAR_OUTPUT t T : T_Utc Time; END_VAR ip Adapter: Interface pointer of type: I_Gse Adapter Class [} 368]. This pointer specifies the instance that queries the current system time. 372 Version: 1.7.1 TF6510
## Page 373

PLC API t T: current UTC time information of type T_Utc Time [} 519]. 6.5.3.2 I_Scsm Client Class Objects implementing this interface control the communication setup and data exchange between the Twin CAT PLC client application and the IEC 61850 server. Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) Inheritance hierarchy I_Scsm Client Class INTERFACE I_Scsm Client Class Methods Name Description Associate Req [} 376] Enables the service: Associate Release Req [} 377] Enables the service: Release Release Rsp [} 377] Responds to the service: Release Abort Req [} 378] Enables the service: Abort Control Cancel Req [} 378] Enables the service: Cancel Control Operate Req [} 379] Enables the service: Operate Control Select Req [} 380] Enables the service: Select Control Select With Value Req [} 381] Enables the service: Select With Value Create Data Set Req [} 382] Enables the service: Create Data Set Delete Data Set Req [} 383] Enables the service: Delete Data Set Get All Data Values Req [} 383] Enables the service: Get All Data Values Get All Logical Device Values Req [} 384] Enables the service: Get All Logical Device Values (Twin CAT specific) Get All Server Values Req [} 384] Enables the service: Get All Server Values (Twin CAT specific) Get Br CBValues Req [} 385] Enables the service: Get BRCBValues Get Data Set Directory Req [} 386] Enables the service: Get Data Set Directory Get Data Set Values Req [} 386] Enables the service: Get Data Set Values Get Data Values Req [} 387] Enables the service: Get Data Values Get Go CBValues Req [} 387] Enables the service: Get GOCBValues Get Logical Device Directory Req [} 388] Enables the service: Get Logical Device Directory Get Logical Node Directory Req [} 389] Enables the service: Get Logical Node Directory Get Server Directory Req [} 389] Enables the service: Get Server Directory Get Ur CBValues Req [} 390] Enables the service: Get URCBValues Set All Data Values Req [} 391] Enables the service: Set All Data Values (Twin CAT specific) Set Br CBValues Req [} 391] Enables the service: Set BRCBValues Set Data Set Values Req [} 392] Enables the service: Set Data Set Values (Twin CAT specific) Set Data Values Req [} 392] Enables the service: Set Data Values Set Go CBValues Req [} 393] Enables the service: Set GOCBValues Set Ur CBValues Req [} 394] Enables the service: Set URCBValues Identify Req [} 394] Enables the service: MMS-Identify Status Req [} 395] Enables the service: MMS-Status TF6510 Version: 1.7.1 373
## Page 374

PLC API Properties 374 Version: 1.7.1 TF6510
## Page 375

PLC API Name Type Ac- Description ces s ip IED [} 395] I_Acsi Common Intelligent Electro Get Interface pointer of an object with the implementation of the top-level of the IEC 61850 nic Device Class [} 340] data model e State E_Async Environment State Get Environmental condition of the communication connection. [} 482] ip Settings I_Scsm Client Settings Class Get Protocol settings for the communication layer. [} 347] ip Associate Cnf I_Scsm Associate Cnf Event Sink Set Interface pointer of an object with a user-defined implementation of the event handling routine: [} 400] On Associate Cnf [} 401] ip Release Cnf I_Scsm Release Cnf Event Sink Set Interface pointer of an object with a user-defined implementation of the event handling routine: [} 412] On Release Cnf [} 412]. ip Release Ind I_Scsm Release Ind Event Sink Set Interface pointer of an object with a user-defined implementation of the event handling routine: [} 412] On Release Ind [} 413]. ip Abort Ind I_Scsm Abort Ind Event Sink [} 400] Set Interface pointer of an object with a user-defined implementation of the event handling routine: On Abort Ind [} 400] ip System Clock I_Scsm System Clock Event Sink Set Interface pointer of an object with a user-defined implementation of the event handling routine: [} 415] On Get System Time [} 416] ip Control Cnf I_Scsm Control Cnf Event Sink Set Interface pointer of an object with a user-defined implementation of the event handling routine: [} 405] On Control Cnf [} 406] ip Create Data Set Cn I_Scsm Create Data Set Cnf Event Si Set Interface pointer of an object with a user-defined f implementation of the event handling routine: nk [} 406] On Create Data Set Cnf [} 406] ip Delete Data Set Cn I_Scsm Delete Data Set Cnf Event Si Set Interface pointer of an object with a user-defined f implementation of the event handling routine: nk [} 406] On Delete Data Set Cnf [} 407] ip Get Data Set Direct I_Scsm Get Data Set Directory Event Set Interface pointer of an object with a user-defined ory implementation of the event handling routine: Sink [} 407] On Get Data Set Directory Cnf [} 407] ip Get Data Values C I_Scsm Get Data Values Cnf Event Si Set Interface pointer of an object with a user-defined nf implementation of the event handling routine: nk [} 408] On Get Data Values Cnf [} 408] ip Get Logical Device I_Scsm Get Logical Device Director Set Interface pointer of an object with a user-defined Directory Cnf implementation of the event handling routine: y Cnf Event Sink [} 408] On Get Logical Device Directory Cnf [} 409] ip Get Logical Node D I_Scsm Get Logical Node Directory Set Interface pointer of an object with a user-defined irectory Cnf implementation of the event handling routine: Cnf Event Sink [} 409] On Get Logical Node Directory Cnf [} 409] ip Get Server Directo I_Scsm Get Server Directory Cnf Eve Set Interface pointer of an object with a user-defined ry Cnf implementation of the event handling routine: nt Sink [} 410] On Get Server Directory Cnf [} 410]. ip Last Appl Error Ind I_Scsm Last Appl Error Ind Event Sin Set Interface pointer of an object with a user-defined implementation of the event handling routine: k [} 411] On Last Appl Error Ind [} 411] TF6510 Version: 1.7.1 375
## Page 376

PLC API Name Type Ac- Description ces s ip Report Ind I_Scsm Report Ind Event Sink Set Interface pointer of an object with a user-defined implementation of the event handling routine: [} 413] On Buffered Report Ind [} 413] and On Unbuffered Report Ind [} 414] ip Set Data Values Cn I_Scsm Set Data Values Cnf Event Si Set Interface pointer of an object with a user-defined f implementation of the event handling routine: nk [} 414] On Set Data Values Cnf [} 414] ip Identify Cnf I_Scsm Identify Cnf Event Sink Set Interface pointer of an object with a user-defined implementation of the event handling routine: [} 410] On Identify Cnf [} 411] ip Status Cnf I_Scsm Status Cnf Event Sink Set Interface pointer of an object with a user-defined implementation of the event handling routine: [} 415] On Status Cnf [} 415] 6.5.3.2.1 Associate Req This method activates the Associate service. A client can use this service to establish a connection to the server. METHOD Associate Req : BOOL VAR_INPUT ip Sink : I_Scsm Associate Cnf Event Sink; END_VAR VAR_OUTPUT ip Result : I_Async Service Result Class; END_VAR ip Sink: Interface pointer of type I_Scsm Associate Cnf Event Sink [} 400] of an object with a user-defined implementation of the event handling routine On Associate Cnf (service feedback). This parameter is optional and reserved for future use. The pointer value 0 defines the parameter as optional. ip Result: Interface pointer of type: I_Async Service Result Class [} 424] This pointer can be used to query and monitor the status/progress and the result of the service execution. Return parameter: Positive feedback (TRUE) if the service primitive was sent/started successfully, negative feedback (FALSE) on error. Example (extract): Declaration part: FUNCTION_BLOCK FB_My61850Client IMPLEMENTS I_Scsm Abort Event Sink VAR fb Client : FB_IEC61850Common Class := ( ip IED := IED, settings := ( n Remote Port := 102, s Remote Host := '192.168.10.145' ), ip Abort := THIS^ ); state : BYTE; b Success : BOOL; ip Async Result : I_Async Service Result Class; END_VAR Implementation: CASE state OF 0:(* idle state *) IF b Associate Req THEN(* Establish connection *) b Associate Req := FALSE; b Success := fb Client. Associate Req( ip Sink := 0, ip Result=>ip Async Result ); state := SEL( b Success, 100, 1 ); 376 Version: 1.7.1 TF6510
## Page 377

PLC API END_IF 1:(* wait until connection established *) IF ip Async Result <> 0 THEN IF NOT ip Async Result. Is Busy() THEN state := SEL( ip Async Result. Is Completed(), 100, 10 ); END_IF END_IF 10:(* connection established *) ; 100:(* error state *) state := 0; END_CASE 6.5.3.2.2 Release Req This method activates the release service. A client can use this service to disconnect from the server in a controlled manner. METHOD Release Req : BOOL VAR_INPUT ip Sink : I_Scsm Release Cnf Event Sink; END_VAR VAR_OUTPUT ip Result : I_Async Service Result Class; END_VAR ip Sink: Interface pointer of type I_Scsm Release Cnf Event Sink [} 412] of an object with a user-defined implementation of the event handling routine On Release Cnf (service feedback). This parameter is optional and reserved for future use. The pointer value 0 defines the parameter as optional. ip Result: Interface pointer of type: I_Async Service Result Class [} 424] This pointer can be used to query and monitor the status/progress and the result of the service execution. Return parameter: Positive feedback (TRUE) if the service primitive was sent/started successfully, negative feedback (FALSE) on error. 6.5.3.2.3 Release Rsp This method responds to the Release service. A client can use this service to disconnect from the server in a controlled manner. METHOD Release Rsp : BOOL VAR_OUTPUT ip Result : I_Async Service Result Class; END_VAR ip Result: Interface pointer of type: I_Async Service Result Class [} 424] This pointer can be used to query and monitor the status/progress and the result of the service execution. Return parameter: Positive feedback (TRUE) if the service primitive was sent/started successfully, negative feedback (FALSE) on error. TF6510 Version: 1.7.1 377
## Page 378

PLC API 6.5.3.2.4 Abort Req This method activates the Abort service. A client can use this service to disconnect from the server in a controlled manner. METHOD Abort Req : BOOL VAR_INPUT ip Reason : I_Service Error Class; ip Sink : I_Scsm Abort Ind Event Sink; END_VAR VAR_OUTPUT ip Result : I_Async Service Result Class; END_VAR ip Reason: Interface pointer of type I_Service Error Class [} 428]. This pointer can be used to pass an object with a user-defined cause for the disconnection. ip Sink: Interface pointer of type I_Scsm Abort Ind Event Sink [} 400] of an object with a user-defined implementation of the event handling routine: On Abort Ind (service feedback). This parameter is optional and reserved for future use. The pointer value 0 defines the parameter as optional. ip Result: Interface pointer of type: I_Async Service Result Class [} 424] This pointer can be used to query and monitor the status/progress and the result of the service execution. Return parameter: Positive feedback (TRUE) if the service primitive was sent/started successfully, negative feedback (FALSE) on error. 6.5.3.2.5 Control Cancel Req This method activates the Cancel service. METHOD Control Cancel Req : BOOL VAR_INPUT ip Ctrl : I_Acsi Common Controllable Data Class; ctl Val : U_Acsi Ctl Val; oper Tm : T_Utc Time; origin : ST_Acsi Originator; ctl Num : USINT; b Test : BOOL; h User : PVOID; ip Sink : I_Scsm Control Cnf Event Sink; END_VAR VAR_OUTPUT n Invoke ID : UDINT; ip Result : I_Async Service Result Class; END_VAR ip Ctrl: Interface pointer of type I_Acsi Common Controllable Data Class [} 336] of a controllable object. Objects that implement this interface can be used to run switch control services such as Operate, Select, Select With Value or Cancel. Such objects include instances of Controllable Double Point (DPC) or Controllable Single Point (SPC). 378 Version: 1.7.1 TF6510
## Page 379

PLC API ctl Val: Parameter for the new control value of type U_Acsi Ctl Val [} 521]. oper Tm: Parameter for the switching time (operating time) of type T_Utc Time [} 519] for time-controlled command execution. Set this parameter to the value: oper Tm := Acsi Constants. NULL_Time Stamp if the controllable object does not support the service: Time Activated Operate. origin: Parameter for the command origin of type ST_Acsi Originator [} 499], through with a client issuing the command can be identified. ctl Num: Identifier (e.g. sequential number) for the command, via which the client can assign the received negative or positive command confirmations to the request. b Test: Test flag. h User: Optional user-defined parameter or pointer. Any value for this parameter can be transferred in the methods for service activation (Xyz Method Req). The value is then mirrored in the event handling routine for the service feedback. ip Sink: Interface pointer of type I_Scsm Control Cnf Event Sink [} 405] from an object with a user-defined implementation of the event handling routine: On Control Cnf (service feedback). This parameter is optional and reserved for future use. The pointer value 0 defines the parameter as optional. ip Result: Interface pointer of type: I_Async Service Result Class [} 424] This pointer can be used to query and monitor the status/progress and the result of the service execution. n Invoke ID: Identifies the service activation. Each new service activation (Xyz Method Req) is numbered consecutively. A copy of this number is mirrored in the service feedback (On Xyz Method Cnf). Return parameter: Positive feedback (TRUE) if the service primitive was sent/started successfully, negative feedback (FALSE) on error. 6.5.3.2.6 Control Operate Req This method activates the Operate service. METHOD Control Operate Req : BOOL VAR_INPUT ip Ctrl : I_Acsi Common Controllable Data Class; ctl Val : U_Acsi Ctl Val; oper Tm : T_Utc Time; origin : ST_Acsi Originator; ctl Num : USINT; b Test : BOOL; e Check : E_Acsi Check; h User : PVOID; ip Sink : I_Scsm Control Cnf Event Sink; END_VAR VAR_OUTPUT n Invoke ID : UDINT; ip Result : I_Async Service Result Class; END_VAR TF6510 Version: 1.7.1 379
## Page 380

PLC API ip Ctrl: Interface pointer of type I_Acsi Common Controllable Data Class [} 336] of a controllable object. Objects that implement this interface can be used to run switch control services such as Operate, Select, Select With Value or Cancel. Such objects include instances of Controllable Double Point (DPC) or Controllable Single Point (SPC). ctl Val: Parameter for the new control value of type U_Acsi Ctl Val [} 521]. oper Tm: Parameter for the switching time (operating time) of type T_Utc Time [} 519] for time-controlled command execution. Set this parameter to the value: oper Tm := Acsi Constants. NULL_Time Stamp if the controllable object does not support the service: Time Activated Operate. origin: Parameter for the command origin of type ST_Acsi Originator [} 499], through with a client issuing the command can be identified. ctl Num: Identifier (e.g. sequential number) for the command, via which the client can assign the received negative or positive command confirmations to the request. b Test: Test flag. e Check: Parameter of type E_Acsi Check [} 440] for synchro check and/or interlocking tests. ip Sink: Interface pointer of type I_Scsm Control Cnf Event Sink [} 405] from an object with a user-defined implementation of the event handling routine: On Control Cnf (service feedback). This parameter is optional and reserved for future use. The pointer value 0 defines the parameter as optional. ip Result: Interface pointer of type: I_Async Service Result Class [} 424] This pointer can be used to query and monitor the status/progress and the result of the service execution. n Invoke ID: Identifies the service activation. Each new service activation (Xyz Method Req) is numbered consecutively. A copy of this number is mirrored in the service feedback (On Xyz Method Cnf). Return parameter: Positive feedback (TRUE) if the service primitive was sent/started successfully, negative feedback (FALSE) on error. 6.5.3.2.7 Control Select Req This method activates the Select service. METHOD Control Select Req : BOOL VAR_INPUT ip Ctrl : I_Acsi Common Controllable Data Class; h User : PVOID; ip Sink : I_Scsm Control Cnf Event Sink; END_VAR VAR_OUTPUT n Invoke ID : UDINT; ip Result : I_Async Service Result Class; END_VAR ip Ctrl: Interface pointer of type I_Acsi Common Controllable Data Class [} 336] of a controllable object. Objects that implement this interface can be used to run switch control services such as Operate, Select, Select With Value or Cancel. Such objects include instances of Controllable Double Point (DPC) or Controllable Single Point (SPC). h User: Optional user-defined parameter or pointer. Any value for this parameter can be transferred in the methods for service activation (Xyz Method Req). The value is then mirrored in the event handling routine for the service feedback. ip Sink: Interface pointer of type I_Scsm Control Cnf Event Sink [} 405] from an object with a user-defined implementation of the event handling routine: On Control Cnf (service feedback). This parameter is optional and reserved for future use. The pointer value 0 defines the parameter as optional. 380 Version: 1.7.1 TF6510
## Page 381

PLC API ip Result: Interface pointer of type: I_Async Service Result Class [} 424] This pointer can be used to query and monitor the status/progress and the result of the service execution. n Invoke ID: Identifies the service activation. Each new service activation (Xyz Method Req) is numbered consecutively. A copy of this number is mirrored in the service feedback (On Xyz Method Cnf). Return parameter: Positive feedback (TRUE) if the service primitive was sent/started successfully, negative feedback (FALSE) on error. 6.5.3.2.8 Control Select With Value Req This method activates the Select With Value service. METHOD Control Select With Value Req : BOOL VAR_INPUT ip Ctrl : I_Acsi Common Controllable Data Class; ctl Val : U_Acsi Ctl Val; oper Tm : T_Utc Time; origin : ST_Acsi Originator; ctl Num : USINT; b Test : BOOL; e Check : E_Acsi Check; h User : PVOID; ip Sink : I_Scsm Control Cnf Event Sink; END_VAR VAR_OUTPUT n Invoke ID : UDINT; ip Result : I_Async Service Result Class; END_VAR ip Ctrl: Interface pointer of type I_Acsi Common Controllable Data Class [} 336] of a controllable object. Objects that implement this interface can be used to run switch control services such as Operate, Select, Select With Value or Cancel. Such objects include instances of Controllable Double Point (DPC) or Controllable Single Point (SPC). ctl Val: Parameter for the new control value of type U_Acsi Ctl Val [} 521]. oper Tm: Parameter for the switching time (operating time) of type T_Utc Time [} 519] for time-controlled command execution. Set this parameter to the value: oper Tm := Acsi Constants. NULL_Time Stamp if the controllable object does not support the service: Time Activated Operate. origin: Parameter for the command origin of type ST_Acsi Originator [} 499], through with a client issuing the command can be identified. ctl Num: Identifier (e.g. sequential number) for the command, via which the client can assign the received negative or positive command confirmations to the request. b Test: Test flag. e Check: Parameter of type E_Acsi Check [} 440] for synchro check and/or interlocking tests. h User: Optional user-defined parameter or pointer. Any value for this parameter can be transferred in the methods for service activation (Xyz Method Req). The value is then mirrored in the event handling routine for the service feedback. TF6510 Version: 1.7.1 381
## Page 382

PLC API ip Sink: Interface pointer of type I_Scsm Control Cnf Event Sink [} 405] from an object with a user-defined implementation of the event handling routine: On Control Cnf (service feedback). This parameter is optional and reserved for future use. The pointer value 0 defines the parameter as optional. ip Result: Interface pointer of type: I_Async Service Result Class [} 424] This pointer can be used to query and monitor the status/progress and the result of the service execution. n Invoke ID: Identifies the service activation. Each new service activation (Xyz Method Req) is numbered consecutively. A copy of this number is mirrored in the service feedback (On Xyz Method Cnf). Return parameter: Positive feedback (TRUE) if the service primitive was sent/started successfully, negative feedback (FALSE) on error. 6.5.3.2.9 Create Data Set Req This method enables the service: Create Data Set. This service allows the client to dynamically (at runtime) create a "persistent" or "non-persistent" data set. METHOD Create Data Set Req : BOOL VAR_INPUT ip Data Set : I_Acsi Common Data Set Class; ip Logical Node : I_Acsi Common Logical Node Class; h User : PVOID; ip Sink : I_Scsm Create Data Set Cnf Event Sink; END_VAR VAR_OUTPUT n Invoke ID : UDINT; ip Result : I_Async Service Result Class; END_VAR ip Data Set: Interface pointer of type I_Acsi Common Data Set Class [} 338]. ip Logical Node: Interface pointer of type I_Acsi Common Logical Node Class [} 342]. The pointer to the logical node determines whether a "persistent" or "non-persistent" data set should be created. The "persistent" data sets are linked to a logical node. In this case, this parameter must be valid. In the case of a "non-persistent" data set, the parameter has the value null. h User: Optional user-defined parameter or pointer. Any value for this parameter can be transferred in the methods for service activation (Xyz Method Req). The value is then mirrored in the event handling routine for the service feedback. ip Sink: Interface pointer of type: I_Scsm Create Data Set Cnf Event Sink [} 406] from an object with a user- defined implementation of the event handling routine: On Create Data Set Cnf (service feedback). This parameter is optional and reserved for future use. The pointer value 0 defines the parameter as optional. n Invoke ID: Identifies the service activation. Each new service activation (Xyz Method Req) is numbered consecutively. A copy of this number is mirrored in the service feedback (On Xyz Method Cnf). ip Result: Interface pointer of type: I_Async Service Result Class [} 424] This pointer can be used to query and monitor the status/progress and the result of the service execution. Return parameter: Positive feedback (TRUE) if the service primitive was sent/started successfully, negative feedback (FALSE) on error. 382 Version: 1.7.1 TF6510
## Page 383

PLC API 6.5.3.2.10 Delete Data Set Req This method enables the service: Delete Data Set. This service allows the client to delete a dynamically (at runtime) created data set instance. METHOD Delete Data Set Req : BOOL VAR_INPUT ip Data Set : I_Acsi Common Data Set Class; h User : PVOID; ip Sink : I_Scsm Delete Data Set Cnf Event Sink; END_VAR VAR_OUTPUT n Invoke ID : UDINT; ip Result : I_Async Service Result Class; END_VAR ip Data Set: Interface pointer of type I_Acsi Common Data Set Class [} 338]. h User: Optional user-defined parameter or pointer. Any value for this parameter can be transferred in the methods for service activation (Xyz Method Req). The value is then mirrored in the event handling routine for the service feedback. ip Sink: Interface pointer of type: I_Scsm Delete Data Set Cnf Event Sink [} 406] from an object with a user- defined implementation of the event handling routine: On Delete Data Set Cnf (service feedback). This parameter is optional and reserved for future use. The pointer value 0 defines the parameter as optional. n Invoke ID: Identifies the service activation. Each new service activation (Xyz Method Req) is numbered consecutively. A copy of this number is mirrored in the service feedback (On Xyz Method Cnf). ip Result: Interface pointer of type: I_Async Service Result Class [} 424] This pointer can be used to query and monitor the status/progress and the result of the service execution. Return parameter: Positive feedback (TRUE) if the service primitive was sent/started successfully, negative feedback (FALSE) on error. 6.5.3.2.11 Get All Data Values Req This method activates the Get All Data Values service. METHOD Get All Data Values Req : BOOL VAR_INPUT ip Logical Node : I_Acsi Common Logical Node Class; e Fc : E_Acsi Fc; h User : PVOID; ip Sink : I_Scsm Get Data Values Cnf Event Sink; END_VAR VAR_OUTPUT n Invoke ID : UDINT; ip Result : I_Async Service Result Class; END_VAR ip Logical Node: Interface pointer of type I_Acsi Common Logical Node Class [} 342]. e Fc: Functional group of type E_Acsi Fc [} 448]. TF6510 Version: 1.7.1 383
## Page 384

PLC API h User: Optional user-defined parameter or pointer. Any value for this parameter can be transferred in the methods for service activation (Xyz Method Req). The value is then mirrored in the event handling routine for the service feedback. ip Sink: Interface pointer of type I_Scsm Get Data Values Cnf Event Sink [} 408] of an object with a user-defined implementation of the event handling routine: On Get Data Values Cnf (service feedback). This parameter is optional and reserved for future use. The pointer value 0 defines the parameter as optional. ip Result: Interface pointer of type: I_Async Service Result Class [} 424] This pointer can be used to query and monitor the status/progress and the result of the service execution. n Invoke ID: Identifies the service activation. Each new service activation (Xyz Method Req) is numbered consecutively. A copy of this number is mirrored in the service feedback (On Xyz Method Cnf). Return parameter: Positive feedback (TRUE) if the service primitive was sent/started successfully, negative feedback (FALSE) on error. 6.5.3.2.12 Get All Logical Device Values Req This method activates the Get All Logical Device Values service. METHOD Get All Logical Device Values Req : BOOL VAR_INPUT ip Logical Device : I_Acsi Common Logical Device Class; h User : PVOID; ip Sink : I_Scsm Get Data Values Cnf Event Sink; END_VAR VAR_OUTPUT n Invoke ID : UDINT; ip Result : I_Async Service Result Class; END_VAR ip Logical Device: Interface pointer of type I_Acsi Common Logical Device Class [} 341]. h User: Optional user-defined parameter or pointer. Any value for this parameter can be transferred in the methods for service activation (Xyz Method Req). The value is then mirrored in the event handling routine for the service feedback. ip Sink: Interface pointer of type I_Scsm Get Data Values Cnf Event Sink [} 408] of an object with a user-defined implementation of the event handling routine: On Get Data Values Cnf (service feedback). This parameter is optional and reserved for future use. The pointer value 0 defines the parameter as optional. ip Result: Interface pointer of type: I_Async Service Result Class [} 424] This pointer can be used to query and monitor the status/progress and the result of the service execution. n Invoke ID: Identifies the service activation. Each new service activation (Xyz Method Req) is numbered consecutively. A copy of this number is mirrored in the service feedback (On Xyz Method Cnf). Return parameter: Positive feedback (TRUE) if the service primitive was sent/started successfully, negative feedback (FALSE) on error. 6.5.3.2.13 Get All Server Values Req This method activates the Get All Server Values service. 384 Version: 1.7.1 TF6510
## Page 385

PLC API METHOD Get All Server Values Req : BOOL VAR_INPUT ip Server : I_Acsi Common Intelligent Electronic Device Class; h User : PVOID; ip Sink : I_Scsm Get Data Values Cnf Event Sink; END_VAR VAR_OUTPUT n Invoke ID : UDINT; ip Result : I_Async Service Result Class; END_VAR ip Server: Interface pointer of type I_Acsi Common Intelligent Electronic Device Class [} 340]. h User: Optional user-defined parameter or pointer. Any value for this parameter can be transferred in the methods for service activation (Xyz Method Req). The value is then mirrored in the event handling routine for the service feedback. ip Sink: Interface pointer of type I_Scsm Get Data Values Cnf Event Sink [} 408] of an object with a user-defined implementation of the event handling routine: On Get Data Values Cnf (service feedback). This parameter is optional and reserved for future use. The pointer value 0 defines the parameter as optional. ip Result: Interface pointer of type: I_Async Service Result Class [} 424] This pointer can be used to query and monitor the status/progress and the result of the service execution. n Invoke ID: Identifies the service activation. Each new service activation (Xyz Method Req) is numbered consecutively. A copy of this number is mirrored in the service feedback (On Xyz Method Cnf). Return parameter: Positive feedback (TRUE) if the service primitive was sent/started successfully, negative feedback (FALSE) on error. 6.5.3.2.14 Get Br CBValues Req This method activates the Get BRCBValues service. The client can use this service to read the values of all data objects of a buffered report control block. METHOD Get BRCBValues Req : BOOL VAR_INPUT ip Brcb : I_Acsi Common Buffered Report Control Block Class; h User : PVOID; ip Sink : I_Scsm Get Data Values Cnf Event Sink; END_VAR VAR_OUTPUT n Invoke ID : UDINT; ip Result : I_Async Service Result Class; END_VAR ip Brcb: Interface pointer of type I_Acsi Common Buffered Report Control Block Class [} 335]. h User: Optional user-defined parameter or pointer. Any value for this parameter can be transferred in the methods for service activation (Xyz Method Req). The value is then mirrored in the event handling routine for the service feedback. ip Sink: Interface pointer of type I_Scsm Get Data Values Cnf Event Sink [} 408] of an object with a user-defined implementation of the event handling routine: On Get Data Values Cnf (service feedback). This parameter is optional and reserved for future use. The pointer value 0 defines the parameter as optional. ip Result: Interface pointer of type: I_Async Service Result Class [} 424] This pointer can be used to query and monitor the status/progress and the result of the service execution. n Invoke ID: Identifies the service activation. Each new service activation (Xyz Method Req) is numbered consecutively. A copy of this number is mirrored in the service feedback (On Xyz Method Cnf). Return parameter: Positive feedback (TRUE) if the service primitive was sent/started successfully, negative feedback (FALSE) on error. TF6510 Version: 1.7.1 385
## Page 386

PLC API 6.5.3.2.15 Get Data Set Directory Req This method activates the Get Data Set Directory service. A client can use this service to query the server to determine which data objects are referenced in a particular data set. METHOD Get Data Set Directory Req : BOOL VAR_INPUT ip Data Set : I_Acsi Common Data Set Class; h User : PVOID; ip Sink : I_Scsm Get Data Set Directory Cnf Event Sink; END_VAR VAR_OUTPUT n Invoke ID : UDINT; ip Result : I_Async Service Result Class; END_VAR ip Data Set: Interface pointer of type I_Acsi Common Data Set Class [} 338]. h User: Optional user-defined parameter or pointer. Any value for this parameter can be transferred in the methods for service activation (Xyz Method Req). The value is then mirrored in the event handling routine for the service feedback. ip Sink: Interface pointer of type I_Scsm Get Data Set Directory Cnf Event Sink [} 407] of an object with a user- defined implementation of the event handling routine: On Get Data Set Directory Cnf (service feedback). This parameter is optional and reserved for future use. The pointer value 0 defines the parameter as optional. ip Result: Interface pointer of type: I_Async Service Result Class [} 424] This pointer can be used to query and monitor the status/progress and the result of the service execution. n Invoke ID: Identifies the service activation. Each new service activation (Xyz Method Req) is numbered consecutively. A copy of this number is mirrored in the service feedback (On Xyz Method Cnf). Return parameter: Positive feedback (TRUE) if the service primitive was sent/started successfully, negative feedback (FALSE) on error. 6.5.3.2.16 Get Data Set Values Req This method activates the Get Data Set Values service. METHOD Get Data Set Values Req : BOOL VAR_INPUT ip Data Set : I_Acsi Common Data Set Class; h User : PVOID; ip Sink : I_Scsm Get Data Values Cnf Event Sink; END_VAR VAR_OUTPUT n Invoke ID : UDINT; ip Result : I_Async Service Result Class; END_VAR ip Data Set: Interface pointer of type I_Acsi Common Data Set Class [} 338]. h User: Optional user-defined parameter or pointer. Any value for this parameter can be transferred in the methods for service activation (Xyz Method Req). The value is then mirrored in the event handling routine for the service feedback. 386 Version: 1.7.1 TF6510
## Page 387

PLC API ip Sink: Interface pointer of type I_Scsm Get Data Values Cnf Event Sink [} 408] of an object with a user-defined implementation of the event handling routine: On Get Data Values Cnf (service feedback). This parameter is optional and reserved for future use. The pointer value 0 defines the parameter as optional. ip Result: Interface pointer of type: I_Async Service Result Class [} 424] This pointer can be used to query and monitor the status/progress and the result of the service execution. n Invoke ID: Identifies the service activation. Each new service activation (Xyz Method Req) is numbered consecutively. A copy of this number is mirrored in the service feedback (On Xyz Method Cnf). Return parameter: Positive feedback (TRUE) if the service primitive was sent/started successfully, negative feedback (FALSE) on error. 6.5.3.2.17 Get Data Values Req This method activates the service: Get Data Values. METHOD Get Data Values Req : BOOL VAR_INPUT ip Data : I_Acsi Common Data Class; e Fc : E_Acsi Fc; h User : PVOID; ip Sink : I_Scsm Get Data Values Cnf Event Sink; END_VAR VAR_OUTPUT n Invoke ID : UDINT; ip Result : I_Async Service Result Class; END_VAR ip Data: Interface pointer of type I_Acsi Common Data Class [} 336]. e Fc: Functional group of type E_Acsi Fc [} 448]. h User: Optional user-defined parameter or pointer. Any value for this parameter can be transferred in the methods for service activation (Xyz Method Req). The value is then mirrored in the event handling routine for the service feedback. ip Sink: Interface pointer of type I_Scsm Get Data Values Cnf Event Sink [} 408] of an object with a user-defined implementation of the event handling routine: On Get Data Values Cnf (service feedback). This parameter is optional and reserved for future use. The pointer value 0 defines the parameter as optional. ip Result: Interface pointer of type: I_Async Service Result Class [} 424] This pointer can be used to query and monitor the status/progress and the result of the service execution. n Invoke ID: Identifies the service activation. Each new service activation (Xyz Method Req) is numbered consecutively. A copy of this number is mirrored in the service feedback (On Xyz Method Cnf). Return parameter: Positive feedback (TRUE) if the service primitive was sent/started successfully, negative feedback (FALSE) on error. 6.5.3.2.18 Get Go CBValues Req This method enables the service Get GOCBValues. With this service the client can read the values of all data objects of a GOOSE control block (GOOSE Control Block). TF6510 Version: 1.7.1 387
## Page 388

PLC API METHOD Get Go CBValues Req : BOOL VAR_INPUT ip Go CB : I_Acsi Common Goose Control Block Class; h User : PVOID; ip Sink : I_Scsm Get Data Values Cnf Event Sink; END_VAR VAR_OUTPUT n Invoke ID : UDINT; ip Result : I_Async Service Result Class; END_VAR ip Go CB: Interface pointer of type I_Acsi Common Goose Control Block Class [} 340]. h User: Optional user-defined parameter or pointer. Any value for this parameter can be transferred in the methods for service activation (Xyz Method Req). The value is then mirrored in the event handling routine for the service feedback. ip Sink: Interface pointer of type I_Scsm Get Data Values Cnf Event Sink [} 408] of an object with a user-defined implementation of the event handling routine: On Get Data Values Cnf (service feedback). This parameter is optional and reserved for future use. The pointer value 0 defines the parameter as optional. n Invoke ID: Identifies the service activation. Each new service activation (Xyz Method Req) is numbered consecutively. A copy of this number is mirrored in the service feedback (On Xyz Method Cnf). ip Result: Interface pointer of type: I_Async Service Result Class [} 424] This pointer can be used to query and monitor the status/progress and the result of the service execution. Return parameter: Positive feedback (TRUE) if the service primitive was sent/started successfully, negative feedback (FALSE) on error. 6.5.3.2.19 Get Logical Device Directory Req This method activates the Get Logical Device Directory service. A client can use this service to query the server to determine which logical nodes are implemented in a particular logical device. METHOD Get Logical Device Directory Req : BOOL VAR_INPUT ip Logical Device : I_Acsi Common Logical Device Class; h User : PVOID; ip Sink : I_Scsm Get Logical Device Directory Cnf Event Sink; END_VAR VAR_OUTPUT n Invoke ID : UDINT; ip Result : I_Async Service Result Class; END_VAR ip Logical Device: Interface pointer of type I_Acsi Common Logical Device Class [} 341]. h User: Optional user-defined parameter or pointer. Any value for this parameter can be transferred in the methods for service activation (Xyz Method Req). The value is then mirrored in the event handling routine for the service feedback. ip Sink: Interface pointer of type I_Scsm Get Logical Device Directory Cnf Event Sink [} 408] of an object with a user-defined implementation of the event handling routine On Get Logical Device Directory Cnf (service feedback). This parameter is optional and reserved for future use. The pointer value 0 defines the parameter as optional. ip Result: Interface pointer of type: I_Async Service Result Class [} 424] This pointer can be used to query and monitor the status/progress and the result of the service execution. n Invoke ID: Identifies the service activation. Each new service activation (Xyz Method Req) is numbered consecutively. A copy of this number is mirrored in the service feedback (On Xyz Method Cnf). 388 Version: 1.7.1 TF6510
## Page 389

PLC API Return parameter: Positive feedback (TRUE) if the service primitive was sent/started successfully, negative feedback (FALSE) on error. 6.5.3.2.20 Get Logical Node Directory Req This method activates the Get Logical Node Directory service. A client can use this service to query the server to determine which data objects, data groups and control blocks are implemented in a particular logical node. METHOD Get Logical Node Directory Req : BOOL VAR_INPUT ip Logical Node : I_Acsi Common Logical Node Class; e Class : E_Acsi Logical Node Class; h User : PVOID; ip Sink : I_Scsm Get Logical Node Directory Cnf Event Sink; END_VAR VAR_OUTPUT n Invoke ID : UDINT; ip Result : I_Async Service Result Class; END_VAR ip Logical Node: Interface pointer of type I_Acsi Common Logical Node Class [} 342]. e Class: Object class of the logical node of type E_Acsi Logical Node Class [} 453]. h User: Optional user-defined parameter or pointer. Any value for this parameter can be transferred in the methods for service activation (Xyz Method Req). The value is then mirrored in the event handling routine for the service feedback. ip Sink: Interface pointer of type I_Scsm Get Logical Node Directory Cnf Event Sink [} 409] of an object with a user-defined implementation of the event handling routine: On Get Logical Node Directory Cnf (service feedback). This parameter is optional and reserved for future use. The pointer value 0 defines the parameter as optional. ip Result: Interface pointer of type: I_Async Service Result Class [} 424] This pointer can be used to query and monitor the status/progress and the result of the service execution. n Invoke ID: Identifies the service activation. Each new service activation (Xyz Method Req) is numbered consecutively. A copy of this number is mirrored in the service feedback (On Xyz Method Cnf). Return parameter: Positive feedback (TRUE) if the service primitive was sent/started successfully, negative feedback (FALSE) on error. 6.5.3.2.21 Get Server Directory Req This method activates the Get Server Directory Req service. A client can use this service to query which logical devices or files are implemented on a specific server. METHOD Get Server Directory Req : BOOL VAR_INPUT ip Server : I_Acsi Common Intelligent Electronic Device Class; e Class : E_Acsi Server Directory Class; h User : PVOID; ip Sink : I_Scsm Get Server Directory Cnf Event Sink; END_VAR VAR_OUTPUT TF6510 Version: 1.7.1 389
## Page 390

PLC API n Invoke ID : UDINT; ip Result : I_Async Service Result Class; END_VAR ip Server: Interface pointer of type I_Acsi Common Intelligent Electronic Device Class [} 340]. e Class: Server class of type E_Acsi Server Directory Class [} 467]. This parameter specifies whether logical devices or files are to be queried. h User: Optional user-defined parameter or pointer. Any value for this parameter can be transferred in the methods for service activation (Xyz Method Req). The value is then mirrored in the event handling routine for the service feedback. ip Sink: Interface pointer of type I_Scsm Get Server Directory Cnf Event Sink [} 410] of an object with a user- defined implementation of the event handling routine On Get Server Directory Cnf. This parameter is optional and reserved for future use. The pointer value 0 defines the parameter as optional. ip Result: Interface pointer of type: I_Async Service Result Class [} 424] This pointer can be used to query and monitor the status/progress and the result of the service execution. n Invoke ID: Identifies the service activation. Each new service activation (Xyz Method Req) is numbered consecutively. A copy of this number is mirrored in the service feedback (On Xyz Method Cnf). Return parameter: Positive feedback (TRUE) if the service primitive was sent/started successfully, negative feedback (FALSE) on error. 6.5.3.2.22 Get Ur CBValues Req This method activates the Get URCBValues service. METHOD Get URCBValues Req : BOOL VAR_INPUT ip Urcb : I_Acsi Common Unbuffered Report Control Block Class; h User : PVOID; ip Sink : I_Scsm Get Data Values Cnf Event Sink; END_VAR VAR_OUTPUT n Invoke ID : UDINT; ip Result : I_Async Service Result Class; END_VAR ip Urcb: Interface pointer of type I_Acsi Common Unbuffered Report Control Block Class [} 346]. h User: Optional user-defined parameter or pointer. Any value for this parameter can be transferred in the methods for service activation (Xyz Method Req). The value is then mirrored in the event handling routine for the service feedback. ip Sink: Interface pointer of type I_Scsm Get Data Values Cnf Event Sink [} 408] of an object with a user-defined implementation of the event handling routine: On Get Data Values Cnf (service feedback). This parameter is optional and reserved for future use. The pointer value 0 defines the parameter as optional. ip Result: Interface pointer of type: I_Async Service Result Class [} 424] This pointer can be used to query and monitor the status/progress and the result of the service execution. n Invoke ID: Identifies the service activation. Each new service activation (Xyz Method Req) is numbered consecutively. A copy of this number is mirrored in the service feedback (On Xyz Method Cnf). Return parameter: Positive feedback (TRUE) if the service primitive was sent/started successfully, negative feedback (FALSE) on error. 390 Version: 1.7.1 TF6510
## Page 391

PLC API 6.5.3.2.23 Set All Data Values Req This method activates the Set All Data Values service. METHOD Set All Data Values Req : BOOL VAR_INPUT ip Logical Node : I_Acsi Common Logical Node Class; e Fc : E_Acsi Fc; h User : PVOID; ip Sink : I_Scsm Set Data Values Cnf Event Sink; END_VAR VAR_OUTPUT n Invoke ID : UDINT; ip Result : I_Async Service Result Class; END_VAR ip Logical Node: Interface pointer of type I_Acsi Common Logical Node Class [} 342]. e Fc: Functional group of type E_Acsi Fc [} 448]. h User: Optional user-defined parameter or pointer. Any value for this parameter can be transferred in the methods for service activation (Xyz Method Req). The value is then mirrored in the event handling routine for the service feedback. ip Sink: Interface pointer of type I_Scsm Set Data Values Cnf Event Sink [} 414] of an object with a user-defined implementation of the event handling routine: On Set Data Values Cnf (service feedback). This parameter is optional and reserved for future use. The pointer value 0 defines the parameter as optional. ip Result: Interface pointer of type: I_Async Service Result Class [} 424] This pointer can be used to query and monitor the status/progress and the result of the service execution. n Invoke ID: Identifies the service activation. Each new service activation (Xyz Method Req) is numbered consecutively. A copy of this number is mirrored in the service feedback (On Xyz Method Cnf). Return parameter: Positive feedback (TRUE) if the service primitive was sent/started successfully, negative feedback (FALSE) on error. 6.5.3.2.24 Set Br CBValues Req This method activates the service: Set BRCBValues. METHOD Set BRCBValues Req : BOOL VAR_INPUT ip Brcb : I_Acsi Common Buffered Report Control Block Class; st Set : ST_Scsm Br CBValues Set; h User : PVOID; ip Sink : I_Scsm Set Data Values Cnf Event Sink; END_VAR VAR_OUTPUT n Invoke ID : UDINT; ip Result : I_Async Service Result Class; END_VAR ip Brcb: Interface pointer of type I_Acsi Common Buffered Report Control Block Class [} 335]. st Set: Structured variable of type: ST_Scsm Br CBValues Set [} 511]. This variable determines which RCB attribute values are to be written. TF6510 Version: 1.7.1 391
## Page 392

PLC API h User: Optional user-defined parameter or pointer. Any value for this parameter can be transferred in the methods for service activation (Xyz Method Req). The value is then mirrored in the event handling routine for the service feedback. ip Sink: Interface pointer of type I_Scsm Set Data Values Cnf Event Sink [} 414] of an object with a user-defined implementation of the event handling routine: On Set Data Values Cnf (service feedback). This parameter is optional and reserved for future use. The pointer value 0 defines the parameter as optional. ip Result: Interface pointer of type: I_Async Service Result Class [} 424] This pointer can be used to query and monitor the status/progress and the result of the service execution. n Invoke ID: Identifies the service activation. Each new service activation (Xyz Method Req) is numbered consecutively. A copy of this number is mirrored in the service feedback (On Xyz Method Cnf). Return parameter: Positive feedback (TRUE) if the service primitive was sent/started successfully, negative feedback (FALSE) on error. 6.5.3.2.25 Set Data Set Values Req This method activates the Set Data Set Values service. METHOD Set Data Set Values Req : BOOL VAR_INPUT ip Data Set : I_Acsi Common Data Set Class; h User : PVOID; ip Sink : I_Scsm Set Data Values Cnf Event Sink; END_VAR VAR_OUTPUT n Invoke ID : UDINT; ip Result : I_Async Service Result Class; END_VAR ip Data Set: Interface pointer of type I_Acsi Common Data Set Class [} 338]. h User: Optional user-defined parameter or pointer. Any value for this parameter can be transferred in the methods for service activation (Xyz Method Req). The value is then mirrored in the event handling routine for the service feedback. ip Sink: Interface pointer of type I_Scsm Set Data Values Cnf Event Sink [} 414] of an object with a user-defined implementation of the event handling routine: On Set Data Values Cnf (service feedback). This parameter is optional and reserved for future use. The pointer value 0 defines the parameter as optional. ip Result: Interface pointer of type: I_Async Service Result Class [} 424] This pointer can be used to query and monitor the status/progress and the result of the service execution. n Invoke ID: Identifies the service activation. Each new service activation (Xyz Method Req) is numbered consecutively. A copy of this number is mirrored in the service feedback (On Xyz Method Cnf). Return parameter: Positive feedback (TRUE) if the service primitive was sent/started successfully, negative feedback (FALSE) on error. 6.5.3.2.26 Set Data Values Req 392 Version: 1.7.1 TF6510
## Page 393

PLC API This method activates the Set Data Values service. METHOD Set Data Values Req : BOOL VAR_INPUT ip Data : I_Acsi Common Data Class; e Fc : E_Acsi Fc; h User : PVOID; ip Sink : I_Scsm Set Data Values Cnf Event Sink; END_VAR VAR_OUTPUT n Invoke ID : UDINT; ip Result : I_Async Service Result Class; END_VAR ip Data: Interface pointer of type I_Acsi Common Data Class [} 336]. e Fc: Functional group of type E_Acsi Fc [} 448]. h User: Optional user-defined parameter or pointer. Any value for this parameter can be transferred in the methods for service activation (Xyz Method Req). The value is then mirrored in the event handling routine for the service feedback. ip Sink: Interface pointer of type I_Scsm Set Data Values Cnf Event Sink [} 414] of an object with a user-defined implementation of the event handling routine: On Set Data Values Cnf (service feedback). This parameter is optional and reserved for future use. The pointer value 0 defines the parameter as optional. ip Result: Interface pointer of type: I_Async Service Result Class [} 424] This pointer can be used to query and monitor the status/progress and the result of the service execution. n Invoke ID: Identifies the service activation. Each new service activation (Xyz Method Req) is numbered consecutively. A copy of this number is mirrored in the service feedback (On Xyz Method Cnf). Return parameter: Positive feedback (TRUE) if the service primitive was sent/started successfully, negative feedback (FALSE) on error. 6.5.3.2.27 Set Go CBValues Req This method enables the service: Set GOCBValues. This method allows the client to write the values of a GOOSE Control Block. METHOD Set Go CBValues Req : BOOL VAR_INPUT ip Go CB : I_Acsi Common Goose Control Block Class; st Set : ST_Scsm Go CBValues Set; h User : PVOID; ip Sink : I_Scsm Set Data Values Cnf Event Sink; END_VAR VAR_OUTPUT n Invoke ID : UDINT; ip Result : I_Async Service Result Class; END_VAR ip Go CB: Interface pointer of type I_Acsi Common Goose Control Block Class [} 340]. st Set: Structured variable of type: ST_Scsm Go CBValues Set [} 513]. This variable determines which GOOSE control block attribute values should be written. h User: Optional user-defined parameter or pointer. Any value for this parameter can be transferred in the methods for service activation (Xyz Method Req). The value is then mirrored in the event handling routine for the service feedback. ip Sink: Interface pointer of type I_Scsm Set Data Values Cnf Event Sink [} 414] of an object with a user-defined implementation of the event handling routine: On Set Data Values Cnf (service feedback). This parameter is optional and reserved for future use. The pointer value 0 defines the parameter as optional. TF6510 Version: 1.7.1 393
## Page 394

PLC API n Invoke ID: Identifies the service activation. Each new service activation (Xyz Method Req) is numbered consecutively. A copy of this number is mirrored in the service feedback (On Xyz Method Cnf). ip Result: Interface pointer of type: I_Async Service Result Class [} 424] This pointer can be used to query and monitor the status/progress and the result of the service execution. Return parameter: Positive feedback (TRUE) if the service primitive was sent/started successfully, negative feedback (FALSE) on error. 6.5.3.2.28 Set Ur CBValues Req This method activates the Set URCBValues service. METHOD Set URCBValues Req : BOOL VAR_INPUT ip Urcb : I_Acsi Common Unbuffered Report Control Block Class; st Set : ST_Scsm Ur CBValues Set; h User : PVOID; ip Sink : I_Scsm Set Data Values Cnf Event Sink; END_VAR VAR_OUTPUT n Invoke ID : UDINT; ip Result : I_Async Service Result Class; END_VAR ip Urcb: Interface pointer of type I_Acsi Common Unbuffered Report Control Block Class [} 346]. st Set: Structured variable of type: ST_Scsm Ur CBValues Set [} 515]. This variable determines which RCB attribute values are to be written. h User: Optional user-defined parameter or pointer. Any value for this parameter can be transferred in the methods for service activation (Xyz Method Req). The value is then mirrored in the event handling routine for the service feedback. ip Sink: Interface pointer of type I_Scsm Set Data Values Cnf Event Sink [} 414] of an object with a user-defined implementation of the event handling routine: On Set Data Values Cnf (service feedback). This parameter is optional and reserved for future use. The pointer value 0 defines the parameter as optional. ip Result: Interface pointer of type: I_Async Service Result Class [} 424] This pointer can be used to query and monitor the status/progress and the result of the service execution. n Invoke ID: Identifies the service activation. Each new service activation (Xyz Method Req) is numbered consecutively. A copy of this number is mirrored in the service feedback (On Xyz Method Cnf). Return parameter: Positive feedback (TRUE) if the service primitive was sent/started successfully, negative feedback (FALSE) on error. 6.5.3.2.29 Identify Req This method enables the service: MMS-Identify. METHOD Identify Req : BOOL VAR_INPUT h User : PVOID; ip Sink : I_Scsm Identify Cnf Event Sink; END_VAR VAR_OUTPUT 394 Version: 1.7.1 TF6510
## Page 395

PLC API n Invoke ID : UDINT; ip Result : I_Async Service Result Class; END_VAR h User: Optional user-defined parameter or pointer. Any value for this parameter can be transferred in the methods for service activation (Xyz Method Req). The value is then mirrored in the event handling routine for the service feedback. ip Sink: Interface pointer of type: I_Scsm Identify Cnf Event Sink [} 410] from an object with a user-defined implementation of the event handling routine: On Identify Cnf (service feedback). This parameter is optional and reserved for future use. The pointer value 0 defines the parameter as optional. n Invoke ID: Identifies the service activation. Each new service activation (Xyz Method Req) is numbered consecutively. A copy of this number is mirrored in the service feedback (On Xyz Method Cnf). ip Result: Interface pointer of type: I_Async Service Result Class [} 424] This pointer can be used to query and monitor the status/progress and the result of the service execution. Return parameter: Positive feedback (TRUE) if the service primitive was sent/started successfully, negative feedback (FALSE) on error. 6.5.3.2.30 Status Req This method enables the service: MMS-Status. METHOD Status Req : BOOL VAR_INPUT h User : PVOID; ip Sink : I_Scsm Status Cnf Event Sink; END_VAR VAR_OUTPUT n Invoke ID : UDINT; ip Result : I_Async Service Result Class; END_VAR h User: Optional user-defined parameter or pointer. Any value for this parameter can be transferred in the methods for service activation (Xyz Method Req). The value is then mirrored in the event handling routine for the service feedback. ip Sink: Interface pointer of type: I_Scsm Status Cnf Event Sink [} 415] from an object with a user-defined implementation of the event handling routine: On Status Cnf (service feedback). This parameter is optional and reserved for future use. The pointer value 0 defines the parameter as optional. n Invoke ID: Identifies the service activation. Each new service activation (Xyz Method Req) is numbered consecutively. A copy of this number is mirrored in the service feedback (On Xyz Method Cnf). ip Result: Interface pointer of type: I_Async Service Result Class [} 424] This pointer can be used to query and monitor the status/progress and the result of the service execution. Return parameter: Positive feedback (TRUE) if the service primitive was sent/started successfully, negative feedback (FALSE) on error. 6.5.3.2.31 ip IED The instance of the communication function block is notified of the server data structure instance (top level) via this interface pointer. The communication function block can use this pointer for read or write access to the data structure. PROPERTY ip IED : I_Acsi Common Intelligent Electronic Device Class (SET) ip IED: Interface pointer of type I_Acsi Common Intelligent Electronic Device Class [} 340] of an object with the top-level implementation of the IEC 61850 data model. TF6510 Version: 1.7.1 395
## Page 396

PLC API 6.5.3.3 I_Scsm Connection Class Objects implementing this interface control the communication setup and data exchange between the Twin CAT PLC server application and the IEC 61850 client. Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) Inheritance hierarchy I_Scsm Connection Class INTERFACE I_Scsm Connection Class Methods Name Description Execute This method triggers the execution of the communication layer. Abort Req [} 397] Enables the service: Abort. Associate Rsp [} 397] Responds to the service: Associate. Release Req [} 397] Enables the service: Release. Release Rsp [} 398] Responds to the service: Release. Properties Name Type Access Description e Link Statu E_Scsm Link Status [} 487] Get Server Link status. Link status of the s network adapter (accepted sockets). e State E_Async Environment State [} 482] Get Environmental state of the communication connection. ip Abort Ind I_Scsm Abort Ind Event Sink [} 400] Set Interface pointer of an object with a user- defined implementation of the event handling routine: On Abort Ind [} 400]. ip Associat I_Scsm Associate Ind Event Sink Set Interface pointer of an object with a user- e Ind defined implementation of the event [} 401] handling routine: On Associate Ind [} 401]. ip Release I_Scsm Release Cnf Event Sink [} 412] Set Interface pointer of an object with a user- Cnf defined implementation of the event handling routine: On Release Cnf [} 412]. ip Release I I_Scsm Release Ind Event Sink [} 412] Set Interface pointer of an object with a user- nd defined implementation of the event handling routine: On Release Ind [} 413]. ip Server I_Scsm Server Class [} 398] Get Interface pointer of an object that identifies the server container. ip Settings I_Scsm Connection Settings Class Get Protocol settings for the communication layer. [} 348] ip Associati I_Scsm Association Class [} 402] Get Interface pointer of an object that on identifies the server connection (session). s Desc STRING Get The description of the server connection (session). 396 Version: 1.7.1 TF6510
## Page 397

PLC API 6.5.3.3.1 Abort Req This method activates the Abort service. This service can be used to terminate the server connection (session) in an uncontrolled manner. METHOD FINAL Abort Req : BOOL VAR_INPUT ip Reason : I_Service Error Class; ip Sink : I_Scsm Abort Ind Event Sink; END_VAR VAR_OUTPUT ip Result : I_Async Service Result Class; END_VAR ip Reason: Interface pointer of type I_Service Error Class [} 428]. This pointer can be used to pass an object with a user-defined cause for the disconnection. ip Sink: Interface pointer of type I_Scsm Abort Ind Event Sink [} 400] of an object with a user-defined implementation of the event handling routine: On Abort Ind (service feedback). This parameter is optional and reserved for future use. The pointer value 0 defines the parameter as optional. ip Result: Interface pointer of type: I_Async Service Result Class [} 424] This pointer can be used to query and monitor the status/progress and the result of the service execution. Return parameter: Positive feedback (TRUE) if the service primitive was sent/started successfully, negative feedback (FALSE) on error. 6.5.3.3.2 Associate Rsp This method responds to the Associate service. With this service, a server can establish a server connection (session) to the client. METHOD FINAL Associate Rsp : BOOL VAR_OUTPUT ip Result : I_Async Service Result Class; END_VAR ip Result: Interface pointer of type: I_Async Service Result Class [} 424] This pointer can be used to query and monitor the status/progress and the result of the service execution. Return parameter: Positive feedback (TRUE) if the service primitive was sent/started successfully, negative feedback (FALSE) on error. 6.5.3.3.3 Release Req This method activates the Release service. With this service, a server can terminate the server connection (session) to the client in a controlled manner. METHOD FINAL Release Req : BOOL VAR_INPUT ip Sink : I_Scsm Release Cnf Event Sink; END_VAR VAR_OUTPUT ip Result : I_Async Service Result Class; END_VAR TF6510 Version: 1.7.1 397
## Page 398

PLC API ip Sink: Interface pointer of type I_Scsm Release Cnf Event Sink [} 412] of an object with a user-defined implementation of the event handling routine On Release Cnf (service feedback). This parameter is optional and reserved for future use. The pointer value 0 defines the parameter as optional. ip Result: Interface pointer of type: I_Async Service Result Class [} 424] This pointer can be used to query and monitor the status/progress and the result of the service execution. Return parameter: Positive feedback (TRUE) if the service primitive was sent/started successfully, negative feedback (FALSE) on error. 6.5.3.3.4 Release Rsp This method responds to the Release service. With this service, a server can terminate a server connection (session) to the client in a controlled manner. METHOD FINAL Release Rsp : BOOL VAR_OUTPUT ip Result : I_Async Service Result Class; END_VAR ip Result: Interface pointer of type: I_Async Service Result Class [} 424] This pointer can be used to query and monitor the status/progress and the result of the service execution. Return parameter: Positive feedback (TRUE) if the service primitive was sent/started successfully, negative feedback (FALSE) on error. 6.5.3.4 I_Scsm Server Class Objects implementing this interface control the communication setup and data exchange between the Twin CAT PLC server application and the IEC 61850 client. Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) Inheritance hierarchy I_Scsm Server Class INTERFACE I_Scsm Server Class Methods Name Description Add Connection [} 399] Adds a connection instance to the Server. Execute This method triggers the execution of the communication layer. Remove Connection Removes a connection instance from the server. [} 399] 398 Version: 1.7.1 TF6510
## Page 399

PLC API Properties Name Type Access Description e Link Status E_Scsm Link Status [} 487] Get Server Link status. Link status of the network adapter (listener sockets). ip Connections I_Scsm Connection Class [} 396] Get Interface pointer from an object with the implementation of the first connection instance. ip IED I_Acsi Common Intelligent Electronic De Get,Set Interface pointer of an object with the implementation of the top-level of the vice Class [} 152] IEC 61850 data model. ip Settings I_Scsm Server Settings Class [} 398] Get Protocol settings for the communication layer. n Item UDINT Get The number of connection instances. s Desc STRING Get,Set The description of the server (container). 6.5.3.4.1 Add Connection This method adds a connection instance to the server. METHOD FINAL Add Connection : BOOL VAR_INPUT ip Connection : I_Scsm Connection Class; END_VAR VAR_OUTPUT ip Error : I_Service Error Class END_VAR ip Connection: Interface pointer of type: I_Scsm Connection Class [} 396] of the connection instance that is to be removed from the server. ip Error: Interface pointer of type I_Service Error Class [} 428]. Return parameter: Positive feedback (TRUE) if the service primitive was sent/started successfully, negative feedback (FALSE) on error. 6.5.3.4.2 Remove Connection This method removes a connection instance from the server. METHOD FINAL Remove Connection : BOOL VAR_INPUT ip Connection : I_Scsm Connection Class; END_VAR VAR_OUTPUT ip Error : I_Service Error Class END_VAR ip Connection: Interface pointer of type: I_Scsm Connection Class [} 396] of the connection instance that is to be removed from the server. ip Error: Interface pointer of type I_Service Error Class [} 428]. TF6510 Version: 1.7.1 399
## Page 400

PLC API Return parameter: Positive feedback (TRUE) if the service primitive was sent/started successfully, negative feedback (FALSE) on error. 6.5.3.5 I_Scsm Abort Ind Event Sink Objects that implement this interface have a user-defined Abort service event handling routine for disconnecting. Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) Inheritance hierarchy I_Scsm Abort Ind Event Sink INTERFACE I_Scsm Abort Ind Event Sink Methods for event handling Name Description On Abort Ind [} 400] User-defined abort service event handling routine 6.5.3.5.1 On Abort Ind METHOD On Abort Ind VAR_INPUT ip AA : I_Scsm Association Class; b PAbort : BOOL; ip Reason : I_Service Error Class; ip Data : I_Base Stream Class; END_VAR ip AA: Interface pointer of type: I_Scsm Association Class [} 402]. If several connection instances are active, this pointer can be used to determine the object instance running the service. This parameter is optional and reserved for future use. The pointer value 0 defines the parameter as optional. b PAbort: Trigger for the abort indication service primitive. Triggered by the service provider if TRUE, triggered by the service user if FALSE (application has started the abort request service primitive). ip Reason: Interface pointer of type I_Service Error Class [} 467]. This pointer can be used to obtain more detailed information about the cause of the disconnection. ip Data: Interface pointer of type I_Base Stream Class [} 431]. This pointer can be used to access optional data. No data is available if the pointer value is 0. 6.5.3.6 I_Scsm Associate Cnf Event Sink Objects that implement this interface have a user-defined Associate service event handling routine for connection establishment. Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) Inheritance hierarchy I_Scsm Associate Cnf Event Sink INTERFACE I_Scsm Associate Cnf Event Sink Methods for event handling Name Description On Associate Cnf [} 401] User-defined associate service event handling routine 400 Version: 1.7.1 TF6510
## Page 401

PLC API 6.5.3.6.1 On Associate Cnf METHOD On Associate Cnf VAR_INPUT ip AA : I_Scsm Association Class; e Error : E_Acsi Service Error; END_VAR ip AA: Interface pointer of type: I_Scsm Association Class [} 402]. If several connection instances are active, this pointer can be used to determine the object instance running the service. This parameter is optional and reserved for future use. The pointer value 0 defines the parameter as optional. e Error: Enumeration type: E_Acsi Service Error [} 467]. 6.5.3.7 I_Scsm Associate Ind Event Sink Objects that implement this interface have a user-defined Associate service event handling routine for server session connection establishment. Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) Inheritance hierarchy I_Scsm Associate Ind Event Sink INTERFACE I_Scsm Associate Ind Event Sink Methods for event handling Name Description On Associate Ind [} 401] User-defined Associate service event handling routine 6.5.3.7.1 On Associate Ind METHOD On Associate Ind : BOOL VAR_INPUT ip AA : I_Scsm Association Class; END_VAR VAR_OUTPUT ip Result : I_Async Service Result Class; END_VAR ip AA: Interface pointer of type: I_Scsm Association Class [} 402]. If several connection instances are active, this pointer can be used to determine the object instance running the service. This parameter is optional and reserved for future use. The pointer value 0 defines the parameter as optional. ip Result: Interface pointer of type: I_Async Service Result Class [} 424]. This pointer can be used to query and monitor the status/progress and the result of the service execution. Sample (extract) METHOD On Associate Ind : BOOL VAR_INPUT ip AA : I_Scsm Association Class; END_VAR VAR_OUTPUT ip Result : I_Async Service Result Class; END_VAR VAR END_VAR (*…*) s Last Abort Reason:= ''; s Last Error Result:= ''; (*…*) On Associate Ind:= fb Connection. Associate Rsp(ip Result=>ip Result); TF6510 Version: 1.7.1 401
## Page 402

PLC API 6.5.3.8 I_Scsm Association Class. An interface pointer of this type identifies a client-server connection. Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) Inheritance hierarchy I_Scsm Association Class. INTERFACE I_Scsm Association Class Methods - Properties Name Type Access Description ip Authentication I_Scsm Authentication Class Get Interface pointer to the authentication object. [} 402] 6.5.3.9 I_Scsm Authentication Class Objects that implement this interface are used for user-defined negotiation of the ACSE (Association Control Service Element) authentication and the MMS (Manufacturing Message Specification) communication parameters. Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) Inheritance hierarchy I_Mms Authentication Class -> I_Scsm Authentication Class INTERFACE I_Scsm Authentication Class EXTENDS I_Mms Authentication Class Methods Name Description Accept [} 403] Grants authentication access. Reject [} 404] Denies authentication access. Verify [} 404] Verifies the authentication access. Get Verify Result [} 403] Returns the verification result of the authentication. 402 Version: 1.7.1 TF6510
## Page 403

PLC API Properties Name Type Access Description b Accepted BOOL Get Verification result of the authentication. TRUE => Connection is accepted, FALSE => Connection is rejected. s Password STRING Get Authentication password (sent password at the client and received password at the server). ip Negotiated Additional CBB I_Mms Additional CB Get Interface pointer for configuring the negotiated, Supported additionally supported CBB parameters of the BOptions [} 352] MMS communication layer. ip Negotiated Additional Supp I_Mms Additional Su Get Interface pointer for configuring the negotiated, orted additionally supported MMS services. pport Options [} 352] ip Negotiated Parameter CBB I_Mms Parameter Su Get Interface pointer for configuring the negotiated supported options of the MMS communication pport Options layer. [} 351] ip Negotiated Services Suppo I_Mms Service Suppo Get Interface pointer for configuring the negotiated rted supported services of the MMS communication rt Options [} 351] layer. n Negotiated Local Detail T_Mms Integer32 Get Negotiated MMS parameter: Local detail (max. size of the MMS data). [} 517] n Negotiated Max Serv Out Ca T_Mms Integer16 Get Negotiated MMS parameter: Max. number of lled incoming services. [} 517] n Negotiated Max Serv Out Ca T_Mms Integer16 Get Negotiated MMS parameter: M ax. Number of lling outgoing services. [} 517] n Negotiated Nesting Level T_Mms Integer8 Get Negotiated MMS parameter: Nesting depth. [} 517] 6.5.3.9.1 Accept This method grants authentication access. METHOD Accept : BOOL VAR_INPUT s Responding Pass : STRING; END_VAR s Responding Pass: Password to be sent as a response in mutual authentication mode. In unilateral authentication mode, this parameter value has no meaning. Return parameter: TRUE => Success. FALSE => Error (e.g. command not permitted or not permitted in the current state). 6.5.3.9.2 Get Verify Result This method provides a detailed result of the verification of the authentication data. The internal standard verification takes place on the server when the associate request data is received (AARQ telegram) and on the client when the associate response data is received (AARE telegram). With the Get Verify Result return parameter value TRUE, the IEC 61850 server or client application may check or change the authentication status itself at a certain point in time, but only if authentication (authentication-functional-unit) has been activated in the communication requests of both communication partners. A connection that is expected to be accepted by the server can be subsequently rejected using the Reject [} 404] method. A connection that is likely to be rejected by the server can be subsequently accepted using the Accept [} 403] method. In a server application, the methods: Accept [} 403] or Reject [} 404] may only be called within the implementation of the On Associate Ind event handling routine. Only at this point can the application still control the authentication process itself. TF6510 Version: 1.7.1 403
## Page 404

PLC API In mutual authentication mode, a client application can also check the authentication status itself at a specific time. A connection that is expected to be accepted by the client can be rejected using the Reject [} 404] method. A connection that is likely to be rejected by the client can be subsequently accepted using the Accept [} 403] method. In a client application, the Accept [} 403] or Reject [} 404] methods may only be called within the implementation of the On Associate Cnf event handling routine. A connection that has already been rejected by the server cannot be subsequently accepted by the client. METHOD Get Verify Result : BOOL VAR_OUTPUT b Accepted : BOOL; e Type : E_Acse Authentication; s Mechanism Name : STRING; s Password : STRING; s Responding Pass : STRING; e Result : E_ACSE_Aare Result; e Diagnostic : E_ACSE_Aare Diagnostic; e Abrt Diagnostic : E_ACSE_Abrt Diagnostic; END_VAR b Accepted: General result of the verification of the authentication data. TRUE => Connection is accepted and maintained, FALSE => Connection is rejected and closed. This parameter will also be TRUE if no authentication has been configured/activated for both communication partners. e Type: The used/configured authentication mode of type E_Acse Authentication [} 434]. Unilateral (standard) or mutual. s Mechanism Name: Name of the authentication mechanism. Client => sent name, server => received name (default: '2.2.3.1'). s Password: Authentication password in plain text. Client => sent password, server => received password. s Responding Pass: Password in plain text, sent in response to the mutual authentication type. e Result: Result parameter in the Association Response command of type E_ACSE_Aare Result [} 432]. Result parameter which the server will send as a response to the client, or which the client has already received as a response from the server (in the ACSE-AARE telegram). e Diagnostic: Diagnostic data for the Association Response command of type E_ACSE_Aare Diagnostic [} 431]. Additional information that the server will send as a response to the client or that the client has already received as a response from the server (in the ACSE-AARE telegram). e Abrt Diagnostic: Diagnostic data of type E_ACSE_Abrt Diagnostic [} 433], which is sent in the Association Abort command in the event of a rejected connection. Return parameter: TRUE => Success, the client/server application is allowed to check or change the authentication status. FALSE => Error (e.g. command not permitted or not permitted in the current state). 6.5.3.9.3 Reject This method denies authentication access. METHOD Reject : BOOL Return parameter: TRUE => Success. FALSE => Error (e.g. command not permitted or not permitted in the current state). 6.5.3.9.4 Verify This method performs the internal verification of the authentication parameters again. METHOD Verify : BOOL Return parameter: TRUE => Success. FALSE => Error (e.g. command not permitted or not permitted in the current state). 404 Version: 1.7.1 TF6510
## Page 405

PLC API 6.5.3.10 I_Scsm Command Termination Ind Event Sink Objects that implement this interface have a user-defined Command termination service event handling routine for switch control. Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) Inheritance hierarchy I_Scsm Command Termination Ind Event Sink INTERFACE I_Scsm Command Termination Ind Event Sink Methods for event handling Name Description On Command Termination Ind [} 405] User-defined Command termination service event handling routine 6.5.3.10.1 On Command Termination Ind METHOD On Command Termination Ind VAR_INPUT ip AA : I_Scsm Association Class; info : ST_Scsm Command Termination Event Info; ip Ctrl : I_Acsi Common Controllable Data Class; ip Data : I_Acsi Common Data Class; e Fc : E_Acsi Fc; e Error : E_Acsi Service Error; END_VAR ip AA: Interface pointer of type: I_Scsm Association Class [} 402]. If several connection instances are active, this pointer can be used to determine the object instance running the service. This parameter is optional and reserved for future use. The pointer value 0 defines the parameter as optional. info: Structured variable of type ST_Scsm Command Termination Event Info [} 511] with additional information. ip Ctrl: Interface pointer of type: I_Acsi Common Controllable Data Class [} 336] of a controllable object. ip Data: Interface pointer of type I_Acsi Common Data Class [} 336]. e Fc: Functional group as enumeration type: E_Acsi Fc [} 448]. e Error: Enumeration type: E_Acsi Service Error [} 467]. 6.5.3.11 I_Scsm Control Cnf Event Sink Objects that implement this interface have a user-defined Control service event handling routine for switch control (Cancel, Operate, Select, Select With Value). Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) Inheritance hierarchy I_Scsm Control Cnf Event Sink INTERFACE I_Scsm Control Cnf Event Sink Methods for event handling Name Description On Control Cnf [} 406] User-defined control service Event handling routine for switch control. TF6510 Version: 1.7.1 405
## Page 406

PLC API 6.5.3.11.1 On Control Cnf METHOD On Control Cnf VAR_INPUT ip AA : I_Scsm Association Class; info : ST_Scsm Confirmed Event Info; ip Ctrl : I_Acsi Common Controllable Data Class; ip Data : I_Acsi Common Data Class; e Fc : E_Acsi Fc; e Error : E_Acsi Service Error; END_VAR ip AA: Interface pointer of type: I_Scsm Association Class [} 402]. If several connection instances are active, this pointer can be used to determine the object instance running the service. This parameter is optional and reserved for future use. The pointer value 0 defines the parameter as optional. info: Structured variable of type ST_Scsm Confirmed Event Info [} 512] with additional information. ip Ctrl: Interface pointer of type: I_Acsi Common Controllable Data Class [} 336] of a controllable object. ip Data: Interface pointer of type I_Acsi Common Data Class [} 336]. e Fc: Functional group as enumeration type: E_Acsi Fc [} 448]. e Error: Enumeration type: E_Acsi Service Error [} 467]. 6.5.3.12 I_Scsm Create Data Set Cnf Event Sink Objects that implement this interface have a user-defined Create Data Set service event handling routine. Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) Inheritance hierarchy I_Scsm Create Data Set Cnf Event Sink INTERFACE I_Scsm Create Data Set Cnf Event Sink Methods for event handling Name Description On Create Data Set Cnf [} 406] User-defined Create Data Set service event handling routine. 6.5.3.12.1 On Create Data Set Cnf METHOD On Create Data Set Cnf VAR_INPUT ip AA : I_Scsm Association Class; info : ST_Scsm Confirmed Event Info; ip Data Set : I_Acsi Common Data Set Class; e Error : E_Acsi Service Error; END_VAR ip AA: Interface pointer of type: I_Scsm Association Class [} 402]. If several connection instances are active, this pointer can be used to determine the object instance running the service. This parameter is optional and reserved for future use. The pointer value 0 defines the parameter as optional. info: Structured variable of type ST_Scsm Confirmed Event Info [} 512] with additional information. ip Data Set: Interface pointer of type: I_Acsi Common Data Set Class [} 338] e Error: Enumeration type: E_Acsi Service Error [} 467]. 6.5.3.13 I_Scsm Delete Data Set Cnf Event Sink Objects that implement this interface have a user-defined Delete Data Set service event handling routine. 406 Version: 1.7.1 TF6510
## Page 407

PLC API Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) Inheritance hierarchy I_Scsm Delete Data Set Cnf Event Sink INTERFACE I_Scsm Delete Data Set Cnf Event Sink Methods for event handling Name Description On Delete Data Set Cnf [} 407] User-defined Delete Data Set service event handling routine. 6.5.3.13.1 On Delete Data Set Cnf METHOD On Delete Data Set Cnf VAR_INPUT ip AA : I_Scsm Association Class; info : ST_Scsm Confirmed Event Info; ip Data Set : I_Acsi Common Data Set Class; e Error : E_Acsi Service Error; END_VAR ip AA: Interface pointer of type: I_Scsm Association Class [} 402]. If several connection instances are active, this pointer can be used to determine the object instance running the service. This parameter is optional and reserved for future use. The pointer value 0 defines the parameter as optional. info: Structured variable of type ST_Scsm Confirmed Event Info [} 512] with additional information. ip Data Set: Interface pointer of type: I_Acsi Common Data Set Class [} 338] e Error: Enumeration type: E_Acsi Service Error [} 467]. 6.5.3.14 I_Scsm Get Data Set Directory Cnf Event Sink Objects that implement this interface have a user-defined Get Data Set Directory service event handling routine. Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) Inheritance hierarchy I_Scsm Get Data Set Directory Cnf Event Sink INTERFACE I_Scsm Get Data Set Directory Cnf Event Sink Methods for event handling Name Description On Get Data Set Directory C User-defined Get Data Set Directory service event handling routine nf [} 407] 6.5.3.14.1 On Get Data Set Directory Cnf METHOD On Get Data Set Directory Cnf VAR_INPUT ip AA : I_Scsm Association Class; info : ST_Scsm Confirmed Event Info; ip Data Set : I_Acsi Common Data Set Class; s Object Reference : T_Acsi Object Reference; e Fc : E_Acsi Fc; e Error : E_Acsi Service Error; END_VAR TF6510 Version: 1.7.1 407
## Page 408

PLC API ip AA: Interface pointer of type: I_Scsm Association Class [} 402]. If several connection instances are active, this pointer can be used to determine the object instance running the service. This parameter is optional and reserved for future use. The pointer value 0 defines the parameter as optional. info: Structured variable of type ST_Scsm Confirmed Event Info [} 512] with additional information. ip Data Set: Interface pointer of type: I_Acsi Common Data Set Class [} 338] s Object Reference: e Fc: Functional group as enumeration type: E_Acsi Fc [} 448]. e Error: Enumeration type: E_Acsi Service Error [} 467]. 6.5.3.15 I_Scsm Get Data Values Cnf Event Sink Objects that implement this interface have a user-defined Get Data Values service event handling routine. Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) Inheritance hierarchy I_Scsm Get Data Values Cnf Event Sink INTERFACE I_Scsm Get Data Values Cnf Event Sink Methods for event handling Name Description On Get Data Values Cnf User-defined Get Data Values service event handling routine [} 408] 6.5.3.15.1 On Get Data Values Cnf METHOD On Get Data Values Cnf VAR_INPUT ip AA : I_Scsm Association Class; info : ST_Scsm Confirmed Event Info; ip Data : I_Acsi Common Data Class; e Fc : E_Acsi Fc; e Error : E_Acsi Service Error; END_VAR ip AA: Interface pointer of type: I_Scsm Association Class [} 402]. If several connection instances are active, this pointer can be used to determine the object instance running the service. This parameter is optional and reserved for future use. The pointer value 0 defines the parameter as optional. info: Structured variable of type ST_Scsm Confirmed Event Info [} 512] with additional information. ip Data: Interface pointer of type: I_Acsi Common Data Class [} 336]. e Fc: Functional group as enumeration type: E_Acsi Fc [} 448]. e Error: Enumeration type: E_Acsi Service Error [} 467]. 6.5.3.16 I_Scsm Get Logical Device Directory Cnf Event Sink Objects that implement this interface have a user-defined Get Logical Device Directory service event handling routine. Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) Inheritance hierarchy 408 Version: 1.7.1 TF6510
## Page 409

PLC API I_Scsm Get Logical Device Directory Cnf Event Sink INTERFACE I_Scsm Get Logical Device Directory Cnf Event Sink Methods for event handling Name Description On Get Logical Device Direc User-defined Get Logical Device Directory service event handling routine tory Cnf [} 409] 6.5.3.16.1 On Get Logical Device Directory Cnf METHOD On Get Logical Device Directory Cnf VAR_INPUT ip AA : I_Scsm Association Class; info : ST_Scsm Confirmed Event Info; ip Logical Device : I_Acsi Common Logical Device Class; s Object Reference : T_Acsi Object Reference; e Error : E_Acsi Service Error; END_VAR ip AA: Interface pointer of type: I_Scsm Association Class [} 402]. If several connection instances are active, this pointer can be used to determine the object instance running the service. This parameter is optional and reserved for future use. The pointer value 0 defines the parameter as optional. info: Structured variable of type ST_Scsm Confirmed Event Info [} 512] with additional information. ip Logical Device: Interface pointer of type I_Acsi Common Logical Device Class [} 341]. s Object Reference: e Error: Enumeration type: E_Acsi Service Error [} 467]. 6.5.3.17 I_Scsm Get Logical Node Directory Cnf Event Sink Objects that implement this interface have a user-defined Get Logical Node Directory service event handling routine. Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) Inheritance hierarchy I_Scsm Get Logical Node Directory Cnf Event Sink INTERFACE I_Scsm Get Logical Node Directory Cnf Event Sink Methods for event handling Name Description On Get Logical Node Direct User-defined Get Logical Node Directory service event handling routine ory Cnf [} 409] 6.5.3.17.1 On Get Logical Node Directory Cnf METHOD On Get Logical Node Directory Cnf VAR_INPUT ip AA : I_Scsm Association Class; info : ST_Scsm Confirmed Event Info; ip Logical Node : I_Acsi Common Logical Node Class; e Class : E_Acsi Logical Node Class; s Object Reference : T_Acsi Object Reference; e Error : E_Acsi Service Error; END_VAR TF6510 Version: 1.7.1 409
## Page 410

PLC API ip AA: Interface pointer of type: I_Scsm Association Class [} 402]. If several connection instances are active, this pointer can be used to determine the object instance running the service. This parameter is optional and reserved for future use. The pointer value 0 defines the parameter as optional. info: Structured variable of type ST_Scsm Confirmed Event Info [} 512] with additional information. ip Logical Node: Interface pointer of type I_Acsi Common Logical Node Class [} 342]. e Class: Enumeration variable of type E_Acsi Logical Node Class [} 453]. s Object Reference: e Error: Enumeration type: E_Acsi Service Error [} 467]. 6.5.3.18 I_Scsm Get Server Directory Cnf Event Sink Objects that implement this interface have a user-defined Get Server Directory service event handling routine. Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) Inheritance hierarchy I_Scsm Get Server Directory Cnf Event Sink INTERFACE I_Scsm Get Server Directory Cnf Event Sink Methods for event handling Name Description On Get Server Directory Cnf User-defined Get Server Directory service event handling routine [} 410] 6.5.3.18.1 On Get Server Directory Cnf METHOD On Get Server Directory Cnf VAR_INPUT ip AA : I_Scsm Association Class; info : ST_Scsm Confirmed Event Info; ip Server : I_Acsi Common Intelligent Electronic Device Class; e Class : E_Acsi Server Directory Class; s Object Reference : T_Acsi Object Reference; e Error : E_Acsi Service Error; END_VAR ip AA: Interface pointer of type: I_Scsm Association Class [} 402]. If several connection instances are active, this pointer can be used to determine the object instance running the service. This parameter is optional and reserved for future use. The pointer value 0 defines the parameter as optional. info: Structured variable of type ST_Scsm Confirmed Event Info [} 512] with additional information. ip Server: Interface pointer of type I_Acsi Common Intelligent Electronic Device Class [} 340] of the server object that is queried. e Class: Enumeration variable of type E_Acsi Server Directory Class [} 467]. This parameter specifies which information is queried: Logical nodes or files. s Object Reference: e Error: Enumeration type: E_Acsi Service Error [} 467]. 6.5.3.19 I_Scsm Identify Cnf Event Sink Objects that implement this interface have a user-defined identify service event handling routine. 410 Version: 1.7.1 TF6510
## Page 411

PLC API Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) Inheritance hierarchy I_Scsm Identify Cnf Event Sink INTERFACE I_Scsm Identify Cnf Event Sink Methods for event handling Name Description On Identify Cnf [} 411] User-defined identify service event handling routine. 6.5.3.19.1 On Identify Cnf METHOD On Identify Cnf VAR_INPUT ip AA : I_Scsm Association Class; info : ST_Scsm Confirmed Event Info; s Vendor Name : T_Mms String; s Model Name : T_Mms String; s Revision : T_Mms String; e Error : E_Acsi Service Error; END_VAR ip AA: Interface pointer of type: I_Scsm Association Class [} 402]. If several connection instances are active, this pointer can be used to determine the object instance running the service. This parameter is optional and reserved for future use. The pointer value 0 defines the parameter as optional. info: Structured variable of type ST_Scsm Confirmed Event Info [} 512] with additional information. s Vendor Name: Manufacturer designation of type: T_Mms String [} 517]. s Model Name: Model name of type: T_Mms String [} 517]. s Revision: Revision string of type: T_Mms String [} 517]. e Error: Enumeration type: E_Acsi Service Error [} 467]. 6.5.3.20 I_Scsm Last Appl Error Ind Event Sink Objects that implement this interface have a user-defined Last Appl Error service event handling routine for access to additional diagnostic report data. Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) Inheritance hierarchy I_Scsm Last Appl Error Ind Event Sink INTERFACE I_Scsm Last Appl Error Ind Event Sink Methods for event handling Name Description On Last Appl Error Ind User-defined Last Appl Error service event handling routine [} 411] 6.5.3.20.1 On Last Appl Error Ind METHOD On Last Appl Error Ind VAR_INPUT ip AA : I_Scsm Association Class; TF6510 Version: 1.7.1 411
## Page 412

PLC API info : ST_Scsm Additional Cause Diagnostic Event Info; ip Ctrl : I_Acsi Common Controllable Data Class; e Error : E_Acsi Service Error; END_VAR ip AA: Interface pointer of type: I_Scsm Association Class [} 402]. If several connection instances are active, this pointer can be used to determine the object instance running the service. This parameter is optional and reserved for future use. The pointer value 0 defines the parameter as optional. info: Structured variable of type ST_Scsm Additional Cause Diagnostic Event Info [} 510] with additional information about Last Appl Error. ip Ctrl: Interface pointer of type: I_Acsi Common Controllable Data Class [} 336] of a controllable object. e Error: Enumeration type: E_Acsi Service Error [} 467]. 6.5.3.21 I_Scsm Release Cnf Event Sink Objects that implement this interface have a user-defined release service event handling routine for disconnection. Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) Inheritance hierarchy I_Scsm Release Cnf Event Sink INTERFACE I_Scsm Release Cnf Event Sink Methods for event handling Name Description On Release Cnf [} 412] User-defined release service event handling routine 6.5.3.21.1 On Release Cnf METHOD On Release Cnf VAR_INPUT ip AA : I_Scsm Association Class; e Error : E_Acsi Service Error; END_VAR ip AA: Interface pointer of type: I_Scsm Association Class [} 402]. If several connection instances are active, this pointer can be used to determine the object instance running the service. This parameter is optional and reserved for future use. The pointer value 0 defines the parameter as optional. e Error: Enumeration type: E_Acsi Service Error [} 467]. 6.5.3.22 I_Scsm Release Ind Event Sink Objects that implement this interface have a user-defined release service event handling routine for disconnection. Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) Inheritance hierarchy I_Scsm Release Ind Event Sink INTERFACE I_Scsm Release Ind Event Sink 412 Version: 1.7.1 TF6510
## Page 413

PLC API Methods for event handling Name Description On Release Ind [} 413] User-defined release service event handling routine 6.5.3.22.1 On Release Ind METHOD On Release Ind : E_Event Completion VAR_INPUT ip AA : I_Scsm Association Class; END_VAR ip AA: Interface pointer of type: I_Scsm Association Class [} 402]. If several connection instances are active, this pointer can be used to determine the object instance running the service. This parameter is optional and reserved for future use. The pointer value 0 defines the parameter as optional. 6.5.3.23 I_Scsm Report Ind Event Sink Objects that implement this interface have a user-defined report service event handling routine. Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) Inheritance hierarchy I_Scsm Report Ind Event Sink INTERFACE I_Scsm Report Ind Event Sink Methods for event handling Name Description On Buffered Report Ind Custom buffered report service event handling routine [} 413] On Unbuffered Report Ind Custom unbuffered report service event handling routine [} 414] 6.5.3.23.1 On Buffered Report Ind METHOD On Buffered Report Ind VAR_INPUT ip AA : I_Scsm Association Class; info : ST_Scsm Report Event Info; ip Brcb : I_Acsi Common Buffered Report Control Block Class; ip Data Set : I_Acsi Common Data Set Class; ip Data : I_Acsi Common Data Class; e Fc : E_Acsi Fc; e Error : E_Acsi Service Error; END_VAR ip AA: Interface pointer of type: I_Scsm Association Class [} 402]. If several connection instances are active, this pointer can be used to determine the object instance running the service. This parameter is optional and reserved for future use. The pointer value 0 defines the parameter as optional. info: Structured variable of type ST_Scsm Report Event Info [} 513] with additional information on the report. ip Brcb: Interface pointer of type I_Acsi Common Buffered Report Control Block Class [} 335]. ip Data Set: Interface pointer of type: I_Acsi Common Data Set Class [} 338] ip Data: Interface pointer of type: I_Acsi Common Data Class [} 336]. e Fc: Functional group as enumeration type: E_Acsi Fc [} 448]. TF6510 Version: 1.7.1 413
## Page 414

PLC API e Error: Enumeration type: E_Acsi Service Error [} 467]. 6.5.3.23.2 On Unbuffered Report Ind METHOD On Unbuffered Report Ind VAR_INPUT ip AA : I_Scsm Association Class; info : ST_Scsm Report Event Info; ip Urcb : I_Acsi Common Unbuffered Report Control Block Class; ip Data Set : I_Acsi Common Data Set Class; ip Data : I_Acsi Common Data Class; e Fc : E_Acsi Fc; e Error : E_Acsi Service Error; END_VAR ip AA: Interface pointer of type: I_Scsm Association Class [} 402]. If several connection instances are active, this pointer can be used to determine the object instance running the service. This parameter is optional and reserved for future use. The pointer value 0 defines the parameter as optional. info: Structured variable of type ST_Scsm Report Event Info [} 513] with additional information on the report. ip Urcb: Interface pointer of type I_Acsi Common Unbuffered Report Control Block Class [} 346]. ip Data Set: Interface pointer of type: I_Acsi Common Data Set Class [} 338] ip Data: Interface pointer of type: I_Acsi Common Data Class [} 336]. e Fc: Functional group as enumeration type: E_Acsi Fc [} 448]. e Error: Enumeration type: E_Acsi Service Error [} 467]. 6.5.3.24 I_Scsm Set Data Values Cnf Event Sink Objects that implement this interface have a user-defined Set Data Values service event handling routine. Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) Inheritance hierarchy I_Scsm Set Data Values Cnf Event Sink INTERFACE I_Scsm Set Data Values Cnf Event Sink Methods for event handling Name Description On Set Data Values Cnf User-defined Set Data Values service event handling routine [} 414] 6.5.3.24.1 On Set Data Values Cnf METHOD On Set Data Values Cnf VAR_INPUT ip AA : I_Scsm Association Class; info : ST_Scsm Confirmed Event Info; ip Data : I_Acsi Common Data Class; e Fc : E_Acsi Fc; e Error : E_Acsi Service Error; END_VAR ip AA: Interface pointer of type: I_Scsm Association Class [} 402]. If several connection instances are active, this pointer can be used to determine the object instance running the service. This parameter is optional and reserved for future use. The pointer value 0 defines the parameter as optional. info: Structured variable of type ST_Scsm Confirmed Event Info [} 512] with additional information. 414 Version: 1.7.1 TF6510
## Page 415

PLC API ip Data: Interface pointer of type: I_Acsi Common Data Class [} 336]. e Fc: Functional group as enumeration type: E_Acsi Fc [} 448]. e Error: Enumeration type: E_Acsi Service Error [} 467]. 6.5.3.25 I_Scsm Status Cnf Event Sink Objects that implement this interface have a user-defined status service event handling routine. Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) Inheritance hierarchy I_Scsm Status Cnf Event Sink INTERFACE I_Scsm Status Cnf Event Sink Methods for event handling Name Description On Status Cnf [} 415] User-defined status service event handling routine. 6.5.3.25.1 On Status Cnf METHOD On Status Cnf VAR_INPUT ip AA : I_Scsm Association Class; info : ST_Scsm Confirmed Event Info; e Vmd Logical Status : E_Mms Vmd Logical Status; e Vmd Physical Status : E_Mms Vmd Physical Status; ip Local Detail : I_Mms Bit String; e Error : E_Acsi Service Error; END_VAR ip AA: Interface pointer of type: I_Scsm Association Class [} 402]. If several connection instances are active, this pointer can be used to determine the object instance running the service. This parameter is optional and reserved for future use. The pointer value 0 defines the parameter as optional. info: Structured variable of type ST_Scsm Confirmed Event Info [} 512] with additional information. e Vmd Logical Status: Enumeration type: E_Mms Vmd Logical Status [} 486]. e Vmd Physical Status: Enumeration type: E_Mms Vmd Physical Status [} 486]. ip Local Detail: Interface pointer of type: I_Mms Bit String. e Error: Enumeration type: E_Acsi Service Error [} 467]. 6.5.3.26 I_Scsm System Clock Event Sink Objects that implement this interface have a user-defined system clock service event handling routine for access to an external time source. Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) Inheritance hierarchy I_Scsm System Clock Event Sink INTERFACE I_Scsm System Clock Event Sink TF6510 Version: 1.7.1 415
## Page 416

PLC API Methods for event handling Name Description On Get System Time User-defined system clock service event handling routine [} 416] 6.5.3.26.1 On Get System Time METHOD On Get System Time : BOOL VAR_INPUT ip AA : I_Scsm Association Class; END_VAR VAR_OUTPUT utc Time : T_Utc Time; END_VAR ip AA: Interface pointer of type: I_Scsm Association Class [} 402]. If several connection instances are active, this pointer can be used to determine the object instance running the service. This parameter is optional and reserved for future use. The pointer value 0 defines the parameter as optional. utc Time: Current UTC time information of type T_Utc Time [} 519]. 6.5.3.27 Control block access 6.5.3.27.1 I_Scsm Br CBImpl Class Objects that implement this interface are report control block instances for buffered reports (buffered report control blocks, BRCBs). The Twin CAT Telecontrol Configurator generates report control block instances that are derived/extended from FB_Acsi Buffered Report Control Block [} 165]. All function blocks derived from FB_Acsi Buffered Report Control Block [} 165] automatically have the interface referred to above implemented by default. Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) Inheritance hierarchy I_Acsi Common Node Class [} 344] -> I_Acsi Common Data Class [} 336] -> I_Acsi Common Control Block Class [} 335] -> I_Acsi Common Buffered Report Control Block Class [} 335] -> I_Scsm Br CBImpl Class INTERFACE I_Scsm Br CBImpl Class EXTENDS I_Acsi Common Buffered Report Control Block Class 416 Version: 1.7.1 TF6510
## Page 417

PLC API Properties Name Type Access Description b GI BOOL Get, Attribute value: Enabling the general interrogation command. Set b Purge B BOOL Get, Attribute value: Enabling the purge command. uf Set b Rpt Ena BOOL Get, Attribute value: Enabling/disabling the RCB control block. Further Set configuration needed. c Opt Flds ST_Acsi Optional Fiel Get, Attribute value: Configuration of the optional fields that are Set transferred with a report. ds [} 498] c Trg Ops ST_Acsi Trigger Condi Get, Attribute value: Configuration of the trigger options for sending a Set report. tions [} 506] i Resv Tm INT Get, Attribute value: Configuration of the time for reserving the RCB for s Set a specific client. n Buf Tm DWORD Get, Attribute value: Configuration of the max. report buffer time in Set milliseconds. n Conf Re DWORD Get, Attribute value: Revision number of the RCB control block v Set configuration. n Entry ID LWORD Get, Attribute value: ID of the report entry as 64-bit numerical value. Set n Intg Pd DWORD Get, Attribute value: Configuration of the max. time between integrity Set reports in milliseconds. n Sq Num WORD Get, Attribute value: Report sequence number. Set o Entry ID T_OCTET8 [} 518] Get, Attribute value: ID of the report entry as octet string. Set o Owner T_OCTET64 [} 518] Get, Attribute value: Owner of the RCB. IP address of the client which Set has reserved the RCB for itself (offline/online reservation). s Dat Set T_Acsi Object Referen Get, Attribute value: Name of the linked data set. Set ce [} 515] s Rpt ID T_Acsi Vis String129 Get, Attribute value: Report identification string. Set [} 516] t Time Of E T_Binary Time Get, Attribute value: Report timestamp. ntry Set [} 516] ip Dat Set I_Acsi Common Data Get Interface pointer of the linked data set. Set Class [} 338] ip Client I_Scsm Br CBClient Jo Get Interface pointer of the client implementation of the BRCB control block. b Class [} 417] ip Server I_Scsm Br CBServer Jo Get Interface pointer of the server implementation of the BRCB control block. b Class [} 419] 6.5.3.27.2 I_Scsm Br CBClient Job Class Objects implementing this interface control the behavior of the client BRCB control block. Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) TF6510 Version: 1.7.1 417
## Page 418

PLC API Methods Name Description Enable Req [} 418] Enables the control block. Disable Req [} 418] Disables the control block. GIreq [} 418] Enables the general interrogation command. Purge Buf Req [} 419] Enables the Purge Buf command. Resync Req [} 419] Enables the Resync command. 6.5.3.27.2.1 Enable Req Enables the BRCB control block. METHOD FINAL Enable Req : BOOL VAR_INPUT ip Client : I_Scsm Client Class; ip Data Set : I_Acsi Common Data Set Class; END_VAR VAR_OUTPUT ip Result : I_Async Service Result Class; END_VAR ip Client: Interface pointer of type: I_Scsm Client Class [} 373]. This pointer determines the service executing object instance of the IEC 61850 client. ip Data Set: Interface pointer of type I_Acsi Common Data Set Class [} 338]. ip Result: Interface pointer of type: I_Async Service Result Class [} 424] This pointer can be used to query and monitor the status/progress and the result of the service execution. Return parameter: Positive feedback (TRUE) if the service primitive was sent/started successfully, negative feedback (FALSE) on error. 6.5.3.27.2.2 Disable Req Disables the BRCB control block. METHOD FINAL Disable Req : BOOL VAR_OUTPUT ip Result : I_Async Service Result Class; END_VAR ip Result: Interface pointer of type: I_Async Service Result Class [} 424] This pointer can be used to query and monitor the status/progress and the result of the service execution. Return parameter: Positive feedback (TRUE) if the service primitive was sent/started successfully, negative feedback (FALSE) on error. 6.5.3.27.2.3 GIreq Enables the general interrogation command. METHOD FINAL GIreq : BOOL VAR_OUTPUT ip Result : I_Async Service Result Class; END_VAR ip Result: Interface pointer of type: I_Async Service Result Class [} 424] This pointer can be used to query and monitor the status/progress and the result of the service execution. Return parameter: Positive feedback (TRUE) if the service primitive was sent/started successfully, negative feedback (FALSE) on error. 418 Version: 1.7.1 TF6510
## Page 419

PLC API 6.5.3.27.2.4 Purge Buf Req Enables the Purge command. METHOD FINAL Purge Buf Req : BOOL VAR_INPUT ip Client : I_Scsm Client Class; END_VAR VAR_OUTPUT ip Result : I_Async Service Result Class; END_VAR ip Client: Interface pointer of type: I_Scsm Client Class [} 373]. This pointer determines the service executing object instance of the IEC 61850 client. ip Result: Interface pointer of type: I_Async Service Result Class [} 424] This pointer can be used to query and monitor the status/progress and the result of the service execution. Return parameter: Positive feedback (TRUE) if the service primitive was sent/started successfully, negative feedback (FALSE) on error. 6.5.3.27.2.5 Resync Req Enables the Resync command. METHOD FINAL Resync Req : BOOL VAR_INPUT ip Client : I_Scsm Client Class; n Entry ID : LWORD; END_VAR VAR_OUTPUT ip Result : I_Async Service Result Class; END_VAR ip Client: Interface pointer of type: I_Scsm Client Class [} 373]. This pointer determines the service executing object instance of the IEC 61850 client. n Entry ID: Entry ID of the report for the buffer resynchronization command. ip Result: Interface pointer of type: I_Async Service Result Class [} 424] This pointer can be used to query and monitor the status/progress and the result of the service execution. Return parameter: Positive feedback (TRUE) if the service primitive was sent/started successfully, negative feedback (FALSE) on error. 6.5.3.27.3 I_Scsm Br CBServer Job Class Objects implementing this interface control the behavior of the server BRCB control block. Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) Methods Name Description Execute [} 419] Runs the RCB state machine of the server. 6.5.3.27.3.1 Execute Runs the RCB state machine of the server. METHOD Execute : BOOL TF6510 Version: 1.7.1 419
## Page 420

PLC API 6.5.3.27.4 I_Scsm Go CBImpl Class Objects implementing this interface are control block instances for Generic Object Oriented Substation Events (GOOSE). The Twin CAT Telecontrol Configurator generates GOOSE control block instances that are derived/extended from FB_Scsm Go CBImpl Class [} 255]. All function blocks derived from FB_Scsm Go CBImpl Class [} 255] automatically have a default implementation of the above interface. Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) Inheritance hierarchy I_Acsi Common Node Class [} 344] -> I_Acsi Common Data Class [} 336] -> I_Acsi Common Control Block Class [} 335] -> I_Acsi Common Goose Control Block Class [} 340] -> I_Scsm Go CBImpl Class INTERFACE I_Scsm Go CBImpl Class EXTENDS I_Acsi Common Goose Control Block Class Properties Name Type Ac- Description cess b Fixed Offs BOOL Get Attribute value: Enables/disables coding with fixed lengths. b Go Ena BOOL Get, Attribute value: Enables/disables the GOOSE control block. Set b Nds Com BOOL Get Attribute value: Indicates whether the GOOSE control block requires further configuration. e PRIORITY E_Acsi VLan Priority Get Priority level in the VLAN network. [} 481] ip Dat Set I_Acsi Common Data Set Get Interface pointer to the linked data set. Class [} 338] mac Addr ETHERNET_ADDRESS Get Target MAC address. [} 490] n APPID WORD Get Application Identifier. n Conf Rev UDINT Get Revision number of the configuration of the GOOSE control block. n Max Time DWORD Get Maximum time between repeated transmissions of a GOOSE message in milliseconds. n Min Time DWORD Get Time between direct sending after data change and first repetition in milliseconds. n VID WORD(0..4095) Get ID of the VLAN network. o Addr T_OCTET6 [} 518] Get Target MAC address. s Addr STRING(17) Get Target MAC address. s Dat Set T_Acsi Object Reference Get, Name of the linked data set. Set [} 515] s Go ID T_Acsi Vis String129 Get, The ID of the GOOSE messages. Set [} 516] 6.5.3.27.5 I_Scsm Go CBClient Job Class Objects implementing this interface control the behavior of the client GOCB control block. Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) 420 Version: 1.7.1 TF6510
## Page 421

PLC API Methods Name Description Enable Req [} 421] Enables the control block. Disable Req [} 421] Disables the control block. 6.5.3.27.5.1 Enable Req Enables the GOCB control block. METHOD FINAL Enable Req : BOOL VAR_INPUT ip Client : I_Scsm Client Class; ip Data Set : I_Acsi Common Data Set Class; END_VAR VAR_OUTPUT ip Result : I_Async Service Result Class; END_VAR ip Client: Interface pointer of type: I_Scsm Client Class [} 373]. This pointer determines the service executing object instance of the IEC 61850 client. ip Data Set: Interface pointer of type I_Acsi Common Data Set Class [} 338]. ip Result: Interface pointer of type: I_Async Service Result Class [} 424] This pointer can be used to query and monitor the status/progress and the result of the service execution. Return parameter: Positive feedback (TRUE) if the service primitive was sent/started successfully, negative feedback (FALSE) on error. 6.5.3.27.5.2 Disable Req Disables the GOCB control block. METHOD FINAL Disable Req : BOOL VAR_OUTPUT ip Result : I_Async Service Result Class; END_VAR ip Result: Interface pointer of type: I_Async Service Result Class [} 424] This pointer can be used to query and monitor the status/progress and the result of the service execution. Return parameter: Positive feedback (TRUE) if the service primitive was sent/started successfully, negative feedback (FALSE) on error. 6.5.3.27.6 I_Scsm Go CBServer Job Class Objects implementing this interface control the behavior of the server GOCB control block. Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) Methods Name Description Execute [} 421] Runs the GOCB state machine of the server. 6.5.3.27.6.1 Execute Runs the GOCB state machine of the server. METHOD Execute : BOOL TF6510 Version: 1.7.1 421
## Page 422

PLC API 6.5.3.27.7 I_Scsm Ur CBImpl Class Objects that implement this interface are report control block instances for unbuffered reports (unbuffered report control blocks, UBRCBs). The Twin CAT Telecontrol Configurator generates report control block instances that are derived/extended from FB_Acsi Unbuffered Report Control Block [} 166]. All function blocks derived from FB_Acsi Unbuffered Report Control Block [} 166] automatically have the interface referred to above implemented by default. Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) Inheritance hierarchy I_Acsi Common Node Class [} 344] -> I_Acsi Common Data Class [} 336] -> I_Acsi Common Control Block Class [} 335] -> I_Acsi Common Unbuffered Report Control Block Class [} 346] -> I_Scsm Ur CBImpl Class INTERFACE I_Scsm Ur CBImpl Class EXTENDS I_Acsi Common Unbuffered Report Control Block Class Properties Name Type Access Description b GI BOOL Get, Set Attribute value: Enabling the general interrogation command. b Resv BOOL Get, Set Attribute value: Reservation of the RCB. b Rpt En BOOL Get, Set Attribute value: Enabling/disabling the RCB control block. Further a configuration needed. c Opt Fld ST_Acsi Optional Fiel Get, Set Attribute value: Configuration of the optional fields that are s transferred with a report. ds [} 498] c Trg Op ST_Acsi Trigger Con Get, Set Attribute value: Configuration of the trigger options for sending a s report. ditions [} 506] n Buf Tm DWORD Get, Set Attribute value: Configuration of the max. report buffer time in milliseconds. n Conf R DWORD Get, Set Attribute value: Revision number of the RCB control block ev configuration. n Intg Pd DWORD Get, Set Attribute value: Configuration of the max. time between integrity reports in milliseconds. n Sq Nu BYTE Get, Set Attribute value: Report sequence number. m o Owner T_OCTET64 [} 518] Get, Set Attribute value: Owner of the RCB. IP address of the client which has reserved the RCB for itself (offline/online reservation). s Dat Set T_Acsi Object Refere Get, Set Attribute value: Name of the linked data set. nce [} 515] s Rpt ID T_Acsi Vis String129 Get, Set Attribute value: Report identification string. [} 516] ip Dat Se I_Acsi Common Data Get Interface pointer of the linked data set. t Set Class [} 338] ip Client I_Scsm Ur CBClient Jo Get Interface pointer of the client implementation of the URCB control block. b Class [} 422] ip Serve I_Scsm Ur CBServer J Get Interface pointer of the server implementation of the URCB control r block. ob Class [} 423] 6.5.3.27.8 I_Scsm Ur CBClient Job Class Objects implementing this interface control the behavior of the client UCB control block. Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) 422 Version: 1.7.1 TF6510
## Page 423

PLC API Methods Name Description Enable Req [} 423] Enables the control block. Disable Req [} 423] Disables the control block. GIreq [} 423] Enables the general interrogation command. 6.5.3.27.8.1 Enable Req Enables the URCB control block. METHOD FINAL Enable Req : BOOL VAR_INPUT ip Client : I_Scsm Client Class; ip Data Set : I_Acsi Common Data Set Class; END_VAR VAR_OUTPUT ip Result : I_Async Service Result Class; END_VAR ip Client: Interface pointer of type: I_Scsm Client Class [} 373]. This pointer determines the service executing object instance of the IEC 61850 client. ip Data Set: Interface pointer of type I_Acsi Common Data Set Class [} 338]. ip Result: Interface pointer of type: I_Async Service Result Class [} 424] This pointer can be used to query and monitor the status/progress and the result of the service execution. Return parameter: Positive feedback (TRUE) if the service primitive was sent/started successfully, negative feedback (FALSE) on error. 6.5.3.27.8.2 Disable Req Disables the URCB control block. METHOD FINAL Disable Req : BOOL VAR_OUTPUT ip Result : I_Async Service Result Class; END_VAR ip Result: Interface pointer of type: I_Async Service Result Class [} 424] This pointer can be used to query and monitor the status/progress and the result of the service execution. Return parameter: Positive feedback (TRUE) if the service primitive was sent/started successfully, negative feedback (FALSE) on error. 6.5.3.27.8.3 GIreq Enables the general interrogation command. METHOD FINAL GIreq : BOOL VAR_OUTPUT ip Result : I_Async Service Result Class; END_VAR ip Result: Interface pointer of type: I_Async Service Result Class [} 424] This pointer can be used to query and monitor the status/progress and the result of the service execution. Return parameter: Positive feedback (TRUE) if the service primitive was sent/started successfully, negative feedback (FALSE) on error. 6.5.3.27.9 I_Scsm Ur CBServer Job Class Objects implementing this interface control the behavior of the server UBC control block. TF6510 Version: 1.7.1 423
## Page 424

PLC API Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) Methods Name Description Execute [} 424] Runs the RCB state machine of the server. 6.5.3.27.9.1 Execute Runs the RCB state machine of the server. METHOD Execute : BOOL 6.5.4 I_Async Service Result Class Generic interface for status query and tracking of asynchronous processes. This includes services that require several PLC cycles to run. For objects that implement this interface, the status/progress and the result of the service execution can be monitored and queried. Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) Inheritance hierarchy I_Async Service Result Class INTERFACE I_Async Service Result Class Methods Name Description Copy From [} 425] Copies object data from another object instance Dump [} 425] Converts own object data into a formatted string Equal [} 425] Value comparison of own object data with external data values Equal Ex [} 425] Value comparison of own object data with external data values Equal To [} 425] Value comparison of own object data with the data of another object instance Is Aborted [} 426] Checks whether the service was aborted Is Busy [} 426] Checks whether the service is still running Is Completed [} 426] Checks whether the service execution was completed successfully Is Failed [} 426] Checks whether the service execution was completed with an error Set Aborted [} 426] Sets the abort status Set Aborted Ex [} 427] Sets the abort status Set Busy [} 427] Sets the status to busy Set Completed [} 427] Sets the status to completed (without error) Set Failed [} 428] Sets the error state Set Failed Ex [} 428] Sets the error state Properties Name Type Access Description e State E_Async Service State [} 483] Get Status information [} 428] 424 Version: 1.7.1 TF6510
## Page 425

PLC API 6.5.4.1 Copy From Copies object data from another object instance. METHOD Copy From : BOOL VAR_INPUT ip Source : I_Async Service Result Class; END_VAR ip Source: Interface pointer of type I_Async Service Result Class [} 424] of the data source object instance. Return parameter: TRUE => success, FALSE => error (e.g. interface pointer is null). 6.5.4.2 Dump Converts own object data to a formatted string (e.g. for log outputs) METHOD Dump : T_Max String Return parameter: String with the following format: ‚{State: {Severity: [Verbose][Info][Warning][Error] [Critical], Id: n[nnnnn], class: „Name Or Guiid“}}‘. 6.5.4.3 Equal Value comparison of own object data (status and error information) with external data values. METHOD Equal : BOOL VAR_INPUT e Other : E_Async Service State; ip Other : I_Service Error Class; END_VAR e Other: Enumeration type E_Async Service State [} 483] with the status to be compared. ip Other: Interface pointer of type I_Service Error Class [} 428] of the object instance with the error information to be compared. Return parameter: TRUE => data identical, FALSE => data differ. 6.5.4.4 Equal Ex Value comparison of own object data (status and error information) with external data values. METHOD Equal Ex : BOOL VAR_INPUT e Other : E_Async Service State; st Other : ST_Service Error Class; END_VAR e Other: Enumeration type E_Async Service State [} 483] with the status to be compared. st Other: Structured variable of type ST_Service Error Class [} 515] with the error information to be compared. Return parameter: TRUE => data identical, FALSE => data differ. 6.5.4.5 Equal To Value comparison of own object data (status and error information) with the data of another object instance. METHOD Equal To : BOOL VAR_INPUT ip Other : I_Async Service Result Class; END_VAR ip Other: Interface pointer of type I_Async Service Result Class [} 424] of the object instance whose data are to be compared. Return parameter: TRUE => data identical, FALSE => data differ. TF6510 Version: 1.7.1 425
## Page 426

PLC API 6.5.4.6 Is Aborted Checks whether the service was aborted METHOD Is Aborted : BOOL Return parameter: TRUE => aborted, FALSE => not aborted (busy or completed or failed). 6.5.4.7 Is Busy Checks whether the service is still running. METHOD Is Busy : BOOL Return parameter: TRUE => busy, FALSE => not busy (completed or aborted or failed). Example (extract) METHOD My Service Req : BOOL VAR_INPUT t Timeout : TIME; END_VAR VAR_OUTPUT ip Result : I_Async Service Result Class := _fb Result; END_VAR IF ip Result. Is Busy() THEN(* service allready running => abort *) _state := 0; ip Result. Set Aborted Ex( st Reason := ERROR_INVALID_STATE ); RETURN; END_IF IF t Timeout = T#0S THEN(* invalid parameter => failure *) ip Result. Set Failed Ex( st Error := ERROR_INVALID_VALUE ); RETURN; END_IF ip Result. Set Busy(); _fb Timer( IN := FALSE, PT := t Timeout ); _state := 1; THIS^(); My Service Req := TRUE; 6.5.4.8 Is Completed Checks whether the service execution was completed successfully. METHOD Is Completed : BOOL Return parameter: TRUE => completed without error. FALSE => not completed (busy or aborted or failed). 6.5.4.9 Is Failed Checks whether the service execution was completed with an error. METHOD Is Failed : BOOL Return parameter: TRUE => completed with an error, FALSE => not completion with an error (busy or completed or aborted). 6.5.4.10 Set Aborted Sets the abort status and saves the data about the cause of the termination in its own object instance. METHOD Set Aborted : I_Async Service Result Class VAR_INPUT ip Reason : I_Service Error Class; END_VAR ip Reason: Interface pointer of type I_Service Error Class [} 428] of an object instance with the data on the cause of the termination. Return parameter: Own interface pointer of type I_Async Service Result Class [} 424]. 426 Version: 1.7.1 TF6510
## Page 427

PLC API 6.5.4.11 Set Aborted Ex Sets the abort status and saves the data about the cause of the termination in its own object instance. METHOD Set Aborted Ex : I_Async Service Result Class VAR_INPUT st Reason : ST_Service Error Class; END_VAR st Reason: Structured variable of type ST_Service Error Class [} 515] with the data on the cause of the termination. Return parameter: Own interface pointer of type I_Async Service Result Class [} 424]. Example (extract) METHOD My Service Req : BOOL VAR_INPUT t Timeout : TIME; END_VAR VAR_OUTPUT ip Result : I_Async Service Result Class := _fb Result; END_VAR IF ip Result. Is Busy() THEN(* service allready running => abort *) _state := 0; ip Result. Set Aborted Ex( st Reason := ERROR_INVALID_STATE ); RETURN; END_IF IF t Timeout = T#0S THEN(* invalid parameter => failure *) ip Result. Set Failed Ex( st Error := ERROR_INVALID_VALUE ); RETURN; END_IF ip Result. Set Busy(); _fb Timer( IN := FALSE, PT := t Timeout ); _state := 1; THIS^(); My Service Req := TRUE; 6.5.4.12 Set Busy Sets the status in the own object instance to "busy“. METHOD Set Busy : I_Async Service Result Class Return parameter: Own interface pointer of type I_Async Service Result Class [} 424]. Example (extract) METHOD My Service Req : BOOL VAR_INPUT t Timeout : TIME; END_VAR VAR_OUTPUT ip Result : I_Async Service Result Class := _fb Result; END_VAR IF ip Result. Is Busy() THEN(* service allready running => abort *) _state := 0; ip Result. Set Aborted Ex( st Reason := ERROR_INVALID_STATE ); RETURN; END_IF IF t Timeout = T#0S THEN(* invalid parameter => failure *) ip Result. Set Failed Ex( st Error := ERROR_INVALID_VALUE ); RETURN; END_IF ip Result. Set Busy(); _fb Timer( IN := FALSE, PT := t Timeout ); _state := 1; THIS^(); My Service Req := TRUE; 6.5.4.13 Set Completed Sets the status in the own object instance to "completed" (without error). TF6510 Version: 1.7.1 427
## Page 428

PLC API METHOD Set Completed : I_Async Service Result Class Return parameter: Own interface pointer of type I_Async Service Result Class [} 424]. 6.5.4.14 Set Failed Sets the error state and saves the data about the cause of the error in its own object instance. METHOD Set Failed : I_Async Service Result Class VAR_INPUT ip Error : I_Service Error Class; END_VAR ip Error: Interface pointer of type I_Service Error Class [} 428] of an object instance with the data on the cause of the error. Return parameter: Own interface pointer of type I_Async Service Result Class [} 424]. 6.5.4.15 Set Failed Ex Sets the error state and saves the data about the cause of the error in its own object instance. METHOD Set Failed Ex : I_Async Service Result Class VAR_INPUT st Error : ST_Service Error Class; END_VAR st Error: Structured variable of type ST_Service Error Class [} 515] with the data on the cause of the error. Return parameter: Own interface pointer of type I_Async Service Result Class [} 424]. Example (extract) METHOD My Service Req : BOOL VAR_INPUT t Timeout : TIME; END_VAR VAR_OUTPUT ip Result : I_Async Service Result Class := _fb Result; END_VAR IF ip Result. Is Busy() THEN(* service allready running => abort *) _state := 0; ip Result. Set Aborted Ex( st Reason := ERROR_INVALID_STATE ); RETURN; END_IF IF t Timeout = T#0S THEN(* invalid parameter => failure *) ip Result. Set Failed Ex( st Error := ERROR_INVALID_VALUE ); RETURN; END_IF ip Result. Set Busy(); _fb Timer( IN := FALSE, PT := t Timeout ); _state := 1; THIS^(); My Service Req := TRUE; 6.5.4.16 e State Asynchronous service status. PROPERTY e State : E_Async Service State {GET} e State: Status of type E_Async Service State [} 483]. 6.5.5 I_Service Error Class Generic interface for error query and storage. For objects that implement this interface, error information such as the error code, source of error or error text can be queried or compared. Inheritance hierarchy 428 Version: 1.7.1 TF6510
## Page 429

PLC API I_Service Error Class Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) INTERFACE I_Service Error Class Methods Name Description Copy From [} 429] Copies object data from another object instance Dump [} 429] Converts own object data to a formatted string (e.g. for log outputs) Equal [} 429] Value comparison of own object data (error information) with external data values Equal Ex [} 430] Value comparison of own object data (error information) with external data values Equal To [} 430] Value comparison of own object data (error information) with the data of another object instance Is Failed [} 430] Checks own object data (error information) for failure Is Succeeded [} 430] Checks own object data (error information) for success Set Failed Ex [} 430] Stores error information in its own object instance Set Succeeded [} 431] Stores success information in own object instance Properties Name Type Access Description st Error [} 431] ST_Service Error Class [} 515] Get Object data as a structured type 6.5.5.1 Copy From Copies object data from another object instance. METHOD Copy From : BOOL VAR_INPUT ip Other : I_Service Error Class; END_VAR ip Other: Interface pointer of type I_Service Error Class [} 428] of the data source object instance. Return parameter: TRUE => success, FALSE => error (e.g. interface pointer is null). 6.5.5.2 Dump Converts own object data to a formatted string (e.g. for log outputs) METHOD Dump : T_Max String Return parameter: String with the following format: ‘{Severity: [Verbose][Info][Warning][Error][Critical], Id: n[nnnnn], class: „Name Or Guiid“ }’. 6.5.5.3 Equal Value comparison of own object data (error information) with external data values. METHOD Equal : BOOL VAR_INPUT uuid Other : GUID; n Other : UDINT; e Other : Tc Event Severity; END_VAR uuid Other: The event class of type GUID to be compared. TF6510 Version: 1.7.1 429
## Page 430

PLC API n Other: The event ID to be compared. e Other: The event of the type Tc Event Severity [} 493] to be compared. Return parameter: TRUE => data identical, FALSE => data differ. 6.5.5.4 Equal Ex Value comparison of own object data (error information) with external data values. METHOD Equal Ex : BOOL VAR_INPUT st Other : ST_Service Error Class; END_VAR st Other: Structured variable of type ST_Service Error Class [} 515] with the data values to be compared. Return parameter: TRUE => data identical, FALSE => data differ. 6.5.5.5 Equal To Value comparison of own object data (error information) with the data of another object instance. METHOD Equal To : BOOL VAR_INPUT ip Other : I_Service Error Class; END_VAR ip Other: Interface pointer of type I_Service Error Class [} 428] of the object instance whose data is to be compared. Return parameter: TRUE => data identical, FALSE => data differ. 6.5.5.6 Is Failed Checks own object data (error information) for failure. METHOD Is Failed : BOOL Return parameter: TRUE => failure, FALSE => success. 6.5.5.7 Is Succeeded Checks own object data (error information) for success. METHOD Is Succeeded : BOOL Return parameter: TRUE => success, FALSE => failure. 6.5.5.8 Set Failed Ex Stores error information in its own object instance. METHOD Set Failed Ex : I_Service Error Class VAR_INPUT st Error : ST_Service Error Class; END_VAR st Error: Structured variable of type ST_Service Error Class [} 515] with the data on the cause of the error. Return parameter: Own interface pointer of type I_Service Error Class [} 428]. Sample (extract) METHOD Do Something : BOOL VAR_INPUT s Name : STRING; END_VAR VAR_OUTPUT 430 Version: 1.7.1 TF6510
## Page 431

PLC API ip Error : I_Service Error Class := _fb Error; END_VAR IF s Name = '' THEN ip Error. Set Failed Ex( st Error := TC_EVENTS. Tc General Ads Event Class. Invalid Param ); RETURN; END_IF (* To Do: *) ip Error. Set Succeeded(); Do Something := TRUE; 6.5.5.9 Set Succeeded Stores success information in its own object instance. METHOD Set Succeeded : I_Service Error Class Return parameter: Own interface pointer of type I_Service Error Class [} 428]. Sample (extract) METHOD Do Something : BOOL VAR_INPUT s Name : STRING; END_VAR VAR_OUTPUT ip Error : I_Service Error Class := _fb Error; END_VAR IF s Name = '' THEN ip Error. Set Failed Ex( st Error := TC_EVENTS. Tc General Ads Event Class. Invalid Param ); RETURN; END_IF (* To Do: *) ip Error. Set Succeeded(); Do Something := TRUE; 6.5.5.10 st Error PROPERTY st Error : ST_Service Error Class (GET) st Error: Error information as structured type ST_Service Error Class [} 515]. 6.5.6 I_Base Stream Class Inheritance hierarchy I_Base Stream Class INTERFACE I_Base Stream Class 6.6 Data types 6.6.1 E_ACSE_Aare Diagnostic Diagnostic information, sent in the ACSE (Association Control Service Element) Associate Response (AARE) telegram. Namespace: Tc3_Ulosi [} 98] Library: Tc3_Ulosi (Tc3_Ulosi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_ACSE_Aare Diagnostic : ( TF6510 Version: 1.7.1 431
## Page 432

PLC API Null :=0, No_reason_given :=1, Application_context_name_not_supported :=2, Calling_AP_title_not_recognized :=3, Calling_AP_invocation_identifier_not_recognized :=4, Calling_AE_qualifier_not_recognized :=5, Calling_AE_invocation_identifier_not_recognized :=6, Called_AP_title_not_recognized :=7, Called_AP_invocation_identifier_not_recognized :=8, Called_AE_qualifier_not_recognized :=9, Called_AE_invocation_identifier_not_recognized :=10, Authentication_mechanism_name_not_recognized :=11, Authentication_mechanism_name_required :=12, Authentication_failure :=13, Authentication_required :=14 )USINT; END_TYPE Values Name Description Null Null. No_reason_given No reason given. Application_context_name_not_supported The code meaning depends on the diagnostic source: acse-service-user => Application context name not supported, acse-service-provider => No common ACS version. Calling_AP_title_not_recognized ISO 8650-1 setting "Calling AP title" was not recognized. Calling_AP_invocation_identifier_not_recognized ISO 8650-1 setting "Calling AP invocation identifier" was not recognized. Calling_AE_qualifier_not_recognized ISO 8650-1 setting "Calling AE qualifier" was not recognized. Calling_AE_invocation_identifier_not_recognized ISO 8650-1 setting "Calling AE invocation identifier" was not recognized. Called_AP_title_not_recognized ISO 8650-1 setting "Called AP title" was not recognized. Called_AP_invocation_identifier_not_recognized ISO 8650-1 setting "Called AP invocation identifier" was not recognized. Called_AE_qualifier_not_recognized ISO 8650-1 setting "Called AE qualifier" was not recognized. Called_AE_invocation_identifier_not_recognized ISO 8650-1 setting "Called AE invocation identifier" was not recognized. Authentication_mechanism_name_not_recognized The name of the authentication mechanism was not recognized. Authentication_mechanism_name_required The name of the authentication mechanism is required. Authentication_failure Authentication failed. Authentication_required Authentication is required. 6.6.2 E_ACSE_Aare Result Result information, sent in the ACSE (Association Control Service Element) Associate-Response (AARE) telegram. Namespace: Tc3_Ulosi [} 98] Library: Tc3_Ulosi (Tc3_Ulosi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_ACSE_Aare Result : 432 Version: 1.7.1 TF6510
## Page 433

PLC API ( Accepted :=0, Rejected_Permanent :=1, Rejected_Transient :=2 )USINT; END_TYPE Values Name Description Accepted Accepted Rejected_Permanent Permanently rejected Rejected_Transient Temporarily rejected 6.6.3 E_ACSE_Aare Source Diagnostic source, sent in the ACSE (Association Control Service Element) Associate Response (AARE) telegram. Namespace: Tc3_Ulosi [} 98] Library: Tc3_Ulosi (Tc3_Ulosi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_ACSE_Aare Source : ( Service User :=1, Service Provider :=2 )USINT; END_TYPE Values Name Description Service User Service user Service Provider Service provider 6.6.4 E_ACSE_Abrt Diagnostic Diagnostic information, sent in the ACSE (Association Control Service Element) Associate-Abort (ABRT) telegram. Namespace: Tc3_Ulosi [} 98] Library: Tc3_Ulosi (Tc3_Ulosi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_ACSE_Abrt Diagnostic : ( Null :=0, No_reason_given :=1, Protocol_error :=2, Authentication_mechanism_name_not_recognized :=3, Authentication_mechanism_name_required :=4, Authentication_failure :=5, Authentication_required :=6 )USINT; END_TYPE TF6510 Version: 1.7.1 433
## Page 434

PLC API Values Name Description Null Value not available. No_reason_given No reason given. Protocol_error Protocol error Authentication_mechanism_name_not The name of the authentication mechanism was not recognized. _recognized Authentication_mechanism_name_req The name of the authentication mechanism is required. uired Authentication_failure Authentication failed Authentication_required Authentication required 6.6.5 E_ACSE_Abrt Source Diagnostic source, sent in the ACSE (Association Control Service Element) Associate-Abort (ABRT) telegram. Namespace: Tc3_Ulosi [} 98] Library: Tc3_Ulosi (Tc3_Ulosi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_ACSE_Abrt Source : ( Service User :=0, Service Provider :=1 )USINT; END_TYPE Values Name Description Service User Service user Service Provider Service provider 6.6.6 E_Acse Authentication Type of ACSE (Association Control Service Element) authentication. Namespace: Tc3_Ulosi [} 98] Library: Tc3_Ulosi (Tc3_Ulosi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acse Authentication : ( Unilateral :=0, Mutual :=1 )SINT; END_TYPE Values Name Description Unilateral Unilateral authentication (default) Mutual Mutual authentication (two parties authenticate simultaneously). 434 Version: 1.7.1 TF6510
## Page 435

PLC API 6.6.7 E_Acsi Access Permission Configures the restriction of the access to a data value. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Access Permission : ( RO := 1, WO := 2, RW := 3 )SINT; END_TYPE Values Name Description RO Read access only. WO Write access only. RW Read and write access. 6.6.8 E_Acsi Adj St Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Adj St : ( Completed := 1, Cancelled := 2, New Adjustments := 3, Under Way := 4 )SINT; END_TYPE Values Name Description Completed Cancelled New Adjustments Under Way 6.6.9 E_Acsi Alm Lev Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Alm Lev : ( Low := 1, Normal := 2, TF6510 Version: 1.7.1 435
## Page 436

PLC API Urgent := 3 ) SINT; END_TYPE Values Name Description Low Normal Urgent 6.6.10 E_Acsi Analogue Value Pres Cond Configures the presence of the Analogue Value "i" and "f" attributes in the status values (mx Val) and control values (ctl Val). Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Analogue Value Pres Cond : ( i := 2#0101, f := 2#1010, both_CO_i := 2#0111, both_CO_f := 3#1011 )SINT; END_TYPE Values Name Status values (mx Val) Control values (ctl Val) i i i f f f both_CO_i i and f i both_CO_f i and f f 6.6.11 E_Acsi Ang Ref Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Ang Ref : ( Va := 0, Vb := 1, Vc := 2, Aa := 3, Ab := 4, Ac := 5, Vab := 6, Vbc := 7, Vca := 8, Vother := 9, Aother := 10, Synchrophasor := 11 )SINT; END_TYPE 436 Version: 1.7.1 TF6510
## Page 437

PLC API Values Name Description Va Vb Vc Aa Down Ac Vab Vbc Vca Vother Aother Synchronphasor 6.6.12 E_Acsi Appl Add Cause Additional diagnostic information about the cause of a negative feedback when a control service is executed (operate, select, cancel etc.). Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Appl Add Cause : ( Unknown := 0, Not Supported := 1, Blocked By Switching Hierarchy := 2, Select Failed := 3, Invalid Position := 4, Position Reached := 5, Parameter Change In Execution := 6, Step Limit := 7, Blocked By Mode := 8, Blocked By Process := 9, Blocked By Interlocking := 10, Blocked By Synchrocheck := 11, Command Already In Execution := 12, Blocked By Health := 13, One Of NControl := 14, Abortion By Cancel := 15, Time Limit Over := 16, Abortion By Trip := 17, Object Not Selected := 18, Object Already Selected := 19, No Access Authority := 20, Ended With Overshoot := 21, Abortion Due To Deviation := 22, Abortion By Communication Loss := 23, Blocked By Command := 24, None := 25, Inconsistent Parameters := 26, Locked By Other Client := 27 )SINT; END_TYPE TF6510 Version: 1.7.1 437
## Page 438

PLC API Values Name Description Unknown Unknown. Not Supported Not-supported. Blocked By Switching Hierarchy Blocked-by-switching-hierarchy. Select Failed Select-failed. Invalid Position Invalid-position. Position Reached Position-reached. Parameter Change In Execution Parameter-change-in-execution. Step Limit Step-limit. Blocked By Mode Blocked-by-Mode. Blocked By Process Blocked-by-process. Blocked By Interlocking Blocked-by-interlocking. Blocked By Synchrocheck Blocked-by-synchrocheck. Command Already In Execution Command-already-in-execution. Blocked By Health Blocked-by-health. One Of NControl 1-of-n-control. Abortion By Cancel Abortion-by-cancel. Time Limit Over Time-limit-over. Abortion By Trip Abortion-by-trip. Object Not Selected Object-not-selected. Object Already Selected Object-already-selected. No Access Authority No-access-authority. Ended With Overshoot Ended-with-overshoot. Abortion Due To Deviation Abortion-due-to-deviation. Abortion By Communication Loss Abortion-by-communication-loss. locked By Command Blocked-by-command. None None. Inconsistent Parameters Inconsistent-parameters. Locked By Other Client Locked-by-other-client. 6.6.13 E_Acsi Appl Error Diagnostic information about the source of the error (for example the state machine of services, the Operate or Time Activated service itself, or another source). Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Appl Error : ( No Error := 0, Unknown := 1, Timeout Test Not Ok := 2, Operator Test Not Ok := 3 )SINT; END_TYPE 438 Version: 1.7.1 TF6510
## Page 439

PLC API Values Name Description No Error No error. Unknown Unknown. Timeout Test Not Ok Timeout test not ok. Operator Test Not Ok Operator test not ok. 6.6.14 E_Acsi Auto Rec St Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Auto Rec St : ( Ready := 1, In Progress := 2, Successful := 3, Waiting For Trip := 4, Trip Issued By Protection := 5, Fault Disappeared := 6, Wait To Complete := 7, Circuit Breaker Closed := 8, Cycle Unsuccessful := 9, Unsuccessful := 10, Aborted := 11 )SINT; END_TYPE Values Name Description Ready In Progress Successful Waiting For Trip Trip Issued By Protection Fault Disappeared Wait To Complete Circuit Breaker Closed Cycle Unsuccessful Unsuccessful Aborted 6.6.15 E_Acsi Beh Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Beh : ( On := 1, On Blocked := 2, Test := 3, Test Blocked := 4, TF6510 Version: 1.7.1 439
## Page 440

PLC API Off := 5 )SINT; END_TYPE Values Name Description On On Blocked "blocked" in Ed1 is changed in Ed2 to "on-blocked". Test Test Blocked Off 6.6.16 E_Acsi CBOp Cap Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi CBOp Cap : ( None := 1, Open := 2, Close Open := 3, Open Close Open := 4, Close Open Close Open := 5, Open Close Open Close Open := 6, More := 7 )SINT; END_TYPE Values Name Description None Open Close Open Open Close Open Close Open Close Open Open Close Open Close Open More 6.6.17 E_Acsi Check Checks to be performed when a control service is executed. The enumeration value is coded in 2 bits. The remaining 6 bits are not used. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Check : ( No Check := 2#00, Synchro Check := 2#01, Interlocking Check := 2#10, Both := 2#11 )SINT; END_TYPE 440 Version: 1.7.1 TF6510
## Page 441

PLC API Values Name Description No Check No check. Synchro Check Synchro-check. Interlocking Check Interlocking-check. Both Both checks. 6.6.18 E_Acsi Clc Intv Typ Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Clc Intv Typ : ( Ms := 1, Per Cycle := 2, Cycle := 3, Day := 4, Week := 5, Month := 6, Year := 7, External := 8 )SINT; END_TYPE Values Name Description Ms Per Cycle Cycle Day Week Month Year External 6.6.19 E_Acsi Clc Mod Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Clc Mod : ( Total := 1, Period := 2, Sliding := 3 )SINT; END_TYPE TF6510 Version: 1.7.1 441
## Page 442

PLC API Values Name Description Total Period Sliding 6.6.20 E_Acsi Clc Mth Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Clc Mth : ( Unspecified := 1, True Rms := 2, Peak Fundamental := 3, Rms Fundamental := 4, Min_ := 5, Max_ := 6, Avg := 7, Sdv := 8, Prediction := 9, Rate := 10 )SINT; END_TYPE Values Name Description Unspecified True Rms Peak Fundamental Rms Fundamental Min_ Max_ Avg Sdv Prediction Rate 6.6.21 E_Acsi Clc Rf Typ Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Clc Rf Typ : ( Ms := 1, Per Cycle := 2, Cycle := 3, Day := 4, Week := 5, Month := 6, Year := 7, 442 Version: 1.7.1 TF6510
## Page 443

PLC API External := 8 )SINT; END_TYPE Values Name Description Ms Per Cycle Cycle Day Week Month Year External 6.6.22 E_Acsi Clc Tot VA Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Clc Tot VA : ( Vector := 1, Arithmetic := 2 )SINT; END_TYPE Values Name Description Vector Arithmetic 6.6.23 E_Acsi Cmd Qual Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Cmd Qual : ( Pulse := 0, Persistent_ := 1 )SINT; END_TYPE Values Name Description Pulse Persistent_ TF6510 Version: 1.7.1 443
## Page 444

PLC API 6.6.24 E_Acsi Ctl Models Control model for the switch control. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Ctl Models : ( Status Only := 0, Direct With Normal Security := 1, SBOWith Normal Security := 2, Direct With Enhanced Security := 3, SBOWith Enhanced Security := 4 )SINT; END_TYPE Values Name Description Status Only Status information only, control not allowed. Direct With Normal Security Direct-with-normal-security (direct-operate). SBOWith Normal Security SBO-with-normal-security (operate-once | operate-many). Direct With Enhanced Security Direct-with-enhanced-security (direct-operate). SBOWith Enhanced Security SBO-with-enhanced-security (operate-once | operate-many). 6.6.25 E_Acsi Ctl Report Control commands of a report control block instance for buffered or unbuffered reports (BRCB, URCB). Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Ctl Report : ( None := 0, Enable := 1, GI := 2, Disable:= 3 )SINT; END_TYPE Values Name Description None No command (idle state). Enable Command to activate the reports (buffered or unbuffered). GI Command to activate the general interrogation. Disable Command to deactivate the reports (buffered or unbuffered) and the general interrogation. 6.6.26 E_Acsi Ctl Service Control commands for the services of the data objects for the switch control. 444 Version: 1.7.1 TF6510
## Page 445

PLC API Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Ctl Service : ( None := 0, Select := 1, Operate := 2, Select And Operate := 3, Cancel := 4 )SINT; END_TYPE Values Name Description None No command (idle state). Select Activates the Select or Select With Value command. Operate Activates the Operate command. Select And Operate Activates the Select command, followed by the Operate command. Cancel Activates the Cancel command. 6.6.27 E_Acsi Cyc Tr Mod Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Cyc Tr Mod : ( Three Phase Tripping := 1, One Or Three Phase Tripping := 2, Specific := 3 )SINT; END_TYPE Values Name Description Three Phase Tripping One Or Three Phase Tripping Specific 6.6.28 E_Acsi Dbpos Double-point status value. The enumeration value is coded in 2 bits. The remaining 6 bits are not used. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Dbpos : ( Intermediate := 2#00, Off := 2#01, TF6510 Version: 1.7.1 445
## Page 446

PLC API On := 2#10, Bad := 2#11 )SINT; END_TYPE Values Name Description Intermediate Intermediate state Off Off On On Bad No good 6.6.29 E_Acsi Dir Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Dir : ( Unknown := 0, Forward := 1, Backward := 2, Both := 3 )SINT; END_TYPE Values Name Description Unknown Forward Backward Both 6.6.30 E_Acsi Dir Mod Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Dir Mod : ( Non Directional := 1, Forward := 2, Reverse := 3 )SINT; END_TYPE Values Name Description Non Directional Forward Reverse 446 Version: 1.7.1 TF6510
## Page 447

PLC API 6.6.31 E_Acsi EEHealth Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi EEHealth : ( Ok := 1, Warning := 2, Alarm := 3 )SINT; END_TYPE Values Name Description Ok Warning Alarm 6.6.32 E_Acsi Fail Mod Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Fail Mod : ( Current := 1, Breaker Status := 2, Both Current And Breaker Status := 3, Other := 4 )SINT; END_TYPE Values Name Description Current Breaker Status Both Current And Breaker Status Other 6.6.33 E_Acsi Fan Ctl Control value for fan control. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Fan Ctl : ( Inactive := 1, Stage1 := 2, TF6510 Version: 1.7.1 447
## Page 448

PLC API Stage2 := 3, Stage3 := 4 )SINT; END_TYPE Values Name Description Inactive Stage1 Stage2 Stage3 6.6.34 E_Acsi Fan Ctl Gen Generic control value for fan control. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Fan Ctl Gen : ( Inactive := 1, Stage1 := 2, Stage2 := 3, Stage3 := 4 )SINT; END_TYPE Values Name Description Inactive Stage1 Stage2 Stage3 6.6.35 E_Acsi Fc Functional group as enumeration type. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Fc : ( None := 16#000000, MX := 16#000001, ST_ := 16#000002, CO := 16#000004, CF := 16#000008, DC := 16#000010, SP := 16#000020, SG := 16#000040, RP := 16#000080, LG := 16#000100, BR := 16#000200, 448 Version: 1.7.1 TF6510
## Page 449

PLC API GO := 16#000400, GS := 16#000800, SV := 16#001000, SE := 16#002000, MS := 16#004000, SC := 16#008000, US := 16#010000, EX := 16#020000, XX := 16#03FFFF )DWORD; END_TYPE Values Name Description None MX ST_ CO CF DC SP SG RP LG BR GO GS SV SE MS SC US EX XX 6.6.36 E_Acsi Fil Typ Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Fil Typ : ( Low Pass := 1, High Pass := 2, Bandpass := 3, Bandstop := 4, Deadband := 5 )SINT; END_TYPE TF6510 Version: 1.7.1 449
## Page 450

PLC API Values Name Description Low Pass High Pass Band-pass Bandstop Deadband 6.6.37 E_Acsi Flt Loop Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Flt Loop : ( Phase ATo Ground := 1, Phase BTo Ground := 2, Phase CTo Ground := 3, Phase ATo B := 4, Phase BTo C := 5, Phase CTo A := 6, Other := 7 )SINT; END_TYPE Values Name Description Phase ATo Ground Phase BTo Ground Phase CTo Ground Phase ATo B Phase BTo C Phase CTo A Other 6.6.38 E_Acsi Gn St Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Gn St : ( Stopped := 1, Stopping := 2, Started := 3, Starting := 4, Disabled := 5 )SINT; END_TYPE 450 Version: 1.7.1 TF6510
## Page 451

PLC API Values Name Description Stopped Stopping Started Starting Disabled 6.6.39 E_Acsi Health Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Health : ( Ok := 1, Warning := 2, Alarm := 3 )SINT; END_TYPE Values Name Description Ok Warning Alarm 6.6.40 E_Acsi Hv Ref Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Hv Ref : ( Fundamental := 0, Rms := 1, Absolute := 2 )SINT; END_TYPE Values Name Description Fundamental Rms Absolute 6.6.41 E_Acsi Intr Det Mth Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) TF6510 Version: 1.7.1 451
## Page 452

PLC API Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Intr Det Mth : ( Voltage := 1, Voltage And Current := 2, Voltage And Normally Open Breaker Contact := 3, Voltage And Normally Closed Breaker Contact := 4, Voltage And Both Normally Open And Normally Closed Breaker Contacts := 5, Normally Open Breaker Contact := 6, Normally Closed Breaker Contacts := 7, Both Normally Open And Normally Closed Breaker Contacts := 8 )SINT; END_TYPE Values Name Description Voltage Voltage And Current Voltage And Normally Open Breaker Contact Voltage And Normally Closed Breaker Contact Voltage And Both Normally Open And Normally Closed Breaker Contacts Normally Open Breaker Contact Normally Closed Breaker Contacts Both Normally Open And Normally Closed Breaker Contacts 6.6.42 E_Acsi Lev Mod Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Lev Mod : ( Positive Or Rising := 1, Negative Or Falling := 2, Both := 3, Other := 4 )SINT; END_TYPE Values Name Description Positive Or Rising Negative Or Falling Both Other 6.6.43 E_Acsi Liv Dea Mod Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Liv Dea Mod : 452 Version: 1.7.1 TF6510
## Page 453

PLC API ( Dead Line Dead Bus := 1, Live Line Dead Bus := 2, Dead Line Live Bus := 3, Dead Line Dead Bus Or Live Line Dead Bus := 4, Dead Line Dead Bus Or Dead Line Live Bus := 5, Live Line Dead Bus Or Dead Line Live Bus := 6, Dead Line Dead Bus Or Live Line Dead Bus Or Dead Line Live Bus := 7 )SINT; END_TYPE Values Name Description Dead Line Dead Bus Live Line Dead Bus Dead Line Live Bus Dead Line Dead Bus Or Live Line Dead Bus Dead Line Dead Bus Or Dead Line Live Bus Live Line Dead Bus Or Dead Line Live Bus Dead Line Dead Bus Or Live Line Dead Bus Or Dead Line Live Bus 6.6.44 E_Acsi Logical Node Class Object classes of a logical node. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Logical Node Class : ( Data Object := 1, Data Set := 2, Buffered Report Control Block := 3, Unbuffered Repor Control Block := 4, Log Control Block := 5, Setting Group Control Block := 6, Log_ := 7, Goose Control Block := 8, Gsse Control Block := 9, Multicast Sampled Value Control Block := 10, Unicast Sampled Value Control Block := 11 )SINT; END_TYPE Values Name Description Data Object Data Set Buffered Report Control Block Unbuffered Report Control Block Log Control Block Setting Group Control Block Log_ Goose Control Block Gsse Control Block Multicast Sampled Value Control Block Unicast Sampled Value Control Block TF6510 Version: 1.7.1 453
## Page 454

PLC API 6.6.45 E_Acsi Mech Health Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Mech Health : ( Ok := 1, Warning := 2, Alarm := 3 )SINT; END_TYPE Values Name Description Ok Warning Alarm 6.6.46 E_Acsi Mod This parameter controls the behavior of the logical node (e.g. for processing of received data). Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Mod : ( On := 1, On Blocked := 2, Test := 3, Test Blocked := 4, Off := 5 )SINT; END_TYPE Values Name Description On On Blocked Test Test Blocked Off 6.6.47 E_Acsi Month Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Month : ( 454 Version: 1.7.1 TF6510
## Page 455

PLC API { attribute 'hide'} reserved := 0, January := 1, February := 2, March := 3, April := 4, May := 5, June := 6, July := 7, August := 8, September := 9, October := 10, November := 11, December := 12 )SINT; END_TYPE 6.6.48 E_Acsi Multiplier Multiplier. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Multiplier : ( Yocto := -24, Zepto := -21, Atto := -18, Femto := -15, Pico := -12, Nano := -9, Micro := -6, Milli := -3, Centi := -2, Deci := -1, None := 0, Deca := 1, Hecto := 2, Kilo := 3, Mega := 6, Giga := 9, Tera := 12, Petra := 15, Exa := 18, Zetta := 21, Yotta := 24 )SINT; END_TYPE TF6510 Version: 1.7.1 455
## Page 456

PLC API Values Name Description Yocto Value: 10^(-24), symbol: y Zepto Value: 10^(-21), symbol: z Atto Value: 10^(-18), symbol: a Femto Value: 10^(-15), symbol: f Pico Value: 10^(-12), symbol: p Nano Value: 10^(-9), symbol: n Micro Value: 10^(-6), symbol: u Milli Value: 10^(-3), symbol: m Centi Value: 10^(-2), symbol: c Deci Value: 10^(-1), symbol: d None Value: 1 Deca Value: 10^(1), symbol: da Hecto Value: 10^(2), symbol: h Kilo Value: 10^(3), symbol: k Mega Value: 10^(6), symbol: M Giga Value: 10^(9), symbol: G Tera Value: 10^(12), symbol: T Petra Value: 10^(15), symbol: P Exa Value: 10^(18), symbol: E Zetta Value: 10^(21), symbol: Z Yotta Value: 10^(24), symbol: Y 6.6.49 E_Acsi Occ Per Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Occ Per : ( Hour := 0, Day := 1, Week := 2, Month := 3, Year := 4 )SINT; END_TYPE Values Name Description Hour Hour Day Tag Week Week Month Month Year Year 6.6.50 E_Acsi Occ Type Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) 456 Version: 1.7.1 TF6510
## Page 457

PLC API Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Occ Type : ( Time_ := 0, Week Day := 1, Week Of Year := 2, Day Of Month := 3, Day Of Year := 4 )SINT; END_TYPE Values Name Description Time_ Week Day Week Of Year Day Of Month Day Of Year 6.6.51 E_Acsi Op Mod Rect Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Op Mod Rect : ( Current Control := 1, Voltage Control := 2, Active Power Control := 3 )SINT; END_TYPE Values Name Description Current Control Voltage Control Active Power Control 6.6.52 E_Acsi Op Mod Syn Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Op Mod Syn : ( Automatic Synchronising := 1, Automatic Paralleling := 2, Manual := 3, Test := 4 )SINT; END_TYPE TF6510 Version: 1.7.1 457
## Page 458

PLC API Values Name Description Automatic Synchronising Automatic Paralleling Manual Test 6.6.53 E_Acsi Or Category Command originator category. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Or Category : ( Not Supported := 0, Bay Control := 1, Station Control := 2, Remote Control := 3, Automatic Bay := 4, Automatic Station := 5, Automatic Remote := 6, Maintenance := 7, Process := 8 )SINT; END_TYPE Values Name Description Not Supported Bay Control Station Control Remote Control Automatic Bay Automatic Station Automatic Remote Maintenance Process 6.6.54 E_Acsi Par Col Mod Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Par Col Mod : ( Master Slave := 1, Master Slave With Fixed Slave Position := 2, Master Slave With Variable Slave Posiiton := 3, Parallel Operation Without Communication := 4 )SINT; END_TYPE 458 Version: 1.7.1 TF6510
## Page 459

PLC API Values Name Description Master Slave Master Slave With Fixed Slave Position Master Slave With Variable Slave Posiiton Parallel Operation Without Communication 6.6.55 E_Acsi Par Mod Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Par Mod : ( Master := 1, Slave := 2, Independent := 3 )SINT; END_TYPE Values Name Description Master Slave Independent 6.6.56 E_Acsi Par Tra Mod Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Par Tra Mod : ( No Mode Predefined := 1, Master := 2, Follower := 3, Power Factor := 4, Negative Reactance := 5, Circulating Current := 6, Circulating Reactive Current := 7, Circulating Reactive Current By Equalizing Calculated Transformer Power Factor := 8 )SINT; END_TYPE TF6510 Version: 1.7.1 459
## Page 460

PLC API Values Name Description No Mode Predefined Master Follower Power Factor Negative Reactance Circulating Current Circulating Reactive Current Circulating Reactive Current By Equalizing Calculated Transformer Power Factor 6.6.57 E_Acsi PFSign Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi PFSign : ( Active Power := 1, Lead Lag := 2 )SINT; END_TYPE Values Name Description Active Power Lead Lag 6.6.58 E_Acsi Phs Ref Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Phs Ref : ( A := 0, B := 1, C := 2 )SINT; END_TYPE Values Name Description A B C 460 Version: 1.7.1 TF6510
## Page 461

PLC API 6.6.59 E_Acsi Phy Health Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Phy Health : ( Ok := 1, Warning := 2, Alarm := 3 )SINT; END_TYPE Values Name Description Ok Warning Alarm 6.6.60 E_Acsi PIDAlg Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi PIDAlg : ( P := 1, I := 2, D := 3, PI := 4, PD := 5, ID := 6, PID := 7 )SINT; END_TYPE Values Name Description P I D PI PD ID PID 6.6.61 E_Acsi Pmp Ctl Control value for pump control. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) TF6510 Version: 1.7.1 461
## Page 462

PLC API Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Pmp Ctl : ( Inactive := 1, Stage1 := 2, Stage2 := 3, Stage3 := 4 )SINT; END_TYPE Values Name Description Inactive Stage1 Stage2 Stage3 6.6.62 E_Acsi Pmp Ctl Gen Generic control value for pump control. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Pmp Ctl Gen : ( Inactive := 1, Stage1 := 2, Stage2 := 3, Stage3 := 4 )SINT; END_TYPE Values Name Description Inactive Stage1 Stage2 Stage3 6.6.63 E_Acsi Pol Qty Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Pol Qty : ( None := 1, Zero Sequence Current := 2, Zero Sequence Voltage := 3, Negative Sequence Voltage := 4, Phase To Phase Voltages := 5, Phase To Ground Voltages := 6, 462 Version: 1.7.1 TF6510
## Page 463

PLC API Positive Sequence Voltage := 7 )SINT; END_TYPE Values Name Description None Zero Sequence Current Zero Sequence Voltage Negative Sequence Voltage Phase To Phase Voltages Phase To Ground Voltages Positive Sequence Voltage 6.6.64 E_Acsi POWCap Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi POWCap : ( None := 1, Close := 2, Open := 3, Close And Open := 4 )SINT; END_TYPE Values Name Description None Close Open Close And Open 6.6.65 E_Acsi Quality Source Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Quality Source : ( Process := 0, Substituted := 1 )SINT; END_TYPE Values Name Description Process Process Substituted Replaced TF6510 Version: 1.7.1 463
## Page 464

PLC API 6.6.66 E_Acsi Quality Validity Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Quality Validity : ( Good := 0, Invalid := 1, Reserved := 2, Questionable := 3 )SINT; END_TYPE Values Name Description Good Invalid Reserved Questionable 6.6.67 E_Acsi Range Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Range : ( Normal := 0, High := 1, Low := 2, High High := 3, Low Low := 4 )SINT; END_TYPE Values Name Description Normal High Low High High Low Low 6.6.68 E_Acsi Rcd Mod Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Rcd Mod : 464 Version: 1.7.1 TF6510
## Page 465

PLC API ( Overwrite Existing Values := 1, Stop When Full Or Saturated := 2 )SINT; END_TYPE Values Name Description Overwrite Existing Values Stop When Full Or Saturated 6.6.69 E_Acsi Re Tr Mod Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Re Tr Mod : ( Off := 1, Without Check := 2, With Current Check := 3, With Breaker Status Check := 4, With Current And Breaker Status Check := 5, Other Checks := 6 )SINT; END_TYPE Values Name Description Off Without Check With Current Check With Breaker Status Check With Current And Breaker Status Check Other Checks 6.6.70 E_Acsi Rot Dir Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Rot Dir : ( Clockwise := 1, Counter Clockwise := 2, Unknown := 3 )SINT; END_TYPE TF6510 Version: 1.7.1 465
## Page 466

PLC API Values Name Description Clockwise Counter Clockwise Unknown 6.6.71 E_Acsi Rst Mod Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Rst Mod : ( None := 1, Harmonic2 := 2, Harmonic5 := 3, Harmonic2And5 := 4, Waveform Analysis := 5, Waveform Analysis And Harmonic2 := 6, Other := 7, Waveform Analysis And Harmonic5 := 8, Waveform Analysis And Harmonic2And Harmonic5 := 9 )SINT; END_TYPE Values Name Description None Harmonic2 Harmonic5 Harmonic2And5 Waveform Analysis Waveform Analysis And Harmonic2 Other Waveform Analysis And Harmonic5 Waveform Analysis And Harmonic2And Harmonic5 6.6.72 E_Acsi Sbo Classes Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Sbo Classes : ( Operate Once := 0, Operate Many := 1 )SINT; END_TYPE 466 Version: 1.7.1 TF6510
## Page 467

PLC API Values Name Description Operate Once Operate-once. Operate Many Operate-many. 6.6.73 E_Acsi Seq T Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Seq T : ( Pos Neg Zero := 0, Dir Quad Zero := 1 )SINT; END_TYPE Values Name Description Pos Neg Zero Dir Quad Zero 6.6.74 E_Acsi Server Directory Class Object classes of a server. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Server Directory Class : ( Logical Device := 1, File := 2 )SINT; END_TYPE Values Name Description Logical Device Logical device File File 6.6.75 E_Acsi Service Error Error codes that are reported in the service feedback event handling routine. When using MMS mapping, the MMS error codes are also converted (mapped) to these error codes. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) TF6510 Version: 1.7.1 467
## Page 468

PLC API Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Service Error : ( No Error := 0, Instance Not Available := 1, Instance In Use := 2, Access Violation := 3, Access Not Allowed In Current State := 4, Parameter Value Inappropriate := 5, Parameter Value Inconsistent := 6, Class Not Supported := 7, Instance Locked By Other Client := 8, Control Must Be Selected := 9, Type Conflict := 10, Failed Due To Communications Constraint := 11, Failed Due To Server Constraint := 12 )SINT; END_TYPE Values Name Description No Error Instance Not Available Instance In Use Access Violation Access Not Allowed In Current State Parameter Value Inappropriate Parameter Value Inconsistent Class Not Supported Instance Locked By Other Client Control Must Be Selected Type Conflict Failed Due To Communications Constraint Failed Due To Server Constraint 6.6.76 E_Acsi Service Type Service type. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Service Type : ( Unknown := 0, Associate := 1, Abort := 2, Release := 3, Get Server Directory := 4, Get Logical Device Directory := 5, Get All Data Values := 6, Get Data Values := 7, Set Data Values := 8, Get Data Directory := 9, Get Data Definition := 10, Get Data Set Values := 11, Set Data Set Values := 12, Create Data Set := 13, Delete Data Set := 14, Get Data Set Directory := 15, 468 Version: 1.7.1 TF6510
## Page 469

PLC API Select Active SG := 16, Select Edit SG := 17, Set Edit SGValue := 18, Confirm Edit SGValues := 19, Get Edit SGValue := 20, Get SGCBValues := 21, Report := 22, Get BRCBValues := 23, Set BRCBValues := 24, Get URCBValues := 25, Set URCBValues := 26, Get LCBValues := 27, Set LCBValues := 28, Query Log By Time := 29, Query Log After := 30, Get Log Status Values := 31, Send GOOSEMessage := 32, Get Go CBValues := 33, Set Go CBValues := 34, Get Go Reference := 35, Get GOOSEElement Number := 36, Send MSVMessage := 37, Get MSVCBValues := 38, Set MSVCBValues := 39, Send USVMessage := 40, Get USVCBValues := 41, Set USVCBValues := 42, Select := 43, Select With Value := 44, Cancel := 45, Operate := 46, Command Termination := 47, Time Activated Operate := 48, Get File := 49, Set File := 50, Delete File := 51, Get File Attribute Values := 52, Time Synchronization := 53, Internal Change Unknown := 54, (* Twin CAT specific *) Get Logical Node Directory := 100, Get All Server Values := 101, Get All Logical Device Values := 102, Set All Data Values := 103 )SINT; END_TYPE 6.6.77 E_Acsi Set Charact Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Set Charact : ( Ansi Extremly Inverse := 1, Ansi Very Inverse := 2, Ansi Normal Inverse := 3, Ansi Moderate Inverse := 4, Ansi Definite Time := 5, Long Time Extermely Inverse := 6, Long Time Very Inverse := 7, Long Time Inverse := 8, Iec Normal Inverse := 9, Iec Very Inverse := 10, Iec Inverse := 11, Iec Extremely Inverse := 12, Iec Short Time Inverse := 13, Iec Long Time Inverse := 14, Iec Definite Time := 15, { attribute 'hide'} reserved := 16, Polynom1 := 17, Polynom2 := 18, Polynom3 := 19, TF6510 Version: 1.7.1 469
## Page 470

PLC API Polynom4 := 20, Polynom5 := 21, Polynom6 := 22, Polynom7 := 23, Polynom8 := 24, Polynom9 := 25, Polynom10 := 26, Polynom11 := 27, Polynom12 := 28, Polynom13 := 29, Polynom14 := 30, Polynom15 := 31, Polynom16 := 32, Multiline1 := 33, Multiline2 := 34, Multiline3 := 35, Multiline4 := 36, Multiline5 := 37, Multiline6 := 38, Multiline7 := 39, Multiline8 := 40, Multiline9 := 41, Multiline10 := 42, Multiline11 := 43, Multiline12 := 44, Multiline13 := 45, Multiline14 := 46, Multiline15 := 47, Multiline16 := 48 )SINT; END_TYPE 6.6.78 E_Acsi Sev Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Sev : ( Unknown := 0, Critical := 1, Major := 2, Minor := 3, Warning := 4 )SINT; END_TYPE Values Name Description Unknown Critical Major Minor Warning 6.6.79 E_Acsi Sh Op Cap Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Sh Op Cap : 470 Version: 1.7.1 TF6510
## Page 471

PLC API ( None := 1, Open := 2, Close := 3, Open And Close := 4 )SINT; END_TYPE Values Name Description None Open Close Open And Close 6.6.80 E_Acsi SIUnit SI unit. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi SIUnit : ( (* Base units: *) None :=1, (* Dimensionless *) Meter :=2, (* Length m *) Kilogram :=3, (* Mass kg *) Second :=4, (* Time s *) Ampere :=5, (* Current A *) Kelvin :=6, (* Temperature K *) Mole :=7, (* Amount of substance mol *) Candela :=8, (* Luminous intensity cd *) (*Derived units: *) Degrees :=9, (* Plane angle deg *) Radian :=10, (* Plane angle rad *) Steradian :=11, (* Solid angle sr *) Gray :=21, (* Absorbed dose (J/kg) Gy *) Becquerel :=22, (* Activity (l/s) q *) Degrees Celsius :=23, (* Relative temperature °C *) Sievert :=24, (* Dose equivalent (J/kg) Sv *) Farad :=25, (* Electric capacitance (C/V) F *) Coulomb :=26, (* Electric charge (As) C *) Siemens :=27, (* Electric conductance (A/V) S *) Henry :=28, (* Electric inductance (Wb/A) H *) Volt :=29, (* Electric potential (W/A) V *) Ohm :=30, (* Electric resistance (VA) *) Joule :=31, (* Energy (Nm) J *) Newtown :=32, (* Force (kg m/s²) N *) Hertz :=33, (* Frequency (1/s) Hz *) Lux :=34, (* Illuminance (lm/m²) lx *) Lumen :=35, (* Luminous flux (cd sr) Lm *) Weber :=36, (* Magnetic flux (Vs) Wb *) Tesla :=37, (* Magnetic flux density (Wb/m²) T *) Watt :=38, (* Power (J/s) W *) Pascal :=39, (* Pressure (N/m²) Pa *) (* Extended units: *) Square Meter :=41, (* Area (m²) m² *) Cubic Meter :=42, (* Volume (m³) m³ *) Meters Per Second :=43, (* Velocity (m/s) m/s *) Meters Per Second Square :=44, (* Acceleration (m/s²) m/s² *) Cubic Meters Per Second :=45, (* Volumetric flow rate (m³/s) m³/s *) Meters Per Cubic Meter :=46, (* Fuel efficiency (m/m³) m/m³ *) Kilogram Meter :=47, (* Moment of mass (kg m) M *) Kilogram Per Cubic Meter :=48, (* Density (kg/m³) kg/m³ *) Meter Square Per Second :=49, (* Viscosity (m²/s) m²/s *) TF6510 Version: 1.7.1 471
## Page 472

PLC API Watt Per Meter Kelvin :=50, (* Thermal conductivity (W/m K) W/m K *) Joule Per Kelvin :=51, (* Heat capacity (J/K) J/K *) Parts Per Million :=52, (* Concentration ppm *) Rotations Per Second :=53, (* Rotational speed (1/s) 1/s *) Radian Per Second :=54, (* Angular velocity (rad/s) rad/s *) (* Industry specific units: *) Volt Ampere :=61, (* Apparent power (VA) VA *) Watts :=62, (* Real power (I²R) W *) Volt Ampere Reactive :=63, (* Reactive power (VISin) VAr *) Degrees Ph :=64, (* Phase angle *) Dimensionless PF :=65, (* Power factor Cos *) Volt Seconds :=66, (* Volt seconds (Ws/A) Vs *) Volt Square :=67, (* Volts squared (W²/A²) V² *) Amp Second :=68, (* Amp seconds (As) As *) Amp Square :=69, (* Amps squared (A²) A² *) Amp Square Second :=70, (* Amps squared time (A²s) A²t *) Volt Ampere Hours :=71, (* Apparent energy VAh *) Watt Hours :=72, (* Real energy Wh *) Volt Ampere Reactive Hours :=73, (* Reactive energy VArh *) Volt Per Hertz :=74 (* Magnetic flux V/Hz *) )SINT; END_TYPE 472 Version: 1.7.1 TF6510
## Page 473

PLC API Values Name Description None Dimensionless Meter Length m Kilogram Mass kg Second Time s Ampere Current A Kelvin Temperature K Mole Amount of substance mol 6.6.81 E_Acsi Spt End St Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) TF6510 Version: 1.7.1 473
## Page 474

PLC API Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Spt End St : ( Ended Normally := 1, Ended With Overshoot := 2, Measurement Was Deviating := 3, Loss Of Communication With Dispatch Centre := 4, Loss Of Communication With Local Area Network := 5, Loss Of Communication With The Local Interface := 6, Timeout := 7, Voluntarily := 8, Noisy Environments := 9, Material Failure := 10, New Setpoint Request := 11, Improper Environment := 12, Stability Time Was Reached := 13, Immobilisation Time Was Reached := 14, Equipment In Wrong Mode := 15, Unknown := 16 )SINT; END_TYPE Values Name Description Ended Normally Ended With Overshoot Measurement Was Deviating Loss Of Communication With Dispatch Centre Loss Of Communication With Local Area Network Loss Of Communication With The Local Interface Timeout Voluntarily Noisy Environments Material Failure New Setpoint Request Improper Environment Stability Time Was Reached Immobilisation Time Was Reached Equipment In Wrong Mode Unknown 6.6.82 E_Acsi St Clc Tun Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi St Clc Tun : ( Not Tuned := 1, Tuned := 2, Tuned But Not Compensated := 3, Umax := 4, Umax But Not Compensated := 5, Umax But Not Compensated Due To UContinous Limitation := 6 )SINT; END_TYPE 474 Version: 1.7.1 TF6510
## Page 475

PLC API Values Name Description Not Tuned Tuned Tuned But Not Compensated Umax Umax But Not Compensated Umax But Not Compensated Due To UContinous Limitation 6.6.83 E_Acsi Str Week Day Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Str Week Day : ( Monday := 1, Tuesday := 2, Wednesday := 3, Thursday := 4, Friday := 5, Saturday := 6, Sunday := 7 )SINT; END_TYPE Values Name Description Monday Monday Tuesday Tuesday Wednesday Wednesday Thursday Thursday Friday Friday Saturday Saturday Sunday Sunday 6.6.84 E_Acsi Sw Op Cap Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Sw Op Cap : ( None := 1, Open := 2, Close := 3, Open And Close := 4 )SINT; END_TYPE TF6510 Version: 1.7.1 475
## Page 476

PLC API Values Name Description None Open Close Open And Close 6.6.85 E_Acsi Sw Typ Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Sw Typ : ( Load Break Switch := 1, Disconnector := 2, Earthing Switch := 3, High Speed Earthing Switch := 4 )SINT; END_TYPE Values Name Description Load Break Switch Disconnector Earthing Switch High Speed Earthing Switch 6.6.86 E_Acsi Tcmd Control value for a step switch. The enumeration value is coded in 2 bits. The remaining 6 bits are not used. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Tcmd : ( Stop := 2#00, Lower := 2#01, Higher := 2#10, {attribute 'hide'}reserved := 2#11 )SINT; END_TYPE Values Name Description Stop Stoppen Lower Decrement Higher Increment reserved Reserved 476 Version: 1.7.1 TF6510
## Page 477

PLC API 6.6.87 E_Acsi Tm Syn Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Tm Syn : ( Not Synchronized := 0, Synchronized By Local Area Clock Signal := 1, Synchronized By Global Area Clock Signal := 2 )SINT; END_TYPE Values Name Description Not Synchronized Synchronized By Local Area Clock Signal Synchronized By Global Area Clock Signal 6.6.88 E_Acsi Tnk Typ Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Tnk Typ : ( Pressure Only := 1, Level Only := 2, Both Pressure And Level := 3 )SINT; END_TYPE Values Name Description Pressure Only Level Only Both Pressure And Level 6.6.89 E_Acsi Tpc Rx Mod Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Tpc Rx Mod : ( Unused := 1, Blocking := 2, Permissive := 3, Direct := 4, Unblocking := 5, TF6510 Version: 1.7.1 477
## Page 478

PLC API Status := 6 )SINT; END_TYPE Values Name Description Unused Blocking Permissive Direct Unblocking Status 6.6.90 E_Acsi Tpc Tx Mod Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Tpc Tx Mod : ( Unused := 1, Blocking := 2, Permissive := 3, Direct := 4, Unblocking := 5, Status := 6 )SINT; END_TYPE Values Name Description Unused Blocking Permissive Direct Unblocking Status 6.6.91 E_Acsi Tr Beh Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Tr Beh : ( Single Pole Tripping := 1, Undefined := 2, Three Pole Tripping := 3 )SINT; END_TYPE 478 Version: 1.7.1 TF6510
## Page 479

PLC API Values Name Description Single Pole Tripping Undefined Three Pole Tripping 6.6.92 E_Acsi Trg Mod Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Trg Mod : ( Internal_ := 1, External := 2, Both := 3 )SINT; END_TYPE Values Name Description Internal_ External Both 6.6.93 E_Acsi Tr Mod Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Tr Mod : ( Three Phase Tripping := 1, One Or Three Phase Tripping := 2, Specific := 3, One Phase Tripping := 4 )SINT; END_TYPE Values Name Description Three Phase Tripping One Or Three Phase Tripping Specific One Phase Tripping 6.6.94 E_Acsi Typ Rs Crv Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) TF6510 Version: 1.7.1 479
## Page 480

PLC API Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Typ Rs Crv : ( None := 1, Definite Time Delayed Reset := 2, Inverse Reset := 3 )SINT; END_TYPE Values Name Description None Definite Time Delayed Reset Inverse Reset 6.6.95 E_Acsi Unb Det Mth Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Unb Det Mth : ( Negative Sequence := 1, Zero Sequence := 2, Negative Sequence Positive Sequence := 3, Zero Sequence Positive Sequence Direct := 4, Phase Vectors Comparison := 5, Others := 6 )SINT; END_TYPE Values Name Description Negative Sequence Zero Sequence Negative Sequence Positive Sequence Zero Sequence Positive Sequence Direct Phase Vectors Comparison Others 6.6.96 E_Acsi Un Blk Mod Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Un Blk Mod : ( Off := 1, Permanent := 2, Time Window := 3 )SINT; END_TYPE 480 Version: 1.7.1 TF6510
## Page 481

PLC API Values Name Description Off Permanent Time Window 6.6.97 E_Acsi VLan Priority Virtual LAN tag control information: priority code point. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi VLan Priority : ( BK := 0, BE := 1, EE := 2, CA := 3, VI := 4, VO := 5, IC := 6, NC := 7 )BYTE; END_TYPE Values Name Description BK Background (0). BE Best Effort (1). EE Excellent Effort (2). CA Critical Applications (3) VI Video (4), < 100 ms delay. VO Voice (5), < 10 ms delay. IC Internetwork Control (6). NC Network Control (7), highest. 6.6.98 E_Acsi Week Day Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Week Day : ( { attribute 'hide'} reserved := 0, Monday := 1, Tuesday := 2, Wednesday := 3, Thursday := 4, Friday := 5, Saturday := 6, Sunday := 7 )SINT; END_TYPE TF6510 Version: 1.7.1 481
## Page 482

PLC API Values Name Description reserved Reserved Monday Monday Tuesday Tuesday Wednesday Wednesday Thursday Thursday Friday Friday Saturday Saturday Sunday Sunday 6.6.99 E_Acsi Wei Mod Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Acsi Wei Mod : ( Off := 1, Operate := 2, Echo := 3, Echo And Operate := 4 )SINT; END_TYPE Values Name Description Off Operate Echo Echo And Operate 6.6.100 E_Async Environment State Environmental condition of the communication link. Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Async Environment State : ( Idle := 0, Outgoing Connect := 1, Incoming Connect := 2, Established := 3, Outgoing Disconnect := 4, Incoming Disconnect := 5, Aborting := 6 )BYTE; END_TYPE 482 Version: 1.7.1 TF6510
## Page 483

PLC API Values Name Description Idle Idle state. Connection is closed. Outgoing Connect An outgoing (client) connection is being established. Incoming Connect An incoming (server) connection is being established. Established Connection has been established. Outgoing Disconnect A (client) connection is being released. Incoming Disconnect A (server) connection is being released. Aborting The connection is being released. 6.6.101 E_Async Service State Asynchronous service status. Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Async Service State : ( Completed := 0, Busy := 1, Failed := 2, Aborted := 3 )BYTE; END_TYPE Values Name Description Completed Service was executed without error. Busy Service is currently being executed. Failed Service was terminated with an error. Aborted Service was aborted by the Abort-Request command from the user application or Abort-Indication from the communication layer. 6.6.102 E_Event Completion Execution status of the event handling routine. Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Event Completion : ( Completed := 0, Pending := 1, Idle := 2 )BYTE; END_TYPE TF6510 Version: 1.7.1 483
## Page 484

PLC API Values Name Description Completed Executed (completed). Not waiting for the response. Pending Execution still pending and waiting for response. Idle The event handling routine is not implemented. 6.6.103 E_Gse Dispatch Mode GSE network adapter receiving mode. This determines whether the frames received should also be sent to the operating system for further processing. Namespace: Tc3_Gse [} 98] Library: Tc3_Gse (Tc3_Gse.compiled-library) {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Gse Dispatch Mode : ( Non Promiscuous := 0, Monitor := 1 )BYTE; END_TYPE Values Name Description Non Promiscuous Frames that are addressed to the GSE network adapter and processed (including Broadcast and Multicast frames) are no longer sent to the operating system for further processing. Monitor All frames received are sent to the operating system for further processing. 6.6.104 E_Gse Dispatch Mode Namespace: Tc3_Gse [} 98] Library: Tc3_Gse (Tc3_Gse.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Gse Dispatch Mode : ( Non Promiscuous:= 0, Monitor := 1 )BYTE; END_TYPE Values Name Description Non Promiscuous Received Ethernet telegrams are not passed on to the operating system. Monitor Received Ethernet telegrams are passed on to the operating system and can be processed further. 6.6.105 E_Gse Go CBPublisher State GOOSE control block publisher status. 484 Version: 1.7.1 TF6510
## Page 485

PLC API Namespace: Tc3_Gse [} 98] Library: Tc3_Gse (Tc3_Gse.compiled-library) {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Gse Go CBPublisher State : ( Non Existent := 0, Send Values := 1, Retransmit Pending := 2, Retransmit := 3 )BYTE; END_TYPE Values Name Description Non Existent Disabled. Send Values Active and sending GOOSE message (including update). Retransmit Pending Active and waiting for GOOSE message repetition. Retransmit Active and sending GOOSE message repetition. 6.6.106 E_Gse Go CBSubscriber State GOOSE control block subscriber status. Namespace: Tc3_Gse [} 98] Library: Tc3_Gse (Tc3_Gse.compiled-library) {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Gse Go CBSubscriber State : ( Off := 0, Non Existent := 1, Valid := 2, Questionable := 3 )BYTE; END_TYPE Values Name Description Off Disabled. Non Existent Active and has not yet received any GOOSE messages. Valid Active and is continually receiving GOOSE messages. Questionable Active and the GOOSE messages are either not being received at all or too late (allowed reading time/validity duration has expired). 6.6.107 E_Gse Link Status GSE network adapter link status. Namespace: Tc3_Gse [} 98] Library: Tc3_Gse (Tc3_Gse.compiled-library) {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Gse Link Status : ( Ok := 0, Link Error := 1 ); END_TYPE TF6510 Version: 1.7.1 485
## Page 486

PLC API Values Name Description Ok The link has been established. Link Error The link has been interrupted. 6.6.108 E_Gse Retransmission Strategy Time algorithm for the repeated GOOSE messages. Namespace: Tc3_Gse [} 98] Library: Tc3_Gse (Tc3_Gse.compiled-library) {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Gse Retransmission Strategy : ( Arithmetic:=0 )BYTE; END_TYPE Values Name Description Arithmetic The first message is sent after the minimum interval time. Each subsequent message (repetition) is sent after the time interval, which is a product of the previous interval time and the multiplier, until the maximum time is reached. If the value changes, a GOOSE message is sent immediately and the interval time is reset to the minimum value again. 6.6.109 E_Mms Vmd Logical Status MMS Type: vmd Logical Status Namespace: Tc3_Mms [} 98] Library: Tc3_Mms (Tc3_Mms.compiled-library) Syntax {attribute 'qualified_only'} TYPE E_Mms Vmd Logical Status : ( State Changes Allowed :=0, No State Changes Allowed :=1, Limited Services Permitted :=2, Support Services Allowed :=3 )BYTE; END_TYPE 6.6.110 E_Mms Vmd Physical Status MMS Type: vmd Physical Status. Namespace: Tc3_Mms [} 98] Library: Tc3_Mms (Tc3_Mms.compiled-library) Syntax {attribute 'qualified_only'} TYPE E_Mms Vmd Physical Status : ( Operational :=0, Partially Operational :=1, Inoperable :=2, Needs Commissioning :=3 )BYTE; END_TYPE 486 Version: 1.7.1 TF6510
## Page 487

PLC API 6.6.111 E_Rfc1006Tpdu Size Maximum TPDU byte length. Namespace: Tc3_Rfc1006 [} 98] Library: Tc3_Rfc1006 (Tc3_Rfc1006.compiled-library) Syntax TYPE E_Rfc1006Tpdu Size : ( Size_0 := 0, Size_128 := 7, Size_256 := 8, Size_512 := 9, Size_1024 := 10, Size_2048 := 11, Size_4096 := 12, Size_8192 := 13, Size_16384:= 14, Size_32768:= 15 )BYTE; END_TYPE Values Name Description Size_0 Not specified. Size_128 128 Byte (default). Size_256 256 bytes. Size_512 512 bytes. Size_1024 1024 bytes. Size_2048 2048 bytes. Size_4096 4096 bytes. Size_8192 8192 bytes. Size_16384 16384 bytes. Size_32768 32768 bytes. 6.6.112 E_Scsm Edition Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Scsm Edition : ( Ed1 := 1, Ed2 := 2 )BYTE := Ed2; END_TYPE Values Name Description Ed1 EN 61850-8-1:2005 Ed2 EN 61850-8-1:2011 6.6.113 E_Scsm Link Status Link status of the network adapter (sockets). See: E_Tcp Link Status [} 488]. TF6510 Version: 1.7.1 487
## Page 488

PLC API Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) Syntax ALIAS E_Scsm Link Status : E_Tcp Link Status 6.6.114 E_Tcp Link Status Link status of the network adapter. Namespace: Tc3_Sockets [} 98] Library: Tc3_Sockets (Tc3_Sockets.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Tcp Link Status : ( Unknown :=-1, Ok :=0, Link Error :=1 )SINT:=Unknown; END_TYPE Values Name Description Unknown Link status unknown or not yet determined Ok Connection established Link Error Link error or no connection 6.6.115 E_Tcp Socket Type Socket type. Namespace: Tc3_Sockets [} 98] Library: Tc3_Sockets (Tc3_Sockets.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Tcp Socket Type : ( None :=0, Listener :=1, Accepted :=2, Client :=3 )BYTE; END_TYPE Values Name Description None Invalid socket (unopened, closed socket) Listener The Listener socket of the server Accepted Accepted server connection socket Client Client connection socket 6.6.116 E_Trace Level Priority level for logging the error messages and log messages. 488 Version: 1.7.1 TF6510
## Page 489

PLC API Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Trace Level : ( None := 0,// don't trace any message Verbose := 16#00000001,// bit 0 => log verbose messages Tx Data := 16#00000002,// bit 1 => log tx data Rx Data := 16#00000004,// bit 2 => log rx data Info := 16#00000100,// bit 8..15 => trace pdu info messages Pdu Req := 16#00000200, Pdu Ind := 16#00000400, Pdu Rsp := 16#00000800, Pdu Cnf := 16#00001000, Warning := 16#00010000,// bit 16..23 => trace warning messages Error := 16#01000000,// bit 24..30 => trace error messages Critical:= 16#80000000// bit 31 => trace critical messages )DWORD; END_TYPE Values Name Description None None Verbose Text Tx Data Transmitted data Rx Data Received data Info Information Pdu Req PDU-Request Pdu Ind PDU-Indication Pdu Rsp PDU-Response Pdu Cnf PDU-Confirmation Warning Warning Error Error Critical Critical 6.6.117 E_Utc Time Accuracy Number of significant bits in the member variable: T_Utc Time [} 519].fraction Of Second. Values 25 to 30 are not used. Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE E_Utc Time Accuracy : ( Null := 0, _01 := 1, _02 := 2, _03 := 3, _04 := 4, _05 := 5, _06 := 6, _07 := 7, _08 := 8, _09 := 9, _10 := 10, _11 := 11, _12 := 12, TF6510 Version: 1.7.1 489
## Page 490

PLC API _13 := 13, _14 := 14, _15 := 15, _16 := 16, _17 := 17, _18 := 18, _19 := 19, _20 := 20, _21 := 21, _22 := 22, _23 := 23, _24 := 24, _25_invalid := 2#11001, _26_invalid := 2#11010, _27_invalid := 2#11011, _28_invalid := 2#11100, _29_invalid := 2#11101, _30_invalid := 2#11110, Unspecified := 31 )BYTE; END_TYPE Values Name Description Zero 0 bits _01 1-bit _02 2-bit _03 3-bit _04 4-bit _05 5-bit _06 6-bit _07 7-bit _08 8-bit _09 9-bit _10 10-bit _11 11-bit _12 12-bit _13 13-bit _14 14-bit _15 15-bit _16 16-bit _17 17-bit _18 18-bit _19 19-bit _20 20-bit _21 21-bit _22 22-bit _23 23-bit _24 24-bit _25_invalid.._30_invalid Invalid Unspecified Not specified 6.6.118 External data types 6.6.118.1 ETHERNET_ADDRESS Network adapter MAC address. 490 Version: 1.7.1 TF6510
## Page 491

PLC API Namespace: Twin CAT Type System [} 97] Library: Not required. Twin CAT system resource from v3.1.4024.0 Syntax TYPE ETHERNET_ADDRESS : STRUCT b : ARRAY [0..5] OF BYTE; END_STRUCT END_TYPE 6.6.118.2 GUID System ID. Namespace: Twin CAT Type System [} 97] Library: Not required. Twin CAT system resource from v3.1.4024.0 Syntax TYPE GUID : STRUCT Data1 : DWORD; Data2 : WORD; Data3 : WORD; Data4 : ARRAY[0..7] OF BYTE; END_STRUCT END_TYPE 6.6.118.3 OTCID Object ID of the Twin CAT real-time network adapter. Namespace: Twin CAT Type System [} 97] Library: Not required. Twin CAT system resource from v3.1.4024.0 TYPE OTCID : UDINT; END_TYPE 6.6.118.4 T_Ams Net ID A PLC variable of this type is a string containing the AMS network ID of the target device to which the ADS command is directed. The string consists of six numerical fields, separated by dots. Valid AMS network addresses are, for example, '1.1.1.2.7.1' or '200.5.7.170.1.7'. If an empty string is passed, the AMS network ID of the local device is automatically assumed. Namespace: Tc2_System Library: Tc2_System (Tc2_System.compiled-library) TYPE T_Ams Net ID : STRING(23); END_TYPE 6.6.118.5 T_HSOCKET TCP/IP socket connection handle. Namespace: Tc2_Tcp Ip Library: Tc2_Tcp Ip (Tc2_Tcp Ip.compiled-library) Syntax TYPE T_HSOCKET 6.6.118.6 T_IPv4Addr A variable of this type is a string with the (Ipv4) Internet protocol network address. E.g. '172.16.7.199'. TF6510 Version: 1.7.1 491
## Page 492

PLC API TYPE T_IPv4Addr : STRING(15); END_TYPE Requirements Development environment Target system type PLC libraries to include (Cate- gory group) Twin CAT v3.1.0 PC or CX (x86, x64, ARM) Tc2_System (System) 6.6.118.7 T_Max String The variable of this type is PLC string with the maximal length. Longer strings are allowed, but the string functions are limited to 255 characters. TYPE T_Max String : STRING(MAX_STRING_LENGTH); END_TYPE VAR_GLOBAL CONSTANT MAX_STRING_LENGTH : UDINT := 255; ENd_VAR Requirements Development environment Target system type PLC libraries to include (Cate- gory group) Twin CAT v3.1.0 PC or CX (x86, x64, ARM) Tc2_System (System) 6.6.118.8 T_Throttle Times Cycle times for the receive data throttle polling mode. Namespace: Tc2_Tcp Ip Library: Tc2_Tcp Ip (Tc2_Tcp Ip.compiled-library) Syntax TYPE T_Throttle Times 6.6.118.9 Tc Ethernet Adapter Priority Priority ID of the Twin CAT real-time network adapter. Namespace: Twin CAT Type System [} 97] Library: Not required. Twin CAT system resource from v3.1.4024.0 TYPE Tc Ethernet Adapter Priority : ( Tc Ethernet Adapter Priority Low :=1, Tc Ethernet Adapter Priority High :=16 ); END_TYPE 6.6.118.10 Tc Event Entry Structured type with event or error information. Namespace: Twin CAT Type System [} 97] Library: Not required. Twin CAT system resource from v3.1.4024.0 Syntax TYPE Tc Event Entry : STRUCT uuid Event Class : GUID; n Event Id : UDINT; 492 Version: 1.7.1 TF6510
## Page 493

PLC API e Severity : Tc Event Severity; END_STRUCT END_TYPE Components Name Type Description uuid Event Class GUID [} 491] A unique ID for the event class. The GUID [} 491] specifies the event source. n Event ID UDINT Event ID or error number. e Severity Tc Event Severity Degree of severity. [} 493] 6.6.118.11 Tc Event Severity Severity of a message. Namespace: Twin CAT Type System [} 97] Library: Not required. Twin CAT system resource from v3.1.4024.0 Syntax {attribute 'qualified_only'} {attribute 'strict'} TYPE Tc Event Severity : ( Verbose := 0, Info := 1, Warning := 2, Error := 3, Critical := 4 ); END_TYPE Values Name Description Verbose Text Info Information Warning Warning Error Error Critical Critical 6.6.118.12 TIMESTRUCT Time in system time format. TYPE TIMESTRUCT STRUCT w Year : WORD; w Month : WORD; w Day Of Week : WORD; w Day : WORD; w Hour : WORD; w Minute : WORD; w Second : WORD; w Milliseconds : WORD; END_STRUCT END_TYPE w Year: the year: 1970 ~ 2106; w Month: the month: 1 ~ 12 (January = 1, February = 2, etc.); w Day Of Week: the day of the week: 0 ~ 6 (Sunday = 0, Monday = 1 etc. ); TF6510 Version: 1.7.1 493
## Page 494

PLC API w Day: the day of the month: 1 ~ 31; w Hour: hour: 0 ~ 23; w Minute: minute: 0 ~ 59; w Second: second: 0 ~ 59; w Milliseconds: millisecond: 0 ~ 999; Requirements Development environment Target platform PLC libraries to be integrated (category group) Twin CAT v3.1.0 PC or CX (x86, x64, ARM) Tc2_Utilities (System) 6.6.119 ST_Acsi Analogue Value Analog value as structured type. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax TYPE ST_Acsi Analogue Value : STRUCT i : DINT; f : REAL; END_STRUCT END_TYPE Components Name Type Description i DINT Integer value. f REAL Floating point value. 6.6.120 ST_Acsi Calendar Time Calendar time as a structured type. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax TYPE ST_Acsi Calendar Time : STRUCT occ : WORD; occ Type : E_Acsi Occ Type; occ Per : E_Acsi Occ Per; week Day : E_Acsi Week Day; month : E_Acsi Month; day : BYTE; hr : BYTE; mn : BYTE; END_STRUCT END_TYPE 494 Version: 1.7.1 TF6510
## Page 495

PLC API Components Name Type Description occ WORD Occurrence of a calendar item. occ Type E_Acsi Occ Type [} 456] Type of calendar item. occ Per E_Acsi Occ Per [} 456] Repeat Period. week Day E_Acsi Week Day [} 481] Day of the week. month E_Acsi Month [} 454] Month. day BYTE Day. hr BYTE Hour. mn BYTE Minute. 6.6.121 ST_Acsi Cell Cell as a structured type. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax TYPE ST_Acsi Cell : STRUCT x Start : REAL; x End : REAL; y Start : REAL; y End : REAL; END_STRUCT END_TYPE Components Name Type Description x Start REAL Cell coordinate x-start. x End REAL Cell coordinate x-end. y Start REAL Cell coordinate y-start. y End REAL Cell coordinate y-end. 6.6.122 ST_Acsi Data Set Class Info Data set member container information. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) TYPE ST_Acsi Data Set Class Info : STRUCT n Members : UDINT; b Persistent : BOOL; b Deletable : BOOL; END_STRUCT END_TYPE Components Name Type Description n Members UDINT Number of data set members. b Persistent BOOL TRUE => Persistent data set (bound to an LN). FALSE => Non-persistent data set (bound to active connection, will be deleted when connection is terminated). b Deletable BOOL TRUE => Data set was configured dynamically (at runtime and can be deleted). FALSE => Data set was configured statically (cannot be deleted). TF6510 Version: 1.7.1 495
## Page 496

PLC API 6.6.123 ST_Acsi Functional Constraints Functional group as a structured type. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax TYPE ST_Acsi Functional Constraints : STRUCT MX : BIT; ST_: BIT; CO : BIT; CF : BIT; DC : BIT; SP : BIT; SG : BIT; RP : BIT; LG : BIT; BR : BIT; GO : BIT; GS : BIT; SV : BIT; SE : BIT; MS : BIT; SC : BIT; US : BIT; EX : BIT; // XX : BIT; END_STRUCT END_TYPE Components Name Type Description MX BIT Measurands (analogue values) (use of FC in the definition of DATA). ST_ BIT Status information (use of FC in the definition of DATA). CO BIT Control (use of FC in the definition of DATA). CF BIT Configuration (use of FC in the definition of DATA). DC BIT Description (use of FC in the definition of DATA). SP BIT Setpoint (use of FC in the definition of DATA and control blocks). SG BIT Setting group (use of FC in the definition of DATA). RP BIT Unbuffered report (- > Reserved for control classes and use of the FC in the definition of control blocks). LG BIT Logging . BR BIT Buffered report (- > Reserved for control classes and use of the FC in the definition of control blocks). GO BIT Goose control (- > Reserved for control classes and use of the FC in the definition of control blocks). GS BIT Gsse control (- > Reserved FOR control classes AND use OF the FC in the definition OF control blo cks). SV BIT Substitution (use of FC in the definition of DATA). SE BIT Setting group editable (use of FC in the definition of DATA). MS BIT Multicast sampled value control (- > Reserved for control classes and use of the FC in the definition of control blocks). SC BIT SCL. US BIT Unicast sampled value control (- > Reserved for control classes and use of the FC in the definition of control blocks). EX BIT Extended definition (use of FC in the definition of DATA). XX BIT Shall represent all Data Attributes of a Data of any FC. This value shall only used in t he FCD; "XX" shall not used as value in Data Attributes. 496 Version: 1.7.1 TF6510
## Page 497

PLC API 6.6.124 ST_Acsi IEDGroup Class Info Container information of the IED group. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) TYPE ST_Acsi IEDGroup Class Info : STRUCT n IEDs : UDINT; END_STRUCT END_TYPE Components Name Type Description n IEDs UDINT Number of IEDs in the container. 6.6.125 ST_Acsi Intelligent Electronic Device Class Info Container information of the IED. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) TYPE ST_Acsi Intelligent Electronic Device Class Info : STRUCT n Logical Devices : UDINT; n Aa Nodes : UDINT; END_STRUCT END_TYPE Components Name Type Description n Logical Devices UDINT Number of logical devices in the server container. n Aa Nodes UDINT Number of associated connections in the server's container. 6.6.126 ST_Acsi Logical Device Class Info Container information of the logical device. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) TYPE ST_Acsi Logical Device Class Info : STRUCT n Logical Nodes : UDINT; END_STRUCT END_TYPE Components Name Type Description n Logical Nodes UDINT Number of logical node in the container of the logical device. 6.6.127 ST_Acsi Logical Node Class Info Container information of the logical node. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) TF6510 Version: 1.7.1 497
## Page 498

PLC API TYPE ST_Acsi Logical Node Class Info : STRUCT n Datas : UDINT; n Data Sets : UDINT; n Buffered Report Control Blocks : UDINT; n Unbuffered Report Control Blocks : UDINT; n Log Control Blocks : UDINT; n Setting Group Control Blocks : UDINT; n Goose Control Blocks : UDINT; n Gsse Control Blocks : UDINT; n Multicast Sampled Value Control Blocks : UDINT; n Unicast Sampled Value Control Blocks : UDINT; END_STRUCT END_TYPE Components Name Type Description n Datas UDINT Number of data and data attributes in the container of the logical node. n Data Sets UDINT Number of data sets in the container of the logical node. n Buffered Report Control Blocks UDINT Number of BRCBs in the container of the logical node. n Unbuffered Report Control Blocks UDINT Number of URCBs in the container of the logical node. n Log Control Blocks UDINT Number of LCBs in the container of the logical node. n Setting Group Control Blocks UDINT Number of SGCBs in the container of the logical node. n Goose Control Blocks UDINT Number of GOCBs in the container of the logical node. n Gsse Control Blocks UDINT Number of GSCBs in the container of the logical node. n Multicast Sampled Value Control Bl UDINT Number of MSVCBs in the container of the logical node. ocks n Unicast Sampled Value Control Blo UDINT Number of USVCBs in the container of the logical node. cks 6.6.128 ST_Acsi Log Optional Fields This structure provides information about the optional fields transferred in a log. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax TYPE ST_Acsi Log Optional Fields : STRUCT Reason For Inclusion : BIT; END_STRUCT END_TYPE Components Name Type Description Reason For Inclusion BIT If TRUE, the log with the cause of the reporting is transferred. 6.6.129 ST_Acsi Optional Fields This structure provides information about the optional fields transferred in a report. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) 498 Version: 1.7.1 TF6510
## Page 499

PLC API Syntax TYPE ST_Acsi Optional Fields : STRUCT { attribute 'hide'} reserved : BIT; Sequence Number : BIT; Report Time Stamp : BIT; Reason For Inclusion : BIT; Data Set Name : BIT; Data Reference : BIT; Buffer Overflow : BIT; Entry ID : BIT; Conf Revision : BIT; Segmentation : BIT; END_STRUCT END_TYPE Components Name Type Description reserved BIT Reserved. Sequence Number BIT If TRUE, the report is transferred with a sequence number. Report Time Stamp BIT If TRUE, the report is transferred with a time stamp. Reason For Inclusion BIT If TRUE, the report with the cause of the reporting is transferred. Data Set Name BIT If TRUE, the report also includes the name of each referenced data set. Data Reference BIT If TRUE, the report also includes the object references of the data set member. Buffer Overflow BIT If TRUE, the report includes the attribute for the buffer overflow. Entry ID BIT If TRUE, the entries in the report are assigned consecutive numbers. Conf Revision BIT If TRUE, the report includes the attribute for the revision of the configuration. Segmentation BIT This bit is reserved. 6.6.130 ST_Acsi Originator Information about the command originator as a structured type. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax TYPE ST_Acsi Originator : STRUCT or Cat : E_Acsi Or Category; or Ident : T_OCTET64; END_STRUCT END_TYPE Components Name Type Description or Cat E_Acsi Or Category [} 458] Category of the command originator. or Ident T_OCTET64 [} 518] Identification of the command originator. 6.6.131 ST_Acsi Phy Com Addr This structure describes a physical communication address. TF6510 Version: 1.7.1 499
## Page 500

PLC API Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax TYPE ST_Acsi Phy Com Addr : STRUCT Addr : T_OCTET6; PRIORITY : BYTE; VID : WORD; APPID : WORD; END_STRUCT END_TYPE Components Name Type Description Addr T_OCTET6 Media Access Control (MAC) address. PRIORITY BYTE User priority. VID WORD VLAN identification. APPID WORD Application identification. 6.6.132 ST_Acsi Point Point as a structured type. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax TYPE ST_Acsi Point : STRUCT x Val : REAL; y Val : REAL; z Val : REAL; END_STRUCT END_TYPE Components Name Type Description x Val REAL Point coordinate x. y Val REAL Point coordinate y. z Val REAL Point coordinate z. 6.6.133 ST_Acsi Pres Cond This structure configures the availability of the optional data attributes system-wide. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax TYPE ST_Acsi Pres Cond : STRUCT Analogue Value : E_Acsi Analogue Value Pres Cond; Cell_x End : BIT := 0; Cell_y Start : BIT := 0; Cell_y End : BIT := 0; Point_z Val : BIT := 0; Range Config_lim Db : BIT := 0; Unit_multiplier : BIT := 0; Val With Trans_trans Ind : BIT := 0; Vector_ang : BIT := 0; 500 Version: 1.7.1 TF6510
## Page 501

PLC API Oper_Analogue Value_oper Tm : BIT := 0; Oper_BOOLEAN_oper Tm : BIT := 0; Oper_CODEDENUM_oper Tm : BIT := 0; Oper_ENUMERATED_oper Tm : BIT := 0; Oper_INT32_oper Tm : BIT := 0; Oper_INT8_oper Tm : BIT := 0; SBOw_Analogue Value_oper Tm : BIT := 0; SBOw_BOOLEAN_oper Tm : BIT := 0; SBOw_CODEDENUM_oper Tm : BIT := 0; SBOw_ENUMERATED_oper Tm : BIT := 0; SBOw_INT32_oper Tm : BIT := 0; SBOw_INT8_oper Tm : BIT := 0; Cancel_Analogue Value_oper Tm : BIT := 0; Cancel_BOOLEAN_oper Tm : BIT := 0; Cancel_CODEDENUM_oper Tm : BIT := 0; Cancel_ENUMERATED_oper Tm : BIT := 0; Cancel_INT32_oper Tm : BIT := 0; Cancel_INT8_oper Tm : BIT := 0; BRCB_Resv Tms : BIT := 0; BRCB_Owner : BIT := 0; URCB_Owner : BIT := 0; LCB_Opt Flds : BIT := 0; LCB_Buf Tm : BIT := 0; END_STRUCT END_TYPE TF6510 Version: 1.7.1 501
## Page 502

PLC API Components Name Type Description Analogue Value E_Acsi Analogue Value Pres Cond [} 436] Configures the presence of the Analogue Value "i" and "f" attributes in the control values (ctl Val) and status values (mx Val). Cell_x End BIT False | 0 := optional (default); True | 1 := mandatory; Cell_y Start BIT -//- Cell_y End BIT -//- Point_z Val BIT -//- Range Config_lim Db BIT -//- Unit_multiplier BIT -//- Val With Trans_trans Ind BIT -//- Vector_ang BIT -//- Oper_Analogue Value_oper Tm BIT -//- Oper_BOOLEAN_oper Tm BIT -//- Oper_CODEDENUM_oper Tm BIT -//- Oper_ENUMERATED_oper Tm BIT -//- Oper_INT32_oper Tm BIT -//- Oper_Int8_oper Tm BIT -//- SBOw_Analogue Value_oper Tm BIT -//- SBOw_BOOLEAN_oper Tm BIT -//- SBOw_CODEDENUM_oper Tm BIT -//- SBOw_ENUMERATED_oper Tm BIT -//- SBOw_INT32_oper Tm BIT -//- SBOw_INT8_oper Tm BIT -//- Cancel_Analogue Value_oper Tm BIT -//- Cancel_BOOLEAN_oper Tm BIT -//- Cancel_CODEDENUM_oper Tm BIT -//- Cancel_ENUMERATE_oper Tm BIT -//- Cancel_INT32_oper Tm BIT -//- Cancel_INT8_oper Tm BIT -//- BRCB_Resv Tms BIT -//- BRCB_Owner BIT -//- URCB_Owner BIT -//- LCB_Opt Flds BIT -//- LCB_Buf Tm BIT -//- 6.6.134 ST_Acsi Pulse Config Pulse configuration as structured type. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax TYPE ST_Acsi Pulse Config : STRUCT cmd Qual : E_Acsi Cmd Qual; on Dur : DWORD; off Dur : DWORD; 502 Version: 1.7.1 TF6510
## Page 503

PLC API num Pls : DWORD; END_STRUCT END_TYPE Components Name Type Description cmd Qual E_Acsi Cmd Qual [} 443] Command Criterion. on Dur DWORD Pulse duration: ON. off Dur DWORD Pulse duration: OFF num Pls DWORD Number of pulses. 6.6.135 ST_Acsi Quality Quality as a structured type. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax TYPE ST_Acsi Quality : STRUCT Validity0 : BIT; Validity1 : BIT; Overflow : BIT; Out Of Range : BIT; Bad Reference : BIT; Oscillatory : BIT; Failure : BIT; Old Data : BIT; Inconsistent : BIT; Inaccurate : BIT; Source : BIT; Test : BIT; Operator Blocked : BIT; END_STRUCT END_TYPE Components Name Type Description Validity0 BIT Validity LSB. Value coding: see table below. Validity1 BIT Validity MSB. Value coding: see table below. Overflow BIT Overflow. Out Of Range BIT Not in permissible range. Bad Reference BIT Incorrect reference. Oscillatory BIT Oscillating. Failure BIT Failure. Old Data BIT Old data. Inconsistent BIT Inconsistent. Inaccurate BIT Inaccurate. Source BIT Source (0:=process, 1:=replaced). Test BIT Test. Operator Blocked BIT Operator blocked. TF6510 Version: 1.7.1 503
## Page 504

PLC API Validity value coding Value Validity0 Validity1 Description Good 0 0 Good (default value). Invalid 0 1 Invalid. Reserved 1 0 Reserved. Questionable 1 1 Questionable. 6.6.136 ST_Acsi Range Config Range configuration as a structured type. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax TYPE ST_Acsi Range Config : STRUCT hh Lim : ST_Acsi Analogue Value; h Lim : ST_Acsi Analogue Value; l Lim : ST_Acsi Analogue Value; ll Lim : ST_Acsi Analogue Value; min_ : ST_Acsi Analogue Value; max_ : ST_Acsi Analogue Value; lim Db : DWORD; END_STRUCT END_TYPE Components Name Type Description hh Lim ST_Acsi Analogue Value [} 494] High-High-Limit. h Lim ST_Acsi Analogue Value [} 494] High-Limit. l Lim ST_Acsi Analogue Value [} 494] Low-Limit. ll Lim ST_Acsi Analogue Value [} 494] Low-Low-Limit. min_ ST_Acsi Analogue Value [} 494] Minimum value. max_ ST_Acsi Analogue Value [} 494] Maximum value. lim Db DWORD 6.6.137 ST_Acsi Reason Code Cause of transfer of a list item in a report. A report can include one, several or all list items of a data set. Each list item can have an own cause of transfer. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax TYPE ST_Acsi Reason Code : STRUCT { attribute 'hide'}reserved : BIT; Data Change : BIT; Quality Change : BIT; Data Update : BIT; Integrity : BIT; General Interrogation : BIT; Application Trigger : BIT; END_STRUCT END_TYPE 504 Version: 1.7.1 TF6510
## Page 505

PLC API Components Name Type Description reserved BIT Reserved. Data Change BIT If TRUE, the report was sent due to a change in the data. Quality Change BIT If TRUE, the report was sent due to a change of quality. Data Update BIT If TRUE, the report was sent due to a data update. In contrast to the option: "Data Change", the report is sent even if the data is unchanged but was reset. Integrity BIT If TRUE, the report was sent because the integrity had expired. In this case, the data sets are sent regularly after the expiry of the integrity. General Interrogation BIT If TRUE, the report was sent because of a one-time general interrogation of the data sets. Application Trigger BIT If TRUE, the report was triggered/sent by a function in the application. 6.6.138 ST_Acsi Scaled Value Config Scaled value configuration as structured type. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax TYPE ST_Acsi Scaled Value Config : STRUCT scale Factor : REAL; offset : REAL; END_STRUCT END_TYPE Components Name Type Description scale Factor REAL Scaling factor. offset REAL Offset. 6.6.139 ST_Acsi Sv Optional Fields This structure provides information about the optional fields transferred with a sampled value. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax TYPE ST_Acsi Sv Optional Fields : STRUCT Refresh Time : BIT; Sample Synchronized : BIT; Sample Rate : BIT; Data Set Name : BIT; Security : BIT; Sample Mode : BIT; Synch Source Identity : BIT; END_STRUCT END_TYPE TF6510 Version: 1.7.1 505
## Page 506

PLC API Components Name Type Description Refresh Time BIT When TRUE, the sampled value is transmitted with the attribute value "Refr Tm". Sample Synchronized BIT This value is ignored and exists for compatibility with IEC 61850-9-2 Edition 1.0. Sample Rate BIT When TRUE, the sampled value is transmitted with the attribute value "Smp Rate". Data Set Name BIT When TRUE, the sampled value is transmitted with the attribute value "Dat Set". Security BIT When TRUE, the sampled value is transmitted with the attribute value "Security". Sample Mode BIT When TRUE, the sampled value is transmitted with the attribute value "Smp Mod". Synch Source Identity BIT When TRUE, the sampled value is transmitted with the attribute value "Gm Identity". 6.6.140 ST_Acsi Trigger Conditions Trigger options for sending a report. Several options may be used at the same time. The options "Integrity" and "General Interrogation" must not be set at the same time. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax TYPE ST_Acsi Trigger Conditions : STRUCT { attribute 'hide'}reserved : BIT; Data Change : BIT; Quality Change : BIT; Data Update : BIT; Integrity : BIT; General Interrogation : BIT; { attribute 'hide'}reserved2 : BIT; END_STRUCT END_TYPE Components Name Type Description reserved BIT Reserved. Data Change BIT If TRUE, sending of a report was activated due to a change in the data. Quality Change BIT If TRUE, sending of a report was activated due to a change of quality. Data Update BIT If TRUE, sending of a report was activated due to a data update. In contrast to the option "Data Change", the report is sent even if the data is unchanged but was reset. Integrity BIT If TRUE, sending of a report was activated because the integrity had expired. In this case, the data sets are sent regularly after the expiry of the integrity. General Interrogation BIT If TRUE, sending of a report was activated because of a one-time general interrogation of the data sets. reserved2 BIT Reserved to match the alignment with "Reason Code". 506 Version: 1.7.1 TF6510
## Page 507

PLC API 6.6.141 ST_Acsi Unit Unit of measurement as a structured type. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax TYPE ST_Acsi Unit : STRUCT SIUnit : E_Acsi SIUnit; multiplier : E_Acsi Multiplier; END_STRUCT END_TYPE Components Name Type Description SIUnit E_Acsi SIUnit [} 471] SI unit. multiplier E_Acsi Multiplier [} 455] Multiplier. 6.6.142 ST_Acsi Val With Trans Value with transition state as structured type. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax TYPE ST_Acsi Val With Trans : STRUCT pos Val : SINT; trans Ind : BOOL; END_STRUCT END_TYPE Components Name Type Description pos Val SINT Position. trans Ind BOOL Transition state. 6.6.143 ST_Acsi Vector Vector as a structured type. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax TYPE ST_Acsi Vector : STRUCT mag : ST_Acsi Analogue Value; ang : ST_Acsi Analogue Value; END_STRUCT END_TYPE TF6510 Version: 1.7.1 507
## Page 508

PLC API Components Name Type Description mag ST_Acsi Analogue Value [} 494] Size. ang ST_Acsi Analogue Value [} 494] Angle. 6.6.144 ST_Gse Adapter Info Status and statistical data of the GSE network adapter. Namespace: Tc3_Gse [} 98] Library: Tc3_Gse (Tc3_Gse.compiled-library) TYPE ST_Gse Adapter Info : STRUCT e Status : E_Gse Link Status; n Rx : UDINT; n Tx : UDINT; END_STRUCT END_TYPE Components Name Type Description e Status E_Gse Link Status [} 485] GSE network adapter link status. n Rx UDINT Number of frames received. n Tx UDINT Number of frames sent. 6.6.145 ST_Gse Go CBPublisher Tx Information in the last-sent GOOSE message. Namespace: Tc3_Gse [} 98] Library: Tc3_Gse (Tc3_Gse.compiled-library) TYPE ST_Gse Go CBPublisher Tx : STRUCT e State : E_Gse Go CBPublisher State; (*-------------------------------------------*) src Addr : ETHERNET_ADDRESS; dst Addr : ETHERNET_ADDRESS; n APPID : WORD; n VID : WORD(0..4095); e PRIORITY : E_Acsi VLan Priority; (*-------------------------------------------*) s Go CBRef : T_Acsi Object Reference; n Time Allowed To Live : UDINT; s Dat Set : T_Acsi Object Reference; s Go ID : T_Acsi Vis String129; t T : T_Utc Time; n St Num : UDINT; n Sq Num : UDINT; b Test : BOOL; n Conf Rev : UDINT; b Nds Com : BOOL; n Num Dat Set Entries : UDINT; (*-------------------------------------------*) n Min Time : UDINT(1..16#7FFFFFFF); n Max Time : UDINT(1..16#7FFFFFFF); n Multiplier : BYTE(1..16#FF); n Time Remaining To Live : UDINT; ip Adapter : I_Gse Adapter Class; END_STRUCT END_TYPE 508 Version: 1.7.1 TF6510
## Page 509

PLC API Components Name Type Description e State E_Gse Go CBPublisher State Publisher status. [} 484] src Addr ETHERNET_ADDRESS [} 490] MAC address of the message source. dst Addr ETHERNET_ADDRESS [} 490] MAC address of the message destination. n APPID WORD APPID. n VID WORD(0..4095) Virtual LAN identification. e PRIORITY E_Acsi VLan Priority [} 481] Virtual LAN priority. s Go CBRef T_Acsi Object Reference [} 515] GOOSE control block reference string. n Time Allowed To Live UDINT Permitted lifetime/validity duration of the GOOSE message [ms]. s Dat Set T_Acsi Object Reference [} 515] Data set reference string. s Go ID T_Acsi Vis String129 GOOSE ID. t T T_Utc Time [} 519] Timestamp (UTC). n St Num UDINT Status number. n Sq Num UDINT Sequence number. b Test BOOL Simulation/test flag. n Conf Rev UDINT Configuration revision number. b Nds Com BOOL Configuration/parameterization required. n Num Dat Set Entries UDINT Number of data set entries. n Min Time UDINT(1..16#7FFFFFFF) Start time for message repetitions [ms]. n Max Time UDINT(1..16#7FFFFFFF) Final time for message repetitions [ms]. n Multiplier BYTE(1..16#FF) Multiplier for message repetitions [ms]. n Time Remaining To Live UDINT Remaining lifetime/validity duration of the GOOSE message [ms]. ip Adapter I_Gse Adapter Class GSE network adapter interface pointer. 6.6.146 ST_Gse Go CBSubscriber Rx Information in the last-received GOOSE message. Namespace: Tc3_Gse [} 98] Library: Tc3_Gse (Tc3_Gse.compiled-library) TYPE ST_Gse Go CBSubscriber Rx : STRUCT e State : E_Gse Go CBSubscriber State; (*--------------------------------------------*) src Addr : ETHERNET_ADDRESS; dst Addr : ETHERNET_ADDRESS; n APPID : WORD; n VID : WORD(0..4095); e PRIORITY : E_Acsi VLan Priority; (*--------------------------------------------*) s Go CBRef : T_Acsi Object Reference; n Time Allowed To Live : UDINT; s Dat Set : T_Acsi Object Reference; s Go ID : T_Acsi Vis String129; t T : T_Utc Time; n St Num : UDINT; n Sq Num : UDINT; b Test : BOOL; n Conf Rev : UDINT; b Nds Com : BOOL; n Num Dat Set Entries : UDINT; (*--------------------------------------------*) n Time Remaining To Live : UDINT; TF6510 Version: 1.7.1 509
## Page 510

PLC API ip Adapter : I_Gse Adapter Class; END_STRUCT END_TYPE Components Name Type Description e State E_Gse Go CBSubscriber State Subscriber status. [} 485] src Addr ETHERNET_ADDRESS [} 490] MAC address of the message source. dst Addr ETHERNET_ADDRESS [} 490] MAC address of the message destination. n APPID WORD APPID. n VID WORD Virtual LAN identification. e PRIORITY E_Acsi VLan Priority [} 481] Virtual LAN priority. s Go CBRef T_Acsi Object Reference [} 515] GOOSE control block reference string. n Time Allowed To Live UDINT Permitted lifetime/validity duration of the GOOSE message [ms]. s Dat Set T_Acsi Object Reference [} 515] Data set reference string. s Go ID T_Acsi Vis String129 GOOSE ID. t T T_Utc Time [} 519] Timestamp (UTC). n St Num UDINT Status number. n Sq Num UDINT Sequence number. b Test BOOL Simulation/test flag. n Conf Rev UDINT Configuration revision number. b Nds Com BOOL Configuration/parameterization required. n Num Dat Set Entries UDINT Number of data set entries. n Time Remaining To Live UDINT Remaining lifetime/validity duration of the GOOSE message [ms]. ip Adapter I_Gse Adapter Class GSE network adapter interface pointer. 6.6.147 ST_Scsm Additional Cause Diagnostic Event Info This structure provides additional diagnostic information about a negative feedback during the execution of a control service (operate, select, cancel etc.). The MMS Information Report service is available for transferring this information when using MMS mapping. Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) Syntax TYPE ST_Scsm Additional Cause Diagnostic Event Info : STRUCT e Service : E_Acsi Service Type; Cntrl Obj : T_Acsi Object Reference; Error : E_Acsi Appl Error; Origin : ST_Acsi Originator; Ctl Num : USINT; Add Cause : E_Acsi Appl Add Cause; END_STRUCT END_TYPE 510 Version: 1.7.1 TF6510
## Page 511

PLC API Components Name Type Description e Service E_Acsi Service Type [} 468] Designation of service, the execution of which has generated the additional diagnostic information. Cntrl Obj T_Acsi Object Reference String with the object reference of the object (control service) that generated the additional diagnostic information during execution. If [} 515] the string is empty, this parameter is optional and is not available. Error E_Acsi Appl Error [} 438] Diagnostic information about the error source (state machine of the service, of the Operate or Time Activated service itself or another). Origin ST_Acsi Originator [} 499] Identifies the client that initiated the execution of the service. Ctl Num USINT This number corresponds to the service sequence number of the client that initiated the execution of the service. If the value is 0, this parameter is optional and is not available. Add Cause E_Acsi Appl Add Cause Additional information about the cause. [} 437] 6.6.148 ST_Scsm Br CBJob Info BRCB statistical and status information. Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) TYPE ST_Scsm Br CBJob Info : STRUCT e State : E_Scsm RCBState;(* Client status. *) s Rpt ID : T_Acsi Vis String129; s Dat Set : T_Acsi Object Reference; n Sq Num : WORD; t Time Of Entry : T_Binary Time; st Reason Code : ST_Acsi Reason Code; n Entry ID : LWORD; ip AA : I_Scsm Association Class; END_STRUCT END_TYPE 6.6.149 ST_Scsm Br CBValues Set Selection of BRCB control block attributes to be written. Syntax TYPE ST_Scsm Br CBValues Set : STRUCT Rpt ID : BIT;(* R/W *) Rpt Ena : BIT;(* R/W *) Dat Set : BIT;(* R/W *) Conf Rev : BIT;(* Read only attribute! *) Opt Flds : BIT;(* R/W *) Buf Tm : BIT;(* R/W *) Sq Num : BIT;(* Read only attribute! *) Trg Ops : BIT;(* R/W *) Intg Pd : BIT;(* R/W *) GI : BIT;(* R/W *) Purge Buf : BIT;(* R/W *) Entry ID : BIT;(* R/W *) Time Of Entry : BIT;(* Read only attribute! *) Resv Tms : BIT;(* R/W *) Owner : BIT;(* Read only attribute! *) END_STRUCT END_TYPE 6.6.150 ST_Scsm Command Termination Event Info This structure provides additional information about the service feedback: Command Termination. TF6510 Version: 1.7.1 511
## Page 512

PLC API Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) Syntax TYPE ST_Scsm Command Termination Event Info : STRUCT e Service : E_Acsi Service Type; Cntrl Obj : T_Acsi Object Reference; Oper Tm : T_Utc Time; Origin : ST_Acsi Originator; Ctl Num : USINT; T : T_Utc Time; Test : BOOL; Check : E_Acsi Check; END_STRUCT END_TYPE Components Name Type Description e Service E_Acsi Service Type Designation of service, the execution of which has generated the service feedback. [} 468] Cntrl Obj T_Acsi Object Referenc String with the object reference of the object (control service) that generated the additional information during execution. If the string is e [} 515] empty, this parameter is optional and is not available. Oper Tm T_Utc Time [} 519] Origin ST_Acsi Originator Identifies the client that initiated the execution of the service. [} 499] Ctl Num USINT This number corresponds to the service sequence number of the client that initiated the execution of the service. T T_Utc Time [} 519] Test BOOL Check E_Acsi Check [} 440] 6.6.151 ST_Scsm Confirmed Event Info This structure provides additional information about the service feedback. Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) Syntax TYPE ST_Scsm Confirmed Event Info : STRUCT e Service : E_Acsi Service Type; h User : PVOID; n Invoke ID : UDINT; n Event Sequence : UDINT; b More Follows : BOOL; END_STRUCT END_TYPE 512 Version: 1.7.1 TF6510
## Page 513

PLC API Components Name Type Description e Service E_Acsi Service Type [} 468] Designation of service, the execution of which has generated the service feedback. h User PVOID Optional user-defined parameter or pointer. Any value for this parameter can be transferred in the methods for service activation (Xyz Method Req). The value is then mirrored in the event handling routine for the service feedback. n Invoke ID UDINT Identifies the service activation. Each new service activation (Xyz Method Req) is numbered consecutively. A copy of this number is mirrored in the service feedback (On Xyz Method Cnf). n Event Sequence UDINT Sequence number of the event handling routine. If the event handling routine is called repeatedly, the calls are numbered consecutively. b More Follows BOOL FALSE => last call of the event handling routine. TRUE => further calls of the event handling routine will follow. 6.6.152 ST_Scsm Go CBJob Info GOCB statistical and status information. Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) TYPE ST_Scsm Go CBJob Info : STRUCT b Enabled : BOOL; END_STRUCT END_TYPE 6.6.153 ST_Scsm Go CBValues Set Selection of GOOSE control block attributes to be written. Syntax TYPE ST_Scsm Go CBValues Set : STRUCT Go Ena : BIT;(* R/W *) Go ID : BIT;(* R/W *) Dat Set : BIT;(* R/W *) Conf Rev : BIT;(* Read only attribute! *) Nds Com : BIT; Dst Address : BIT; Min Time : BIT; Max Time : BIT; Fixed Offs : BIT; END_STRUCT END_TYPE 6.6.154 ST_Scsm Report Event Info This structure provides additional information about the received report. Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) TF6510 Version: 1.7.1 513
## Page 514

PLC API Syntax TYPE ST_Scsm Report Event Info : STRUCT e Service : E_Acsi Service Type; Rpt ID : T_Acsi Object Reference; Opt Flds : ST_Acsi Optional Fields; Seq Num : UINT; Time Of Entry : T_Binary Time; Dat Set : T_Acsi Object Reference; Buf Ovfl : BOOL; Entry ID : T_OCTET8; Conf Rev : UDINT; Sub Seq Num : UINT; More Segments Follow : BOOL; Data Reference : T_Acsi Object Reference; Reason Code : ST_Acsi Reason Code; n Event Sequence : UDINT; b More Follows : BOOL; END_STRUCT END_TYPE Components Name Type Description e Service E_Acsi Service Type [} 468] Designation of service, the execution of which has generated the report. Rpt ID T_Acsi Object Reference [} 515] Unique report ID. Opt Flds ST_Acsi Optional Fields [} 498] Information about the optional fields. Seq Num UINT Report sequence number. Time Of Entry T_Binary Time [} 516] Report timestamp. Dat Set T_Acsi Object Reference [} 515] Data Set reference Buf Ovfl BOOL Buffer overflow. Entry ID T_OCTET8 [} 518] Identification of the report entry. Conf Rev UDINT Configuration revision. Sub Seq Num UINT Subsequence number. More Segments Fol BOOL If TRUE, further segments follow. low Data Reference T_Acsi Object Reference [} 515] Datareferenz. Reason Code ST_Acsi Reason Code [} 504] Cause of transfer. n Event Sequence UDINT Sequence number of the event handling routine. If the event handling routine is called repeatedly, the calls are numbered consecutively. b More Follows BOOL FALSE => last call of the event handling routine. TRUE => further calls of the event handling routine will follow. 6.6.155 ST_Scsm Ur CBJob Info URCB statistical and status information. Namespace: Tc3_iec61850_8_1 [} 98] Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) TYPE ST_Scsm Ur CBJob Info : STRUCT e State : E_Scsm RCBState;(* Client status. *) s Rpt ID : T_Acsi Vis String129; s Dat Set : T_Acsi Object Reference; n Sq Num : BYTE; t Time Of Entry : T_Binary Time; st Reason Code : ST_Acsi Reason Code; 514 Version: 1.7.1 TF6510
## Page 515

PLC API ip AA : I_Scsm Association Class; END_STRUCT END_TYPE 6.6.156 ST_Scsm Ur CBValues Set Selection of URCB control block attributes to be written. Syntax TYPE ST_Scsm Ur CBValues Set : STRUCT Rpt ID : BIT;(* R/W *) Rpt Ena : BIT;(* R/W *) Resv : BIT;(* R/W *) Dat Set : BIT;(* R/W *) Conf Rev : BIT;(* Read only attribute! *) Opt Flds : BIT;(* R/W *) Buf Tm : BIT;(* R/W *) Sq Num : BIT;(* Read only attribute! *) Trg Ops : BIT;(* R/W *) Intg Pd : BIT;(* R/W *) GI : BIT;(* R/W *) Owner : BIT;(* Read only attribute! *) END_STRUCT END_TYPE 6.6.157 ST_Service Error Class Structured type with event or error information. See: Tc Event Entry [} 492]. Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) Syntax ALIAS ST_Service Error Class : Tc Event Entry; Components Name Type Description uuid Event Class GUID Event class. The GUID specifies the event source. n Event ID UDINT Event ID or error number. e Severity Tc Event Severity Severity level [} 493] 6.6.158 T_Acsi Object Name Object name as a string with a maximum length of 64 characters. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax ALIAS T_Acsi Object Name : STRING(MAX_ACSI_NAME) 6.6.159 T_Acsi Object Reference Object reference as a string with a maximum length of 255 characters. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) TF6510 Version: 1.7.1 515
## Page 516

PLC API Syntax ALIAS T_Acsi Object Reference : T_Max String 6.6.160 T_Acsi Tag In a variable of this type an additional information can be stored (by default an unsigned number but also pointers). Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax ALIAS T_Acsi Tag : UXINT 6.6.161 T_Acsi Vis String129 String with a maximum length of 129 characters. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax ALIAS T_Acsi Vis String129 : STRING(129) 6.6.162 T_Binary Time Binary time information. Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) Syntax TYPE T_Binary Time : STRUCT time Of Day : TOD; day : WORD; { attribute 'hide'}reserved : WORD := 0; END_STRUCT END_TYPE Components Name Type Description time Of Day TOD Number of milliseconds since midnight of the current day. day WORD Number of days since January 1, 1984. reserved WORD Reserved (0). 6.6.163 T_INT24 Signed 24-bit number. Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) Syntax ALIAS T_INT24 : ARRAY[0..2] OF BYTE 516 Version: 1.7.1 TF6510
## Page 517

PLC API 6.6.164 T_INT128 Signed 128-bit number. Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) Syntax TYPE T_INT128 : STRUCT Lo : LWORD; Hi : LWORD; END_STRUCT END_TYPE Components Name Type Description Lo LWORD Lower bytes. Hi LWORD Upper bytes. 6.6.165 T_Mms Integer8 Signed 8-bit number. Namespace: Tc3_Mms [} 98] Library: Tc3_Mms (Tc3_Mms.compiled-library) Syntax ALIAS T_Mms Integer8 : SINT(-128..127) 6.6.166 T_Mms Integer16 Signed 16-bit number. Namespace: Tc3_Mms [} 98] Library: Tc3_Mms (Tc3_Mms.compiled-library) Syntax ALIAS T_Mms Integer16 : INT(-32768..32767) 6.6.167 T_Mms Integer32 Signed 32-bit number. Namespace: Tc3_Mms [} 98] Library: Tc3_Mms (Tc3_Mms.compiled-library) Syntax ALIAS T_Mms Integer32 : DINT(-2147483648..2147483647) 6.6.168 T_Mms String MMS type: MMSString (encoded/decoded as UTF-8 during data transmission). Namespace: Tc3_Mms [} 98] Library: Tc3_Mms (Tc3_Mms.compiled-library) TF6510 Version: 1.7.1 517
## Page 518

PLC API Syntax ALIAS T_Mms String : T_Max WString 6.6.169 T_Mms Visible String MMS type: Visible String. Namespace: Tc3_Mms [} 98] Library: Tc3_Mms (Tc3_Mms.compiled-library) Syntax ALIAS T_Mms Visible String : T_Max String 6.6.170 T_OCTET6 Octet string with a maximum length of 6 octets. Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) Syntax ALIAS T_OCTET6 : ARRAY[0..5] OF BYTE 6.6.171 T_OCTET8 Octet string with a maximum length of 8 octets. Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) Syntax ALIAS T_OCTET8 : ARRAY [0..7] OF BYTE 6.6.172 T_OCTET16 Octet string with a maximum length of 16 octets. Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) Syntax ALIAS T_OCTET16 : ARRAY[0..15] OF BYTE 6.6.173 T_OCTET32 Octet string with a maximum length of 32 octets. Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) Syntax ALIAS T_OCTET32 : ARRAY[0..31] OF BYTE 6.6.174 T_OCTET64 Octet string with a maximum length of 64 octets. 518 Version: 1.7.1 TF6510
## Page 519

PLC API Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) Syntax ALIAS T_OCTET64 : ARRAY[0..63] OF BYTE 6.6.175 T_UINT24 Unsigned 24-bit number. Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) Syntax ALIAS T_UINT24 : ARRAY[0..2] OF BYTE 6.6.176 T_UINT128 Unsigned 128-bit number. Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) Syntax TYPE T_UINT128 : STRUCT Lo : LWORD; Hi : LWORD; END_STRUCT END_TYPE Components Name Type Description Lo LWORD Lower bytes. Hi LWORD Upper bytes. 6.6.177 T_Utc Time UTC time information. Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) Syntax TYPE T_Utc Time : STRUCT second Since Epoch : DT; fraction Of Second : T_UINT24; quality : T_Utc Time Quality := ( Accuracy0 := 0, Accuracy1 := 0, Accuracy2 := 0, Accurac y3 := 0, Accuracy4 := 0 ); END_STRUCT END_TYPE TF6510 Version: 1.7.1 519
## Page 520

PLC API Components Name Type Description second Since Epoch DT Number of whole seconds since January 1, 1970. fraction Of Second T_UINT24 [} 519] Seconds fraction encoded as 24-bit number. Coding: Bit 0 := 0.5s Bit 1 := 0.25s Bit 2 := 0.125s etc. The max. resolution is ~60 microseconds. quality T_Utc Time Quality Additional information about the quality and accuracy of the time information. [} 520] 6.6.178 T_Utc Time Quality Information about the quality and accuracy of the UTC time information. Namespace: Tc3_Collections [} 97] Library: Tc3_Collections (Tc3_Collections.compiled-library) Syntax TYPE T_Utc Time Quality : STRUCT Leap Seconds Known : BIT; Clock Failure : BIT; Clock Not Synchronized : BIT; Accuracy0 : BIT; Accuracy1 : BIT; Accuracy2 : BIT; Accuracy3 : BIT; Accuracy4 : BIT; END_STRUCT END_TYPE Components Name Type Description Leap Seconds Known BIT Quality of the leap seconds: FALSE := unknown, TRUE := known. Clock Failure BIT Quality of the timer: FALSE := good, TRUE := faulty. Clock Not Synchronized BIT Quality of the time synchronization: FALSE := synchronous, TRUE := not synchronous. Accuracy0 BIT Accuracy of the seconds fraction. This value determines Accuracy1 BIT the maximum number of significant bits of the T_Utc Time Accuracy2 BIT [} 519].fraction Of Second member. Accuracy3 BIT Accuracy4 BIT 6.6.179 U_Acsi Analogue Ctl Val Analog value as UNION type (integer or floating point number). Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax TYPE U_Acsi Analogue Ctl Val : UNION i : DINT; 520 Version: 1.7.1 TF6510
## Page 521

PLC API f : REAL; END_UNION END_TYPE Components Name Type Description i DINT Analog value as integer f REAL Analog value as floating point number 6.6.180 U_Acsi Ctl Val General control value for different data classes (CDC) used for the switch control. Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Syntax TYPE U_Acsi Ctl Val : UNION SPC : BOOL; DPC : BOOL; INC : DINT; ENC : U_Acsi Enumerated Ctl Val; BSC : E_Acsi Tcmd; ISC : SINT(-64..63); APC : U_Acsi Analogue Ctl Val; BAC : E_Acsi Tcmd; END_UNION END_TYPE Components Name Type Description SPC BOOL Control value for single command (controllable single point): FALSE := Off TRUE := On DPC BOOL Control value for double command (controllable double point): FALSE := Off TRUE := On INC DINT Control value for a setpoint (controllable integer status). ENC U_Acsi Enumerated Control value for a setpoint (Controllable Enumerated Status). Ctl Val [} 521] BSC E_Acsi Tcmd Control value for a regulating step command (Binary Controlled Step Position Information). [} 476] ISC SINT(-64..63) Control value for regulating step command (integer controlled step position information). APC U_Acsi Analogue Ct Control value for an analog setpoint (Controllable Analog Process Value). l Val [} 520] BAC E_Acsi Tcmd Control value for an analog setpoint (Binary Controlled Analog Process Value). [} 476] 6.6.181 U_Acsi Enumerated Ctl Val Control value for controllable enumerated status (ENC). Namespace: Tc3_Acsi [} 97] Library: Tc3_Acsi (Tc3_Acsi.compiled-library) TF6510 Version: 1.7.1 521
## Page 522

PLC API Syntax TYPE U_Acsi Enumerated Ctl Val : UNION i Any : SINT; Mode : E_Acsi Mod; Pmp Ctl Gen : E_Acsi Pmp Ctl Gen; Pmp Ctl : E_Acsi Pmp Ctl; Fan Ctl Gen : E_Acsi Fan Ctl Gen; Fan Ctl : E_Acsi Fan Ctl; Op Mod Syn : E_Acsi Op Mod Syn; END_UNION END_TYPE Components Name Type Description i Any SINT Control value as a generic 8-bit integer. Mode E_Acsi Mod [} 454] Control value for mode. Pmp Ctl Gen E_Acsi Pmp Ctl Gen Generic control value for pump control. [} 462] Pmp Ctl E_Acsi Pmp Ctl [} 461] Control value for pump control. Fan Ctl Gen E_Acsi Fan Ctl Gen Generic control value for fan control. [} 448] Fan Ctl E_Acsi Fan Ctl [} 447] Control value for fan control. Op Mod Syn E_Acsi Op Mod Syn Control value for the operation mode. [} 457] 6.7 Parameter lists 6.7.1 Param_Acsi Namespace: Tc3_Acsi [} 97] Type: Parameter list Library: Tc3_Acsi (Tc3_Acsi.compiled-library) 522 Version: 1.7.1 TF6510
## Page 523

PLC API Parameter TF6510 Version: 1.7.1 523
## Page 524

PLC API Name Type Value Description c Max Length Of Obje UDINT 64 Maximum length of the object name string. ct Name c Max Length Of Obje UDINT 255 Maximum length of the reference string. ct Reference c Max Length Of Vis S UDINT 129 Maximum length of the "Vis Str129" data type. tring129 c Max Length Of Clas UDINT 20 Maximum name length of the logical node or s Name CDC. c Default_Time Sta T_Utc Time second Since Epoch:= Default initial value for all "Time Stamp" DA mp DT#1970-01-01-00:0 instances. 0:00, fraction Of Second:=[0 ,0,0], quality:=(Leap Secon ds Known:=0, Clock Failure:=0, Clock Not Synchroniz ed:=0, Accuracy0:=0, Accuracy1:=0, Accuracy2:=0, Accuracy3:=0, Accuracy4:=0) c Default_Entry Tim DATE D#1984-01-01 Default initial value for all "Entry Time.day" data e_D element instances. c Default_Entry Tim TOD TOD#0:0:0 Default initial value for all "Entry Time. Time Of Day" e_Time Of Day data element instances. c Default_Entry Tim T_Binary Time time Of Day:=c Default Default initial value for all "Entry Time" DA e _Entry Time_Time Of instances. Day, day:=0 c Default_Currency STRING(3) '' Default initial value for all "Currency" DA instances. c Default_Entry ID T_OCTET8 [8(0)] Default initial value for all "Entry ID" DA instances. c Default_Originator ST_Acsi Origin or Cat:=E_Acsi Or Cat Default initial value for all "Originator" DA ator egory. Not Supported, instances. or Ident:=[64(0)] c Default_Quality ST_Acsi Qualit Validity0:=0, Default initial value for all "Quality" DA instances. y Validity1:=0, Overflow:=0, Out Of Range:=0, Bad Reference:=0, Oscillatory:=0, Failure:=0, Old Data:=0, Inconsistent:=0, Inaccurate:=0, Source:=0, Test:=0, Operator Blocked:=0 c Default_Dbpos E_Acsi Dbpos E_Acsi Dbpos. Interm Default initial value for all "Dbpos" DA instances. ediate c Default_Tcmd E_Acsi Tcmd E_Acsi Tcmd. Stop Default initial value for all "Tcmd" DA instances. 524 Version: 1.7.1 TF6510
## Page 525

PLC API Name Type Value Description c Default_Br CB_Op ST_Acsi Optio Sequence Number:= Default initial value for all BRCB "Optional Fields" t Flds nal Fields TRUE, DA instances. Report Time Stamp:= TRUE, Reason For Inclusion: =TRUE, Data Set Name:=TRU E, Data Reference:=FAL SE, Buffer Overflow:=TR UE, Entry ID:=TRUE, Conf Revision:=TRU E, Segmentation:=FAL SE c Default_Br CB_Trg ST_Acsi Trigg Data Change:=FALS Default initial value for all BRCB Ops er Conditions E, "Trigger Conditions" DA instances. Quality Change:=FAL SE, Data Update:=FALSE , Integrity:=FALSE, General Interrogation :=TRUE c Default_Br CB_Ti T_Binary Time time Of Day:=TOD#0: Default initial value for all BRCB "Time Of Entry" me Of Entry 0:0, day:=0 DA instances. c Default_Ur CB_Op ST_Acsi Optio Sequence Number:= Default initial value for all URCB "Option Fields" t Flds nal Fields TRUE, DA instances. Report Time Stamp:= TRUE, Reason For Inclusion: =TRUE, Data Set Name:=TRU E, Data Reference:=FAL SE, Buffer Overflow:=FAL SE, Entry ID:=FALSE, Conf Revision:=TRU E, Segmentation:=FAL SE c Default_Ur CB_Tr ST_Acsi Trigg Data Change:=FALS Default initial value for all URCB g Ops er Conditions E, "Trigger Conditions" DA instances. Quality Change:=FAL SE, Data Update:=FALSE , Integrity:=FALSE, General Interrogation :=TRUE c Default_Go CB_Mi UDINT(1..16# 50 Default GOCB Delay time for sending the n Time 7FFFFFFF) repetitions in milliseconds. c Default_Go CB_M UDINT(1..16# 5000 Default GOCB monitoring time in milliseconds. ax Time 7FFFFFFF) c Default_Go CB_M BYTE(1.. BYT 2 Default initial value for GOOSE publisher ultiplier E#16#FF) transmission repeat multiplier. c Default_Go CB_S DWORD(0..16 0 Default GOOSE header Reserved1 and ecurity #0FFFFFFF) Reserved2 28 security bits. TF6510 Version: 1.7.1 525
## Page 526

PLC API Name Type Value Description c Default_LCB_Old T_Binary Time time Of Day:=TOD#0: Default initial value for all LCB "Old Entr Tm". Entr Tm 0:0, day:=0 c Default_LCB_Ne T_Binary Time time Of Day:=TOD#0: Default initial value for all LCB "New Entr Tm". w Entr Tm 0:0, day:=0 c Default_LCB_Opt ST_Acsi Log O Reason For Inclusion: Default initial value for all LCB "Option Fields" DA Flds ptional Fields =TRUE instances. c Default_LCB_Trg ST_Acsi Trigg Data Change:=FALS Default initial value for all LCB "Trigger Conditions" Ops er Conditions E, DA instances. Quality Change:=FAL SE, Data Update:=FALSE , Integrity:=FALSE, General Interrogation :=TRUE c Default_Msv CB_ ST_Acsi Sv Op No bit set. Default initial value for all MSVCB "Option Fields" Opt Flds tional Fields DA instances. c Default_Usv CB_O ST_Acsi Sv Op No bit set. Default initial value for all USVCB "Option Fields" pt Flds tional Fields DA instances. c Default_Per E_Acsi Per E_Acsi Per. Hourly Default initial value for all "per Rs" or "chr Per Rs" DA instances. c Default_Acs E_Acsi Acs E_Acsi Acs. Low Default initial value for all "spt Acs" DA instances. c Presence_Analog E_Acsi Analog E_Acsi Analogue Valu Default presence of the "Analogue Value" data ue Value ue Value Pres C e Pres Cond.both_CO elements: "i" and/or "f". ond _f In the status value "i" and "f" (both) are visible, in the control value only "f" is visible. c Presence_Cell_x BOOL FALSE Default presence of "Cell.x End". End c Presence_Cell_y BOOL FALSE Default presence of "Cell.y Start". Start c Presence_Cell_y BOOL FALSE Default presence of "Cell.x End". End c Presence_Point_z BOOL FALSE Default presence of "Point.z Val". Val c Presence_Range BOOL FALSE Default presence of "Range Config.lim Db". Config_lim Db c Presence_Unit_m BOOL FALSE Default presence of "Unit.multiplier". ultiplier c Presence_Val Wit BOOL FALSE Default presence of "Val With Trans.trans Ind". h Trans_trans Ind c Presence_Vector BOOL FALSE Default presence of "Vector.ang". _ang c Presence_Opera_ BOOL FALSE Default presence of Analogue Value_op "Opera.ctl Val(Analogue Value).oper Tm" er Tm c Presence_Opera_ BOOL FALSE Default presence of BOOLEAN_oper T "Opera.ctl Val(BOOLEAN).oper Tm" m c Presence_Opera_ BOOL FALSE Default presence of CODEDENUM_op "Opera.ctl Val(CODEDENUM).oper Tm" er Tm c Presence_Opera_ BOOL FALSE Default presence of ENUMERATED_op "Opera.ctl Val(ENUMERATED).oper Tm" er Tm 526 Version: 1.7.1 TF6510
## Page 527

PLC API Name Type Value Description c Presence_Opera_ BOOL FALSE Default presence of "Opera.ctl Val(INT32).oper Tm" INT32_oper Tm c Presence_Opera_ BOOL FALSE Default presence of "Opera.ctl Val(INT8).oper Tm" INT8_oper Tm c Presence_SBOw_ BOOL FALSE Default presence of Analogue Value_op "SBOw.ctl Val(Analogue Value).oper Tm" er Tm c Presence_SBOw_ BOOL FALSE Default presence of BOOLEAN_oper T "SBOw.ctl Val(BOOLEAN).oper Tm" m c Presence_SBOw_ BOOL FALSE Default presence of CODEDENUM_op "SBOw.ctl Val(CODEDENUM).oper Tm" er Tm c Presence_SBOw_ BOOL FALSE Default presence of ENUMERATED_op "SBOw.ctl Val(ENUMERATED).oper Tm" er Tm c Presence_SBOw_ BOOL FALSE Default presence of "SBOw.ctl Val(INT32).oper Tm" INT32_oper Tm c Presence_SBOw_ BOOL FALSE Default presence of "SBOw.ctl Val(INT8).oper Tm" INT8_oper Tm c Presence_Cancel BOOL FALSE Default presence of _Analogue Value_o Cancel.ctl Val(Analogue Value).oper Tm per Tm c Presence_Cancel BOOL FALSE Default presence of _BOOLEAN_oper T Cancel.ctl Val(BOOLEAN).oper Tm m c Presence_Cancel BOOL FALSE Default presence of _CODEDENUM_o "Cancel.ctl Val(CODEDENUM).oper Tm" per Tm c Presence_Cancel BOOL FALSE Default presence of _ENUMERATED_o "Cancel.ctl Val(ENUMERATED).oper Tm" per Tm c Presence_Cancel BOOL FALSE Default presence of _INT32_oper Tm "Cancel.ctl Val(INT32).oper Tm" c Presence_Cancel BOOL FALSE Default presence of Cancel.ctl Val(INT8).oper Tm _INT8_oper Tm c Presence_Br CB_ BOOL FALSE Default presence of "BRCB. Resv Tms" Resv Tms c Presence_Br CB_ BOOL FALSE Default presence of "BRCB. Owner" Owner c Presence_Ur CB_ BOOL FALSE Default presence of "URCB. Owner" Owner c Presence_LCB_O BOOL FALSE Default presence of "LCB. Opt Flds" pt Flds c Presence_LCB_B BOOL FALSE Default presence of "LCB. Buf Tm" uf Tm c Presence_Go CB_ BOOL FALSE Default presence of "GOCB. Min Time" Min Time c Presence_Go CB_ BOOL FALSE Default presence of "GOCB. Max Time" Max Time c Presence_Go CB_ BOOL FALSE Default presence of "GOCB. Fixed Offs" Fixed Offs TF6510 Version: 1.7.1 527
## Page 528

PLC API 6.7.2 Param_Gse Namespace: Tc3_Gse [} 98] Type: Parameter list Library: Tc3_Gse (Tc3_Gse.compiled-library) Parameter Name Type Value Description c Max Gse Ctx Buffer Fra UDINT(1..256) 32 Max. Number of buffered GSE telegrams (GOOSE, mes SV, GSSE) in the context buffer. c Max Gse Ctx Buffer Siz UDINT(1600..3200 32000 Max. byte size of the context buffer. This buffer is used e 00) to save the GSE telegrams (GOOSE, SV, GSSE) that were received in a task context other than the context of the IEC 61850 PLC task. GSE telegrams can be received in a different task context if several protocols use the same network adapter (e.g. GOOSE and Ether CAT Automation Protocol). The buffered GSE telegrams are always processed by the IEC 61850 PLC task. 6.7.3 Param_Sockets Namespace: Tc3_Sockets [} 98] Type: Parameter list Library: Tc3_Sockets (Tc3_Sockets.compiled-library) Parameter Name Type Value Description c Max Socket Receive B UDINT 16#20000 Max. Byte size of the receive buffer for the uffer Size client/server telegrams. c Default Receiver Throt T_Throttle Time [T#0S, T#10MS, Default times for throttling the polling cycles/ tle Times T#20MS, T#40MS, retrieval frequency of the received TCP/IP s [} 492] T#60MS, T#80MS, telegrams (client/server communication). T#100MS, T#120MS, T#140MS, T#160MS, T#180MS, T#200MS, T#250MS] 6.8 Global variables 6.8.1 TC_EVENTS constants TC_EVENTS is a global Twin CAT system variable list (GVL). Each constant in this list represents an event class that is available on a Twin CAT system. The instances of the event classes are structured data types. Their member variables are instances of individual events. The events can be used, for example, in a PLC project or in a PLC library for logging the most diverse messages. The Twin CAT system has several predefined event classes. Further event classes are brought along by the integrated PLC libraries (functions) or defined by the user in the PLC application. The Global Variable List of the event classes is automatically created and updated by the Twin CAT system. The number of available event classes can therefore vary from system to system. 528 Version: 1.7.1 TF6510
## Page 529

PLC API Namespace: Twin CAT Type System [} 97]. TC_EVENTS Type: Global Variable List (GVL) Library: Not required. Twin CAT System Resource from v3.1.4022.14 Twin CAT system event classes Name Type Tc System Event Class ST_Tc System Event Class [} 550] Tc General Ads Event Class ST_Tc General Ads Event Class [} 533] Tc Router Event Class ST_Tc Router Event Class [} 544] Tc RTime Event Class ST_Tc RTime Event Class [} 545] Win32Event Class ST_Win32Event Class [} 559] TF6510 Version: 1.7.1 529
## Page 530

PLC API TF6510 event classes 530 Version: 1.7.1 TF6510
## Page 531

PLC API Name Type Tc IEC61850Event Class ST_Tc IEC61850Event Class [} 537] Tc Scsm Event Class ST_Tc Scsm Event Class [} 547] Tc Mms Abort Event Class ST_Tc Mms Abort Event Class [} 537] Tc Mms Association Event Class ST_Tc Mms Association Event Class [} 537] Tc Mms Client Event Class ST_Tc Mms Client Event Class [} 538] Tc Mms Incoming Connect Event Class ST_Tc Mms Incoming Connect Event Class [} 538] Tc Mms Incoming Disconnect Event Class ST_Tc Mms Incoming Disconnect Event Class [} 538] Tc Mms Outgoing Connect Event Class ST_Tc Mms Outgoing Connect Event Class [} 539] Tc Mms Outgoing Disconnect Event Class ST_Tc Mms Outgoing Disconnect Event Class [} 539] Tc Mms Receiver Event Class ST_Tc Mms Receiver Event Class [} 540] Tc Mms Sender Event Class ST_Tc Mms Sender Event Class [} 540] Tc Mms Transaction Event Class ST_Tc Mms Transaction Event Class [} 540] Tc Ulosi Abort Event Class ST_Tc Ulosi Abort Event Class [} 553] Tc Ulosi Association Event Class ST_Tc Ulosi Association Event Class [} 554] Tc Ulosi Client Event Class ST_Tc Ulosi Client Event Class [} 554] Tc Ulosi Incoming Connect Event Class ST_Tc Ulosi Incoming Connect Event Class [} 554] Tc Ulosi Incoming Disconnect Event Class ST_Tc Ulosi Incoming Disconnect Event Class [} 555] Tc Ulosi Outgoing Connect Event Class ST_Tc Ulosi Outgoing Connect Event Class [} 614] Tc Ulosi Outgoing Disconnect Event Class ST_Tc Ulosi Outgoing Disconnect Event Class [} 555] Tc Ulosi Receiver Event Class ST_Tc Ulosi Receiver Event Class [} 555] Tc Ulosi Sender Event Class ST_Tc Ulosi Sender Event Class [} 556] Tc Ulosi Transaction Event Class ST_Tc Ulosi Transaction Event Class [} 556] Tc Ulosi Server Event Class ST_Tc Ulosi Server Event Class [} 556] Tc Ulosi Connection Event Class ST_Tc Ulosi Connection Event Class [} 557] Tc Ulosi Acse Abrt Diagnostic Event Class ST_Tc Ulosi Acse Abrt Diagnostic Event Class [} 557] Tc Ulosi Acse Aare Diagnostic Event Class ST_Tc Ulosi Acse Aare Diagnostic Event Class [} 557] Tc Ulosi Spdu Reason Code Event Class ST_Tc Ulosi Spdu Reason Code Event Class [} 558] Tc Rfc1006Abort Event Class ST_Tc Rfc1006Abort Event Class [} 540] Tc Rfc1006Association Event Class ST_Tc Rfc1006Association Event Class [} 541] Tc Rfc1006Client Event Class ST_Tc Rfc1006Client Event Class [} 541] Tc Rfc1006Incoming Connect Event Class ST_Tc Rfc1006Incoming Connect Event Class [} 541] Tc Rfc1006Incoming Disconnect Event Class ST_Tc Rfc1006Incoming Disconnect Event Class [} 542] Tc Rfc1006Outgoing Connect Event Class ST_Tc Rfc1006Outgoing Connect Event Class [} 542] Tc Rfc1006Outgoing Disconnect Event Class ST_Tc Rfc1006Outgoing Disconnect Event Class [} 542] Tc Rfc1006Receiver Event Class ST_Tc Rfc1006Receiver Event Class [} 543] Tc Rfc1006Sender Event Class ST_Tc Rfc1006Sender Event Class [} 543] Tc Rfc1006Transaction Event Class ST_Tc Rfc1006Transaction Event Class [} 543] Tc Tpkt Abort Event Class ST_Tc Tpkt Abort Event Class [} 551] Tc Tpkt Association Event Class ST_Tc Tpkt Association Event Class [} 552] Tc Tpkt Pdu Event Class ST_Tc Tpkt Pdu Event Class [} 552] TF6510 Version: 1.7.1 531
## Page 532

PLC API Name Type Tc Tpkt Receiver Event Class ST_Tc Tpkt Receiver Event Class [} 552] Tc Tpkt Sender Event Class ST_Tc Tpkt Sender Event Class [} 553] Tc Tpkt Transaction Event Class ST_Tc Tpkt Transaction Event Class [} 553] Tc Sockets Abort Event Class ST_Tc Sockets Abort Event Class [} 547] Tc Sockets Association Event Class ST_Tc Sockets Association Event Class [} 547] Tc Sockets Client Event Class ST_Tc Sockets Client Event Class [} 548] Tc Sockets Incoming Connect Event Class ST_Tc Sockets Incoming Connect Event Class [} 548] Tc Sockets Incoming Disconnect Event Class ST_Tc Sockets Incoming Disconnect Event Class [} 548] Tc Sockets Outgoing Connect Event Class ST_Tc Sockets Outgoing Connect Event Class [} 548] Tc Sockets Outgoing Disconnect Event Class ST_Tc Sockets Outgoing Disconnect Event Class [} 549] Tc Sockets Receiver Event Class ST_Tc Sockets Receiver Event Class [} 549] Tc Sockets Sender Event Class ST_Tc Sockets Sender Event Class [} 549] Tc Sockets Transaction Event Class ST_Tc Sockets Transaction Event Class [} 550] Tc Sockets WIn32Srv Event Class ST_Tc Sockets Win32Srv Event Class [} 550] Tc Acsi Event Class ST_Tc Acsi Event Class [} 532] 6.8.1.1 ST_Tc Acsi Event Class The table below contains a list of the events of the ACSI event class. Namespace: TC_EVENTS [} 528]. Tc Acsi Event Class Type: Global Variable Library: Tc3_Acsi (Tc3_Acsi.compiled-library) TYPE ST_Tc Acsi Event Class: STRUCT No Error : Tc Event Entry; Instance Not Available : Tc Event Entry; Instance In Use : Tc Event Entry; Access Violation : Tc Event Entry; Access Not Allowed In Current State : Tc Event Entry; Parameter Value Inappropriate : Tc Event Entry; Parameter Value Inconsistent : Tc Event Entry; Class Not Supported : Tc Event Entry; Instance Locked By Other Client : Tc Event Entry; Control Must Be Selected : Tc Event Entry; Type Conflict : Tc Event Entry; Failed Due To Communications Constraint : Tc Event Entry; Failed Due To Server Constraint : Tc Event Entry; END_STRUCT END_TYPE 532 Version: 1.7.1 TF6510
## Page 533

PLC API Events Name ID Severity Description No Error 0 Verbose Instance Not Available 1 Error Instance In Use 2 Error Access Violation 3 Error Access Not Allowed In Curre 4 Error nt State Parameter Value Inappropri 5 Error ate Parameter Value Inconsiste 6 Error nt Class Not Supported 7 Error Instance Locked By Other Cl 8 Error ient Control Must Be Selected 9 Error Type Conflict 10 Error Failed Due To Communicati 11 Error ons Constraint Failed Due To Server Constr 12 Error aint 6.8.1.2 ST_Tc General Ads Event Class The table below contains a list of the events of the Twin CAT ADS event class. Namespace: TC_EVENTS [} 528]. Tc General Ads Event Class Type: Global Variable Library: Not required, Twin CAT System Resource from v3.1.4022.14 TF6510 Version: 1.7.1 533
## Page 534

PLC API Events 534 Version: 1.7.1 TF6510
## Page 535

PLC API Name ID Severity Description Hex Dec Service Not Supporte 0x701 1793 Error Service is not d supported by the server Invalid Index Group 0x702 1794 Error Invalid index group Invalid Index Offset 0x703 1795 Error Invalid index offset Invalid Access 0x704 1796 Error Reading and writing not permitted. Invalid Size 0x705 1797 Error Parameter size not correct Invalid Data 0x706 1798 Error Invalid parameter values Not Ready 0x707 1799 Error Device is not ready to operate Busy 0x708 1800 Error Device is busy Invalid Context 0x709 1801 Error Invalid context (must be in Windows) No Memory 0x70A 1802 Error Insufficient memory Invalid Param 0x70B 1803 Error Invalid parameter values Not Found 0x70C 1804 Error Not found (files, ...) Syntax 0x70D 1805 Error Syntax error in file or command Incompatible 0x70E 1806 Error Objects do not match Already Exists 0x70F 1807 Error Object already exists Symbol Not Found 0x710 1808 Error Symbol not found Symbol Version Invali 0x711 1809 Error Symbol version d invalid Invalid State 0x712 1810 Error Device in invalid state Trans Mode Not Supp 0x713 1811 Error Ads Trans Mode not orted supported Notification Handle In 0x714 1812 Error Notification handle is valid invalid Client Unknown 0x715 1813 Error Notification client not registered No More Handles 0x716 1814 Error No further notification handle Invalid Watch Size 0x717 1815 Error Notification size too large Not Init 0x718 1816 Error Device not initialized Device Timeout 0x719 1817 Error Device has a timeout No Interface 0x71A 1818 Error Interface query failed Invalid Interface 0x71B 1819 Error Wrong interface requested Invalid Class ID 0x71C 1820 Error Class ID is invalid Invalid Object ID 0x71D 1821 Error Object ID is invalid Pending 0x71E 1822 Error Requirement still outstanding Aborted 0x71F 1823 Error Request is aborted TF6510 Version: 1.7.1 535
## Page 536

PLC API Name ID Severity Description Hex Dec Signal Warning 0x720 1824 Error Signal warning Invalid Array Index 0x721 1825 Error Invalid array index Symbol Not Active 0x722 1826 Error Symbol not active Access Denied 0x723 1827 Error Access refused License Missing 0x724 1828 Error Missing license License Expired 0x725 1829 Error License expired License Exceeded 0x726 1830 Error License exceeded License Invalid 0x727 1831 Error License invalid License System ID 0x728 1832 Error System ID license invalid License No Time Limit 0x729 1833 Error License not limited in time License Future Issue 0x72A 1834 Error License problem: Time in the future License Time Too Lon 0x72B 1835 Error License period too g long Exception 0x72c 1836 Error Exception at system startup License Duplicated 0x72D 1837 Error License file read twice 0x72E 1838 Error Invalid signature 0x72F 1839 Error Public certificate 0x740 1856 Error Client error Invalid Service Param 0x741 1857 Error Service contains an invalid parameter List Empty 0x742 1858 Error Polling list is empty Variable Con Already I 0x743 1859 Error Var connection n Use already in use Invoke IDAlready In U 0x744 1860 Error The called ID is se already in use Timeout Elapsed 0x745 1861 Error Timeout has occurred Win32Error 0x746 1862 Error Error in Win32 subsystem Timeout Invalid 0x747 1863 Error Invalid client timeout value Port Not Open 0x748 1864 Error ADS port not opened No AMSAddr 0x749 1865 Error Sync Internal Error 0x750 1872 Error Internal error in Ads syn Add Hash 0x751 1873 Error Hash table overflow Remove Hash 0x752 1874 Error Key not found in the hash No More Symbols 0x753 1875 Error No further symbols in the cache Sync Res Invalid 0x754 1876 Error Invalid response received Sync Port Locked 0x755 1877 Error Sync Port is disabled 536 Version: 1.7.1 TF6510
## Page 537

PLC API 6.8.1.3 ST_Tc IEC61850Event Class The table below contains a list of the events of the IEC 61850 event class. Namespace: TC_EVENTS [} 528]. Tc IEC61850Event Class Type: Global Variable Library: Tc3_iec61850 (Tc3_iec61850.compiled-library) Events Name ID Severity Description Invalid Parameter Value 1 Error Invalid Object State 2 Error Invalid Mms Object 3 Error Invalid Association Object 4 Error Object Not Found 5 Error Invalid IEDObject 6 Error 6.8.1.4 ST_Tc Mms Abort Event Class The table below contains a list of the events of the MMS event class for the connection termination. Namespace: TC_EVENTS [} 528]. Tc Mms Abort Event Class Type: Global Variable Library: Tc3_Mms (Tc3_Mms.compiled-library) Events Name ID Severity Description Invalid Association Object 1 Error Invalid Ulosi Object 2 Error 6.8.1.5 ST_Tc Mms Association Event Class The table below contains a list of the events of the MMS event class for the management of a connection (Association). Namespace: TC_EVENTS [} 528]. Tc Mms Association Event Class Type: Global Variable Library: Tc3_Mms (Tc3_Mms.compiled-library) Events Name ID Severity Description State Transition Error 1 Error State Validation Error 2 Error Decoder Failure 3 Error Encoder Failure 4 Error Invalid Association Object 5 Error Invalid Pdu Object 6 Error TF6510 Version: 1.7.1 537
## Page 538

PLC API 6.8.1.6 ST_Tc Mms Client Event Class The table below contains a list of the events of the MMS event class for the management of a client instance. Namespace: TC_EVENTS [} 528]. Tc Mms Client Event Class Type: Global Variable Library: Tc3_Mms (Tc3_Mms.compiled-library) Events Name ID Severity Description Invalid Association Object 1 Error 6.8.1.7 ST_Tc Mms Incoming Connect Event Class The table below contains a list of the events of the MMS event class for the incoming connection. Namespace: TC_EVENTS [} 528]. Tc Mms Incoming Connect Event Class Type: Global Variable Library: Tc3_Mms (Tc3_Mms.compiled-library) Events Name ID Severity Description Invalid Primitive State 1 Error Invalid Association Object 2 Error Invalid Connection Object 3 Error Invalid Settings Object 4 Error Invalid Ulosi Object 5 Error Invalid Server Object 6 Error Initiate Ind Timeout Error 7 Error Initiate Rsp Timeout Error 8 Error Pdu Creation Error 9 Error 6.8.1.8 ST_Tc Mms Incoming Disconnect Event Class The table below contains a list of the events of the MMS event class for the incoming disconnection. Namespace: TC_EVENTS [} 528]. Tc Mms Incoming Disconnect Event Class Type: Global Variable Library: Tc3_Mms (Tc3_Mms.compiled-library) 538 Version: 1.7.1 TF6510
## Page 539

PLC API Events Name ID Severity Description Invalid Primitive State 1 Error Invalid Association Object 2 Error Invalid Connection Object 3 Error Invalid Ulosi Object 4 Error Invalid Client Object 5 Error Conclude Rsp Timeout Erro 6 Error r Pdu Creation Error 7 Error 6.8.1.9 ST_Tc Mms Outgoing Connect Event Class The table below contains a list of the events of the MMS event class for the outgoing connection. Namespace: TC_EVENTS [} 528]. Tc Mms Outgoing Connect Event Class Type: Global Variable Library: Tc3_Mms (Tc3_Mms.compiled-library) Events Name ID Severity Description Invalid Primitive State 1 Error Invalid Association Object 2 Error Invalid Client Object 3 Error Invalid Settings Object 4 Error Invalid Ulosi Object 5 Error Initiate Cnf Timeout Error 6 Error Pdu Creation Error 7 Error 6.8.1.10 ST_Tc Mms Outgoing Disconnect Event Class The table below contains a list of the events of the MMS event class for the outgoing disconnection. Namespace: TC_EVENTS [} 528]. Tc Mms Outgoing Disconnect Event Class Type: Global Variable Library: Tc3_Mms (Tc3_Mms.compiled-library) Events Name ID Severity Description Invalid Primitive State 1 Error Invalid Association Object 2 Error Invalid Connection Object 3 Error Invalid Settings Object 4 Error Invalid Ulosi Object 5 Error Invalid Client Object 6 Error Conclude Cnf Timeout Error 7 Error Pdu Creation Error 8 Error TF6510 Version: 1.7.1 539
## Page 540

PLC API 6.8.1.11 ST_Tc Mms Receiver Event Class The table below contains a list of the events of the MMS event class for the reception of the data. Namespace: TC_EVENTS [} 528]. Tc Mms Receiver Event Class Type: Global Variable Library: Tc3_Mms (Tc3_Mms.compiled-library) Events Name ID Severity Description Invalid Association Object 1 Error Invalid Settings Object 2 Error Invalid Ulosi Object 3 Error Invalid Primitive State 4 Error Response Timeout Error 5 Error Decoder Failure 6 Error 6.8.1.12 ST_Tc Mms Sender Event Class The table below contains a list of the events of the MMS event class for the transmission of the data. Namespace: TC_EVENTS [} 528]. Tc Mms Sender Event Class Type: Global Variable Library: Tc3_Mms (Tc3_Mms.compiled-library) Events Name ID Severity Description Invalid Primitive State 1 Error 6.8.1.13 ST_Tc Mms Transaction Event Class The table below contains a list of the events of the MMS event class for the management of the data transactions. Namespace: TC_EVENTS [} 528]. Tc Mms Transaction Event Class Type: Global Variable Library: Tc3_Mms (Tc3_Mms.compiled-library) Events Name ID Severity Description Invalid Association Object 1 Error Invalid Settings Object 2 Error Invalid Ulosi Object 3 Error Encoder Failure 4 Error Transaction Timeout Error 5 Error 6.8.1.14 ST_Tc Rfc1006Abort Event Class The table below contains a list of the events of the RFC 1006 event class for the connection termination. 540 Version: 1.7.1 TF6510
## Page 541

PLC API Namespace: TC_EVENTS [} 528]. Tc Rfc1006Abort Event Class Type: Global Variable Library: Tc3_Rfc1006 (Tc3_Rfc1006.compiled-library) Events Name ID Severity Description Invalid Association Object 1 Error Invalid Tpkt Object 2 Error 6.8.1.15 ST_Tc Rfc1006Association Event Class The table below contains a list of the events of the RFC 1006 event class for the management of a connection (Association). Namespace: TC_EVENTS [} 528]. Tc Rfc1006Association Event Class Type: Global Variable Library: Tc3_Rfc1006 (Tc3_Rfc1006.compiled-library) Events Name ID Severity Description State Transition Error 1 Error State Validation Error 2 Error 6.8.1.16 ST_Tc Rfc1006Client Event Class The table below contains a list of the events of the RFC 1006 event class for the management of a client instance. Namespace: TC_EVENTS [} 528]. Tc Rfc1006Client Event Class Type: Global Variable Library: Tc3_Rfc1006 (Tc3_Rfc1006.compiled-library) Events Name ID Severity Description Invalid Association Object 1 Error 6.8.1.17 ST_Tc Rfc1006Incoming Connect Event Class The table below contains a list of the events of the RFC 1006 event class for the incoming connection. Namespace: TC_EVENTS [} 528]. Tc Rfc1006Incoming Connect Event Class Type: Global Variable Library: Tc3_Rfc1006 (Tc3_Rfc1006.compiled-library) TF6510 Version: 1.7.1 541
## Page 542

PLC API Events Name ID Severity Description Invalid Primitive State 1 Error Invalid Association Object 2 Error Invalid Settings Object 3 Error Invalid Tpkt Object 4 Error Invalid Connection Object 5 Error Invalid Server Object 6 Error CRTimeout Error 7 Error CCTimeout Error 8 Error 6.8.1.18 ST_Tc Rfc1006Incoming Disconnect Event Class The table below contains a list of the events of the RFC 1006 event class for the incoming disconnection. Namespace: TC_EVENTS [} 528]. Tc Rfc1006Incoming Disconnect Event Class Type: Global Variable Library: Tc3_Rfc1006 (Tc3_Rfc1006.compiled-library) Events Name ID Severity Description Invalid Primitive State 1 Error Invalid Association Object 2 Error Invalid Settings Object 3 Error Invalid Tpkt Object 4 Error DRTimeout Error 5 Error 6.8.1.19 ST_Tc Rfc1006Outgoing Connect Event Class The table below contains a list of the events of the RFC 1006 event class for the outgoing connection. Namespace: TC_EVENTS [} 528]. Tc Rfc1006Outgoing Connect Event Class Type: Global Variable Library: Tc3_Rfc1006 (Tc3_Rfc1006.compiled-library) Events Name ID Severity Description Invalid Primitive State 1 Error Invalid Association Object 2 Error Invalid Settings Object 3 Error Invalid Tpkt Object 4 Error Invalid Client Object 5 Error CCTimeout Error 6 Error 6.8.1.20 ST_Tc Rfc1006Outgoing Disconnect Event Class The table below contains a list of the events of the RFC 1006 event class for the outgoing disconnection. Namespace: TC_EVENTS [} 528]. Tc Rfc1006Outgoing Disconnect Event Class 542 Version: 1.7.1 TF6510
## Page 543

PLC API Type: Global Variable Library: Tc3_Rfc1006 (Tc3_Rfc1006.compiled-library) Events Name ID Severity Description Invalid Primitive State 1 Error Invalid Association Object 2 Error Invalid Tpkt Object 3 Error 6.8.1.21 ST_Tc Rfc1006Receiver Event Class The table below contains a list of the events of the RFC 1006 event class for the reception of the data. Namespace: TC_EVENTS [} 528]. Tc Rfc1006Receiver Event Class Type: Global Variable Library: Tc3_Rfc1006 (Tc3_Rfc1006.compiled-library) Events Name ID Severity Description Invalid Association Object 1 Error Invalid Settings Object 2 Error Invalid Tpkt Object 3 Error Invalid Primitive State 4 Error Data Rsp Timeout Error 5 Error Decoder Failure 6 Error 6.8.1.22 ST_Tc Rfc1006Sender Event Class The table below contains a list of the events of the RFC 1006 event class for the transmission of the data. Namespace: TC_EVENTS [} 528]. Tc Rfc1006Sender Event Class Type: Global Variable Library: Tc3_Rfc1006 (Tc3_Rfc1006.compiled-library) Events Name ID Severity Description Invalid Primitive State 1 Error Data Cnf Timeout Error 2 Error 6.8.1.23 ST_Tc Rfc1006Transaction Event Class The table below contains a list of the events of the RFC 1006 event class for the management of the data transactions. Namespace: TC_EVENTS [} 528]. Tc Rfc1006Transaction Event Class Type: Global Variable Library: Tc3_Rfc1006 (Tc3_Rfc1006.compiled-library) TF6510 Version: 1.7.1 543
## Page 544

PLC API Events Name ID Severity Description Invalid Association Object 1 Error Invalid Tpkt Object 2 Error Encoder Failure 3 Error 6.8.1.24 ST_Tc Router Event Class The table below contains a list of the events of the Twin CAT Router event class. Namespace: TC_EVENTS [} 528]. Tc Router Event Class Type: Global Variable Library: Not required, Twin CAT System Resource from v3.1.4022.14 Events Name ID Severity Description Hex Dec No Locked Memory 0x500 1280 Error Locked memory cannot be allocated. Resize Memory 0x501 1281 Error The size of the router memory cannot be changed. Mailbox Full 0x502 1282 Error The mailbox has reached the maximum number of possible messages. The currently sent message was rejected. Debug Box Full 0x503 1283 Error The mailbox has reached the maximum number of possible messages. The sent message will not be displayed in the ADS monitor. Unknown Port Type 0x504 1284 Error The port type is unknown. Not Initialized 0x505 1285 Error The router is not initialized. Port Already In Use 0x506 1286 Error The desired port number has already been issued. Not Registered 0x507 1287 Error The port is not registered. No More Queues 0x508 1288 Error The maximum number of ports has been reached. Invalid Port 0x509 1289 Error The port is invalid. Not Activated 0x50A 1290 Error The router is not active. Fragment Box Full 0x50B 1291 Error Fragment Timeout 0x50C 1292 Error To Be Removed 0x50D 1293 Error 544 Version: 1.7.1 TF6510
## Page 545

PLC API 6.8.1.25 ST_Tc RTime Event Class The table below contains a list of the events of the Twin CAT RTime event class. Namespace: TC_EVENTS [} 528]. Tc RTime Event Class Type: Global Variable Library: Not required, Twin CAT System Resource from v3.1.4022.14 TF6510 Version: 1.7.1 545
## Page 546

PLC API Events Name ID Severity Description Hex Dec Internal Error 0x1000 4096 Error Internal error in the Twin CAT real-time system. Bad Timer Periods 0x1001 4097 Error Timer value is not valid. Invalid Task Ptr 0x1002 4098 Error Task pointer has the invalid value 0 (zero). Invalid Stack Ptr 0x1003 4099 Error Task stack pointer has the invalid value 0. Prio Exists 0x1004 4100 Error The request task priority is already assigned. No More TCB 0x1005 4101 Error No free TCB (Task Control Block) available. The maximum number of TCBs is 64. No More Semas 0x1006 4102 Error No free semaphores available. The maximum number of semaphores is 64. No More Queues 0x1007 4103 Error No free space available in the queue. The maximum number of positions in the queue is 64. Ext IRQAlready Def 0x100D 4109 Error An external synchronization interrupt is already applied. Ext IRQNot Def 0x100E 4110 Error No external synchronization interrupt applied. Ext IRQInstall Failed 0x100F 4111 Error Application of the external synchronization interrupt failed IRQNot Less Or Equal 0x1010 4112 Error Call of a service function in the wrong context VMXNot Supported 0x1017 4119 Error Intel VT-x extension is not supported. VMXDisabled 0x1018 4120 Error Intel VT-x extension is not enabled in the BIOS. VMXControls Missing 0x1019 4121 Error Missing function in Intel VT-x extension. VMXEnable Fails 0x101A 4122 Error Activation of Intel VT-x fails. 546 Version: 1.7.1 TF6510
## Page 547

PLC API 6.8.1.26 ST_Tc Scsm Event Class The table below contains a list of the events of the SCSM event class. Namespace: TC_EVENTS [} 528]. Tc Scsm Event Class Type: Global Variable Library: Tc3_iec61850_8_1 (Tc3_iec61850_8_1.compiled-library) Events Name ID Severity Description Confirmed Error Pdu Receiv 1 Error ed Reject Pdu Received 2 Error Req And Cnf Invoke IDiffers 3 Error Confirmation Timeout 4 Error Invalid Object Reference 5 Error Invalid Association Object 6 Error Invalid Settings Object 7 Error Invalid Mms Object 8 Error Invalid Client Object 9 Error Invalid Server Object 10 Error Invalid Connection Object 11 Error Invalid IEDObject 12 Error 6.8.1.27 ST_Tc Sockets Abort Event Class The table below contains a list of the events of the Socket event class for the connection termination. Namespace: TC_EVENTS [} 528]. Tc Sockets Abort Event Class Type: Global Variable Library: Tc3_Sockets (Tc3_Sockets.compiled-library) Events Name ID Severity Description Invalid Association Object 1 Error Invalid Tcp Object 2 Error 6.8.1.28 ST_Tc Sockets Association Event Class The table below contains a list of the events of the Socket event class for the management of a connection association Namespace: TC_EVENTS [} 528]. Tc Sockets Association Event Class Type: Global Variable Library: Tc3_Sockets (Tc3_Sockets.compiled-library) Events Name ID Severity Description Invalid State Transition 1 Error Invalid Environment State 2 Error TF6510 Version: 1.7.1 547
## Page 548

PLC API 6.8.1.29 ST_Tc Sockets Client Event Class The table below contains a list of the events of the Socket event class for the management of a client instance. Namespace: TC_EVENTS [} 528]. Tc Sockets Client Event Class Type: Global Variable Library: Tc3_Sockets (Tc3_Sockets.compiled-library) Events Name ID Severity Description Invalid Association Object 1 Error 6.8.1.30 ST_Tc Sockets Incoming Connect Event Class The table below contains a list of the events of the Socket event class for the incoming connection. Namespace: TC_EVENTS [} 528]. Tc Sockets Incoming Connect Event Class Type: Global Variable Library: Tc3_Sockets (Tc3_Sockets.compiled-library) Events Name ID Severity Description Invalid Primitive State 1 Error Invalid Association Object 2 Error Invalid Tcp Object 3 Error Invalid Connection Object 4 Error Invalid Server Object 5 Error Invalid Settings Object 6 Error Connect Rsp Timeout Error 7 Error 6.8.1.31 ST_Tc Sockets Incoming Disconnect Event Class The table below contains a list of the events of the Socket event class for the incoming disconnection. Namespace: TC_EVENTS [} 528]. Tc Sockets Incoming Disconnect Event Class Type: Global Variable Library: Tc3_Sockets (Tc3_Sockets.compiled-library) Events Name ID Severity Description Invalid Primitive State 1 Error Invalid Association Object 2 Error Invalid Tcp Object 3 Error Disconnect Rsp Timeout Err 4 Error or 6.8.1.32 ST_Tc Sockets Outgoing Connect Event Class The table below contains a list of the events of the Socket event class for the outgoing connection. 548 Version: 1.7.1 TF6510
## Page 549

PLC API Namespace: TC_EVENTS [} 528]. Tc Sockets Outgoing Connect Event Class Type: Global Variable Library: Tc3_Sockets (Tc3_Sockets.compiled-library) Events Name ID Severity Description Invalid Primitive State 1 Error Invalid Association Object 2 Error Invalid Client Object 3 Error Invalid Settings Object 4 Error Invalid Tcp Object 5 Error 6.8.1.33 ST_Tc Sockets Outgoing Disconnect Event Class The table below contains a list of the events of the Socket event class for the outgoing disconnection. Namespace: TC_EVENTS [} 528]. Tc Sockets Outgoing Disconnect Event Class Type: Global Variable Library: Tc3_Sockets (Tc3_Sockets.compiled-library) Events Name ID Severity Description Invalid Primitive State 1 Error Invalid Association Object 2 Error Invalid Tcp Object 3 Error 6.8.1.34 ST_Tc Sockets Receiver Event Class The table below contains a list of the events of the Socket event class for the reception of the data. Namespace: TC_EVENTS [} 528]. Tc Sockets Receiver Event Class Type: Global Variable Library: Tc3_Sockets (Tc3_Sockets.compiled-library) Events Name ID Severity Description Invalid Primitive State 1 Error Invalid Association Object 2 Error Ack Timeout Error 3 Error Invalid Parameter Value 4 Error Fatal Error 5 Error Rcv Buffer Free Failure 6 Error 6.8.1.35 ST_Tc Sockets Sender Event Class The table below contains a list of the events of the Socket event class for the transmission of the data. Namespace: TC_EVENTS [} 528]. Tc Sockets Sender Event Class Type: Global Variable TF6510 Version: 1.7.1 549
## Page 550

PLC API Library: Tc3_Sockets (Tc3_Sockets.compiled-library) Events Name ID Severity Description Sender List Failure 1 Error Invalid Primitive State 2 Error Invalid Transaction Object 3 Error 6.8.1.36 ST_Tc Sockets Transaction Event Class The table below contains a list of the events of the Socket event class for the management of the data transactions. Namespace: TC_EVENTS [} 528]. Tc Sockets Transaction Event Class Type: Global Variable Library: Tc3_Sockets (Tc3_Sockets.compiled-library) Events Name ID Severity Description Invalid Association Object 1 Error Invalid Data Object 2 Error Invalid Primitive State 3 Error 6.8.1.37 ST_Tc Sockets Win32Srv Event Class The table below contains a list of the events of the TF6310 TCP/IP Server Win32 event class. Namespace: TC_EVENTS [} 528]. Tc Sockets Win32Srv Event Class Type: Global Variable Library: Tc3_Sockets (Tc3_Sockets.compiled-library) 6.8.1.38 ST_Tc System Event Class The table below contains a list of the events of the Twin CAT System event class. Namespace: TC_EVENTS [} 528]. Tc System Event Class Type: Global Variable Library: Not required, Twin CAT System Resource from v3.1.4022.14 550 Version: 1.7.1 TF6510
## Page 551

PLC API Events Name ID Severity Description Hex Dec Internal Error 0x1 1 Error Internal error No RTime 0x2 2 Error No real-time Allocation Locked Me 0x3 3 Error Allocation locked mory Error memory error Insert Mailbox Error 0x4 4 Error Mailbox full Wrong Receive HMS 0x5 5 Error Wrong HMSG G Target Port Not Found 0x6 6 Error Target port not found Target Machine Not F 0x7 7 Error Target machine not ound found Unknown Command I 0x8 8 Error Unknown command D ID Bad Task ID 0x9 9 Error Bad Task ID No IO 0x A 10 Error No IO Unknown Ads Comm 0x B 11 Error Unknown ADS and command Win32Error 0x C 12 Error Win32 error Port Not Connected 0x D 13 Error Port not closed Invalid Ads Length 0x E 14 Error Invalid ADS length Invalid Ads Net ID 0x F 15 Error Invalid AMS Net ID Low Installation Level 0x10 16 Error low installation level No Debug Available 0x11 17 Error No debugging available Port Disabled 0x12 18 Error Port disabled Port Already Connect 0x13 19 Error Port already ed connected Ads Sync Win32Error 0x14 20 Error ADS Sync Win32 error Ads Sync Timeout 0x15 21 Error ADS Sync Timeout Ads Sync Ams Error 0x16 22 Error ADS Sync AMS error Ads Sync No Index Ma 0x17 23 Error No index map exists p for ADS Sync Invalid Ads Port 0x18 24 Error Invalid ADS port No Memory 0x19 25 Error No memory TCPSend Error 0x1A 26 Error TCP send error Host Unreachable 0x1B 27 Error Host unreachable Invalid AMSFragmen 0x1C 28 Error Invalid AMS t fragment 6.8.1.39 ST_Tc Tpkt Abort Event Class The table below contains a list of the events of the TPKT event class for the connection termination. Namespace: TC_EVENTS [} 528]. Tc Tpkt Abort Event Class Type: Global Variable Library: Tc3_Tpkt (Tc3_Tpkt.compiled-library) TF6510 Version: 1.7.1 551
## Page 552

PLC API Events Name ID Severity Description Invalid Association Object 1 Error Invalid Socket Object 2 Error 6.8.1.40 ST_Tc Tpkt Association Event Class The table below contains a list of the events of the TPKT event class for the management of a connection association. Namespace: TC_EVENTS [} 528]. Tc Tpkt Association Event Class Type: Global Variable Library: Tc3_Tpkt (Tc3_Tpkt.compiled-library) Events Name ID Severity Description Invalid Environment State 1 Error 6.8.1.41 ST_Tc Tpkt Pdu Event Class The table below contains a list of the events of the TPKT event class for the processing of the PDUs. Namespace: TC_EVENTS [} 528]. Tc Tpkt Pdu Event Class Type: Global Variable Library: Tc3_Tpkt (Tc3_Tpkt.compiled-library) Events Name ID Severity Description Invalid Input Stream Object 1 Error Invalid Output Stream Objec 2 Error t Invalid Header Size 3 Error Invalid Header Version 4 Error Invalid Header Reserved 5 Error Invalid Header Length 6 Error 6.8.1.42 ST_Tc Tpkt Receiver Event Class The table below contains a list of the events of the TPKT event class for the reception of the data. Namespace: TC_EVENTS [} 528]. Tc Tpkt Receiver Event Class Type: Global Variable Library: Tc3_Tpkt (Tc3_Tpkt.compiled-library) 552 Version: 1.7.1 TF6510
## Page 553

PLC API Events Name ID Severity Description Invalid Primitive State 1 Error Invalid Association Object 2 Error Invalid Socket Object 3 Error Data Rsp Timeout Error 4 Error Data Response Abort 5 Error 6.8.1.43 ST_Tc Tpkt Sender Event Class The table below contains a list of the events of the TPKT event class for the transmission of the data. Namespace: TC_EVENTS [} 528]. Tc Tpkt Sender Event Class Type: Global Variable Library: Tc3_Tpkt (Tc3_Tpkt.compiled-library) Events Name ID Severity Description Invalid Association Object 1 Error Invalid Socket Object 2 Error Invalid Data Object 3 Error 6.8.1.44 ST_Tc Tpkt Transaction Event Class The table below contains a list of the events of the TPKT event class for the management of the data transactions. Namespace: TC_EVENTS [} 528]. Tc Tpkt Transaction Event Class Type: Global Variable Library: Tc3_Tpkt (Tc3_Tpkt.compiled-library) Events Name ID Severity Description Invalid Primitive State 1 Error Invalid Association Object 2 Error Invalid Socket Object 3 Error 6.8.1.45 ST_Tc Ulosi Abort Event Class The table below contains a list of the events of the ULOSI event class for the connection termination. Namespace: TC_EVENTS [} 528]. Tc Ulosi Abort Event Class Type: Global Variable Library: Tc3_Ulosi (Tc3_Ulosi.compiled-library) TF6510 Version: 1.7.1 553
## Page 554

PLC API Events Name ID Severity Description Invalid Association Object 1 Error Invalid association object interface (null) Invalid Rfc1006Object 2 Error Invalid RFC 1006 interface object (null) Refuse_spdu_received 128 Error Refuse-spdu received Abort_accept_spdu_received 129 Error Abort-Accept-spdu received Rejected_permanent 130 Error Associate response (AARE) result: rejected- permanent. Rejected_transient 131 Error Associate response (AARE) result: rejected- transient. 6.8.1.46 ST_Tc Ulosi Association Event Class The table below contains a list of the events of the ULOSI event class for the management of a connection association. Namespace: TC_EVENTS [} 528]. Tc Ulosi Association Event Class Type: Global Variable Library: Tc3_Ulosi (Tc3_Ulosi.compiled-library) Events Name ID Severity Description State Transition Error 1 Error Environment state transition error State Validation Error 2 Error Environment state validation error Authentication Failure 3 Error Authentication failure 6.8.1.47 ST_Tc Ulosi Client Event Class The table below contains a list of the events of the ULOSI event class for the management of a client instance. Namespace: TC_EVENTS [} 528]. Tc Ulosi Client Event Class Type: Global Variable Library: Tc3_Ulosi (Tc3_Ulosi.compiled-library) Events Name ID Severity Description Invalid Association Object 1 Error Invalid association object interface (null) 6.8.1.48 ST_Tc Ulosi Incoming Connect Event Class The table below contains a list of the events of the ULOSI event class for the incoming connection. Namespace: TC_EVENTS [} 528]. Tc Ulosi Incoming Connect Event Class Type: Global Variable Library: Tc3_Ulosi (Tc3_Ulosi.compiled-library) 554 Version: 1.7.1 TF6510
## Page 555

PLC API Events Name ID Severity Description Invalid Primitive State 1 Error Invalid primitive state Invalid Association Object 2 Error Invalid association object interface (null) Invalid Settings Object 3 Error Invalid settings object interface (null) Invalid Rfc1006Object 4 Error Invalid RFC 1006 object interface (null) Invalid Connection Object 5 Error Invalid connection object interface (null) Invalid Server Object 6 Error Invalid server object interface (null) AARQTimeout Error 7 Error Application association request (AARQ) timeout error. AARETimeout Error 8 Error Application association response (AARE) timeout error. 6.8.1.49 ST_Tc Ulosi Incoming Disconnect Event Class The table below contains a list of the events of the ULOSI event class for the incoming disconnection. Namespace: TC_EVENTS [} 528]. Tc Ulosi Incoming Disconnect Event Class Type: Global Variable Library: Tc3_Ulosi (Tc3_Ulosi.compiled-library) Events Name ID Severity Description Invalid Primitive State 1 Error Invalid primitive state. Invalid Association Object 2 Error Invalid association object interface (null) Invalid Settings Object 3 Error Invalid settings object interface (null) Invalid Rfc1006Object 4 Error Invalid RFC 1006 object interface (null) RLRETimeout Error 5 Error Release response timeout error Confirmation Timeout Error 6 Error Confirmation timeout error 6.8.1.50 ST_Tc Ulosi Outgoing Disconnect Event Class The table below contains a list of the events of the ULOSI event class for the outgoing disconnection. Namespace: TC_EVENTS [} 528]. Tc Ulosi Outgoing Disconnect Event Class Type: Global Variable Library: Tc3_Ulosi (Tc3_Ulosi.compiled-library) Events Name ID Severity Description Invalid Primitive State 1 Error Invalid primitive state. Invalid Association Object 2 Error Invalid association object interface (null). Invalid Rfc1006Object 3 Error Invalid RFC 1006 object interface (null). RLRETimeout Error 4 Error Release response (RLRE) timeout error. 6.8.1.51 ST_Tc Ulosi Receiver Event Class The table below contains a list of the events of the ULOSI event class for the reception of the data. Namespace: TC_EVENTS [} 528]. Tc Ulosi Receiver Event Class TF6510 Version: 1.7.1 555
## Page 556

PLC API Type: Global Variable Library: Tc3_Ulosi (Tc3_Ulosi.compiled-library) Events Name ID Severity Description Invalid Association Object 1 Error Invalid association object interface (null). Invalid Settings Object 2 Error Invalid settings object interface (null). Invalid Rfc1006Object 3 Error Invalid RFC 1006 object interface (null). Invalid Primitive State 4 Error Invalid primitive state. Response Timeout Error 5 Error Response timeout error. Decoder Failure 6 Error Decoder failure. 6.8.1.52 ST_Tc Ulosi Sender Event Class The table below contains a list of the events of the ULOSI event class for the transmission of the data. Namespace: TC_EVENTS [} 528]. Tc Ulosi Sender Event Class Type: Global Variable Library: Tc3_Ulosi (Tc3_Ulosi.compiled-library) Events Name ID Severity Description Invalid Primitive State 1 Error Invalid primitive state. 6.8.1.53 ST_Tc Ulosi Transaction Event Class The table below contains a list of the events of the ULOSI event class for the management of the data transactions. Namespace: TC_EVENTS [} 528]. Tc Ulosi Transaction Event Class Type: Global Variable Library: Tc3_Ulosi (Tc3_Ulosi.compiled-library) Events Name ID Severity Description Invalid Association Object 1 Error Invalid association object interface (null). Invalid Rfc1006Object 2 Error Invalid RFC 1006 object interface (null). Encoder Failure 3 Error Encoder failure. 6.8.1.54 ST_Tc Ulosi Server Event Class The following table contains a list of the events of the ULOSI event class for the management of a server instance (connection container). Namespace: TC_EVENTS [} 528]. Tc Ulosi Server Event Class Type: Global variable Library: Tc3_Ulosi (Tc3_Ulosi.compiled-library) 556 Version: 1.7.1 TF6510
## Page 557

PLC API Events Name ID Severity Description Invalid Parameter Value 1 Error Invalid parameter value. Invalid Object State 2 Error Invalid connection object state. Object Not Found 3 Error Connection object not found. Invalid Rfc1006Object 4 Error Invalid RFC1006 object interface (null). Invalid Association Object 5 Error Invalid association object interface (null). 6.8.1.55 ST_Tc Ulosi Connection Event Class The following table contains a list of events of the ULOSI event class for the management of a server connection instance (session). Namespace: TC_EVENTS [} 528]. Tc Ulosi Connection Event Class Type: Global variable Library: Tc3_Ulosi (Tc3_Ulosi.compiled-library) Events Name ID Severity Description Invalid Parameter Value 1 Error Invalid parameter value. Invalid Object State 2 Error Invalid connection object state. Object Already Exists 3 Error Connection object already exists. Object Not Found 4 Error Connection object not found. 6.8.1.56 ST_Tc Ulosi Acse Abrt Diagnostic Event Class The following table contains a list of the events of the ULOSI event class for the connection termination (ACSE-ABRT frame). Namespace: TC_EVENTS [} 528]. Tc Ulosi Acse Abrt Diagnostic Event Class Type: Global variable Library: Tc3_Ulosi (Tc3_Ulosi.compiled-library) Events Name ID Severity Description Null 0 Info No_reason_given 1 Error No reason given. Protocol_error 2 Error Protocol error. Authentication_mechanism_name_not 3 Error Authentication mechanism name not _recognized recognized. Authentication_mechanism_name_re 4 Error Authentication mechanism name required. quired Authentication_failure 5 Error Authentication failure. Authentication_required 6 Error Authentication required. 6.8.1.57 ST_Tc Ulosi Acse Aare Diagnostic Event Class The following table contains a list of events of the ULOSI event class for the negative responses during connection establishment (ACSE-AARE frame). Namespace: TC_EVENTS [} 528]. Tc Ulosi Acse Aare Diagnostic Event Class TF6510 Version: 1.7.1 557
## Page 558

PLC API Type: Global variable Library: Tc3_Ulosi (Tc3_Ulosi.compiled-library) Events Name ID Severity Description Null 0 Info No_reason_given 1 Error No reason given. Application_context_name_not_supported 2 Error Application context name not supported. Calling_AP_title_not_recognized 3 Error Calling AP title not recognized. Calling_AP_invocation_identifier_not_rec 4 Error Calling AP invocation identifier not ognized recognized. Calling_AE_qualifier_not_recognized 5 Error Calling AE qualifier not recognized. Calling_AE_invocation_identifier_not_rec 6 Error Calling AE invocation identifier not ognized recognized. Called_AP_title_not_recognized 7 Error Called AP title not recognized. Called_AP_invocation_identifier_not_reco 8 Error Called AP invocation identifier not gnized recognized. Called_AE_qualifier_not_recognized 9 Error Called AE qualifier not recognized. Called_AE_invocation_identifier_not_reco 10 Error Called AE invocation identifier not gnized recognized. Authentication_mechnism_name_not_rec 11 Error Authentication mechanism name not ognized recognized. Authentication_mechanism_name_requir 12 Error Authentication mechanism name ed required. Authentication_failure 13 Error Authentication failure. Authentication_required 14 Error Authentication required. 6.8.1.58 ST_Tc Ulosi Spdu Reason Code Event Class The following table contains a list of events of the ULOSI event class for rejected session layer telegrams (SPDU refuse frame). Namespace: TC_EVENTS [} 528]. Tc Ulosi Spdu Reason Code Event Class Type: Global variable Library: Tc3_Ulosi (Tc3_Ulosi.compiled-library) Events Name ID Severity Description Reason_not_specified 0 Error Rejection by called SS-user, reason not specified. Temporary_congestion 1 Error Rejection by called SS-user due to temporary congestion. Subsequent 2 Error Rejection by called SS-user, subsequent octets may be used. Session_selector_unknown 129 Error Session selector unknown. SS_user_not_attached_to_ 130 Error SS-user not attached to SSAP. SSAP SPM_congestion_at_connec 131 Error SPM congestion at connect time. t_time Versions_not_supported 132 Error Proposed protocol versions not supported. SPM_reason_not_specified 133 Error Rejection by SPM, reason not specified. SPM_implementation_restri 134 Error Rejection by the SPM, implementation restriction stated in ction the PICS. 558 Version: 1.7.1 TF6510
## Page 559

PLC API 6.8.1.59 ST_Win32Event Class The table below contains a list of the events of the Win32 event class. Events (IDs 0..99 [} 560]), Events (IDs 100..199 [} 562]), Events (IDs 200..1000 [} 564]), Events (IDs 1001..1099 [} 566]), Events (IDs 1100..1199 [} 568]), Events (IDs 1200..1399 [} 570]), Events (IDs 1400..1599 [} 575]), Events (IDs 1600..1799 [} 577]), Events (IDs 1800..1999 [} 581]), Events (IDs 2000..2999 [} 583]), Events (IDs 3000..4999 [} 584]), Events (IDs 5000..5999 [} 587]), Events (IDs 6000..7999 [} 590]), Events (IDs 8000..8499 [} 592]), Events (IDs 8500..9000 [} 601]), Events (IDs 9001..10003 [} 605]), Events (IDs 10004..11999 [} 607]), Events (IDs 12000..13884 [} 610]) Namespace: TC_EVENTS [} 528]. Win32Event Class Type: Global Variable Library: Not required, Twin CAT System Resource from v3.1.4022.14 TF6510 Version: 1.7.1 559
## Page 560

PLC API Error Description decimal Hexadecimal Name 0 0x00000000 ERROR_SUCCESS The operation completed successfully. 1 0x00000001 ERROR_INVALID_FUNCTION Incorrect function. 2 0x00000002 ERROR_FILE_NOT_FOUND The system cannot find the file specified. 3 0x00000003 ERROR_PATH_NOT_FOUND The system cannot find the path specified. 4 0x00000004 ERROR_TOO_MANY_OPEN_FILES The system cannot open the file. 5 0x00000005 ERROR_ACCESS_DENIED Access is denied. 6 0x00000006 ERROR_INVALID_HANDLE The handle is invalid. 7 0x00000007 ERROR_ARENA_TRASHED The storage control blocks were destroyed. 8 0x00000008 ERROR_NOT_ENOUGH_MEMORY Not enough storage is available to process this command. 9 0x00000009 ERROR_INVALID_BLOCK The storage control block address is invalid. 10 0x0000000A ERROR_BAD_ENVIRONMENT The environment is incorrect. 11 0x0000000B ERROR_BAD_FORMAT An attempt was made to load a program with an incorrect format. 12 0x0000000C ERROR_INVALID_ACCESS The access code is invalid. 13 0x0000000D ERROR_INVALID_DATA The data is invalid. 14 0x0000000E ERROR_OUTOFMEMORY Not enough storage is available to complete this operation. 15 0x0000000F ERROR_INVALID_DRIVE The system cannot find the drive specified. 16 0x00000010 ERROR_CURRENT_DIRECTORY The directory cannot be removed. 17 0x00000011 ERROR_NOT_SAME_DEVICE The system cannot move the file to a different disk drive. 18 0x00000012 ERROR_NO_MORE_FILES There are no more files. 19 0x00000013 ERROR_WRITE_PROTECT The media is write protected. 20 0x00000014 ERROR_BAD_UNIT The system cannot find the device specified. 21 0x00000015 ERROR_NOT_READY The device is not ready. 22 0x00000016 ERROR_BAD_COMMAND The device does not recognize the command. 23 0x00000017 ERROR_CRC Data error (cyclic redundancy check). 24 0x00000018 ERROR_BAD_LENGTH The program issued a command but the command length is incorrect. 25 0x00000019 ERROR_SEEK The drive cannot locate a specific area or track on the disk. 26 0x0000001A ERROR_NOT_DOS_DISK The specified disk or diskette cannot be accessed. 27 0x0000001B ERROR_SECTOR_NOT_FOUND The drive cannot find the sector requested. 28 0x0000001C ERROR_OUT_OF_PAPER The printer is out of paper. 29 0x0000001D ERROR_WRITE_FAULT The system cannot write to the specified device. 30 0x0000001E ERROR_READ_FAULT The system cannot read from the specified device. 31 0x0000001F ERROR_GEN_FAILURE A device attached to the system is not functioning. 32 0x00000020 ERROR_SHARING_VIOLATION The process cannot access the file because it is being used by another process. 33 0x00000021 ERROR_LOCK_VIOLATION The process cannot access the file because another process has locked a portion of the file. 34 0x00000022 ERROR_WRONG_DISK The wrong diskette is in the drive. Insert %2 (Volume Serial Number: %3) into drive %1. 36 0x00000024 ERROR_SHARING_BUFFER_EXCEEDED Too many files opened for sharing. 38 0x00000026 ERROR_HANDLE_EOF Reached the end of the file. 39 0x00000027 ERROR_HANDLE_DISK_FULL The disk is full. 50 0x00000032 ERROR_NOT_SUPPORTED The request is not supported. 51 0x00000033 ERROR_REM_NOT_LIST The remote computer is not available. 52 0x00000034 ERROR_DUP_NAME A duplicate name exists on the network. 53 0x00000035 ERROR_BAD_NETPATH The network path was not found. 54 0x00000036 ERROR_NETWORK_BUSY The network is busy. 55 0x00000037 ERROR_DEV_NOT_EXIST The specified network resource or device is no longer available. 56 0x00000038 ERROR_TOO_MANY_CMDS The network BIOS command limit has been reached. 57 0x00000039 ERROR_ADAP_HDW_ERR A network adapter hardware error occurred. 560 Version: 1.7.1 TF6510
## Page 561

PLC API Error Description decimal Hexadecimal Name 58 0x0000003A ERROR_BAD_NET_RESP The specified server cannot perform the requested operation. 59 0x0000003B ERROR_UNEXP_NET_ERR An unexpected network error occurred. 60 0x0000003C ERROR_BAD_REM_ADAP The remote adapter is not compatible. 61 0x0000003D ERROR_PRINTQ_FULL The printer queue is full. 62 0x0000003E ERROR_NO_SPOOL_SPACE Space to store the file waiting to be printed is not available on the server. 63 0x0000003F ERROR_PRINT_CANCELLED Your file waiting to be printed was deleted. 64 0x00000040 ERROR_NETNAME_DELETED The specified network name is no longer available. 65 0x00000041 ERROR_NETWORK_ACCESS_DENIED Network access is denied. 66 0x00000042 ERROR_BAD_DEV_TYPE The network resource type is not correct. 67 0x00000043 ERROR_BAD_NET_NAME The network name cannot be found. 68 0x00000044 ERROR_TOO_MANY_NAMES The name limit for the local computer network adapter card was exceeded. 69 0x00000045 ERROR_TOO_MANY_SESS The network BIOS session limit was exceeded. 70 0x00000046 ERROR_SHARING_PAUSED The remote server has been paused or is in the process of being started. 71 0x00000047 ERROR_REQ_NOT_ACCEP No more connections can be made to this remote computer at this time because there are already as many connections as the computer can accept. 72 0x00000048 ERROR_REDIR_PAUSED The specified printer or disk device has been paused. 80 0x00000050 ERROR_FILE_EXISTS The file exists. 82 0x00000052 ERROR_CANNOT_MAKE The directory or file cannot be created. 83 0x00000053 ERROR_FAIL_I24 Fail on INT 24. 84 0x00000054 ERROR_OUT_OF_STRUCTURES Storage to process this request is not available. 85 0x00000055 ERROR_ALREADY_ASSIGNED The local device name is already in use. 86 0x00000056 ERROR_INVALID_PASSWORD The specified network password is not correct. 87 0x00000057 ERROR_INVALID_PARAMETER The parameter is incorrect. 88 0x00000058 ERROR_NET_WRITE_FAULT A write fault occurred on the network. 89 0x00000059 ERROR_NO_PROC_SLOTS The system cannot start another process at this time. TF6510 Version: 1.7.1 561
## Page 562

PLC API Error Description decimal Hexadecimal Name 100 0x00000064 ERROR_TOO_MANY_SEMAPHORES Cannot create another system semaphore. 101 0x00000065 ERROR_EXCL_SEM_ALREADY_OWNED The exclusive semaphore is owned by another process. 102 0x00000066 ERROR_SEM_IS_SET The semaphore is set and cannot be closed. 103 0x00000067 ERROR_TOO_MANY_SEM_REQUESTS The semaphore cannot be set again. 104 0x00000068 ERROR_INVALID_AT_INTERRUPT_TIME Cannot request exclusive semaphores at interrupt time. 105 0x00000069 ERROR_SEM_OWNER_DIED The previous ownership of this semaphore has ended. 106 0x0000006A ERROR_SEM_USER_LIMIT Insert the diskette for drive %1. 107 0x0000006B ERROR_DISK_CHANGE The program stopped because an alternate diskette was not inserted. 108 0x0000006C ERROR_DRIVE_LOCKED The disk is in use or locked by another process. 109 0x0000006D ERROR_BROKEN_PIPE The pipe has been ended. 110 0x0000006E ERROR_OPEN_FAILED The system cannot open the device or file specified. 111 0x0000006F ERROR_BUFFER_OVERFLOW The file name is too long. 112 0x00000070 ERROR_DISK_FULL There is not enough space on the disk. 113 0x00000071 ERROR_NO_MORE_SEARCH_HANDLES No more internal file identifiers available. 114 0x00000072 ERROR_INVALID_TARGET_HANDLE The target internal file identifier is incorrect. 117 0x00000075 ERROR_INVALID_CATEGORY The IOCTL call made by the application program is not correct. 118 0x00000076 ERROR_INVALID_VERIFY_SWITCH The verify-on-write switch parameter value is not correct. 119 0x00000077 ERROR_BAD_DRIVER_LEVEL The system does not support the command requested. 120 0x00000078 ERROR_CALL_NOT_IMPLEMENTED This function is not supported on this system. 121 0x00000079 ERROR_SEM_TIMEOUT The semaphore timeout period has expired. 122 0x0000007A ERROR_INSUFFICIENT_BUFFER The data area passed to a system call is too small. 123 0x0000007B ERROR_INVALID_NAME The filename, directory name, or volume label syntax is incorrect. 124 0x0000007C ERROR_INVALID_LEVEL The system call level is not correct. 125 0x0000007D ERROR_NO_VOLUME_LABEL The disk has no volume label. 126 0x0000007E ERROR_MOD_NOT_FOUND The specified module could not be found. 127 0x0000007F ERROR_PROC_NOT_FOUND The specified procedure could not be found. 128 0x00000080 ERROR_WAIT_NO_CHILDREN There are no child processes to wait for. 129 0x00000081 ERROR_CHILD_NOT_COMPLETE The %1 application cannot be run in Win32 mode. 130 0x00000082 ERROR_DIRECT_ACCESS_HANDLE Attempt to use a file handle to an open disk partition for an operation other than raw disk I/O. 131 0x00000083 ERROR_NEGATIVE_SEEK An attempt was made to move the file pointer before the beginning of the file. 132 0x00000084 ERROR_SEEK_ON_DEVICE The file pointer cannot be set on the specified device or file. 133 0x00000085 ERROR_IS_JOIN_TARGET A JOIN or SUBST command cannot be used for a drive that contains previously joined drives. 134 0x00000086 ERROR_IS_JOINED An attempt was made to use a JOIN or SUBST command on a drive that has already been joined. 135 0x00000087 ERROR_IS_SUBSTED An attempt was made to use a JOIN or SUBST command on a drive that has already been substituted. 136 0x00000088 ERROR_NOT_JOINED The system tried to delete the JOIN of a drive that is not joined. 137 0x00000089 ERROR_NOT_SUBSTED The system tried to delete the substitution of a drive that is not substituted. 138 0x0000008A ERROR_JOIN_TO_JOIN The system tried to join a drive to a directory on a joined drive. 139 0x0000008B ERROR_SUBST_TO_SUBST The system tried to substitute a drive to a directory on a substituted drive. 140 0x0000008C ERROR_JOIN_TO_SUBST The system tried to join a drive to a directory on a substituted drive. 141 0x0000008D ERROR_SUBST_TO_JOIN The system tried to SUBST a drive to a directory on a joined drive. 562 Version: 1.7.1 TF6510
## Page 563

PLC API Error Description decimal Hexadecimal Name 142 0x0000008E ERROR_BUSY_DRIVE The system cannot perform a JOIN or SUBST at this time. 143 0x0000008F ERROR_SAME_DRIVE The system cannot join or substitute a drive to or for a directory on the same drive. 144 0x00000090 ERROR_DIR_NOT_ROOT The directory is not a subdirectory of the root directory. 145 0x00000091 ERROR_DIR_NOT_EMPTY The directory is not empty. 146 0x00000092 ERROR_IS_SUBST_PATH The path specified is being used in a substitute. 147 0x00000093 ERROR_IS_JOIN_PATH Not enough resources are available to process this command. 148 0x00000094 ERROR_PATH_BUSY The path specified cannot be used at this time. 149 0x00000095 ERROR_IS_SUBST_TARGET An attempt was made to join or substitute a drive for which a directory on the drive is the target of a previous substitute. 150 0x00000096 ERROR_SYSTEM_TRACE System trace information was not specified in your CONFIG. SYS file, or tracing is disallowed. 151 0x00000097 ERROR_INVALID_EVENT_COUNT The number of specified semaphore events for Dos Mux Sem Wait is not correct. 152 0x00000098 ERROR_TOO_MANY_MUXWAITERS Dos Mux Sem Wait did not execute; too many semaphores are already set. 153 0x00000099 ERROR_INVALID_LIST_FORMAT The Dos Mux Sem Wait list is not correct. 154 0x0000009A ERROR_LABEL_TOO_LONG The volume label you entered exceeds the label character limit of the target file system. 155 0x0000009B ERROR_TOO_MANY_TCBS Cannot create another thread. 156 0x0000009C ERROR_SIGNAL_REFUSED The recipient process has refused the signal. 157 0x0000009D ERROR_DISCARDED The segment is already discarded and cannot be locked. 158 0x0000009E ERROR_NOT_LOCKED The segment is already unlocked. 159 0x0000009F ERROR_BAD_THREADID_ADDR The address for the thread ID is not correct. 160 0x000000A0 ERROR_BAD_ARGUMENTS The argument string passed to Dos Exec Pgm is not correct. 161 0x000000A1 ERROR_BAD_PATHNAME The specified path is invalid. 162 0x000000A2 ERROR_SIGNAL_PENDING A signal is already pending. 164 0x000000A4 ERROR_MAX_THRDS_REACHED No more threads can be created in the system. 167 0x000000A7 ERROR_LOCK_FAILED Unable to lock a region of a file. 170 0x000000AA ERROR_BUSY The requested resource is in use. 173 0x000000AD ERROR_CANCEL_VIOLATION A lock request was not outstanding for the supplied cancel region. 174 0x000000AE ERROR_ATOMIC_LOCKS_NOT_SUPPORTED The file system does not support atomic changes to the lock type. 180 0x000000B4 ERROR_INVALID_SEGMENT_NUMBER The system detected a segment number that was not correct. 182 0x000000B6 ERROR_INVALID_ORDINAL The operating system cannot run %1. 183 0x000000B7 ERROR_ALREADY_EXISTS Cannot create a file when that file already exists. 186 0x000000BA ERROR_INVALID_FLAG_NUMBER The flag passed is not correct. 187 0x000000BB ERROR_SEM_NOT_FOUND The specified system semaphore name was not found. 188 0x000000BC ERROR_INVALID_STARTING_CODESEG The operating system cannot run %1. 189 0x000000BD ERROR_INVALID_STACKSEG The operating system cannot run %1. 190 0x000000BE ERROR_INVALID_MODULETYPE The operating system cannot run %1. 191 0x000000BF ERROR_INVALID_EXE_SIGNATURE Cannot run %1 in Win32 mode. 192 0x000000C0 ERROR_EXE_MARKED_INVALID The operating system cannot run %1. 193 0x000000C1 ERROR_BAD_EXE_FORMAT %1 is not a valid Win32 application. 194 0x000000C2 ERROR_ITERATED_DATA_EXCEEDS_64k The operating system cannot run %1. 195 0x000000C3 ERROR_INVALID_MINALLOCSIZE The operating system cannot run %1. 196 0x000000C4 ERROR_DYNLINK_FROM_INVALID_RING The operating system cannot run this application program. 197 0x000000C5 ERROR_IOPL_NOT_ENABLED The operating system is not presently configured to run this application. 198 0x000000C6 ERROR_INVALID_SEGDPL The operating system cannot run %1. 199 0x000000C7 ERROR_AUTODATASEG_EXCEEDS_64k The operating system cannot run this application program. TF6510 Version: 1.7.1 563
## Page 564

PLC API Error Description decimal Hexadecimal Name 200 0x000000C8 ERROR_RING2SEG_MUST_BE_MOVABLE The code segment cannot be greater than or equal to 64K. 201 0x000000C9 ERROR_RELOC_CHAIN_XEEDS_SEGLIM The operating system cannot run %1. 202 0x000000CA ERROR_INFLOOP_IN_RELOC_CHAIN The operating system cannot run %1. 203 0x000000CB ERROR_ENVVAR_NOT_FOUND The system could not find the environment option that was entered. 205 0x000000CD ERROR_NO_SIGNAL_SENT No process in the command subtree has a signal handler. 206 0x000000CE ERROR_FILENAME_EXCED_RANGE The filename or extension is too long. 207 0x000000CF ERROR_RING2_STACK_IN_USE The ring 2 stack is in use. 208 0x000000D0 ERROR_META_EXPANSION_TOO_LONG The global filename characters, * or ?, are entered incorrectly or too many global filename characters are specified. 209 0x000000D1 ERROR_INVALID_SIGNAL_NUMBER The signal being posted is not correct. 210 0x000000D2 ERROR_THREAD_1_INACTIVE The signal handler cannot be set. 212 0x000000D4 ERROR_LOCKED The segment is locked and cannot be reallocated. 214 0x000000D6 ERROR_TOO_MANY_MODULES Too many dynamic-link modules are attached to this program or dynamic-link module. 215 0x000000D7 ERROR_NESTING_NOT_ALLOWED Cannot nest calls to Load Module. 216 0x000000D8 ERROR_EXE_MACHINE_TYPE_MISMATCH The image file %1 is valid, but is for a machine type other than the current machine. 230 0x000000E6 ERROR_BAD_PIPE The pipe state is invalid. 231 0x000000E7 ERROR_PIPE_BUSY All pipe instances are busy. 232 0x000000E8 ERROR_NO_DATA The pipe is being closed. 233 0x000000E9 ERROR_PIPE_NOT_CONNECTED No process is on the other end of the pipe. 234 0x000000EA ERROR_MORE_DATA More data is available. 240 0x000000F0 ERROR_VC_DISCONNECTED The session was canceled. 254 0x000000FE ERROR_INVALID_EA_NAME The specified extended attribute name was invalid. 255 0x000000FF ERROR_EA_LIST_INCONSISTENT The extended attributes are inconsistent. 258 0x00000102 WAIT_TIMEOUT The wait operation timed out. 259 0x00000103 ERROR_NO_MORE_ITEMS No more data is available. 266 0x0000010A ERROR_CANNOT_COPY The copy functions cannot be used. 267 0x0000010B ERROR_DIRECTORY The directory name is invalid. 275 0x00000113 ERROR_EAS_DIDNT_FIT The extended attributes did not fit in the buffer. 276 0x00000114 ERROR_EA_FILE_CORRUPT The extended attribute file on the mounted file system is corrupt. 277 0x00000115 ERROR_EA_TABLE_FULL The extended attribute table file is full. 278 0x00000116 ERROR_INVALID_EA_HANDLE The specified extended attribute handle is invalid. 282 0x0000011A ERROR_EAS_NOT_SUPPORTED The mounted file system does not support extended attributes. 288 0x00000120 ERROR_NOT_OWNER Attempt to release mutex not owned by caller. 298 0x0000012A ERROR_TOO_MANY_POSTS Too many posts were made to a semaphore. 299 0x0000012B ERROR_PARTIAL_COPY Only part of a Read Process Memory or Write Process Memory request was completed. 300 0x0000012C ERROR_OPLOCK_NOT_GRANTED The oplock request is denied. 301 0x0000012D ERROR_INVALID_OPLOCK_PROTOCOL An invalid oplock acknowledgment was received by the system. 302 0x0000012E ERROR_DISK_TOO_FRAGMENTED The volume is too fragmented to complete this operation. 303 0x0000012F ERROR_DELETE_PENDING The file cannot be opened because it is in the process of being deleted. 317 0x0000013D ERROR_MR_MID_NOT_FOUND The system cannot find message text for message number 0x%1 in the message file for %2. 487 0x000001E7 ERROR_INVALID_ADDRESS Attempt to access invalid address. 534 0x00000216 ERROR_ARITHMETIC_OVERFLOW Arithmetic result exceeded 32 bits. 535 0x00000217 ERROR_PIPE_CONNECTED There is a process on other end of the pipe. 536 0x00000218 ERROR_PIPE_LISTENING Waiting for a process to open the other end of the pipe. 994 0x000003E2 ERROR_EA_ACCESS_DENIED Access to the extended attribute was denied. 564 Version: 1.7.1 TF6510
## Page 565

PLC API Error Description decimal Hexadecimal Name 995 0x000003E3 ERROR_OPERATION_ABORTED The I/O operation has been aborted because of either a thread exit or an application request. 996 0x000003E4 ERROR_IO_INCOMPLETE Overlapped I/O event is not in a signaled state. 997 0x000003E5 ERROR_IO_PENDING Overlapped I/O operation is in progress. 998 0x000003E6 ERROR_NOACCESS Invalid access to memory location. 999 0x000003E7 ERROR_SWAPERROR Error performing inpage operation. TF6510 Version: 1.7.1 565
## Page 566

PLC API Error Description decimal Hexadecimal Name 1001 0x000003E9 ERROR_STACK_OVERFLOW Recursion too deep; the stack overflowed. 1002 0x000003EA ERROR_INVALID_MESSAGE The window cannot act on the sent message. 1003 0x000003EB ERROR_CAN_NOT_COMPLETE Cannot complete this function. 1004 0x000003EC ERROR_INVALID_FLAGS Invalid flags. 1005 0x000003ED ERROR_UNRECOGNIZED_VOLUME The volume does not contain a recognized file system. Please make sure that all required file system drivers are loaded and that the volume is not corrupted. 1006 0x000003EE ERROR_FILE_INVALID The volume for a file has been externally altered so that the opened file is no longer valid. 1007 0x000003EF ERROR_FULLSCREEN_MODE The requested operation cannot be performed in full-screen mode. 1008 0x000003F0 ERROR_NO_TOKEN An attempt was made to reference a token that does not exist. 1009 0x000003F1 ERROR_BADDB The configuration registry database is corrupt. 1010 0x000003F2 ERROR_BADKEY The configuration registry key is invalid. 1011 0x000003F3 ERROR_CANTOPEN The configuration registry key could not be opened. 1012 0x000003F4 ERROR_CANTREAD The configuration registry key could not be read. 1013 0x000003F5 ERROR_CANTWRITE The configuration registry key could not be written. 1014 0x000003F6 ERROR_REGISTRY_RECOVERED One of the files in the registry database had to be recovered by use of a log or alternate copy. The recovery was successful. 1015 0x000003F7 ERROR_REGISTRY_CORRUPT The registry is corrupted. The structure of one of the files containing registry data is corrupted, or the system's memory image of the file is corrupted, or the file could not be recovered because the alternate copy or log was absent or corrupted. 1016 0x000003F8 ERROR_REGISTRY_IO_FAILED An I/O operation initiated by the registry failed unrecoverably. The registry could not read in, or write out, or flush, one of the files that contain the system's image of the registry. 1017 0x000003F9 ERROR_NOT_REGISTRY_FILE The system has attempted to load or restore a file into the registry, but the specified file is not in a registry file format. 1018 0x000003FA ERROR_KEY_DELETED Illegal operation attempted on a registry key that has been marked for deletion. 1019 0x000003FB ERROR_NO_LOG_SPACE System could not allocate the required space in a registry log. 1020 0x000003FC ERROR_KEY_HAS_CHILDREN Cannot create a symbolic link in a registry key that already has subkeys or values. 1021 0x000003FD ERROR_CHILD_MUST_BE_VOLATILE Cannot create a stable subkey under a volatile parent key. 1022 0x000003FE ERROR_NOTIFY_ENUM_DIR A notify change request is being completed and the information is not being returned in the caller's buffer. The caller now needs to enumerate the files to find the changes. 1051 0x0000041B ERROR_DEPENDENT_SERVICES_RUNNING A stop control has been sent to a service that other running services are dependent on. 1052 0x0000041C ERROR_INVALID_SERVICE_CONTROL The requested control is not valid for this service. 1053 0x0000041D ERROR_SERVICE_REQUEST_TIMEOUT The service did not respond to the start or control request in a timely fashion. 1054 0x0000041E ERROR_SERVICE_NO_THREAD A thread could not be created for the service. 1055 0x0000041F ERROR_SERVICE_DATABASE_LOCKED The service database is locked. 1056 0x00000420 ERROR_SERVICE_ALREADY_RUNNING An instance of the service is already running. 1057 0x00000421 ERROR_INVALID_SERVICE_ACCOUNT The account name is invalid or does not exist, or the password is invalid for the account name specified. 1058 0x00000422 ERROR_SERVICE_DISABLED The service cannot be started, either because it is disabled or because it has no enabled devices associated with it. 1059 0x00000423 ERROR_CIRCULAR_DEPENDENCY Circular service dependency was specified. 566 Version: 1.7.1 TF6510
## Page 567

PLC API Error Description decimal Hexadecimal Name 1060 0x00000424 ERROR_SERVICE_DOES_NOT_EXIST The specified service does not exist as an installed service. 1061 0x00000425 ERROR_SERVICE_CANNOT_ACCEPT_CTRL The service cannot accept control messages at this time. 1062 0x00000426 ERROR_SERVICE_NOT_ACTIVE The service has not been started. 1063 0x00000427 ERROR_FAILED_SERVICE_CONTROLLER_CON The service process could not connect to the NECT service controller. 1064 0x00000428 ERROR_EXCEPTION_IN_SERVICE An exception occurred in the service when handling the control request. 1065 0x00000429 ERROR_DATABASE_DOES_NOT_EXIST The database specified does not exist. 1066 0x0000042A ERROR_SERVICE_SPECIFIC_ERROR The service has returned a service-specific error code. 1067 0x0000042B ERROR_PROCESS_ABORTED The process terminated unexpectedly. 1068 0x0000042C ERROR_SERVICE_DEPENDENCY_FAIL The dependency service or group failed to start. 1069 0x0000042D ERROR_SERVICE_LOGON_FAILED The service did not start due to a logon failure. 1070 0x0000042E ERROR_SERVICE_START_HANG After starting, the service hung in a start-pending state. 1071 0x0000042F ERROR_INVALID_SERVICE_LOCK The specified service database lock is invalid. 1072 0x00000430 ERROR_SERVICE_MARKED_FOR_DELETE The specified service has been marked for deletion. 1073 0x00000431 ERROR_SERVICE_EXISTS The specified service already exists. 1074 0x00000432 ERROR_ALREADY_RUNNING_LKG The system is currently running with the last- known-good configuration. 1075 0x00000433 ERROR_SERVICE_DEPENDENCY_DELETED The dependency service does not exist or has been marked for deletion. 1076 0x00000434 ERROR_BOOT_ALREADY_ACCEPTED The current boot has already been accepted for use as the last-known-good control set. 1077 0x00000435 ERROR_SERVICE_NEVER_STARTED No attempts to start the service have been made since the last boot. 1078 0x00000436 ERROR_DUPLICATE_SERVICE_NAME The name is already in use as either a service name or a service display name. 1079 0x00000437 ERROR_DIFFERENT_SERVICE_ACCOUNT The account specified for this service is different from the account specified for other services running in the same process. 1080 0x00000438 ERROR_CANNOT_DETECT_DRIVER_FAILURE Failure actions can only be set for Win32 services, not for drivers. 1081 0x00000439 ERROR_CANNOT_DETECT_PROCESS_ABORT This service runs in the same process as the service control manager. Therefore, the service control manager cannot take action if this service's process terminates unexpectedly. 1082 0x0000043A ERROR_NO_RECOVERY_PROGRAM No recovery program has been configured for this service. 1083 0x0000043B ERROR_SERVICE_NOT_IN_EXE The executable program that this service is configured to run in does not implement the service. 1084 0x0000043C ERROR_NOT_SAFEBOOT_SERVICE This service cannot be started in Safe Mode. TF6510 Version: 1.7.1 567
## Page 568

PLC API Error Description decimal Hexadecimal Name 1100 0x0000044C ERROR_END_OF_MEDIA The physical end of the tape has been reached. 1101 0x0000044D ERROR_FILEMARK_DETECTED A tape access reached a filemark. 1102 0x0000044E ERROR_BEGINNING_OF_MEDIA The beginning of the tape or a partition was encountered. 1103 0x0000044F ERROR_SETMARK_DETECTED A tape access reached the end of a set of files. 1104 0x00000450 ERROR_NO_DATA_DETECTED No more data is on the tape. 1105 0x00000451 ERROR_PARTITION_FAILURE Tape could not be partitioned. 1106 0x00000452 ERROR_INVALID_BLOCK_LENGTH When accessing a new tape of a multivolume partition, the current block size is incorrect. 1107 0x00000453 ERROR_DEVICE_NOT_PARTITIONED Tape partition information could not be found when loading a tape. 1108 0x00000454 ERROR_UNABLE_TO_LOCK_MEDIA Unable to lock the media eject mechanism. 1109 0x00000455 ERROR_UNABLE_TO_UNLOAD_MEDIA Unable to unload the media. 1110 0x00000456 ERROR_MEDIA_CHANGED The media in the drive may have changed. 1111 0x00000457 ERROR_BUS_RESET The I/O bus was reset. 1112 0x00000458 ERROR_NO_MEDIA_IN_DRIVE No media in drive. 1113 0x00000459 ERROR_NO_UNICODE_TRANSLATION No mapping for the Unicode character exists in the target multi-byte code page. 1114 0x0000045A ERROR_DLL_INIT_FAILED A dynamic link library (DLL) initialization routine failed. 1115 0x0000045B ERROR_SHUTDOWN_IN_PROGRESS A system shutdown is in progress. 1116 0x0000045C ERROR_NO_SHUTDOWN_IN_PROGRESS Unable to abort the system shutdown because no shutdown was in progress. 1117 0x0000045D ERROR_IO_DEVICE The request could not be performed because of an I/O device error. 1118 0x0000045E ERROR_SERIAL_NO_DEVICE No serial device was successfully initialized. The serial driver will unload. 1119 0x0000045F ERROR_IRQ_BUSY Unable to open a device that was sharing an interrupt request (IRQ) with other devices. At least one other device that uses that IRQ was already opened. 1120 0x00000460 ERROR_MORE_WRITES A serial I/O operation was completed by another write to the serial port. (The IOCTL_SERIAL_XOFF_COUNTER reached zero.) 1121 0x00000461 ERROR_COUNTER_TIMEOUT A serial I/O operation completed because the timeout period expired. (The IOCTL_SERIAL_XOFF_COUNTER did not reach zero.) 1122 0x00000462 ERROR_FLOPPY_ID_MARK_NOT_FOUND No ID address mark was found on the floppy disk. 1123 0x00000463 ERROR_FLOPPY_WRONG_CYLINDER Mismatch between the floppy disk sector ID field and the floppy disk controller track address. 1124 0x00000464 ERROR_FLOPPY_UNKNOWN_ERROR The floppy disk controller reported an error that is not recognized by the floppy disk driver. 1125 0x00000465 ERROR_FLOPPY_BAD_REGISTERS The floppy disk controller returned inconsistent results in its registers. 1126 0x00000466 ERROR_DISK_RECALIBRATE_FAILED While accessing the hard disk, a recalibrate operation failed, even after retries. 1127 0x00000467 ERROR_DISK_OPERATION_FAILED While accessing the hard disk, a disk operation failed even after retries. 1128 0x00000468 ERROR_DISK_RESET_FAILED While accessing the hard disk, a disk controller reset was needed, but even that failed. 1129 0x00000469 ERROR_EOM_OVERFLOW Physical end of tape encountered. 1130 0x0000046A ERROR_NOT_ENOUGH_SERVER_MEMORY Not enough server storage is available to process this command. 1131 0x0000046B ERROR_POSSIBLE_DEADLOCK A potential deadlock condition has been detected. 1132 0x0000046C ERROR_MAPPED_ALIGNMENT The base address or the file offset specified does not have the proper alignment. 1140 0x00000474 ERROR_SET_POWER_STATE_VETOED An attempt to change the system power state was vetoed by another application or driver. 1141 0x00000475 ERROR_SET_POWER_STATE_FAILED The system BIOS failed an attempt to change the system power state. 1142 0x00000476 ERROR_TOO_MANY_LINKS An attempt was made to create more links on a file than the file system supports. 568 Version: 1.7.1 TF6510
## Page 569

PLC API Error Description decimal Hexadecimal Name 1150 0x0000047E ERROR_OLD_WIN_VERSION The specified program requires a newer version of Windows. 1151 0x0000047F ERROR_APP_WRONG_OS The specified program is not a Windows or MS- DOS program. 1152 0x00000480 ERROR_SINGLE_INSTANCE_APP Cannot start more than one instance of the specified program. 1153 0x00000481 ERROR_RMODE_APP The specified program was written for an earlier version of Windows. 1154 0x00000482 ERROR_INVALID_DLL One of the library files needed to run this application is damaged. 1155 0x00000483 ERROR_NO_ASSOCIATION No application is associated with the specified file for this operation. 1156 0x00000484 ERROR_DDE_FAIL An error occurred in sending the command to the application. 1157 0x00000485 ERROR_DLL_NOT_FOUND One of the library files needed to run this application cannot be found. 1158 0x00000486 ERROR_NO_MORE_USER_HANDLES The current process has used all of its system allowance of handles for Window Manager objects. 1159 0x00000487 ERROR_MESSAGE_SYNC_ONLY The message can be used only with synchronous operations. 1160 0x00000488 ERROR_SOURCE_ELEMENT_EMPTY The indicated source element has no media. 1161 0x00000489 ERROR_DESTINATION_ELEMENT_FULL The indicated destination element already contains media. 1162 0x0000048A ERROR_ILLEGAL_ELEMENT_ADDRESS The indicated element does not exist. 1163 0x0000048B ERROR_MAGAZINE_NOT_PRESENT The indicated element is part of a magazine that is not present. 1164 0x0000048C ERROR_DEVICE_REINITIALIZATION_NEEDED The indicated device requires reinitialization due to hardware errors. 1165 0x0000048D ERROR_DEVICE_REQUIRES_CLEANING The device has indicated that cleaning is required before further operations are attempted. 1166 0x0000048E ERROR_DEVICE_DOOR_OPEN The device has indicated that its door is open. 1167 0x0000048F ERROR_DEVICE_NOT_CONNECTED The device is not connected. 1168 0x00000490 ERROR_NOT_FOUND Element not found. 1169 0x00000491 ERROR_NO_MATCH There was no match for the specified key in the index. 1170 0x00000492 ERROR_SET_NOT_FOUND The property set specified does not exist on the object. 1171 0x00000493 ERROR_POINT_NOT_FOUND The point passed to Get Mouse Move Points Ex is not in the buffer. 1172 0x00000494 ERROR_NO_TRACKING_SERVICE The tracking (workstation) service is not running. 1173 0x00000495 ERROR_NO_VOLUME_ID The Volume ID could not be found. 1175 0x00000497 ERROR_UNABLE_TO_REMOVE_REPLACED Unable to remove the file to be replaced. 1176 0x00000498 ERROR_UNABLE_TO_MOVE_REPLACEMENT Unable to move the replacement file to the file to be replaced. The file to be replaced has retained its original name. 1177 0x00000499 ERROR_UNABLE_TO_MOVE_REPLACEMENT_2 Unable to move the replacement file to the file to be replaced. The file to be replaced has been renamed using the backup name. 1178 0x0000049A ERROR_JOURNAL_DELETE_IN_PROGRESS The volume change journal is being deleted. 1179 0x0000049B ERROR_JOURNAL_NOT_ACTIVE The volume change journal is not active. 1180 0x0000049C ERROR_POTENTIAL_FILE_FOUND A file was found, but it may not be the correct file. 1181 0x0000049D ERROR_JOURNAL_ENTRY_DELETED The journal entry has been deleted from the journal. TF6510 Version: 1.7.1 569
## Page 570

PLC API Error Description decimal Hexadecimal Name 1200 0x000004B0 ERROR_BAD_DEVICE The specified device name is invalid. 1201 0x000004B1 ERROR_CONNECTION_UNAVAIL The device is not currently connected but it is a remembered connection. 1202 0x000004B2 ERROR_DEVICE_ALREADY_REMEMBERED The local device name has a remembered connection to another network resource. 1203 0x000004B3 ERROR_NO_NET_OR_BAD_PATH No network provider accepted the given network path. 1204 0x000004B4 ERROR_BAD_PROVIDER The specified network provider name is invalid. 1205 0x000004B5 ERROR_CANNOT_OPEN_PROFILE Unable to open the network connection profile. 1206 0x000004B6 ERROR_BAD_PROFILE The network connection profile is corrupted. 1207 0x000004B7 ERROR_NOT_CONTAINER Cannot enumerate a noncontainer. 1208 0x000004B8 ERROR_EXTENDED_ERROR An extended error has occurred. 1209 0x000004B9 ERROR_INVALID_GROUPNAME The format of the specified group name is invalid. 1210 0x000004BA ERROR_INVALID_COMPUTERNAME The format of the specified computer name is invalid. 1211 0x000004BB ERROR_INVALID_EVENTNAME The format of the specified event name is invalid. 1212 0x000004BC ERROR_INVALID_DOMAINNAME The format of the specified domain name is invalid. 1213 0x000004BD ERROR_INVALID_SERVICENAME The format of the specified service name is invalid. 1214 0x000004BE ERROR_INVALID_NETNAME The format of the specified network name is invalid. 1215 0x000004BF ERROR_INVALID_SHARENAME The format of the specified share name is invalid. 1216 0x000004C0 ERROR_INVALID_PASSWORDNAME The format of the specified password is invalid. 1217 0x000004C1 ERROR_INVALID_MESSAGENAME The format of the specified message name is invalid. 1218 0x000004C2 ERROR_INVALID_MESSAGEDEST The format of the specified message destination is invalid. 1219 0x000004C3 ERROR_SESSION_CREDENTIAL_CONFLICT The credentials supplied conflict with an existing set of credentials. 1220 0x000004C4 ERROR_REMOTE_SESSION_LIMIT_EXCEEDED An attempt was made to establish a session to a network server, but there are already too many sessions established to that server. 1221 0x000004C5 ERROR_DUP_DOMAINNAME The workgroup or domain name is already in use by another computer on the network. 1222 0x000004C6 ERROR_NO_NETWORK The network is not present or not started. 1223 0x000004C7 ERROR_CANCELLED The operation was canceled by the user. 1224 0x000004C8 ERROR_USER_MAPPED_FILE The requested operation cannot be performed on a file with a user-mapped section open. 1225 0x000004C9 ERROR_CONNECTION_REFUSED The remote system refused the network connection. 1226 0x000004CA ERROR_GRACEFUL_DISCONNECT The network connection was gracefully closed. 1227 0x000004CB ERROR_ADDRESS_ALREADY_ASSOCIATED The network transport endpoint already has an address associated with it. 1228 0x000004CC ERROR_ADDRESS_NOT_ASSOCIATED An address has not yet been associated with the network endpoint. 1229 0x000004CD ERROR_CONNECTION_INVALID An operation was attempted on a nonexistent network connection. 1230 0x000004CE ERROR_CONNECTION_ACTIVE An invalid operation was attempted on an active network connection. 1231 0x000004CF ERROR_NETWORK_UNREACHABLE The network location cannot be reached. For information about network troubleshooting, see Windows Help. 1232 0x000004D0 ERROR_HOST_UNREACHABLE The network location cannot be reached. For information about network troubleshooting, see Windows Help. 1233 0x000004D1 ERROR_PROTOCOL_UNREACHABLE The network location cannot be reached. For information about network troubleshooting, see Windows Help. 1234 0x000004D2 ERROR_PORT_UNREACHABLE No service is operating at the destination network endpoint on the remote system. 1235 0x000004D3 ERROR_REQUEST_ABORTED The request was aborted. 1236 0x000004D4 ERROR_CONNECTION_ABORTED The network connection was aborted by the local system. 570 Version: 1.7.1 TF6510
## Page 571

PLC API Error Description decimal Hexadecimal Name 1237 0x000004D5 ERROR_RETRY The operation could not be completed. A retry should be performed. 1238 0x000004D6 ERROR_CONNECTION_COUNT_LIMIT A connection to the server could not be made because the limit on the number of concurrent connections for this account has been reached. 1239 0x000004D7 ERROR_LOGIN_TIME_RESTRICTION Attempting to log in during an unauthorized time of day for this account. 1240 0x000004D8 ERROR_LOGIN_WKSTA_RESTRICTION The account is not authorized to log in from this station. 1241 0x000004D9 ERROR_INCORRECT_ADDRESS The network address could not be used for the operation requested. 1242 0x000004DA ERROR_ALREADY_REGISTERED The service is already registered. 1243 0x000004DB ERROR_SERVICE_NOT_FOUND The specified service does not exist. 1244 0x000004DC ERROR_NOT_AUTHENTICATED The operation being requested was not performed because the user has not been authenticated. 1245 0x000004DD ERROR_NOT_LOGGED_ON The operation being requested was not performed because the user has not logged on to the network. The specified service does not exist. 1246 0x000004DE ERROR_CONTINUE Continue with work in progress. 1247 0x000004DF ERROR_ALREADY_INITIALIZED An attempt was made to perform an initialization operation when initialization has already been completed. 1248 0x000004E0 ERROR_NO_MORE_DEVICES No more local devices. 1249 0x000004E1 ERROR_NO_SUCH_SITE The specified site does not exist. 1250 0x000004E2 ERROR_DOMAIN_CONTROLLER_EXISTS A domain controller with the specified name already exists. 1251 0x000004E3 ERROR_ONLY_IF_CONNECTED This operation is supported only when you are connected to the server. 1252 0x000004E4 ERROR_OVERRIDE_NOCHANGES The group policy framework should call the extension even if there are no changes. 1253 0x000004E5 ERROR_BAD_USER_PROFILE The specified user does not have a valid profile. 1254 0x000004E6 ERROR_NOT_SUPPORTED_ON_SBS This operation is not supported on a Microsoft Small Business Server. 1255 0x000004E7 ERROR_SERVER_SHUTDOWN_IN_PROGRESS The server machine is shutting down. 1256 0x000004E8 ERROR_HOST_DOWN The remote system is not available. For information about network troubleshooting, see Windows Help. 1257 0x000004E9 ERROR_NON_ACCOUNT_SID The security identifier provided is not from an account domain. 1258 0x000004EA ERROR_NON_DOMAIN_SID The security identifier provided does not have a domain component. 1259 0x000004EB ERROR_APPHELP_BLOCK App Help dialog canceled thus preventing the application from starting. 1260 0x000004EC ERROR_ACCESS_DISABLED_BY_POLICY Access to the requested resource has been disabled by your administrator. 1261 0x000004ED ERROR_REG_NAT_CONSUMPTION A program attempt to use an invalid register value. Normally caused by an uninitialized register. This error is Itanium specific. 1262 0x000004EE ERROR_CSCSHARE_OFFLINE The share is currently offline or does not exist. 1300 0x00000514 ERROR_NOT_ALL_ASSIGNED Not all privileges referenced are assigned to the caller. 1301 0x00000515 ERROR_SOME_NOT_MAPPED Some mapping between account names and security IDs was not done. 1302 0x00000516 ERROR_NO_QUOTAS_FOR_ACCOUNT No system quota limits are specifically set for this account. 1303 0x00000517 ERROR_LOCAL_USER_SESSION_KEY No encryption key is available. A well-known encryption key was returned. 1304 0x00000518 ERROR_NULL_LM_PASSWORD The password is too complex to be converted to a LAN Manager password. The LAN Manager password returned is a NULL string. 1305 0x00000519 ERROR_UNKNOWN_REVISION The revision level is unknown. 1306 0x0000051A ERROR_REVISION_MISMATCH Indicates two revision levels are incompatible. 1307 0x0000051B ERROR_INVALID_OWNER This security ID may not be assigned as the owner of this object. TF6510 Version: 1.7.1 571
## Page 572

PLC API Error Description decimal Hexadecimal Name 1308 0x0000051C ERROR_INVALID_PRIMARY_GROUP This security ID may not be assigned as the primary group of an object. 1309 0x0000051D ERROR_NO_IMPERSONATION_TOKEN An attempt has been made to operate on an impersonation token by a thread that is not currently impersonating a client. 1310 0x0000051E ERROR_CANT_DISABLE_MANDATORY The group may not be disabled. 1311 0x0000051F ERROR_NO_LOGON_SERVERS There are currently no logon servers available to service the logon request. 1312 0x00000520 ERROR_NO_SUCH_LOGON_SESSION A specified logon session does not exist. It may already have been terminated. 1313 0x00000521 ERROR_NO_SUCH_PRIVILEGE A specified privilege does not exist. 1314 0x00000522 ERROR_PRIVILEGE_NOT_HELD A required privilege is not held by the client. 1315 0x00000523 ERROR_INVALID_ACCOUNT_NAME The name provided is not a properly formed account name. 1316 0x00000524 ERROR_USER_EXISTS The specified user already exists. 1317 0x00000525 ERROR_NO_SUCH_USER The specified user does not exist. 1318 0x00000526 ERROR_GROUP_EXISTS The specified group already exists. 1319 0x00000527 ERROR_NO_SUCH_GROUP The specified group does not exist. 1320 0x00000528 ERROR_MEMBER_IN_GROUP Either the specified user account is already a member of the specified group, or the specified group cannot be deleted because it contains a member. 1321 0x00000529 ERROR_MEMBER_NOT_IN_GROUP The specified user account is not a member of the specified group account. 1322 0x0000052A ERROR_LAST_ADMIN The last remaining administration account cannot be disabled or deleted. 1323 0x0000052B ERROR_WRONG_PASSWORD Unable to update the password. The value provided as the current password is incorrect. 1324 0x0000052C ERROR_ILL_FORMED_PASSWORD Unable to update the password. The value provided for the new password contains values that are not allowed in passwords. 1325 0x0000052D ERROR_PASSWORD_RESTRICTION Unable to update the password. The value provided for the new password does not meet the length, complexity, or history requirement of the domain. 1326 0x0000052E ERROR_LOGON_FAILURE Logon failure: unknown user name or bad password. 1327 0x0000052F ERROR_ACCOUNT_RESTRICTION Logon failure: user account restriction. 1328 0x00000530 ERROR_INVALID_LOGON_HOURS Logon failure: account logon time restriction violation. 1329 0x00000531 ERROR_INVALID_WORKSTATION Logon failure: user not allowed to log on to this computer. 1330 0x00000532 ERROR_PASSWORD_EXPIRED Logon failure: the specified account password has expired. 1331 0x00000533 ERROR_ACCOUNT_DISABLED Logon failure: account currently disabled. 1332 0x00000534 ERROR_NONE_MAPPED No mapping between account names and security IDs was done. 1333 0x00000535 ERROR_TOO_MANY_LUIDS_REQUESTED Too many local user identifiers (LUIDs) were requested at one time. 1334 0x00000536 ERROR_LUIDS_EXHAUSTED No more local user identifiers (LUIDs) are available. 1335 0x00000537 ERROR_INVALID_SUB_AUTHORITY The subauthority part of a security ID is invalid for this particular use. 1336 0x00000538 ERROR_INVALID_ACL The access control list (ACL) structure is invalid. 1337 0x00000539 ERROR_INVALID_SID The security ID structure is invalid. 1338 0x0000053A ERROR_INVALID_SECURITY_DESCR The security descriptor structure is invalid. 1340 0x0000053C ERROR_BAD_INHERITANCE_ACL The inherited access control list (ACL) or access control entry (ACE) could not be built. 1341 0x0000053D ERROR_SERVER_DISABLED The server is currently disabled. 1342 0x0000053E ERROR_SERVER_NOT_DISABLED The server is currently enabled. 1343 0x0000053F ERROR_INVALID_ID_AUTHORITY The value provided was an invalid value for an identifier authority. 1344 0x00000540 ERROR_ALLOTTED_SPACE_EXCEEDED No more memory is available for security information updates. 572 Version: 1.7.1 TF6510
## Page 573

PLC API Error Description decimal Hexadecimal Name 1345 0x00000541 ERROR_INVALID_GROUP_ATTRIBUTES The specified attributes are invalid, or incompatible with the attributes for the group as a whole. 1346 0x00000542 ERROR_BAD_IMPERSONATION_LEVEL Either a required impersonation level was not provided, or the provided impersonation level is invalid. 1347 0x00000543 ERROR_CANT_OPEN_ANONYMOUS Cannot open an anonymous level security token. 1348 0x00000544 ERROR_BAD_VALIDATION_CLASS The validation information class requested was invalid. 1349 0x00000545 ERROR_BAD_TOKEN_TYPE The type of the token is inappropriate for its attempted use. 1350 0x00000546 ERROR_NO_SECURITY_ON_OBJECT Unable to perform a security operation on an object that has no associated security. 1351 0x00000547 ERROR_CANT_ACCESS_DOMAIN_INFO Configuration information could not be read from the domain controller, either because the machine is unavailable, or access has been denied. 1352 0x00000548 ERROR_INVALID_SERVER_STATE The security account manager (SAM) or local security authority (LSA) server was in the wrong state to perform the security operation. 1353 0x00000549 ERROR_INVALID_DOMAIN_STATE The domain was in the wrong state to perform the security operation. 1354 0x0000054A ERROR_INVALID_DOMAIN_ROLE This operation is only allowed for the Primary Domain Controller of the domain. 1355 0x0000054B ERROR_NO_SUCH_DOMAIN The specified domain either does not exist or could not be contacted. 1356 0x0000054C ERROR_DOMAIN_EXISTS The specified domain already exists. 1357 0x0000054D ERROR_DOMAIN_LIMIT_EXCEEDED An attempt was made to exceed the limit on the number of domains per server. 1358 0x0000054E ERROR_INTERNAL_DB_CORRUPTION Unable to complete the requested operation because of either a catastrophic media failure or a data structure corruption on the disk. 1359 0x0000054F ERROR_INTERNAL_ERROR An internal error occurred. 1360 0x00000550 ERROR_GENERIC_NOT_MAPPED Generic access types were contained in an access mask which should already be mapped to nongeneric types. 1361 0x00000551 ERROR_BAD_DESCRIPTOR_FORMAT A security descriptor is not in the right format (absolute or self-relative). 1362 0x00000552 ERROR_NOT_LOGON_PROCESS The requested action is restricted for use by logon processes only. The calling process has not registered as a logon process. 1363 0x00000553 ERROR_LOGON_SESSION_EXISTS Cannot start a new logon session with an ID that is already in use. 1364 0x00000554 ERROR_NO_SUCH_PACKAGE A specified authentication package is unknown. 1365 0x00000555 ERROR_BAD_LOGON_SESSION_STATE The logon session is not in a state that is consistent with the requested operation. 1366 0x00000556 ERROR_LOGON_SESSION_COLLISION The logon session ID is already in use. 1367 0x00000557 ERROR_INVALID_LOGON_TYPE A logon request contained an invalid logon type value. 1368 0x00000558 ERROR_CANNOT_IMPERSONATE Unable to impersonate using a named pipe until data has been read from that pipe. 1369 0x00000559 ERROR_RXACT_INVALID_STATE The transaction state of a registry subtree is incompatible with the requested operation. 1370 0x0000055A ERROR_RXACT_COMMIT_FAILURE An internal security database corruption has been encountered. 1371 0x0000055B ERROR_SPECIAL_ACCOUNT Cannot perform this operation on built-in accounts. 1372 0x0000055C ERROR_SPECIAL_GROUP Cannot perform this operation on this built-in special group. 1373 0x0000055D ERROR_SPECIAL_USER Cannot perform this operation on this built-in special user. 1374 0x0000055E ERROR_MEMBERS_PRIMARY_GROUP The user cannot be removed from a group because the group is currently the user's primary group. 1375 0x0000055F ERROR_TOKEN_ALREADY_IN_USE The token is already in use as a primary token. 1376 0x00000560 ERROR_NO_SUCH_ALIAS The specified local group does not exist. TF6510 Version: 1.7.1 573
## Page 574

PLC API Error Description decimal Hexadecimal Name 1377 0x00000561 ERROR_MEMBER_NOT_IN_ALIAS The specified account name is not a member of the local group. 1378 0x00000562 ERROR_MEMBER_IN_ALIAS The specified account name is already a member of the local group. 1379 0x00000563 ERROR_ALIAS_EXISTS The specified local group already exists. 1380 0x00000564 ERROR_LOGON_NOT_GRANTED Logon failure: the user has not been granted the requested logon type at this computer. 1381 0x00000565 ERROR_TOO_MANY_SECRETS The maximum number of secrets that may be stored in a single system has been exceeded. 1382 0x00000566 ERROR_SECRET_TOO_LONG The length of a secret exceeds the maximum length allowed. 1383 0x00000567 ERROR_INTERNAL_DB_ERROR The local security authority database contains an internal inconsistency. 1384 0x00000568 ERROR_TOO_MANY_CONTEXT_IDS During a logon attempt, the user's security context accumulated too many security IDs. 1385 0x00000569 ERROR_LOGON_TYPE_NOT_GRANTED Logon failure: the user has not been granted the requested logon type at this computer. 1386 0x0000056A ERROR_NT_CROSS_ENCRYPTION_REQUIRED A cross-encrypted password is necessary to change a user password. 1387 0x0000056B ERROR_NO_SUCH_MEMBER A new member could not be added to or removed from the local group because the member does not exist. 1388 0x0000056C ERROR_INVALID_MEMBER A new member could not be added to a local group because the member has the wrong account type. 1389 0x0000056D ERROR_TOO_MANY_SIDS Too many security IDs have been specified. 1390 0x0000056E ERROR_LM_CROSS_ENCRYPTION_REQUIRED A cross-encrypted password is necessary to change this user password. 1391 0x0000056F ERROR_NO_INHERITANCE Indicates an ACL contains no inheritable components. 1392 0x00000570 ERROR_FILE_CORRUPT The file or directory is corrupted and unreadable. 1393 0x00000571 ERROR_DISK_CORRUPT The disk structure is corrupted and unreadable. 1394 0x00000572 ERROR_NO_USER_SESSION_KEY There is no user session key for the specified logon session. 1395 0x00000573 ERROR_LICENSE_QUOTA_EXCEEDED The service being accessed is licensed for a particular number of connections. No more connections can be made to the service at this time because there are already as many connections as the service can accept. 1396 0x00000574 ERROR_WRONG_TARGET_NAME Logon Failure: The target account name is incorrect. 1397 0x00000575 ERROR_MUTUAL_AUTH_FAILED Mutual Authentication failed. The server's password is out of date at the domain controller. 1398 0x00000576 ERROR_TIME_SKEW There is a time difference between the client and server. 1399 0x00000577 ERROR_CURRENT_DOMAIN_NOT_ALLOWED This operation can not be performed on the current domain. 574 Version: 1.7.1 TF6510
## Page 575

PLC API Error Description decimal Hexadecimal Name 1400 0x00000578 ERROR_INVALID_WINDOW_HANDLE Invalid window handle. 1401 0x00000579 ERROR_INVALID_MENU_HANDLE Invalid menu handle. 1402 0x0000057A ERROR_INVALID_CURSOR_HANDLE Invalid cursor handle. 1403 0x0000057B ERROR_INVALID_ACCEL_HANDLE Invalid accelerator table handle. 1404 0x0000057C ERROR_INVALID_HOOK_HANDLE Invalid hook handle. 1405 0x0000057D ERROR_INVALID_DWP_HANDLE Invalid handle to a multiple-window position structure. 1406 0x0000057E ERROR_TLW_WITH_WSCHILD Cannot create a top-level child window. 1407 0x0000057F ERROR_CANNOT_FIND_WND_CLASS Cannot find window class. 1408 0x00000580 ERROR_WINDOW_OF_OTHER_THREAD Invalid window; it belongs to other thread. 1409 0x00000581 ERROR_HOTKEY_ALREADY_REGISTERED Hot key is already registered. 1410 0x00000582 ERROR_CLASS_ALREADY_EXISTS Class already exists. 1411 0x00000583 ERROR_CLASS_DOES_NOT_EXIST Class does not exist. 1412 0x00000584 ERROR_CLASS_HAS_WINDOWS Class still has open windows. 1413 0x00000585 ERROR_INVALID_INDEX Invalid index. 1414 0x00000586 ERROR_INVALID_ICON_HANDLE Invalid icon handle. 1415 0x00000587 ERROR_PRIVATE_DIALOG_INDEX Using private DIALOG window words. 1416 0x00000588 ERROR_LISTBOX_ID_NOT_FOUND The list box identifier was not found. 1417 0x00000589 ERROR_NO_WILDCARD_CHARACTERS No wildcards were found. 1418 0x0000058A ERROR_CLIPBOARD_NOT_OPEN Thread does not have a clipboard open. 1419 0x0000058B ERROR_HOTKEY_NOT_REGISTERED Hot key is not registered. 1420 0x0000058C ERROR_WINDOW_NOT_DIALOG The window is not a valid dialog window. 1421 0x0000058D ERROR_CONTROL_ID_NOT_FOUND Control ID not found. 1422 0x0000058E ERROR_INVALID_COMBOBOX_MESSAGE Invalid message for a combo box because it does not have an edit control. 1423 0x0000058F ERROR_WINDOW_NOT_COMBOBOX The window is not a combo box. 1424 0x00000590 ERROR_INVALID_EDIT_HEIGHT Height must be less than 256. 1425 0x00000591 ERROR_DC_NOT_FOUND Invalid device context (DC) handle. 1426 0x00000592 ERROR_INVALID_HOOK_FILTER Invalid hook procedure type. 1427 0x00000593 ERROR_INVALID_FILTER_PROC Invalid hook procedure. 1428 0x00000594 ERROR_HOOK_NEEDS_HMOD Cannot set nonlocal hook without a module handle. 1429 0x00000595 ERROR_GLOBAL_ONLY_HOOK This hook procedure can only be set globally. 1430 0x00000596 ERROR_JOURNAL_HOOK_SET The journal hook procedure is already installed. 1431 0x00000597 ERROR_HOOK_NOT_INSTALLED The hook procedure is not installed. 1432 0x00000598 ERROR_INVALID_LB_MESSAGE Invalid message for single-selection list box. 1433 0x00000599 ERROR_SETCOUNT_ON_BAD_LB LB_SETCOUNT sent to non-lazy list box. 1434 0x0000059A ERROR_LB_WITHOUT_TABSTOPS This list box does not support tab stops. 1435 0x0000059B ERROR_DESTROY_OBJECT_OF_OTHER_THRE Cannot destroy object created by another thread. AD 1436 0x0000059C ERROR_CHILD_WINDOW_MENU Child windows cannot have menus. 1437 0x0000059D ERROR_NO_SYSTEM_MENU The window does not have a system menu. 1438 0x0000059E ERROR_INVALID_MSGBOX_STYLE Invalid message box style. 1439 0x0000059F ERROR_INVALID_SPI_VALUE Invalid system-wide (SPI_*) parameter. 1440 0x000005A0 ERROR_SCREEN_ALREADY_LOCKED Screen already locked. 1441 0x000005A1 ERROR_HWNDS_HAVE_DIFF_PARENT All handles to windows in a multiple-window position structure must have the same parent. 1442 0x000005A2 ERROR_NOT_CHILD_WINDOW The window is not a child window. 1443 0x000005A3 ERROR_INVALID_GW_COMMAND Invalid GW_* command. 1444 0x000005A4 ERROR_INVALID_THREAD_ID Invalid thread identifier. 1445 0x000005A5 ERROR_NON_MDICHILD_WINDOW Cannot process a message from a window that is not a multiple document interface (MDI) window. 1446 0x000005A6 ERROR_POPUP_ALREADY_ACTIVE Popup menu already active. 1447 0x000005A7 ERROR_NO_SCROLLBARS The window does not have scroll bars. 1448 0x000005A8 ERROR_INVALID_SCROLLBAR_RANGE Scroll bar range cannot be greater than MAXLONG. 1449 0x000005A9 ERROR_INVALID_SHOWWIN_COMMAND Cannot show or remove the window in the way specified. TF6510 Version: 1.7.1 575
## Page 576

PLC API Error Description decimal Hexadecimal Name 1450 0x000005AA ERROR_NO_SYSTEM_RESOURCES Insufficient system resources exist to complete the requested service. 1451 0x000005AB ERROR_NONPAGED_SYSTEM_RESOURCES Insufficient system resources exist to complete the requested service. 1452 0x000005AC ERROR_PAGED_SYSTEM_RESOURCES Insufficient system resources exist to complete the requested service. 1453 0x000005AD ERROR_WORKING_SET_QUOTA Insufficient quota to complete the requested service. 1454 0x000005AE ERROR_PAGEFILE_QUOTA Insufficient quota to complete the requested service. 1455 0x000005AF ERROR_COMMITMENT_LIMIT The paging file is too small for this operation to complete. 1456 0x000005B0 ERROR_MENU_ITEM_NOT_FOUND A menu item was not found. 1457 0x000005B1 ERROR_INVALID_KEYBOARD_HANDLE Invalid keyboard layout handle. 1458 0x000005B2 ERROR_HOOK_TYPE_NOT_ALLOWED Hook type not allowed. 1459 0x000005B3 ERROR_REQUIRES_INTERACTIVE_WINDOWST This operation requires an interactive window ATION station. 1460 0x000005B4 ERROR_TIMEOUT This operation returned because the timeout period expired. 1461 0x000005B5 ERROR_INVALID_MONITOR_HANDLE Invalid monitor handle. 1500 0x000005DC ERROR_EVENTLOG_FILE_CORRUPT The event log file is corrupted. 1501 0x000005DD ERROR_EVENTLOG_CANT_START No event log file could be opened, so the event logging service did not start. 1502 0x000005DE ERROR_LOG_FILE_FULL The event log file is full. 1503 0x000005DF ERROR_EVENTLOG_FILE_CHANGED The event log file has changed between read operations. 576 Version: 1.7.1 TF6510
## Page 577

PLC API Error Description decimal Hexadecimal Name 1601 0x00000641 ERROR_INSTALL_SERVICE_FAILURE The Windows Installer service could not be accessed. Contact your support personnel to verify that the Windows Installer service is properly registered. 1602 0x00000642 ERROR_INSTALL_USEREXIT User cancelled installation. 1603 0x00000643 ERROR_INSTALL_FAILURE Fatal error during installation. 1604 0x00000644 ERROR_INSTALL_SUSPEND Installation suspended, incomplete. 1605 0x00000645 ERROR_UNKNOWN_PRODUCT This action is only valid for products that are currently installed. 1606 0x00000646 ERROR_UNKNOWN_FEATURE Feature ID not registered. 1607 0x00000647 ERROR_UNKNOWN_COMPONENT Component ID not registered. 1608 0x00000648 ERROR_UNKNOWN_PROPERTY Unknown property. 1609 0x00000649 ERROR_INVALID_HANDLE_STATE Handle is in an invalid state. 1610 0x0000064A ERROR_BAD_CONFIGURATION The configuration data for this product is corrupt. Contact your support personnel. 1611 0x0000064B ERROR_INDEX_ABSENT Component qualifier not present. 1612 0x0000064C ERROR_INSTALL_SOURCE_ABSENT The installation source for this product is not available. Verify that the source exists and that you can access it. 1613 0x0000064D ERROR_INSTALL_PACKAGE_VERSION This installation package cannot be installed by the Windows Installer service. You must install a Windows service pack that contains a newer version of the Windows Installer service. 1614 0x0000064E ERROR_PRODUCT_UNINSTALLED Product is uninstalled. 1615 0x0000064F ERROR_BAD_QUERY_SYNTAX SQL query syntax invalid or unsupported. 1616 0x00000650 ERROR_INVALID_FIELD Record field does not exist. 1617 0x00000651 ERROR_DEVICE_REMOVED The device has been removed. 1618 0x00000652 ERROR_INSTALL_ALREADY_RUNNING Another installation is already in progress. Complete that installation before proceeding with this install. 1619 0x00000653 ERROR_INSTALL_PACKAGE_OPEN_FAILED This installation package could not be opened. Verify that the package exists and that you can access it, or contact the application vendor to verify that this is a valid Windows Installer package. 1620 0x00000654 ERROR_INSTALL_PACKAGE_INVALID This installation package could not be opened. Contact the application vendor to verify that this is a valid Windows Installer package. 1621 0x00000655 ERROR_INSTALL_UI_FAILURE There was an error starting the Windows Installer service user interface. Contact your support personnel. 1622 0x00000656 ERROR_INSTALL_LOG_FAILURE Error opening installation log file. Verify that the specified log file location exists and that you can write to it. 1623 0x00000657 ERROR_INSTALL_LANGUAGE_UNSUPPORTED The language of this installation package is not supported by your system. 1624 0x00000658 ERROR_INSTALL_TRANSFORM_FAILURE Error applying transforms. Verify that the specified transform paths are valid. 1625 0x00000659 ERROR_INSTALL_PACKAGE_REJECTED This installation is forbidden by system policy. Contact your system administrator. 1626 0x0000065A ERROR_FUNCTION_NOT_CALLED Function could not be executed. 1627 0x0000065B ERROR_FUNCTION_FAILED Function failed during execution. 1628 0x0000065C ERROR_INVALID_TABLE Invalid or unknown table specified. 1629 0x0000065D ERROR_DATATYPE_MISMATCH Data supplied is of wrong type. 1630 0x0000065E ERROR_UNSUPPORTED_TYPE Data of this type is not supported. 1631 0x0000065F ERROR_CREATE_FAILED The Windows Installer service failed to start. Contact your support personnel. 1632 0x00000660 ERROR_INSTALL_TEMP_UNWRITABLE The temp folder is either full or inaccessible. Verify that the temp folder exists and that you can write to it. 1633 0x00000661 ERROR_INSTALL_PLATFORM_UNSUPPORTED This installation package is not supported by this processor type. Contact your product vendor. 1634 0x00000662 ERROR_INSTALL_NOTUSED Component not used on this computer. TF6510 Version: 1.7.1 577
## Page 578

PLC API Error Description decimal Hexadecimal Name 1635 0x00000663 ERROR_PATCH_PACKAGE_OPEN_FAILED This patch package could not be opened. Verify that the patch package exists and that you can access it, or contact the application vendor to verify that this is a valid Windows Installer patch package. 1636 0x00000664 ERROR_PATCH_PACKAGE_INVALID This patch package could not be opened. Contact the application vendor to verify that this is a valid Windows Installer patch package. 1637 0x00000665 ERROR_PATCH_PACKAGE_UNSUPPORTED. This patch package cannot be processed by the Windows Installer service. You must install a Windows service pack that contains a newer version of the Windows Installer service. 1638 0x00000666 ERROR_PRODUCT_VERSION Another version of this product is already installed. Installation of this version cannot continue. To configure or remove the existing version of this product, use Add/Remove Programs on the Control Panel. 1639 0x00000667 ERROR_INVALID_COMMAND_LINE Invalid command line argument. Consult the Windows Installer SDK for detailed command line help. 1640 0x00000668 ERROR_INSTALL_REMOTE_DISALLOWED Only administrators have permission to add, remove, or configure server software during a Terminal Services remote session. If you want to install or configure software on the server, contact your network administrator. 1641 0x00000669 ERROR_SUCCESS_REBOOT_INITIATED The requested operation completed successfully. The system will be restarted so the changes can take effect. 1642 0x0000066A ERROR_PATCH_TARGET_NOT_FOUND The upgrade patch cannot be installed by the Windows Installer service because the program to be upgraded may be missing, or the upgrade patch may update a different version of the program. Verify that the program to be upgraded exists on your computer and that you have the correct upgrade patch. 1643 0x0000066B ERROR_PATCH_PACKAGE_REJECTED The patch package is not permitted by system policy. It is not signed with an appropriate certificate. 1644 0x0000066C ERROR_INSTALL_TRANSFORM_REJECTED One or more customizations are not permitted by system policy. They are not signed with an appropriate certificate. 1700 0x000006A4 RPC_S_INVALID_STRING_BINDING The string binding is invalid. 1701 0x000006A5 RPC_S_WRONG_KIND_OF_BINDING The binding handle is not the correct type. 1702 0x000006A6 RPC_S_INVALID_BINDING The binding handle is invalid. 1703 0x000006A7 RPC_S_PROTSEQ_NOT_SUPPORTED The RPC protocol sequence is not supported. 1704 0x000006A8 RPC_S_INVALID_RPC_PROTSEQ The RPC protocol sequence is invalid. 1705 0x000006A9 RPC_S_INVALID_STRING_UUID The string universal unique identifier (UUID) is invalid. 1706 0x000006AA RPC_S_INVALID_ENDPOINT_FORMAT The endpoint format is invalid. 1707 0x000006AB RPC_S_INVALID_NET_ADDR The network address is invalid. 1708 0x000006AC RPC_S_NO_ENDPOINT_FOUND No endpoint was found. 1709 0x000006AD RPC_S_INVALID_TIMEOUT The timeout value is invalid. 1710 0x000006AE RPC_S_OBJECT_NOT_FOUND The object universal unique identifier (UUID) was not found. 1711 0x000006AF RPC_S_ALREADY_REGISTERED The object universal unique identifier (UUID) has already been registered. 1712 0x000006B0 RPC_S_TYPE_ALREADY_REGISTERED The type universal unique identifier (UUID) has already been registered. 1713 0x000006B1 RPC_S_ALREADY_LISTENING The RPC server is already listening. 1714 0x000006B2 RPC_S_NO_PROTSEQS_REGISTERED No protocol sequences have been registered. 1715 0x000006B3 RPC_S_NOT_LISTENING The RPC server is not listening. 1716 0x000006B4 RPC_S_UNKNOWN_MGR_TYPE The manager type is unknown. 1717 0x000006B5 RPC_S_UNKNOWN_IF The interface is unknown. 1718 0x000006B6 RPC_S_NO_BINDINGS There are no bindings. 1719 0x000006B7 RPC_S_NO_PROTSEQS There are no protocol sequences. 1720 0x000006B8 RPC_S_CANT_CREATE_ENDPOINT The endpoint cannot be created. 578 Version: 1.7.1 TF6510
## Page 579

PLC API Error Description decimal Hexadecimal Name 1721 0x000006B9 RPC_S_OUT_OF_RESOURCES Not enough resources are available to complete this operation. 1722 0x000006BA RPC_S_SERVER_UNAVAILABLE The RPC server is unavailable. 1723 0x000006BB RPC_S_SERVER_TOO_BUSY The RPC server is too busy to complete this operation. 1724 0x000006BC RPC_S_INVALID_NETWORK_OPTIONS The network options are invalid. 1725 0x000006BD RPC_S_NO_CALL_ACTIVE There are no remote procedure calls active on this thread. 1726 0x000006BE RPC_S_CALL_FAILED The remote procedure call failed. 1727 0x000006BF RPC_S_CALL_FAILED_DNE The remote procedure call failed and did not execute. 1728 0x000006C0 RPC_S_PROTOCOL_ERROR A remote procedure call (RPC) protocol error occurred. 1730 0x000006C2 RPC_S_UNSUPPORTED_TRANS_SYN The transfer syntax is not supported by the RPC server. 1732 0x000006C4 RPC_S_UNSUPPORTED_TYPE The universal unique identifier (UUID) type is not supported. 1733 0x000006C5 RPC_S_INVALID_TAG The tag is invalid. 1734 0x000006C6 RPC_S_INVALID_BOUND The array bounds are invalid. 1735 0x000006C7 RPC_S_NO_ENTRY_NAME The binding does not contain an entry name. 1736 0x000006C8 RPC_S_INVALID_NAME_SYNTAX The name syntax is invalid. 1737 0x000006C9 RPC_S_UNSUPPORTED_NAME_SYNTAX The name syntax is not supported. 1739 0x000006CB RPC_S_UUID_NO_ADDRESS No network address is available to use to construct a universal unique identifier (UUID). 1740 0x000006CC RPC_S_DUPLICATE_ENDPOINT The endpoint is a duplicate. 1741 0x000006CD RPC_S_UNKNOWN_AUTHN_TYPE The authentication type is unknown. 1742 0x000006CE RPC_S_MAX_CALLS_TOO_SMALL The maximum number of calls is too small. 1743 0x000006CF RPC_S_STRING_TOO_LONG The string is too long. 1744 0x000006D0 RPC_S_PROTSEQ_NOT_FOUND The RPC protocol sequence was not found. 1745 0x000006D1 RPC_S_PROCNUM_OUT_OF_RANGE The procedure number is out of range. 1746 0x000006D2 RPC_S_BINDING_HAS_NO_AUTH The binding does not contain any authentication information. 1747 0x000006D3 RPC_S_UNKNOWN_AUTHN_SERVICE The authentication service is unknown. 1748 0x000006D4 RPC_S_UNKNOWN_AUTHN_LEVEL The authentication level is unknown. 1749 0x000006D5 RPC_S_INVALID_AUTH_IDENTITY The security context is invalid. 1750 0x000006D6 RPC_S_UNKNOWN_AUTHZ_SERVICE The authorization service is unknown. 1751 0x000006D7 EPT_S_INVALID_ENTRY The entry is invalid. 1752 0x000006D8 EPT_S_CANT_PERFORM_OP The server endpoint cannot perform the operation. 1753 0x000006D9 EPT_S_NOT_REGISTERED There are no more endpoints available from the endpoint mapper. 1754 0x000006DA RPC_S_NOTHING_TO_EXPORT No interfaces have been exported. 1755 0x000006DB RPC_S_INCOMPLETE_NAME The entry name is incomplete. 1756 0x000006DC RPC_S_INVALID_VERS_OPTION The version option is invalid. 1757 0x000006DD RPC_S_NO_MORE_MEMBERS There are no more members. 1758 0x000006DE RPC_S_NOT_ALL_OBJS_UNEXPORTED There is nothing to unexport. 1759 0x000006DF RPC_S_INTERFACE_NOT_FOUND The interface was not found. 1760 0x000006E0 RPC_S_ENTRY_ALREADY_EXISTS The entry already exists. 1761 0x000006E1 RPC_S_ENTRY_NOT_FOUND The entry is not found. 1762 0x000006E2 RPC_S_NAME_SERVICE_UNAVAILABLE The name service is unavailable. 1763 0x000006E3 RPC_S_INVALID_NAF_ID The network address family is invalid. 1764 0x000006E4 RPC_S_CANNOT_SUPPORT The requested operation is not supported. 1765 0x000006E5 RPC_S_NO_CONTEXT_AVAILABLE No security context is available to allow impersonation. 1766 0x000006E6 RPC_S_INTERNAL_ERROR An internal error occurred in a remote procedure call (RPC). 1767 0x000006E7 RPC_S_ZERO_DIVIDE The RPC server attempted an integer division by zero. 1768 0x000006E8 RPC_S_ADDRESS_ERROR An addressing error occurred in the RPC server. 1769 0x000006E9 RPC_S_FP_DIV_ZERO A floating-point operation at the RPC server caused a division by zero. TF6510 Version: 1.7.1 579
## Page 580

PLC API Error Description decimal Hexadecimal Name 1770 0x000006EA RPC_S_FP_UNDERFLOW A floating-point underflow occurred at the RPC server. 1771 0x000006EB RPC_S_FP_OVERFLOW A floating-point overflow occurred at the RPC server. 1772 0x000006EC RPC_X_NO_MORE_ENTRIES The list of RPC servers available for the binding of auto handles has been exhausted. 1773 0x000006ED RPC_X_SS_CHAR_TRANS_OPEN_FAIL Unable to open the character translation table file. 1774 0x000006EE RPC_X_SS_CHAR_TRANS_SHORT_FILE The file containing the character translation table has fewer than 512 bytes. 1775 0x000006EF RPC_X_SS_IN_NULL_CONTEXT A null context handle was passed from the client to the host during a remote procedure call. 1777 0x000006F1 RPC_X_SS_CONTEXT_DAMAGED The context handle changed during a remote procedure call. 1778 0x000006F2 RPC_X_SS_HANDLES_MISMATCH The binding handles passed to a remote procedure call do not match. 1779 0x000006F3 RPC_X_SS_CANNOT_GET_CALL_HANDLE The stub is unable to get the remote procedure call handle. 1780 0x000006F4 RPC_X_NULL_REF_POINTER A null reference pointer was passed to the stub. 1781 0x000006F5 RPC_X_ENUM_VALUE_OUT_OF_RANGE The enumeration value is out of range. 1782 0x000006F6 RPC_X_BYTE_COUNT_TOO_SMALL The byte count is too small. 1783 0x000006F7 RPC_X_BAD_STUB_DATA The stub received bad data. 1784 0x000006F8 ERROR_INVALID_USER_BUFFER The supplied user buffer is not valid for the requested operation. 1785 0x000006F9 ERROR_UNRECOGNIZED_MEDIA The disk media is not recognized. It may not be formatted. 1786 0x000006FA ERROR_NO_TRUST_LSA_SECRET The workstation does not have a trust secret. 1787 0x000006FB ERROR_NO_TRUST_SAM_ACCOUNT The security database on the server does not have a computer account for this workstation trust relationship. 1788 0x000006FC ERROR_TRUSTED_DOMAIN_FAILURE The trust relationship between the primary domain and the trusted domain failed. 1789 0x000006FD ERROR_TRUSTED_RELATIONSHIP_FAILURE The trust relationship between this workstation and the primary domain failed. 1790 0x000006FE ERROR_TRUST_FAILURE The network logon failed. 1791 0x000006FF RPC_S_CALL_IN_PROGRESS A remote procedure call is already in progress for this thread. 1792 0x00000700 ERROR_NETLOGON_NOT_STARTED An attempt was made to logon, but the network logon service was not started. 1793 0x00000701 ERROR_ACCOUNT_EXPIRED The user's account has expired. 1794 0x00000702 ERROR_REDIRECTOR_HAS_OPEN_HANDLES The redirector is in use and cannot be unloaded. 1795 0x00000703 ERROR_PRINTER_DRIVER_ALREADY_INSTALL The specified printer driver is already installed. ED 1796 0x00000704 ERROR_UNKNOWN_PORT The specified port is unknown. 1797 0x00000705 ERROR_UNKNOWN_PRINTER_DRIVER The printer driver is unknown. 1798 0x00000706 ERROR_UNKNOWN_PRINTPROCESSOR The print processor is unknown. 1799 0x00000707 ERROR_INVALID_SEPARATOR_FILE The specified separator file is invalid. 580 Version: 1.7.1 TF6510
## Page 581

PLC API Error Description decimal Hexadecimal Name 1800 0x00000708 ERROR_INVALID_PRIORITY The specified priority is invalid. 1801 0x00000709 ERROR_INVALID_PRINTER_NAME The printer name is invalid. 1802 0x0000070A ERROR_PRINTER_ALREADY_EXISTS The printer already exists. 1803 0x0000070B ERROR_INVALID_PRINTER_COMMAND The printer command is invalid. 1804 0x0000070C ERROR_INVALID_DATATYPE The specified datatype is invalid. 1805 0x0000070D ERROR_INVALID_ENVIRONMENT The environment specified is invalid. 1806 0x0000070E RPC_S_NO_MORE_BINDINGS There are no more bindings. 1807 0x0000070F ERROR_NOLOGON_INTERDOMAIN_TRUST_AC The account used is an interdomain trust account. COUNT Use your global user account or local user account to access this server. 1808 0x00000710 ERROR_NOLOGON_WORKSTATION_TRUST_AC The account used is a computer account. Use COUNT your global user account or local user account to access this server. 1809 0x00000711 ERROR_NOLOGON_SERVER_TRUST_ACCOUN The account used is a server trust account. Use T your global user account or local user account to access this server. 1810 0x00000712 ERROR_DOMAIN_TRUST_INCONSISTENT The name or security ID (SID) of the domain specified is inconsistent with the trust information for that domain. 1811 0x00000713 ERROR_SERVER_HAS_OPEN_HANDLES The server is in use and cannot be unloaded. 1812 0x00000714 ERROR_RESOURCE_DATA_NOT_FOUND The specified image file did not contain a resource section. 1813 0x00000715 ERROR_RESOURCE_TYPE_NOT_FOUND The specified resource type cannot be found in the image file. 1814 0x00000716 ERROR_RESOURCE_NAME_NOT_FOUND The specified resource name cannot be found in the image file. 1815 0x00000717 ERROR_RESOURCE_LANG_NOT_FOUND The specified resource language ID cannot be found in the image file. 1816 0x00000718 ERROR_NOT_ENOUGH_QUOTA Not enough quota is available to process this command. 1817 0x00000719 RPC_S_NO_INTERFACES No interfaces have been registered. 1818 0x0000071A RPC_S_CALL_CANCELLED The remote procedure call was cancelled. 1819 0x0000071B RPC_S_BINDING_INCOMPLETE The binding handle does not contain all required information. 1820 0x0000071C RPC_S_COMM_FAILURE A communications failure occurred during a remote procedure call. 1821 0x0000071D RPC_S_UNSUPPORTED_AUTHN_LEVEL The requested authentication level is not supported. 1822 0x0000071E RPC_S_NO_PRINC_NAME No principal name registered. 1823 0x0000071F RPC_S_NOT_RPC_ERROR The error specified is not a valid Windows RPC error code. 1824 0x00000720 RPC_S_UUID_LOCAL_ONLY A UUID that is valid only on this computer has been allocated. 1825 0x00000721 RPC_S_SEC_PKG_ERROR A security package specific error occurred. 1826 0x00000722 RPC_S_NOT_CANCELLED Thread is not canceled. 1827 0x00000723 RPC_X_INVALID_ES_ACTION Invalid operation on the encoding/decoding handle. 1828 0x00000724 RPC_X_WRONG_ES_VERSION Incompatible version of the serializing package. 1829 0x00000725 RPC_X_WRONG_STUB_VERSION Incompatible version of the RPC stub. 1830 0x00000726 RPC_X_INVALID_PIPE_OBJECT The RPC pipe object is invalid or corrupted. 1831 0x00000727 RPC_X_WRONG_PIPE_ORDER An invalid operation was attempted on an RPC pipe object. 1832 0x00000728 RPC_X_WRONG_PIPE_VERSION Unsupported RPC pipe version. 1898 0x0000076A RPC_S_GROUP_MEMBER_NOT_FOUND The group member was not found. 1899 0x0000076B EPT_S_CANT_CREATE The endpoint mapper database entry could not be created. 1900 0x0000076C RPC_S_INVALID_OBJECT The object universal unique identifier (UUID) is the nil UUID. 1901 0x0000076D ERROR_INVALID_TIME The specified time is invalid. 1902 0x0000076E ERROR_INVALID_FORM_NAME The specified form name is invalid. 1903 0x0000076F ERROR_INVALID_FORM_SIZE The specified form size is invalid. 1904 0x00000770 ERROR_ALREADY_WAITING The specified printer handle is already being waited on TF6510 Version: 1.7.1 581
## Page 582

PLC API Error Description decimal Hexadecimal Name 1905 0x00000771 ERROR_PRINTER_DELETED The specified printer has been deleted. 1906 0x00000772 ERROR_INVALID_PRINTER_STATE The state of the printer is invalid. 1907 0x00000773 ERROR_PASSWORD_MUST_CHANGE The user's password must be changed before logging on the first time. 1908 0x00000774 ERROR_DOMAIN_CONTROLLER_NOT_FOUND Could not find the domain controller for this domain. 1909 0x00000775 ERROR_ACCOUNT_LOCKED_OUT The referenced account is currently locked out and may not be logged on to. 1910 0x00000776 OR_INVALID_OXID The object exporter specified was not found. 1911 0x00000777 OR_INVALID_OID The object specified was not found. 1912 0x00000778 OR_INVALID_SET The object resolver set specified was not found. 1913 0x00000779 RPC_S_SEND_INCOMPLETE Some data remains to be sent in the request buffer. 1914 0x0000077A RPC_S_INVALID_ASYNC_HANDLE Invalid asynchronous remote procedure call handle. 1915 0x0000077B RPC_S_INVALID_ASYNC_CALL Invalid asynchronous RPC call handle for this operation. 1916 0x0000077C RPC_X_PIPE_CLOSED The RPC pipe object has already been closed. 1917 0x0000077D RPC_X_PIPE_DISCIPLINE_ERROR The RPC call completed before all pipes were processed. 1918 0x0000077E RPC_X_PIPE_EMPTY No more data is available from the RPC pipe. 1919 0x0000077F ERROR_NO_SITENAME No site name is available for this machine. 1920 0x00000780 ERROR_CANT_ACCESS_FILE The file can not be accessed by the system. 1921 0x00000781 ERROR_CANT_RESOLVE_FILENAME The name of the file cannot be resolved by the system. 1922 0x00000782 RPC_S_ENTRY_TYPE_MISMATCH The entry is not of the expected type. 1923 0x00000783 RPC_S_NOT_ALL_OBJS_EXPORTED Not all object UUIDs could be exported to the specified entry. 1924 0x00000784 RPC_S_INTERFACE_NOT_EXPORTED Interface could not be exported to the specified entry. 1925 0x00000785 RPC_S_PROFILE_NOT_ADDED The specified profile entry could not be added. 1926 0x00000786 RPC_S_PRF_ELT_NOT_ADDED The specified profile element could not be added. 1927 0x00000787 RPC_S_PRF_ELT_NOT_REMOVED The specified profile element could not be removed. 1928 0x00000788 RPC_S_GRP_ELT_NOT_ADDED The group element could not be added. 1929 0x00000789 RPC_S_GRP_ELT_NOT_REMOVED The group element could not be removed. 1930 0x0000078A ERROR_KM_DRIVER_BLOCKED The printer driver is not compatible with a policy enabled on your computer that blocks NT 4.0 drivers. 582 Version: 1.7.1 TF6510
## Page 583

PLC API Error Description decimal Hexadecimal Name 2000 0x000007D0 ERROR_INVALID_PIXEL_FORMAT The pixel format is invalid. 2001 0x000007D1 ERROR_BAD_DRIVER The specified driver is invalid. 2002 0x000007D2 ERROR_INVALID_WINDOW_STYLE The window style or class attribute is invalid for this operation. 2003 0x000007D3 ERROR_METAFILE_NOT_SUPPORTED The requested metafile operation is not supported. 2004 0x000007D4 ERROR_TRANSFORM_NOT_SUPPORTED The requested transformation operation is not supported. 2005 0x000007D5 ERROR_CLIPPING_NOT_SUPPORTED The requested clipping operation is not supported. 2010 0x000007DA ERROR_INVALID_CMM The specified color management module is invalid. 2011 0x000007DB ERROR_INVALID_PROFILE The specified color profile is invalid. 2012 0x000007DC ERROR_TAG_NOT_FOUND The specified tag was not found. 2013 0x000007DD ERROR_TAG_NOT_PRESENT A required tag is not present. 2014 0x000007DE ERROR_DUPLICATE_TAG The specified tag is already present. 2015 0x000007DF ERROR_PROFILE_NOT_ASSOCIATED_WITH_DE The specified color profile is not associated with VICE any device. 2016 0x000007E0 ERROR_PROFILE_NOT_FOUND The specified color profile was not found. 2017 0x000007E1 ERROR_INVALID_COLORSPACE The specified color space is invalid. 2018 0x000007E2 ERROR_ICM_NOT_ENABLED Image Color Management is not enabled. 2019 0x000007E3 ERROR_DELETING_ICM_XFORM There was an error while deleting the color transform. 2020 0x000007E4 ERROR_INVALID_TRANSFORM The specified color transform is invalid. 2021 0x000007E5 ERROR_COLORSPACE_MISMATCH The specified transform does not match the bitmap's color space. 2022 0x000007E6 ERROR_INVALID_COLORINDEX The specified named color index is not present in the profile. 2108 0x0000083C ERROR_CONNECTED_OTHER_PASSWORD The network connection was made successfully, but the user had to be prompted for a password other than the one originally specified. 2202 0x0000089A ERROR_BAD_USERNAME The specified username is invalid. 2250 0x000008CA ERROR_NOT_CONNECTED This network connection does not exist. 2401 0x00000961 ERROR_OPEN_FILES This network connection has files open or requests pending. 2402 0x00000962 ERROR_ACTIVE_CONNECTIONS Active connections still exist. 2404 0x00000964 ERROR_DEVICE_IN_USE The device is in use by an active process and cannot be disconnected. 2500 0x000009C4 ERROR_PKINIT_FAILURE The kerberos protocol encountered an error while validating the KDC certificate during smartcard logon. 2501 0x000009C5 ERROR_SMARTCARD_SUBSYSTEM_FAILURE The kerberos protocol encountered an error while attempting to utilize the smartcard subsystem. TF6510 Version: 1.7.1 583
## Page 584

PLC API Error Description decimal Hexadecimal Name 3000 0x00000BB8 ERROR_UNKNOWN_PRINT_MONITOR The specified print monitor is unknown. 3001 0x00000BB9 ERROR_PRINTER_DRIVER_IN_USE The specified printer driver is currently in use. 3002 0x00000BBA ERROR_SPOOL_FILE_NOT_FOUND The spool file was not found. 3003 0x00000BBB ERROR_SPL_NO_STARTDOC A Start Doc Printer call was not issued. 3004 0x00000BBC ERROR_SPL_NO_ADDJOB An Add Job call was not issued. 3005 0x00000BBD ERROR_PRINT_PROCESSOR_ALREADY_INSTA The specified print processor has already been LLED installed. 3006 0x00000BBE ERROR_PRINT_MONITOR_ALREADY_INSTALLE The specified print monitor has already been D installed. 3007 0x00000BBF ERROR_INVALID_PRINT_MONITOR The specified print monitor does not have the required functions. 3008 0x00000BC0 ERROR_PRINT_MONITOR_IN_USE The specified print monitor is currently in use. 3009 0x00000BC1 ERROR_PRINTER_HAS_JOBS_QUEUED The requested operation is not allowed when there are jobs queued to the printer. 3010 0x00000BC2 ERROR_SUCCESS_REBOOT_REQUIRED The requested operation is successful. Changes will not be effective until the system is rebooted. 3011 0x00000BC3 ERROR_SUCCESS_RESTART_REQUIRED The requested operation is successful. Changes will not be effective until the service is restarted. 3012 0x00000BC4 ERROR_PRINTER_NOT_FOUND No printers were found. 4000 0x00000FA0 ERROR_WINS_INTERNAL WINS encountered an error while processing the command. 4001 0x00000FA1 ERROR_CAN_NOT_DEL_LOCAL_WINS The local WINS can not be deleted. 4002 0x00000FA2 ERROR_STATIC_INIT The importation from the file failed. 4003 0x00000FA3 ERROR_INC_BACKUP The backup failed. Was a full backup done before? 4004 0x00000FA4 ERROR_FULL_BACKUP The backup failed. Check the directory to which you are backing the database. 4005 0x00000FA5 ERROR_REC_NON_EXISTENT The name does not exist in the WINS database. 4006 0x00000FA6 ERROR_RPL_NOT_ALLOWED Replication with a nonconfigured partner is not allowed. 4100 0x00001004 ERROR_DHCP_ADDRESS_CONFLICT The DHCP client has obtained an IP address that is already in use on the network. The local interface will be disabled until the DHCP client can obtain a new address. 4200 0x00001068 ERROR_WMI_GUID_NOT_FOUND The GUID passed was not recognized as valid by a WMI data provider. 4201 0x00001069 ERROR_WMI_INSTANCE_NOT_FOUND The instance name passed was not recognized as valid by a WMI data provider. 4202 0x0000106A ERROR_WMI_ITEMID_NOT_FOUND The data item ID passed was not recognized as valid by a WMI data provider. 4203 0x0000106B ERROR_WMI_TRY_AGAIN The WMI request could not be completed and should be retried. 4204 0x0000106C ERROR_WMI_DP_NOT_FOUND The WMI data provider could not be located. 4205 0x0000106D ERROR_WMI_UNRESOLVED_INSTANCE_REF The WMI data provider references an instance set that has not been registered. 4206 0x0000106E ERROR_WMI_ALREADY_ENABLED The WMI data block or event notification has already been enabled. 4207 0x0000106F ERROR_WMI_GUID_DISCONNECTED The WMI data block is no longer available. 4208 0x00001070 ERROR_WMI_SERVER_UNAVAILABLE The WMI data service is not available. 4209 0x00001071 ERROR_WMI_DP_FAILED The WMI data provider failed to carry out the request. 4210 0x00001072 ERROR_WMI_INVALID_MOF The WMI MOF information is not valid. 4211 0x00001073 ERROR_WMI_INVALID_REGINFO The WMI registration information is not valid. 4212 0x00001074 ERROR_WMI_ALREADY_DISABLED The WMI data block or event notification has already been disabled. 4213 0x00001075 ERROR_WMI_READ_ONLY The WMI data item or data block is read only. 4214 0x00001076 ERROR_WMI_SET_FAILURE The WMI data item or data block could not be changed. 4300 0x000010CC ERROR_INVALID_MEDIA The media identifier does not represent a valid medium. 4301 0x000010CD ERROR_INVALID_LIBRARY The library identifier does not represent a valid library. 584 Version: 1.7.1 TF6510
## Page 585

PLC API Error Description decimal Hexadecimal Name 4302 0x000010CE ERROR_INVALID_MEDIA_POOL The media pool identifier does not represent a valid media pool. 4303 0x000010CF ERROR_DRIVE_MEDIA_MISMATCH The drive and medium are not compatible or exist in different libraries. 4304 0x000010D0 ERROR_MEDIA_OFFLINE The medium currently exists in an offline library and must be online to perform this operation. 4305 0x000010D1 ERROR_LIBRARY_OFFLINE The operation cannot be performed on an offline library. 4306 0x000010D2 ERROR_EMPTY The library, drive, or media pool is empty. 4307 0x000010D3 ERROR_NOT_EMPTY The library, drive, or media pool must be empty to perform this operation. 4308 0x000010D4 ERROR_MEDIA_UNAVAILABLE No media is currently available in this media pool or library. 4309 0x000010D5 ERROR_RESOURCE_DISABLED A resource required for this operation is disabled. 4310 0x000010D6 ERROR_INVALID_CLEANER The media identifier does not represent a valid cleaner. 4311 0x000010D7 ERROR_UNABLE_TO_CLEAN The drive cannot be cleaned or does not support cleaning. 4312 0x000010D8 ERROR_OBJECT_NOT_FOUND The object identifier does not represent a valid object. 4313 0x000010D9 ERROR_DATABASE_FAILURE Unable to read from or write to the database. 4314 0x000010DA ERROR_DATABASE_FULL The database is full. 4315 0x000010DB ERROR_MEDIA_INCOMPATIBLE The medium is not compatible with the device or media pool. 4316 0x000010DC ERROR_RESOURCE_NOT_PRESENT The resource required for this operation does not exist. 4317 0x000010DD ERROR_INVALID_OPERATION The operation identifier is not valid. 4318 0x000010DE ERROR_MEDIA_NOT_AVAILABLE The media is not mounted or ready for use. 4319 0x000010DF ERROR_DEVICE_NOT_AVAILABLE The device is not ready for use. 4320 0x000010E0 ERROR_REQUEST_REFUSED The operator or administrator has refused the request. 4321 0x000010E1 ERROR_INVALID_DRIVE_OBJECT The drive identifier does not represent a valid drive. 4322 0x000010E2 ERROR_LIBRARY_FULL Library is full. No slot is available for use. 4323 0x000010E3 ERROR_MEDIUM_NOT_ACCESSIBLE The transport cannot access the medium. 4324 0x000010E4 ERROR_UNABLE_TO_LOAD_MEDIUM Unable to load the medium into the drive. 4325 0x000010E5 ERROR_UNABLE_TO_INVENTORY_DRIVE Unable to retrieve status about the drive. 4326 0x000010E6 ERROR_UNABLE_TO_INVENTORY_SLOT Unable to retrieve status about the slot. 4327 0x000010E7 ERROR_UNABLE_TO_INVENTORY_TRANSPORT Unable to retrieve status about the transport. 4328 0x000010E8 ERROR_TRANSPORT_FULL Cannot use the transport because it is already in use. 4329 0x000010E9 ERROR_CONTROLLING_IEPORT Unable to open or close the inject/eject port. 4330 0x000010EA ERROR_UNABLE_TO_EJECT_MOUNTED_MEDIA Unable to eject the media because it is in a drive. 4331 0x000010EB ERROR_CLEANER_SLOT_SET A cleaner slot is already reserved. 4332 0x000010EC ERROR_CLEANER_SLOT_NOT_SET A cleaner slot is not reserved. 4333 0x000010ED ERROR_CLEANER_CARTRIDGE_SPENT The cleaner cartridge has performed the maximum number of drive cleanings. 4334 0x000010EE ERROR_UNEXPECTED_OMID Unexpected on-medium identifier. 4335 0x000010EF ERROR_CANT_DELETE_LAST_ITEM The last remaining item in this group or resource cannot be deleted. 4336 0x000010F0 ERROR_MESSAGE_EXCEEDS_MAX_SIZE The message provided exceeds the maximum size allowed for this parameter. 4337 0x000010F1 ERROR_VOLUME_CONTAINS_SYS_FILES The volume contains system or paging files. 4338 0x000010F2 ERROR_INDIGENOUS_TYPE The media type cannot be removed from this library since at least one drive in the library reports it can support this media type. 4339 0x000010F3 ERROR_NO_SUPPORTING_DRIVES This offline media cannot be mounted on this system since no enabled drives are present which can be used. 4340 0x000010F4 ERROR_CLEANER_CARTRIDGE_INSTALLED A cleaner cartridge is present in the tape library. 4350 0x000010FE ERROR_FILE_OFFLINE The remote storage service was not able to recall the file. TF6510 Version: 1.7.1 585
## Page 586

PLC API Error Description decimal Hexadecimal Name 4351 0x000010FF ERROR_REMOTE_STORAGE_NOT_ACTIVE The remote storage service is not operational at this time. 4352 0x00001100 ERROR_REMOTE_STORAGE_MEDIA_ERROR The remote storage service encountered a media error. 4390 0x00001126 ERROR_NOT_A_REPARSE_POINT The file or directory is not a reparse point. 4391 0x00001127 ERROR_REPARSE_ATTRIBUTE_CONFLICT The reparse point attribute cannot be set because it conflicts with an existing attribute. 4392 0x00001128 ERROR_INVALID_REPARSE_DATA The data present in the reparse point buffer is invalid. 4393 0x00001129 ERROR_REPARSE_TAG_INVALID The tag present in the reparse point buffer is invalid. 4394 0x0000112A ERROR_REPARSE_TAG_MISMATCH There is a mismatch between the tag specified in the request and the tag present in the reparse point. 4500 0x00001194 ERROR_VOLUME_NOT_SIS_ENABLED Single Instance Storage is not available on this volume. 586 Version: 1.7.1 TF6510
## Page 587

PLC API Error Description decimal Hexadecimal Name 5001 0x00001389 ERROR_DEPENDENT_RESOURCE_EXISTS The cluster resource cannot be moved to another group because other resources are dependent on it. 5002 0x0000138A ERROR_DEPENDENCY_NOT_FOUND The cluster resource dependency cannot be found. 5003 0x0000138B ERROR_DEPENDENCY_ALREADY_EXISTS The cluster resource cannot be made dependent on the specified resource because it is already dependent. 5004 0x0000138C ERROR_RESOURCE_NOT_ONLINE The cluster resource is not online. 5005 0x0000138D ERROR_HOST_NODE_NOT_AVAILABLE A cluster node is not available for this operation. 5006 0x0000138E ERROR_RESOURCE_NOT_AVAILABLE The cluster resource is not available. 5007 0x0000138F ERROR_RESOURCE_NOT_FOUND The cluster resource could not be found. 5008 0x00001390 ERROR_SHUTDOWN_CLUSTER The cluster is being shut down. 5009 0x00001391 ERROR_CANT_EVICT_ACTIVE_NODE A cluster node cannot be evicted from the cluster unless the node is down. 5010 0x00001392 ERROR_OBJECT_ALREADY_EXISTS The object already exists. 5011 0x00001393 ERROR_OBJECT_IN_LIST The object is already in the list. 5012 0x00001394 ERROR_GROUP_NOT_AVAILABLE The cluster group is not available for any new requests. 5013 0x00001395 ERROR_GROUP_NOT_FOUND The cluster group could not be found. 5014 0x00001396 ERROR_GROUP_NOT_ONLINE The operation could not be completed because the cluster group is not online. 5015 0x00001397 ERROR_HOST_NODE_NOT_RESOURCE_OWNE The cluster node is not the owner of the resource. R 5016 0x00001398 ERROR_HOST_NODE_NOT_GROUP_OWNER The cluster node is not the owner of the group. 5017 0x00001399 ERROR_RESMON_CREATE_FAILED The cluster resource could not be created in the specified resource monitor. 5018 0x0000139A ERROR_RESMON_ONLINE_FAILED The cluster resource could not be brought online by the resource monitor. 5019 0x0000139B ERROR_RESOURCE_ONLINE The operation could not be completed because the cluster resource is online. 5020 0x0000139C ERROR_QUORUM_RESOURCE The cluster resource could not be deleted or brought offline because it is the quorum resource. 5021 0x0000139D ERROR_NOT_QUORUM_CAPABLE The cluster could not make the specified resource a quorum resource because it is not capable of being a quorum resource. 5022 0x0000139E ERROR_CLUSTER_SHUTTING_DOWN The cluster software is shutting down. 5023 0x0000139F ERROR_INVALID_STATE The group or resource is not in the correct state to perform the requested operation. 5024 0x000013A0 ERROR_RESOURCE_PROPERTIES_STORED The properties were stored but not all changes will take effect until the next time the resource is brought online. 5025 0x000013A1 ERROR_NOT_QUORUM_CLASS The cluster could not make the specified resource a quorum resource because it does not belong to a shared storage class. 5026 0x000013A2 ERROR_CORE_RESOURCE The cluster resource could not be deleted since it is a core resource. 5027 0x000013A3 ERROR_QUORUM_RESOURCE_ONLINE_FAILED The quorum resource failed to come online. 5028 0x000013A4 ERROR_QUORUMLOG_OPEN_FAILED The quorum log could not be created or mounted successfully. 5029 0x000013A5 ERROR_CLUSTERLOG_CORRUPT The cluster log is corrupt. 5030 0x000013A6 ERROR_CLUSTERLOG_RECORD_EXCEEDS_MA The record could not be written to the cluster log XSIZE since it exceeds the maximum size. 5031 0x000013A7 ERROR_CLUSTERLOG_EXCEEDS_MAXSIZE The cluster log exceeds its maximum size. 5032 0x000013A8 ERROR_CLUSTERLOG_CHKPOINT_NOT_FOUN No checkpoint record was found in the cluster log. D 5033 0x000013A9 ERROR_CLUSTERLOG_NOT_ENOUGH_SPACE The minimum required disk space needed for logging is not available. 5034 0x000013AA ERROR_QUORUM_OWNER_ALIVE The cluster node failed to take control of the quorum resource because the resource is owned by another active node. 5035 0x000013AB ERROR_NETWORK_NOT_AVAILABLE A cluster network is not available for this operation. 5036 0x000013AC ERROR_NODE_NOT_AVAILABLE A cluster node is not available for this operation. TF6510 Version: 1.7.1 587
## Page 588

PLC API Error Description decimal Hexadecimal Name 5037 0x000013AD ERROR_ALL_NODES_NOT_AVAILABLE All cluster nodes must be running to perform this operation. 5038 0x000013AE ERROR_RESOURCE_FAILED A cluster resource failed. 5039 0x000013AF ERROR_CLUSTER_INVALID_NODE The cluster node is not valid. 5040 0x000013B0 ERROR_CLUSTER_NODE_EXISTS The cluster node already exists. 5041 0x000013B1 ERROR_CLUSTER_JOIN_IN_PROGRESS A node is in the process of joining the cluster. 5042 0x000013B2 ERROR_CLUSTER_NODE_NOT_FOUND The cluster node was not found. 5043 0x000013B3 ERROR_CLUSTER_LOCAL_NODE_NOT_FOUND The cluster local node information was not found. 5044 0x000013B4 ERROR_CLUSTER_NETWORK_EXISTS The cluster network already exists. 5045 0x000013B5 ERROR_CLUSTER_NETWORK_NOT_FOUND The cluster network was not found. 5046 0x000013B6 ERROR_CLUSTER_NETINTERFACE_EXISTS The cluster network interface already exists. 5047 0x000013B7 ERROR_CLUSTER_NETINTERFACE_NOT_FOUN The cluster network interface was not found. D 5048 0x000013B8 ERROR_CLUSTER_INVALID_REQUEST The cluster request is not valid for this object. 5049 0x000013B9 ERROR_CLUSTER_INVALID_NETWORK_PROVI The cluster network provider is not valid. DER 5050 0x000013BA ERROR_CLUSTER_NODE_DOWN The cluster node is down. 5051 0x000013BB ERROR_CLUSTER_NODE_UNREACHABLE The cluster node is not reachable. 5052 0x000013BC ERROR_CLUSTER_NODE_NOT_MEMBER The cluster node is not a member of the cluster. 5053 0x000013BD ERROR_CLUSTER_JOIN_NOT_IN_PROGRESS A cluster join operation is not in progress. 5054 0x000013BE ERROR_CLUSTER_INVALID_NETWORK The cluster network is not valid. 5056 0x000013C0 ERROR_CLUSTER_NODE_UP The cluster node is up. 5057 0x000013C1 ERROR_CLUSTER_IPADDR_IN_USE The cluster IP address is already in use. 5058 0x000013C2 ERROR_CLUSTER_NODE_NOT_PAUSED The cluster node is not paused. 5059 0x000013C3 ERROR_CLUSTER_NO_SECURITY_CONTEXT No cluster security context is available. 5060 0x000013C4 ERROR_CLUSTER_NETWORK_NOT_INTERNAL The cluster network is not configured for internal cluster communication. 5061 0x000013C5 ERROR_CLUSTER_NODE_ALREADY_UP The cluster node is already up. 5062 0x000013C6 ERROR_CLUSTER_NODE_ALREADY_DOWN The cluster node is already down. 5063 0x000013C7 ERROR_CLUSTER_NETWORK_ALREADY_ONLI The cluster network is already online. NE 5064 0x000013C8 ERROR_CLUSTER_NETWORK_ALREADY_OFFLI The cluster network is already offline. NE 5065 0x000013C9 ERROR_CLUSTER_NODE_ALREADY_MEMBER The cluster node is already a member of the cluster. 5066 0x000013CA ERROR_CLUSTER_LAST_INTERNAL_NETWORK The cluster network is the only one configured for internal cluster communication between two or more active cluster nodes. The internal communication capability cannot be removed from the network. 5067 0x000013CB ERROR_CLUSTER_NETWORK_HAS_DEPENDEN One or more cluster resources depend on the TS network to provide service to clients. The client access capability cannot be removed from the network. 5068 0x000013CC ERROR_INVALID_OPERATION_ON_QUORUM This operation cannot be performed on the cluster resource as it the quorum resource. You may not bring the quorum resource offline or modify its possible owners list. 5069 0x000013CD ERROR_DEPENDENCY_NOT_ALLOWED The cluster quorum resource is not allowed to have any dependencies. 5070 0x000013CE ERROR_CLUSTER_NODE_PAUSED The cluster node is paused. 5071 0x000013CF ERROR_NODE_CANT_HOST_RESOURCE The cluster resource cannot be brought online. The owner node cannot run this resource. 5072 0x000013D0 ERROR_CLUSTER_NODE_NOT_READY The cluster node is not ready to perform the requested operation. 5073 0x000013D1 ERROR_CLUSTER_NODE_SHUTTING_DOWN The cluster node is shutting down. 5074 0x000013D2 ERROR_CLUSTER_JOIN_ABORTED The cluster join operation was aborted. 5075 0x000013D3 ERROR_CLUSTER_INCOMPATIBLE_VERSIONS The cluster join operation failed due to incompatible software versions between the joining node and its sponsor. 5076 0x000013D4 ERROR_CLUSTER_MAXNUM_OF_RESOURCES_ This resource cannot be created because the EXCEEDED cluster has reached the limit on the number of resources it can monitor. 588 Version: 1.7.1 TF6510
## Page 589

PLC API Error Description decimal Hexadecimal Name 5077 0x000013D5 ERROR_CLUSTER_SYSTEM_CONFIG_CHANGE The system configuration changed during the D cluster join or form operation. The join or form operation was aborted. 5078 0x000013D6 ERROR_CLUSTER_RESOURCE_TYPE_NOT_FO The specified resource type was not found. UND 5079 0x000013D7 ERROR_CLUSTER_RESTYPE_NOT_SUPPORTE The specified node does not support a resource D of this type. This may be due to version inconsistencies or due to the absence of the resource DLL on this node. 5080 0x000013D8 ERROR_CLUSTER_RESNAME_NOT_FOUND The specified resource name is supported by this resource DLL. This may be due to a bad (or changed) name supplied to the resource DLL. 5081 0x000013D9 ERROR_CLUSTER_NO_RPC_PACKAGES_REGIS No authentication package could be registered TERED with the RPC server. 5082 0x000013DA ERROR_CLUSTER_OWNER_NOT_IN_PREFLIST You cannot bring the group online because the owner of the group is not in the preferred list for the group. To change the owner node for the group, move the group. 5083 0x000013DB ERROR_CLUSTER_DATABASE_SEQMISMATCH The join operation failed because the cluster database sequence number has changed or is incompatible with the locker node. This may happen during a join operation if the cluster database was changing during the join. 5084 0x000013DC ERROR_RESMON_INVALID_STATE The resource monitor will not allow the fail operation to be performed while the resource is in its current state. This may happen if the resource is in a pending state. 5085 0x000013DD ERROR_CLUSTER_GUM_NOT_LOCKER A non locker code got a request to reserve the lock for making global updates. 5086 0x000013DE ERROR_QUORUM_DISK_NOT_FOUND The quorum disk could not be located by the cluster service. 5087 0x000013DF ERROR_DATABASE_BACKUP_CORRUPT The backup up cluster database is possibly corrupt. 5088 0x000013E0 ERROR_CLUSTER_NODE_ALREADY_HAS_DFS_ A DFS root already exists in this cluster node. ROOT 5089 0x000013E1 ERROR_RESOURCE_PROPERTY_UNCHANGEA An attempt to modify a resource property failed BLE because it conflicts with another existing property. 5890 0x00001702 ERROR_CLUSTER_MEMBERSHIP_INVALID_STA An operation was attempted that is incompatible TE with the current membership state of the node. 5891 0x00001703 ERROR_CLUSTER_QUORUMLOG_NOT_FOUND The quorum resource does not contain the quorum log. 5892 0x00001704 ERROR_CLUSTER_MEMBERSHIP_HALT The membership engine requested shutdown of the cluster service on this node. 5893 0x00001705 ERROR_CLUSTER_INSTANCE_ID_MISMATCH The join operation failed because the cluster instance ID of the joining node does not match the cluster instance ID of the sponsor node. 5894 0x00001706 ERROR_CLUSTER_NETWORK_NOT_FOUND_FO A matching network for the specified IP address R_IP could not be found. Please also specify a subnet mask and a cluster network. 5895 0x00001707 ERROR_CLUSTER_PROPERTY_DATA_TYPE_MI The actual data type of the property did not match SMATCH the expected data type of the property. 5896 0x00001708 ERROR_CLUSTER_EVICT_WITHOUT_CLEANUP The cluster node was evicted from the cluster successfully. The node was not cleaned up because it does not support the evict cleanup functionality. TF6510 Version: 1.7.1 589
## Page 590

PLC API Error Description decimal Hexadecimal Name 6000 0x00001770 ERROR_ENCRYPTION_FAILED The specified file could not be encrypted. 6001 0x00001771 ERROR_DECRYPTION_FAILED The specified file could not be decrypted. 6002 0x00001772 ERROR_FILE_ENCRYPTED The specified file is encrypted and the user does not have the ability to decrypt it. 6003 0x00001773 ERROR_NO_RECOVERY_POLICY There is no valid encryption recovery policy configured for this system. 6004 0x00001774 ERROR_NO_EFS The required encryption driver is not loaded for this system. 6005 0x00001775 ERROR_WRONG_EFS The file was encrypted with a different encryption driver than is currently loaded. 6006 0x00001776 ERROR_NO_USER_KEYS There are no EFS keys defined for the user. 6007 0x00001777 ERROR_FILE_NOT_ENCRYPTED The specified file is not encrypted. 6008 0x00001778 ERROR_NOT_EXPORT_FORMAT The specified file is not in the defined EFS export format. 6009 0x00001779 ERROR_FILE_READ_ONLY The specified file is read only. 6010 0x0000177A ERROR_DIR_EFS_DISALLOWED The directory has been disabled for encryption. 6011 0x0000177B ERROR_EFS_SERVER_NOT_TRUSTED The server is not trusted for remote encryption operation. 6012 0x0000177C ERROR_BAD_RECOVERY_POLICY Recovery policy configured for this system contains invalid recovery certificate. 6013 0x0000177D ERROR_EFS_ALG_BLOB_TOO_BIG The encryption algorithm used on the source file needs a bigger key buffer than the one on the destination file. 6014 0x0000177E ERROR_VOLUME_NOT_SUPPORT_EFS The disk partition does not support file encryption. 6118 0x000017E6 ERROR_NO_BROWSER_SERVERS_FOUND The list of servers for this workgroup is not currently available. 6200 0x00001838 SCHED_E_SERVICE_NOT_LOCALSYSTEM The Task Scheduler service must be configured to run in the System account to function properly. Individual tasks may be configured to run in other accounts. 7001 0x00001B59 ERROR_CTX_WINSTATION_NAME_INVALID The specified session name is invalid. 7002 0x00001B5A ERROR_CTX_INVALID_PD The specified protocol driver is invalid. 7003 0x00001B5B ERROR_CTX_PD_NOT_FOUND The specified protocol driver was not found in the system path. 7004 0x00001B5C ERROR_CTX_WD_NOT_FOUND The specified terminal connection driver was not found in the system path. 7005 0x00001B5D ERROR_CTX_CANNOT_MAKE_EVENTLOG_ENT A registry key for event logging could not be RY created for this session. 7006 0x00001B5E ERROR_CTX_SERVICE_NAME_COLLISION A service with the same name already exists on the system. 7007 0x00001B5F ERROR_CTX_CLOSE_PENDING A close operation is pending on the session. 7008 0x00001B60 ERROR_CTX_NO_OUTBUF There are no free output buffers available. 7009 0x00001B61 ERROR_CTX_MODEM_INF_NOT_FOUND The MODEM. INF file was not found. 7010 0x00001B62 ERROR_CTX_INVALID_MODEMNAME The modem name was not found in MODEM. INF. 7011 0x00001B63 ERROR_CTX_MODEM_RESPONSE_ERROR The modem did not accept the command sent to it. Verify that the configured modem name matches the attached modem. 7012 0x00001B64 ERROR_CTX_MODEM_RESPONSE_TIMEOUT The modem did not respond to the command sent to it. Verify that the modem is properly cabled and powered on. 7013 0x00001B65 ERROR_CTX_MODEM_RESPONSE_NO_CARRIE Carrier detect has failed or carrier has been R dropped due to disconnect. 7014 0x00001B66 ERROR_CTX_MODEM_RESPONSE_NO_DIALTO Dial tone not detected within the required time. NE Verify that the phone cable is properly attached and functional. 7015 0x00001B67 ERROR_CTX_MODEM_RESPONSE_BUSY Busy signal detected at remote site on callback. 7016 0x00001B68 ERROR_CTX_MODEM_RESPONSE_VOICE Voice detected at remote site on callback. 7017 0x00001B69 ERROR_CTX_TD_ERROR Transport driver error 7022 0x00001B6E ERROR_CTX_WINSTATION_NOT_FOUND The specified session cannot be found. 7023 0x00001B6F ERROR_CTX_WINSTATION_ALREADY_EXISTS The specified session name is already in use. 7024 0x00001B70 ERROR_CTX_WINSTATION_BUSY The requested operation cannot be completed because the terminal connection is currently busy processing a connect, disconnect, reset, or delete operation. 590 Version: 1.7.1 TF6510
## Page 591

PLC API Error Description decimal Hexadecimal Name 7025 0x00001B71 ERROR_CTX_BAD_VIDEO_MODE An attempt has been made to connect to a session whose video mode is not supported by the current client. 7035 0x00001B7B ERROR_CTX_GRAPHICS_INVALID The application attempted to enable DOS graphics mode. DOS graphics mode is not supported. 7037 0x00001B7D ERROR_CTX_LOGON_DISABLED Your interactive logon privilege has been disabled. Please contact your administrator. 7038 0x00001B7E ERROR_CTX_NOT_CONSOLE The requested operation can be performed only on the system console. This is most often the result of a driver or system DLL requiring direct console access. 7040 0x00001B80 ERROR_CTX_CLIENT_QUERY_TIMEOUT The client failed to respond to the server connect message. 7041 0x00001B81 ERROR_CTX_CONSOLE_DISCONNECT Disconnecting the console session is not supported. 7042 0x00001B82 ERROR_CTX_CONSOLE_CONNECT Reconnecting a disconnected session to the console is not supported. 7044 0x00001B84 ERROR_CTX_SHADOW_DENIED The request to control another session remotely was denied. 7045 0x00001B85 ERROR_CTX_WINSTATION_ACCESS_DENIED The requested session access is denied. 7049 0x00001B89 ERROR_CTX_INVALID_WD The specified terminal connection driver is invalid. 7050 0x00001B8A ERROR_CTX_SHADOW_INVALID The requested session cannot be controlled remotely. This may be because the session is disconnected or does not currently have a user logged on. 7051 0x00001B8B ERROR_CTX_SHADOW_DISABLED The requested session is not configured to allow remote control. 7052 0x00001B8C ERROR_CTX_CLIENT_LICENSE_IN_USE Your request to connect to this Terminal Server has been rejected. Your Terminal Server client license number is currently being used by another user. Please call your system administrator to obtain a unique license number. 7053 0x00001B8D ERROR_CTX_CLIENT_LICENSE_NOT_SET Your request to connect to this Terminal Server has been rejected. Your Terminal Server client license number has not been entered for this copy of the Terminal Server client. Please contact your system administrator. 7054 0x00001B8E ERROR_CTX_LICENSE_NOT_AVAILABLE The system has reached its licensed logon limit. Please try again later. 7055 0x00001B8F ERROR_CTX_LICENSE_CLIENT_INVALID The client you are using is not licensed to use this system. Your logon request is denied. 7056 0x00001B90 ERROR_CTX_LICENSE_EXPIRED The system license has expired. Your logon request is denied. 7057 0x00001B91 ERROR_CTX_SHADOW_NOT_RUNNING Remote control could not be terminated because the specified session is not currently being remotely controlled. TF6510 Version: 1.7.1 591
## Page 592

PLC API Error Description decimal Hexadecimal Name 8001 0x00001F41 FRS_ERR_INVALID_API_SEQUENCE The file replication service API was called incorrectly. 8002 0x00001F42 FRS_ERR_STARTING_SERVICE The file replication service cannot be started. 8003 0x00001F43 FRS_ERR_STOPPING_SERVICE The file replication service cannot be stopped. 8004 0x00001F44 FRS_ERR_INTERNAL_API The file replication service API terminated the request. The event log may have more information. 8005 0x00001F45 FRS_ERR_INTERNAL The file replication service terminated the request. The event log may have more information. 8006 0x00001F46 FRS_ERR_SERVICE_COMM The file replication service cannot be contacted. The event log may have more information. 8007 0x00001F47 FRS_ERR_INSUFFICIENT_PRIV The file replication service cannot satisfy the request because the user has insufficient privileges. The event log may have more information. 8008 0x00001F48 FRS_ERR_AUTHENTICATION The file replication service cannot satisfy the request because authenticated RPC is not available. The event log may have more information. 8009 0x00001F49 FRS_ERR_PARENT_INSUFFICIENT_PRIV The file replication service cannot satisfy the request because the user has insufficient privileges on the domain controller. The event log may have more information. 8010 0x00001F4A FRS_ERR_PARENT_AUTHENTICATION The file replication service cannot satisfy the request because authenticated RPC is not available on the domain controller. The event log may have more information. 8011 0x00001F4B FRS_ERR_CHILD_TO_PARENT_COMM The file replication service cannot communicate with the file replication service on the domain controller. The event log may have more information. 8012 0x00001F4C FRS_ERR_PARENT_TO_CHILD_COMM The file replication service on the domain controller cannot communicate with the file replication service on this computer. The event log may have more information. 8013 0x00001F4D FRS_ERR_SYSVOL_POPULATE The file replication service cannot populate the system volume because of an internal error. The event log may have more information. 8014 0x00001F4E FRS_ERR_SYSVOL_POPULATE_TIMEOUT The file replication service cannot populate the system volume because of an internal timeout. The event log may have more information. 8015 0x00001F4F FRS_ERR_SYSVOL_IS_BUSY The file replication service cannot process the request. The system volume is busy with a previous request. 8016 0x00001F50 FRS_ERR_SYSVOL_DEMOTE The file replication service cannot stop replicating the system volume because of an internal error. The event log may have more information. 8017 0x00001F51 FRS_ERR_INVALID_SERVICE_PARAMETER The file replication service detected an invalid parameter. 8200 0x00002008 ERROR_DS_NOT_INSTALLED An error occurred while installing the directory service. For more information, see the event log. 8201 0x00002009 ERROR_DS_MEMBERSHIP_EVALUATED_LOCAL The directory service evaluated group LY memberships locally. 8202 0x0000200A ERROR_DS_NO_ATTRIBUTE_OR_VALUE The specified directory service attribute or value does not exist. 8203 0x0000200B ERROR_DS_INVALID_ATTRIBUTE_SYNTAX The attribute syntax specified to the directory service is invalid. 8204 0x0000200C ERROR_DS_ATTRIBUTE_TYPE_UNDEFINED The attribute type specified to the directory service is not defined. 8205 0x0000200D ERROR_DS_ATTRIBUTE_OR_VALUE_EXISTS The specified directory service attribute or value already exists. 8206 0x0000200E ERROR_DS_BUSY The directory service is busy. 8207 0x0000200F ERROR_DS_UNAVAILABLE The directory service is unavailable. 8208 0x00002010 ERROR_DS_NO_RIDS_ALLOCATED The directory service was unable to allocate a relative identifier. 8209 0x00002011 ERROR_DS_NO_MORE_RIDS The directory service has exhausted the pool of relative identifiers. 592 Version: 1.7.1 TF6510
## Page 593

PLC API Error Description decimal Hexadecimal Name 8210 0x00002012 ERROR_DS_INCORRECT_ROLE_OWNER The requested operation could not be performed because the directory service is not the master for that type of operation. 8211 0x00002013 ERROR_DS_RIDMGR_INIT_ERROR The directory service was unable to initialize the subsystem that allocates relative identifiers. 8212 0x00002014 ERROR_DS_OBJ_CLASS_VIOLATION The requested operation did not satisfy one or more constraints associated with the class of the object. 8213 0x00002015 ERROR_DS_CANT_ON_NON_LEAF The directory service can perform the requested operation only on a leaf object. 8214 0x00002016 ERROR_DS_CANT_ON_RDN The directory service cannot perform the requested operation on the RDN attribute of an object. 8215 0x00002017 ERROR_DS_CANT_MOD_OBJ_CLASS The directory service detected an attempt to modify the object class of an object. 8216 0x00002018 ERROR_DS_CROSS_DOM_MOVE_ERROR The requested cross-domain move operation could not be performed. 8217 0x00002019 ERROR_DS_GC_NOT_AVAILABLE Unable to contact the global catalog server. 8218 0x0000201A ERROR_SHARED_POLICY The policy object is shared and can only be modified at the root. 8219 0x0000201B ERROR_POLICY_OBJECT_NOT_FOUND The policy object does not exist. 8220 0x0000201C ERROR_POLICY_ONLY_IN_DS The requested policy information is only in the directory service. 8221 0x0000201D ERROR_PROMOTION_ACTIVE A domain controller promotion is currently active. 8222 0x0000201E ERROR_NO_PROMOTION_ACTIVE A domain controller promotion is not currently active 8224 0x00002020 ERROR_DS_OPERATIONS_ERROR An operations error occurred. 8225 0x00002021 ERROR_DS_PROTOCOL_ERROR A protocol error occurred. 8226 0x00002022 ERROR_DS_TIMELIMIT_EXCEEDED The time limit for this request was exceeded. 8227 0x00002023 ERROR_DS_SIZELIMIT_EXCEEDED The size limit for this request was exceeded. 8228 0x00002024 ERROR_DS_ADMIN_LIMIT_EXCEEDED The administrative limit for this request was exceeded. 8229 0x00002025 ERROR_DS_COMPARE_FALSE The compare response was false. 8230 0x00002026 ERROR_DS_COMPARE_TRUE The compare response was true. 8231 0x00002027 ERROR_DS_AUTH_METHOD_NOT_SUPPORTED The requested authentication method is not supported by the server. 8232 0x00002028 ERROR_DS_STRONG_AUTH_REQUIRED A more secure authentication method is required for this server. 8233 0x00002029 ERROR_DS_INAPPROPRIATE_AUTH Inappropriate authentication. 8234 0x0000202A ERROR_DS_AUTH_UNKNOWN The authentication mechanism is unknown. 8235 0x0000202B ERROR_DS_REFERRAL A referral was returned from the server. 8236 0x0000202C ERROR_DS_UNAVAILABLE_CRIT_EXTENSION The server does not support the requested critical extension. 8237 0x0000202D ERROR_DS_CONFIDENTIALITY_REQUIRED This request requires a secure connection. 8238 0x0000202E ERROR_DS_INAPPROPRIATE_MATCHING Inappropriate matching. 8239 0x0000202F ERROR_DS_CONSTRAINT_VIOLATION A constraint violation occurred. 8240 0x00002030 ERROR_DS_NO_SUCH_OBJECT There is no such object on the server. 8241 0x00002031 ERROR_DS_ALIAS_PROBLEM There is an alias problem. 8242 0x00002032 ERROR_DS_INVALID_DN_SYNTAX An invalid dn syntax has been specified. 8243 0x00002033 ERROR_DS_IS_LEAF The object is a leaf object. 8244 0x00002034 ERROR_DS_ALIAS_DEREF_PROBLEM There is an alias dereferencing problem. 8245 0x00002035 ERROR_DS_UNWILLING_TO_PERFORM The server is unwilling to process the request. 8246 0x00002036 ERROR_DS_LOOP_DETECT A loop has been detected. 8247 0x00002037 ERROR_DS_NAMING_VIOLATION There is a naming violation. 8248 0x00002038 ERROR_DS_OBJECT_RESULTS_TOO_LARGE The result set is too large. 8249 0x00002039 ERROR_DS_AFFECTS_MULTIPLE_DSAS The operation affects multiple DSAs 8250 0x0000203A ERROR_DS_SERVER_DOWN The server is not operational. 8251 0x0000203B ERROR_DS_LOCAL_ERROR A local error has occurred. 8252 0x0000203C ERROR_DS_ENCODING_ERROR An encoding error has occurred. 8253 0x0000203D ERROR_DS_DECODING_ERROR A decoding error has occurred. 8254 0x0000203E ERROR_DS_FILTER_UNKNOWN The search filter cannot be recognized. TF6510 Version: 1.7.1 593
## Page 594

PLC API Error Description decimal Hexadecimal Name 8255 0x0000203F ERROR_DS_PARAM_ERROR One or more parameters are illegal. 8256 0x00002040 ERROR_DS_NOT_SUPPORTED The specified method is not supported. 8257 0x00002041 ERROR_DS_NO_RESULTS_RETURNED No results were returned. 8258 0x00002042 ERROR_DS_CONTROL_NOT_FOUND The specified control is not supported by the server. 8259 0x00002043 ERROR_DS_CLIENT_LOOP A referral loop was detected by the client. 8260 0x00002044 ERROR_DS_REFERRAL_LIMIT_EXCEEDED The preset referral limit was exceeded. 8261 0x00002045 ERROR_DS_SORT_CONTROL_MISSING The search requires a SORT control. 8262 0x00002046 ERROR_DS_OFFSET_RANGE_ERROR The search results exceed the offset range specified. 8301 0x0000206D ERROR_DS_ROOT_MUST_BE_NC The root object must be the head of a naming context. The root object cannot have an instantiated parent. 8302 0x0000206E ERROR_DS_ADD_REPLICA_INHIBITED The add replica operation cannot be performed. The naming context must be writable in order to create the replica. 8303 0x0000206F ERROR_DS_ATT_NOT_DEF_IN_SCHEMA A reference to an attribute that is not defined in the schema occurred. 8304 0x00002070 ERROR_DS_MAX_OBJ_SIZE_EXCEEDED The maximum size of an object has been exceeded. 8305 0x00002071 ERROR_DS_OBJ_STRING_NAME_EXISTS An attempt was made to add an object to the directory with a name that is already in use. 8306 0x00002072 ERROR_DS_NO_RDN_DEFINED_IN_SCHEMA An attempt was made to add an object of a class that does not have an RDN defined in the schema. 8307 0x00002073 ERROR_DS_RDN_DOESNT_MATCH_SCHEMA An attempt was made to add an object using an RDN that is not the RDN defined in the schema. 8308 0x00002074 ERROR_DS_NO_REQUESTED_ATTS_FOUND None of the requested attributes were found on the objects. 8309 0x00002075 ERROR_DS_USER_BUFFER_TO_SMALL The user buffer is too small. 8310 0x00002076 ERROR_DS_ATT_IS_NOT_ON_OBJ The attribute specified in the operation is not present on the object. 8311 0x00002077 ERROR_DS_ILLEGAL_MOD_OPERATION Illegal modify operation. Some aspect of the modification is not permitted. 8312 0x00002078 ERROR_DS_OBJ_TOO_LARGE The specified object is too large. 8313 0x00002079 ERROR_DS_BAD_INSTANCE_TYPE The specified instance type is not valid. 8314 0x0000207A ERROR_DS_MASTERDSA_REQUIRED The operation must be performed at a master DSA. 8315 0x0000207B ERROR_DS_OBJECT_CLASS_REQUIRED The object class attribute must be specified. 8316 0x0000207C ERROR_DS_MISSING_REQUIRED_ATT A required attribute is missing. 8317 0x0000207D ERROR_DS_ATT_NOT_DEF_FOR_CLASS An attempt was made to modify an object to include an attribute that is not legal for its class 8318 0x0000207E ERROR_DS_ATT_ALREADY_EXISTS The specified attribute is already present on the object. 8320 0x00002080 ERROR_DS_CANT_ADD_ATT_VALUES The specified attribute is not present, or has no values. 8321 0x00002081 ERROR_DS_SINGLE_VALUE_CONSTRAINT Multiple values were specified for an attribute that can have only one value. 8322 0x00002082 ERROR_DS_RANGE_CONSTRAINT A value for the attribute was not in the acceptable range of values. 8323 0x00002083 ERROR_DS_ATT_VAL_ALREADY_EXISTS The specified value already exists. 8324 0x00002084 ERROR_DS_CANT_REM_MISSING_ATT The attribute cannot be removed because it is not present on the object. 8325 0x00002085 ERROR_DS_CANT_REM_MISSING_ATT_VAL The attribute value cannot be removed because it is not present on the object. 8326 0x00002086 ERROR_DS_ROOT_CANT_BE_SUBREF The specified root object cannot be a subref. 8327 0x00002087 ERROR_DS_NO_CHAINING Chaining is not permitted. 8328 0x00002088 ERROR_DS_NO_CHAINED_EVAL Chained evaluation is not permitted. 8329 0x00002089 ERROR_DS_NO_PARENT_OBJECT The operation could not be performed because the object's parent is either uninstantiated or deleted. 8330 0x0000208A ERROR_DS_PARENT_IS_AN_ALIAS Having a parent that is an alias is not permitted. Aliases are leaf objects. 594 Version: 1.7.1 TF6510
## Page 595

PLC API Error Description decimal Hexadecimal Name 8331 0x0000208B ERROR_DS_CANT_MIX_MASTER_AND_REPS The object and parent must be of the same type, either both masters or both replicas. 8332 0x0000208C ERROR_DS_CHILDREN_EXIST The operation cannot be performed because child objects exist. This operation can only be performed on a leaf object. 8333 0x0000208D ERROR_DS_OBJ_NOT_FOUND Directory object not found. 8334 0x0000208E ERROR_DS_ALIASED_OBJ_MISSING The aliased object is missing. 8335 0x0000208F ERROR_DS_BAD_NAME_SYNTAX The object name has bad syntax. 8336 0x00002090 ERROR_DS_ALIAS_POINTS_TO_ALIAS It is not permitted for an alias to refer to another alias. 8337 0x00002091 ERROR_DS_CANT_DEREF_ALIAS The alias cannot be dereferenced. 8338 0x00002092 ERROR_DS_OUT_OF_SCOPE The operation is out of scope. 8339 0x00002093 ERROR_DS_OBJECT_BEING_REMOVED The operation cannot continue because the object is in the process of being removed. 8340 0x00002094 ERROR_DS_CANT_DELETE_DSA_OBJ The DSA object cannot be deleted. 8341 0x00002095 ERROR_DS_GENERIC_ERROR A directory service error has occurred. 8342 0x00002096 ERROR_DS_DSA_MUST_BE_INT_MASTER The operation can only be performed on an internal master DSA object. 8343 0x00002097 ERROR_DS_CLASS_NOT_DSA The object must be of class DSA. 8344 0x00002098 ERROR_DS_INSUFF_ACCESS_RIGHTS Insufficient access rights to perform the operation. 8345 0x00002099 ERROR_DS_ILLEGAL_SUPERIOR The object cannot be added because the parent is not on the list of possible superiors. 8346 0x0000209A ERROR_DS_ATTRIBUTE_OWNED_BY_SAM Access to the attribute is not permitted because the attribute is owned by the Security Accounts Manager (SAM). 8347 0x0000209B ERROR_DS_NAME_TOO_MANY_PARTS The name has too many parts. 8348 0x0000209C ERROR_DS_NAME_TOO_LONG The name is too long. 8349 0x0000209D ERROR_DS_NAME_VALUE_TOO_LONG The name value is too long. 8350 0x0000209E ERROR_DS_NAME_UNPARSEABLE The directory service encountered an error parsing a name. 8351 0x0000209F ERROR_DS_NAME_TYPE_UNKNOWN The directory service cannot get the attribute type for a name. 8352 0x000020A0 ERROR_DS_NOT_AN_OBJECT The name does not identify an object; the name identifies a phantom. 8353 0x000020A1 ERROR_DS_SEC_DESC_TOO_SHORT The security descriptor is too short. 8354 0x000020A2 ERROR_DS_SEC_DESC_INVALID The security descriptor is invalid. 8355 0x000020A3 ERROR_DS_NO_DELETED_NAME Failed to create name for deleted object. 8356 0x000020A4 ERROR_DS_SUBREF_MUST_HAVE_PARENT The parent of a new subref must exist. 8357 0x000020A5 ERROR_DS_NCNAME_MUST_BE_NC The object must be a naming context. 8358 0x000020A6 ERROR_DS_CANT_ADD_SYSTEM_ONLY It is not permitted to add an attribute which is owned by the system. 8359 0x000020A7 ERROR_DS_CLASS_MUST_BE_CONCRETE The class of the object must be structural; you cannot instantiate an abstract class. 8360 0x000020A8 ERROR_DS_INVALID_DMD The schema object could not be found. 8361 0x000020A9 ERROR_DS_OBJ_GUID_EXISTS A local object with this GUID (dead or alive) already exists. 8362 0x000020AA ERROR_DS_NOT_ON_BACKLINK The operation cannot be performed on a back link. 8363 0x000020AB ERROR_DS_NO_CROSSREF_FOR_NC The cross reference for the specified naming context could not be found. 8364 0x000020AC ERROR_DS_SHUTTING_DOWN The operation could not be performed because the directory service is shutting down. 8365 0x000020AD ERROR_DS_UNKNOWN_OPERATION The directory service request is invalid. 8366 0x000020AE ERROR_DS_INVALID_ROLE_OWNER The role owner attribute could not be read. 8367 0x000020AF ERROR_DS_COULDNT_CONTACT_FSMO The requested FSMO operation failed. The current FSMO holder could not be reached. 8368 0x000020B0 ERROR_DS_CROSS_NC_DN_RENAME Modification of a DN across a naming context is not permitted. 8369 0x000020B1 ERROR_DS_CANT_MOD_SYSTEM_ONLY The attribute cannot be modified because it is owned by the system. 8370 0x000020B2 ERROR_DS_REPLICATOR_ONLY Only the replicator can perform this function. 8371 0x000020B3 ERROR_DS_OBJ_CLASS_NOT_DEFINED The specified class is not defined. TF6510 Version: 1.7.1 595
## Page 596

PLC API Error Description decimal Hexadecimal Name 8372 0x000020B4 ERROR_DS_OBJ_CLASS_NOT_SUBCLASS The specified class is not a subclass. 8373 0x000020B5 ERROR_DS_NAME_REFERENCE_INVALID The name reference is invalid. 8374 0x000020B6 ERROR_DS_CROSS_REF_EXISTS A cross reference already exists. 8375 0x000020B7 ERROR_DS_CANT_DEL_MASTER_CROSSREF It is not permitted to delete a master cross reference. 8376 0x000020B8 ERROR_DS_SUBTREE_NOTIFY_NOT_NC_HEAD Subtree notifications are only supported on NC heads. 8377 0x000020B9 ERROR_DS_NOTIFY_FILTER_TOO_COMPLEX Notification filter is too complex. 8378 0x000020BA ERROR_DS_DUP_RDN Schema update failed: duplicate RDN. 8379 0x000020BB ERROR_DS_DUP_OID Schema update failed: duplicate OID 8380 0x000020BC ERROR_DS_DUP_MAPI_ID Schema update failed: duplicate MAPI identifier. 8381 0x000020BD ERROR_DS_DUP_SCHEMA_ID_GUID Schema update failed: duplicate schema-id GUID. 8382 0x000020BE ERROR_DS_DUP_LDAP_DISPLAY_NAME Schema update failed: duplicate LDAP display name. 8383 0x000020BF ERROR_DS_SEMANTIC_ATT_TEST Schema update failed: range-lower less than range upper 8384 0x000020C0 ERROR_DS_SYNTAX_MISMATCH Schema update failed: syntax mismatch 8385 0x000020C1 ERROR_DS_EXISTS_IN_MUST_HAVE Schema deletion failed: attribute is used in must- contain 8386 0x000020C2 ERROR_DS_EXISTS_IN_MAY_HAVE Schema deletion failed: attribute is used in may- contain 8387 0x000020C3 ERROR_DS_NONEXISTENT_MAY_HAVE Schema update failed: attribute in may-contain does not exist 8388 0x000020C4 ERROR_DS_NONEXISTENT_MUST_HAVE Schema update failed: attribute in must-contain does not exist 8389 0x000020C5 ERROR_DS_AUX_CLS_TEST_FAIL Schema update failed: class in aux-class list does not exist or is not an auxiliary class 8390 0x000020C6 ERROR_DS_NONEXISTENT_POSS_SUP Schema update failed: class in poss-superiors does not exist 8391 0x000020C7 ERROR_DS_SUB_CLS_TEST_FAIL Schema update failed: class in subclassof list does not exist or does not satisfy hierarchy rules 8392 0x000020C8 ERROR_DS_BAD_RDN_ATT_ID_SYNTAX Schema update failed: Rdn-Att-Id has wrong syntax 8393 0x000020C9 ERROR_DS_EXISTS_IN_AUX_CLS Schema deletion failed: class is used as auxiliary class 8394 0x000020CA ERROR_DS_EXISTS_IN_SUB_CLS Schema deletion failed: class is used as sub class 8395 0x000020CB ERROR_DS_EXISTS_IN_POSS_SUP Schema deletion failed: class is used as poss superior 8396 0x000020CC ERROR_DS_RECALCSCHEMA_FAILED Schema update failed in recalculating validation cache. 8397 0x000020CD ERROR_DS_TREE_DELETE_NOT_FINISHED The tree deletion is not finished. 8398 0x000020CE ERROR_DS_CANT_DELETE The requested delete operation could not be performed. 8399 0x000020CF ERROR_DS_ATT_SCHEMA_REQ_ID Cannot read the governs class identifier for the schema record. 8400 0x000020D0 ERROR_DS_BAD_ATT_SCHEMA_SYNTAX The attribute schema has bad syntax. 8401 0x000020D1 ERROR_DS_CANT_CACHE_ATT The attribute could not be cached. 8402 0x000020D2 ERROR_DS_CANT_CACHE_CLASS The class could not be cached. 8403 0x000020D3 ERROR_DS_CANT_REMOVE_ATT_CACHE The attribute could not be removed from the cache. 8404 0x000020D4 ERROR_DS_CANT_REMOVE_CLASS_CACHE The class could not be removed from the cache. 8405 0x000020D5 ERROR_DS_CANT_RETRIEVE_DN The distinguished name attribute could not be read. 8406 0x000020D6 ERROR_DS_MISSING_SUPREF A required subref is missing. 8407 0x000020D7 ERROR_DS_CANT_RETRIEVE_INSTANCE The instance type attribute could not be retrieved. 8408 0x000020D8 ERROR_DS_CODE_INCONSISTENCY An internal error has occurred. 8409 0x000020D9 ERROR_DS_DATABASE_ERROR A database error has occurred. 8410 0x000020DA ERROR_DS_GOVERNSID_MISSING The attribute GOVERNSID is missing. 8411 0x000020DB ERROR_DS_MISSING_EXPECTED_ATT An expected attribute is missing. 8412 0x000020DC ERROR_DS_NCNAME_MISSING_CR_REF The specified naming context is missing a cross reference. 8413 0x000020DD ERROR_DS_SECURITY_CHECKING_ERROR A security checking error has occurred. 596 Version: 1.7.1 TF6510
## Page 597

PLC API Error Description decimal Hexadecimal Name 8414 0x000020DE ERROR_DS_SCHEMA_NOT_LOADED The schema is not loaded. 8415 0x000020DF ERROR_DS_SCHEMA_ALLOC_FAILED Schema allocation failed. Please check if the machine is running low on memory. 8416 0x000020E0 ERROR_DS_ATT_SCHEMA_REQ_SYNTAX Failed to obtain the required syntax for the attribute schema. 8417 0x000020E1 ERROR_DS_GCVERIFY_ERROR The global catalog verification failed. The global catalog is not available or does not support the operation. Some part of the directory is currently not available. 8418 0x000020E2 ERROR_DS_DRA_SCHEMA_MISMATCH The replication operation failed because of a schema mismatch between the servers involved. 8419 0x000020E3 ERROR_DS_CANT_FIND_DSA_OBJ The DSA object could not be found. 8420 0x000020E4 ERROR_DS_CANT_FIND_EXPECTED_NC The naming context could not be found. 8421 0x000020E5 ERROR_DS_CANT_FIND_NC_IN_CACHE The naming context could not be found in the cache. 8422 0x000020E6 ERROR_DS_CANT_RETRIEVE_CHILD The child object could not be retrieved. 8423 0x000020E7 ERROR_DS_SECURITY_ILLEGAL_MODIFY The modification was not permitted for security reasons. 8424 0x000020E8 ERROR_DS_CANT_REPLACE_HIDDEN_REC The operation cannot replace the hidden record. 8425 0x000020E9 ERROR_DS_BAD_HIERARCHY_FILE The hierarchy file is invalid. 8426 0x000020EA ERROR_DS_BUILD_HIERARCHY_TABLE_FAILED The attempt to build the hierarchy table failed. 8427 0x000020EB ERROR_DS_CONFIG_PARAM_MISSING The directory configuration parameter is missing from the registry. 8428 0x000020EC ERROR_DS_COUNTING_AB_INDICES_FAILED The attempt to count the address book indices failed. 8429 0x000020ED ERROR_DS_HIERARCHY_TABLE_MALLOC_FAIL The allocation of the hierarchy table failed. ED 8430 0x000020EE ERROR_DS_INTERNAL_FAILURE The directory service encountered an internal failure. 8431 0x000020EF ERROR_DS_UNKNOWN_ERROR The directory service encountered an unknown failure. 8432 0x000020F0 ERROR_DS_ROOT_REQUIRES_CLASS_TOP A root object requires a class of 'top'. 8433 0x000020F1 ERROR_DS_REFUSING_FSMO_ROLES This directory server is shutting down, and cannot take ownership of new floating single-master operation roles. 8434 0x000020F2 ERROR_DS_MISSING_FSMO_SETTINGS The directory service is missing mandatory configuration information, and is unable to determine the ownership of floating single-master operation roles. 8435 0x000020F3 ERROR_DS_UNABLE_TO_SURRENDER_ROLES The directory service was unable to transfer ownership of one or more floating single-master operation roles to other servers. 8436 0x000020F4 ERROR_DS_DRA_GENERIC The replication operation failed. 8437 0x000020F5 ERROR_DS_DRA_INVALID_PARAMETER An invalid parameter was specified for this replication operation. 8438 0x000020F6 ERROR_DS_DRA_BUSY The directory service is too busy to complete the replication operation at this time. 8439 0x000020F7 ERROR_DS_DRA_BAD_DN The distinguished name specified for this replication operation is invalid. 8440 0x000020F8 ERROR_DS_DRA_BAD_NC The naming context specified for this replication operation is invalid. 8441 0x000020F9 ERROR_DS_DRA_DN_EXISTS The distinguished name specified for this replication operation already exists. 8442 0x000020FA ERROR_DS_DRA_INTERNAL_ERROR The replication system encountered an internal error. 8443 0x000020FB ERROR_DS_DRA_INCONSISTENT_DIT The replication operation encountered a database inconsistency. 8444 0x000020FC ERROR_DS_DRA_CONNECTION_FAILED The server specified for this replication operation could not be contacted. 8445 0x000020FD ERROR_DS_DRA_BAD_INSTANCE_TYPE The replication operation encountered an object with an invalid instance type. 8446 0x000020FE ERROR_DS_DRA_OUT_OF_MEM The replication operation failed to allocate memory. 8447 0x000020FF ERROR_DS_DRA_MAIL_PROBLEM The replication operation encountered an error with the mail system. TF6510 Version: 1.7.1 597
## Page 598

PLC API Error Description decimal Hexadecimal Name 8448 0x00002100 ERROR_DS_DRA_REF_ALREADY_EXISTS The replication reference information for the target server already exists. 8449 0x00002101 ERROR_DS_DRA_REF_NOT_FOUND The replication reference information for the target server does not exist. 8450 0x00002102 ERROR_DS_DRA_OBJ_IS_REP_SOURCE The naming context cannot be removed because it is replicated to another server. 8451 0x00002103 ERROR_DS_DRA_DB_ERROR The replication operation encountered a database error. 8452 0x00002104 ERROR_DS_DRA_NO_REPLICA The naming context is in the process of being removed or is not replicated from the specified server. 8453 0x00002105 ERROR_DS_DRA_ACCESS_DENIED Replication access was denied. 8454 0x00002106 ERROR_DS_DRA_NOT_SUPPORTED The requested operation is not supported by this version of the directory service. 8455 0x00002107 ERROR_DS_DRA_RPC_CANCELLED The replication remote procedure call was cancelled. 8456 0x00002108 ERROR_DS_DRA_SOURCE_DISABLED The source server is currently rejecting replication requests. 8457 0x00002109 ERROR_DS_DRA_SINK_DISABLED The destination server is currently rejecting replication requests. 8458 0x0000210A ERROR_DS_DRA_NAME_COLLISION The replication operation failed due to a collision of object names. 8459 0x0000210B ERROR_DS_DRA_SOURCE_REINSTALLED The replication source has been reinstalled. 8460 0x0000210C ERROR_DS_DRA_MISSING_PARENT The replication operation failed because a required parent object is missing. 8461 0x0000210D ERROR_DS_DRA_PREEMPTED The replication operation was preempted. 8462 0x0000210E ERROR_DS_DRA_ABANDON_SYNC The replication synchronization attempt was abandoned because of a lack of updates. 8463 0x0000210F ERROR_DS_DRA_SHUTDOWN The replication operation was terminated because the system is shutting down. 8464 0x00002110 ERROR_DS_DRA_INCOMPATIBLE_PARTIAL_SE The replication synchronization attempt failed as T the destination partial attribute set is not a subset of source partial attribute set. 8465 0x00002111 ERROR_DS_DRA_SOURCE_IS_PARTIAL_REPLI The replication synchronization attempt failed CA because a master replica attempted to sync from a partial replica. 8466 0x00002112 ERROR_DS_DRA_EXTN_CONNECTION_FAILED The server specified for this replication operation was contacted, but that server was unable to contact an additional server needed to complete the operation. 8467 0x00002113 ERROR_DS_INSTALL_SCHEMA_MISMATCH The version of the Active Directory schema of the source forest is not compatible with the version of Active Directory on this computer. You must upgrade the operating system on a domain controller in the source forest before this computer can be added as a domain controller to that forest. 8468 0x00002114 ERROR_DS_DUP_LINK_ID Schema update failed: An attribute with the same link identifier already exists. 8469 0x00002115 ERROR_DS_NAME_ERROR_RESOLVING Name translation: Generic processing error. 8470 0x00002116 ERROR_DS_NAME_ERROR_NOT_FOUND Name translation: Could not find the name or insufficient right to see name. 8471 0x00002117 ERROR_DS_NAME_ERROR_NOT_UNIQUE Name translation: Input name mapped to more than one output name. 8472 0x00002118 ERROR_DS_NAME_ERROR_NO_MAPPING Name translation: Input name found, but not the associated output format. 8473 0x00002119 ERROR_DS_NAME_ERROR_DOMAIN_ONLY Name translation: Unable to resolve completely, only the domain was found. 8474 0x0000211A ERROR_DS_NAME_ERROR_NO_SYNTACTICAL_ Name translation: Unable to perform purely MAPPING syntactical mapping at the client without going out to the wire. 8475 0x0000211B ERROR_DS_CONSTRUCTED_ATT_MOD Modification of a constructed att is not allowed. 8476 0x0000211C ERROR_DS_WRONG_OM_OBJ_CLASS The OM-Object-Class specified is incorrect for an attribute with the specified syntax. 8477 0x0000211D ERROR_DS_DRA_REPL_PENDING The replication request has been posted; waiting for reply. 598 Version: 1.7.1 TF6510
## Page 599

PLC API Error Description decimal Hexadecimal Name 8478 0x0000211E ERROR_DS_DS_REQUIRED The requested operation requires a directory service, and none was available. 8479 0x0000211F ERROR_DS_INVALID_LDAP_DISPLAY_NAME The LDAP display name of the class or attribute contains non-ASCII characters. 8480 0x00002120 ERROR_DS_NON_BASE_SEARCH The requested search operation is only supported for base searches. 8481 0x00002121 ERROR_DS_CANT_RETRIEVE_ATTS The search failed to retrieve attributes from the database. 8482 0x00002122 ERROR_DS_BACKLINK_WITHOUT_LINK The schema update operation tried to add a backward link attribute that has no corresponding forward link. 8483 0x00002123 ERROR_DS_EPOCH_MISMATCH Source and destination of a cross domain move do not agree on the object's epoch number. Either source or destination does not have the latest version of the object. 8484 0x00002124 ERROR_DS_SRC_NAME_MISMATCH Source and destination of a cross domain move do not agree on the object's current name. Either source or destination does not have the latest version of the object. 8485 0x00002125 ERROR_DS_SRC_AND_DST_NC_IDENTICAL Source and destination of a cross domain move operation are identical. Caller should use local move operation instead of cross domain move operation. 8486 0x00002126 ERROR_DS_DST_NC_MISMATCH Source and destination for a cross domain move are not in agreement on the naming contexts in the forest. Either source or destination does not have the latest version of the Partitions container. 8487 0x00002127 ERROR_DS_NOT_AUTHORITIVE_FOR_DST_NC Destination of a cross domain move is not authoritative for the destination naming context. 8488 0x00002128 ERROR_DS_SRC_GUID_MISMATCH Source and destination of a cross domain move do not agree on the identity of the source object. Either source or destination does not have the latest version of the source object. 8489 0x00002129 ERROR_DS_CANT_MOVE_DELETED_OBJECT Object being moved across domains is already known to be deleted by the destination server. The source server does not have the latest version of the source object. 8490 0x0000212A ERROR_DS_PDC_OPERATION_IN_PROGRESS Another operation which requires exclusive access to the PDC PSMO is already in progress. 8491 0x0000212B ERROR_DS_CROSS_DOMAIN_CLEANUP_REQD A cross domain move operation failed such that the two versions of the moved object exist - one each in the source and destination domains. The destination object needs to be removed to restore the system to a consistent state. 8492 0x0000212C ERROR_DS_ILLEGAL_XDOM_MOVE_OPERATIO This object may not be moved across domain N boundaries either because cross domain moves for this class are disallowed, or the object has some special characteristics, eg: trust account or restricted RID, which prevent its move. 8493 0x0000212D ERROR_DS_CANT_WITH_ACCT_GROUP_MEMB Can't move objects with memberships across ERSHPS domain boundaries as once moved, this would violate the membership conditions of the account group. Remove the object from any account group memberships and retry. 8494 0x0000212E ERROR_DS_NC_MUST_HAVE_NC_PARENT A naming context head must be the immediate child of another naming context head, not of an interior node. 8495 0x0000212F ERROR_DS_CR_IMPOSSIBLE_TO_VALIDATE The directory cannot validate the proposed naming context name because it does not hold a replica of the naming context above the proposed naming context. Please ensure that the domain naming master role is held by a server that is configured as a global catalog server, and that the server is up to date with its replication partners. (Applies only to Windows 2000 Domain Naming masters) 8496 0x00002130 ERROR_DS_DST_DOMAIN_NOT_NATIVE Destination domain must be in native mode. TF6510 Version: 1.7.1 599
## Page 600

PLC API Error Description decimal Hexadecimal Name 8497 0x00002131 ERROR_DS_MISSING_INFRASTRUCTURE_CON The operation can not be performed because the TAINER server does not have an infrastructure container in the domain of interest. 8498 0x00002132 ERROR_DS_CANT_MOVE_ACCOUNT_GROUP Cross-domain move of non-empty account groups is not allowed. 8499 0x00002133 ERROR_DS_CANT_MOVE_RESOURCE_GROUP Cross-domain move of non-empty resource groups is not allowed. 600 Version: 1.7.1 TF6510
## Page 601

PLC API Error Description decimal Hexadecimal Name 8500 0x00002134 ERROR_DS_INVALID_SEARCH_FLAG The search flags for the attribute are invalid. The ANR bit is valid only on attributes of Unicode or Teletex strings. 8501 0x00002135 ERROR_DS_NO_TREE_DELETE_ABOVE_NC Tree deletions starting at an object which has an NC head as a descendant are not allowed. 8502 0x00002136 ERROR_DS_COULDNT_LOCK_TREE_FOR_DELE The directory service failed to lock a tree in TE preparation for a tree deletion because the tree was in use. 8503 0x00002137 ERROR_DS_COULDNT_IDENTIFY_OBJECTS_FO The directory service failed to identify the list of R_TREE_DELETE objects to delete while attempting a tree deletion. 8504 0x00002138 ERROR_DS_SAM_INIT_FAILURE Security Accounts Manager initialization failed because of the following error: %1. Error Status: 0x%2. Click OK to shut down the system and reboot into Directory Services Restore Mode. Check the event log for detailed information. 8505 0x00002139 ERROR_DS_SENSITIVE_GROUP_VIOLATION Only an administrator can modify the membership list of an administrative group. 8506 0x0000213A ERROR_DS_CANT_MOD_PRIMARYGROUPID Cannot change the primary group ID of a domain controller account. 8507 0x0000213B ERROR_DS_ILLEGAL_BASE_SCHEMA_MOD An attempt is made to modify the base schema. 8508 0x0000213C ERROR_DS_NONSAFE_SCHEMA_CHANGE Adding a new mandatory attribute to an existing class, deleting a mandatory attribute from an existing class, or adding an optional attribute to the special class Top that is not a backlink attribute (directly or through inheritance, for example, by adding or deleting an auxiliary class) is not allowed. 8509 0x0000213D ERROR_DS_SCHEMA_UPDATE_DISALLOWED Schema update is not allowed on this DC because the DC is not the schema FSMO Role Owner. 8510 0x0000213E ERROR_DS_CANT_CREATE_UNDER_SCHEMA An object of this class cannot be created under the schema container. You can only create attribute-schema and class-schema objects under the schema container. 8511 0x0000213F ERROR_DS_INSTALL_NO_SRC_SCH_VERSION The replica/child install failed to get the object Version attribute on the schema container on the source DC. Either the attribute is missing on the schema container or the credentials supplied do not have permission to read it. 8512 0x00002140 ERROR_DS_INSTALL_NO_SCH_VERSION_IN_IN The replica/child install failed to read the IFILE object Version attribute in the SCHEMA section of the file schema.ini in the system32 directory. 8513 0x00002141 ERROR_DS_INVALID_GROUP_TYPE The specified group type is invalid. 8514 0x00002142 ERROR_DS_NO_NEST_GLOBALGROUP_IN_MIX Cannot nest global groups in a mixed domain if EDDOMAIN the group is security-enabled. 8515 0x00002143 ERROR_DS_NO_NEST_LOCALGROUP_IN_MIXE Cannot nest local groups in a mixed domain if the DDOMAIN group is security-enabled. 8516 0x00002144 ERROR_DS_GLOBAL_CANT_HAVE_LOCAL_ME A global group cannot have a local group as a MBER member. 8517 0x00002145 ERROR_DS_GLOBAL_CANT_HAVE_UNIVERSAL A global group cannot have a universal group as _MEMBER a member. 8518 0x00002146 ERROR_DS_UNIVERSAL_CANT_HAVE_LOCAL_ A universal group cannot have a local group as a MEMBER member. 8519 0x00002147 ERROR_DS_GLOBAL_CANT_HAVE_CROSSDOM A global group cannot have a cross-domain AIN_MEMBER member. 8520 0x00002148 ERROR_DS_LOCAL_CANT_HAVE_CROSSDOMA A local group cannot have another cross-domain IN_LOCAL_MEMBER local group as a member. 8521 0x00002149 ERROR_DS_HAVE_PRIMARY_MEMBERS A group with primary members cannot change to a security-disabled group. 8522 0x0000214A ERROR_DS_STRING_SD_CONVERSION_FAILED The schema cache load failed to convert the string default SD on a class-schema object. 8523 0x0000214B ERROR_DS_NAMING_MASTER_GC Only DSAs configured to be Global Catalog servers should be allowed to hold the Domain Naming Master FSMO role. (Applies only to Windows 2000 servers) 8524 0x0000214C ERROR_DS_LOOKUP_FAILURE The DSA operation is unable to proceed because of a DNS lookup failure. TF6510 Version: 1.7.1 601
## Page 602

PLC API Error Description decimal Hexadecimal Name 8525 0x0000214D ERROR_DS_COULDNT_UPDATE_SPNS While processing a change to the DNS Host Name for an object, the Service Principal Name values could not be kept in sync. 8526 0x0000214E ERROR_DS_CANT_RETRIEVE_SD The Security Descriptor attribute could not be read. 8527 0x0000214F ERROR_DS_KEY_NOT_UNIQUE. The object requested was not found, but an object with that key was found. 8528 0x00002150 ERROR_DS_WRONG_LINKED_ATT_SYNTAX The syntax of the linked attributed being added is incorrect. Forward links can only have syntax 2.5.5.1, 2.5.5.7, and 2.5.5.14, and backlinks can only have syntax 2.5.5.1. 8529 0x00002151 ERROR_DS_SAM_NEED_BOOTKEY_PASSWOR Security Account Manager needs to get the boot D password. 8530 0x00002152 ERROR_DS_SAM_NEED_BOOTKEY_FLOPPY Security Account Manager needs to get the boot key from floppy disk. 8531 0x00002153 ERROR_DS_CANT_START Directory Service cannot start. 8532 0x00002154 ERROR_DS_INIT_FAILURE Directory Services could not start. 8533 0x00002155 ERROR_DS_NO_PKT_PRIVACY_ON_CONNECTI The connection between client and server ON requires packet privacy or better. 8534 0x00002156 ERROR_DS_SOURCE_DOMAIN_IN_FOREST The source domain may not be in the same forest as destination. 8535 0x00002157 ERROR_DS_DESTINATION_DOMAIN_NOT_IN_F The destination domain must be in the forest. OREST 8536 0x00002158 ERROR_DS_DESTINATION_AUDITING_NOT_EN The operation requires that destination domain ABLED auditing be enabled. 8537 0x00002159 ERROR_DS_CANT_FIND_DC_FOR_SRC_DOMAI The operation couldn't locate a DC for the source N domain. 8538 0x0000215A ERROR_DS_SRC_OBJ_NOT_GROUP_OR_USER The source object must be a group or user. 8539 0x0000215B ERROR_DS_SRC_SID_EXISTS_IN_FOREST The source object's SID already exists in destination forest. 8540 0x0000215C ERROR_DS_SRC_AND_DST_OBJECT_CLASS_M The source and destination object must be of the ISMATCH same type. 8541 0x0000215D ERROR_SAM_INIT_FAILURE Security Accounts Manager initialization failed because of the following error: %1. Error Status: 0x%2. Click OK to shut down the system and reboot into Safe Mode. Check the event log for detailed information. 8542 0x0000215E ERROR_DS_DRA_SCHEMA_INFO_SHIP Schema information could not be included in the replication request. 8543 0x0000215F ERROR_DS_DRA_SCHEMA_CONFLICT The replication operation could not be completed due to a schema incompatibility. 8544 0x00002160 ERROR_DS_DRA_EARLIER_SCHEMA_CONLICT The replication operation could not be completed due to a previous schema incompatibility. 8545 0x00002161 ERROR_DS_DRA_OBJ_NC_MISMATCH The replication update could not be applied because either the source or the destination has not yet received information regarding a recent cross-domain move operation. 8546 0x00002162 ERROR_DS_NC_STILL_HAS_DSAS The requested domain could not be deleted because there exist domain controllers that still host this domain. 8547 0x00002163 ERROR_DS_GC_REQUIRED The requested operation can be performed only on a global catalog server. 8548 0x00002164 ERROR_DS_LOCAL_MEMBER_OF_LOCAL_ONL A local group can only be a member of other local Y groups in the same domain. 8549 0x00002165 ERROR_DS_NO_FPO_IN_UNIVERSAL_GROUPS Foreign security principals cannot be members of universal groups. 8550 0x00002166 ERROR_DS_CANT_ADD_TO_GC The attribute is not allowed to be replicated to the GC because of security reasons. 8551 0x00002167 ERROR_DS_NO_CHECKPOINT_WITH_PDC The checkpoint with the PDC could not be taken because there are too many modifications being processed currently. 8552 0x00002168 ERROR_DS_SOURCE_AUDITING_NOT_ENABLE The operation requires that source domain D auditing be enabled. 8553 0x00002169 ERROR_DS_CANT_CREATE_IN_NONDOMAIN_N Security principal objects can only be created C inside domain naming contexts. 602 Version: 1.7.1 TF6510
## Page 603

PLC API Error Description decimal Hexadecimal Name 8554 0x0000216A ERROR_DS_INVALID_NAME_FOR_SPN A Service Principal Name (SPN) could not be constructed because the provided hostname is not in the necessary format. 8555 0x0000216B ERROR_DS_FILTER_USES_CONTRUCTED_ATT A Filter was passed that uses constructed RS attributes. 8556 0x0000216C ERROR_DS_UNICODEPWD_NOT_IN_QUOTES The unicode Pwd attribute value must be enclosed in double quotes. 8557 0x0000216D ERROR_DS_MACHINE_ACCOUNT_QUOTA_EXC Your computer could not be joined to the domain. EEDED You have exceeded the maximum number of computer accounts you are allowed to create in this domain. Contact your system administrator to have this limit reset or increased. 8558 0x0000216E ERROR_DS_MUST_BE_RUN_ON_DST_DC For security reasons, the operation must be run on the destination DC. 8559 0x0000216F ERROR_DS_SRC_DC_MUST_BE_SP4_OR_GRE For security reasons, the source DC must be ATER NT4SP4 or greater. 8560 0x00002170 ERROR_DS_CANT_TREE_DELETE_CRITICAL_O Critical Directory Service System objects cannot BJ be deleted during tree delete operations. The tree delete may have been partially performed. 8561 0x00002171 ERROR_DS_INIT_FAILURE_CONSOLE Directory Services could not start because of the following error: %1. Error Status: 0x%2. Please click OK to shutdown the system. You can use the recovery console to diagnose the system further. 8562 0x00002172 ERROR_DS_SAM_INIT_FAILURE_CONSOLE Security Accounts Manager initialization failed because of the following error: %1. Error Status: 0x%2. Please click OK to shutdown the system. You can use the recovery console to diagnose the system further. 8563 0x00002173 ERROR_DS_FOREST_VERSION_TOO_HIGH This version of Windows is too old to support the current directory forest behavior. You must upgrade the operating system on this server before it can become a domain controller in this forest. 8564 0x00002174 ERROR_DS_DOMAIN_VERSION_TOO_HIGH This version of Windows is too old to support the current domain behavior. You must upgrade the operating system on this server before it can become a domain controller in this domain. 8565 0x00002175 ERROR_DS_FOREST_VERSION_TOO_LOW This version of Windows no longer supports the behavior version in use in this directory forest. You must advance the forest behavior version before this server can become a domain controller in the forest. 8566 0x00002176 ERROR_DS_DOMAIN_VERSION_TOO_LOW This version of Windows no longer supports the behavior version in use in this domain. You must advance the domain behavior version before this server can become a domain controller in the domain. 8567 0x00002177 ERROR_DS_INCOMPATIBLE_VERSION The version of Windows is incompatible with the behavior version of the domain or forest. 8568 0x00002178 ERROR_DS_LOW_DSA_VERSION The behavior version cannot be increased to the requested value because Domain Controllers still exist with versions lower than the requested value. 8569 0x00002179 ERROR_DS_NO_BEHAVIOR_VERSION_IN_MIXE The behavior version value cannot be increased DDOMAIN while the domain is still in mixed domain mode. You must first change the domain to native mode before increasing the behavior version. 8570 0x0000217A ERROR_DS_NOT_SUPPORTED_SORT_ORDER The sort order requested is not supported. 8571 0x0000217B ERROR_DS_NAME_NOT_UNIQUE Found an object with a non unique name. 8572 0x0000217C ERROR_DS_MACHINE_ACCOUNT_CREATED_P The machine account was created pre-NT4. The RENT4 account needs to be recreated. 8573 0x0000217D ERROR_DS_OUT_OF_VERSION_STORE The database is out of version store. 8574 0x0000217E ERROR_DS_INCOMPATIBLE_CONTROLS_USED Unable to continue operation because multiple conflicting controls were used. 8575 0x0000217F ERROR_DS_NO_REF_DOMAIN Unable to find a valid security descriptor reference domain for this partition. TF6510 Version: 1.7.1 603
## Page 604

PLC API Error Description decimal Hexadecimal Name 8576 0x00002180 ERROR_DS_RESERVED_LINK_ID Schema update failed: The link identifier is reserved. 8577 0x00002181 ERROR_DS_LINK_ID_NOT_AVAILABLE Schema update failed: There are no link identifiers available. 8578 0x00002182 ERROR_DS_AG_CANT_HAVE_UNIVERSAL_MEM An account group can not have a universal group BER as a member. 8579 0x00002183 ERROR_DS_MODIFYDN_DISALLOWED_BY_INST Rename or move operations on naming context ANCE_TYPE heads or read-only objects are not allowed. 8580 0x00002184 ERROR_DS_NO_OBJECT_MOVE_IN_SCHEMA_N Move operations on objects in the schema C naming context are not allowed. 8581 0x00002185 ERROR_DS_MODIFYDN_DISALLOWED_BY_FLA A system flag has been set on the object and G does not allow the object to be moved or renamed. 8582 0x00002186 ERROR_DS_MODIFYDN_WRONG_GRANDPARE This object is not allowed to change its NT grandparent container. Moves are not forbidden on this object, but are restricted to sibling containers. 8583 0x00002187 ERROR_DS_NAME_ERROR_TRUST_REFERRAL Unable to resolve completely, a referral to another forest is generated. 8584 0x00002188 ERROR_NOT_SUPPORTED_ON_STANDARD_SE The requested action is not supported on RVER standard server. 8585 0x00002189 ERROR_DS_CANT_ACCESS_REMOTE_PART_O Could not access a partition of the Active F_AD Directory located on a remote server. Make sure at least one server is running for the partition in question. 8586 0x0000218A ERROR_DS_CR_IMPOSSIBLE_TO_VALIDATE_V2 The directory cannot validate the proposed naming context (or partition) name because it does not hold a replica nor can it contact a replica of the naming context above the proposed naming context. Please ensure that the parent naming context is properly registered in DNS, and at least one replica of this naming context is reachable by the Domain Naming master. 8587 0x0000218B ERROR_DS_THREAD_LIMIT_EXCEEDED The thread limit for this request was exceeded. 8588 0x0000218C ERROR_DS_NOT_CLOSEST The Global catalog server is not in the closet site. 604 Version: 1.7.1 TF6510
## Page 605

PLC API Error Description decimal Hexadecimal Name 9001 0x00002329 DNS_ERROR_RCODE_FORMAT_ERROR DNS server unable to interpret format. 9002 0x0000232A DNS_ERROR_RCODE_SERVER_FAILURE DNS server failure. 9003 0x0000232B DNS_ERROR_RCODE_NAME_ERROR DNS name does not exist. 9004 0x0000232C DNS_ERROR_RCODE_NOT_IMPLEMENTED DNS request not supported by name server. 9005 0x0000232D DNS_ERROR_RCODE_REFUSED DNS operation refused. 9006 0x0000232E DNS_ERROR_RCODE_YXDOMAIN DNS name that ought not exist, does exist. 9007 0x0000232F DNS_ERROR_RCODE_YXRRSET DNS RR set that ought not exist, does exist. 9008 0x00002330 DNS_ERROR_RCODE_NXRRSET DNS RR set that ought to exist, does not exist. 9009 0x00002331 DNS_ERROR_RCODE_NOTAUTH DNS server not authoritative for zone. 9010 0x00002332 DNS_ERROR_RCODE_NOTZONE DNS name in update or prereq is not in zone. 9016 0x00002338 DNS_ERROR_RCODE_BADSIG DNS signature failed to verify. 9017 0x00002339 DNS_ERROR_RCODE_BADKEY DNS bad key. 9018 0x0000233A DNS_ERROR_RCODE_BADTIME DNS signature validity expired. 9501 0x0000251D DNS_INFO_NO_RECORDS No records found for given DNS query. 9502 0x0000251E DNS_ERROR_BAD_PACKET Bad DNS packet. 9503 0x0000251F DNS_ERROR_NO_PACKET No DNS packet. 9504 0x00002520 DNS_ERROR_RCODE DNS error, check rcode. 9505 0x00002521 DNS_ERROR_UNSECURE_PACKET Unsecured DNS packet. 9551 0x0000254F DNS_ERROR_INVALID_TYPE Invalid DNS type. 9552 0x00002550 DNS_ERROR_INVALID_IP_ADDRESS Invalid IP address. 9553 0x00002551 DNS_ERROR_INVALID_PROPERTY Invalid property. 9554 0x00002552 DNS_ERROR_TRY_AGAIN_LATER Try DNS operation again later. 9555 0x00002553 DNS_ERROR_NOT_UNIQUE Record for given name and type is not unique. 9556 0x00002554 DNS_ERROR_NON_RFC_NAME DNS name does not comply with RFC specifications. 9557 0x00002555 DNS_STATUS_FQDN DNS name is a fully-qualified DNS name. 9558 0x00002556 DNS_STATUS_DOTTED_NAME DNS name is dotted (multi-label). 9559 0x00002557 DNS_STATUS_SINGLE_PART_NAME DNS name is a single-part name. 9560 0x00002558 DNS_ERROR_INVALID_NAME_CHAR DSN name contains an invalid character. 9561 0x00002559 DNS_ERROR_NUMERIC_NAME DNS name is entirely numeric. 9601 0x00002581 DNS_ERROR_ZONE_DOES_NOT_EXIST DNS zone does not exist. 9602 0x00002582 DNS_ERROR_NO_ZONE_INFO DNS zone information not available. 9603 0x00002583 DNS_ERROR_INVALID_ZONE_OPERATION Invalid operation for DNS zone. 9604 0x00002584 DNS_ERROR_ZONE_CONFIGURATION_ERROR Invalid DNS zone configuration. 9605 0x00002585 DNS_ERROR_ZONE_HAS_NO_SOA_RECORD DNS zone has no start of authority (SOA) record. 9606 0x00002586 DNS_ERROR_ZONE_HAS_NO_NS_RECORDS DNS zone has no name server (NS) record. 9607 0x00002587 DNS_ERROR_ZONE_LOCKED DNS zone is locked. 9608 0x00002588 DNS_ERROR_ZONE_CREATION_FAILED DNS zone creation failed. 9609 0x00002589 DNS_ERROR_ZONE_ALREADY_EXISTS DNS zone already exists. 9610 0x0000258A DNS_ERROR_AUTOZONE_ALREADY_EXISTS DNS automatic zone already exists. 9611 0x0000258B DNS_ERROR_INVALID_ZONE_TYPE Invalid DNS zone type. 9612 0x0000258C DNS_ERROR_SECONDARY_REQUIRES_MASTE Secondary DNS zone requires master IP address. R_IP 9613 0x0000258D DNS_ERROR_ZONE_NOT_SECONDARY DNS zone not secondary. 9614 0x0000258E DNS_ERROR_NEED_SECONDARY_ADDRESSES Need secondary IP address. 9615 0x0000258F DNS_ERROR_WINS_INIT_FAILED WINS initialization failed. 9616 0x00002590 DNS_ERROR_NEED_WINS_SERVERS Need WINS servers. 9617 0x00002591 DNS_ERROR_NBSTAT_INIT_FAILED NBTSTAT initialization call failed. 9618 0x00002592 DNS_ERROR_SOA_DELETE_INVALID Invalid delete of start of authority (SOA) 9619 0x00002593 DNS_ERROR_FORWARDER_ALREADY_EXISTS A conditional forwarding zone already exists for that name. 9651 0x000025B3 DNS_ERROR_PRIMARY_REQUIRES_DATAFILE Primary DNS zone requires datafile. 9652 0x000025B4 DNS_ERROR_INVALID_DATAFILE_NAME Invalid datafile name for DNS zone. 9653 0x000025B5 DNS_ERROR_DATAFILE_OPEN_FAILURE Failed to open datafile for DNS zone. 9654 0x000025B6 DNS_ERROR_FILE_WRITEBACK_FAILED Failed to write datafile for DNS zone. 9655 0x000025B7 DNS_ERROR_DATAFILE_PARSING Failure while reading datafile for DNS zone. 9701 0x000025E5 DNS_ERROR_RECORD_DOES_NOT_EXIST DNS record does not exist. 9702 0x000025E6 DNS_ERROR_RECORD_FORMAT DNS record format error. TF6510 Version: 1.7.1 605
## Page 606

PLC API Error Description decimal Hexadecimal Name 9703 0x000025E7 DNS_ERROR_NODE_CREATION_FAILED Node creation failure in DNS. 9704 0x000025E8 DNS_ERROR_UNKNOWN_RECORD_TYPE Unknown DNS record type. 9705 0x000025E9 DNS_ERROR_RECORD_TIMED_OUT DNS record timed out. 9706 0x000025EA DNS_ERROR_NAME_NOT_IN_ZONE Name not in DNS zone. 9707 0x000025EB DNS_ERROR_CNAME_LOOP CNAME loop detected. 9708 0x000025EC DNS_ERROR_NODE_IS_CNAME Node is a CNAME DNS record. 9709 0x000025ED DNS_ERROR_CNAME_COLLISION A CNAME record already exists for given name. 9710 0x000025EE DNS_ERROR_RECORD_ONLY_AT_ZONE_ROOT Record only at DNS zone root. 9711 0x000025EF DNS_ERROR_RECORD_ALREADY_EXISTS DNS record already exists. 9712 0x000025F0 DNS_ERROR_SECONDARY_DATA Secondary DNS zone data error. 9713 0x000025F1 DNS_ERROR_NO_CREATE_CACHE_DATA Could not create DNS cache data. 9714 0x000025F2 DNS_ERROR_NAME_DOES_NOT_EXIST DNS name does not exist. 9715 0x000025F3 DNS_WARNING_PTR_CREATE_FAILED Could not create pointer (PTR) record. 9716 0x000025F4 DNS_WARNING_DOMAIN_UNDELETED DNS domain was undeleted. 9717 0x000025F5 DNS_ERROR_DS_UNAVAILABLE The directory service is unavailable. 9718 0x000025F6 DNS_ERROR_DS_ZONE_ALREADY_EXISTS DNS zone already exists in the directory service. 9719 0x000025F7 DNS_ERROR_NO_BOOTFILE_IF_DS_ZONE DNS server not creating or reading the boot file for the directory service integrated DNS zone. 9751 0x00002617 DNS_INFO_AXFR_COMPLETE DNS AXFR (zone transfer) complete. 9752 0x00002618 DNS_ERROR_AXFR DNS zone transfer failed. 9753 0x00002619 DNS_INFO_ADDED_LOCAL_WINS Added local WINS server. 9801 0x00002649 DNS_STATUS_CONTINUE_NEEDED Secure update call needs to continue update request. 9851 0x0000267B DNS_ERROR_NO_TCPIP TCP/IP network protocol not installed. 9852 0x0000267C DNS_ERROR_NO_DNS_SERVERS No DNS servers configured for local system. 9901 0x000026AD DNS_ERROR_DP_DOES_NOT_EXIST The specified directory partition does not exist. 9902 0x000026AE DNS_ERROR_DP_ALREADY_EXISTS The specified directory partition already exists. 9903 0x000026AF DNS_ERROR_DP_NOT_ENLISTED The DS is not enlisted in the specified directory partition. 9904 0x000026B0 DNS_ERROR_DP_ALREADY_ENLISTED The DS is already enlisted in the specified directory partition. 606 Version: 1.7.1 TF6510
## Page 607

PLC API Error Description decimal Hexadecimal Name 10004 0x00002714 WSAEINTR A blocking operation was interrupted by a call to WSACancel Blocking Call. 10009 0x00002719 WSAEBADF The file handle supplied is not valid. 10013 0x0000271D WSAEACCES An attempt was made to access a socket in a way forbidden by its access permissions. 10014 0x0000271E WSAEFAULT The system detected an invalid pointer address in attempting to use a pointer argument in a call. 10022 0x00002726 WSAEINVAL An invalid argument was supplied. 10024 0x00002728 WSAEMFILE Too many open sockets. 10035 0x00002733 WSAEWOULDBLOCK A non-blocking socket operation could not be completed immediately. 10036 0x00002734 WSAEINPROGRESS A blocking operation is currently executing. 10037 0x00002735 WSAEALREADY An operation was attempted on a non-blocking socket that already had an operation in progress. 10038 0x00002736 WSAENOTSOCK An operation was attempted on something that is not a socket. 10039 0x00002737 WSAEDESTADDRREQ A required address was omitted from an operation on a socket. 10040 0x00002738 WSAEMSGSIZE A message sent on a datagram socket was larger than the internal message buffer or some other network limit, or the buffer used to receive a datagram into was smaller than the datagram itself. 10041 0x00002739 WSAEPROTOTYPE A protocol was specified in the socket function call that does not support the semantics of the socket type requested. 10042 0x0000273A WSAENOPROTOOPT An unknown, invalid, or unsupported option or level was specified in a getsockopt or setsockopt call. 10043 0x0000273B WSAEPROTONOSUPPORT The requested protocol has not been configured into the system, or no implementation for it exists. 10044 0x0000273C WSAESOCKTNOSUPPORT The support for the specified socket type does not exist in this address family. 10045 0x0000273D WSAEOPNOTSUPP The attempted operation is not supported for the type of object referenced. 10046 0x0000273E WSAEPFNOSUPPORT The protocol family has not been configured into the system or no implementation for it exists. 10047 0x0000273F WSAEAFNOSUPPORT An address incompatible with the requested protocol was used. 10048 0x00002740 WSAEADDRINUSE Only one usage of each socket address (protocol/ network address/port) is normally permitted. 10049 0x00002741 WSAEADDRNOTAVAIL The requested address is not valid in its context. 10050 0x00002742 WSAENETDOWN A socket operation encountered a dead network. 10051 0x00002743 WSAENETUNREACH A socket operation was attempted to an unreachable network. 10052 0x00002744 WSAENETRESET The connection has been broken due to keep- alive activity detecting a failure while the operation was in progress. 10053 0x00002745 WSAECONNABORTED An established connection was aborted by the software in your host machine. 10054 0x00002746 WSAECONNRESET An existing connection was forcibly closed by the remote host. 10055 0x00002747 WSAENOBUFS An operation on a socket could not be performed because the system lacked sufficient buffer space or because a queue was full. 10056 0x00002748 WSAEISCONN A connect request was made on an already connected socket. 10057 0x00002749 WSAENOTCONN A request to send or receive data was disallowed because the socket is not connected and (when sending on a datagram socket using a sendto call) no address was supplied. 10058 0x0000274A WSAESHUTDOWN A request to send or receive data was disallowed because the socket had already been shut down in that direction with a previous shutdown call. 10059 0x0000274B WSAETOOMANYREFS Too many references to some kernel object. TF6510 Version: 1.7.1 607
## Page 608

PLC API Error Description decimal Hexadecimal Name 10060 0x0000274C WSAETIMEDOUT A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond. 10061 0x0000274D WSAECONNREFUSED No connection could be made because the target machine actively refused it. 10062 0x0000274E WSAELOOP Cannot translate name. 10063 0x0000274F WSAENAMETOOLONG Name component or name was too long. 10064 0x00002750 WSAEHOSTDOWN A socket operation failed because the destination host was down. 10065 0x00002751 WSAEHOSTUNREACH A socket operation was attempted to an unreachable host. 10066 0x00002752 WSAENOTEMPTY Cannot remove a directory that is not empty. 10067 0x00002753 WSAEPROCLIM A Windows Sockets implementation may have a limit on the number of applications that may use it simultaneously. 10068 0x00002754 WSAEUSERS Ran out of quota. 10069 0x00002755 WSAEDQUOT Ran out of disk quota. 10070 0x00002756 WSAESTALE File handle reference is no longer available. 10071 0x00002757 WSAEREMOTE Item is not available locally. 10091 0x0000276B WSASYSNOTREADY WSAStartup cannot function at this time because the underlying system it uses to provide network services is currently unavailable. 10092 0x0000276C WSAVERNOTSUPPORTED The Windows Sockets version requested is not supported. 10093 0x0000276D WSANOTINITIALISED Either the application has not called WSAStartup, or WSAStartup failed. 10101 0x00002775 WSAEDISCON Returned by WSARecv or WSARecv From to indicate the remote party has initiated a graceful shutdown sequence. 10102 0x00002776 WSAENOMORE No more results can be returned by WSALookup Service Next. 10103 0x00002777 WSAECANCELLED A call to WSALookup Service End was made while this call was still processing. The call has been canceled. 10104 0x00002778 WSAEINVALIDPROCTABLE The procedure call table is invalid. 10105 0x00002779 WSAEINVALIDPROVIDER The requested service provider is invalid. 10106 0x0000277A WSAEPROVIDERFAILEDINIT The requested service provider could not be loaded or initialized. 10107 0x0000277B WSASYSCALLFAILURE A system call that should never fail has failed. 10108 0x0000277C WSASERVICE_NOT_FOUND No such service is known. The service cannot be found in the specified name space. 10109 0x0000277D WSATYPE_NOT_FOUND The specified class was not found. 10110 0x0000277E WSA_E_NO_MORE No more results can be returned by WSALookup Service Next. 10111 0x0000277F WSA_E_CANCELLED A call to WSALookup Service End was made while this call was still processing. The call has been canceled. 10112 0x00002780 WSAEREFUSED A database query failed because it was actively refused. 11001 0x00002AF9 WSAHOST_NOT_FOUND No such host is known. 11002 0x00002AFA WSATRY_AGAIN This is usually a temporary error during hostname resolution and means that the local server did not receive a response from an authoritative server. 11003 0x00002AFB WSANO_RECOVERY A non-recoverable error occurred during a database lookup. 11004 0x00002AFC WSANO_DATA The requested name is valid and was found in the database, but it does not have the correct associated data being resolved for. 11005 0x00002AFD WSA_QOS_RECEIVERS At least one reserve has arrived. 11006 0x00002AFE WSA_QOS_SENDERS At least one path has arrived. 11007 0x00002AFF WSA_QOS_NO_SENDERS There are no senders. 11008 0x00002B00 WSA_QOS_NO_RECEIVERS There are no receivers. 11009 0x00002B01 WSA_QOS_REQUEST_CONFIRMED Reserve has been confirmed. 608 Version: 1.7.1 TF6510
## Page 609

PLC API Error Description decimal Hexadecimal Name 11010 0x00002B02 WSA_QOS_ADMISSION_FAILURE Error due to lack of resources. 11011 0x00002B03 WSA_QOS_POLICY_FAILURE Rejected for administrative reasons - bad credentials. 11012 0x00002B04 WSA_QOS_BAD_STYLE Unknown or conflicting style. 11013 0x00002B05 WSA_QOS_BAD_OBJECT Problem with some part of the filterspec or providerspecific buffer in general. 11014 0x00002B06 WSA_QOS_TRAFFIC_CTRL_ERROR Problem with some part of the flowspec. 11015 0x00002B07 WSA_QOS_GENERIC_ERROR General QOS error. 11016 0x00002B08 WSA_QOS_ESERVICETYPE An invalid or unrecognized service type was found in the flowspec. 11017 0x00002B09 WSA_QOS_EFLOWSPEC An invalid or inconsistent flowspec was found in the QOS structure. 11018 0x00002B0A WSA_QOS_EPROVSPECBUF Invalid QOS provider-specific buffer. 11019 0x00002B0B WSA_QOS_EFILTERSTYLE An invalid QOS filter style was used. 11020 0x00002B0C WSA_QOS_EFILTERTYPE An invalid QOS filter type was used. 11021 0x00002B0D WSA_QOS_EFILTERCOUNT An incorrect number of QOS FILTERSPECs were specified in the FLOWDESCRIPTOR. 11022 0x00002B0E WSA_QOS_EOBJLENGTH An object with an invalid Object Length field was specified in the QOS provider-specific buffer. 11023 0x00002B0F WSA_QOS_EFLOWCOUNT An incorrect number of flow descriptors was specified in the QOS structure. 11024 0x00002B10 WSA_QOS_EUNKNOWNPSOBJ An unrecognized object was found in the QOS provider-specific buffer. 11025 0x00002B11 WSA_QOS_EPOLICYOBJ An invalid policy object was found in the QOS provider-specific buffer. 11026 0x00002B12 WSA_QOS_EFLOWDESC An invalid QOS flow descriptor was found in the flow descriptor list. 11027 0x00002B13 WSA_QOS_EPSFLOWSPEC An invalid or inconsistent flowspec was found in the QOS provider-specific buffer. 11028 0x00002B14 WSA_QOS_EPSFILTERSPEC An invalid FILTERSPEC was found in the QOS provider-specific buffer. 11029 0x00002B15 WSA_QOS_ESDMODEOBJ An invalid shape discard mode object was found in the QOS provider-specific buffer. 11030 0x00002B16 WSA_QOS_ESHAPERATEOBJ An invalid shaping rate object was found in the QOS provider-specific buffer. 11031 0x00002B17 WSA_QOS_RESERVED_PETYPE A reserved policy element was found in the QOS provider-specific buffer. TF6510 Version: 1.7.1 609
## Page 610

PLC API Error Description decimal Hexadecimal Name 12000 0x00002EE0 ERROR_SXS_SECTION_NOT_FOUND The requested section was not present in the activation context. 12001 0x00002EE1 ERROR_SXS_CANT_GEN_ACTCTX This application has failed to start because the application configuration is incorrect. Reinstalling the application may fix this problem. 12002 0x00002EE2 ERROR_SXS_INVALID_ACTCTXDATA_FORMAT The application binding data format is invalid. 12003 0x00002EE3 ERROR_SXS_ASSEMBLY_NOT_FOUND The referenced assembly is not installed on your system. 12004 0x00002EE4 ERROR_SXS_MANIFEST_FORMAT_ERROR The manifest file does not begin with the required tag and format information. 12005 0x00002EE5 ERROR_SXS_MANIFEST_PARSE_ERROR The manifest file contains one or more syntax errors. 12006 0x00002EE6 ERROR_SXS_ACTIVATION_CONTEXT_DISABLE The application attempted to activate a disabled D activation context. 12007 0x00002EE7 ERROR_SXS_KEY_NOT_FOUND The requested lookup key was not found in any active activation context. 12008 0x00002EE8 ERROR_SXS_VERSION_CONFLICT A component version required by the application conflicts with another component version already active. 12009 0x00002EE9 ERROR_SXS_WRONG_SECTION_TYPE The type requested activation context section does not match the query API used. 12010 0x00002EEA ERROR_SXS_THREAD_QUERIES_DISABLED Lack of system resources has required isolated activation to be disabled for the current thread of execution. 12011 0x00002EEB ERROR_SXS_PROCESS_DEFAULT_ALREADY_S An attempt to set the process default activation ET context failed because the process default activation context was already set. 12012 0x00002EEC ERROR_SXS_UNKNOWN_ENCODING_GROUP The encoding group identifier specified is not recognized. 12013 0x00002EED ERROR_SXS_UNKNOWN_ENCODING The encoding requested is not recognized. 12014 0x00002EEE ERROR_SXS_INVALID_XML_NAMESPACE_URI The manifest contains a reference to an invalid URI. 12015 0x00002EEF ERROR_SXS_ROOT_MANIFEST_DEPENDENCY_ The application manifest contains a reference to a NOT_INSTALLED dependent assembly which is not installed. 12016 0x00002EF0 ERROR_SXS_LEAF_MANIFEST_DEPENDENCY_ The manifest for an assembly used by the NOT_INSTALLED application has a reference to a dependent assembly which is not installed. 12017 0x00002EF1 ERROR_SXS_INVALID_ASSEMBLY_IDENTITY_A The manifest contains an attribute for the TTRIBUTE assembly identity which is not valid. 12018 0x00002EF2 ERROR_SXS_MANIFEST_MISSING_REQUIRED_ The manifest is missing the required default DEFAULT_NAMESPACE namespace specification on the assembly element. 12019 0x00002EF3 ERROR_SXS_MANIFEST_INVALID_REQUIRED_ The manifest has a default namespace specified DEFAULT_NAMESPACE on the assembly element but its value is not "urn:schemas-microsoft-com:asm.v1". 12020 0x00002EF4 ERROR_SXS_PRIVATE_MANIFEST_CROSS_PAT The private manifest probe has crossed the H_ reparse-point-associated path. WITH_REPARSE_POINT 12021 0x00002EF5 ERROR_SXS_DUPLICATE_DLL_NAME Two or more components referenced directly or indirectly by the application manifest have files by the same name. 12022 0x00002EF6 ERROR_SXS_DUPLICATE_WINDOWCLASS_NA Two or more components referenced directly or ME indirectly by the application manifest have window classes with the same name. 12023 0x00002EF7 ERROR_SXS_DUPLICATE_CLSID Two or more components referenced directly or indirectly by the application manifest have the same COM server CLSIDs. 12024 0x00002EF8 ERROR_SXS_DUPLICATE_IID Two or more components referenced directly or indirectly by the application manifest have proxies for the same COM interface IIDs. 12025 0x00002EF9 ERROR_SXS_DUPLICATE_TLBID Two or more components referenced directly or indirectly by the application manifest have the same COM type library TLBIDs. 12026 0x00002EFA ERROR_SXS_DUPLICATE_PROGID Two or more components referenced directly or indirectly by the application manifest have the same COM Prog IDs. 610 Version: 1.7.1 TF6510
## Page 611

PLC API Error Description decimal Hexadecimal Name 12027 0x00002EFB ERROR_SXS_DUPLICATE_ASSEMBLY_NAME Two or more components referenced directly or indirectly by the application manifest are different versions of the same component which is not permitted. 12028 0x00002EFC ERROR_SXS_FILE_HASH_MISMATCH A component's file does not match the verification information present in the component manifest. 12029 0x00002EFD ERROR_SXS_POLICY_PARSE_ERROR The policy manifest contains one or more syntax errors. 12030 0x00002EFE ERROR_SXS_XML_E_MISSINGQUOTE Manifest Parse Error : A string literal was expected, but no opening quote character was found. 12031 0x00002EFF ERROR_SXS_XML_E_COMMENTSYNTAX Manifest Parse Error : Incorrect syntax was used in a comment. 12032 0x00002F00 ERROR_SXS_XML_E_BADSTARTNAMECHAR Manifest Parse Error : A name was started with an invalid character. 12033 0x00002F01 ERROR_SXS_XML_E_BADNAMECHAR Manifest Parse Error : A name contained an invalid character. 12034 0x00002F02 ERROR_SXS_XML_E_BADCHARINSTRING Manifest Parse Error : A string literal contained an invalid character. 12035 0x00002F03 ERROR_SXS_XML_E_XMLDECLSYNTAX Manifest Parse Error : Invalid syntax for an XML declaration. 12036 0x00002F04 ERROR_SXS_XML_E_BADCHARDATA Manifest Parse Error : An invalid character was found in text content. 12037 0x00002F05 ERROR_SXS_XML_E_MISSINGWHITESPACE Manifest Parse Error : Required white space was missing. 12038 0x00002F06 ERROR_SXS_XML_E_EXPECTINGTAGEND Manifest Parse Error : The character '>' was expected. 12039 0x00002F07 ERROR_SXS_XML_E_MISSINGSEMICOLON Manifest Parse Error : A semi colon character was expected. 12040 0x00002F08 ERROR_SXS_XML_E_UNBALANCEDPAREN Manifest Parse Error : Unbalanced parentheses. 12041 0x00002F09 ERROR_SXS_XML_E_INTERNALERROR Manifest Parse Error : Internal error. 12042 0x00002F0A ERROR_SXS_XML_E_UNEXPECTED_WHITESPA Manifest Parse Error : White space is not allowed CE at this location. 12043 0x00002F0B ERROR_SXS_XML_E_INCOMPLETE_ENCODING Manifest Parse Error : End of file reached in invalid state for current encoding. 12044 0x00002F0C ERROR_SXS_XML_E_MISSING_PAREN Manifest Parse Error : Missing parenthesis. 12045 0x00002F0D ERROR_SXS_XML_E_EXPECTINGCLOSEQUOTE Manifest Parse Error : A single or double closing quote character (\' or \") is missing. 12046 0x00002F0E ERROR_SXS_XML_E_MULTIPLE_COLONS Manifest Parse Error : Multiple colons are not allowed in a name. 12047 0x00002F0F ERROR_SXS_XML_E_INVALID_DECIMAL Manifest Parse Error : Invalid character for decimal digit. 12048 0x00002F10 ERROR_SXS_XML_E_INVALID_HEXIDECIMAL Manifest Parse Error : Invalid character for hexadecimal digit. 12049 0x00002F11 ERROR_SXS_XML_E_INVALID_UNICODE Manifest Parse Error : Invalid Unicode character value for this platform. 12050 0x00002F12 ERROR_SXS_XML_E_WHITESPACEORQUESTIO Manifest Parse Error : Expecting white space or NMARK '?'. 12051 0x00002F13 ERROR_SXS_XML_E_UNEXPECTEDENDTAG Manifest Parse Error : End tag was not expected at this location. 12052 0x00002F14 ERROR_SXS_XML_E_UNCLOSEDTAG Manifest Parse Error : The following tags were not closed: %1. 12053 0x00002F15 ERROR_SXS_XML_E_DUPLICATEATTRIBUTE Manifest Parse Error : Duplicate attribute. 12054 0x00002F16 ERROR_SXS_XML_E_MULTIPLEROOTS Manifest Parse Error : Only one top level element is allowed in an XML document. 12055 0x00002F17 ERROR_SXS_XML_E_INVALIDATROOTLEVEL Manifest Parse Error : Invalid at the top level of the document. 12056 0x00002F18 ERROR_SXS_XML_E_BADXMLDECL Manifest Parse Error : Invalid XML declaration. 12057 0x00002F19 ERROR_SXS_XML_E_MISSINGROOT Manifest Parse Error : XML document must have a top level element. 12058 0x00002F1A ERROR_SXS_XML_E_UNEXPECTEDEOF Manifest Parse Error : Unexpected end of file. 12059 0x00002F1B ERROR_SXS_XML_E_BADPEREFINSUBSET Manifest Parse Error : Parameter entities cannot be used inside markup declarations in an internal subset. 12060 0x00002F1C ERROR_SXS_XML_E_UNCLOSEDSTARTTAG Manifest Parse Error : Element was not closed. TF6510 Version: 1.7.1 611
## Page 612

PLC API Error Description decimal Hexadecimal Name 12061 0x00002F1D ERROR_SXS_XML_E_UNCLOSEDENDTAG Manifest Parse Error : End element was missing the character '>'. 12062 0x00002F1E ERROR_SXS_XML_E_UNCLOSEDSTRING Manifest Parse Error : A string literal was not closed. 12063 0x00002F1F ERROR_SXS_XML_E_UNCLOSEDCOMMENT Manifest Parse Error : A comment was not closed. 12064 0x00002F20 ERROR_SXS_XML_E_UNCLOSEDDECL Manifest Parse Error : A declaration was not closed. 12065 0x00002F21 ERROR_SXS_XML_E_UNCLOSEDCDATA Manifest Parse Error : A CDATA section was not closed. 12066 0x00002F22 ERROR_SXS_XML_E_RESERVEDNAMESPACE Manifest Parse Error : The namespace prefix is not allowed to start with the reserved string "xml". 12067 0x00002F23 ERROR_SXS_XML_E_INVALIDENCODING Manifest Parse Error : System does not support the specified encoding. 12068 0x00002F24 ERROR_SXS_XML_E_INVALIDSWITCH Manifest Parse Error : Switch from current encoding to specified encoding not supported. 12069 0x00002F25 ERROR_SXS_XML_E_BADXMLCASE Manifest Parse Error : The name 'xml' is reserved and must be lower case. 12070 0x00002F26 ERROR_SXS_XML_E_INVALID_STANDALONE Manifest Parse Error : The standalone attribute must have the value 'yes' or 'no'. 12071 0x00002F27 ERROR_SXS_XML_E_UNEXPECTED_STANDAL Manifest Parse Error : The standalone attribute ONE cannot be used in external entities. 12072 0x00002F28 ERROR_SXS_XML_E_INVALID_VERSION Manifest Parse Error : Invalid version number. 12073 0x00002F29 ERROR_SXS_XML_E_MISSINGEQUALS Manifest Parse Error : Missing equals sign between attribute and attribute value. 13000 0x000032C8 ERROR_IPSEC_QM_POLICY_EXISTS The specified quick mode policy already exists. 13001 0x000032C9 ERROR_IPSEC_QM_POLICY_NOT_FOUND The specified quick mode policy was not found. 13002 0x000032CA ERROR_IPSEC_QM_POLICY_IN_USE The specified quick mode policy is being used. 13003 0x000032CB ERROR_IPSEC_MM_POLICY_EXISTS The specified main mode policy already exists. 13004 0x000032CC ERROR_IPSEC_MM_POLICY_NOT_FOUND The specified main mode policy was not found. 13005 0x000032CD ERROR_IPSEC_MM_POLICY_IN_USE The specified main mode policy is being used. 13006 0x000032CE ERROR_IPSEC_MM_FILTER_EXISTS The specified main mode filter already exists. 13007 0x000032CF ERROR_IPSEC_MM_FILTER_NOT_FOUND The specified main mode filter was not found. 13008 0x000032D0 ERROR_IPSEC_TRANSPORT_FILTER_EXISTS The specified transport mode filter already exists. 13009 0x000032D1 ERROR_IPSEC_TRANSPORT_FILTER_NOT_FOU The specified transport mode filter does not exist. ND 13010 0x000032D2 ERROR_IPSEC_MM_AUTH_EXISTS The specified main mode authentication list exists. 13011 0x000032D3 ERROR_IPSEC_MM_AUTH_NOT_FOUND The specified main mode authentication list was not found. 13012 0x000032D4 ERROR_IPSEC_MM_AUTH_IN_USE The specified quick mode policy is being used. 13013 0x000032D5 ERROR_IPSEC_DEFAULT_MM_POLICY_NOT_F The specified main mode policy was not found. OUND 13014 0x000032D6 ERROR_IPSEC_DEFAULT_MM_AUTH_NOT_FOU The specified quick mode policy was not found. ND 13015 0x000032D7 ERROR_IPSEC_DEFAULT_QM_POLICY_NOT_FO The manifest file contains one or more syntax UND errors. 13016 0x000032D8 ERROR_IPSEC_TUNNEL_FILTER_EXISTS The application attempted to activate a disabled activation context. 13017 0x000032D9 ERROR_IPSEC_TUNNEL_FILTER_NOT_FOUND The requested lookup key was not found in any active activation context. 13018 0x000032DA ERROR_IPSEC_MM_FILTER_PENDING_DELETI The Main Mode filter is pending deletion. ON 13019 0x000032DB ERROR_IPSEC_TRANSPORT_FILTER_PENDING The transport filter is pending deletion. _DELETION 13020 0x000032DC ERROR_IPSEC_TUNNEL_FILTER_PENDING_DE The tunnel filter is pending deletion. LETION 13021 0x000032DD ERROR_IPSEC_MM_POLICY_PENDING_DELETI The Main Mode policy is pending deletion. ON 13022 0x000032DE ERROR_IPSEC_MM_AUTH_PENDING_DELETIO The Main Mode authentication bundle is pending N deletion. 13023 0x000032DF ERROR_IPSEC_QM_POLICY_PENDING_DELETI The Quick Mode policy is pending deletion. ON 612 Version: 1.7.1 TF6510
## Page 613

PLC API Error Description decimal Hexadecimal Name 13801 0x000035E9 ERROR_IPSEC_IKE_AUTH_FAIL IKE authentication credentials are unacceptable. 13802 0x000035EA ERROR_IPSEC_IKE_ATTRIB_FAIL IKE security attributes are unacceptable. 13803 0x000035EB ERROR_IPSEC_IKE_NEGOTIATION_PENDING IKE Negotiation in progress. 13804 0x000035EC ERROR_IPSEC_IKE_GENERAL_PROCESSING_E General processing error. RROR 13805 0x000035ED ERROR_IPSEC_IKE_TIMED_OUT Negotiation timed out. 13806 0x000035EE ERROR_IPSEC_IKE_NO_CERT IKE failed to find valid machine certificate. 13807 0x000035EF ERROR_IPSEC_IKE_SA_DELETED IKE SA deleted by peer before establishment completed. 13808 0x000035F0 ERROR_IPSEC_IKE_SA_REAPED IKE SA deleted before establishment completed. 13809 0x000035F1 ERROR_IPSEC_IKE_MM_ACQUIRE_DROP Negotiation request sat in Queue too long. 13810 0x000035F2 ERROR_IPSEC_IKE_QM_ACQUIRE_DROP Negotiation request sat in Queue too long. 13811 0x000035F3 ERROR_IPSEC_IKE_QUEUE_DROP_MM Negotiation request sat in Queue too long. 13812 0x000035F4 ERROR_IPSEC_IKE_QUEUE_DROP_NO_MM Negotiation request sat in Queue too long. 13813 0x000035F5 ERROR_IPSEC_IKE_DROP_NO_RESPONSE No response from peer. 13814 0x000035F6 ERROR_IPSEC_IKE_MM_DELAY_DROP Negotiation took too long. 13815 0x000035F7 ERROR_IPSEC_IKE_QM_DELAY_DROP Negotiation took too long. 13816 0x000035F8 ERROR_IPSEC_IKE_ERROR Unknown error occurred. 13817 0x000035F9 ERROR_IPSEC_IKE_CRL_FAILED Certificate Revocation Check failed. 13818 0x000035FA ERROR_IPSEC_IKE_INVALID_KEY_USAGE Invalid certificate key usage. 13819 0x000035FB ERROR_IPSEC_IKE_INVALID_CERT_TYPE Invalid certificate type. 13820 0x000035FC ERROR_IPSEC_IKE_NO_PRIVATE_KEY No private key associated with machine certificate. 13822 0x000035FE ERROR_IPSEC_IKE_DH_FAIL Failure in Diffie-Helman computation. 13824 0x00003600 ERROR_IPSEC_IKE_INVALID_HEADER Invalid header. 13825 0x00003601 ERROR_IPSEC_IKE_NO_POLICY No policy configured. 13826 0x00003602 ERROR_IPSEC_IKE_INVALID_SIGNATURE Failed to verify signature. 13827 0x00003603 ERROR_IPSEC_IKE_KERBEROS_ERROR Failed to authenticate using Kerberos. 13828 0x00003604 ERROR_IPSEC_IKE_NO_PUBLIC_KEY Peer's certificate did not have a public key. 13829 0x00003605 ERROR_IPSEC_IKE_PROCESS_ERR Error processing error payload. 13830 0x00003606 ERROR_IPSEC_IKE_PROCESS_ERR_SA Error processing SA payload. 13831 0x00003607 ERROR_IPSEC_IKE_PROCESS_ERR_PROP Error processing Proposal payload. 13832 0x00003608 ERROR_IPSEC_IKE_PROCESS_ERR_TRANS Error processing Transform payload. 13833 0x00003609 ERROR_IPSEC_IKE_PROCESS_ERR_KE Error processing KE payload. 13834 0x0000360A ERROR_IPSEC_IKE_PROCESS_ERR_ID Error processing ID payload. 13835 0x0000360B ERROR_IPSEC_IKE_PROCESS_ERR_CERT Error processing Cert payload. 13836 0x0000360C ERROR_IPSEC_IKE_PROCESS_ERR_CERT_RE Error processing Certificate Request payload. Q 13837 0x0000360D ERROR_IPSEC_IKE_PROCESS_ERR_HASH Error processing Hash payload. 13838 0x0000360E ERROR_IPSEC_IKE_PROCESS_ERR_SIG Error processing Signature payload. 13839 0x0000360F ERROR_IPSEC_IKE_PROCESS_ERR_NONCE Error processing Nonce payload. 13840 0x00003610 ERROR_IPSEC_IKE_PROCESS_ERR_NOTIFY Error processing Notify payload. 13841 0x00003611 ERROR_IPSEC_IKE_PROCESS_ERR_DELETE Error processing Delete Payload. 13842 0x00003612 ERROR_IPSEC_IKE_PROCESS_ERR_VENDOR Error processing Vendor Id payload. 13843 0x00003613 ERROR_IPSEC_IKE_INVALID_PAYLOAD Invalid payload received. 13844 0x00003614 ERROR_IPSEC_IKE_LOAD_SOFT_SA Soft SA loaded. 13845 0x00003615 ERROR_IPSEC_IKE_SOFT_SA_TORN_DOWN Soft SA torn down. 13846 0x00003616 ERROR_IPSEC_IKE_INVALID_COOKIE Invalid cookie received.. 13847 0x00003617 ERROR_IPSEC_IKE_NO_PEER_CERT Peer failed to send valid machine certificate. 13848 0x00003618 ERROR_IPSEC_IKE_PEER_CRL_FAILED Certification Revocation check of peer's certificate failed. 13849 0x00003619 ERROR_IPSEC_IKE_POLICY_CHANGE New policy invalidated SAs formed with old policy. 13850 0x0000361A ERROR_IPSEC_IKE_NO_MM_POLICY There is no available Main Mode IKE policy. 13851 0x0000361B ERROR_IPSEC_IKE_NOTCBPRIV Failed to enabled TCB privilege. 13852 0x0000361C ERROR_IPSEC_IKE_SECLOADFAIL Failed to load SECURITY. DLL. 13853 0x0000361D ERROR_IPSEC_IKE_FAILSSPINIT Failed to obtain security function table dispatch address from SSPI. 13854 0x0000361E ERROR_IPSEC_IKE_FAILQUERYSSP Failed to query Kerberos package to obtain max token size. TF6510 Version: 1.7.1 613
## Page 614

PLC API Error Description decimal Hexadecimal Name 13855 0x0000361F ERROR_IPSEC_IKE_SRVACQFAIL Failed to obtain Kerberos server credentials for ISAKMP/ERROR_IPSEC_IKE service. Kerberos authentication will not function. The most likely reason for this is lack of domain membership. This is normal if your computer is a member of a workgroup. 13856 0x00003620 ERROR_IPSEC_IKE_SRVQUERYCRED Failed to determine SSPI principal name for ISAKMP/ERROR_IPSEC_IKE service (Query Credentials Attributes). 13857 0x00003621 ERROR_IPSEC_IKE_GETSPIFAIL Failed to obtain new SPI for the inbound SA from Ipsec driver. The most common cause for this is that the driver does not have the correct filter. Check your policy to verify the filters. 13858 0x00003622 ERROR_IPSEC_IKE_INVALID_FILTER Given filter is invalid. 13859 0x00003623 ERROR_IPSEC_IKE_OUT_OF_MEMORY Memory allocation failed. 13860 0x00003624 ERROR_IPSEC_IKE_ADD_UPDATE_KEY_FAILED Failed to add Security Association to IPSec Driver. The most common cause for this is if the IKE negotiation took too long to complete. If the problem persists, reduce the load on the faulting machine. 13861 0x00003625 ERROR_IPSEC_IKE_INVALID_POLICY Invalid policy. 13862 0x00003626 ERROR_IPSEC_IKE_UNKNOWN_DOI Invalid DOI. 13863 0x00003627 ERROR_IPSEC_IKE_INVALID_SITUATION Invalid situation. 13864 0x00003628 ERROR_IPSEC_IKE_DH_FAILURE Diffie-Hellman failure. 13865 0x00003629 ERROR_IPSEC_IKE_INVALID_GROUP Invalid Diffie-Hellman group. 13866 0x0000362A ERROR_IPSEC_IKE_ENCRYPT Error encrypting payload. 13867 0x0000362B ERROR_IPSEC_IKE_DECRYPT Error decrypting payload. 13868 0x0000362C ERROR_IPSEC_IKE_POLICY_MATCH Policy match error. 13869 0x0000362D ERROR_IPSEC_IKE_UNSUPPORTED_ID Unsupported ID. 13870 0x0000362E ERROR_IPSEC_IKE_INVALID_HASH Hash verification failed. 13871 0x0000362F ERROR_IPSEC_IKE_INVALID_HASH_ALG Invalid hash algorithm. 13872 0x00003630 ERROR_IPSEC_IKE_INVALID_HASH_SIZE Invalid hash size. 13873 0x00003631 ERROR_IPSEC_IKE_INVALID_ENCRYPT_ALG Invalid encryption algorithm. 13874 0x00003632 ERROR_IPSEC_IKE_INVALID_AUTH_ALG Invalid authentication algorithm. 13875 0x00003633 ERROR_IPSEC_IKE_INVALID_SIG Invalid certificate signature. 13876 0x00003634 ERROR_IPSEC_IKE_LOAD_FAILED Load failed. 13877 0x00003635 ERROR_IPSEC_IKE_RPC_DELETE Deleted via RPC call. 13878 0x00003636 ERROR_IPSEC_IKE_BENIGN_REINIT Temporary state created to perform reinitialization. This is not a real failure. 13879 0x00003637 ERROR_IPSEC_IKE_INVALID_RESPONDER_LIF The lifetime value received in the Responder ETIME_NOTIFY Lifetime Notify is below the Windows 2000 configured minimum value. Please fix the policy on the peer machine. 13880 0x00003638 ERROR_IPSEC_IKE_QM_LIMIT_REAP SA reaped because QM limit was reached. 13881 0x00003639 ERROR_IPSEC_IKE_INVALID_CERT_KEYLEN Key length in certificate is too small for configured security requirements. 13882 0x0000363A ERROR_IPSEC_IKE_MM_LIMIT Max number of established MM SAs to peer exceeded. 13883 0x0000363B ERROR_IPSEC_IKE_NEGOTIATION_DISABLED IKE received a policy that disables negotiation. 13884 0x0000363C ERROR_IPSEC_IKE_QM_LIMIT Reached maximum quick mode limit for the main mode. New main mode will be started. 6.8.1.60 ST_Tc Ulosi Outgoing Connect Event Class The table below contains a list of the events of the ULOSI event class for the outgoing connection. Namespace: TC_EVENTS [} 528]. Tc Ulosi Outgoing Connect Event Class Type: Global Variable Library: Tc3_Ulosi (Tc3_Ulosi.compiled-library) 614 Version: 1.7.1 TF6510
## Page 615

PLC API Events Name ID Severity Description Invalid Primitive State 1 Error Invalid primitive state. Invalid Association Objec 2 Error Invalid association object interface (null). t Invalid Settings Object 3 Error Invalid settings object interface (null). Invalid Rfc1006Object 4 Error Invalid RFC 1006 object interface (null). Invalid Client Object 5 Error Invalid client object interface (null). AARETimeout Error 6 Error Application association response (AARE) timeout error. 6.8.2 TC_EVENT_CLASSES constants TC_EVENT_CLASSES is a global Twin CAT system variable list (GVL). Via the variable name and the variable value (GUID), each constant in this list identifies an event class or event class ID available on a Twin CAT system. The Twin CAT system has several predefined Twin CAT System event class IDs. Further event class IDs are brought along by the integrated PLC libraries and installed Twin CAT Functions or defined by the user in the PLC application. The variable values (GUIDs) are unique on a Twin CAT system and are generated and updated automatically by the Twin CAT system. The number of available event classes IDs can vary from system to system as a result. Namespace: Twin CAT Type System [} 97]. TC_EVENT_CLASSES Type: Global Variable List (GVL) Library: Not required. Twin CAT System Resource from v3.1.4022.14 Twin CAT System event class IDs Name Type Tc System Event Class GUID Tc General Ads Event Class GUID Tc Router Event Class GUID Tc RTime Event Class GUID Win32Event Class GUID TF6510 Version: 1.7.1 615
## Page 616

PLC API TF6510 event class IDs 616 Version: 1.7.1 TF6510
## Page 617

PLC API Name Type Tc Acsi Event Class GUID Tc IEC61850Event Class GUID Tc Scsm Event Class GUID Tc Mms Abort Event Class GUID Tc Mms Association Event Class GUID Tc Mms Client Event Class GUID Tc Mms Incoming Connect Event Class GUID Tc Mms Incoming Disconnect Event Class GUID Tc Mms Outgoing Connect Event Class GUID Tc Mms Outgoing Disconnect Event Class GUID Tc Mms Receiver Event Class GUID Tc Mms Sender Event Class GUID Tc Mms Transaction Event Class GUID Tc Ulosi Abort Event Class GUID Tc Ulosi Association Event Class GUID Tc Ulosi Client Event Class GUID Tc Ulosi Incoming Connect Event Class GUID Tc Ulosi Incoming Disconnect Event Class GUID Tc Ulosi Outgoing Connect Event Class GUID Tc Ulosi Outgoing Disconnect Event Class GUID Tc Ulosi Receiver Event Class GUID Tc Ulosi Sender Event Class GUID Tc Ulosi Transaction Event Class GUID Tc Ulosi Server Event Class GUID Tc Ulosi Connection Event Class GUID Tc Ulosi Acse Abrt Diagnostic Event Class GUID Tc Ulosi Acse Aare Diagnostic Event Class GUID Tc Ulosi Spdu Reason Code Event Class GUID Tc Rfc1006Abort Event Class GUID Tc Rfc1006Association Event Class GUID Tc Rfc1006Client Event Class GUID Tc Rfc1006Incoming Connect Event Class GUID Tc Rfc1006Incoming Disconnect Event Class GUID Tc Rfc1006Outgoing Connect Event Class GUID Tc Rfc1006Outgoing Disconnect Event Class GUID Tc Rfc1006Receiver Event Class GUID Tc Rfc1006Sender Event Class GUID Tc Rfc1006Transaction Event Class GUID Tc Tpkt Abort Event Class GUID Tc Tpkt Association Event Class GUID Tc Tpkt Pdu Event Class GUID Tc Tpkt Receiver Event Class GUID Tc Tpkt Sender Event Class GUID Tc Tpkt Transaction Event Class GUID TF6510 Version: 1.7.1 617
## Page 618

PLC API Name Type Tc Sockets Abort Event Class GUID Tc Sockets Association Event Class GUID Tc Sockets Client Event Class GUID Tc Sockets Incoming Connect Event Class GUID Tc Sockets Incoming Disconnect Event Class GUID Tc Sockets Outgoing Connect Event Class GUID Tc Sockets Outgoing Disconnect Event Class GUID Tc Sockets Receiver Event Class GUID Tc Sockets Sender Event Class GUID Tc Sockets Transaction Event Class GUID Tc Sockets Win32Srv Event Class GUID 6.8.3 GVL_Acsi constants Namespace: Tc3_Acsi [} 97]. GVL_Acsi Type: Global Variable List (GVL) Library: Tc3_Acsi (Tc3_Acsi.compiled-library) Functional groups Constant Type Value Description ACSI_FC_MX DWORD 16#00000001 Measured values (analog) ACSI_FC_ST DWORD 16#00000002 Status information ACSI_FC_CO DWORD 16#00000004 Switch control ACSI_FC_CF DWORD 16#00000008 Configuration ACSI_FC_DC DWORD 16#00000010 Description ACSI_FC_SP DWORD 16#00000020 Setpoints ACSI_FC_SG DWORD 16#00000040 Setting group ACSI_FC_RP DWORD 16#00000080 Unbuffered reports ACSI_FC_LG DWORD 16#00000100 Logging ACSI_FC_BR DWORD 16#00000200 Buffered reports ACSI_FC_GO DWORD 16#00000400 Goose control ACSI_FC_GS DWORD 16#00000800 Gsse control ACSI_FC_SV DWORD 16#00001000 Substitute values ACSI_FC_SE DWORD 16#00002000 Settings group, editable ACSI_FC_MS DWORD 16#00004000 Multicast sampling values ACSI_FC_SC DWORD 16#00008000 SCL ACSI_FC_US DWORD 16#00010000 Unicast sampling values ACSI_FC_EX DWORD 16#00020000 Extended definition ACSI_FC_XX DWORD 16#0003FFFF Represent all groups mentioned above Trigger options for reports Constant Type Value Description ACSI_Trg Op_dchg DWORD 16#02 Report for attribute value change ACSI_Trg Op_qchg DWORD 16#04 Report for attribute quality change ACSI_Trg Op_dupd DWORD 16#08 Report for attribute value update ACSI_Trg Op_intg DWORD 16#10 Integrity report ACSI_Trg Op_gi DWORD 16#20 Report triggered by general query 618 Version: 1.7.1 TF6510
## Page 619

PLC API Access authorization Constant Type Value Description ACSI_AP_RO BYTE 1 Read access ACSI_AP_WO BYTE 2 Write access ACSI_AP_RW BYTE 3 Read and write access (default) TF6510 Version: 1.7.1 619
## Page 620

PLC API Further constants 620 Version: 1.7.1 TF6510
## Page 621

PLC API Constant Type Value Description NULL_Entry ID T_OCTET8 [8(0)] All octets are 0. NULL_Owner T_OCTET64 [64(0)] All octets are 0. NULL_Time Stamp T_Utc Time second Since Epoch:=DT#1970-0 Timestamp with value 0, all 1-01-00:00:00, "quality" bits are 0 and "accuracy" fraction Of Second:=[0,0,0], is unknown. quality:=(Leap Seconds Known:= 0, Clock Failure:=0, Clock Not Synchronized:=0, Accuracy0:=0, Accuracy1:=0, Accuracy2:=0, Accuracy3:=0, Accuracy4:=0) NULL_Entry Time T_Binary Time time Of Day:=TOD#0:0:0, day:=0 Acquisition time with the value 0. NULL_Originator ST_Acsi Originator or Cat:=E_Acsi Or Category. Not S Value, "or Cat" is 0 and all octets upported, or Ident:=[64(0)] in "or Ident" are 0. NULL_Reason Cod ST_Acsi Reason C reserved:=0, Data Change:=0, All bits are 0. e ode Quality Change:=0, Data Update:=0, Integrity:=0, General Interrogation:=0, Application Trigger:=0, unused:=0 NULL_Trg Ops ST_Acsi Trigger Co reserved:=0, Data Change:=0, All bits are 0. nditions Quality Change:=0, Data Update:=0, Integrity:=0, General Interrogation:=0, reserved2:=0 NULL_Opt Flds ST_Acsi Optional F reserved:=0, All bits are 0. ields Sequence Number:=0, Report Time Stamp:=0, Reason For Inclusion:=0, Data Set Name:=0, Datareference:=0, Buffer Overflow:=0, Entry ID:=0, Conf Revision:=0, Segmentation:=0 NULL_Log Opt Flds ST_Acsi Log Optio Reason For Inclusion:=0 All bits are 0. nal Fields NULL_Quality ST_Acsi Quality Validity0:=0, Validity1:=0, All bits are 0. Overflow:=0, Out Of Range:=0, Bad Reference:=0, Oscillatory:=0, Failure:=0, Old Data:=0, Inconsistent:=0, Inaccurate:=0, Source:=0, Test:=0, Operator Blocked:=0 NULL_Unit ST_Acsi Unit SIUnit:=E_Acsi SIUnit. None, Value, "SIUnit" is dimensionless multiplier:=E_Acsi Multiplier. Non and "multiplier" is 0. e NULL_Val With Tran ST_Acsi Val With Tr pos Val:=0, trans Ind:=FALSE Value, "pos Val" is 0 and "trans Ind" s ans is FALSE. NULL_Analogue Val ST_Acsi Analogue i:=0, f:=REAL#0.0 Value, "i" is 0 and "f" is 0. ue Value NULL_UINT24 T_UINT24 [0,0,0] Unsigned 24-bit number with the value 0. NULL_INT24 T_INT24 [0,0,0] Signed 24-bit number with the value 0. NULL_UINT128 T_UINT128 Hi:=0, Lo:=0 Unsigned 128-bit number with the value 0. TF6510 Version: 1.7.1 621
## Page 622

PLC API Constant Type Value Description NULL_INT128 T_INT128 Hi:=0, Lo:=0 Signed 128-bit number with the value 0. 622 Version: 1.7.1 TF6510
## Page 623

Examples 7 Examples Some samples of the use of the IEC 61850 implementation in Twin CAT are explained in this chapter. As all samples are based on a general structure, this is explained first and is a prerequisite in the subsequent samples. Following that, each sample has its own chapter in which the special functions of the project are listed. The sample code is included in the documentation as zip files. After unpacking the samples, it is advisable to retain the project folder structure. Each sample is accompanied by an ICD file. If the ICD file is imported from the original folder in the Twin CAT Telecontrol Configurator and a new, modified Twin CAT project is generated, then a Twin CAT project comparison can be made with the original project. Twin CAT Telecontrol Configurator will output a corresponding message during project code generation and suggest project comparison. The prerequisite for this is that a project with the same name has been found in a subdirectory (below the ICD file). The sample projects use the default solution/project names of the Twin CAT Telecontrol Configurator. In order to generate a project that can be compared with Twin CAT Project Compare, the project type: server must be selected for the server samples and the project type: client for the client samples during code generation. If the ICD file has been copied to a different location or a different project or solution name has been assigned, then no automatic Twin CAT project comparison can be performed after code generation. Twin CAT Telecontrol Configurator generates a new Twin CAT project at the new location or under a different name. If this is the case, you can start Twin CAT Project Compare as a standalone tool (Start > Beckhoff > Twin CAT Project Compare), navigate to the two projects there and perform a comparison. 7.1 General Client - Project structure Each of the client sample projects follows a general structure, which this document aims to explain. This structure includes the nesting of the function blocks in the Solution Explorer and the structure of the state machine in the client function block, which establishes the connection to the server and implements the data exchange. The basic structure of the Twin CAT IEC 61850 sample projects is based on the PLC project structure automatically generated by the Twin CAT Telecontrol Configurator. The Twin CAT Telecontrol Configurator in turn uses the "Twin CAT XAE Project (XML format)" as a template when generating the solution. The data models communicated in the samples reflect different IEC 61850 servers. They differ from sample to sample and are enclosed with the source code as icd files. The ICD files can also be used by third-party software for the simulation of a server. First of all, a brief examination of the structure of a Twin CAT IEC 61850 PLC client project: The generated solution name (unless specified otherwise) corresponds to the Twin CAT Telecontrol Configurator project name. The automatically generated Twin CAT PLC project name (unless specified otherwise) on the other hand has the following structure: "[Project name]_[IEDName]_Client". As standard, every sample project has a "DUTs", a "GVLs" and a "POUs" folder. A Global Variable List (GVL) with the name "Tc Telecontrol" is stored in the "GVLs" folder. The following function blocks are instantiated and initialized in this Global Variable List (see source code below): TF6510 Version: 1.7.1 623
## Page 624

Examples • A Client function block instance of the type: FB_[IEDName]Client (connection management and data exchange). • An IED data model function block instance of the type: FB_IED_[IEDName]. • Optional (depending on the GOOSE Subscriber configuration): one or more function block instances of the type: "FB_[IEDName]Gse" for GOOSE communication and GSE management. In addition, the code version used during code generation and the version of the Twin CAT Telecontrol Configurator used are also stored there. Namespace: Tc Telecontrol Type: Global Variable List (GVL) VAR_GLOBAL ip Creator : I_Acsi Code Creator Class := GVL_Acsi Vars. Creator. Set Code Rev(code Rev:=2). Set Gui Ver(major:=1, minor:=0, build:=93, revision:=10); fb[IEDName] : FB_IED_[IEDName]; fb[IEDName]Client : FB_[IEDName]Client := (fb Connection:=(ip IED:=fb[IEDName],settings:=(s Remote H ost:='127.0.0.1'))); fb[IEDName]Gse : FB_[IEDName]Gse := (fb Adapter:=(ip IED:=fb[IEDName], settings:=(s Multicast Add r:='01-0C-CD-01-00-00', e Dispatch Mode:=E_Gse Dispatch Mode. Non Promiscuous))); END_VAR In the "POUs" folder there is a further folder: "[IEDName]", which contains the entire hierarchical structure of the IED data model as function blocks. This folder also contains the IED function block that is instanced in the global variable list and has already been mentioned. The Client function block: "FB_[IEDName]Client", which implements the establishment of the connection and the data exchange with an IEC 61850 Server, is located on the same level. The Twin CAT PLC project contains a "MAIN" program as standard. This is called cyclically by a Twin CAT task and in turn calls the program "P_IEC61850MAIN". The program "P_IEC61850MAIN" encapsulates the call of the client function block and of the optional GSE function block, separates the IEC 61850 communication from the remainder of the PLC machine program and helps, for example, with the implementation of further clients. PROGRAM MAIN VAR END_VAR P_IEC61850MAIN(); PROGRAM P_IEC61850MAIN VAR END_VAR fb[IEDName]Client(); fb[IEDName]Gse(); In the FB_[IEDName]Client function block, there is a state machine, the basic states of which are used in every client sample. These states are graphically illustrated in the following diagram: 624 Version: 1.7.1 TF6510
## Page 625

Examples State 0 (Init state): the state machine is in this state as soon as the PLC program has been started. Commands for the management of the client/server connection are handled here (and in State 1). This is mainly controlled via four Boolean variables. When set, these variables then activate the corresponding commands (in this case these are once-only method calls at the client function block). • _b Abort: calls the method "Abort Req", which activates the command to abort the client connection to the server. • _b Connect: calls the method "Associate Req", which activates the command to establish a new client connection to the server. • _b Disconnect: calls the method "Release Req", which activates the command for the controlled release of an existing client connection to the server. • _b Reconnect: also calls the method "Associate Req" if the Client connection to the Server has been aborted/disconnected, but is to be restored automatically. The methods listed above, which are called once only in this state, require longer than one PLC cycle for their execution. For this reason the state machine switches to a wait state (State 1), in which the termination of the activated command is awaited. If the client connection to the server has already been established beforehand, the state machine will switch to the data transmission state (State 10). State 1 (Wait State): in this state, the client waits until the command processing for the management of the client/server connection is no longer busy. As long as the connection is established, terminated or aborted, the state machine is in state 1. As soon as the command has been successfully processed, the state machine is returned to state 0 (Init state). State 10 (Data exchange): if the state machine is in this state, then the client connection to the server has already been successfully established. The client is ready for the data transmission to the server. During the data transmission, commands are activated for the transmission or reception of the data. In this state the sample projects differ from one another. Different methods or auxiliary function blocks are called here, depending on the desired functionality or logic in the application. In addition, the client function block can be extended by further states. All method calls that activate commands for data transmission require several PLC cycles for successful execution, therefore the state machine must be set to State 11 (Wait state) after calling such a method. TF6510 Version: 1.7.1 625
## Page 626

Examples In the case of an active connection and no data transmission, the state machine switches between States 0 and 10. The state machine is reset to State 0 in order to react to changes in the client-server connection status and to handle them in State 0. State 11 (Wait state): this state is a further wait state. As soon as a data transmission command (activated in State 10) has been executed, the state machine is set to State 11 and waits until the command execution is no longer busy. The state machine then switches to State 0. State 100 (Error state): as soon as an error occurs during the activation or processing of a command, the state machine is set to State 100. The error is logged here and the state machine reset to State 0. FUNCTION_BLOCK FB_[IEDName]Client VAR_INPUT fb Connection : FB_iec61850Client Class; END_VAR VAR _b Abort : BOOL; _b Disconnect : BOOL; _b Connect : BOOL; _b Reconnect : BOOL := TRUE; _b Read All Data : BOOL := TRUE; state : BYTE; e State : E_Async Environment State; b Busy : BOOL; b Success : BOOL; ip Result : I_Async Service Result Class; s Last Error Result : T_Max String; fb Abort Reason : FB_Service Error Class := (st Error:=SUCCESS_EVENT); s Last Abort Reason : T_Max String; n Invoke ID : UDINT; e Service Error : E_Acsi Service Error; n Service Error : UDINT; n Cmd Error : UDINT; s Obj Reference : T_Acsi Object Reference; s Ctrl Reference : T_Acsi Object Reference; b Get Server Directory : BOOL := TRUE; b Get Logical Device Directory: BOOL := TRUE; b Get Logical Node Directory : BOOL := TRUE; b Get All Server Values : BOOL := TRUE; b Get All Server Values : BOOL := TRUE; b Get All Data Values_LLN0_ST : BOOL := TRUE; b Get Data Values_LLN0_ST_Beh: BOOL := TRUE; END_VAR fb Connection. Execute(); e State:= fb Connection.e State; CASE state OF 0: IF _b Abort THEN _b Abort:= FALSE; b Success:= fb Connection. Abort Req(ip Reason:=fb Abort Reason, ip Sink:=0, ip Result=>ip Result) ; state:= SEL(b Success, 100, 1); ELSIF e State = E_Async Environment State. Idle AND (_b Connect OR _b Reconnect) THEN _b Connect:= FALSE; b Get All Server Values:= SEL(_b Read All Data, b Get All Server Values, TRUE); b Success:= fb Connection. Associate Req(ip Sink:=0, ip Result=>ip Result); state:= SEL(b Success, 100, 1); ELSIF e State = E_Async Environment State. Established AND _b Disconnect THEN _b Disconnect:= FALSE; b Success:= fb Connection. Release Req(ip Sink:=0, ip Result=>ip Result); state:= SEL(b Success, 100, 1); ELSIF e State = E_Async Environment State. Established THEN state:= 10; END_IF _b Connect:= FALSE; _b Disconnect:= FALSE; 1: IF ip Result <> 0 THEN ip Result. Execute(); IF NOT (b Busy:=ip Result. Is Busy()) THEN state:= SEL(ip Result. Is Completed(), 100, 0); END_IF END_IF 10: IF b Get Server Directory THEN b Get Server Directory:= FALSE; 626 Version: 1.7.1 TF6510
## Page 627

Examples b Success:= fb Connection. Get Server Directory Req(ip Server:=fb[IEDName], e Class:=E_Acsi Serve r Directory Class. Logical Device, h User:=0, ip Sink:=0, n Invoke ID=>n Invoke ID, ip Result=>ip Result); state:= SEL(b Success, 100, 11); ELSIF b Get Logical Device Directory THEN b Get Logical Device Directory:= FALSE; b Success:= fb Connection. Get Logical Device Directory Req(ip Logical Device:=fb[IEDName]. IEDLD1 , h User:=0, ip Sink:=0, n Invoke ID=>n Invoke ID, ip Result=>ip Result); state:= SEL(b Success, 100, 11); ELSIF b Get Logical Node Directory THEN b Get Logical Node Directory:= FALSE; b Success:= fb Connection. Get Logical Node Directory Req(ip Logical Node:=fb[IEDName]. IEDLD1. LLN 0, e Class:=E_Acsi Logical Node Class. Data Set, h User:=0, ip Sink:=0, n Invoke ID=>n Invoke ID, ip Result=>ip Re sult); state:= SEL(b Success, 100, 11); ELSIF b Get All Server Values THEN b Get All Server Values:= FALSE; b Success:= fb Connection. Get All Server Values Req(ip Server:=fb[IEDName], h User:=0, ip Sink:=0 , n Invoke ID=>n Invoke ID, ip Result=>ip Result); state:= SEL(b Success, 100, 11); ELSIF b Get All Data Values_LLN0_ST THEN b Get All Data Values_LLN0_ST:= FALSE; b Success:= fb Connection. Get All Data Values Req(ip Logical Node:=fb[IEDName]. IEDLD1. LLN0, e Fc: =E_Acsi Fc. ST_, h User:=0, ip Sink:=0, n Invoke ID=>n Invoke ID, ip Result=>ip Result); state:= SEL(b Success, 100, 11); ELSIF b Get Data Values_LLN0_ST_Beh THEN b Get Data Values_LLN0_ST_Beh:= FALSE; b Success:= fb Connection. Get Data Values Req(ip Data:=fb[IEDName]. IEDLD1. LLN0. Beh, e Fc:=E_Acs i Fc. ST_, h User:=0, ip Sink:=0, n Invoke ID=>n Invoke ID, ip Result=>ip Result); state:= SEL(b Success, 100, 11); ELSE state:= 0; END_IF 11: IF ip Result <> 0 THEN ip Result. Execute(); IF NOT (b Busy:=ip Result. Is Busy()) THEN state:= SEL(ip Result. Is Completed(), 100, 0); END_IF END_IF 100: state:= 0; IF ip Result <> 0 THEN n Cmd Error:= n Cmd Error + 1; s Last Error Result:= ip Result. Dump(); END_IF END_CASE GOOSE Subscriber (optional) Twin CAT Telecontrol Configurator can also generate the PLC code for a GOOSE subscriber in a client project during PLC code generation (see code sample below). This requires that the user has previously created the GOOSE components such as Go CBs (goose control blocks) in the Twin CAT Telecontrol Configurator or imported them from an SCL file (e.g. ICD file). By default, a function block with the name: "FB_[IEDName]Gse" is instantiated during code generation and added to the Global Variable List "Tc Telecontrol". This function block establishes the connection between a network adapter of the Twin CAT control computer, the IED data model and the GOOSE configuration in the Go CBs. The Go CBs are instantiated in the IED data model (usually in LLN0). Each Go CB has a function block subelement with the name: "Subscriber". The subscription can be enabled or disabled from the PLC code via the "Subscriber" method calls. By default, the subscription is enabled for all Go CBs when the PLC program is started. This is controlled by the "b Subscriber" variable initialized with "TRUE". A rising edge at the "b Unsubscribe" variable can be used to disable the subscription for all Go CBs. Subscriber commands issued through these methods are executed immediately, without wait cycles or further states required to complete command processing. The "Subscriber" described here reads the configuration and updates the status of the Go CB (attribute "Go Ena" is set to "TRUE" or "FALSE", for example), but it does not use the client-server services such as "Set Go CBValues" or "Get Go CBValues" to enable or disable the "Publisher" on the server side. This means that the generated code already implements a subscriber that can be enabled or disabled, for example, in the first PLC cycle or from the PLC code at any time. The required Go CB configuration settings (Go CB attribute values) can be made via initialization values. However, the Go CBs can already be configured in the Twin CAT Telecontrol Configurator. The initialization values are automatically generated and assigned during code generation. If the Subscriber has been activated and the configuration of the Go CB and the network TF6510 Version: 1.7.1 627
## Page 628

Examples adapter matches the receiving GOOSE frame, then the GOOSE data is copied (mapped) into the Twin CAT IED data model. The "Execute" method must be called cyclically the rest of the time. Among other things, it is responsible for updating the status information in the Go CB. FUNCTION_BLOCK FB_[IEDName]Gse IMPLEMENTS I_Gse Link Status Event Sink VAR_INPUT fb Adapter : FB_Gse Adapter Class := (ip Link Status:=THIS^); END_VAR VAR e Link Status : E_Gse Link Status; b Success : BOOL; ip Error : I_Service Error Class; b Subscribe : BOOL := TRUE; b Unsubscribe : BOOL; END_VAR b Success:= fb Adapter. Execute(ip Error=>ip Error); IF b Subscribe THEN b Subscribe:= FALSE; b Success:= fb[IEDName]. IEDLD1. LLN0.gocb01. Subscriber. Enable(ip Adapter:=fb Adapter, ip Error=>ip Err or); b Success:= fb[IEDName]. IEDLD1. LLN0.gocb02. Subscriber. Enable(ip Adapter:=fb Adapter, ip Error=>ip Err or); b Success:= fb[IEDName]. IEDLD1. LLN0.gocb03. Subscriber. Enable(ip Adapter:=fb Adapter, ip Error=>ip Err or); ELSIF b Unsubscribe THEN b Unsubscribe:= FALSE; b Success:= fb[IEDName]. IEDLD1. LLN0.gocb01. Subscriber. Disable(ip Error=>ip Error); b Success:= fb[IEDName]. IEDLD1. LLN0.gocb02. Subscriber. Disable(ip Error=>ip Error); b Success:= fb[IEDName]. IEDLD1. LLN0.gocb03. Subscriber. Disable(ip Error=>ip Error); ELSE b Success:= fb[IEDName]. IEDLD1. LLN0.gocb01. Subscriber. Execute(ip Error=>ip Error); b Success:= fb[IEDName]. IEDLD1. LLN0.gocb02. Subscriber. Execute(ip Error=>ip Error); b Success:= fb[IEDName]. IEDLD1. LLN0.gocb03. Subscriber. Execute(ip Error=>ip Error); END_IF In the project tree under the I/O-Device branch you will find a network adapter instance named "GSE (RT Ethernet adapter)". This adapter instance must be configured accordingly, i.e. the I/O configuration must be adapted to the existing hardware and to the target platform on which the project is to run. A new I/O configuration is also necessary if you change the target platform. This configuration must be done manually in Twin CAT XAE. In addition to the I/O configuration of the network adapter, a link must be established between the network adapter and the PLC function blocks for Goose communication. The link can be used to forward the data received from the network adapter to the instance of the function block: "FB_[IEDName]Gse". In the opposite direction the instance of the function block "FB_[IEDName]Gse" can forward the data to be sent to the network adapter. Here you can find more information: RT Ethernet adapter Configuration [} 38]. 7.2 Client - Base Sample Project This example shows the fundamental Twin CAT implementation of the communication of a Twin CAT IEC 61850 Client and the use of some methods to read data from a Server. The GOOSE components and reporting are not included in this example in the interests of simplicity. These and other functionalities are covered in separate examples. The Client implemented here attempts to establish a connection to the Server with the host address: "127.0.0.1" and port number: 102 after the PLC program start. These values can be adapted in the PLC sample code. The PLC development environment will output a warning with a note about this when translating. Double-clicking on this message will take you to the corresponding location in the PLC code. Download Twin CAT XAE Project (*.zip): https://infosys.beckhoff.com/content/1033/TF6510_TC3_IEC61850/ Resources/5494779659.zip The example described here uses the state machine that is described in the "General Client project structure [} 623]" chapter. The States 0, 1, 11 and 100 are identical to the state machine described there. Other states were modified for the example or new states were also added. In State 10, several IF instructions are listed that activate commands (method calls) of the Client block. The command is activated and the corresponding Client method called via a rising edge at one of the Boolean variables in the IF statement. For test purposes, the user can set the values of the Boolean variables to "TRUE" in the online view and in this way initiate the command processing. 628 Version: 1.7.1 TF6510
## Page 629

Examples Following the successful processing of a command, the state machine is set to State 0. If several of the Boolean variables have been set to "TRUE", the uppermost IF statement will be processed first with the respective command. The more frequent and complex the commands sent to the Server, the longer the Client will take to process them. Some of the Boolean variables are listed in the following table. In addition, they contain the method names and a description of the function. Commands in Sample01 Variable name Method name Description b Get Server Directory Get Server Directory Req Returns a list of all the Logical Devices of an IED (Intelligent Electronic Device). b Get Logical Device Directory Get Logical Device Directory Req Returns a list of all Logical Nodes within a Logical Device. b Get Logical Node Directory Get Logical Node Directory Req Returns a list of all instances of a certain Logical Node Class. In our example, it is the class: "E_Acsi Logical Node Class. Data Set ". b Get All Server Values Get All Server Values Req Reads all data values of the specified IED. b Get All Data Values_LLN0_ST Get All Data Values Req Reads all data values of a specified Logical Node and of the specified Functional Constraint. b Get Data Values_LLN0_ST_Beh Get Data Values Req Reads all data values of a specified Data Object and of the specified Functional Constraint. The naming of the Boolean variables is only an example and can be adapted as desired. It is only intended to show which values can be read by connecting the variables. 7.3 Client - Read Data (Get All Data Values, Get Data Values) This sample shows how to use the "Get All Data Values Req" and "Get Data Values Req" methods of the client function block. Download Twin CAT XAE Project (*.zip): https://infosys.beckhoff.com/content/1033/TF6510_TC3_IEC61850/ Resources/5494782347.zip The example described here uses the state machine that is described in the "General Client project structure [} 623]" chapter. The States 0, 1, 11 and 100 are identical to the state machine described there. Other states were modified for the example or new states were also added. In State 10, several IF instructions are listed that activate commands (method calls) of the Client block. The command is activated and the corresponding Client method called via a rising edge at one of the Boolean variables in the IF statement. For test purposes, the user can set the values of the Boolean variables to "TRUE" in the online view and in this way initiate the command processing. Following the successful processing of a command, the state machine is set to State 0. If several of the Boolean variables have been set to "TRUE", the uppermost IF statement will be processed first with the respective command. The more frequent and complex the commands sent to the Server, the longer the Client will take to process them. Some of the Boolean variables are listed in the following table. In addition, they contain the method names and a description of the function. TF6510 Version: 1.7.1 629
## Page 630

Examples Commands in Sample02 Variable name Method name Description b Get All Data Values_LLN0 Get All Data Values Req As soon as this Boolean variable is set to "TRUE", all data values of all similar variables (commands): sub-elements of the Logical Node: b Get All Data Values_LPHD1 „LLN0“ and every functional group are b Get All Data Values_MMXU1 read. To enable this, the method call b Get All Data Values_XCBR1 uses an interface pointer to the Logical Node to be read: "LLN0" as a parameter and the specification of the functional group: "E_Acsi Fc. XX." b Get All Data Values_LLN0_ST Get All Data Values Req As soon as this Boolean variable is set to "TRUE", all data values of all similar variables (commands): sub-elements of the Logical Node: b Get All Data Values_LLN0_CF „LLN0“ and of the "ST" functional b Get All Data Values_LLN0_DC group are read. To enable this, the b Get All Data Values_LLN0_EX method call uses an interface pointer b Get All Data Values_LPHD1_ST to the Logical Node to be read: b Get All Data Values_LPHD1_DC "LLN0" as a parameter and the b Get All Data Values_MMXU1_MX specification of the functional group: b Get All Data Values_MMXU1_ST "E_Acsi Fc. ST_". b Get All Data Values_XCBR1_ST b Get All Data Values_XCBR1_CO b Get All Data Values_XCBR1_CF b Get Data Values_LLN0_ST_Beh Get Data Values Req As soon as this Boolean variable is set to "TRUE", all data values of all similar variables (commands): sub-elements of the data object: b Get Data Values_LLN0_ST_Health "Beh" of the Logical Node: „LLN0“ b Get Data Values_LLN0_ST_Mod and of the "ST" functional group are b Get Data Values_LLN0_CF_Mod read. To enable this, the method call b Get Data Values_LLN0_DC_Nam Plt uses an interface pointer to the data b Get Data Values_LLN0_EX_Nam Plt object to be read: "LLN0. Beh" as a b Get Data Values_LPHD1_ST_Phy Health parameter and the specification of the b Get Data Values_LPHD1_ST_Proxy functional group: "E_Acsi Fc. ST_". b Get Data Values_LPHD1_DC_Phy Nam b Get Data Values_MMXU1_MX_Ph V b Get Data Values_MMXU1_ST_Beh b Get Data Values_XCBR1_ST_Beh b Get Data Values_LLN0_ST_Beh_st Val Get Data Values Req As soon as this Boolean variable is set to "TRUE", the value of the data similar variables (commands): attribute is read: "st Val" of the data b Get Data Values_LLN0_ST_Beh_q object: "Beh", of the Logical Node: b Get Data Values_LLN0_ST_Beh_t "LLN0", and of the functional group: b Get Data Values_LLN0_ST_Health_q "ST". To enable this, the method call b Get Data Values_LLN0_ST_Health_t uses an interface pointer to the data b Get Data Values_LLN0_ST_Mod_q attribute to be read: "LLN0. Beh.st Val" b Get Data Values_LLN0_ST_Mod_t as a parameter and the specification b Get Data Values_LLN0_CF_Mod_ctl Model of the functional group: b Get Data Values_LLN0_DC_Nam Plt_vendo "E_Acsi Fc. ST_". r b Get Data Values_LLN0_DC_Nam Plt_sw Re v The naming of the Boolean variables is only an example and can be adapted as desired. It is only intended to show which values can be read by connecting the variables. 7.4 Client - Write Data (Set All Data Values, Set Data Values) This sample shows the use of the "Set All Data Values Req" and "Set Data Values Req" methods of the client function block. 630 Version: 1.7.1 TF6510
## Page 631

Examples Download Twin CAT XAE Project (*.zip): https://infosys.beckhoff.com/content/1033/TF6510_TC3_IEC61850/ Resources/8922555275.zip The example described here uses the state machine that is described in the "General Client project structure [} 623]" chapter. The States 0, 1, 11 and 100 are identical to the state machine described there. Other states were modified for the example or new states were also added. Sample project In the FB_IEDClient function block and State 10, several IF instructions are listed that activate commands (method calls) of the client function block. Each command in the IF statement is activated by a rising edge at one of the Boolean variables. The Boolean variables are defined in the declaration part of the "FB_IEDClient" function block. For test purposes, the user can set the values of the Boolean variables to "TRUE" in the online view and in this way activate the command execution. After that, the system switches to state 11, where the method "ip Result. Execute()" is called in further PLC cycles until the command processing has been completed. This is the case when "ip Result. Is Busy()" returns the value "FALSE". Following the successful execution of a command, the state machine is set to State 0. If several of the Boolean variables are set to "TRUE", then the topmost IF statement is processed first with the respective command. Some of the Boolean variables are listed in the tables below. In addition, they contain the method names and a description of the function. Variable name Method name Description b Set All Data Values_LPHD1_DC Set All Data Values Req As soon as this Boolean variable is set to "TRUE", all similar variables (commands): data values of all b Set All Data Values_LLN0_DC subelements of the logical b Set All Data Values_MMXU1_DC node: "LPHD1" and the b Set All Data Values_XCBR1_DC functional group "DC" are b Set All Data Values_CSWI1_DC written. To enable this, the b Set All Data Values_LEDGGIO1_DC method call uses as b Set All Data Values_LEDGGIO2_DC parameter an interface b Set All Data Values_LEDGGIO3_DC pointer to the logical node to b Set All Data Values_LEDGGIO4_DC be written: "LPHD1" and the b Set All Data Values_LEDGGIO5_DC specification of the functional b Set All Data Values_LEDGGIO6_DC group: "E_Acsi Fc. DC". b Set All Data Values_LEDGGIO7_DC b Set All Data Values_LEDGGIO8_DC b Set Data Values_MMXU1_CF_Tot W Set Data Values Req As soon as this Boolean variable is set to "TRUE", all similar variables (commands): data values of all b Set Data Values_LEDGGIO1_CF_An Out1_sbo subelements of the data Class object: "Tot W" of the logical b Set Data Values_LEDGGIO1_CF_An Out1_ctl M node "MMXU1" and the odel functional group: "CF" are b Set Data Values_LEDGGIO1_CF_An Out1_unit written. To enable this, the s method call uses as b Set Data Values_LEDGGIO1_CF_An Out1_unit parameter an interface s_SIUnit pointer to the data object to b Set Data Values_LEDGGIO1_CF_An Out1_unit be written: "MMXU1. Tot W" s_multiplier and the specification of the functional group: "E_Acsi Fc. CF". The naming of the Boolean variables is only an example and can be adapted as desired. It is only intended to show which values can be written by connecting the variables. 7.5 Client - Report Control Blocks (Unbuffered, Buffered) This sample shows how to use the report control block instances for buffered and unbuffered reports (Unbuffered/Buffered Report Control Blocks: URCB, BRCB). This includes activating and deactivating reports or activating the general interrogation (GI). TF6510 Version: 1.7.1 631
## Page 632

Examples Download Twin CAT XAE Project (*.zip): https://infosys.beckhoff.com/content/1033/TF6510_TC3_IEC61850/ Resources/5494785035.zip The example described here uses the state machine that is described in the "General Client project structure [} 623]" chapter. The States 0, 1, 11 and 100 are identical to the state machine described there. Other states were modified for the example or new states were also added. The Report Control Blocks (RCBs) configure and control the sending of buffered or unbuffered report messages. Reports are configured and controlled via read/write accesses to the corresponding attribute values of a Report Control Block. For example, some attribute values configure the content of the information contained in the report, while other attribute values enable or disable the sending of reports. So it is theoretically possible to configure and control a RCB only with the help of the client methods: "Get Data Values Req" and "Set Data Values Req". This requires a more detailed knowledge of how the RCBs work since not every attribute may be accessed at all times. Some attribute values only allow read access, while others also allow write access. Some attribute values allow write access only when the RCB is in a certain state. The general interrogation (GI) commands may only be executed when the RCB is in the enabled state. To simplify handling, the Twin CAT IEC 61850 implementation offers even more options for configuring and controlling the RCBs. All available options (methods) are briefly described below. Basically the RCB attributes are initialized with initial values that have been preconfigured in Twin CAT Telecontrol Configurator for Trg Ops, Opt Flds, Intg Pd, Rpt ID, Dat Set etc. after downloading the PLC program (PLC not yet running or no boot project active). If the configuration originates from an ICD file, then Twin CAT Telecontrol Configurator takes the initial values from the ICD file. The client projects are designed in such a way that after starting the PLC they first establish a connection to the server and then read all server data into the client. After that, the client side has the data values that are also present on the server. If the server data differs from the initial values on the client side, then it will be overwritten with the server data. This includes the attributes of the RCBs. The reading of all values is controlled in the client projects via two Boolean variables: "b Get All Server Values" and "_b Read All Data". If "_b Read All Data" is TRUE then all server data are always read once after the connection is established or restored. Via a rising edge at "b Get All Server Values" the values can also be read in again at any time. If both Boolean variables are set to FALSE, the data will not be matched. This depends on the application. Basically, it makes sense to compare the client data with the server after the connection is established. However, the initial values configured in the Twin CAT Telecontrol Configurator are not lost. The application can still access these values through the Config properties of the data attributes. Each data attribute has a property: e Config or i Config or n Config, b Config (depending on the base type of the data attribute) etc. with the original initial value. In this sample project, among other things, initial values configured in the Twin CAT Telecontrol Configurator are also used when configuring and enabling the RCBs. The RCB instances used in this sample attach to the Logical Node instance: LLN0. The configuration values exported by the Twin CAT Telecontrol Configurator for report trigger options (Trg Ops) or optional report data fields (Opt Flds) are also located there, for example. FUNCTION_BLOCK FB_LN_IED_LD1_LLN0 EXTENDS FB_Acsi Common Logical Node Class VAR_INPUT Nam Plt: FB_DO_IED_LD1_LLN0_Nam Plt := (s Class:='LPL', b Link Result:=THIS^. Add Data To Container(ip Dat a:=Nam Plt)); Beh: FB_DO_IED_LD1_LLN0_Beh := (s Class:='ENS', b Link Result:=THIS^. Add Data To Container(ip Data:=Beh )); Health: FB_DO_IED_LD1_LLN0_Health := (s Class:='ENS', b Link Result:=THIS^. Add Data To Container(ip Dat a:=Health)); Mod_: FB_DO_IED_LD1_LLN0_Mod := (s Object Name:='Mod', s Class:='ENC', b Link Result:=THIS^. Add Data To Container(ip Data:=Mod_)); DS1: FB_DS_IED_LD1_LLN0_DS1 := (b Link Result:=THIS^. Add Data Set To Container(ip Data Set:=DS1)); DS2: FB_DS_IED_LD1_LLN0_DS2 := (b Link Result:=THIS^. Add Data Set To Container(ip Data Set:=DS2)); DS3: FB_DS_IED_LD1_LLN0_DS3 := (b Link Result:=THIS^. Add Data Set To Container(ip Data Set:=DS3)); urcb101: FB_Scsm Ur CBImpl Class := (Rpt ID:=(s Value:='IEDLD1/LLN0.urcb101'), Dat Set:=(s Value:='IEDLD1/LLN0. DS1'), Conf Rev:=(n Value:=1), Opt Flds:=(Sequence Number:=TRUE, Report Time Stamp:=TRUE, Reason For Inclusion:=TRUE, Data Set Name:=TRUE, Data Reference:=TRUE, Buffer Overflow:=FALSE, Entry ID:=FALSE, Conf Revision:=TRUE), Trg Ops:=(Data Change:=TRUE, Quality Change:=TRUE, Data Update:=FALS E, Integrity:=TRUE, General Interrogation:=TRUE), Intg Pd:=(n Value:=2000), b Link Result:=THIS^. Add Unbuffered Report Control Block To Container(ip Unbuffered Report Control Block:=urcb101)); urcb201: FB_Scsm Ur CBImpl Class := (Rpt ID:=(s Value:='IEDLD1/LLN0.urcb201'), Dat Set:=(s Value:='IEDLD1/LLN0. DS2'), 632 Version: 1.7.1 TF6510
## Page 633

Examples Conf Rev:=(n Value:=1), Opt Flds:=(Sequence Number:=TRUE, Report Time Stamp:=TRUE, Reason For Inclusion:=TRUE, Data Set Name:=TRUE, Data Reference:=FALSE, Buffer Overflow:=FALSE, Entry ID:=FALSE, Con f Revision:=TRUE), Trg Ops:=(Data Change:=TRUE, Quality Change:=TRUE, Data Update:=TRUE , Integrity:=TRUE, General Interrogation:=TRUE), Intg Pd:=(n Value:=5000), b Link Result:=THIS^. Add Unbuffered Report Control Block To Container(ip Unbuffered Report Control Block:=urcb201)); urcb301: FB_Scsm Ur CBImpl Class := (Rpt ID:=(s Value:='IEDLD1/LLN0.urcb301'), Dat Set:=(s Value:='IEDLD1/LLN0. DS3'), Conf Rev:=(n Value:=1), Opt Flds:=(Sequence Number:=TRUE, Report Time Stamp:=TRUE, Reason For Inclusion:=TRUE, Data Set Name:=TRUE, Data Reference:=FALSE, Buffer Overflow:=FALS E, Entry ID:=FALSE, Conf Revision:=TRUE), Trg Ops:=(Data Change:=TRUE, Quality Change:=TRUE, Data Update:=TRUE , Integrity:=TRUE, General Interrogation:=TRUE), Intg Pd:=(n Value:=5000), b Link Result:=THIS^. Add Unbuffered Report Control Block To Container(ip Unbuffered Report Control Block:=urcb301)); brcb101: FB_Scsm Br CBImpl Class := (Rpt ID:=(s Value:='IEDLD1/LLN0.brcb101'), Dat Set:=(s Value:='IEDLD1/LLN0. DS1'), Conf Rev:=(n Value:=1), Opt Flds:=(Sequence Number:=TRUE, Report Time Stamp:=TRUE, Reason For Inclusion:=TRUE, Data Set Name:=TRUE, Data Reference:=TRUE, Buffer Overflow:=TRUE, Entry ID:=TRUE, Conf Re vision:=TRUE), Trg Ops:=(Data Change:=TRUE, Quality Change:=TRUE, Data Update:=FALS E, Integrity:=TRUE, General Interrogation:=TRUE), Intg Pd:=(n Value:=2000), b Link Result:=THIS^. Add Buffered Report Control Block To Container(ip Bu ffered Report Control Block:=brcb101)); brcb201: FB_Scsm Br CBImpl Class := (Rpt ID:=(s Value:='IEDLD1/LLN0.brcb201'), Dat Set:=(s Value:='IEDLD1/LLN0. DS2'), Conf Rev:=(n Value:=1), Opt Flds:=(Sequence Number:=TRUE, Report Time Stamp:=TRUE, Reason For Inclusion:=TRUE, Data Set Name:=TRUE, Data Reference:=FALSE, Buffer Overflow:=TRUE , Entry ID:=TRUE, Conf Revision:=TRUE), Trg Ops:=(Data Change:=TRUE, Quality Change:=TRUE, Data Update:=TRUE , Integrity:=TRUE, General Interrogation:=TRUE), Intg Pd:=(n Value:=5000), b Link Result:=THIS^. Add Buffered Report Control Block To Container(ip Bu ffered Report Control Block:=brcb201)); brcb301: FB_Scsm Br CBImpl Class := (Rpt ID:=(s Value:='IEDLD1/LLN0.brcb301'), Dat Set:=(s Value:='IEDLD1/LLN0. DS3'), Conf Rev:=(n Value:=1), Opt Flds:=(Sequence Number:=TRUE, Report Time Stamp:=TRUE, Reason For Inclusion:=TRUE, Data Set Name:=TRUE, Data Reference:=FALSE, Buffer Overflow:=TRUE, Entry ID:=TRUE, Conf R evision:=TRUE), Trg Ops:=(Data Change:=TRUE, Quality Change:=TRUE, Data Update:=TRUE , Integrity:=TRUE, General Interrogation:=TRUE), Intg Pd:=(n Value:=5000), b Link Result:=THIS^. Add Buffered Report Control Block To Container(ip Bu ffered Report Control Block:=brcb301)); END_VAR VAR END_VAR Report configuration/control with the methods: Get Data Values Req, Set Data Values Req These are the basic methods to configure and control the RCBs. They provide full control over the behavior of the RCB, but require more detailed knowledge of how RCBs work and more programming effort. You may need to implement a more complex state machine yourself in which you perform multiple read/write accesses to various RCB attribute values using these methods. Use these methods, for example, when you need a behavior that does not conform to the default. In this sample, the use of these methods to configure and control the RCBs will not be discussed further. However, the following steps are necessary, for example, to activate the sending of reports of an unbuffered RCB: • Read current configuration and status information of the RCB. The values of all attributes: "Rpt Ena", "Resv", "Opt Flds", "Dat Set", "Trg Ops", ..., etc. are read with the method: "Get Data Values Req". • Write new configuration values if necessary. New values are written into the attributes "Opt Flds", "Dat Set" or "Trg Ops", ... etc. with the method: "Set Data Values Req". • Write the value: "TRUE" into the attribute: "Resv". The RCB is reserved for use with the client. • Write the value: "TRUE" into the attribute: "Rpt Ena". The sending of the reports is then enabled. The following steps are necessary, for example, to disable the sending of reports of an unbuffered RCB: • Write the value "FALSE" into the attribute "Rpt Ena". The sending of reports is disabled. TF6510 Version: 1.7.1 633
## Page 634

Examples • Write the value "FALSE" into the attribute "Resv". The reservation for using the RCB with the client is removed. Report configuration/control with the methods: Get Ur CBValues Req, Set Ur CBValues Req, Get Br CBValues Req, Set Br CBValues Req These methods allow reading all or writing one or more attribute values with a single method call. The methods: "Get Ur CBValues Req" or "Get Br CBValues Req" read all attribute values of a RCB. In this case, if successful, all attribute values of an RCB are transferred from the server to the client and copied to the Twin CAT IEC 61850 data model. The methods: "Set Ur CBValues Req" and "Set Br CBValues Req" allow writing one or more attribute values of a RCB. When enabling/disabling the reports, the order in which the attribute values are written plays an important role. Most RCB configuration values can only be written when reports are not active. For unbuffered reports, for example, the attribute value "Resv" must first be set to "TRUE" before the attribute value "Rpt Ena" can be set to "TRUE" (to enable the reports). When disabling the reports, these attribute values must be set to "FALSE" in the reverse order. I.e. first "Rpt Ena" and then "Resv". The Set method parameter "st Set" determines which attribute values are to be written. The new values to be written are first written into the data model, then the corresponding attributes are selected via the "st Set" parameter and the Set method is called. On success, the data is transferred from the IEC 61850 client data model to the server. Report configuration/control using the methods of the RCB client object The easiest way to configure and control the buffered or unbuffered reports is to use the client function block below the report control block instance. The client function block has properties to configure the RCB and methods to enable or disable the transmission of reports. For example, in the image below, the Intelli Sense shows the available methods and properties with a buffered RCB: Some methods and properties in unbuffered RCB: The following table lists the main methods and properties of the client function block at the report control block instance. The client function block works with predefined default values for trigger options, optional data fields and max. time between Integrity Reports unless configured otherwise. The default values can be changed individually for each client instance by writing to the appropriate properties. The new values are first transferred to the server before enabling the report, if they are different from those of the server side, and only then the report is enabled. 634 Version: 1.7.1 TF6510
## Page 635

Examples Method/property Description Initial value Enable Req Enables the sending of the reports - Disable Req Disables (stops) the sending of the reports - GIReq Enabless the general interrogation - command Purge Buf Req (only Enables the command to reset the buffer - for buffered RCBs) Resync Req (only for Enables the command for - buffered RCBs) resynchronization of the buffered data Clear Resets the function block - c Opt Flds Configures the data fields contained in the Unbuffered RCBs: all data fields enabled report except the "Data Reference", "Buffer Overflow" and "Entry ID". Buffered RCBs: all data fields enabled except the "Data Reference" c Trg Ops Configures the trigger options for a report All enabled ("Data Update", "Data Change", "Quality Change", "General Interrogation", "Integrity") i Resv Tms OPTIONAL: configures the time for 60 if present reserving the RCB for a specific client. n Buf Tm Max. report buffer time in milliseconds 0 n Intg Pd Max. time between integrity reports in 5000 milliseconds s Rpt ID Report ID Empty string. A new value, if set, will be transmitted to the server only if it is not an empty string and if it is different from the current server value. When a method is enabled, the current status of the RCB is first queried internally by the server. Next, depending on the selected method, some properties are then transferred to the server. The set values of the properties are transferred to the server only if the value in the property differs from the respective value of the corresponding attribute in the data model. Finally, the status information is queried again internally from the server. Some methods require additional parameters. For example, the "Enable Req" method requires the interface pointer to the connection instance and the Data Set. The client function block has a structured output variable with the name: "st Info". This variable contains RCB status information and information about the last report received. However, this status information is only updated if the client function block was also used to configure and enable the reports. The client function block does not update its status information when the other methods described above (Set Ur CBValues Req, Set Br CBValues Req or Set Data Values Req, etc.) are used to configure or enable the reports. TF6510 Version: 1.7.1 635
## Page 636

Examples In online mode, the status information of the client function block can be used for simple diagnostics. Parameter list for configuring the default values of the RCB client object The default values of all client instances can be changed system-wide, if necessary, by changing the parameter list: Param_Scsm (in the Tc3_iec61850_8_1 PLC library). VAR_GLOBAL CONSTANT c Br CB_Opt Flds : ST_Acsi Optional Fields:=(Sequence Number:=1, Report Time Stamp:=1, Reason For Inclusi on:=1, Data Set Name:=1, Data Reference:=0, Buffer Overflow:=1, Entry ID:=1, Conf Revision:=1, Segmentatio n:=0); c Br CB_Trg Ops : ST_Acsi Trigger Conditions:=(Data Change:=1, Quality Change:=1, Data Update:=1, Inte grity:=1, General Interrogation:=1); c Br CB_Intg Pd : DWORD:=5000; c Ur CB_Opt Flds : ST_Acsi Optional Fields:=(Sequence Number:=1, Report Time Stamp:=1, Reason For Inclusi on:=1, Data Set Name:=1, Data Reference:=0, Buffer Overflow:=0, Entry ID:=0, Conf Revision:=1, Segmentatio n:=0); c Ur CB_Trg Ops : ST_Acsi Trigger Conditions:=(Data Change:=1, Quality Change:=1, Data Update:=1, Inte grity:=1, General Interrogation:=1); c Ur CB_Intg Pd : DWORD:=5000; c Br CB_i Resv Tms : INT(-1..3600):=60; END_VAR Sample project The unbuffered "urcb101" and the buffered RCB "brcb101" can be controlled in two ways in the sample project. Once with the help of the methods: "Get Ur CBValues Req", "Get Br CBValues Req", "Set Ur CBValues Req" and "Set Br CBValues Req". The other option involves the methods at the client function block below the report control block instance. The Boolean and Enum variables described further below can be found in the implementation of the function block: "FB_IEDClient". There is also an ICD file in the project archive. This file describes the IEC 61850 data model used in the sample project. For example, you can use this file in a third-party software and simulate a server. Test with Get/Set methods 636 Version: 1.7.1 TF6510
## Page 637

Examples A rising edge at the Boolean variable: "b Get Ur CBValues_urcb101" or "b Get Br CBValues_brcb101" enables the reading of all attribute values of the RCB: "urcb101" or "brcb101". By changing the value at the enumeration variable "e Set Ur CBValues_urcb101_Resv" and "e Set Ur CBValues_urcb101_Rpt Ena" or "e Set Br CBValues_brcb101_Rpt Ena" the Boolean value of the data attributes "Resv" or "Rpt Ena" can be set to "True" or "False". Ideally, if all other RCB attribute values are already preconfigured and these values are already on the server side, the RCB: "urcb101" can be enabled in the following way: the value "Enable" written to the variable: "e Set Ur CBValues_urcb101_Resv" describes the attribute: "Resv" with the value "TRUE". The value "Enable" written to the variable: "e Set Ur CBValues_urcb101_Rpt Ena" describes the attribute: "Rpt Ena" with the value "TRUE". After that the transmission of the unbuffered reports of "urcb101" is enabled. The RCB: "brcb101" can be enabled in the following way: the value "Enable" written in the variable: "e Set Br CBValues_brcb101_Rpt Ena" describes the attribute: "Rpt Ena" with the value "TRUE". After that the transmission of the buffered reports of "brcb101" is enabled. … (*============================================================================================= ======================================*) (* Write "IEDLD1/LLN0.urcb101. Resv" data attribute value: True|False *) ELSIF e Set Ur CBValues_urcb101_Resv <> E_Ctl Bool. None THEN (* Example => execute Set Ur CBValues Req () command *) memset(ADR(st Set_urcb), 0, SIZEOF(st Set_urcb)); (* Clear all URCB attribute selection flags *) st Set_urcb. Resv:= TRUE; (* Select URCB->Resv attribute to be written *) fb IED. IEDLD1. LLN0.urcb101. Resv.b Value:= SEL(e Set Ur CBValues_urcb101_Resv = E_Ctl Bool. Enable, FALSE, TRUE); (* Set new data attribute value to be written *) b Success:= fb Connection. Set Ur CBValues Req(ip Ur CB:=fb IED. IEDLD1. LLN0.urcb101, st Set:=st Set_ur cb, h User:=0, ip Sink:=0, n Invoke ID=>n Invoke ID, ip Result=>ip Result); (* Activation of command executi on *) state:= SEL(b Success, 100, 11); (* If command activation succeeded then wait for command co mpletion else report an error *) e Set Ur CBValues_urcb101_Resv:= E_Ctl Bool. None; (* Reset enum value to recognize next write r equest *) (*============================================================================================= ======================================*) (* Write "IEDLD1/LLN0.urcb101. Rpt Ena" data attribute value: True|False *) ELSIF e Set Ur CBValues_urcb101_Rpt Ena <> E_Ctl Bool. None THEN (* Example => execute Set Ur CBValues R eq() command *) memset(ADR(st Set_urcb), 0, SIZEOF(st Set_urcb)); (* Clear all URCB attribute selection flags *) st Set_urcb. Rpt Ena:= TRUE; (* Select URCB->Rpt Ena attribute to be written *) fb IED. IEDLD1. LLN0.urcb101. Rpt Ena.b Value:= SEL(e Set Ur CBValues_urcb101_Rpt Ena = E_Ctl Bool. Ena ble, FALSE, TRUE); (* Set new data attribute value to be written *) b Success:= fb Connection. Set Ur CBValues Req(ip Ur CB:=fb IED. IEDLD1. LLN0.urcb101, st Set:=st Set_ur cb, h User:=0, ip Sink:=0, n Invoke ID=>n Invoke ID, ip Result=>ip Result); (* Activation of command executi on *) state:= SEL(b Success, 100, 11); (* If command activation succeeded then wait for command co mpletion else report an error *) e Set Ur CBValues_urcb101_Rpt Ena:= E_Ctl Bool. None; (* Reset enum value to recognize next write request *) … (*============================================================================================= =====================================*) (* Write "IEDLD1/LLN0.brcb101. Rpt Ena" data attribute value *) ELSIF e Set Br CBValues_brcb101_Rpt Ena <> E_Ctl Bool. None THEN (* Example => execute Set Br CBValues R eq() command *) memset(ADR(st Set_brcb), 0, SIZEOF(st Set_brcb)); (* Clear all BRCB attribute selection flags *) st Set_brcb. Rpt Ena:= TRUE; (* Select BRCB->Rpt Ena attribute to be written *) fb IED. IEDLD1. LLN0.brcb101. Rpt Ena.b Value:= SEL(e Set Br CBValues_brcb101_Rpt Ena = E_Ctl Bool. Ena ble, FALSE, TRUE); (* Set new data attribute value to be written *) b Success:= fb Connection. Set Br CBValues Req(ip Br CB:=fb IED. IEDLD1. LLN0.brcb101, st Set:=st Set_br cb, h User:=0, ip Sink:=0, n Invoke ID=>n Invoke ID, ip Result=>ip Result); (* Activation of command executi on *) state:= SEL(b Success, 100, 11); (* If command activation succeeded then wait for command co mpletion else report an error *) e Set Br CBValues_brcb101_Rpt Ena:= E_Ctl Bool. None; (* Reset enum value to recognize next write request *) … TF6510 Version: 1.7.1 637
## Page 638

Examples To stop the transmission of the unbuffered reports, first the value "Disable" must be written into the variable: "e Set Ur CBValues_urcb101_Rpt Ena" and then into the variable: "e Set Ur CBValues_urcb101_Resv". This sets the values of the data attributes "Rpt Ena" and "Resv" to FALSE. To stop the transmission of the buffered reports, the value "Disable" must be written to the variable "e Set Br CBValues_brcb101_Rpt Ena". This sets the value of the data attribute "Rpt Ena" to FALSE. Test with client methods on report control block instance To consider all states of a RCB, an enum is used here to enable "urcb101" or "brcb101" control commands. As soon as the enum "e Control_IEDLD1_LLN0_urcb101" or "e Control_IEDLD1_LLN0_brcb101" is not "E_Acsi Ctl Report. None", the corresponding command is enabled at the RCB. The "ip Result" output of the function block can be used to query the status of the processing of the last command. Since the execution of the methods takes longer than one cycle, the state machine is set to State 11. There the method "Execute" of the interface pointer "ip Result" must be called until "ip Result. Is Busy()" returns the value "FALSE". If this is currently processing the function, "Is Busy()" is returned as "TRUE" and the state machine remains in State 11. The state machine is reset to State 0 as soon as the command has been successfully executed. The instances "urcb101" and "brcb101" are enabled in this sample with the values for "Trg Ops", "Opt Flds" and "Intg Pd". These values were configured in the Twin CAT Telecontrol Configurator. … (*================================================================================================== =====================================*) (* Control unbuffered reports using "IEDLD1/LLN0.urcb101. Client" function block instance *) ELSIF e Control_IEDLD1_LLN0_urcb101 <> E_Acsi Ctl Report. None THEN IF e Control_IEDLD1_LLN0_urcb101 = E_Acsi Ctl Report. Enable THEN (* Example => enable reporting *) (* Changing default properties of "Client" function block configures reporting behaviour and content of report message data. The "Client" function block writes the new property values to the server and enables RCB. In this example we use configuration values that were defined in the Twin CAT Telecontrol Configurator to control "urcb101".*) (* Configures "Rpt ID" (report ID) to be used in report message *) fb IED. IEDLD1. LLN0.urcb101. Client.s Rpt ID:= fb IED. IEDLD1. LLN0.urcb101. Rpt ID.s Config; (* => "IEDLD1/. LLN0.urcb101" *) (* Configures "Trg Ops" (trigger options) to be used to trigger new report messages *) fb IED. IEDLD1. LLN0.urcb101. Client.c Trg Ops:= fb IED. IEDLD1. LLN0.urcb101. Trg Ops.c Config; (* => All enabled except "Data Update" *) (* Configures "Opt Flds" (optional fields) to be used in report message *) fb IED. IEDLD1. LLN0.urcb101. Client.c Opt Flds:= fb IED. IEDLD1. LLN0.urcb101. Opt Flds.c Config; (* => All enabled except "Buffer Overflow" and "Entry ID" *) (* Configures "Intg Pd" (period in milliseconds used to generate integrity report) *) fb IED. IEDLD1. LLN0.urcb101. Client.n Intg Pd:= fb IED. IEDLD1. LLN0.urcb101. Intg Pd.n Config; (* => 2000ms *) (* Configures "Buf Tm" (max. report message buffer time in milliseconds) *) fb IED. IEDLD1. LLN0.urcb101. Client.n Buf Tm:= fb IED. IEDLD1. LLN0.urcb101. Buf Tm.n Config; (* => 0ms *) (* Write properties and enable RCB *) b Success:= fb IED. IEDLD1. LLN0.urcb101. Client. Enable Req(ip Client:=fb Connection, ip Data Set:=fb I ED. IEDLD1. LLN0. DS1, ip Result=>ip Result); (* Activation of command execution *) state:= SEL(b Success, 100, 11); (* If command activation succeeded then wait for command com pletion else report an error *) ELSIF e Control_IEDLD1_LLN0_urcb101 = E_Acsi Ctl Report. Disable THEN (* Example => disable reportin g *) b Success:= fb IED. IEDLD1. LLN0.urcb101. Client. Disable Req(ip Result=>ip Result); (* Activation of command execution *) state:= SEL(b Success, 100, 11); (* If command activation succeeded then wait for command com pletion else report an error *) ELSIF e Control_IEDLD1_LLN0_urcb101 = E_Acsi Ctl Report. GI THEN (* Example => execute general inter rogation *) b Success:= fb IED. IEDLD1. LLN0.urcb101. Client. GIReq(ip Result=>ip Result); (* Activation of comm and execution *) state:= SEL(b Success, 100, 11); (* If command activation succeeded then wait for command com pletion else report an error *) END_IF e Control_IEDLD1_LLN0_urcb101:= E_Acsi Ctl Report. None; (* Reset enum value to recognize next write request *) 638 Version: 1.7.1 TF6510
## Page 639

Examples … (*================================================================================================== =====================================*) (* Control buffered reports using "IEDLD1/LLN0.brcb101. Client" function block instance *) ELSIF e Control_IEDLD1_LLN0_brcb101 <> E_Acsi Ctl Report. None THEN IF e Control_IEDLD1_LLN0_brcb101 = E_Acsi Ctl Report. Enable THEN (* Example => enable reporting usi ng *) (* Changing default properties of "Client" function block configures reporting behaviour and content of report message data. The "Client" function block writes the new property values to the server and enables RCB. In this example we use configuration values that were defined in the Twin CAT Telecontrol C onfigurator to control "brcb101". *) (* Configures "Rpt ID" to be used in report message *) fb IED. IEDLD1. LLN0.brcb101. Client.s Rpt ID:= fb IED. IEDLD1. LLN0.brcb101. Rpt ID.s Config; (* => "IEDLD1/LLN0.brcb101" *) (* Configures "Trg Ops" (trigger options) to be used to trigger new report messages *) fb IED. IEDLD1. LLN0.brcb101. Client.c Trg Ops:= fb IED. IEDLD1. LLN0.brcb101. Trg Ops.c Config; (* => All enabled except "Data Update" *) (* Configures "Opt Flds" (option fields) to be used in report message *) fb IED. IEDLD1. LLN0.brcb101. Client.c Opt Flds:= fb IED. IEDLD1. LLN0.brcb101. Opt Flds.c Config; (* => All enabled *) (* Configures "Intg Pd" (period in milliseconds used to generate integrity report) *) fb IED. IEDLD1. LLN0.brcb101. Client.n Intg Pd:= fb IED. IEDLD1. LLN0.brcb101. Intg Pd.n Config; (* => 2000ms *) (* Configures "Buf Tm" (max. report message buffer time in milliseconds) *) fb IED. IEDLD1. LLN0.brcb101. Client.n Buf Tm:= fb IED. IEDLD1. LLN0.brcb101. Buf Tm.n Config; (* => 0ms *) (* Write properties and enable RCB *) b Success:= fb IED. IEDLD1. LLN0.brcb101. Client. Enable Req(ip Client:=fb Connection, ip Data Set:=fb I ED. IEDLD1. LLN0. DS1, ip Result=>ip Result); (* Activation of command execution *) state:= SEL(b Success, 100, 11); (* If command activation succeeded then wait for command com pletion else report an error *) ELSIF e Control_IEDLD1_LLN0_brcb101 = E_Acsi Ctl Report. Disable THEN (* Example => disable reportin g *) b Success:= fb IED. IEDLD1. LLN0.brcb101. Client. Disable Req(ip Result=>ip Result); (* Activation of command execution *) state:= SEL(b Success, 100, 11); (* If command activation succeeded then wait for command com pletion else report an error *) ELSIF e Control_IEDLD1_LLN0_brcb101 = E_Acsi Ctl Report. GI THEN (* Example => execute general inter rogation *) b Success:= fb IED. IEDLD1. LLN0.brcb101. Client. GIreq(ip Result=>ip Result); (* Activation of comm and execution *) state:= SEL(b Success, 100, 11); (* If command activation succeeded then wait for command com pletion else report an error *) ELSIF e Control_IEDLD1_LLN0_brcb101 = E_Acsi Ctl Report. Purge Buf THEN (* Example => execute purge b uffer *) b Success:= fb IED. IEDLD1. LLN0.brcb101. Client. Purge Buf Req(ip Client:=fb Connection, ip Result=>ip Result); (* Activation of command execution *) state:= SEL(b Success, 100, 11); (* If command activation succeeded then wait for command com pletion else report an error *) ELSIF e Control_IEDLD1_LLN0_brcb101 = E_Acsi Ctl Report. Resync THEN (* Example => execute resync *) b Success:= fb IED. IEDLD1. LLN0.brcb101. Client. Resync Req(ip Client:=fb Connection, n Entry ID:=Last _Rx_brcb101_n Entry ID, ip Result=>ip Result); (* Activation of command execution *) state:= SEL(b Success, 100, 11); (* If command activation succeeded then wait for command com pletion else report an error *) END_IF e Control_IEDLD1_LLN0_brcb101:= E_Acsi Ctl Report. None; (* Reset enum value to recognize next write request *) … For demonstration purposes, however, the instances "urcb201" and "brcb201" are not enabled with the values for "Trg Ops", "Opt Flds", "Intg Pd" etc. configured and exported in the Twin CAT Telecontrol Configurator. Instead, the default values of the "client" instance are used when the report is enabled. … (*================================================================================================== =====================================*) (* Control unbuffered reports using "IEDLD1/LLN0.urcb201. Client" function block instance *) ELSIF e Control_IEDLD1_LLN0_urcb201 <> E_Acsi Ctl Report. None THEN IF e Control_IEDLD1_LLN0_urcb201 = E_Acsi Ctl Report. Enable THEN (* Example => enable reporting *) (* TF6510 Version: 1.7.1 639
## Page 640

Examples Changing default properties of "Client" function block configures reporting behaviour and c ontent of report message data (optional). The "Client" function block writes the new property values to the server and enables RCB. In this example we use the standard configuration values ​ of the function block "Client" to control the "urcb201": "fb IED. IEDLD1. LLN0.urcb201. Client.s Rpt ID":= Empty string. Property "s Rpt ID" is written if < > '' and differs from server value. "fb IED. IEDLD1. LLN0.urcb201. Client.c Trg Ops":= All trigger options are enabled "fb IED. IEDLD1. LLN0.urcb201. Client.c Opt Flds":= All options are enabled except "Data Reference ", "Buffer Overflow" and "Entry ID" "fb IED. IEDLD1. LLN0.urcb201. Client.n Intg Pd":= Set to 5000ms "fb IED. IEDLD1. LLN0.urcb201. Client.n Buf Tm":= Set to 0ms *) (* Write properties and enable RCB *) b Success:= fb IED. IEDLD1. LLN0.urcb201. Client. Enable Req(ip Client:=fb Connection, ip Data Set:=fb I ED. IEDLD1. LLN0. DS2, ip Result=>ip Result); (* Activation of command execution *) state:= SEL(b Success, 100, 11); (* If command activation succeeded then wait for command comp letion else report an error *) ELSIF e Control_IEDLD1_LLN0_urcb201 = E_Acsi Ctl Report. Disable THEN (* Example => disable reportin g *) b Success:= fb IED. IEDLD1. LLN0.urcb201. Client. Disable Req(ip Result=>ip Result); (* Activation of command execution *) state:= SEL(b Success, 100, 11); (* If command activation succeeded then wait for command comp letion else report an error *) ELSIF e Control_IEDLD1_LLN0_urcb201 = E_Acsi Ctl Report. GI THEN (* Example => execute general inter rogation *) b Success:= fb IED. IEDLD1. LLN0.urcb201. Client. GIReq(ip Result=>ip Result); (* Activation of comma nd execution *) state:= SEL(b Success, 100, 11); (* If command activation succeeded then wait for command comp letion else report an error *) END_IF e Control_IEDLD1_LLN0_urcb201:= E_Acsi Ctl Report. None; (* Reset enum value to recognize next write request *) … (*================================================================================================== =====================================*) (* Control buffered reports using "IEDLD1/LLN0.brcb201. Client" function block instance *) ELSIF e Control_IEDLD1_LLN0_brcb201 <> E_Acsi Ctl Report. None THEN IF e Control_IEDLD1_LLN0_brcb201 = E_Acsi Ctl Report. Enable THEN (* Example => enable reporting *) (* Changing default properties of "Client" function block configures reporting behaviour and c ontent of report message data (optional). The "Client" function block writes the new property values to the server and enables RCB. In this example we use the standard configuration values ​ of the function block "Client" to control the "brcb201": "fb IED. IEDLD1. LLN0.brcb201. Client.s Rpt ID":= Empty string. Property "s Rpt ID" is only written if <> '' and differs from server value "fb IED. IEDLD1. LLN0.brcb201. Client.c Trg Ops":= All trigger options are enabled "fb IED. IEDLD1. LLN0.brcb201. Client.c Opt Flds":= All options are enabled except "Data Reference " "fb IED. IEDLD1. LLN0.brcb201. Client.n Intg Pd":= Set to 5000ms "fb IED. IEDLD1. LLN0.brcb201. Client.n Buf Tm":= Set to 0ms *) (* Write properties and enable RCB *) b Success:= fb IED. IEDLD1. LLN0.brcb201. Client. Enable Req(ip Client:=fb Connection, ip Data Set:=fb IE D. IEDLD1. LLN0. DS2, ip Result=>ip Result); (* Activation of command execution *) state:= SEL(b Success, 100, 11); (* If command activation succeeded then wait for command comp letion else report an error *) ELSIF e Control_IEDLD1_LLN0_brcb201 = E_Acsi Ctl Report. Disable THEN (* Example => disable reportin g *) b Success:= fb IED. IEDLD1. LLN0.brcb201. Client. Disable Req(ip Result=>ip Result); (* Activation of command execution *) state:= SEL(b Success, 100, 11); (* If command activation succeeded then wait for command comp letion else report an error *) ELSIF e Control_IEDLD1_LLN0_brcb201 = E_Acsi Ctl Report. GI THEN (* Example => execute general inter rogation *) b Success:= fb IED. IEDLD1. LLN0.brcb201. Client. GIreq(ip Result=>ip Result); (* Activation of comma nd execution *) state:= SEL(b Success, 100, 11); (* If command activation succeeded then wait for command comp letion else report an error *) ELSIF e Control_IEDLD1_LLN0_brcb201 = E_Acsi Ctl Report. Purge Buf THEN (* Example => execute purge b uffer *) b Success:= fb IED. IEDLD1. LLN0.brcb201. Client. Purge Buf Req(ip Client:=fb Connection, ip Result=>ip R esult); (* Activation of command execution *) state:= SEL(b Success, 100, 11); (* If command activation succeeded then wait for command comp letion else report an error *) ELSIF e Control_IEDLD1_LLN0_brcb201 = E_Acsi Ctl Report. Resync THEN (* Example => execute resync *) 640 Version: 1.7.1 TF6510
## Page 641

Examples b Success:= fb IED. IEDLD1. LLN0.brcb201. Client. Resync Req(ip Client:=fb Connection, n Entry ID:=Last_ Rx_brcb201_n Entry ID, ip Result=>ip Result); (* Activation of command execution *) state:= SEL(b Success, 100, 11); (* If command activation succeeded then wait for command comp letion else report an error *) END_IF e Control_IEDLD1_LLN0_brcb201:= E_Acsi Ctl Report. None; (* Reset enum value to recognize next write request *) … The "urcb301" and "brcb301" instances are in turn enabled with user-defined values for "Trg Ops", "Opt Flds" and "Intg Pd". … (*================================================================================================== =====================================*) (* Control unbuffered reports using "IEDLD1/LLN0.urcb301. Client" function block instance *) ELSIF e Control_IEDLD1_LLN0_urcb301 <> E_Acsi Ctl Report. None THEN IF e Control_IEDLD1_LLN0_urcb301 = E_Acsi Ctl Report. Enable THEN (* Example => enable reporting *) (* Changing default properties of "Client" function block configures reporting behaviour and c ontent of report message data. The "Client" function block writes the new property values to the server and enables RCB. In this example we use configuration values that were defined by application/ user to control the "urcb301". *) (* Configures "Rpt ID" (report ID) to be used in report message *) fb IED. IEDLD1. LLN0.urcb301. Client.s Rpt ID:= 'IEDLD1/LLN0. RP.urcb301'; (* Configures "Trg Ops" (trigger options) to be used to trigger new report messages *) usr Trg Ops. Data Change:= TRUE; usr Trg Ops. Data Update:= FALSE; usr Trg Ops. Quality Change:= FALSE; usr Trg Ops. Integrity:= TRUE; usr Trg Ops. General Interrogation:= TRUE; fb IED. IEDLD1. LLN0.urcb301. Client.c Trg Ops:= usr Trg Ops; (* Configures "Opt Flds" (option fields) to be used in report message *) usr Opt Flds. Conf Revision:= TRUE; usr Opt Flds. Data Reference:= FALSE; usr Opt Flds. Data Set Name:= FALSE; usr Opt Flds. Reason For Inclusion:= TRUE; usr Opt Flds. Report Time Stamp:= FALSE; usr Opt Flds. Sequence Number:= TRUE; usr Opt Flds. Buffer Overflow:= FALSE; usr Opt Flds. Entry ID:= FALSE; fb IED. IEDLD1. LLN0.urcb301. Client.c Opt Flds:= usr Opt Flds; (* Configures "Intg Pd" (period in milliseconds used to generate integrity report) *) fb IED. IEDLD1. LLN0.urcb301. Client.n Intg Pd:= 1000; (* Configures "Buf Tm" (max. report message buffer time in milliseconds) *) fb IED. IEDLD1. LLN0.urcb301. Client.n Buf Tm:= 500; (* Write properties and enable RCB *) b Success:= fb IED. IEDLD1. LLN0.urcb301. Client. Enable Req(ip Client:=fb Connection, ip Data Set:=fb IE D. IEDLD1. LLN0. DS3, ip Result=>ip Result); (* Activation of command execution *) state:= SEL(b Success, 100, 11); (* If command activation succeeded then wait for command comp letion else report an error *) ELSIF e Control_IEDLD1_LLN0_urcb301 = E_Acsi Ctl Report. Disable THEN (* Example => disable reportin g *) b Success:= fb IED. IEDLD1. LLN0.urcb301. Client. Disable Req(ip Result=>ip Result); (* Activation of command execution *) state:= SEL(b Success, 100, 11); (* If command activation succeeded then wait for command comp letion else report an error *) ELSIF e Control_IEDLD1_LLN0_urcb301 = E_Acsi Ctl Report. GI THEN (* Example => execute general inter rogation *) b Success:= fb IED. IEDLD1. LLN0.urcb301. Client. GIReq(ip Result=>ip Result); (* Activation of comma nd execution *) state:= SEL(b Success, 100, 11); (* If command activation succeeded then wait for command comp letion else report an error *) END_IF e Control_IEDLD1_LLN0_urcb301:= E_Acsi Ctl Report. None; (* Reset enum value to recognize next write request *) … (*================================================================================================== =====================================*) TF6510 Version: 1.7.1 641
## Page 642

Examples (* Control buffered reports using "IEDLD1/LLN0.brcb301. Client" function block instance *) ELSIF e Control_IEDLD1_LLN0_brcb301 <> E_Acsi Ctl Report. None THEN IF e Control_IEDLD1_LLN0_brcb301 = E_Acsi Ctl Report. Enable THEN (* Example => enable reporting usi ng *) (* Changing default properties of "Client" function block configures reporting behaviour and c ontent of report message data. The "Client" function block writes the new property values to the server and enables RCB. In this example we use configuration values that were defined by application/ user to control the "brcb301". *) (* Configures "Rpt ID" (report ID) to be used in report message *) fb IED. IEDLD1. LLN0.brcb301. Client.s Rpt ID:= 'IEDLD1/LLN0. BR.brcb301'; (* Configures "Trg Ops" (trigger options) to be used to trigger new report messages *) usr Trg Ops. Data Change:= TRUE; usr Trg Ops. Data Update:= FALSE; usr Trg Ops. Quality Change:= FALSE; usr Trg Ops. Integrity:= TRUE; usr Trg Ops. General Interrogation:= TRUE; fb IED. IEDLD1. LLN0.brcb301. Client.c Trg Ops:= usr Trg Ops; (* Configures "Opt Flds" (option fields) to be used in report message *) usr Opt Flds. Conf Revision:= TRUE; usr Opt Flds. Data Reference:= FALSE; usr Opt Flds. Data Set Name:= FALSE; usr Opt Flds. Reason For Inclusion:= TRUE; usr Opt Flds. Report Time Stamp:= FALSE; usr Opt Flds. Sequence Number:= TRUE; usr Opt Flds. Buffer Overflow:= TRUE; usr Opt Flds. Entry ID:= TRUE; fb IED. IEDLD1. LLN0.brcb301. Client.c Opt Flds:= usr Opt Flds; (* Configures "Intg Pd" (period in milliseconds used to generate integrity report) *) fb IED. IEDLD1. LLN0.brcb301. Client.n Intg Pd:= 10000; (* Configures "Buf Tm" (max. report message buffer time in milliseconds) *) fb IED. IEDLD1. LLN0.brcb301. Client.n Buf Tm:= 500; (* Write properties and enable RCB *) b Success:= fb IED. IEDLD1. LLN0.brcb301. Client. Enable Req(ip Client:=fb Connection, ip Data Set:=fb IE D. IEDLD1. LLN0. DS3, ip Result=>ip Result); (* Activation of command execution *) state:= SEL(b Success, 100, 11); (* If command activation succeeded then wait for command comp letion else report an error *) ELSIF e Control_IEDLD1_LLN0_brcb301 = E_Acsi Ctl Report. Disable THEN (* Example => disable reportin g *) b Success:= fb IED. IEDLD1. LLN0.brcb301. Client. Disable Req(ip Result=>ip Result); (* Activation of command execution *) state:= SEL(b Success, 100, 11); (* If command activation succeeded then wait for command comp letion else report an error *) ELSIF e Control_IEDLD1_LLN0_brcb301 = E_Acsi Ctl Report. GI THEN (* Example => execute general inter rogation *) b Success:= fb IED. IEDLD1. LLN0.brcb301. Client. GIreq(ip Result=>ip Result); (* Activation of comma nd execution *) state:= SEL(b Success, 100, 11); (* If command activation succeeded then wait for command comp letion else report an error *) ELSIF e Control_IEDLD1_LLN0_brcb301 = E_Acsi Ctl Report. Purge Buf THEN (* Example => execute purge b uffer *) b Success:= fb IED. IEDLD1. LLN0.brcb301. Client. Purge Buf Req(ip Client:=fb Connection, ip Result=>ip R esult); (* Activation of command execution *) state:= SEL(b Success, 100, 11); (* If command activation succeeded then wait for command comp letion else report an error *) ELSIF e Control_IEDLD1_LLN0_brcb301 = E_Acsi Ctl Report. Resync THEN (* Example => execute resync *) b Success:= fb IED. IEDLD1. LLN0.brcb301. Client. Resync Req(ip Client:=fb Connection, n Entry ID:=Last_ Rx_brcb301_n Entry ID, ip Result=>ip Result); (* Activation of command execution *) state:= SEL(b Success, 100, 11); (* If command activation succeeded then wait for command comp letion else report an error *) END_IF e Control_IEDLD1_LLN0_brcb301:= E_Acsi Ctl Report. None; (* Reset enum value to recognize next write request *) … This is just one example of the implementation of the Report Control Block function in the Twin CAT PLC. 642 Version: 1.7.1 TF6510
## Page 643

Examples 7.6 Client - Direct Control with normal security This sample shows the exemplary implementation of the direct commands (ctl Model := 1, direct control with normal security) in a Twin CAT IEC 61850 client project for the following switch control data classes (Common Data Class, CDC): • SPC (controllable single point) object • DPC (controllable double point) object • APC (controllable analogue process value) object • BAC (binary controlled analogue process value) object • BSC (binary controlled step position information) object • ENC (controllable enumerated status) object: Mod • INC (controllable integer status) object • ISC (integer controlled step position information) object Download Twin CAT XAE Project (*.zip): https://infosys.beckhoff.com/content/1033/TF6510_TC3_IEC61850/ Resources/5494787339.zip The example described here uses the state machine that is described in the "General Client project structure [} 623]" chapter. The States 0, 1, 11 and 100 are identical to the state machine described there. Other states were modified for the example or new states were also added. An additional, self-implemented function block is required to implement the direct commands. In the sample a new function block: "FB_Direct Control" has been added for this purpose. The function block: "FB_Direct Control" handles the actual command execution for the different CDC types. In the modified State 10 of the "FB_IEDClient" several IF statements are listed, which enable the command execution of the client via the instance of the "FB_Direct Control" function block. Several Boolean variables are defined in the declaration part of "FB_IEDClient". A rising edge at the corresponding Boolean variable enables command execution in the IF statement. The user can initiate this via the online values in the application. Methods of the "FB_Direct Control" function block Method name Description APC A method is added for each controllable CDC type, as most CDCs use different control value types, for example, "APC" -> "REAL" and "SPC" -> BAC "BOOL". As the CDCs use different types, each of these methods also BSC has a different input parameter for the control value (e.g. "ctl Val"). Inside DPC the method the value is written to a union type that contains a member for each CDC type. The union variable is passed to the "Request" method. ENC_Mod The "Request" method is a private method and it activates the command INC execution. ISC SPC Execute As soon as the "Request" method of the function block has been successfully called, the "Execute" method must be called in every cycle. Within this method there is a separate state machine that works independently of the state machine in the client function block. As a result of this, the code is divided into smaller sections and is easier to extend in future. Clear Aborts the command and resets the function block. The command, depending on the CDC type, modifies the control value of the CDC. For demonstration purposes, a numerical value is incremented or a Boolean value is toggled, for example. The state machine of the "FB_IEDClient" function block is set to State 11 as soon as a command has been initiated and successfully executed. The state machine waits here until the command has been successfully executed. For this purpose, the "Execute" method is called in every cycle in State 11 and it is possible, on TF6510 Version: 1.7.1 643
## Page 644

Examples the basis of the "ip Result" interface pointer, to determine whether the command is still being processed or whether it has already been completed. This is queried via the "Is Busy()" method. The state machine switches to State 0 as soon as the command has been successfully executed. This is only an exemplary implementation of the direct commands in the Twin CAT PLC. 7.7 Client - SBO Control with normal security This sample shows the exemplary implementation of the command: select-before-operate (ctl Model := 2, select before operate control with normal security) in a Twin CAT IEC 61850 client project for the following switch control data classes (Common Data Class, CDC): • SPC (controllable single point) object; • DPC (controllable double point) object • APC (controllable analogue process value) object • BAC (binary controlled analogue process value) object • BSC (binary controlled step position information) object • ENC (controllable enumerated status) object: Mod • INC (controllable integer status) object • ISC (integer controlled step position information) object Download Twin CAT XAE Project (*.zip): https://infosys.beckhoff.com/content/1033/TF6510_TC3_IEC61850/ Resources/5494803595.zip The example described here uses the state machine that is described in the "General Client project structure [} 623]" chapter. The States 0, 1, 11 and 100 are identical to the state machine described there. Other states were modified for the example or new states were also added. For the implementation of the commands: select-before-operate an additional, self-implemented function block is required. In the sample a new function block: "FB_SBOControl" has been added for this purpose. The function block: "FB_SBOControl" handles the actual command execution for the different CDC types. In the modified State 10 of the "FB_IEDClient" several IF statements are listed, which enable the command execution of the client via the instance of the "FB_SBOControl" function block. An enum is used here for activation in order to consider all states of the SBO command (SBO = select before operate). The command is activated as soon as one of the enums, for example, "e Control_LLN0_Mod" is not "E_Acsi Ctl Service. None". The user can initiate this via the online values in the application. 644 Version: 1.7.1 TF6510
## Page 645

Examples Methods of the "FB_Direct Control" function block Method name Description APC A method is added for each controllable CDC type, as most CDCs use different types, for example, "APC" -> "REAL" and "SPC" -> "BOOL". As BAC the CDCs use different types, each of these methods also has a different BSC input parameter for the control value (e.g. "ctl Val"). Inside the method the DPC value is written to a union type that contains a member for each CDC type. The union variable is passed to the "Request" method. The ENC_Mod "Request" method is a private method and it activates the command INC execution. ISC SPC Execute As soon as the "Request" method of the function block has been successfully called, the "Execute" method must be called in every cycle. Within this method there is a separate state machine that works independently of the state machine in the client function block. As a result of this, the code is divided into smaller sections and is easier to extend in future. Clear Aborts the command and resets the function block. The command, depending on the CDC type, modifies the control value of the CDC. For demonstration purposes, a numerical value is incremented or a Boolean value is toggled, for example. The execution changes depending on the enum value for initiating a command. The enum can take the following values: None, Select, Operate, Select&Operate, Cancel. Only one command is executed in the case of Select, Operate and Cancel. In the case of Select & Operate, a Select command is executed first and, as soon as this has been successfully completed, the Operate command begins. The user can choose one of these options when switching over the enum in the online values. As soon as a change takes place with one of the enum values, the respective method to suit the CDC type is called. If this has been successfully completed, the state machine changes to State 11. This is necessary because the processing of the commands takes longer than one cycle in the PLC. The "Execute" method is called cyclically within this state. On the basis of the "ip Result" interface pointer, it is possible to determine whether the command is still being processed or whether it has already been completed. This is queried via the "Is Busy()" method. The state machine switches to State 0 as soon as the command has been successfully executed. This is only an exemplary implementation of the commands: select-before-operate in the Twin CAT PLC. 7.8 Client - Direct Control with enhanced security This sample shows the exemplary implementation of direct control with enhanced security (ctl Model := 3, direct control with enhanced security) in a Twin CAT IEC 61850 client project for the following switch control data classes (Common Data Class, CDC): • SPC (controllable single point) object • DPC (controllable double point) object • APC (controllable analogue process value) object • BAC (binary controlled analogue process value) object • BSC (binary controlled step position information) object • ENC (controllable enumerated status) object: Mod • INC (controllable integer status) object • ISC (integer controlled step position information) object Download Twin CAT XAE Project (*.zip): https://infosys.beckhoff.com/content/1033/TF6510_TC3_IEC61850/ Resources/5494805899.zip TF6510 Version: 1.7.1 645
## Page 646

Examples The example described here uses the state machine that is described in the "General Client project structure [} 623]" chapter. The States 0, 1, 11 and 100 are identical to the state machine described there. Other states were modified for the example or new states were also added. An additional, self-implemented function block is required to implement the direct commands. In the sample a new function block: "FB_DIRw Control" has been added for this purpose. The function block: "FB_DIRw Control" handles the actual command execution for the different CDC types. In the modified State 10 several IF statements are listed, which enable the command execution of the client via the instance of the "FB_DIRw Control" function block. Several Boolean variables are defined in the declaration part of "FB_IEDClient". A rising edge at the corresponding Boolean variable enables command execution in the IF statement. The user can initiate this via the online values in the application. Methods of the "FB_DIRw Control" function block Method name Description APC A method is added for each controllable CDC, as most CDCs use different control value types, for example, "APC" -> "REAL" and "SPC" -> "BOOL". BAC As the CDCs use different types, each of these methods also has a BSC different input parameter for the control value (e.g. "ctl Val"). Inside the DPC method the value is written to a union type that contains a member for each CDC. The union variable is passed to the "Request" method. The ENC_Mod "Request" method is a private method and it activates the command INC execution. ISC SPC Execute As soon as the "Request" method of the function block has been successfully called, the "Execute" method must be called in every cycle. Within this method there is a separate state machine that works independently of the state machine in the client function block. As a result of this, the code is divided into smaller sections and is easier to extend in future. Clear Aborts the command and resets the function block. The command, depending on the CDC type, modifies the control value of the CDC. For demonstration purposes, a numerical value is incremented or a Boolean value is toggled, for example. The state machine of the "FB_IEDClient" function block is set to State 11 as soon as a command has been initiated and successfully executed. The state machine waits here until the command has been successfully executed. For this purpose, the "Execute" method is called in every cycle in State 11 and it is possible, on the basis of the "ip Result" feedback interface pointer, to determine whether the command is still being processed or whether it has already been completed. This is queried via the "Is Busy()" method. The state machine switches to State 0 as soon as the command has been successfully executed. As opposed to Sample04 with the implementation example for "Direct control with normal security", the user receives the event "On Command Termination Ind" at the "FB_IEDClient" function block when the "Direct control with enhanced security" is successfully executed. If an error occurs when executing the command, the user receives the event "On Last Appl Error Ind". This is only an exemplary implementation of the direct control with enhanced security in the Twin CAT PLC. 7.9 Client - SBO Control with enhanced security This sample shows the exemplary implementation of the command: select-before-operate-control-with- enhanced-security (ctl Model := 4, select before operate control with enhanced security) in a Twin CAT IEC 61850 client project for the following switch control data classes (Common Data Class, CDC): • SPC (controllable single point) object 646 Version: 1.7.1 TF6510
## Page 647

Examples • DPC (controllable double point) object • APC (controllable analogue process value) object • BAC (binary controlled analogue process value) object • BSC (binary controlled step position information) object • ENC (controllable enumerated status) object: Mod • INC (controllable integer status) object • ISC (integer controlled step position information) object Download Twin CAT XAE Project (*.zip): https://infosys.beckhoff.com/content/1033/TF6510_TC3_IEC61850/ Resources/5494808203.zip The example described here uses the state machine that is described in the "General Client project structure [} 623]" chapter. The States 0, 1, 11 and 100 are identical to the state machine described there. Other states were modified for the example or new states were also added. For the implementation of the commands: select before operate control with enhanced security, an additional, self-implemented function block is required. In the sample a new function block: "FB_SBOw Control" has been added for this purpose. The function block: "FB_SBOw Control" handles the actual command execution for the different CDC types. In the modified State 10 of the "FB_IEDClient" several IF statements are listed, which enable the command execution of the client via the instance of the "FB_SBOw Control" function block. An enum is used here for activation in order to consider all states of the SBO command (SBO = select before operate). The command is activated as soon as one of the enums, for example, "e Control_LLN0_Mod" is not "E_Acsi Ctl Service. None". The user can initiate this via the online values in the application. Methods of the "FB_Direct Control" function block Method name Description APC A method is added for each controllable CDC type, as most CDCs use different types, for example, "APC" -> "REAL" and "SPC" -> "BOOL". As BAC the CDCs use different types, each of these methods also has a different BSC input parameter for the control value (e.g. "ctl Val"). Inside the method the DPC value is written to a union type that contains a member for each CDC. The union variable is passed to the "Request" method. The "Request" method ENC_Mod is a private method and it activates the command execution. INC ISC SPC Execute As soon as the "Request" method of the function block has been successfully called, the "Execute" method must be called in every cycle. Within this method there is a separate state machine that works independently of the state machine in the client function block. As a result of this, the code is divided into smaller sections and is easier to extend in future. Clear Aborts the command and resets the function block. The command, depending on the CDC type, modifies the control value of the CDC. For demonstration purposes, a numerical value is incremented or a Boolean value is toggled, for example. The execution changes depending on the enum value for initiating a command. The enum can take the following values: None, Select, Operate, Select&Operate, Cancel. Only one command is executed in the case of Select, Operate and Cancel. In the case of Select & Operate, a Select command is executed first and, as soon as this has been successfully completed, the Operate command begins. The user can choose one of these options when switching over the enum in the online values. As soon as a change takes place with one of the enum values, the respective method to suit the CDC type is called. If this has been successfully completed, the state machine changes to State 11. This is necessary because the processing of the commands takes longer than one cycle in the PLC. The "Execute" method is called cyclically within this state. On the basis of the "ip Result" interface pointer, it is possible to determine TF6510 Version: 1.7.1 647
## Page 648

Examples whether the command is still being processed or whether it has already been completed. This is queried via the "Is Busy()" method. The state machine switches to State 0 as soon as the command has been successfully executed. As opposed to Sample05 with the implementation example for "Select before operate control with normal security", the user receives the event "On Command Termination Ind" at the "FB_IEDClient" function block when the "Select before operate with enhanced security" is successfully executed. If an error occurs when executing the command, the user receives the event "On Last Appl Error Ind". This is only an exemplary implementation of the commands: select before operate with enhanced security in the Twin CAT PLC. 7.10 Client - Read/Write Data Set Values (Get Data Set Values, Set Data Set Values) This sample shows the use of the "Get Data Set Values Req" and "Set Data Set Values Req" methods of the client function block. Download Twin CAT XAE Project (*.zip): https://infosys.beckhoff.com/content/1033/TF6510_TC3_IEC61850/ Resources/8922514571.zip The example described here uses the state machine that is described in the "General Client project structure [} 623]" chapter. The States 0, 1, 11 and 100 are identical to the state machine described there. Other states were modified for the example or new states were also added. General information about IEC 61850 Data Sets A Data Set is a list of data attributes or data that can be transmitted together (usually in a report or GOOSE message). The individual list entries of a Data Set are called Data Set members. The Data Set members are configured in the Twin CAT Telecontrol Configurator. The PLC code of the Data Sets and Data Set members is automatically generated by the configurator during Twin CAT project generation. With a Data Set several data or data attributes can be read or written at the same time. The client method "Get Data Set Values Req" can read all Data Set members defined in the Data Set together (the values are transferred from the server to the client). The client method "Set Data Set Values Req" can be used to write to all Data Set members defined in the Data Set (the values are transferred from the client to the server). Preferably the Data Sets are found in the IEC 61850 data model below the logical node LLN0. However, a Data Set can theoretically be assigned to (linked to) any other logical node. The following figure shows the Data Set function blocks created during project generation in the Twin CAT project tree: 648 Version: 1.7.1 TF6510
## Page 649

Examples The Data Set function blocks shown belong to LLN0 and for this reason they are also instantiated in the declaration part of LLN0. The instances of the Data Sets: "DS1" to "DS8" and the link to the logical node were also generated automatically. TF6510 Version: 1.7.1 649
## Page 650

Examples The PLC code for the configuration of the Data Set members is also automatically generated like the Data Sets themselves. This code is located in the On Init method of the respective Data Set function block (see figure below). Static Data Sets vs. dynamic Data Sets The Twin CAT project generation creates static, persistent Data Sets. I.e. these Data Sets are always available in the data model and cannot and should not be deleted. However, there are also dynamic Data Sets that can be created during communication. The dynamically created Data Sets can be deleted again. They are deleted either automatically, when the connection is terminated (dynamically created non- persistent data-sets) or at a later time, also by another client (dynamically created persistent data-sets). Sample project In the zip archive there is an ICD configuration file. This file can be used, for example, to simulate a server using third-party software or to create a new or modified Twin CAT project with Twin CAT Telecontrol Configurator. If you plan to use a Data Set to write multiple data or data attributes at the same time, then you still need to consider the following: all configured Data Set members must also allow write access, otherwise the write access will fail. This depends mainly on the functional group (FC) of the Data Set member. In this sample, for the purpose of demonstrating write access, the Data Set "DS8" has been configured so that all Data Set members can be written to (functional group: "DC"). In our client sample project, of course, write access to all Data Set members must be possible on the server side. Several Boolean variables are defined in the FB_IEDClient function block. A rising edge at one of these variables enables the method: "Get Data Set Values Req" or "Set Data Set Values Req" with the respective Data Set as input parameter. As an example: a rising edge at the variable "b Get Data Set Values_LLN0_DS1" enables the command for reading the Data Set: "DS1" and a rising edge at "b Set Data Set Values_LLN0_DS8" enables the command for writing the Data Set: "DS8". … b Get Data Set Values_LLN0_DS1 : BOOL := TRUE; b Get Data Set Values_LLN0_DS2 : BOOL := TRUE; b Get Data Set Values_LLN0_DS3 : BOOL := TRUE; b Get Data Set Values_LLN0_DS4 : BOOL := TRUE; b Get Data Set Values_LLN0_DS5 : BOOL := TRUE; b Get Data Set Values_LLN0_DS6 : BOOL := TRUE; b Get Data Set Values_LLN0_DS7 : BOOL := TRUE; b Get Data Set Values_LLN0_DS8 : BOOL := TRUE; b Set Data Set Values_LLN0_DS8 : BOOL := TRUE; … The following is an excerpt from the sample code for reading the Data Set: "DS8". First, the method call "Get Data Set Values Req" enables the transfer of data from the server to the client. After that, in further PLC cycles the method "ip Result. Execute()" must be called until the transfer is completed. "ip Result. Is Busy()" returns FALSE in this case. The received data values or attribute values of the Data Set members are automatically copied (mapped) to the client data model upon success. … ELSIF b Get Data Set Values_LLN0_DS8 THEN b Get Data Set Values_LLN0_DS8:= FALSE; 650 Version: 1.7.1 TF6510
## Page 651

Examples b Success:= fb Connection. Get Data Set Values Req(ip Data Set:=fb IED. IEDLD1. LLN0. DS8, h User:=0, ip Sink:= 0, n Invoke ID=>n Invoke ID, ip Result=>ip Result); state:= SEL(b Success, 100, 11); … In the sample code for writing the Data Set: "DS8", the data to be written to the Data Set: "DS8" is modified each time for demonstration purposes. First, new data values or attribute values are assigned to Data Set members in the client data model. After that the method call "Set Data Set Values Req" activates the transfer of the data to the server. In further PLC cycles, the method "ip Result. Execute()" must be called analogously as already described above until the transfer has been completed. The new data values or attribute values are copied (mapped) into the server data model on the server side. … ELSIF b Set Data Set Values_LLN0_DS8 THEN b Set Data Set Values_LLN0_DS8:= FALSE; (* As example we modify some description data values *) s Config Rev:= TO_STRING(n Rev:=n Rev+1); s Hw Rev:= TO_STRING(TO_REAL(n Rev)); s Sw Rev:= TO_STRING(TO_REAL(n Rev)); fb IED. IEDLD1. LPHD1. Phy Nam. Vendor.s Value:= s Vendor; fb IED. IEDLD1. LPHD1. Phy Nam.hw Rev.s Value:= s Hw Rev; fb IED. IEDLD1. LPHD1. Phy Nam.sw Rev.s Value:= s Sw Rev; fb IED. IEDLD1. LPHD1. Phy Nam.ser Num.s Value:= s Ser Num; fb IED. IEDLD1. LPHD1. Phy Nam.model.s Value:= s Model; fb IED. IEDLD1. LPHD1. Phy Nam.location.s Value:= s Location; fb IED. IEDLD1. LLN0. Nam Plt.vendor.s Value:= s Vendor; fb IED. IEDLD1. LLN0. Nam Plt.sw Rev.s Value:= s Sw Rev; fb IED. IEDLD1. LLN0. Nam Plt.d.s Value:= 'LLN0 demo node'; fb IED. IEDLD1. LLN0. Nam Plt.config Rev.s Value:= s Config Rev; fb IED. IEDLD1. MMXU1. Nam Plt.vendor.s Value:= s Vendor; fb IED. IEDLD1. MMXU1. Nam Plt.sw Rev.s Value:= s Sw Rev; fb IED. IEDLD1. MMXU1. Nam Plt.d.s Value:= 'MMXU1 demo node'; fb IED. IEDLD1. MMXU1. Nam Plt.config Rev.s Value:= s Config Rev; fb IED. IEDLD1. XCBR1. Nam Plt.vendor.s Value:= s Vendor; fb IED. IEDLD1. XCBR1. Nam Plt.sw Rev.s Value:= s Sw Rev; fb IED. IEDLD1. XCBR1. Nam Plt.d.s Value:= 'XCBR1 demo node'; fb IED. IEDLD1. XCBR1. Nam Plt.config Rev.s Value:= s Config Rev; fb IED. IEDLD1. CSWI1. Nam Plt.vendor.s Value:= s Vendor; fb IED. IEDLD1. CSWI1. Nam Plt.sw Rev.s Value:= s Sw Rev; fb IED. IEDLD1. CSWI1. Nam Plt.d.s Value:= 'CSWI1 demo node'; fb IED. IEDLD1. CSWI1. Nam Plt.config Rev.s Value:= s Config Rev; fb IED. IEDLD1. LEDGGIO1. Nam Plt.vendor.s Value:= s Vendor; fb IED. IEDLD1. LEDGGIO1. Nam Plt.sw Rev.s Value:= s Sw Rev; fb IED. IEDLD1. LEDGGIO1. Nam Plt.d.s Value:= 'LEDGGIO1 demo node'; fb IED. IEDLD1. LEDGGIO2. Nam Plt.vendor.s Value:= s Vendor; fb IED. IEDLD1. LEDGGIO2. Nam Plt.sw Rev.s Value:= s Sw Rev; fb IED. IEDLD1. LEDGGIO2. Nam Plt.d.s Value:= 'LEDGGIO2 demo node'; fb IED. IEDLD1. LEDGGIO3. Nam Plt.vendor.s Value:= s Vendor; fb IED. IEDLD1. LEDGGIO3. Nam Plt.sw Rev.s Value:= s Sw Rev; fb IED. IEDLD1. LEDGGIO3. Nam Plt.d.s Value:= 'LEDGGIO3 demo node'; fb IED. IEDLD1. LEDGGIO4. Nam Plt.vendor.s Value:= s Vendor; fb IED. IEDLD1. LEDGGIO4. Nam Plt.sw Rev.s Value:= s Sw Rev; fb IED. IEDLD1. LEDGGIO4. Nam Plt.d.s Value:= 'LEDGGIO4 demo node'; fb IED. IEDLD1. LEDGGIO5. Nam Plt.vendor.s Value:= s Vendor; fb IED. IEDLD1. LEDGGIO5. Nam Plt.sw Rev.s Value:= s Sw Rev; fb IED. IEDLD1. LEDGGIO5. Nam Plt.d.s Value:= 'LEDGGIO5 demo node'; fb IED. IEDLD1. LEDGGIO6. Nam Plt.vendor.s Value:= s Vendor; fb IED. IEDLD1. LEDGGIO6. Nam Plt.sw Rev.s Value:= s Sw Rev; fb IED. IEDLD1. LEDGGIO6. Nam Plt.d.s Value:= 'LEDGGIO6 demo node'; fb IED. IEDLD1. LEDGGIO7. Nam Plt.vendor.s Value:= s Vendor; fb IED. IEDLD1. LEDGGIO7. Nam Plt.sw Rev.s Value:= s Sw Rev; fb IED. IEDLD1. LEDGGIO7. Nam Plt.d.s Value:= 'LEDGGIO7 demo node'; fb IED. IEDLD1. LEDGGIO8. Nam Plt.vendor.s Value:= s Vendor; fb IED. IEDLD1. LEDGGIO8. Nam Plt.sw Rev.s Value:= s Sw Rev; fb IED. IEDLD1. LEDGGIO8. Nam Plt.d.s Value:= 'LEDGGIO8 demo node'; TF6510 Version: 1.7.1 651
## Page 652

Examples fb IED. IEDLD1. ATCC1. Nam Plt.vendor.s Value:= s Vendor; fb IED. IEDLD1. ATCC1. Nam Plt.sw Rev.s Value:= s Sw Rev; fb IED. IEDLD1. ATCC1. Nam Plt.d.s Value:= 'ATCC1 demo node'; fb IED. IEDLD1. ATCC1. Nam Plt.config Rev.s Value:= s Config Rev; b Success:= fb Connection. Set Data Set Values Req(ip Data Set:=fb IED. IEDLD1. LLN0. DS8, h User:=0, ip Sink:= 0, n Invoke ID=>n Invoke ID, ip Result=>ip Result); state:= SEL(b Success, 100, 11); … … CASE state OF … 11: IF ip Result <> 0 THEN ip Result. Execute(); IF NOT (b Busy:=ip Result. Is Busy()) THEN state:= SEL(ip Result. Is Completed(), 100(* failed or aborted *), 0(* succeeded *)); END_IF END_IF … END_CASE … 7.11 Client - GOOSE Subscriber (Get Go CBData Values, Set Go CBData Values) This example shows how a GOOSE control block on the Server side is controlled with the help of the services Get Go CBData Values and Set Go CBData Values. The services enable the reading and/or writing of the attribute values of the GOOSE control block. The sending (publishing) of the GOOSE messages on the Server side is activated when the attribute "Go Ena" is set to "TRUE". The sending of the GOOSE messages is deactivated when the attribute "Go Ena" is set to "FALSE". A Subscriber that receives the GOOSE messages on the Client side is also included in the example. Download Twin CAT XAE Project (*.zip): https://infosys.beckhoff.com/content/1033/TF6510_TC3_IEC61850/ Resources/7280990219.zip The example described here uses the state machine that is described in the "General Client project structure [} 623]" chapter. The States 0, 1, 11 and 100 are identical to the state machine described there. Other states were modified for the example or new states were also added. In the project tree under the I/O-Device branch you will find a network adapter instance named "GSE (RT Ethernet adapter)". This adapter instance must be configured accordingly, i.e. the I/O configuration must be adapted to the existing hardware and to the target platform on which the project is to run. A new I/O configuration is also necessary if you change the target platform. This configuration must be done manually in Twin CAT XAE. In addition to the I/O configuration of the network adapter, a link must be established between the network adapter and the PLC function blocks for Goose communication. The link can be used to forward the data received from the network adapter to the instance of the function block: "FB_[IEDName]Gse". In the opposite direction the instance of the function block "FB_[IEDName]Gse" can forward the data to be sent to the network adapter. Here you can find more information: RT Ethernet adapter Configuration [} 38]. 7.12 Client - GOOSE Subscriber (without Client-Server communication) In a Client project, the Twin CAT Telecontrol Configurator also generates a Client block by default (see: "General Client project structure" [} 623]). The Client block can then be used, for example, to activate/ deactivate the GOOSE Publisher on the Server side via Client-Server services such as "Get Go CBData Values" or "Set Go CBData Values" or to configure the Go CBs. In some cases, however, Client-Server communication with the device should be dispensed with and only a "pure" GOOSE Subscriber implemented. Such a Subscriber can automatically start receiving GOOSE messages after the PLC program start. This example shows the implementation of a Subscriber, but without the Client-Server communication part. The parts of the Client project that are not needed have been deliberately removed in this example. 652 Version: 1.7.1 TF6510
## Page 653

Examples Download Twin CAT XAE Project (*.zip): https://infosys.beckhoff.com/content/1033/TF6510_TC3_IEC61850/ Resources/7282249995.zip In the Global Variable List, an IED data model function block instance ("fb IED") and one or more GSE function block instances for GOOSE communication and GSE management ("fb IEDGse") are required. This sample uses only one network adapter for GOOSE communication and three Go CBs in the IED data model. Namespace: Tc Telecontrol Type: Global Variable List (GVL) VAR_GLOBAL ip Creator : I_Acsi Code Creator Class := GVL_Acsi Vars. Creator. Set Code Rev(code Rev:=2). Set Gui Ver(maj or:=1, minor:=0, build:=93, revision:=10); fb IED : FB_IED_IED; fb IEDGse : FB_IEDGse := (fb Adapter:=(ip IED:=fb IED, settings:=(s Multicast Addr:='01-0C- CD-01-00-01', e Dispatch Mode:=E_Gse Dispatch Mode. Non Promiscuous))); END_VAR The "MAIN" program is called cyclically by a Twin CAT task and only needs to call the "P_IEC61850MAIN" program. "P_IEC61850MAIN" in turn calls the GSE function block that is responsible for receiving the GOOSE messages and mapping the received GOOSE data into the IED data model. PROGRAM MAIN VAR END_VAR P_IEC61850MAIN(); PROGRAM P_IEC61850MAIN VAR END_VAR fb IEDGse(); In the sample implementation of the GSE function block, the Subscriber process is automatically activated for all three Go CBs after PLC startup. A rising edge at the "b Unsubscribe" variable disables the Subscriber process of the Go CBs. FUNCTION_BLOCK FB_IEDGse IMPLEMENTS I_Gse Link Status Event Sink VAR_INPUT fb Adapter : FB_Gse Adapter Class := (ip Link Status:=THIS^); END_VAR VAR e Link Status : E_Gse Link Status; b Success : BOOL; ip Error : I_Service Error Class; b Subscribe : BOOL := TRUE; b Unsubscribe : BOOL; END_VAR b Success:= fb Adapter. Execute(ip Error=>ip Error); IF b Subscribe THEN b Subscribe:= FALSE; b Success:= fb IED. IEDLD1. LLN0.gocb01. Subscriber. Enable(ip Adapter:=fb Adapter, ip Error=>ip Error); b Success:= fb IED. IEDLD1. LLN0.gocb02. Subscriber. Enable(ip Adapter:=fb Adapter, ip Error=>ip Error); b Success:= fb IED. IEDLD1. LLN0.gocb03. Subscriber. Enable(ip Adapter:=fb Adapter, ip Error=>ip Error); ELSIF b Unsubscribe THEN b Unsubscribe:= FALSE; b Success:= fb IED. IEDLD1. LLN0.gocb01. Subscriber. Disable(ip Error=>ip Error); b Success:= fb IED. IEDLD1. LLN0.gocb02. Subscriber. Disable(ip Error=>ip Error); b Success:= fb IED. IEDLD1. LLN0.gocb03. Subscriber. Disable(ip Error=>ip Error); ELSE b Success:= fb IED. IEDLD1. LLN0.gocb01. Subscriber. Execute(ip Error=>ip Error); b Success:= fb IED. IEDLD1. LLN0.gocb02. Subscriber. Execute(ip Error=>ip Error); b Success:= fb IED. IEDLD1. LLN0.gocb03. Subscriber. Execute(ip Error=>ip Error); END_IF The GSE block implements the "I_Gse Link Status Event Sink" interface. The method: "On Link Status Change" belongs to this interface implementation and is called whenever the status of the network connection (at the network adapter) changes. The PLC application can, for example, query or check the network connection status via "e Link Status" variable. METHOD On Link Status Change VAR_INPUT ip Adapter : I_Gse Adapter Class; e Status : E_Gse Link Status; TF6510 Version: 1.7.1 653
## Page 654

Examples END_VAR VAR END_VAR e Link Status:= e Status; In the project tree under the I/O-Device branch you will find a network adapter instance named "GSE (RT Ethernet adapter)". This adapter instance must be configured accordingly, i.e. the I/O configuration must be adapted to the existing hardware and to the target platform on which the project is to run. A new I/O configuration is also necessary if you change the target platform. This configuration must be done manually in Twin CAT XAE. In addition to the I/O configuration of the network adapter, a link must be established between the network adapter and the PLC function blocks for Goose communication. The link can be used to forward the data received from the network adapter to the instance of the function block: "FB_[IEDName]Gse". In the opposite direction the instance of the function block "FB_[IEDName]Gse" can forward the data to be sent to the network adapter. Here you can find more information: RT Ethernet adapter Configuration [} 38]. 7.13 Client - User defined timestamp clock source In some applications, a time stamp that originates from an external source (e.g. a GPS clock) should also be used in addition to the setpoint, for example. This example shows the implementation of a user-defined clock/time for timestamping tasks. Download Twin CAT XAE Project (*.zip): https://infosys.beckhoff.com/content/1033/TF6510_TC3_IEC61850/ Resources/10698182027.zip The example described here uses the state machine that is described in the "General Client project structure [} 623]" chapter. The States 0, 1, 11 and 100 are identical to the state machine described there. Other states were modified for the example or new states were also added. The Twin CAT IEC 61850 Client implementation uses the interface: "I_Scsm System Clock Event Sink" to query the time for time stamping tasks. It is possible to use a custom function block that implements this special interface and configures the client function block to use the new time source. In the Global Variable List "Tc Telecontrol", the new time source is assigned to the client function block by setting the property "ip System Clock:=fb My Clock". The client function block will then call the method: "On Get System Time" each time it needs a new time stamp from it. The IEC 61850 client-server communication uses time stamps in at least two different formats: UTC time and binary time. For this reason, this method returns the time stamp as output variables in these two formats. VAR_GLOBAL ip Creator : I_Acsi Code Creator Class := GVL_Acsi Vars. Creator. Set Code Rev(code Rev:=2). Set Gui Ver(ma jor:=1, minor:=0, build:=93, revision:=10); fb IED : FB_IED_IED; (* User defined clock (time stamp source) *) fb My Clock : FB_My Clock; fb IEDClient : FB_IEDClient := (fb Connection:=(ip IED:=fb IED, ip System Clock:=fb My Clock, settings:= (s Remote Host:='127.0.0.1'))); END_VAR The sample demonstrates a very simple software clock, which was implemented with the help of the RTC_EX function block. FUNCTION_BLOCK FB_My Clock IMPLEMENTS I_Scsm System Clock Event Sink VAR _t T : T_Utc Time:=(second Since Epoch:=DT#2021-04-01-00:00:00, quality:=(Clock Not Synchronized:=TRUE , Clock Failure:=FALSE, Leap Seconds Known:=FALSE), fraction Of Second:=[0,0,0]);(* Actual UTC time. *) _t B : T_Binary Time;(* Actual binary-time (Entry Time) *) clock : RTC_EX:=(EN:=TRUE, PDT:=DT#2021-04-01-00:00:00, PMSEK:=0); refresh Timer : TON:=(IN:=TRUE, PT:=T#1S); END_VAR METHOD FINAL Execute : BOOL VAR_INPUT END_VAR refresh Timer(); IF Execute:=refresh Timer. Q THEN refresh Timer(IN:=FALSE); refresh Timer(IN:=TRUE); Update(); END_IF 654 Version: 1.7.1 TF6510
## Page 655

Examples METHOD FINAL On Get System Time : BOOL VAR_INPUT ip AA: I_Scsm Association Class;(* Application association. If = 0 => optional or unknown. *) END_VAR VAR_OUTPUT t T: T_Utc Time;(* UTC-time. *) t B: T_Binary Time;(* Binary-time *) END_VAR t T:=_t T; t B:=_t B; On Get System Time:=TRUE; METHOD FINAL Set Clock VAR_INPUT t Set : DT;(* New time to set *) END_VAR clock(EN:=FALSE); clock(EN:=TRUE, PDT:=t Set); _t T.quality. Clock Not Synchronized:=FALSE; Update(); METHOD FINAL Update VAR_INPUT END_VAR clock();(* update clock time *) (* convert to utc-time format *) _t T.second Since Epoch:=clock. CDT; _t T.fraction Of Second:=LTIME_TO_Utc Time Fractionof Second(in:=TIME_TO_LTIME(DWORD_TO_TIME(clock. CMSEK)) ); Accuracy_To_Utc Time Quality Accuracy(in:=E_Utc Time Accuracy._03, b Accuracy0=>_t T.quality. Accuracy0, b Ac curacy1=>_t T.quality. Accuracy1, b Accuracy2=>_t T.quality. Accuracy2, b Accuracy3=>_t T.quality. Accuracy3 , b Accuracy4=>_t T.quality. Accuracy4); (* convert to binary-time format *) _t B.day:=Date_To_Binary Time6Day(in:=DT_TO_DATE(clock. CDT)); _t B.time Of Day:=DT_TO_TOD(clock. CDT) + DWORD_TO_TIME(clock. CMSEK); 7.14 Client - Dynamic created Data Sets (Create Data Set, Delete Data Set) This sample shows the use of the "Create Data Set Req" and "Delete Data Set" methods of the client function block. Download Twin CAT XAE Project (*.zip): https://infosys.beckhoff.com/content/1033/TF6510_TC3_IEC61850/ Resources/11311587339.zip The example described here uses the state machine that is described in the "General Client project structure [} 623]" chapter. The States 0, 1, 11 and 100 are identical to the state machine described there. Other states were modified for the example or new states were also added. General information about the dynamic Data Sets The instances of the static Data Sets, which are always available during runtime, are either configured by the user in Twin CAT Telecontrol Configurator or imported from an ICD file. The PLC project generation later creates the necessary PLC code for the instantiation of these Data Sets. This code also includes the configuration of the Data Set members and the assignment of the Data Set to a logical node in the IEC 61850 data model. The configuration of the static Data Sets must not be changed at runtime of the PLC program and the Data Sets can also not be deleted. Sometimes, however, you want to create a Data Set dynamically and use it only for a short time (e.g. as long as the communication connection is up). During this time you may want to monitor some measured values with the help of a report and when the connection is no longer present then remove/delete this Data Set from the data model again. With the help of the client methods: "Create Data Set Req" and "Delete Data Set Req" Data Sets can be created, configured and deleted dynamically (at runtime). The dynamically created Data Sets can be configured as either "persistent" or "non-persistent" Data Sets. The "non-persistent" Data Sets are permanently assigned to a client-server connection and only exist as long as the connection is not interrupted. The "non-persistent" TF6510 Version: 1.7.1 655
## Page 656

Examples Data Sets of a client-server connection are not visible for another client-server connection. I.e. a client cannot see or delete the "non-persistent" Data Sets of another client. A non-persistent Data Set can only be deleted by the client that created it or is automatically deleted when that client is disconnected. The "persistent" Data Sets, on the other hand, are visible to all clients and can also be deleted by another client at a later time. However, this is not recommended as the creator client may not notice and may try to continue accessing this Data Set. The "persistent" Data Sets are not automatically deleted when the connection is terminated and remain in the data model until they are explicitly deleted. A dynamically created "persistent" or "non-persistent" Data Set, which is used, for example, by a report control block, cannot be deleted. I.e. as long as the control block Attribute: "Dat Set" references this Data Set, this Data Set cannot be deleted. If you want to delete such a Data Set, then the attribute "Dat Set" must reference another Data Set or the "Dat Set" reference must be deleted (e.g. an empty string deletes the "Dat Set" reference). In a client project and after a Twin CAT restart or a reset of the Twin CAT PLC, all "persistent" and "non- persistent" Data Sets on the client side are automatically deleted. On the server side, however, the "persistent" Data Sets may remain because they could not be explicitly deleted. The static Data Sets are basically also "persistent" Data Sets. They differ from the dynamically generated Data Sets in that they cannot be deleted. For each Data Set that you want to create dynamically at a later time (at runtime), you need an instance of the function block: "FB_Acsi Common Data Set Class". These instances are manually added to the PLC project beforehand during PLC programming. However, they are not yet linked to the client data model. The PLC application can then later use these instances at runtime to create the dynamic Data Sets on the server side. Only then are these instances also linked to the data model on the client side. The Data Set members can also be preconfigured. The method "Create Data Set Req" needs as first parameter: "ip Data Set" an interface pointer to such a preconfigured Data Set object. The second parameter: "ip Logical Node" determines whether a "persistent" or "non-persistent" Data Set should be created. Only the "persistent" Data Sets are linked to a logical node. In this case, this parameter must be valid. For a "non-persistent" Data Set this parameter is zero. On success, a dynamic Data Set is created on the server side and the preconfigured Data Set instance is linked to the data model on the client side. The method "Delete Data Set Req" needs as first parameter: "ip Data Set" an interface pointer to a Data Set object (which was already added to the data model before). If successful, the Data Set is then deleted from the data model on the server side and the link between the Data Set and the data model is also deleted on the client side. Sample project In the zip archive there is an ICD configuration file. This file can be used, for example, to simulate a server using third-party software or to create a new or modified Twin CAT project with Twin CAT Telecontrol Configurator. In the FB_IEDClient function block and State 10, several IF instructions are listed that activate commands (method calls) of the client function block. Each command in the IF statement is activated by a rising edge at one of the Boolean variables. The Boolean variables are defined in the declaration part of the FB_IEDClient function block. For test purposes, the user can set the values of the Boolean variables to "TRUE" in the online view and in this way activate the command execution. After that, the system switches to state 11, where the method "ip Result. Execute()" is called in further PLC cycles until the command processing has been completed. This is the case if "ip Result. Is Busy()" returns FALSE. Following the successful execution of a command, the state machine is set to State 0. If several of the Boolean variables are set to "TRUE", then the topmost IF statement is processed first with the respective command. Some of the Boolean variables are listed in the tables below. In addition, they contain the method names and a description of the function. The sample uses two preconfigured instances of the "FB_Acsi Common Data Set Class" function block. The instance: "fb Non Persistent" to create a "non-persistent" Data Set and the instance: "fb Persistent" to create a "persistent" Data Set. The names of the Data Sets have already been preconfigured to "Non Persistent Data Set" and "Persistent Data Set" in the declaration part using the "s Object Name" property. … fb Non Persistent: FB_Acsi Common Data Set Class:=(s Object Name:='Non Persistent Data Set'); fb Persistent: FB_Acsi Common Data Set Class:=(s Object Name:='Persistent Data Set'); … 656 Version: 1.7.1 TF6510
## Page 657

Examples In the IF statement, just before enabling the "Create Data Set Req" method and if not already done, the Data Set members are added to the Data Sets. However, this can also be outsourced to a separate routine which is called, for example, once at program start. … ELSIF b Create Data Set_Non Persistent THEN b Create Data Set_Non Persistent:= FALSE; IF fb Non Persistent.n Members = 0 THEN b Success:= fb Non Persistent. Add Member(ip Data:=fb IED. IEDLD1. XCBR1. Pos.st Val, e Fc:=E_Acsi Fc. ST_ ); b Success:= fb Non Persistent. Add Member(ip Data:=fb IED. IEDLD1. LLN0. Mod_.st Val, e Fc:=E_Acsi Fc. ST_ ); END_IF b Success:= fb Connection. Create Data Set Req(ip Data Set:=fb Non Persistent, ip Logical Node:=0, h User:=0, ip Sink:=0, n Invoke ID=>n Invoke ID, ip Result=>ip Result); state:= SEL(b Success, 100, 11); ELSIF b Create Data Set_Persistent THEN b Create Data Set_Persistent:= FALSE; IF fb Persistent.n Members = 0 THEN b Success:= fb Persistent. Add Member(ip Data:=fb IED. IEDLD1. MMXU1. Tot W.mag.f, e Fc:=E_Acsi Fc. MX); b Success:= fb Persistent. Add Member(ip Data:=fb IED. IEDLD1. LLN0. Beh.st Val, e Fc:=E_Acsi Fc. ST_); END_IF b Success:= fb Connection. Create Data Set Req(ip Data Set:=fb Persistent, ip Logical Node:=fb IED. IEDLD1. LL N0, h User:=0, ip Sink:=0, n Invoke ID=>n Invoke ID, ip Result=>ip Result); state:= SEL(b Success, 100, 11); … TF6510 Version: 1.7.1 657
## Page 658

Examples Variable name Method name Description b Create Data Set_N Create Data Set Req A rising edge at this variable enables the command to create a on Persistent dynamic "non-persistent" Data Set with the name: "Non Persistent Data Set" (object reference: '@Non Persistent'). b Create Data Set_Pe Create Data Set Req A rising edge at this variable enables the command to create a rsistent dynamic "persistent" Data Set with the name: "Persistent Data Set" (object reference: 'IEDLD1/LLN0. Persistent Data Set'). On success, the new Data Set is associated with the logical node "LLN0". b Delete Data Set_No Delete Data Set Req A rising edge at this variable enables the command to delete a n Persistent dynamic "non-persistent" Data Set with the name: "Non Persistent Data Set". b Delete Data Set_Pe Delete Data Set Req A rising edge at this variable enables the command to delete a rsistent dynamic "persistent" Data Set with the name: "Persistent Data Set". b Enable_urcb101_ urcb101. Client. Ena A rising edge at this variable enables the report control block Non Persistent ble Req instance for unbuffered reports: "urcb101". The reports should transfer the Data Set members of the previously dynamically created "non-persistent" Data Set: "fb Non Persistent". Internally, the attribute "Dat Set" of the report control block is set accordingly (the string references the dynamically created Data Set). b Enable_urcb101_ urcb101. Client. Ena A rising edge at this variable enables the report control block Persistent ble Req instance for unbuffered reports "urcb101". The reports should transfer the Data Set members of the previously dynamically created "persistent" Data Set: "fb Persistent". Internally, the attribute "Dat Set" of the report control block is set accordingly (the string references the dynamically created Data Set). b Enable_urcb101_ urcb101. Client. Ena A rising edge at this variable enables the report control block DS1 ble Req instance for unbuffered reports "urcb101". The reports should transfer the Data Set members of the static Data Set: "DS1". Internally, the attribute "Dat Set" of the report control block is set accordingly (the string references the static Data Set). b Disable_urcb101 urcb101. Client. Disa A rising edge at this variable disables the report control block ble Req instance for unbuffered reports "urcb101". The transmission of the reports is then stopped. b Set Data Values_ur Set Data Values Req As long as "Dat Set" references a dynamically created Data Set, cb101_Dat Set this Data Set cannot be deleted again. To be able to delete a dynamically created Data Set, it must not be used by any control block and must not be referenced by the "Dat Set". A rising edge at this variable describes the attribute value: "IEDLD1/ LLN0. RP.urcb101. Dat Set" with an empty string. b Get Data Set Directo Get Data Set Director A rising edge at this variable enables the command to read the ry_Non Persistent y Req Data Set member configuration of the previously dynamically created "non-persistent" Data Set: "fb Non Persistent". The Data Set members are enumerated. b Get Data Set Directo Get Data Set Director A rising edge at this variable enables the command to read the ry_Persistent y Req Data Set member configuration of the previously dynamically created "persistent" Data Set: "fb Persistent". The Data Set members are enumerated. b Get Data Set Directo Get Data Set Director A rising edge at this variable enables the command to read the ry_DS1 y Req Data Set member configuration of the static Data Set: "DS1". The Data Set members are enumerated. Small test After the program start, when the connection to the server is established, first write the value TRUE into the Boolean variable: "b Create Data Set_Non Persistent". On success, a new dynamic "non-persistent" Data Set is created. This Data Set can then be used by the report control block instance for unbuffered reports. If you write the value TRUE in the variable "b Enable_urcb101_Non Persistent" then you enable the sending of the reports with the "non-persistent" Data Set member data. Stop sending the reports by writing the value TRUE in the variable: "b Disable_urcb101". However, the dynamic "non-persistent" Data Set is still used by the 658 Version: 1.7.1 TF6510
## Page 659

Examples attribute: "Dat Set" of the report control block instance "urcb101" and cannot be deleted yet. Write the value TRUE into the Boolean variable "b Set Data Values_urcb101_Dat Set". Now the dynamic "non-persistent" Data Set can be deleted. Set the value TRUE in the variable: "b Delete Data Set_Non Persistent". 7.15 General Server - Project structure All sample Server projects also follow a general structure, similar to the sample Client projects. In contrast to the client, the connection at the server is not actively established on the server side. After the program start, the server waits for a connection request from a client and accepts or rejects it. In addition, it must be possible for the server to establish connections to multiple clients. This results in a different server project structure than for the client. The basic structure of the Twin CAT IEC 61850 Server sample projects is based on the PLC project structure automatically generated by the Twin CAT Telecontrol Configurator. The Twin CAT Telecontrol Configurator in turn uses the "Twin CAT XAE Project (XML format)" as a template when generating the solution. The data models communicated in the samples reflect different IEC 61850 servers. They differ from sample to sample and are enclosed with the source code as ICD files. The ICD files can also be used by third-party software for simulation purposes. Structure of a Twin CAT IEC 61850 PLC Server project: The generated solution name (unless specified otherwise) corresponds to the Twin CAT Telecontrol Configurator project name. The automatically generated Twin CAT PLC project name (unless specified otherwise) on the other hand has the following structure: "[Project name]_[IEDName]_Server". As standard, every sample project has a "DUTs", a "GVLs" and a "POUs" folder. A Global Variable List (GVL) with the name "Tc Telecontrol" is stored in the "GVLs" folder. The following function blocks are instantiated and initialized in this Global Variable List (see source code below): • A server function block instance of the type: "FB_iec61850Server Class" (server configuration settings and connection management). • At least one instance of the server session function block of the type: "FB_[IEDName]Server Session[1..n]" (connection management of a single connection and data exchange with a client). At this point, manually add additional instances of the Server Session function block if you want the server to communicate simultaneously with more than one client. • An IED data model function block instance of the type: "FB_IED_[IEDName]". • Optional (depending on the GOOSE publisher configuration): one or more function block instances of the type: "FB_[IEDName]Gse" for GOOSE communication and GSE management. In addition, the code version used during code generation and the version of the Twin CAT Telecontrol Configurator used are also stored there. Namespace: Tc Telecontrol Type: Global Variable List (GVL) VAR_GLOBAL ip Creator : I_Acsi Code Creator Class := GVL_Acsi Vars. Creator. Set Code Rev(code Rev:=2 ). Set Gui Ver(major:=1, minor:=1, build:=94, revision:=1); fb[IEDName] : FB_IED_[IEDName]; fb[IEDName]Server : FB_iec61850Server Class := (ip IED:=fb[IEDName], settings:=(b Enable:=T TF6510 Version: 1.7.1 659
## Page 660

Examples RUE, s Local Host:='127.0.0.1')); fb[IEDName]Server Session1 : FB_[IEDName]Server Session := (fb Connection:=(ip Server:=fb[IEDName]Se rver, settings:=(b Enable:=TRUE))); fb[IEDName]Gse : FB_[IEDName]Gse := (fb Adapter:=(ip IED:=fb[IEDName], settings:=(s Mult icast Addr:='01-0C-CD-01-00-00', e Dispatch Mode:=E_Gse Dispatch Mode. Non Promiscuous))); END_VAR In the "POUs" folder there is a further folder: "[IEDName]", which contains the entire hierarchical structure of the IED data model as function blocks. This folder also contains the IED data model function block that is instantiated in the Global Variable List and that has already been mentioned. The server session function block: "FB_[IEDName]Server Session", which implements the establishment of the connection and the data exchange with an IEC 61850 Client, is located on the same level. The Twin CAT PLC project contains a "MAIN" program as standard. This is called cyclically by a Twin CAT task and in turn calls the program "P_IEC61850MAIN". The program "P_IEC61850MAIN" encapsulates the call of the server, server session and the optional Gse function block, separates the IEC 61850 communication from the rest of the PLC machine program. PROGRAM MAIN VAR END_VAR P_IEC61850MAIN(); PROGRAM P_IEC61850MAIN VAR END_VAR fb[IEDName]Server. Execute(); fb[IEDName]Server Session1(); fb[IEDName]Gse(); In the FB_[IEDName]Server Session function block, there is a state machine, the basic states of which are used in every server sample (see source code below). The server session function block is responsible for establishing connections and exchanging data with a single client. If there are multiple simultaneous client connections, multiple instances of this function block are required and instantiated. State 0 (Init state): the state machine is in this state as soon as the PLC program has been started. Commands for the management of a client-server connection are handled here (and in State 1). Normally, the server session function block remains in this state and waits for a connection request from a client. The server then establishes a connection as soon as the connection request is detected. This happens automatically and does not require any further commands from the PLC application. If the server has established a connection to the client, the state machine switches to the data transmission state (State 10). It is also possible to close an already established connection. This is controlled via two Boolean variables. When set, these variables enable the corresponding commands (in this case these are once-only method calls on the server session function block). • _b Abort: calls the method "Abort Req", which activates the command to abort the server connection to the client. • _b Disconnect: calls the method "Release Req", which activates the command for the controlled release of an existing server connection to the client. As a rule, however, it is the client that should terminate its active connection to the server. The methods listed above require longer than one PLC cycle for their execution. For this reason the state machine switches to a wait state (State 1), in which the termination of the activated command is awaited. State 1 (Wait State): in this state, the server session function block waits until the command processing for the management of the server client connection is no longer busy. As long as the connection is being released or interrupted, the state machine is in State 1. The state machine is reset to State 0 (Init State) as soon as the command has been successfully executed. State 10 (Data exchange): if the state machine is in this state, then the server connection to the client has already been successfully established. The server session function block is ready for data transmission to the server. The server data transmission to the client takes place automatically in the background and does not have to be initiated by the PLC application. It is the client that triggers a data transmission in the server by a request. The state machine switches between states 0 and 10 when there is an active connection. The state machine is reset to State 0 in order to react to changes in the client-server connection status and to handle them in State 0. 660 Version: 1.7.1 TF6510
## Page 661

Examples State 100 (Error state): as soon as an error occurs during the activation or processing of a command, the state machine is set to State 100. The error is logged here and the state machine reset to State 0. FUNCTION_BLOCK FB_[IEDName]Server Session VAR_INPUT fb Connection : FB_iec61850Connection Class := (ip Abort Ind:=THIS^, ip Associate Ind:=THIS^, ip Re lease Ind:=THIS^); END_VAR VAR _b Abort : BOOL; _b Disconnect : BOOL; state : BYTE; e State : E_Async Environment State; b Busy : BOOL; b Success : BOOL; ip Result : I_Async Service Result Class; s Last Error Result : T_Max String; fb Abort Reason : FB_Service Error Class := (st Error:=SUCCESS_EVENT); s Last Abort Reason : T_Max String; END_VAR fb Connection. Execute(); e State:= fb Connection.e State; CASE state OF 0: IF _b Abort THEN _b Abort:= FALSE; b Success:= fb Connection. Abort Req(ip Reason:=fb Abort Reason, ip Sink:=0, ip Result=>ip Result) ; state:= SEL(b Success, 100, 1); ELSIF e State = E_Async Environment State. Established AND _b Disconnect THEN _b Disconnect:= FALSE; b Success:= fb Connection. Release Req(ip Sink:=0, ip Result=>ip Result); state:= SEL(b Success, 100, 1); ELSIF e State = E_Async Environment State. Established THEN state:= 10; END_IF _b Disconnect:= FALSE; 1: IF ip Result <> 0 THEN ip Result. Execute(); IF NOT (b Busy:=ip Result. Is Busy()) THEN state:= SEL(ip Result. Is Completed(), 100, 0); END_IF END_IF 10: state:= 0; 100: state:= 0; IF ip Result <> 0 THEN s Last Error Result:= ip Result. Dump(); END_IF END_CASE GOOSE Publisher (optional) Twin CAT Telecontrol Configurator can also generate the PLC code for a GOOSE publisher in a server project during PLC code generation (see code sample below). However, this is only possible if the user has previously created the GOOSE components such as Go CBs (goose control blocks) in the Twin CAT Telecontrol Configurator or imported them from an SCL file (e.g. ICD file). By default, a function block with the name: "FB_[IEDName]Gse" is instantiated during code generation and added to the Global Variable List "Tc Telecontrol". This function block establishes the connection between a network adapter of the Twin CAT control computer, the IED data model and the GOOSE configuration in the Go CBs. The Go CBs are instantiated in the IED data model (usually in LLN0). Each Go CB has a function block subelement with the name: "Publisher". The "Publisher" method calls can be used to start or stop publishing from the PLC code. By default, publishing is started at PLC program start for all Go CBs. This is controlled by the "b Start" variable initialized with "TRUE". Publishing can be stopped for all Go CBs via a rising edge at the "b Stop" variable. Publisher commands issued through these methods are executed immediately, without wait cycles or further states required to complete command processing. The "Publisher" described here reads the configuration and does update the status of the Go CB (attribute "Go Ena" is set to "TRUE" or "FALSE", for example), but it does not use the client-server services such as "Set Go CBValues" or "Get Go CBValues" to start or stop the Publisher. This means that the generated code already implements a publisher that can be started or stopped, for example, in the first PLC cycle or from the PLC code at any time. The required Go CB configuration settings (Go CB attribute values) can be made via initialization values. However, the Go CBs TF6510 Version: 1.7.1 661
## Page 662

Examples can already be configured in the Twin CAT Telecontrol Configurator. The initialization values are then automatically generated and assigned during code generation. If the Publisher has been started and the configuration of the Go CB and the network adapter shows a match, then the Publisher immediately starts sending the first GOOSE frames (including frame repetitions). The "Update" method has a special significance. Every time it is called, the "Publisher" immediately sends a new GOOSE frame (and automatically new frame repetitions). This means that the application can set all relevant GOOSE dataset data in the IED data model first and then initiate the sending of the changed dataset data with the "Update" method call. The "Execute" method must be called cyclically the rest of the time. It is responsible for sending the frame repetitions and updating the status information in the Go CB. FUNCTION_BLOCK FB_[IEDName]Gse IMPLEMENTS I_Gse Link Status Event Sink VAR_INPUT fb Adapter : FB_Gse Adapter Class := (ip Link Status:=THIS^); END_VAR VAR e Link Status : E_Gse Link Status; b Success : BOOL; ip Error : I_Service Error Class; b Start : BOOL := TRUE; b Stop : BOOL; b Update : BOOL; END_VAR b Success:= fb Adapter. Execute(ip Error=>ip Error); IF b Start THEN b Start:= FALSE; b Success:= fb[IEDName]. IEDLD1. LLN0.gocb01. Publisher. Start(ip Adapter:=fb Adapter, ip Error=>ip Error ); b Success:= fb[IEDName]. IEDLD1. LLN0.gocb02. Publisher. Start(ip Adapter:=fb Adapter, ip Error=>ip Error ); b Success:= fb[IEDName]. IEDLD1. LLN0.gocb03. Publisher. Start(ip Adapter:=fb Adapter, ip Error=>ip Error ); ELSIF b Stop THEN b Stop:= FALSE; b Success:= fb[IEDName]. IEDLD1. LLN0.gocb01. Publisher. Stop(ip Error=>ip Error); b Success:= fb[IEDName]. IEDLD1. LLN0.gocb02. Publisher. Stop(ip Error=>ip Error); b Success:= fb[IEDName]. IEDLD1. LLN0.gocb03. Publisher. Stop(ip Error=>ip Error); ELSIF b Update THEN b Update:= FALSE; b Success:= fb[IEDName]. IEDLD1. LLN0.gocb01. Publisher. Update(ip Error=>ip Error); b Success:= fb[IEDName]. IEDLD1. LLN0.gocb02. Publisher. Update(ip Error=>ip Error); b Success:= fb[IEDName]. IEDLD1. LLN0.gocb03. Publisher. Update(ip Error=>ip Error); ELSE b Success:= fb[IEDName]. IEDLD1. LLN0.gocb01. Publisher. Execute(ip Error=>ip Error); b Success:= fb[IEDName]. IEDLD1. LLN0.gocb02. Publisher. Execute(ip Error=>ip Error); b Success:= fb[IEDName]. IEDLD1. LLN0.gocb03. Publisher. Execute(ip Error=>ip Error); END_IF The GSE block implements the "I_Gse Link Status Event Sink" interface. The method: "On Link Status Change" belongs to this interface implementation and is called whenever the status of the network connection (at the network adapter) changes. The PLC application can, for example, query or check the network connection status via "e Link Status" variable. METHOD On Link Status Change VAR_INPUT ip Adapter : I_Gse Adapter Class; e Status : E_Gse Link Status; END_VAR VAR END_VAR e Link Status:= e Status; In the project tree under the I/O-Device branch you will find a network adapter instance named "GSE (RT Ethernet adapter)". This adapter instance must be configured accordingly, i.e. the I/O configuration must be adapted to the existing hardware and to the target platform on which the project is to run. A new I/O configuration is also necessary if you change the target platform. This configuration must be done manually in Twin CAT XAE. In addition to the I/O configuration of the network adapter, a link must be established between the network adapter and the PLC function blocks for Goose communication. The link can be used to forward the data received from the network adapter to the instance of the function block: "FB_[IEDName]Gse". In the opposite direction the instance of the function block "FB_[IEDName]Gse" can forward the data to be sent to the network adapter. Here you can find more information: RT Ethernet adapter Configuration [} 38]. 662 Version: 1.7.1 TF6510
## Page 663

Examples 7.16 Server - Base Sample Project This example shows the basic Twin CAT implementation of the Client-Server communication of a Twin CAT IEC 61850 Server. The GOOSE components and reporting are not included in this example in the interests of simplicity. These and other functionalities are covered in separate examples. The Server implemented here has a default host address: "127.0.0.1" and a default port number: 102. These values can be adapted in the PLC sample code. The PLC development environment will output a warning with a note about this when translating. Double-clicking on this message will take you to the corresponding location in the PLC code. Download Twin CAT XAE Project (*.zip): https://infosys.beckhoff.com/content/1033/TF6510_TC3_IEC61850/ Resources/10698184715.zip The example described here uses the state machine that is described in the "General Server project structure [} 659]" chapter. The States 0, 1, 10 and 100 are identical to the state machine described there. Other states were modified for the example or new states were also added. 7.17 Server – GOOSE Publisher (Get Go CBData Values, Set Go CBData Values) In this example, the GOOSE control block can be controlled by Clients using the Get Go CBData Values and Set Go CBData Values services. Download Twin CAT XAE Project (*.zip): https://infosys.beckhoff.com/content/1033/TF6510_TC3_IEC61850/ Resources/10698177035.zip The example described here uses the state machine that is described in the "General Server project structure [} 659]" chapter. The States 0, 1, 10 and 100 are identical to the state machine described there. Other states were modified for the example or new states were also added. In the project tree under the I/O-Device branch you will find a network adapter instance named "GSE (RT Ethernet adapter)". This adapter instance must be configured accordingly, i.e. the I/O configuration must be adapted to the existing hardware and to the target platform on which the project is to run. A new I/O configuration is also necessary if you change the target platform. This configuration must be done manually in Twin CAT XAE. In addition to the I/O configuration of the network adapter, a link must be established between the network adapter and the PLC function blocks for Goose communication. The link can be used to forward the data received from the network adapter to the instance of the function block: "FB_[IEDName]Gse". In the opposite direction the instance of the function block "FB_[IEDName]Gse" can forward the data to be sent to the network adapter. Here you can find more information: RT Ethernet adapter Configuration [} 38]. 7.18 Server - GOOSE Publisher (without Client-Server communication) In a Server project, the Twin CAT Telecontrol Configurator also generates a Server block and one or more instances of the Server session block by default (see: "General Server project structure" [} 659]). The Server and Server Session block can, for example, ensure that the Publisher can be activated/deactivated from the Client via Client-Server services such as "Get Go CBData Values" or "Set Go CBData Values" or that the Go CBs can be configured. In some cases, however, Client-Server communication with the device should be omitted and only a "pure" GOOSE Publisher should be implemented. Such a Publisher can automatically start sending GOOSE messages after the PLC program start. This example shows the implementation of a Publisher, but without the Client-Server communication part. The parts of the Server project that are not needed have been deliberately removed in this example. Download Twin CAT XAE Project (*.zip): https://infosys.beckhoff.com/content/1033/TF6510_TC3_IEC61850/ Resources/7280992907.zip Namespace: Tc Telecontrol Type: Global Variable List (GVL) TF6510 Version: 1.7.1 663
## Page 664

Examples In the Global Variable List, an IED data model function block instance ("fb IED") and one or more GSE function block instances for GOOSE communication and GSE management ("fb IEDGse") are required. This sample uses only one network adapter for GOOSE communication and three Go CBs in the IED data model. VAR_GLOBAL ip Creator : I_Acsi Code Creator Class := GVL_Acsi Vars. Creator. Set Code Rev(code Rev:=2). Set Gui Ver(majo r:=1, minor:=0, build:=93, revision:=10); fb IED : FB_IED_IED; fb IEDGse : FB_IEDGse := (fb Adapter:=(ip IED:=fb IED, settings:=(s Multicast Addr:='01-0C- CD-01-00-01', e Dispatch Mode:=E_Gse Dispatch Mode. Non Promiscuous))); END_VAR The "MAIN" program is called cyclically by a Twin CAT task and only needs to call the "P_IEC61850MAIN" program. "P_IEC61850MAIN" in turn calls the GSE function block responsible for sending the GOOSE messages and mapping the received data from the IED data model in the GOOSE messages. PROGRAM MAIN VAR END_VAR P_IEC61850MAIN(); PROGRAM P_IEC61850MAIN VAR END_VAR fb IEDGse(); In the sample implementation of the GSE function block, the Publishing process is automatically started for all three Go CBs after PLC startup. A rising edge at the "b Stop" variable stops the Publishing process of the Go CBs. The value changes of some GOOSE data are simulated in the sample. Every 5 s, some values of the Go CB Data Set members are modified and a rising edge is generated at the variable "b Update". This rising edge causes the Publishers to generate and send a new GOOSE message. The PLC application does not have to take care of the GOOSE message repetitions. This is done automatically. FUNCTION_BLOCK FB_IEDGse IMPLEMENTS I_Gse System Clock Event Sink, I_Gse Link Status Event Sink VAR_INPUT fb Adapter : FB_Gse Adapter Class := (ip System Clock:=THIS^, ip Link Status:=THIS^); END_VAR VAR e Link Status : E_Gse Link Status; b Success : BOOL; ip Error : I_Service Error Class; b Start : BOOL := TRUE; b Stop : BOOL; b Update : BOOL; b Simulation : BOOL := TRUE; t Simulation : TIME := T#5S; fb Update Timer : TON; b Sync : BOOL := TRUE; t Sync : T_Utc Time := String_TO_Utc Time(in:='UT#2019-07-12-12:00:00.000000000|000|3'); fb Clock : FB_Gse System Clock; END_VAR fb Update Timer(IN:=b Simulation, PT:=t Simulation); IF fb Update Timer. Q THEN fb Update Timer(IN:=FALSE); fb Update Timer(IN:=b Simulation); fb IED. IEDLD1. LEDGGIO1. SPCSO1.st Val.b Value:= NOT fb IED. IEDLD1. LEDGGIO1. SPCSO1.st Val.b Value; fb IED. IEDLD1. LEDGGIO2. SPCSO1.st Val.b Value:= NOT fb IED. IEDLD1. LEDGGIO2. SPCSO1.st Val.b Value; fb IED. IEDLD1. LEDGGIO3. SPCSO1.st Val.b Value:= NOT fb IED. IEDLD1. LEDGGIO3. SPCSO1.st Val.b Value; fb IED. IEDLD1. LEDGGIO4. SPCSO1.st Val.b Value:= NOT fb IED. IEDLD1. LEDGGIO4. SPCSO1.st Val.b Value; fb IED. IEDLD1. LEDGGIO5. SPCSO1.st Val.b Value:= NOT fb IED. IEDLD1. LEDGGIO5. SPCSO1.st Val.b Value; fb IED. IEDLD1. LEDGGIO6. SPCSO1.st Val.b Value:= NOT fb IED. IEDLD1. LEDGGIO6. SPCSO1.st Val.b Value; fb IED. IEDLD1. LEDGGIO7. SPCSO1.st Val.b Value:= NOT fb IED. IEDLD1. LEDGGIO7. SPCSO1.st Val.b Value; fb IED. IEDLD1. LEDGGIO8. SPCSO1.st Val.b Value:= NOT fb IED. IEDLD1. LEDGGIO8. SPCSO1.st Val.b Value; fb IED. IEDLD1. MMXU1. Tot W.mag.f.f Value:= fb IED. IEDLD1. MMXU1. Tot W.mag.f.f Value + 0.1; IF fb IED. IEDLD1. XCBR1. Pos.st Val.e Value = E_Acsi Dbpos. On THEN fb IED. IEDLD1. XCBR1. Pos.st Val.e Value:= E_Acsi Dbpos. Off; ELSE fb IED. IEDLD1. XCBR1. Pos.st Val.e Value:= E_Acsi Dbpos. On; END_IF fb IED. IEDLD1. XCBR1. Pos.q. Old Data:= NOT fb IED. IEDLD1. XCBR1. Pos.q. Old Data; fb IED. IEDLD1. XCBR1. Pos.t. Second Since Epoch:= fb IED. IEDLD1. XCBR1. Pos.t. Second Since Epoch + TIME#1S; 664 Version: 1.7.1 TF6510
## Page 665

Examples b Update:= TRUE; END_IF IF b Sync THEN b Sync:= FALSE; b Success:= fb Clock. Set To Utc Time(in:=t Sync); ELSE fb Clock. Execute(); END_IF b Success:= fb Adapter. Execute(ip Error=>ip Error); IF b Start THEN b Start:= FALSE; b Success:= fb IED. IEDLD1. LLN0.gocb01. Publisher. Start(ip Adapter:=fb Adapter, ip Error=>ip Error); b Success:= fb IED. IEDLD1. LLN0.gocb02. Publisher. Start(ip Adapter:=fb Adapter, ip Error=>ip Error); b Success:= fb IED. IEDLD1. LLN0.gocb03. Publisher. Start(ip Adapter:=fb Adapter, ip Error=>ip Error); ELSIF b Stop THEN b Stop:= FALSE; b Success:= fb IED. IEDLD1. LLN0.gocb01. Publisher. Stop(ip Error=>ip Error); b Success:= fb IED. IEDLD1. LLN0.gocb02. Publisher. Stop(ip Error=>ip Error); b Success:= fb IED. IEDLD1. LLN0.gocb03. Publisher. Stop(ip Error=>ip Error); ELSIF b Update THEN b Update:= FALSE; b Success:= fb IED. IEDLD1. LLN0.gocb01. Publisher. Update(ip Error=>ip Error); b Success:= fb IED. IEDLD1. LLN0.gocb02. Publisher. Update(ip Error=>ip Error); b Success:= fb IED. IEDLD1. LLN0.gocb03. Publisher. Update(ip Error=>ip Error); ELSE b Success:= fb IED. IEDLD1. LLN0.gocb01. Publisher. Execute(ip Error=>ip Error); b Success:= fb IED. IEDLD1. LLN0.gocb02. Publisher. Execute(ip Error=>ip Error); b Success:= fb IED. IEDLD1. LLN0.gocb03. Publisher. Execute(ip Error=>ip Error); END_IF The GSE function block implements the "I_Gse System Clock Event Sink" interface. The method: "On Get System Time" belongs to this interface implementation and is called whenever a Publisher needs a new time stamp for a GOOSE message. For example, the PLC application could transfer its own time stamp, perhaps from a GPS clock, to the GOOSE message. In the sample, a simple software demo clock is used for time stamping. METHOD On Get System Time : BOOL VAR_INPUT ip Adapter : I_Gse Adapter Class; END_VAR VAR_OUTPUT t T : T_Utc Time; END_VAR VAR END_VAR On Get System Time:= fb Clock. On Get System Time(ip Adapter:=ip Adapter, t T=>t T); The GSE block implements the "I_Gse Link Status Event Sink" interface. The method: "On Link Status Change" belongs to this interface implementation and is called whenever the status of the network connection (at the network adapter) changes. The PLC application can, for example, query or check the network connection status via "e Link Status" variable. METHOD On Link Status Change VAR_INPUT ip Adapter : I_Gse Adapter Class; e Status : E_Gse Link Status; END_VAR VAR END_VAR e Link Status:= e Status; In the project tree under the I/O-Device branch you will find a network adapter instance named "GSE (RT Ethernet adapter)". This adapter instance must be configured accordingly, i.e. the I/O configuration must be adapted to the existing hardware and to the target platform on which the project is to run. A new I/O configuration is also necessary if you change the target platform. This configuration must be done manually in Twin CAT XAE. In addition to the I/O configuration of the network adapter, a link must be established between the network adapter and the PLC function blocks for Goose communication. The link can be used to forward the data received from the network adapter to the instance of the function block: "FB_[IEDName]Gse". In the opposite direction the instance of the function block "FB_[IEDName]Gse" can forward the data to be sent to the network adapter. Here you can find more information: RT Ethernet adapter Configuration [} 38]. TF6510 Version: 1.7.1 665
## Page 666

Examples 7.19 Server - Direct Control with normal security This sample shows the implementation of ctl Model := 1 (Direct control with normal security, direct-operate) in a server for the following CDCs: • SPC (controllable single point) • DPC (controllable double point) • APC (controllable analogue process value) • BAC (binary controlled analog process value) • BSC (binary controlled step position information) • ENC (controllable enumerated status) • INC (controllable integer status) • ISC (integer controlled step position information) Download Twin CAT XAE Project (*.zip): https://infosys.beckhoff.com/content/1033/TF6510_TC3_IEC61850/ Resources/10698251403.zip The example described here uses the state machine that is described in the "General Server project structure [} 659]" chapter. The States 0, 1, 10 and 100 are identical to the state machine described there. Other states were modified for the example or new states were also added. A new "FB_Direct Control" function block has been added. The state machine for the control model is implemented in this. In order for this to be executed for a data object, an "FB_Direct Control" instance must be declared as follows in the "VAR_INPUT" part of the function block of the data object to be controlled: fb Control: FB_Direct Control := (ip Ctrl:=THIS^. Add Server Job(ip Event:=fb Control, ip Completion:=fb Contr ol)); Each of these instances has an "Execute" method that must be called every cycle to monitor the control model. In this sample, this is accomplished in the "FB_IEDServer Session" function block. This method contains the state machine and the monitoring for sending "Last Appl Error" messages. In addition to the "Execute" method, the "FB_Direct Control" function block has further methods and properties that are required for the control model. These are explained in the following tables. 666 Version: 1.7.1 TF6510
## Page 667

Examples Methods of the "FB_Direct Control" function block Method name Description _Check Ctl Val In accordance with the controllable CDC of the data object, a check is made to determine whether the value of "ctl Val" to be written is valid. If the value is invalid, a corresponding error code is returned. _Dynamic Test This method performs the dynamic test. Since this is not needed in this sample, a successful result is always returned. A custom dynamic test can be implemented in this method. _Init Initializes the "FB_Direct Control" function block by determining the CDC of the data object to be controlled. _Operative Test This method performs the operational test. The system checks whether the state of the logical node that is superordinate to the data object to be controlled permits control and whether the value to be written is valid. If the test is successful, the address of the client is cached to identify which client triggered the control model. If the test fails, a "Last Appl Error" message is sent to the client. _Reset Resets the cached values for a Direct Control. _Reset Oper Values Resets the values of the "Oper" data attribute to the configured initial values. _Send Last Appl Error Sends a "Last Appl Error" message to the Client. _Set[CDC]Value A method is added for each controllable CDC, as most CDCs use different types, for example, "APC" -> "REAL" and "SPC" -> "BOOL". As the CDCs use different types, each of these methods also has a different input parameter for the value (e.g. ctl Val). This parameter is used to set the value of the data object to be controlled. _Set Value Sets the value of the data object to be controlled according to the value of "ctl Val". Depending on the CDC of the data object, the corresponding "_Set[CDC]Val" method is called for this purpose. _Update Timestamp Value Sets the value of the data attribute "t" of the data object to be controlled to the current system time. Execute The state machine for the control model is implemented in this method. The other methods from this function block are called according to the state machine in this method. On Abort Is called when the server disconnects and stops sending the "Last Appl Error" message. On Completion Wait Event This method is called by the server implementation after each write operation. This determines whether an "Operate" request was received. If this is the case, the server implementation is informed that it must wait until the Direct Control is connected before sending the response to the "Operate" request. On Get VEvent This method is part of the "I_Acsi Data Access Event Class" interface but is not needed for this sample. On Get VPre Event This method is part of the "I_Acsi Data Access Event Class" interface but is not needed for this sample. On Set VEvent This method is part of the "I_Acsi Data Access Event Class" interface but is not needed for this sample. On Set VPre Event This method is part of the "I_Acsi Data Access Event Class" interface and is called before each write access to the data object to be controlled. This functionality is used to prevent the "Oper" structure from being overwritten, for example, by another client, during a control operation. TF6510 Version: 1.7.1 667
## Page 668

Examples Properties of the "FB_Direct Control" function block Property name Description e Type Specifies the controllable CDC (e.g. "APC"). ip Beh Val Interface pointer to the value of the "Beh" data object of the logical node that is superordinate to the data object to be controlled. ip Ctrl Interface pointer to the data object to be controlled. ip Step Size Optional interface pointer to the "step Size" data attribute. This can be used for setting the value of a "BAC" data object. The state machine shown in the figure below, which is implemented in the "Execute" method of the "FB_Direct Control" function block, is used for the Direct Control process. The transitions between the individual states are controlled by Boolean variables. In addition, the Boolean variable "b New State" is used to detect new states and implement the corresponding behavior when the state changes. Since there may be several PLC cycles between receiving the "Operate" request and executing it, the server application must be told how long it must wait before sending a response. An instance of the "FB_Acsi Service Result Class" function block called "fb Completion" is used for this. When an "Operate" request is received, it is set to the "Busy" state in the "On Completion Wait Event" method and transferred to the Server application as an interface pointer. This now waits until "fb Completion" is in the "Completed" state 668 Version: 1.7.1 TF6510
## Page 669

Examples and then sends the response to the "Operate" request. If the "Operate" request is to be rejected directly, this is done in the "On Set VPre Event" method. The process of an "Operate" request is shown in the following figure. This is just an example of the implementation of the Direct Control function in the Twin CAT PLC. 7.20 Server - Direct Control with enhanced security This sample shows the implementation of ctl Model := 3 (Direct control with enhanced security, direct- operate) in a server for the following CDCs: • SPC (controllable single point) • DPC (controllable double point) • APC (controllable analogue process value) • BAC (binary controlled analog process value) • BSC (binary controlled step position information) • ENC (controllable enumerated status) • INC (controllable integer status) • ISC (integer controlled step position information) Download Twin CAT XAE Project (*.zip): https://infosys.beckhoff.com/content/1033/TF6510_TC3_IEC61850/ Resources/10698256779.zip The example described here uses the state machine that is described in the "General Server project structure [} 659]" chapter. The States 0, 1, 10 and 100 are identical to the state machine described there. Other states were modified for the example or new states were also added. A new "FB_Direct Control" function block has been added. The state machine for the control model is implemented in this. In order for this to be executed for a data object, an "FB_Direct Control" instance must be declared as follows in the "VAR_INPUT" part of the function block of the data object to be controlled: fb Control: FB_Direct Control := (ip Ctrl:=THIS^. Add Server Job(ip Event:=fb Control, ip Completion:=fb Contr ol)); Each of these instances has an "Execute" method that must be called every cycle to monitor the control model. In this sample, this is accomplished in the "FB_IEDServer Session" function block. This method contains the state machine and the monitoring for sending "Last Appl Error" and "Command Termination" messages. In addition to the "Execute" method, the "FB_Direct Control" function block has further methods and properties that are required for the control model. These are explained in the following tables. TF6510 Version: 1.7.1 669
## Page 670

Examples Methods of the "FB_Direct Control" function block Method name Description _Check Ctl Val In accordance with the controllable CDC of the data object, a check is made to determine whether the value of "ctl Val" to be written is valid. If the value is invalid, a corresponding error code is returned. _Dynamic Test This method performs the dynamic test. Since this is not needed in this sample, a successful result is always returned. A custom dynamic test can be implemented in this method. _Init Initializes the "FB_Direct Control" function block by determining the CDC of the data object to be controlled. _Operative Test This method performs the operational test. The system checks whether the state of the logical node that is superordinate to the data object to be controlled permits control and whether the value to be written is valid. If the test is successful, the address of the client is cached to identify which client triggered the control model. If the test fails, a "Last Appl Error" message is sent to the client. _Reset Resets the cached values for a Direct Control. _Reset Oper Values Resets the values of the "Oper" data attribute to the configured initial values. _Send Command Termination Req Sends a negative "Command Termination" request to the client. Neg _Send Command Termination Req Sends a positive "Command Termination" request to the client. Pos _Send Last Appl Error Sends a "Last Appl Error" message to the Client. _Set[CDC]Value A method is added for each controllable CDC, as most CDCs use different types, for example, "APC" -> "REAL" and "SPC" -> "BOOL". As the CDCs use different types, each of these methods also has a different input parameter for the value (e.g. ctl Val). This parameter is used to set the value of the data object to be controlled. _Set Value Sets the value of the data object to be controlled according to the value of "ctl Val". Depending on the CDC of the data object, the corresponding "_Set[CDC]Val" method is called for this purpose. _Update Timestamp Value Sets the value of the data attribute "t" of the data object to be controlled to the current system time. Execute The state machine for the control model is implemented in this method. The other methods from this function block are called according to the state machine in this method. On Abort Is called when the server disconnects and stops sending the "Last Appl Error" and "Command Termination" message. On Completion Wait Event This method is called by the server implementation after each write operation. This determines whether an "Operate" request was received. If this is the case, the server implementation is informed that it must wait until the Direct Control is connected before sending the response to the "Operate" request. On Get VEvent This method is part of the "I_Acsi Data Access Event Class" interface but is not needed for this sample. On Get VPre Event This method is part of the "I_Acsi Data Access Event Class" interface but is not needed for this sample. On Set VEvent This method is part of the "I_Acsi Data Access Event Class" interface but is not needed for this sample. On Set VPre Event This method is part of the "I_Acsi Data Access Event Class" interface and is called before each write access to the data object to be controlled. This functionality is used to prevent the "Oper" structure from being overwritten, for example, by another client, during a control operation. 670 Version: 1.7.1 TF6510
## Page 671

Examples Properties of the "FB_Direct Control" function block Property name Description e Type Specifies the controllable CDC (e.g. "APC"). ip Beh Val Interface pointer to the value of the "Beh" data object of the logical node that is superordinate to the data object to be controlled. ip Ctrl Interface pointer to the data object to be controlled. ip Step Size Optional interface pointer to the "step Size" data attribute. This can be used for setting the value of a "BAC" data object. The state machine shown in the figure below, which is implemented in the "Execute" method of the "FB_Direct Control" function block, is used for the Direct Control process. The transitions between the individual states are controlled by Boolean variables. In addition, the Boolean variable "b New State" is used to detect new states and implement the corresponding behavior when the state changes. Since there may be several PLC cycles between receiving the "Operate" request and executing it, the server application must be told how long it must wait before sending a response. An instance of the "FB_Acsi Service Result Class" function block called "fb Completion" is used for this. When an "Operate" request is received, it is set to the "Busy" state in the "On Completion Wait Event" method and transferred to the Server application as an interface pointer. This now waits until "fb Completion" is in the "Completed" state and then sends the response to the "Operate" request. If the "Operate" request is to be rejected directly, this is done in the "On Set VPre Event" method. The process of an "Operate" request is shown in the following figure. TF6510 Version: 1.7.1 671
## Page 672

Examples This is just an example of the implementation of the Direct Control function in the Twin CAT PLC. 7.21 Server - SBO Control with normal security This sample shows the implementation of ctl Model := 2 (SBO control with normal security, operate-once or operate-many) in a server for the following CDCs: • SPC (controllable single point) • DPC (controllable double point) • APC (controllable analogue process value) • BAC (binary controlled analog process value) • BSC (binary controlled step position information) • ENC (controllable enumerated status) • INC (controllable integer status) • ISC (integer controlled step position information) Download Twin CAT XAE Project (*.zip): https://infosys.beckhoff.com/content/1033/TF6510_TC3_IEC61850/ Resources/10698254091.zip The example described here uses the state machine that is described in the "General Server project structure [} 659]" chapter. The States 0, 1, 10 and 100 are identical to the state machine described there. Other states were modified for the example or new states were also added. A new "FB_Sbo Control" function block has been added. The state machine for the control model is implemented in this. In order for this to be executed for a data object, an "FB_Sbo Control" instance must be declared as follows in the "VAR_INPUT" part of the function block of the data object to be controlled: fb Control: FB_Sbo Control := (ip Ctrl:=THIS^. Add Server Job(ip Event:=fb Control, ip Completion:=fb Control) ); Each of these instances has an "Execute" method that must be called every cycle to monitor the control model. In this sample, this is accomplished in the "FB_IEDServer Session" function block. This method contains the state machine and the monitoring for sending "Last Appl Error" messages. In addition to the "Execute" method, the "FB_Sbo Control" function block has further methods and properties that are required for the control model. These are explained in the following tables. 672 Version: 1.7.1 TF6510
## Page 673

Examples Methods of the "FB_Sbo Control" function block TF6510 Version: 1.7.1 673
## Page 674

Examples Method name Description _Check Cancel Req Is called when a "Cancel" request is received and checks if it is valid. If this is invalid, a corresponding "Last Appl Error" message is sent. _Check Ctl Val In accordance with the controllable CDC of the data object, a check is made to determine whether the value of "ctl Val" to be written is valid. If the value is invalid, a corresponding error code is returned. _Dynamic Test This method performs the dynamic test. Since this is not needed in this sample, a successful result is always returned. A custom dynamic test can be implemented in this method. _Init Initializes the "FB_Direct Control" function block by determining the CDC of the data object to be controlled. _Operative Test This method performs the operational test. The system checks whether the state of the logical node that is superordinate to the data object to be controlled permits control and whether the value to be written is valid. If the test is successful, the address of the client is cached to identify which client triggered the control model. If the test fails, a "Last Appl Error" message is sent to the client. _Reset Resets the values cached for an SBOControl. _Reset Cancel Values Resets the values of the "Cancel" data attribute to the configured initial values. _Reset Oper Values Resets the values of the "Oper" data attribute to the configured initial values. _Send Last Appl Error Sends a "Last Appl Error" message to the Client. _Set[CDC]Value A method is added for each controllable CDC, as most CDCs use different types, for example, "APC" -> "REAL" and "SPC" -> "BOOL". As the CDCs use different types, each of these methods also has a different input parameter for the value (e.g. ctl Val). This parameter is used to set the value of the data object to be controlled. _Set Value Sets the value of the data object to be controlled according to the value of "ctl Val". Depending on the CDC of the data object, the corresponding "_Set[CDC]Val" method is called for this purpose. _Update Timestamp Value Sets the value of the data attribute "t" of the data object to be controlled to the current system time. Execute The state machine for the control model is implemented in this method. The other methods from this function block are called according to the state machine in this method. On Abort Is called when the server disconnects and stops sending the "Last Appl Error" message. On Completion Wait Event This method is called by the server implementation after each write operation. This determines whether an "Operate" request was received. If this is the case, the server implementation is informed that it must wait until the SBOControl is connected before sending the response to the "Operate" request. On Get VEvent This method is part of the "I_Acsi Data Access Event Class" interface and is called after each read access to the data object to be controlled. This functionality is used to reset the value of the data attribute "SBO" after a "Select" request. On Get VPre Event This method is part of the "I_Acsi Data Access Event Class" interface and is called before each read access to the data object to be controlled. This functionality is used to review "Select" requests and accept or reject them accordingly. On Set VEvent This method is part of the "I_Acsi Data Access Event Class" interface but is not needed for this sample. 674 Version: 1.7.1 TF6510
## Page 675

Examples Method name Description On Set VPre Event This method is part of the "I_Acsi Data Access Event Class" interface and is called before each write access to the data object to be controlled. This functionality is used to prevent overwriting of the "Oper" and "Cancel" structure as well as the "SBO" data attribute during a control operation, for example, by another client. Properties of the "FB_Sbo Control" function block Property name Description e Type Specifies the controllable CDC (e.g. "APC"). ip Beh Val Interface pointer to the value of the "Beh" data object of the logical node that is superordinate to the data object to be controlled. ip Ctrl Interface pointer to the data object to be controlled. ip Step Size Optional interface pointer to the "step Size" data attribute. This can be used for setting the value of a "BAC" data object. The state machine shown in the figure below, which is implemented in the "Execute" method of the "FB_Sbo Control" function block, is used for the SBOControl process. The transitions between the individual states are controlled by Boolean variables. In addition, the Boolean variable "b New State" is used to detect new states and implement the corresponding behavior when the state changes. TF6510 Version: 1.7.1 675
## Page 676

Examples 676 Version: 1.7.1 TF6510
## Page 677

Examples Since a "Select" request is a read request on the "SBO" data attribute, it is checked in the "On Get VPre Event" method. In this method, the "Select" request can be accepted by setting the value of "SBO" to the reference to the "SBO" data attribute. To reject the request, the value is set to an empty string. After sending the response, the "On Get VEvent" method is called, in which the value of the data attribute can be reset. The process of a successful "Select" request is shown in the following figure. Since there may be several PLC cycles between receiving the "Operate" request and executing it, the server application must be told how long it must wait before sending a response. An instance of the "FB_Acsi Service Result Class" function block called "fb Completion" is used for this. When an "Operate" request is received, it is set to the "Busy" state in the "On Completion Wait Event" method and transferred to the Server application as an interface pointer. This now waits until "fb Completion" is in the "Completed" state and then sends the response to the "Operate" request. If the "Operate" request is to be rejected directly, this is done in the "On Set VPre Event" method. The process of an "Operate" request is shown in the following figure. This is just an example of the implementation of the SBOControl function in the Twin CAT PLC. 7.22 Server - SBO Control with enhanced security This sample shows the implementation of ctl Model := 4 (SBO control with enhanced security, operate-once or operate-many) in a server for the following CDCs: • SPC (controllable single point) • DPC (controllable double point) • APC (controllable analogue process value) • BAC (binary controlled analog process value) TF6510 Version: 1.7.1 677
## Page 678

Examples • BSC (binary controlled step position information) • ENC (controllable enumerated status) • INC (controllable integer status) • ISC (integer controlled step position information) Download Twin CAT XAE Project (*.zip): https://infosys.beckhoff.com/content/1033/TF6510_TC3_IEC61850/ Resources/10698259467.zip The example described here uses the state machine that is described in the "General Server project structure [} 659]" chapter. The States 0, 1, 10 and 100 are identical to the state machine described there. Other states were modified for the example or new states were also added. A new "FB_Sbo Control" function block has been added. The state machine for the control model is implemented in this. In order for this to be executed for a data object, an "FB_Sbo Control" instance must be declared as follows in the "VAR_INPUT" part of the function block of the data object to be controlled: fb Control: FB_Sbo Control := (ip Ctrl:=THIS^. Add Server Job(ip Event:=fb Control, ip Completion:=fb Control) ); Each of these instances has an "Execute" method that must be called every cycle to monitor the control model. In this sample, this is accomplished in the "FB_IEDServer Session" function block. This method contains the state machine and the monitoring for sending "Last Appl Error" and "Command Termination" messages. In addition to the "Execute" method, the "FB_Sbo Control" function block has further methods and properties that are required for the control model. These are explained in the following tables. 678 Version: 1.7.1 TF6510
## Page 679

Examples Methods of the "FB_Sbo Control" function block TF6510 Version: 1.7.1 679
## Page 680

Examples Method name Description _Compare Ctl Val Checks whether two values of "ctl Val" are equal in accordance with the controllable CDC of the data object to be controlled. This method is used to check if the "Select With Value" and "Operate" requests contain identical values. _Check Cancel Req Is called when a "Cancel" request is received and checks if it is valid. If this is invalid, a corresponding "Last Appl Error" message is sent. _Check Ctl Val In accordance with the controllable CDC of the data object, a check is made to determine whether the value of "ctl Val" to be written is valid. If the value is invalid, a corresponding error code is returned. _Dynamic Test This method performs the dynamic test. Since this is not needed in this sample, a successful result is always returned. A custom dynamic test can be implemented in this method. _Init Initializes the "FB_Direct Control" function block by determining the CDC of the data object to be controlled. _Operative Test This method performs the operational test. The system checks whether the state of the logical node that is superordinate to the data object to be controlled permits control and whether the value to be written is valid. If the test is successful, the address of the client is cached to identify which client triggered the control model. If the test fails, a "Last Appl Error" message is sent to the client. _Reset Resets the values cached for an SBOControl. _Reset Cancel Values Resets the values of the "Cancel" data attribute to the configured initial values. _Reset SBOw Values Resets the values of the "SBOw" data attribute to the configured initial values. _Reset Oper Values Resets the values of the "Oper" data attribute to the configured initial values. _Send Command Termination Req Sends a negative "Command Termination" request to the client. Neg _Send Command Termination Req Sends a positive "Command Termination" request to the client. Pos _Send Last Appl Error Sends a "Last Appl Error" message to the Client. _Set[CDC]Value A method is added for each controllable CDC, as most CDCs use different types, for example, "APC" -> "REAL" and "SPC" -> "BOOL". As the CDCs use different types, each of these methods also has a different input parameter for the value (e.g. ctl Val). This parameter is used to set the value of the data object to be controlled. _Set Value Sets the value of the data object to be controlled according to the value of "ctl Val". Depending on the CDC of the data object, the corresponding "_Set[CDC]Val" method is called for this purpose. _Test This method perform a test on the data transferred with the "Select With Value" request. The system checks whether the state of the logical node that is superordinate to the data object to be controlled permits control and whether the value to be written is valid. If the test is successful, the address of the client is cached to identify which client triggered the control model. If the test fails, a "Last Appl Error" message is sent to the client. _Update Timestamp Value Sets the value of the data attribute "t" of the data object to be controlled to the current system time. Execute The state machine for the control model is implemented in this method. The other methods from this function block are called according to the state machine in this method. On Abort Is called when the server disconnects and stops sending the "Last Appl Error" message. 680 Version: 1.7.1 TF6510
## Page 681

Examples Method name Description On Completion Wait Event This method is called by the server implementation after each write operation. This determines whether an "Operate" or "Select With Value" request was received. If this is the case, the server implementation is informed that it must wait until the SBOControl is connected before sending the response to the "Operate" or "Select With Value" request. On Get VEvent This method is part of the "I_Acsi Data Access Event Class" interface but is not needed for this sample. On Get VPre Event This method is part of the "I_Acsi Data Access Event Class" interface but is not needed for this sample. On Set VEvent This method is part of the "I_Acsi Data Access Event Class" interface but is not needed for this sample. On Set VPre Event This method is part of the "I_Acsi Data Access Event Class" interface and is called before each write access to the data object to be controlled. This functionality is used to prevent the "Oper", "SBOw" and "Cancel" structure from being overwritten, for example, by another client, during a control operation. Properties of the "FB_Sbo Control" function block Property name Description e Type Specifies the controllable CDC (e.g. "APC"). ip Beh Val Interface pointer to the value of the "Beh" data object of the logical node that is superordinate to the data object to be controlled. ip Ctrl Interface pointer to the data object to be controlled. ip Step Size Optional interface pointer to the "step Size" data attribute. This can be used for setting the value of a "BAC" data object. The state machine shown in the figure below, which is implemented in the "Execute" method of the "FB_Sbo Control" function block, is used for the SBOControl process. The transitions between the individual states are controlled by Boolean variables. In addition, the Boolean variable "b New State" is used to detect new states and implement the corresponding behavior when the state changes. TF6510 Version: 1.7.1 681
## Page 682

Examples Since there may be several PLC cycles between receiving the "Operate" request and executing it, the server application must be told how long it must wait before sending a response. An instance of the "FB_Acsi Service Result Class" function block called "fb Completion" is used for this. When an "Operate" 682 Version: 1.7.1 TF6510
## Page 683

Examples request is received, it is set to the "Busy" state in the "On Completion Wait Event" method and transferred to the Server application as an interface pointer. This now waits until "fb Completion" is in the "Completed" state and then sends the response to the "Operate" request. If the "Operate" request is to be rejected directly, this is done in the "On Set VPre Event" method. The process of an "Operate" request is shown in the following figure. Since the "Select With Value" request is a write request, the same sequence as for "Operate" requests described in the previous paragraph is used to process it. This is just an example of the implementation of the SBOControl function in the Twin CAT PLC. 7.23 Server - User defined timestamp clock source This sample shows the implementation of a user-defined clock/time for time stamping tasks in a Twin CAT IEC 61850 server project. The spontaneous time required by the server can be specified from an external source (e.g. from a GPS clock). Among other things, a current time is required when sending reports. Download Twin CAT XAE Project (*.zip): https://infosys.beckhoff.com/content/1033/TF6510_TC3_IEC61850/ Resources/10698262155.zip The example described here uses the state machine that is described in the "General Server project structure [} 659]" chapter. The States 0, 1, 10 and 100 are identical to the state machine described there. Other states were modified for the example or new states were also added. The Twin CAT IEC 61850 server implementation uses the interface: "I_Scsm System Clock Event Sink" to query the time for time stamping tasks. It is possible to use a custom function block that implements this special interface and configures the server function block to use the new time source. In the Global Variable List "Tc Telecontrol", the new time source is assigned to the server function block by setting the property "ip System Clock:=fb My Clock". The server function block will then call the method: "On Get System Time" each time it needs a new time stamp from it. In our sample, this is the case when reporting is active and a new report is to be sent. For demonstration purposes, the external time source is also queried when the attribute: "IEDLD1/MMXU1. Tot W" or "IEDLD1/MMXU1. Tot W.t" is read by the client. Whenever client reads the data, the method: "On Get VPre Event" of the function block: "FB_DO_IED_LD1_MMXU1_Tot W" is called. In the method implementation the method: "Get System Time(t T=>t T)" is called via the interface pointer: "ip Association". This time request is forwarded to our custom clock. The client-server communication uses time stamps in at least two different formats: UTC time and binary time. For this reason, this method returns the time stamp as output variables in these two formats. VAR_GLOBAL ip Creator: I_Acsi Code Creator Class := GVL_Acsi Vars. Creator. Set Code Rev(code Rev:=3). Set Gui Ver(major :=1, minor:=1, build:=94, revision:=4); TF6510 Version: 1.7.1 683
## Page 684

Examples fb IED: FB_IED_IED; fb My Clock : FB_My Clock; fb IEDServer: FB_iec61850Server Class := (ip IED:=fb IED, ip System Clock:=fb My Clock, settings:=(b Enab le:=TRUE, s Local Host:='127.0.0.1')); fb IEDServer Session1: FB_IEDServer Session := (fb Connection:=(ip Server:=fb IEDServer, settings:=(b E nable:=TRUE))); END_VAR The sample demonstrates a very simple software clock, which was implemented with the help of the RTC_EX function block. FUNCTION_BLOCK FB_My Clock IMPLEMENTS I_Scsm System Clock Event Sink VAR _t T : T_Utc Time:=(second Since Epoch:=DT#2021-04-01-00:00:00, quality:=(Clock Not Synchronized:=TRUE , Clock Failure:=FALSE, Leap Seconds Known:=FALSE), fraction Of Second:=[0,0,0]);(* Actual UTC time. *) _t B : T_Binary Time;(* Actual binary-time (Entry Time) *) clock : RTC_EX:=(EN:=TRUE, PDT:=DT#2021-04-01-00:00:00, PMSEK:=0); refresh Timer : TON:=(IN:=TRUE, PT:=T#1S); END_VAR METHOD FINAL Execute : BOOL VAR_INPUT END_VAR refresh Timer(); IF Execute:=refresh Timer. Q THEN refresh Timer(IN:=FALSE); refresh Timer(IN:=TRUE); Update(); END_IF METHOD FINAL On Get System Time : BOOL VAR_INPUT ip AA: I_Scsm Association Class;(* Application association. If = 0 => optional or unknown. *) END_VAR VAR_OUTPUT t T: T_Utc Time;(* UTC-time. *) t B: T_Binary Time;(* Binary-time *) END_VAR t T:=_t T; t B:=_t B; On Get System Time:=TRUE; METHOD FINAL Set Clock VAR_INPUT t Set : DT;(* New time to set *) END_VAR clock(EN:=FALSE); clock(EN:=TRUE, PDT:=t Set); _t T.quality. Clock Not Synchronized:=FALSE; Update(); METHOD FINAL Update VAR_INPUT END_VAR clock();(* update clock time *) (* convert to utc-time format *) _t T.second Since Epoch:=clock. CDT; _t T.fraction Of Second:=LTIME_TO_Utc Time Fractionof Second(in:=TIME_TO_LTIME(DWORD_TO_TIME(clock. CMSEK)) ); Accuracy_To_Utc Time Quality Accuracy(in:=E_Utc Time Accuracy._03, b Accuracy0=>_t T.quality. Accuracy0, b Ac curacy1=>_t T.quality. Accuracy1, b Accuracy2=>_t T.quality. Accuracy2, b Accuracy3=>_t T.quality. Accuracy3 , b Accuracy4=>_t T.quality. Accuracy4); (* convert to binary-time format *) _t B.day:=Date_To_Binary Time6Day(in:=DT_TO_DATE(clock. CDT)); _t B.time Of Day:=DT_TO_TOD(clock. CDT) + DWORD_TO_TIME(clock. CMSEK); 7.24 Server - Unbuffered Reporting This sample shows the Unbuffered Reporting implementation in a Twin CAT IEC61850 server project. The Ur CBs (unbuffered report control blocks) and Datasets required for reporting can be configured in the Twin CAT Telecontrol Configurator or imported from an existing SCL file (e.g. ICD file). The instances of the Ur CBs and the Datasets are created automatically during code generation (usually below LLN0). The initial values of the Ur CB attributes can already be configured in the Twin CAT Telecontrol Configurator. 684 Version: 1.7.1 TF6510
## Page 685

Examples Download Twin CAT XAE Project (*.zip): https://infosys.beckhoff.com/content/1033/TF6510_TC3_IEC61850/ Resources/10698264843.zip The example described here uses the state machine that is described in the "General Server project structure [} 659]" chapter. The States 0, 1, 10 and 100 are identical to the state machine described there. Other states were modified for the example or new states were also added. The implementation of the unbuffered reporting functionality in a Twin CAT IEC 61850 server project is practically a "black box". This means that the complete functionality is already encapsulated in a function block and the application only has to call this function block. Each Ur CB has such a function block subelement with the name: "Server". The PLC application only has to call the method: "Execute" at the "Server" block cyclically. This method is responsible for sending the reports and updating the status information in the associated Ur CB (see code below). The reports can be configured either on the server side directly on the Ur CB or on the client side via client- server services (Get Ur CBData Values and Set Ur CBData Values). The IED data to be communicated via reporting are defined with the help of the datasets. Multiple data references (Dataset Members) can be configured in a dataset. The sample contains a simple simulation of some Dataset member values. If the variable "b Simulation" is set to TRUE, then the values are modified every 2 seconds. How does the Ur CB Server implementation recognize that a value has been modified and a report is to be generated? This is done through write access to the attribute value (for example: b Value, t Value, i Value, e Value, n Value properties). However, a new report is not generated immediately for each individual write access to an attribute value. This would be undesirable. The "Server" implementation marks the modified dataset members internally as modified. A report is not generated and sent until the "Execute" method is called. Please note that no reports are generated when writing or forcing values in Twin CAT online mode. In this way, the "Server" implementation cannot detect when a value has been modified. Integrity reports and General Interrogation reports are automatically generated and sent in accordance with the configuration on the Ur CB. The sending of these reports does not have to be triggered in a special way in the PLC application. The cyclic call of the server "Execute" method also handles the sending of these reports. The time behavior of the report messages can be configured independently for each Ur CB server instance via two properties "b Replace Buffered MX" and "b Overwrite Same Cycle Changes". For more information on how these properties work, see the description of the sample: Server-Buffered Reporting [} 688]. PROGRAM MAIN VAR b Simulation : BOOL:=TRUE; (* Enables/disables simulation of data update/ change *) t Simulation : TIME:=T#2S; (* Cycle time of simulated data update/change *) fb Timer : TON; t T : T_Utc Time; b Replace Buffered MX : BOOL; (* Toggles b Replace Buffered MX property of urcb201 *) b Overwrite Same Cycle Changes : BOOL; (* Toggles b Overwrite Same Cycle Changes property of urcb301 *) END_VAR P_IEC61850MAIN(); fb IED. IEDLD1. LLN0.urcb201. Server.b Replace Buffered MX:= b Replace Buffered MX; fb IED. IEDLD1. LLN0.urcb301. Server.b Overwrite Same Cycle Changes:= b Overwrite Same Cycle Changes; fb Timer(IN:=b Simulation, PT:=t Simulation); IF fb Timer. Q THEN(* Simulate server data update *) fb Timer(IN:=FALSE); fb Timer(IN:=b Simulation); fb IEDServer. Get System Time(ip AA:=0, t T=>t T); (* Simulate "IEDLD1/LLN0. DS1" member value change *) fb IED. IEDLD1. LEDGGIO1. SPCSO1.t.t Value:= t T; fb IED. IEDLD1. LEDGGIO1. SPCSO1.st Val.b Value:= NOT fb IED. IEDLD1. LEDGGIO1. SPCSO1.st Val.b Value; fb IED. IEDLD1. LEDGGIO2. SPCSO1.t.t Value:= t T; fb IED. IEDLD1. LEDGGIO2. SPCSO1.st Val.b Value:= NOT fb IED. IEDLD1. LEDGGIO2. SPCSO1.st Val.b Value; fb IED. IEDLD1. LEDGGIO3. SPCSO1.t.t Value:= t T; fb IED. IEDLD1. LEDGGIO3. SPCSO1.st Val.b Value:= NOT fb IED. IEDLD1. LEDGGIO3. SPCSO1.st Val.b Value; fb IED. IEDLD1. LEDGGIO4. SPCSO1.t.t Value:= t T; fb IED. IEDLD1. LEDGGIO4. SPCSO1.st Val.b Value:= NOT fb IED. IEDLD1. LEDGGIO4. SPCSO1.st Val.b Value; fb IED. IEDLD1. LEDGGIO5. SPCSO1.t.t Value:= t T; TF6510 Version: 1.7.1 685
## Page 686

Examples fb IED. IEDLD1. LEDGGIO5. SPCSO1.st Val.b Value:= NOT fb IED. IEDLD1. LEDGGIO5. SPCSO1.st Val.b Value; fb IED. IEDLD1. LEDGGIO6. SPCSO1.t.t Value:= t T; fb IED. IEDLD1. LEDGGIO6. SPCSO1.st Val.b Value:= NOT fb IED. IEDLD1. LEDGGIO6. SPCSO1.st Val.b Value; fb IED. IEDLD1. LEDGGIO7. SPCSO1.t.t Value:= t T; fb IED. IEDLD1. LEDGGIO7. SPCSO1.st Val.b Value:= NOT fb IED. IEDLD1. LEDGGIO7. SPCSO1.st Val.b Value; fb IED. IEDLD1. LEDGGIO8. SPCSO1.t.t Value:= t T; fb IED. IEDLD1. LEDGGIO8. SPCSO1.st Val.b Value:= NOT fb IED. IEDLD1. LEDGGIO8. SPCSO1.st Val.b Value; (* Simulate "IEDLD1/LLN0. DS2" member value change *) fb IED. IEDLD1. MMXU1. Tot W.t.t Value:= t T; fb IED. IEDLD1. MMXU1. Tot W.mag.f.f Value:= fb IED. IEDLD1. MMXU1. Tot W.mag.f.f Value + 0.1; (* Simulate "IEDLD1/LLN0. DS3" member value change *) fb IED. IEDLD1. XCBR1. Pos.t.t Value:= t T; IF fb IED. IEDLD1. XCBR1. Pos.st Val.e Value = E_Acsi Dbpos. On THEN fb IED. IEDLD1. XCBR1. Pos.st Val.e Value:= E_Acsi Dbpos. Off; ELSE fb IED. IEDLD1. XCBR1. Pos.st Val.e Value:= E_Acsi Dbpos. On; END_IF fb IED. IEDLD1. XCBR1. Pos.q. Old Data:= NOT fb IED. IEDLD1. XCBR1. Pos.q. Old Data; fb IED. IEDLD1. XCBR1. Pos.q.e Validity:= SEL(fb IED. IEDLD1. XCBR1. Pos.q. Old Data, E_Acsi Quality Validity . Good, E_Acsi Quality Validity. Questionable); END_IF FUNCTION_BLOCK FB_IEDServer Session IMPLEMENTS I_Scsm Abort Ind Event Sink, I_Scsm Associate Ind Event Sink, I_Scsm Release Ind Event Sink VAR_INPUT fb Connection : FB_iec61850Connection Class := (ip Abort Ind:=THIS^, ip Associate Ind:=THIS^, ip Re lease Ind:=THIS^); END_VAR VAR _b Abort : BOOL; _b Disconnect : BOOL; state : BYTE; e State : E_Async Environment State; b Busy : BOOL; b Success : BOOL; ip Result : I_Async Service Result Class; s Last Error Result : T_Max String; fb Abort Reason : FB_Service Error Class := (st Error:=SUCCESS_EVENT); s Last Abort Reason : T_Max String; b Simulation : BOOL:=TRUE; t Simulation : TIME:=T#2S; fb Timer : TON; t T : T_Utc Time; END_VAR fb Connection. Execute(); e State:= fb Connection.e State; fb Timer(IN:=b Simulation, PT:=t Simulation); IF fb Timer. Q THEN(* Simulate server data update *) fb Timer(IN:=FALSE); fb Timer(IN:=b Simulation); fb Connection. Get System Time(ip AA:=0, t T=>t T); (* Simulate "IEDLD1/LLN0. DS1" member value change *) fb IED. IEDLD1. LEDGGIO1. SPCSO1.t.t Value:=t T; fb IED. IEDLD1. LEDGGIO1. SPCSO1.st Val.b Value:=NOT fb IED. IEDLD1. LEDGGIO1. SPCSO1.st Val.b Value; fb IED. IEDLD1. LEDGGIO2. SPCSO1.t.t Value:=t T; fb IED. IEDLD1. LEDGGIO2. SPCSO1.st Val.b Value:=NOT fb IED. IEDLD1. LEDGGIO2. SPCSO1.st Val.b Value; fb IED. IEDLD1. LEDGGIO3. SPCSO1.t.t Value:=t T; fb IED. IEDLD1. LEDGGIO3. SPCSO1.st Val.b Value:=NOT fb IED. IEDLD1. LEDGGIO3. SPCSO1.st Val.b Value; fb IED. IEDLD1. LEDGGIO4. SPCSO1.t.t Value:=t T; fb IED. IEDLD1. LEDGGIO4. SPCSO1.st Val.b Value:=NOT fb IED. IEDLD1. LEDGGIO4. SPCSO1.st Val.b Value; fb IED. IEDLD1. LEDGGIO5. SPCSO1.t.t Value:=t T; fb IED. IEDLD1. LEDGGIO5. SPCSO1.st Val.b Value:=NOT fb IED. IEDLD1. LEDGGIO5. SPCSO1.st Val.b Value; fb IED. IEDLD1. LEDGGIO6. SPCSO1.t.t Value:=t T; fb IED. IEDLD1. LEDGGIO6. SPCSO1.st Val.b Value:=NOT fb IED. IEDLD1. LEDGGIO6. SPCSO1.st Val.b Value; fb IED. IEDLD1. LEDGGIO7. SPCSO1.t.t Value:=t T; fb IED. IEDLD1. LEDGGIO7. SPCSO1.st Val.b Value:=NOT fb IED. IEDLD1. LEDGGIO7. SPCSO1.st Val.b Value; fb IED. IEDLD1. LEDGGIO8. SPCSO1.t.t Value:=t T; fb IED. IEDLD1. LEDGGIO8. SPCSO1.st Val.b Value:=NOT fb IED. IEDLD1. LEDGGIO8. SPCSO1.st Val.b Value; (* Simulate "IEDLD1/LLN0. DS2" member value change *) fb IED. IEDLD1. MMXU1. Tot W.t.t Value:=t T; fb IED. IEDLD1. MMXU1. Tot W.mag.f.f Value:=fb IED. IEDLD1. MMXU1. Tot W.mag.f.f Value + 0.1; (* Simulate "IEDLD1/LLN0. DS3" member value change *) fb IED. IEDLD1. XCBR1. Pos.t.t Value:=t T; 686 Version: 1.7.1 TF6510
## Page 687

Examples IF fb IED. IEDLD1. XCBR1. Pos.st Val.e Value = E_Acsi Dbpos. On THEN fb IED. IEDLD1. XCBR1. Pos.st Val.e Value:= E_Acsi Dbpos. Off; ELSE fb IED. IEDLD1. XCBR1. Pos.st Val.e Value:= E_Acsi Dbpos. On; END_IF fb IED. IEDLD1. XCBR1. Pos.q. Old Data:= NOT fb IED. IEDLD1. XCBR1. Pos.q. Old Data; END_IF (* Execute server control block implementations *) fb IED. IEDLD1. LLN0.urcb101. Server. Execute(); fb IED. IEDLD1. LLN0.urcb201. Server. Execute(); fb IED. IEDLD1. LLN0.urcb301. Server. Execute(); fb IED. IEDLD1. LLN0.brcb101. Server. Execute(); fb IED. IEDLD1. LLN0.brcb201. Server. Execute(); fb IED. IEDLD1. LLN0.brcb301. Server. Execute(); CASE state OF 0: (* Initial state *) IF _b Abort THEN (* Abort connection => execute Abort Req() command *) _b Abort:= FALSE; b Success:= fb Connection. Abort Req(ip Reason:=fb Abort Reason, ip Sink:=0, ip Result=>ip Result) ; state:= SEL(b Success, 100, 1); ELSIF e State = E_Async Environment State. Established AND _b Disconnect THEN (* Close/ release connection => execute Release Req() command *) _b Disconnect:= FALSE; b Success:= fb Connection. Release Req(ip Sink:=0, ip Result=>ip Result); state:= SEL(b Success, 100, 1); ELSIF e State = E_Async Environment State. Established THEN (* Connection established => exchang e IED data *) state:= 10; END_IF _b Disconnect:= FALSE; 1: (* Wait for Abort Req() or Release Req() command completion *) IF ip Result <> 0 THEN ip Result. Execute(); IF NOT (b Busy:=ip Result. Is Busy()) THEN state:= SEL(ip Result. Is Completed(), 100(* failed or aborted *), 0(* succeeded *)); END_IF END_IF 10: (* connection established *) state:= 0; 100: (* Error state *) state:= 0; IF ip Result <> 0 THEN s Last Error Result:= ip Result. Dump(); END_IF END_CASE 7.25 Server - Data access events This example shows possible applications for data access events. Download Twin CAT XAE Project (*.zip): https://infosys.beckhoff.com/content/1033/TF6510_TC3_IEC61850/ Resources/10698267531.zip The example described here uses the state machine that is described in the "General Server project structure [} 659]" chapter. The States 0, 1, 10 and 100 are identical to the state machine described there. Other states were modified for the example or new states were also added. When accessing a value in the data model via the property or communication services, user-specific behavior can be implemented by using the event methods. For this purpose, certain methods can be added to each data object function block, which are called by the Server application before and after write and read accesses. These are the following four methods: TF6510 Version: 1.7.1 687
## Page 688

Examples Method name Description On Get VPre Event Is called on read accesses before the data is read from the data model. In this method, the data to be read can be adapted or the read request can be rejected with an error code. On Get VEvent Is called on read accesses after the data has been read from the data model. This method can be used to reset values set for a read request, for example. On Set VPre Event Is called on write accesses before the data is written to the data model. In this method, the data to be written can be checked and the write request rejected if necessary. On Set VEvent Is called on in connection with write accesses after the data has been written to the data model. This method can be used to update other values according to the written value, for example. The exemplary use cases for these methods as implemented in this example are explained in the following. Substitution The use of substitute values (substitution) can be implemented with the methods "On Get VPre Event" and "On Get VEvent". In the example, this is implemented in the function blocks "FB_DO_IED_LD1_MMXU1_Ph V_phs A" and "FB_DO_IED_LD1_MMXU1_Ph V_phs B". In the first function block, if substitution is enabled, then the process value is overwritten with the substitute value in cases of read requests. In the second function block, the current process value is also cached in order to set it again after the read request. Checking setting values In the "FB_DO_IED_LD1_CCGR1_Oil Tmp Set" function block, the checking of write requests for setting values is implemented with the "On Set VPre Event" method. In the function block, the minimum and maximum valid value for the data attribute "set Mag" can be set via the data attributes "min Val" and "max Val". With each write request to "set Mag", a check is now made to determine whether the value to be written is within the set range. If this is not the case, an error code is returned to the Server application. Then the value is not written and the error is sent to the Client. Rounding of measured values In the "On Set VEvent" method, rounded measured values can be calculated and value ranges can be determined. This is implemented in the function block "FB_DO_IED_LD1_MMDC1_Vol". To do this, the value of the "IEDL1/MMDC1. Vol.inst Mag.f" data attribute is overwritten with a random value in the "FB_IEDServer Session" function block. With write access via the property, the "On Set VEvent" method is called after the value has been transferred to the data model. In this, first the value of the data attribute "inst Mag.f" is rounded off and applied in the "mag.f" data attribute. Afterwards, the configured value ranges are used to determine in which value range the current value of "inst Mag.f" is located. In addition, a check is made to determine whether this is outside the defined range. 7.26 Server - Buffered Reporting This sample shows the buffered reporting implementation in a Twin CAT IEC61850 server project. The BRCBs (buffered report control blocks) and datasets required for reporting can be configured in the Twin CAT Telecontrol Configurator or imported from an existing SCL file (e.g. ICD file). The instances of the BRCBs and the Datasets are created automatically during code generation (usually below LLN0). The initial values of the BRCB attributes can already be configured in the Twin CAT Telecontrol Configurator. Download Twin CAT XAE Project (*.zip): https://infosys.beckhoff.com/content/1033/TF6510_TC3_IEC61850/ Resources/11740489611.zip The example described here uses the state machine that is described in the "General Server project structure [} 659]" chapter. The States 0, 1, 10 and 100 are identical to the state machine described there. Other states were modified for the example or new states were also added. The implementation of the buffered reporting functionality in a Twin CAT IEC 61850 server project is practically a "black box". This means that the complete functionality is already encapsulated in a function block and the application only has to call this function block. Each BRCB has a function block subelement 688 Version: 1.7.1 TF6510
## Page 689

Examples with the name: "Server". The PLC application only has to call the method: "Execute" at the "Server" block cyclically. This method is responsible for sending the reports and updating the status information in the associated BRCB (see code below). The reports can be configured either on the server side directly on the BRCB or on the client side via client- server services (Get BRCBData Values and Set BRCBData Values). The IED data to be communicated via reporting are defined with the help of the datasets. Multiple data references (Dataset Members) can be configured in a dataset. Reports that cannot be sent are stored in the buffer. When the maximum number of entries in the buffer is reached, the oldest report is deleted. When declaring a BRCB, the maximum number of entries can be set via the property "n Max Buffer Entries". In the sample this can be seen in the declaration of "brcb101": brcb101: FB_Scsm Br CBImpl Class := (Server:=(n Max Buffer Entries:=15), Rpt ID:=(s Value:='IEDLD1/ LLN0.brcb101'), Dat Set:=(s Value:='IEDLD1/ LLN0. DS1'), Conf Rev:=(n Value:=1), Opt Flds:=(Sequence Number:=TRUE, Report Time Stamp:=TRUE, Reason For In clusion:=TRUE, Data Set Name:=TRUE, Data Reference:=TRUE, Buffer Overflow:=TRUE, Entry ID:=TRUE, Conf Revi sion:=TRUE), Trg Ops:=(Data Change:=TRUE, Quality Change:=TRUE, Data Update:=TRUE, Integrity:=TRUE, Gene ral Interrogation:=TRUE), Intg Pd:=(n Value:=5000), b Link Result:=THIS^. Add Buffered Report Control Block To C ontainer(ip Buffered Report Control Block:=brcb101)); The sample contains a simple simulation of some dataset member values. If the variable "b Simulation" is set to TRUE, then the values are modified every 2 seconds. How does the BRCB Server implementation recognize that a value has been modified and a report is to be generated? This is done through write access to the attribute value (for example: b Value, t Value, i Value, e Value, n Value properties). However, a new report is not generated immediately for each individual write access to an attribute value. This would be undesirable. The "Server" implementation marks the modified dataset members internally as modified. A report is not generated and sent until the "Execute" method is called. The data sent in the report correspond to the data at the time of the dataset member's value change. The values are buffered when changed and coded into a report and sent after the time configured in the "Buf Tm" attribute has elapsed. If a new write access occurs within the buffer time, the buffered data are overwritten. This process is shown in the following figure: A different behavior for buffering is defined in IEC 61850-7-2 for data of the functional group "ST". If the value is written again before "Buf Tm" expires, the buffered data are immediately coded to a report and sent. The new data are then written into the buffer and the monitoring of the buffer time is restarted. The following graphic shows the described behavior: TF6510 Version: 1.7.1 689
## Page 690

Examples For data of the functional group "MX" it can be selected whether the BRCB should handle them separately, like data of the functional group "ST". This can be set via the property "b Replace Buffered MX". In the sample, the special treatment is enabled at "brcb201": brcb201: FB_Scsm Br CBImpl Class := (Server:=(b Replace Buffered MX:=TRUE), Rpt ID:=(s Value:='IEDLD1/ LLN0.brcb201'), Dat Set:=(s Value:='IEDLD1/ LLN0. DS2'), Conf Rev:=(n Value:=1), Opt Flds:=(Sequence Number:=TRUE, Report Time Stamp:=TRUE, Reason For In clusion:=TRUE, Data Set Name:=TRUE, Data Reference:=TRUE, Buffer Overflow:=TRUE, Entry ID:=TRUE, Conf Revi sion:=TRUE), Buf Tm:=(n Value:=5000), Trg Ops:=(Data Change:=TRUE, Quality Change:=TRUE, Data Update:=TRUE , Integrity:=TRUE, General Interrogation:=TRUE), Intg Pd:=(n Value:=5000), b Link Result:=THIS^. Add Buffer ed Report Control Block To Container(ip Buffered Report Control Block:=brcb201)); How "MX" data are handled depending on the setting of "b Replace Buffered MX" is shown in the following figure: 690 Version: 1.7.1 TF6510
## Page 691

Examples Sending reports immediately when a value of the assigned dataset is changed repeatedly can result in more reports being generated than desired. This is the case, for example, when a data object of the functional group "ST" is referenced in a dataset and then several attributes of the data object are written individually. Since each change in the value of a data attribute within a data object also represents a change in the value of the data object, multiple reports are generated. If the property "b Overwrite Same Cycle Changes" is set to TRUE, multiple value changes within a PLC cycle are treated as a single value change. The recognition of which values were written in the current cycle is reset by calling the "Execute" method. A value change before and after the call are therefore interpreted as not being a change in the same cycle. TF6510 Version: 1.7.1 691
## Page 692

Examples Please note that no reports are generated when writing or forcing values in Twin CAT online mode. In this way, the "Server" implementation cannot detect when a value has been modified. Integrity reports and General Interrogation reports are automatically generated and sent in accordance with the configuration of the BRCB. The sending of these reports does not have to be triggered in a special way in the PLC application. It is also taken from the cyclic call to the server "Execute" method. PROGRAM MAIN VAR b Simulation : BOOL:=TRUE; (* Enables/disables simulation of data update/ change *) t Simulation : TIME:=T#2S; (* Cycle time of simulated data update/change *) fb Timer : TON; t T : T_Utc Time; b Replace Buffered MX : BOOL; (* Toggles b Replace Buffered MX property of brcb201 *) b Overwrite Same Cycle Changes : BOOL; (* Toggles b Overwrite Same Cycle Changes property of brcb301 *) END_VAR P_IEC61850MAIN(); fb IED. IEDLD1. LLN0.brcb201. Server.b Replace Buffered MX:= b Replace Buffered MX; fb IED. IEDLD1. LLN0.brcb301. Server.b Overwrite Same Cycle Changes:= b Overwrite Same Cycle Changes; fb Timer(IN:=b Simulation, PT:=t Simulation); IF fb Timer. Q THEN(* Simulate server data update *) fb Timer(IN:=FALSE); fb Timer(IN:=b Simulation); fb IEDServer. Get System Time(ip AA:=0, t T=>t T); (* Simulate "IEDLD1/LLN0. DS1" member value change *) fb IED. IEDLD1. LEDGGIO1. SPCSO1.t.t Value:= t T; fb IED. IEDLD1. LEDGGIO1. SPCSO1.st Val.b Value:= NOT fb IED. IEDLD1. LEDGGIO1. SPCSO1.st Val.b Value; fb IED. IEDLD1. LEDGGIO2. SPCSO1.t.t Value:= t T; fb IED. IEDLD1. LEDGGIO2. SPCSO1.st Val.b Value:= NOT fb IED. IEDLD1. LEDGGIO2. SPCSO1.st Val.b Value; fb IED. IEDLD1. LEDGGIO3. SPCSO1.t.t Value:= t T; fb IED. IEDLD1. LEDGGIO3. SPCSO1.st Val.b Value:= NOT fb IED. IEDLD1. LEDGGIO3. SPCSO1.st Val.b Value; fb IED. IEDLD1. LEDGGIO4. SPCSO1.t.t Value:= t T; fb IED. IEDLD1. LEDGGIO4. SPCSO1.st Val.b Value:= NOT fb IED. IEDLD1. LEDGGIO4. SPCSO1.st Val.b Value; fb IED. IEDLD1. LEDGGIO5. SPCSO1.t.t Value:= t T; fb IED. IEDLD1. LEDGGIO5. SPCSO1.st Val.b Value:= NOT fb IED. IEDLD1. LEDGGIO5. SPCSO1.st Val.b Value; fb IED. IEDLD1. LEDGGIO6. SPCSO1.t.t Value:= t T; fb IED. IEDLD1. LEDGGIO6. SPCSO1.st Val.b Value:= NOT fb IED. IEDLD1. LEDGGIO6. SPCSO1.st Val.b Value; fb IED. IEDLD1. LEDGGIO7. SPCSO1.t.t Value:= t T; fb IED. IEDLD1. LEDGGIO7. SPCSO1.st Val.b Value:= NOT fb IED. IEDLD1. LEDGGIO7. SPCSO1.st Val.b Value; fb IED. IEDLD1. LEDGGIO8. SPCSO1.t.t Value:= t T; fb IED. IEDLD1. LEDGGIO8. SPCSO1.st Val.b Value:= NOT fb IED. IEDLD1. LEDGGIO8. SPCSO1.st Val.b Value; (* Simulate "IEDLD1/LLN0. DS2" member value change *) fb IED. IEDLD1. MMXU1. Tot W.t.t Value:= t T; fb IED. IEDLD1. MMXU1. Tot W.mag.f.f Value:= fb IED. IEDLD1. MMXU1. Tot W.mag.f.f Value + 0.1; (* Simulate "IEDLD1/LLN0. DS3" member value change *) fb IED. IEDLD1. XCBR1. Pos.t.t Value:= t T; IF fb IED. IEDLD1. XCBR1. Pos.st Val.e Value = E_Acsi Dbpos. On THEN fb IED. IEDLD1. XCBR1. Pos.st Val.e Value:= E_Acsi Dbpos. Off; ELSE fb IED. IEDLD1. XCBR1. Pos.st Val.e Value:= E_Acsi Dbpos. On; END_IF fb IED. IEDLD1. XCBR1. Pos.q. Old Data:= NOT fb IED. IEDLD1. XCBR1. Pos.q. Old Data; fb IED. IEDLD1. XCBR1. Pos.q.e Validity:= SEL(fb IED. IEDLD1. XCBR1. Pos.q. Old Data, E_Acsi Quality Validity . Good, E_Acsi Quality Validity. Questionable); END_IF FUNCTION_BLOCK FB_IEDServer Session IMPLEMENTS I_Scsm Abort Ind Event Sink, I_Scsm Associate Ind Event Sink, I_Scsm Release Ind Event Sink VAR_INPUT fb Connection : FB_iec61850Connection Class := (ip Abort Ind:=THIS^, ip Associate Ind:=THIS^, ip Re lease Ind:=THIS^); END_VAR VAR _b Abort : BOOL; (* Rising edge activates Abort Req() command execution *) _b Disconnect : BOOL; (* Rising edge activates Release Req() command execution *) state : BYTE; e State : E_Async Environment State; (* Environment state *) 692 Version: 1.7.1 TF6510
## Page 693

Examples b Busy : BOOL; (* If TRUE => command execution is busy *) b Success : BOOL; ip Result : I_Async Service Result Class; s Last Error Result : T_Max String; fb Abort Reason : FB_Service Error Class := (st Error:=SUCCESS_EVENT); s Last Abort Reason : T_Max String; END_VAR fb Connection. Execute(); e State:= fb Connection.e State; (* Execute server control block implementations *) fb IED. IEDLD1. LLN0.brcb101. Server. Execute(); fb IED. IEDLD1. LLN0.brcb201. Server. Execute(); fb IED. IEDLD1. LLN0.brcb301. Server. Execute(); CASE state OF 0: (* Initial state *) IF _b Abort THEN (* Abort connection => execute Abort Req() command *) _b Abort:= FALSE; b Success:= fb Connection. Abort Req(ip Reason:=fb Abort Reason, ip Sink:=0, ip Result=>ip Resu lt); state:= SEL(b Success, 100, 1); ELSIF e State = E_Async Environment State. Established AND _b Disconnect THEN (* Close/ release connection => execute Release Req() command *) _b Disconnect:= FALSE; b Success:= fb Connection. Release Req(ip Sink:=0, ip Result=>ip Result); state:= SEL(b Success, 100, 1); ELSIF e State = E_Async Environment State. Established THEN (* Connection established => excha nge IED data *) state:= 10; END_IF _b Disconnect:= FALSE; 1: (* Wait for Abort Req() or Release Req() command completion *) IF ip Result <> 0 THEN ip Result. Execute(); IF NOT (b Busy:=ip Result. Is Busy()) THEN state:= SEL(ip Result. Is Completed(), 100(* failed or aborted *), 0(* succeeded *) ); END_IF END_IF 10: (* connection established *) state:= 0; 100: (* Error state *) state:= 0; IF ip Result <> 0 THEN s Last Error Result:= ip Result. Dump(); END_IF END_CASE 7.27 Multiple GOOSE publishers/subscribers on one network adapter (without client-server communication) This sample shows the implementation of multiple GOOSE publishers and subscribers in a Twin CAT project. Several publishers and subscribers are combined into IED groups and configured in such a way that they only require one Twin CAT real-time Ethernet adapter for the exchange of GOOSE messages. Download Twin CAT XAE Project (*.zip): https://infosys.beckhoff.com/content/1033/TF6510_TC3_IEC61850/ Resources/12863957387.zip General information about this sample project Sometimes there are several identical IED devices (Intelligent Electronic Devices) in a GOOSE network. These identical devices then logically have the same IEC 61850 data model (logical nodes, data objects, data attributes, etc.). If the Twin CAT application is to exchange GOOSE messages with several identical devices, then it is advantageous to create and use an array of IED instances for this purpose in the Twin CAT project. An IED array element then corresponds to a GOOSE publisher or subscriber device instance in the field. The array elements should preferably be either all of type: GOOSE publisher or all of type: GOOSE subscriber. This simplifies the implementation of the individual GOOSE functions in the PLC application. The PLC application can then, for example, enable or disable all publishers in a FOR loop. Other configurations TF6510 Version: 1.7.1 693
## Page 694

Examples (some IED array elements are subscribers and other publishers) are also possible, but are not presented in this sample to keep the sample simple. The devices in the field logically have different IED and logical device names. However, all IED array elements initially have the same IED and logical device names. However, this is not a problem for the PLC application. The individual IED array elements can be reconfigured accordingly at PLC program start. Each IED array element is given a new, unique IED and LD name. Because of this renaming, some attribute values, such as "Go ID" or "Dat Set" must also be adjusted. The IEC 61850 data model for these identical IED devices is then only present once in the Twin CAT project and does not have to be duplicated and renamed for each individual IED device instance. This saves resources and increases the performance of the application. For projects with only one subscriber or publisher, the link from the "Twin CAT real-time Ethernet adapter" (RT Ethernet adapter) to the PLC is established via the instances of the "FB_[IEDName]Gse" function block. The IED data model of a subscriber or publisher to be communicated is communicated to the function block via the "ip IED" property. For more information see: RT Ethernet adapter configuration [} 38] and in the samples: Client - GOOSE subscriber [} 652] and Server - GOOSE publisher [} 663]. It is theoretically possible to link up to 20 instances of the "FB_[IEDName]Gse" function block with a "Twin CAT RT Ethernet adapter" in this way. This allows up to 20 publishers or subscribers to be implemented in one project. However, it is more resource-efficient to use, for example, only one instance of the adapter function block for a group of publishers and another instance for the group of subscribers. If all devices are in a common GOOSE network, then all publishers/subscribers in the Twin CAT application can use the same "Real-Time Ethernet adapter (Multiple Protocol Handler)". How has it been realized in the sample? First, several publishers were assigned to an IED group. All subscribers were assigned to a second IED group. Each IED group was given a unique group name. The IED groups are instances of the function block: "FB_GROUP_[Group Name]". The IED group to be communicated is communicated to the "FB_[Group Name]Gse" adapter function block via the "ip Group" property. The two instances of the adapter function block "FB_[Group Name]Gse" (one belongs to the publisher group and the other to the subscriber group) are then linked to the "Twin CAT real-time Ethernet adapter" as described in the RT Ethernet adapter configuration [} 38]. Generation of the IED data model The IEC 61850 data model of the IEDs in this sample was first generated with the Twin CAT Telecontrol Configurator from the SCL file: Sample29.icd. The file is also located in the Twin CAT project zip archive. This ICD file describes the data model of 6 different IED devices. The image below shows the IEDs in the Twin CAT Telecontrol Configurator: 694 Version: 1.7.1 TF6510
## Page 695

Examples Each IED has a Data Set and a GOOSE control block. After automatic PLC code generation (e.g. as a client project), the PLC project was modified manually and the unneeded function blocks for client/server communication were removed. Definition of the IED groups From the 6 automatically generated IED data models, a total of 3 publishers and 11 subscribers are to be implemented in this sample project. All publishers were assigned to an IED group named "Pub Group Name" and subscribers were assigned to an IED group named "Sub Group Name". Global variable list Tc Telecontrol In this GVL, a publisher group "fb Pub Group Name" and a subscriber group "fb Sub Group Name" are instantiated respectively. There is also an instance of the publisher adapter function block "fb Pub Group Name Gse" and an instance of the subscriber adapter function block "fb Sub Group Name Gse". The "ip Group" property is used to assign the publisher IED group to the "fb Pub Group Name Gse" and the subscriber IED group to the "fb Sub Group Name Gse". VAR_GLOBAL ip Creator: I_Acsi Code Creator Class := GVL_Acsi Vars. Creator. Set Code Rev(code Rev:=3). Set Gui Ver(major :=3, minor:=1, build:=96, revision:=3); fb Sub Group Name: FB_GROUP_Sub Group Name:=(b Link Result:=fb Sub Group Name. Init()); fb Pub Group Name: FB_GROUP_Pub Group Name:=(b Link Result:=fb Pub Group Name. Init()); fb Sub Group Name Gse: FB_Sub Group Name Gse := (fb Adapter:=(ip Group:=fb Sub Group Name, settings:=(s Multi cast Addr:='01-0C-CD-01-00-01', e Dispatch Mode:=E_Gse Dispatch Mode. Non Promiscuous))); fb Pub Group Name Gse: FB_Pub Group Name Gse := (fb Adapter:=(ip Group:=fb Pub Group Name, settings:=(s Multi cast Addr:='01-0C-CD-01-00-00', e Dispatch Mode:=E_Gse Dispatch Mode. Non Promiscuous))); END_VAR TF6510 Version: 1.7.1 695
## Page 696

Examples Subscriber group The subscriber group "FB_GROUP_Sub Group Name" configures 11 subscribers. "IED5Name" is instantiated as an array[1..8] in the subscriber group. Each array element shall be a subscriber that receives GOOSE messages from another identical device in the field. The subscriber group can only receive GOOSE messages from a publisher if the publisher sends the GOOSE message to the address: '01-0C-CD-01-00-01' or broadcast address or to the MAC address of the Twin CAT RT network adapter. The subscriber source address is configured for all subscribers in a subscriber group at the instance of the "FB_[Group Name]Gse". The table below lists the main parameters of the subscribers in this IED group. IED IED name/LD Src Address APPID Go ID Dat Set name IED1Na IED1Name/ 01-0C- 16#0010 'IED1Name LD1/ 'IED1Name LD1/LLN0.ds01' me IED1Name LD1 CD-01-00-01 LLN0.gocb01' IED2Na IED2Name/ 01-0C- 16#0020 'IED2Name LD1/ 'IED2Name LD1/LLN0.ds01' me IED2Name LD1 CD-01-00-01 LLN0.gocb01' IED3Na IED3Name/ 01-0C- 16#0030 'IED3Name LD1/ 'IED3Name LD1/LLN0.ds01' me IED3Name LD1 CD-01-00-01 LLN0.gocb01' IED5Na CH1/CH1LD1 01-0C- 16#0051 'CH1LD1/ 'CH1LD1/LLN0.ds01' me[1] CD-01-00-01 LLN0. Go ID.gocb01' IED5Na CH2/CH2LD1 01-0C- 16#0052 'CH2LD1/ 'CH2LD1/LLN0.ds01' me[2] CD-01-00-01 LLN0. Go ID.gocb01' IED5Na CH3/CH3LD1 01-0C- 16#0053 'CH3LD1/ 'CH3LD1/LLN0.ds01' me[3] CD-01-00-01 LLN0. Go ID.gocb01' IED5Na CH4/CH4LD1 01-0C- 16#0054 'CH4LD1/ 'CH4LD1/LLN0.ds01' me[4] CD-01-00-01 LLN0. Go ID.gocb01' IED5Na CH5/CH5LD1 01-0C- 16#0055 'CH5LD1/ 'CH5LD1/LLN0.ds01' me[5] CD-01-00-01 LLN0. Go ID.gocb01' IED5Na CH6/CH6LD1 01-0C- 16#0056 'CH6LD1/ 'CH6LD1/LLN0.ds01' me[6] CD-01-00-01 LLN0. Go ID.gocb01' IED5Na CH7/CH7LD1 01-0C- 16#0057 'CH7LD1/ 'CH7LD1/LLN0.ds01' me[7] CD-01-00-01 LLN0. Go ID.gocb01' IED5Na CH8/CH8LD1 01-0C- 16#0058 'CH8LD1/ 'CH8LD1/LLN0.ds01' me[8] CD-01-00-01 LLN0. Go ID.gocb01' The "FB_GROUP_Sub Group Name" group function block is derived from the "FB_Acsi Common IEDGroup Class" function block and serves as a container for several IEDs. The "Add IEDTo Container" method adds the individual IEDs to the subscriber group. For IED array elements, each individual array element must be added to the subscriber group in this way. The "Tag" property can be used to provide the individual array elements of "IED5Name" with additional information. In the sample, the array element numbers are set there. This number can be queried in the "Init" method or later at runtime in the methods of the IED. Each array element can also be configured a little differently depending on the number. FUNCTION_BLOCK FB_GROUP_Sub Group Name EXTENDS FB_Acsi Common IEDGroup Class VAR CONSTANT Max_GROUP_IED5Name: DINT:=8; (* Max. number of IED5Name instances *) END_VAR VAR_INPUT IED1Name: FB_IED_IED1Name:=(b Link Result:=THIS^. Add IEDTo Container(ip IED:=IED1Name)); IED2Name: FB_IED_IED2Name:=(b Link Result:=THIS^. Add IEDTo Container(ip IED:=IED2Name)); IED3Name: FB_IED_IED3Name:=(b Link Result:=THIS^. Add IEDTo Container(ip IED:=IED3Name)); IED5Name: ARRAY[1.. Max_GROUP_IED5Name] OF FB_IED_IED5Name:= [ (Tag:=1, s Object Name:='CH1', b Link Result:=THIS^. Add IEDTo Container(ip IED:=IED5Name[1])), (Tag:=2, s Object Name:='CH2', b Link Result:=THIS^. Add IEDTo Container(ip IED:=IED5Name[2])), (Tag:=3, s Object Name:='CH3', b Link Result:=THIS^. Add IEDTo Container(ip IED:=IED5Name[3])), (Tag:=4, s Object Name:='CH4', b Link Result:=THIS^. Add IEDTo Container(ip IED:=IED5Name[4])), (Tag:=5, s Object Name:='CH5', b Link Result:=THIS^. Add IEDTo Container(ip IED:=IED5Name[5])), (Tag:=6, s Object Name:='CH6', b Link Result:=THIS^. Add IEDTo Container(ip IED:=IED5Name[6])), (Tag:=7, s Object Name:='CH7', b Link Result:=THIS^. Add IEDTo Container(ip IED:=IED5Name[7])), (Tag:=8, s Object Name:='CH8', b Link Result:=THIS^. Add IEDTo Container(ip IED:=IED5Name[8])) ]; END_VAR VAR 696 Version: 1.7.1 TF6510
## Page 697

Examples fb Error : FB_Service Error Class; ip Last Error : I_Service Error Class; i : DINT; (* Temp array index variable *) END_VAR Subscriber group methods The function block "FB_GROUP_Sub Group Name" implements several methods. "Enable" enables all subscribers. "Disable" disables all subscribers. "Execute" must be called cyclically. "Init" initializes all IEDs, LDs, LNs, etc. in the group. The method "Init" is executed once by the initialization code (already before the first PLC cycle). Adjustment of IED name and LD name for IED5Name array The setter of the "s Object Name" property of the "FB_IED_IED5Name" function block was overwritten. When setting a new IED name, the new setter implementation is called and the new IED name is applied. The logical device name of the function block "FB_LD_IED5Name LD1" is also corrected because it also contains the IED name. PROPERTY FINAL s Object Name : T_Acsi Object Name VAR END_VAR (* Adopt the modified IED name *) SUPER^.s Object Name:= s Object Name; (* Adjust the logical-device names too *) IED6Name LD1.s Object Name:= CONCAT(s Object Name, 'LD1'); Adjustment of APPID, Go ID and Dat Set for IED5Name array The adjustment is made in the "Init" method of the logical node "LLN0". METHOD FINAL Init : BOOL VAR_INPUT IED: REFERENCE TO FB_IED_IED5Name; Logical Device: REFERENCE TO FB_LD_IED5Name LD1; END_VAR VAR END_VAR IF NOT __ISVALIDREF(IED) THEN RETURN; END_IF IF NOT __ISVALIDREF(Logical Device) THEN RETURN; END_IF (* Example: Adjust subscribers Go ID string *) gocb01. Go ID.s Value:= CONCAT(CONCAT(Logical Device.s Object Name, '/'), CONCAT(CONCAT(THIS^.s Object Name, '.'), gocb01.s Object Name)); (* Example: Adjust subscribers data-set reference string *) gocb01. Dat Set.s Value:= CONCAT(CONCAT(Logical Device.s Object Name, '/'), CONCAT(CONCAT(THIS^.s Object Nam e, '.'), ds01.s Object Name)); (* Example: Adjust subscribers APPID by use of IED's Tag property value *) gocb01. Dst Address. APPID.n Value:= WORD#16#0050 + TO_WORD(IED. Tag); (* Forward IED reference to all data-sets *) Init:= TRUE; Init:= Init AND ds01. Init(IED:=IED); Publisher group The publisher group "FB_GROUP_Pub Group Name" configures 3 publishers. "IED6Name" is instantiated as array[1..2] in the publisher group. Each array element shall be a publisher that sends the GOOSE messages to a different target address and with a special APPID. The table below lists the main parameters of the publishers in this group. TF6510 Version: 1.7.1 697
## Page 698

Examples IED IED name/LD name Dst Address APPID Go ID Dat Set IED4Name IED4Name/ 01-0C- 16#0040 'IED4Name LD1/ 'IED4Name LD1/ IED4Name LD1 CD-01-00-00 LLN0.gocb01' LLN0.ds01' IED6Name[ CNT1/CNT1LD1 01-0C- 16#0061 'CNT1LD1/ 'CNT1LD1/LLN0.ds01' 1] CD-01-00-01 LLN0.gocb01' IED6Name[ CNT2/CNT2LD1 01-0C- 16#0062 'CNT2LD1/ 'CNT2LD1/LLN0.ds01' 2] CD-01-00-02 LLN0.gocb01' The "FB_GROUP_Pub Group Name" group function block is derived from the "FB_Acsi Common IEDGroup Class" function block and serves as a container for several IEDs. The "Add IEDTo Container" method adds the individual IEDs to the publisher group. For IED array elements, each individual array element must be added to the publisher group in this way. The "Tag" property can be used to provide the individual array elements of "IED6Name" with additional information. In the sample, the array element numbers are set there. This number can be queried in the "Init" method or later at runtime in the methods of the IED. Each array element can also be configured a little differently, depending on the number. FUNCTION_BLOCK FB_GROUP_Pub Group Name EXTENDS FB_Acsi Common IEDGroup Class VAR CONSTANT Max_GROUP_IED6Name: DINT:=2; (* Max. number of IED6Name instances *) END_VAR VAR_INPUT IED4Name: FB_IED_IED4Name:=(b Link Result:=THIS^. Add IEDTo Container(ip IED:=IED4Name)); IED6Name: ARRAY[1.. Max_GROUP_IED6Name] OF FB_IED_IED6Name:= [ (Tag:=1, s Object Name:='CNT1', b Link Result:=THIS^. Add IEDTo Container(ip IED:=IED6Name[1])), (Tag:=2, s Object Name:='CNT2', b Link Result:=THIS^. Add IEDTo Container(ip IED:=IED6Name[2])) ]; END_VAR VAR b Update_GROUP_IED4Name_IED4Name LD1_LLN0_gocb01: BOOL; (* If TRUE => Update 'IED4Name. IED4Name LD1 . LLN0.gocb01' publisher *) a Update_GROUP_IED6Name_IED6Name LD1_LLN0_gocb01: ARRAY[1.. Max_GROUP_IED6Name] OF BOOL; (* If arra y element n is TRUE => Update 'IED6Name[n]. IED6Name LD1. LLN0.gocb01' publisher *) fb Error : FB_Service Error Class; ip Last Error : I_Service Error Class; i : DINT; (* Temp array index variable *) i Update Element : DINT; (* Array index of first array element that needs to be updated *) b Simulation : BOOL := TRUE; (* Enables/disables simulation of cyclic GOOSE data update *) t Simulation : TIME := T#5S; (* Cycle time of simulated GOOSE data update *) fb Update Timer : TON; i Live Counter : LINT; (*Live counter (example) *) t T : T_Utc Time; (* Temp time-stamp value *) END_VAR Publisher group methods The function block "FB_GROUP_Pub Group Name" implements several methods. "Start" starts all publishers. "Stop" stops all publishers. "Execute" must be called cyclically. "Update" performs an update of the publisher data. "Init" initializes all IEDs, LDs, LNs, etc. in the group. The method "Init" is executed once by the initialization code (already before the first PLC cycle). In the method "Map Simu Pub Data" publisher data are simulated/modified. Adjustment of IED name and LD name for IED6Name array The setter of the "s Object Name" property of the "FB_IED_IED6Name" function block was overwritten. When setting a new IED name, the new setter implementation is called and the new IED name is applied. The logical device name of the function block "FB_LD_IED6Name LD1" is also corrected because it also contains the IED name. PROPERTY FINAL s Object Name : T_Acsi Object Name VAR END_VAR (* Adopt the modified IED name *) SUPER^.s Object Name:= s Object Name; (* Adjust the logical-device names too *) IED6Name LD1.s Object Name:= CONCAT(s Object Name, 'LD1'); 698 Version: 1.7.1 TF6510
## Page 699

Examples Adjustment of APPID, Go ID and Dat Set for IED6Name array The adjustment takes place in the "Init" method of the logical node "LLN0". METHOD FINAL Init : BOOL VAR_INPUT IED: REFERENCE TO FB_IED_IED6Name; Logical Device: REFERENCE TO FB_LD_IED6Name LD1; END_VAR VAR mac: ETHERNET_ADDRESS; END_VAR IF NOT __ISVALIDREF(IED) THEN RETURN; END_IF IF NOT __ISVALIDREF(Logical Device) THEN RETURN; END_IF (* Example: Adjust publishers Go ID string *) gocb01. Go ID.s Value:= CONCAT(CONCAT(Logical Device.s Object Name, '/'), CONCAT(CONCAT(THIS^.s Object Name, '.'), gocb01.s Object Name)); (* Example: Adjust publishers data-set reference string *) gocb01. Dat Set.s Value:= CONCAT(CONCAT(Logical Device.s Object Name, '/'), CONCAT(CONCAT(THIS^.s Object Nam e, '.'), ds01.s Object Name)); (* Example: Adjust publishers multicast address by use of IED's Tag property value *) mac:= THIS^.gocb01. Dst Address.mac Addr;// Get current address mac.b[5]:= TO_BYTE(IED. Tag);// Modifiy last digit THIS^.gocb01. Dst Address.mac Addr:= mac;// Set new address (* Example: Adjust publishers APPID by use of IED's Tag property value *) gocb01. Dst Address. APPID.n Value:= WORD#16#0060 + TO_WORD(IED. Tag); (* Forward IED reference to all data-sets *) Init:= TRUE; Init:= Init AND ds01. Init(IED:=IED); In the sample code above, the last digit of the MAC address of "Dst Address" is set equal to the value of the "Tag" property. If a completely different MAC address is to be configured for the two publishers then the "Tag" property can also be used in the following way: IF IED. Tag = 1 THEN THIS^.gocb01. Dst Address.s Addr:='01-0C-CD-01-02-56'; ELSIF IED. Tag = 2 THEN THIS^.gocb01. Dst Address.s Addr:='01-0C-CD-01-01-78'; END_IF Network adapter function block FB_Sub Group Name Gse A rising edge at the Boolean variable "b Subscribe" (initial value is already "TRUE") enables all subscribers in the subscriber group when the PLC is started. A rising edge at the Boolean variable "b Unsubscribe" disables all subscribers in the group. The rest of the time, the "Execute" method of the subscriber group and the network adapter must be called cyclically. This is necessary so that the GOOSE messages are received and passed on to the subscriber instances. FUNCTION_BLOCK FB_Sub Group Name Gse IMPLEMENTS I_Gse Link Status Event Sink VAR_INPUT fb Adapter : FB_Gse Adapter Class := (ip Link Status:=THIS^); END_VAR VAR e Link Status : E_Gse Link Status; b Success : BOOL; ip Error : I_Service Error Class; b Subscribe : BOOL := TRUE; (* Rising edge enables subscriber Go CB's *) b Unsubscribe: BOOL; (* Rising edge disables subscriber Go CB's *) END_VAR b Success:= fb Adapter. Execute(ip Error=>ip Error); (* Execute network adapter *) IF b Subscribe THEN (* Enable subscriber Go CB's *) b Subscribe:= FALSE; b Success:= fb Sub Group Name. Enable(ip Adapter:=fb Adapter, ip Error=>ip Error); ELSIF b Unsubscribe THEN (* Disable subscriber Go CB's *) b Unsubscribe:= FALSE; b Success:= fb Sub Group Name. Disable(ip Error=>ip Error); ELSE (* Execute subscriber Go CB's *) b Success:= fb Sub Group Name. Execute(ip Error=>ip Error); END_IF TF6510 Version: 1.7.1 699
## Page 700

Examples Network adapter function block FB_Pub Group Name Gse A rising edge at the Boolean variable "b Start" (initial value is already "TRUE") enables all publishers in the publisher group when the PLC is started. A rising edge at the Boolean variable "b Stop" disables all publishers in the group. On a rising edge at the Boolean variable "b Update", the "Update" method of the publisher group is called. But the "b Update" variable becomes "TRUE" only if the "Map Simu Pub Data" method also returns "TRUE" because the data was changed or updated by at least one publisher. The rest of the time, the "Execute" method of the publisher group and the network adapter must be called cyclically. This is necessary so that the publisher instances can send their GOOSE messages. FUNCTION_BLOCK FB_Pub Group Name Gse IMPLEMENTS I_Gse System Clock Event Sink, I_Gse Link Status Event Sink VAR_INPUT fb Adapter : FB_Gse Adapter Class := (ip System Clock:=THIS^, ip Link Status:=THIS^); END_VAR VAR e Link Status : E_Gse Link Status; b Success : BOOL; ip Error : I_Service Error Class; b Start : BOOL := TRUE; (* Rising edge starts publishing of GOOSE data *) b Stop : BOOL; (* Rising edge stops publishing of GOOSE data *) b Update : BOOL; (* Rising edge updates published GOOSE data *) b Sync : BOOL := TRUE; (* Rising edge synchronizes the GSE system clock to external time *) t Sync : T_Utc Time := String_TO_Utc Time(in:='UT#2019-07-12-12:00:00.000000000|000| 3'); (* External (test) time *) fb Clock : FB_Gse System Clock; END_VAR IF b Sync THEN (* Synchronize clock time to external time source *) b Sync:= FALSE; b Success:= fb Clock. Set To Utc Time(in:=t Sync); ELSE (* Execute clock instance *) fb Clock. Execute(); END_IF (* Map/simulate GOCB's data-set member values: 'IED4Name. IED4Name LD1. LLN0.ds01' and/ or 'ARRAY OF IED6Name[1.. Max_GROUP_IED6Name]. IED6Name LD1. LLN0.ds01' *) b Update:= fb Pub Group Name. Map Simu Pub Data(ip Clock:=fb Clock); b Success:= fb Adapter. Execute(ip Error=>ip Error); (* Execute network adapter *) IF b Start THEN (* Start publishing of GOOSE data *) b Start:= FALSE; b Success:= fb Pub Group Name. Start(ip Adapter:=fb Adapter, ip Error=>ip Error); ELSIF b Stop THEN (* Stop publishing of GOOSE data *) b Stop:= FALSE; b Success:= fb Pub Group Name. Stop(ip Error=>ip Error); ELSIF b Update THEN (* Update published GOOSE data *) b Update:= FALSE; b Success:= fb Pub Group Name. Update(ip Error=>ip Error); ELSE (* Execute publisher Go CB's *) b Success:= fb Pub Group Name. Execute(ip Error=>ip Error); END_IF Simulation of publisher data in the sample project If the Boolean variable "b Simulation" has the value "TRUE", then some changing publisher data will be simulated in the method "Map Simu Pub Data". E.g. a counter value "i Live Counter" or some quality flags. In addition, a very simple data concentrator was implemented there for testing purposes. Some subscriber data of the subscriber group IEDs are copied over to the publisher data when the value changes. In case of a value change, a Boolean variable such as "b Update_GROUP_IED4Name_IED4Name LD1_LLN0_gocb01" is also set to "TRUE". The "Update" method can detect via this variable that an update of the publisher data of the control block "gocb01" is to be performed. Test of the subscriber group There are other ICD files in the zip archive that can be used for testing or simulation purposes of the subscriber group: Publisher_IED1Name.icd Publisher_IED2Name.icd Publisher_IED3Name.icd Publisher_CH1_To_CH8.icd 700 Version: 1.7.1 TF6510
## Page 701

Examples You can use these files in a third party tool to simulate the "IED1Name", "IED2Name", "IED3Name" and "CH1".."CH8" publishers. Furthermore, you can also create a Twin CAT publisher project from these files. The subscribers in this sample project can receive the data from these publishers. Publisher group test There are two more ICD files in the zip archive that can be used when testing the publisher group in this sample project: Subscriber_CNT1_To_CNT2.icd Subscriber_IED4Name.icd You can use these files in a third party tool to simulate the "CNT1".. "CNT8" and "IED4Name" subscribers. The sent data of the publisher group in this sample project can be received by these subscribers. 7.28 TLS - Secure client-server communication using certificates or PSK (pre-shared key) This example shows how secure data communication can be implemented using TLS (Transport Layer Security) in a Twin CAT IEC 61850 client and server application. The TLS protocol only allows encryption of client-server communication. The GOOSE publisher/subscriber data cannot be encrypted in this way. If you are using an older version of the Twin CAT IEC 61850 Telecontrol Configurator, the TLS functionality may not be supported there yet. To compile and test this sample project without errors you need a newer version of the TF6510 IEC 61850 Telecontrol. System requirement TF6510 IEC 61850 Telecontrol v3.1.96.7 or newer Download Twin CAT XAE Project (*.zip): https://infosys.beckhoff.com/content/1033/TF6510_TC3_IEC61850/ Resources/13651402763.zip General information about this sample project The TLS sample consists of two separate Twin CAT IEC 61850 projects. After unpacking the zip archive you will find a Twin CAT IEC 61850 client project in the subfolder \Client With TLS\Sample30 and a Twin CAT IEC 61850 server project in the subfolder \Server With TLS\Sample30. The here described: Client - Basis sample project [} 628] and here described: Server - Basis sample project [} 663] served as basis for the TLS sample project. This sample mainly shows two ways of TLS data encryption: 1. TLS with certificates (e.g.: own, self-signed certificates). 2. TLS with PSK (Pre-Shared Key). Every Twin CAT IEC 61850 client/server project can be extended with TLS functionality in a relatively simple way. In order for the encryption/decryption of the data to work on both sides, this must also logically be done on both sides, the client and the server. This extension consists mainly of the configuration of private keys (private keys), passwords, certificates or PSK keys. When configuring the private keys and certificates, for example, the server or client function block is informed of the file paths to the folders where the private key files and certificates have been saved. The required TLS configuration parameters are saved in advance in a function block instance of the type: FB_Socket Tls Settings Class [} 238] provided for this purpose. This information is transferred to the IEC 61850 client/server function blocks via a defined interface of the type I_Socket Tls Settings Class [} 365], which is implemented by the FB_Socket Tls Settings Class [} 238] function block. The IEC 61850 server and client function blocks access the saved TLS configuration and thus also the private key, certificate files via this interface during connection establishment. Upon success, a secure communication link is established. TF6510 Version: 1.7.1 701
## Page 702

Examples Format of private keys and certificates The certificate files must be in PEM (Privacy-Enhanced Mail) format. To ensure that the client or server can easily access the key and certificate files, the recommended location for the files is, for example, the following folder on the Windows target system: \Twin CAT\3.1\Target\Certificates\IEC61850. The private key files and certificate files are text files. A private key file starts with the line: "-----BEGIN PRIVATE KEY-----". This is followed by the key and ends with the line: "-----END PRIVATE KEY-----". Example: -----BEGIN PRIVATE KEY----- MIIEz AIBADANBgkqhki G9w0BAQEFAASCBKcwgg Sj Ag EAAo IBAQDIx4b VTx EHDhu KWl0XJAk LZfqj Nv Mk D26sv/VViprpe MCb U/f Sun+2o JO1iczd7Ut66SQBBe Pxs FEQhf Ah O0Ta GDDrf F9WP7Wbk Gb7 ... V0um2x+k KJ8hs D9vf ORBf7Knw Ji0Qitw G41Po GDUi6RD8IUyb Kb Lc5a/hx1C5h R0TBn Xuxpguzed pq0NPKFQk7d0Arah QPr Ym Uy Syfag DTALBg NVHQ8x BAMCAJA= -----END PRIVATE KEY----- The certificate files start with the line: "-----BEGIN CERTIFICATE-----". This is followed by the certificate data and ends with the line: "-----END CERTIFICATE-----". Sample: -----BEGIN CERTIFICATE----- MIIDy DCCAr Cg Aw IBAg IQRGx L9tvn64FPEmn MEI8FLj ANBgkqhki G9w0BAQs FADBl MWMw YQYDVQQDDFp Sb290IENBLE9VPVR3a W5DQVQs Tz1CZWNra G9m Zi BBd XRvb WF0 ... 6D2L4WEjrz IMR07EWJC4JKv Dqxi QMAHs Ukpy4v S817ZBsu L0/M8Eb G9s Td EGx Zp 9+GR0Np4ku7Tkd J5 -----END CERTIFICATE----- TLS sample configuration with the FB_IEDTLSecurity function block In order to further simplify the TLS configuration with the help of the function block FB_Socket Tls Settings Class [} 238], an additional auxiliary function block "FB_IEDTLSecurity" was implemented in the "Client With TLS\Sample30" and also in the "Server With TLS\Sample30" project around the FB_Socket Tls Settings Class [} 238] function block. The "FB_IEDTLSecurity" function block now has only one method: "Enable". The "Enable" method parameters can be used to enable/disable the TLS configuration and specify the type of TLS encryption in our example. METHOD FINAL Enable : I_Socket Tls Settings Class VAR_INPUT b Enable : BOOL; b PSK : BOOL; END_VAR b Enable: Enables/disables the TLS configuration. If "TRUE", all necessary TLS configuration settings are saved in the local instance "fb Tls" of the FB_Socket Tls Settings Class [} 238] function block. The TLS configuration should be enabled in this case. The value "FALSE" disables the TLS configuration. b PSK: Configures the type of encryption. If "TRUE", a secure TLS connection is established by using a PSK (Pre-Shared Key). If "FALSE", a secure TLS connection is established by exchanging the certificates. Return parameter: If a valid interface pointer to the TLS configuration settings is returned (return value <> 0), then a secure TLS client-server connection shall be established. If the return value is null, a conventional connection (without TLS) should be established. Server TLS sample configuration The implementation of the "FB_IEDTLSecurity. Enable" method differs in the client and server projects. In the server project, the paths of the certificates and private keys of the server are configured, and in the client project, those of the client. The root CA certificate is the same certificate on both sides. The root CA certificate must be present on both systems. 702 Version: 1.7.1 TF6510
## Page 703

Examples VAR key : ARRAY[0..14] OF BYTE:=[16#1B,16#D0,16#6F,16#D2,16#56,16#16,16#7D,16#C1,16#E8,16#C7,1 6#48,16#2A,16#8E,16#F5,16#FF]; s Identity : STRING(TCPADS_TLS_PSK_IDENTITY_SIZE) :='My Identity'; s Ca Path : STRING(TCPADS_TLS_CERTIFICATE_PATH_SIZE):='C: \Twin CAT\3.1\Target\Certificates\IEC61850\root CA.pem'; s Cert Path : STRING(TCPADS_TLS_CERTIFICATE_PATH_SIZE):='C: \Twin CAT\3.1\Target\Certificates\IEC61850\127.0.0.1.pem'; s Key Path : STRING(TCPADS_TLS_CERTIFICATE_PATH_SIZE):='C: \Twin CAT\3.1\Target\Certificates\IEC61850\127.0.0.1.key'; s Key Pwd : STRING(TCPADS_TLS_KEY_PASSWORD_SIZE) :='Server Pass'; s Crl Path : STRING(TCPADS_TLS_CERTIFICATE_PATH_SIZE):=''; flags : ST_Tls Listen Flags :=DEFAULT_TLSLISTENFLAGS; END_VAR IF b Enable THEN Enable:=fb Tls. Reset(); IF b PSK THEN fb Tls. Add Psk(key:=key, s Identity:=s Identity); ELSE fb Tls. Add Ca(s Ca Path:=s Ca Path); fb Tls. Add Cert(s Cert Path:=s Cert Path, s Key Path:=s Key Path, s Key Pwd:=s Key Pwd); IF s Crl Path <> '' THEN fb Tls. Add Crl(s Crl Path:=s Crl Path); END_IF fb Tls. Set Listen Flags(flags:=flags); END_IF END_IF Client TLS sample configuration VAR key : ARRAY[0..14] OF BYTE:=[16#1B,16#D0,16#6F,16#D2,16#56,16#16,16#7D,16#C1,16#E8,16#C7,1 6#48,16#2A,16#8E,16#F5,16#FF]; s Identity : STRING(TCPADS_TLS_PSK_IDENTITY_SIZE) :='My Identity'; s Ca Path : STRING(TCPADS_TLS_CERTIFICATE_PATH_SIZE):='C: \Twin CAT\3.1\Target\Certificates\IEC61850\root CA.pem'; s Cert Path : STRING(TCPADS_TLS_CERTIFICATE_PATH_SIZE):='C: \Twin CAT\3.1\Target\Certificates\IEC61850\client.pem'; s Key Path : STRING(TCPADS_TLS_CERTIFICATE_PATH_SIZE):='C: \Twin CAT\3.1\Target\Certificates\IEC61850\client.key'; s Key Pwd : STRING(TCPADS_TLS_KEY_PASSWORD_SIZE) :='Client Pass'; s Crl Path : STRING(TCPADS_TLS_CERTIFICATE_PATH_SIZE):=''; flags : ST_Tls Connect Flags :=DEFAULT_TLSCONNECTFLAGS; END_VAR IF b Enable THEN Enable:=fb Tls. Reset(); IF b PSK THEN fb Tls. Add Psk(key:=key, s Identity:=s Identity); ELSE fb Tls. Add Ca(s Ca Path:=s Ca Path); fb Tls. Add Cert(s Cert Path:=s Cert Path, s Key Path:=s Key Path, s Key Pwd:=s Key Pwd); IF s Crl Path <> '' THEN fb Tls. Add Crl(s Crl Path:=s Crl Path); END_IF fb Tls. Set Connect Flags(flags:=flags); END_IF END_IF Initialization of the TLS configuration in the IEC 61850 server or client The "FB_IEDTLSecurity" function block is instantiated in the "Tc Telecontrol" global variable list. The TLS configuration settings are passed to the IEC 61850 server or client by setting the "ip TLS" property in the server or client protocol settings. By assigning a valid interface pointer to the "ip TLS" property, the TLS configuration settings and thus TLS encryption are enabled. By assigning a null to the "ip TLS" property, the TLS configuration and encryption is disabled. In this example, we use the return value of the "Enable" method to enable (return value <> null) or disable (return value = null) TLS encryption. The return value of the "Enable" method is always null if the "b Enable" method parameter is "FALSE". Set the server TLS configuration The server in this sample has the IP address: "127.0.0.1". This address may need to be adjusted. VAR_GLOBAL … fb IEDTLSecurity: FB_IEDTLSecurity; fb IEDServer: FB_iec61850Server Class := (ip IED:=fb IED, settings:=(b Enable:=TRUE, s Local Host:='127 TF6510 Version: 1.7.1 703
## Page 704

Examples .0.0.1', ip TLS:=fb IEDTLSecurity. Enable(b Enable:=TRUE, b PSK:=TRUE))); … END_VAR Setting the client TLS configuration The client in this sample connects to a server with the IP address: "127.0.0.1". This address may also need to be adjusted. VAR_GLOBAL … fb IEDTLSecurity: FB_IEDTLSecurity; fb IEDClient: FB_IEDClient := (fb Connection:=(ip IED:=fb IED, settings:=(s Remote Host:='127.0.0.1', ip TLS:=fb IEDTLSecurity. Enable(b Enable:=TRUE, b PSK:=TRUE)))); … END_VAR Special features of the server certificate For TLS data encryption with certificates, the host name or IP address of the server is configured as either a "Common Name" or "Subject Alternative Name" parameter in the certificate. I.e. if you have adjusted the IP addresses in this sample and want to test the TLS encryption with certificates then you must also set the "Common Name" or the "Subject Alternative Name" in your certificate accordingly. Self-signed certificates can be used for testing. Such certificates can be created, for example, under Windows using a Power Shell script. Under Windows, the "Common Name" or the "Subject Alternative Name" can be checked relatively easily. Sample certificate with "Common Name"='192.168.10.160': Sample certificate with "Subject Alternative Name" = '127.0.0.1': 704 Version: 1.7.1 TF6510
## Page 705

Examples Secure ISO TP0 port It is recommended to use the (Secure ISO TP0) port number specified by IANA for active TLS communication (default value: 3782). Via the property "FB_Socket Tls Settings Class.n Secure Port" this port number (for the server and client) can be reconfigured to another value. In our implementation, this port number is automatically used once TLS configuration has been enabled by setting the "ip TLS" property in the IEC 61850 client or server function block. If no TLS configuration is active then the port number: "fb IEDServer.settings.n Local Port" is used for the server and the port number: "fb IEDClient.fb Connection.settings.n Remote Port" is used for the client (default value: 102). Test of the secure TLS connection with PSK In both, client/server sample projects, TLS with PSK (Pre-Shared Key) is configured and enabled by default. No certificates are required for TLS with PSK. For a simple function test, only the IP addresses in both projects need to be adjusted. Test of the secure TLS connection with certificates If you want to test TLS with certificates, then first copy the certificates and private keys to the server and client target systems. Server target system: • Root CA certificate (e.g.: C:\Twin CAT\3.1\Target\Certificates\IEC61850\root CA.pem) • Server certificate (e.g.: C:\Twin CAT\3.1\Target\Certificates\IEC61850\server.pem) • Private key of the server certificate (e.g.: C:\Twin CAT\3.1\Target\Certificates\IEC61850\server.key) Client target system: TF6510 Version: 1.7.1 705
## Page 706

Examples • Root CA certificate (e.g.: C:\Twin CAT\3.1\Target\Certificates\IEC61850\root CA.pem) • Client certificate (e.g.: C:\Twin CAT\3.1\Target\Certificates\IEC61850\client.pem) • Private key of the client certificate (e.g.: C:\Twin CAT\3.1\Target\Certificates\IEC61850\client.key) The file names above are only example names. You can adjust the paths and file names in the "Enable" method of the "FB_IEDTLSecurirty" function block. To enable the TLS configuration with certificates, the "b PSK" parameter in the "FB_IEDTLSecurity. Enable" method must be set to "FALSE". Enable TLS with certificate in the server project: VAR_GLOBAL … fb IEDServer: FB_iec61850Server Class := (ip IED:=fb IED, settings:=(b Enable:=TRUE, s Local Host:='192.168 .10.141', ip TLS:=fb IEDTLSecurity. Enable(b Enable:=TRUE, b PSK:=FALSE))); … END_VAR Enable TLS with certificate in the client project: VAR_GLOBAL … fb IEDClient: FB_IEDClient := (fb Connection:=(ip IED:=fb IED, settings:=(s Remote Host:='192.168.10.141', ip TLS:=fb IEDTLSecurity. Enable(b Enable:=TRUE, b PSK:=FALSE)))); … END_VAR 7.29 Authentication, negotiation of supported services and optional communication parameters This sample shows how a plain text password can be activated and configured to authenticate the connection in a Twin CAT IEC 61850 client or server application. This sample also shows how the server application can control the authentication process itself at runtime. This means that the application can accept or reject the connection depending on the password received. This sample also shows how the services and parameters supported by the IEC 61850 server are enabled and configured in the Twin CAT client and server application. The sample also shows how the server can control the negotiation of the supported services and parameters itself at runtime. The Twin CAT IEC 61850 server application can, for example, reject the services and/or parameters proposed by the client depending on the password received and thus restrict access to these services or parameters for certain connections or users. If you are using an older version of the Twin CAT IEC 61850 Telecontrol Configurator, the functionalities presented in this sample may not yet be supported. To be able to compile and test this sample without errors, you need a newer version of the TF6510 IEC 61850 Telecontrol. System requirement TF6510 IEC 61850 Telecontrol v3.2.98.0 or newer Download Twin CAT XAE Project (*.zip): https://infosys.beckhoff.com/content/1033/TF6510_TC3_IEC61850/ Resources/16992409099.zip General information about this sample project The sample consists of two separate Twin CAT IEC 61850 projects. After unpacking the zip file, you will find a Twin CAT IEC 61850 client project in the subfolder \Client\Sample31 and a Twin CAT IEC 61850 server project in the subfolder \Server\Sample31. Both projects are coordinated, only the IP address of the server has to be adjusted in the code of both projects. The client will establish a connection to the server when you download, activate and start the projects on two Twin CAT target systems connected via LAN. The Client - basic sample project [} 628] and Server - basic sample project [} 663] serve as the basis for the sample project. 706 Version: 1.7.1 TF6510
## Page 707

Examples Activation and configuration of the authentication function in the Twin CAT Telecontrol Configurator In the simplest variant, the authentication function can already be activated in the Twin CAT Telecontrol Configurator. The settings required for this can be found in the configuration dialog of the IED device. As shown in the image below, please set the parameter: Authentication mode to the value: Password. TF6510 Version: 1.7.1 707
## Page 708

Examples The IEC 61850 client or server project code generation generates the code required to activate the authentication function and configures a default password with the value: "PASSWORD" and a default mechanism with the name: "2.2.3.1". Bit 0 of the protocol setting: "n Requirements" activates the authentication function. Standard authentication parameters in the generated Twin CAT IEC 61850 project Namespace: Tc Telecontrol Type: Global Variable List (GVL) Client project: Server project: The default values can only be adjusted in the generated PLC code and not in the Twin CAT Telecontrol Configurator, as the authentication password and the mechanism name cannot be saved in the SCL file. Currently, the Twin CAT IEC 61850 implementation only supports the "Password" authentication method defined in the SCL. Other authentication methods "weak", "strong" or "certificate" are not supported. However, you can use TLS to encrypt all client-server communication. You can find a sample of this here: TLS - Secure client-server communication with the help of certificates or PSK [} 701]. Unilateral vs. mutual authentication mode The unilateral authentication mode (one-way authentication) is the standard mode for IEC 61850 authentication and is also supported by most devices. The mutual authentication mode (two-way authentication) is rather uncommon. With unilateral authentication, the password is only sent in one direction, from the client to the server. The server verifies the password and, if successful, the connection is maintained (accepted) or closed (rejected) in the event of an error. With mutual authentication, both communication partners verify the password of the other. First, the server verifies the password received from the client. If successful, the server also sends a password back to the client as a response. The client also verifies the password received from the server and if successful, the connection is maintained (accepted) or closed (rejected) if an error occurs. The unilateral authentication mode is configured by default in the Twin CAT IEC 61850 implementation. Configuration of the optional client and server communication parameters Some communication parameters in the protocol settings are optional parameters. It is not absolutely necessary for these parameter values to be transmitted. Nevertheless, it is possible that missing optional communication parameters may lead to the connection being terminated or communication errors. The connection request is often rejected by the other communication partner due to missing optional parameters. There are also devices that respond to the receipt of the optional parameters by terminating the connection. In such cases, you can adjust the protocol settings and activate or deactivate the transmission of the optional communication parameters according to the requirements. Adjust the protocol settings in the global variable list "Tc Telecontrol" of the server or client project. In the sample projects described here (server and client), the transmission of the following optional parameters is activated: • "n Called_AP_Inv ID:=0" 708 Version: 1.7.1 TF6510
## Page 709

Examples • "n Called_AE_Inv ID:=0" • "n Calling_AP_Inv ID:=0" • "n Calling_AE_Inv ID:=0" The value: 0 (null) is a valid value for these parameters and this value is also transmitted. The value: 16#FFFFFFFFFF configures a parameter as optional and in this case no value is transmitted. Simple authentication with a master password In the simplest variant of authentication, the server only accepts a single authentication password. In this case, you only need to adjust the already generated default password: "PASSWORD" in the created server or client application. For this functionality, no further changes or extensions to the generated PLC code are required for the time being. This one password can also be referred to as the master password. Any client using this password can successfully connect to the server. If your server implementation allows multiple connections, then multiple clients can also establish a connection to the server with the same master password. In the documented server sample, the main password is: "General Pass". This password can be configured via the server's protocol settings. In the sample code, you will find the parameter value in the global variable list: "Tc Telecontrol" (see image below). The important/relevant code sections are highlighted in bold. Namespace: Tc Telecontrol Type: Global Variable List (GVL) VAR_GLOBAL (*…*) (* IED data model *) fb IED: FB_IED_IED; b Mutual: BOOL:=FALSE; (* Server container *) fb IEDServer: FB_iec61850Server Class:=( ip IED:=fb IED, settings:=( b Enable:=TRUE, s Local Host:='127.0.0.1', s Authent_Value:='General Pass', s Mechanism_Name:='2.2.3.1', n Requirements:=16#01, e Acse_Authent:=SEL(b Mutual, E_Acse Authentication. Unilateral, E_Acse Authenticatio n. Mutual), s Responding_Value:='Responding Pass', n Called_AP_Inv ID:=0, n Called_AE_Inv ID:=0, n Calling_AP_Inv ID:=0, n Calling_AE_Inv ID:=0)); (* Server connections *) fb IEDServer Session1: FB_IEDServer Session:=( fb Connection:=( ip Server:=fb IEDServer, settings:=( b Enable:=TRUE, s Authent_Value:='Session1Pass'))); (*…*) END_VAR Authentication with a connection-specific password In the Twin CAT IEC 61850 server implementation, an additional connection-specific password can optionally be configured for each available server connection in addition to the main password. This password can be configured via the configuration settings of the server connection (e.g. "fb IEDServer Session1.fb Connection.settings"). The server in our sample above only accepts one connection. The configured connection-specific password is "Session1Pass". The server only accepts the server connection if the client sends either the main password or the configured connection-specific password via this server connection (in the sample above "General Pass" or "Session1Pass"). For servers with only one configured (permitted) server connection, you can assign a second password equivalent to the main password in this way and use it like a main password. TF6510 Version: 1.7.1 709
## Page 710

Examples During the connection establishment at the TCP/IP level, a free (unoccupied) server connection instance is assigned to a client that wants to connect to the server by default. However, it is possible to bind a client to a specific server connection via the client's IP address. In the sample below, we bind a client with the IP address "192.168.10.140" to the connection instance "fb IEDServer Session1" and another client with the IP address "192.168.10.160" to the connection instance "fb IEDServer Session2". A client with the IP address: "192.168.10.140" can only connect to the instance "fb IEDServer Session1" if it sends the master password or the password "Session1Pass". The client with the IP address "192.168.10.160" can only connect to the instance "fb IEDServer Session2" if it sends the master password or the password "Session2Pass". Namespace: Tc Telecontrol Type: Global Variable List (GVL) VAR_GLOBAL (*…*) fb IEDServer Session1: FB_IEDServer Session:=( fb Connection:=( ip Server:=fb IEDServer, settings:=(b Enable:=TRUE, s Authent_Value:='Session1Pass', s Accept Host:='192.168.10.140', e Accept:=E_Socket Accept Mode.e ACCEPT_SEL_HOST))); fb IEDServer Session2: FB_IEDServer Session:=( fb Connection:=( ip Server:=fb IEDServer, settings:=(b Enable:=TRUE, s Authent_Value:='Session2Pass', s Accept Host:='192.168.10.160', e Accept:=E_Socket Accept Mode.e ACCEPT_SEL_HOST))); (*…*) END_VAR Authentication with several additional passwords If the server is to accept multiple passwords, or the client is to establish the connection to the server not only with one password, but with several different passwords (sometimes with one, sometimes with the other), then you must add a few lines to the generated code yourself. Six different sample passwords were defined in the "pass List" array variable of the client sample project in order to present the different authentication options: • "General Pass" • "Session1Pass" • "Another Pass" • "More Pass" • "Further Pass" • "Unknown Pass" The variable "pass Index" selects the password that the client should use the next time a connection is established (see below). The global variable "b Mutual" can be used to switch between the two authentication modes unilateral and mutual. By default, the authentication mode is configured unilaterally in the sample. Namespace: Tc Telecontrol Type: Global Variable List (GVL) VAR_GLOBAL (*…*) (* IED data model *) fb IED: FB_IED_IED; b Mutual: BOOL:=FALSE; pass Index: DINT(0..5):=0; 710 Version: 1.7.1 TF6510
## Page 711

Examples (* Authentication passwords *) pass List: ARRAY[0..5] OF STRING:=['General Pass', 'Session1Pass', 'Another Pass', 'More Pass', 'Further Pass', 'Unknown Pass']; (* Client connection *) fb IEDClient : FB_IEDClient:=( fb Connection:=( ip IED:=fb IED, settings:=( s Remote Host:='127.0.0.1', s Authent_Value:=pass List[LIMIT(0, pass Index, 5)], s Mechanism_Name:='2.2.3.1', n Requirements:=16#01, e Acse_Authent:=SEL(b Mutual, E_Acse Authentication. Unilateral, E_A cse Authentication. Mutual), s Responding_Value:='Responding Pass', n Called_AP_Inv ID:=0, n Called_AE_Inv ID:=0, n Calling_AP_Inv ID:=0, n Calling_AE_Inv ID:=0))); (*…*) END_VAR You will find some additional variables in both the client and the server sample application. These variables, such as "b Accepted", "e Aare Result", "e Aare Diagnostic" or "s Password" can be used for visual monitoring in online mode or for diagnostic purposes. The values of these variables are set, for example, in the client sample project in the implementation code of the "On Associate Cnf" event handling routine of the "FB_IEDClient" function block. In the server sample project, these values are set in the implementation code of the "On Associate Ind" event handling routine of the "FB_IEDServer Session" function block. FUNCTION_BLOCK FB_IEDClient IMPLEMENTS I_Scsm Abort Ind Event Sink, I_Scsm Associate Cnf Event Sink, I_Scsm Get Server Directory Cnf Event Sink, I_Scsm Get Logical Device Directory Cnf Event Sink, I_Scsm Get Logical Node Directory Cnf Event Sink, I_Scsm Get Data Values Cnf Event Sink, I_Scsm Set Data Values Cnf Event Sink, I_Scsm Report Ind Event Sink, I_Scsm Control Cnf Event Sink, I_Scsm Last Appl Error Ind Event Sink, I_Scsm Command Termination Ind Event Sink VAR_INPUT fb Connection : FB_iec61850Client Class:=(ip Abort Ind:=THIS^, ip Associate Cnf:=THIS^, ip Get Server Directory Cnf:=THIS^, ip Get Logical Device Directory Cnf:=THIS^, ip Get Logical Node Directory Cnf:=THIS^, ip Get Data Values Cnf:=THIS^, ip Set Data Values Cnf:=THIS^, ip Report Ind:=THIS^, ip Control Cnf:=THIS^, ip Last Appl Error Ind:=THIS^, ip Command Termination Ind:=THIS^); END_VAR VAR (*…*) b Accepted : BOOL:=FALSE; s Password : STRING:=''; s Mechanism Name : STRING:=''; s Responding Pass : STRING:=''; e Aare Result : E_ACSE_Aare Result:=E_ACSE_Aare Result. Accepted; e Aare Diagnostic : E_ACSE_Aare Diagnostic:=E_ACSE_Aare Diagnostic. Null; e Abrt Diagnostic : E_ACSE_Abrt Diagnostic:=E_ACSE_Abrt Diagnostic. Null; (*…*) END_VAR (*…*) CASE state OF 0: IF _b Abort THEN TF6510 Version: 1.7.1 711
## Page 712

Examples _b Abort:= FALSE; b Success:= fb Connection. Abort Req(ip Reason:=fb Abort Reason, ip Sink:=0, ip Result=>ip Result) ; state:= SEL(b Success, 100, 1); ELSIF e State = E_Async Environment State. Idle AND (_b Connect OR _b Reconnect) THEN _b Connect:= FALSE; b Get All Server Values:= SEL(_b Read All Data, b Get All Server Values, TRUE); fb Connection.settings.e Acse_Authent:= SEL(Tc Telecontrol.b Mutual, E_Acse Authentication. Un ilateral, E_Acse Authentication. Mutual); fb Connection.settings.s Authent_Value:= Tc Telecontrol.pass List[LIMIT(0, pass Index, 5)]; b Success:= fb Connection. Associate Req(ip Sink:=0, ip Result=>ip Result); state:= SEL(b Success, 100, 1); (*…*) END_CASE Control of the authentication process in the server application The server in the standard implementation automatically verifies the mechanism name and the received password internally. If the result of this check is positive, the connection is accepted (maintained) by the server and rejected (closed) if the result is negative. This functionality does not require any special extensions to the automatically generated PLC code. However, it is also possible to actively control the authentication process at runtime in the server application. This means that the server can decide itself (spontaneously) whether to accept or reject a connection. In this case, if conditions allow, a connection rejected by internal verification can still be accepted, and an internally accepted connection can still be rejected. As an example of the unilateral authentication mode with additional passwords, the following behavior is implemented in the server sample: • With the main password "General Pass", the server should accept the connection. This password is configured in the global variable list "Tc Telecontrol" and the server would have accepted the password even without a special code extension. • The client password "Session1Pass" should be rejected by the server. In the standard implementation, the server would have accepted the connection as this password is also configured as a connection- specific password in the global variable list "Tc Telecontrol". • Three additional client passwords "Another Pass", "More Pass" and "Further Pass" should be accepted by the server. In the standard implementation, the internal verification would have rejected the connection requests with these passwords. • The connection with the password "Unknown Pass" and all other unknown passwords should be rejected by the server. The internal verification in the standard implementation would also have rejected the connection requests with these passwords. An additional PLC code in the "On Assciate Ind" event handling routine allows the server application to subsequently change the result of the internal verification; this is used in the server sample. The values of the additional local variables of the "FB_IEDServer Session" function block are set in the implementation code of the event handling routine: "On Associate Ind". FUNCTION_BLOCK FB_IEDServer Session IMPLEMENTS I_Scsm Abort Ind Event Sink, I_Scsm Associate Ind Event Sink, I_Scsm Release Ind Event Sink VAR_INPUT fb Connection : FB_iec61850Connection Class:=(ip Abort Ind:=THIS^, ip Associate Ind:=THIS^, ip Release Ind:=THIS^); END_VAR VAR (*…*) b Accepted : BOOL:=FALSE; s Password : STRING:=''; s Mechanism Name : STRING:=''; s Responding Pass : STRING:=''; e Aare Result : E_ACSE_Aare Result:=E_ACSE_Aare Result. Accepted; e Aare Diagnostic : E_ACSE_Aare Diagnostic:=E_ACSE_Aare Diagnostic. Null; e Abrt Diagnostic : E_ACSE_Abrt Diagnostic:=E_ACSE_Abrt Diagnostic. Null; (*…*) END_VAR 712 Version: 1.7.1 TF6510
## Page 713

Examples The Boolean variable "b Accepted" will be "TRUE" if the internal verification accepts the authentication data and thus also the connection. However, this variable will also be "TRUE" if the server authentication function has not been activated in the protocol settings. User-defined On Associate Ind event handling routine of the server The result of the internal verification can only be subsequently influenced if the authentication function of both communication partners is active and all other framework conditions (communication parameters such as mechanism name and password) have been correctly configured or received. The server application can access the interface pointer "ip Authentication" of type I_Scsm Authentication Class [} 402] via the input variable "ip AA" of the event handling routine "On Associate Ind". The interface pointer belongs to the authentication object, which also carries out the verification internally. The internal verification is already carried out by the server before the "On Associate Ind" event handling routine is called. The first result is already known when the method is called. The interface pointer "ip Authentication" provides the application methods to query the result of the verification, to accept a connection rejected by the internal verification, or to reject an accepted connection. A connection that has already been rejected by internal verification cannot be rejected again and a connection that has been accepted by internal verification cannot be accepted again. In this case, the "Accept" or "Reject" method calls will return FALSE (error). METHOD On Associate Ind : BOOL VAR_INPUT ip AA : I_Scsm Association Class; END_VAR VAR_OUTPUT ip Result : I_Async Service Result Class; END_VAR (*…*) b Accepted:= FALSE; s Mechanism Name:= ''; s Password:= ''; s Responding Pass:= ''; e Aare Result:= E_ACSE_Aare Result. Accepted; e Aare Diagnostic:= E_ACSE_Aare Diagnostic. Null; e Abrt Diagnostic:= E_ACSE_Abrt Diagnostic. Null; IF (ip AA <> 0) AND_THEN (ip AA.ip Authentication <> 0) THEN IF ip AA.ip Authentication. Get Verify Result(b Accepted=>b Accepted, s Mechanism Name=>s Mechanism Name, s Password=>s Password, s Responding Pass=>s Responding Pass, e Result=>e Aare Result, e Diagnostic=>e Aare Diagnostic, e Abrt Diagnostic=>e Abrt Diagnostic) THEN IF b Accepted THEN IF (s Password = 'General Pass') THEN ; ELSIF (s Password = 'Session1Pass') THEN b Success:= ip AA.ip Authentication. Reject(); ELSE ; END_IF ELSE IF (s Password = 'Another Pass') OR_ELSE (s Password = 'More Pass') THEN b Success:= ip AA.ip Authentication. Accept(s Responding Pass:='Responding Pass'); ELSIF (s Password = 'Further Pass') THEN b Success:= ip AA.ip Authentication. Accept(s Responding Pass:='Invalid Responding Pass'); ELSIF (s Password = 'Unknown Pass') THEN ; ELSE ; END_IF END_IF ip AA.ip Authentication. Get Verify Result(b Accepted=>b Accepted, s Mechanism Name=>s Mechanism Name, s Password=>s Password, s Responding Pass=>s Responding Pass, e Result=>e Aare Result, e Diagnostic=>e Aare Diagnostic, e Abrt Diagnostic=>e Abrt Diagnostic); END_IF (* Negotiation example of max. number of outgoing called and calling services: *) ip AA.ip Authentication.n Negotiated Max Serv Out Called:= 5; (* Default: 10 *) TF6510 Version: 1.7.1 713
## Page 714

Examples ip AA.ip Authentication.n Negotiated Max Serv Out Calling:= 5; (* Default: 10 *) (* Example of supported services negotiation: *) IF ip AA.ip Authentication.ip Negotiated Services Supported <> 0 THEN (* Disable support for file services *) ip AA.ip Authentication.ip Negotiated Services Supported.b File Close:= FALSE; ip AA.ip Authentication.ip Negotiated Services Supported.b File Delete:= FALSE; ip AA.ip Authentication.ip Negotiated Services Supported.b File Directory:= FALSE; ip AA.ip Authentication.ip Negotiated Services Supported.b File Open:= FALSE; ip AA.ip Authentication.ip Negotiated Services Supported.b File Read:= FALSE; ip AA.ip Authentication.ip Negotiated Services Supported.b File Rename:= FALSE; ip AA.ip Authentication.ip Negotiated Services Supported.b Obtain File:= FALSE; END_IF END_IF (*…*) On Associate Ind:= fb Connection. Associate Rsp(ip Result=>ip Result); In this server sample, the "Get Verify Result" method call first reads the result of the internal verification and some diagnostic information. The internally already accepted connection with the password "Session1Pass" is then rejected with the "Reject" method call and the internally already rejected connections with the passwords "Another Pass", "More Pass" and "Further Pass" are still accepted with the "Accept" method call. Finally, the verification result is read again. Only then may the response be sent to the client with the "Associate Rsp" method call. Dynamic negotiation of supported server services and parameters In most use cases, the services and parameters supported by the server can be configured via protocol settings in the global variable list "Tc Telecontrol". The settings made there then apply to all connections on the server. This means that all clients can only negotiate with the server those services that have been globally configured (activated) for all connections. In some use cases, however, it may be necessary to negotiate different server services and parameters depending on the client connection (e.g. depending on the client's IP address or authentication password). The server could allow/support more services with a specific client connection and fewer with another client connection. The event handling routine "On Associate Ind" can be used to negotiate the supported services and parameters at runtime (connection-dependent). A server application can access the internal result of the negotiated services and parameters via the interface variable "ip AA.ip Authentication". The result can still be manipulated as required at this stage. In the sample code above, the maximum number of incoming and outgoing confirmed requests (MMS request) is limited from the default value of 10 to 5 and support for all MMS file services is disabled. Only then is the new result sent back to the client in the answer telegram. Simple authentication in mutual authentication mode The mutual authentication mode must be supported by both communication partners and is rather unusual in IEC 61850. In this mode, the server sends a password back to the client as a response. This response password is already configured in the server sample project with the value "Responding Pass" in the global variable list "Tc Telecontrol". In the client sample project, a password "Responding Pass" is also configured in the global variable list "Tc Telecontrol". This is the password that the client expects as a response from the server. The client's internal verification function will compare this password with the password received from the server. If successful, the connection is maintained and if unsuccessful, it is closed again. In the simplest configuration, the response passwords only need to be adjusted/configured in the generated server and client sample projects and the mutual authentication mode activated in the protocol settings. Additional code in the "On Associate Ind" or "On Associate Cnf" event handling routines is not required for mutual authentication in the basic function. User-defined On Associate Cnf event handling routine of the client In mutual authentication mode, the client, like the server, can also actively control the authentication process at runtime. However, the server must have already accepted the password received from the client. A connection rejected by the server (negative response) can no longer be accepted on the client side. In unilateral mode, it is not necessary to implement the "On Associate Cnf" event handling routine. The user- defined implementation of the "On Associate Cnf" event handling routine presented here is only useful in mutual authentication mode. 714 Version: 1.7.1 TF6510
## Page 715

Examples To present the various available options, the following behavior was implemented in the sample: • The server responds to the client password "Further Pass" with an incorrect password "Invalid Responding Pass". In the standard implementation, the client would have closed the connection again due to the incorrect response. In our sample, the wrong password is accepted and the connection is maintained. • With the client password "Session1Pass", "Unknown Pass", the connection is already rejected by the server. • The server responds to all other client passwords with the password "Responding Pass". With the client password "More Pass", however, the client should still reject the connection. METHOD On Associate Cnf VAR_INPUT ip AA : I_Scsm Association Class; e Error : E_Acsi Service Error; END_VAR VAR END_VAR s Last Abort Reason:= ''; s Last Error Result:= ''; b Accepted:= FALSE; s Mechanism Name:= ''; s Password:= ''; s Responding Pass:= ''; e Aare Result:= E_ACSE_Aare Result. Accepted; e Aare Diagnostic:= E_ACSE_Aare Diagnostic. Null; e Abrt Diagnostic:= E_ACSE_Abrt Diagnostic. Null; IF (ip AA <> 0) AND_THEN (ip AA.ip Authentication <> 0) THEN IF ip AA.ip Authentication. Get Verify Result(b Accepted=>b Accepted, s Mechanism Name=>s Mechanism Name, s Password=>s Password, s Responding Pass=>s Responding Pass, e Result=>e Aare Result, e Diagnostic=>e Aare Diagnostic, e Abrt Diagnostic=>e Abrt Diagnostic) THEN IF b Accepted THEN IF (s Password = 'General Pass') OR_ELSE (s Password = 'Another Pass') THEN ; ELSIF (s Password = 'More Pass') THEN b Success:= ip AA.ip Authentication. Reject(); ELSE ; END_IF ELSE IF (s Password = 'Further Pass') THEN b Success:= ip AA.ip Authentication. Accept(s Responding Pass:='Responding Pass'); ELSE ; END_IF END_IF ip AA.ip Authentication. Get Verify Result(b Accepted=>b Accepted, s Mechanism Name=>s Mechanism Name, s Password=>s Password, s Responding Pass=>s Responding Pass, e Result=>e Aare Result, e Diagnostic=>e Aare Diagnostic, e Abrt Diagnostic=>e Abrt Diagnostic); ELSE ; END_IF END_IF As with the "On Associate Ind" event handling routine of the server described above, the client application can also access the "ip Authentication" interface pointer of type I_Scsm Authentication Class [} 402] via the "ip AA" input variable of the "On Associate Cnf" event handling routine. With the "Get Verify Result" method call, the client application can query the result of the internal verification and modify it if necessary. TF6510 Version: 1.7.1 715
## Page 716

Examples Test To be able to carry out a simple test, the network address (IPv4 address) of the Twin CAT IEC 61850 server must first be adapted in the server and client sample project. If the client and server sample project is downloaded and started on two Twin CAT target systems, the client will use the "General Pass" password for authentication and establish a connection to the server. The password used is selected in the global variable list "Tc Telecontrol" of the client project using the index variable "pass Index" from the array "pass List". In the sample, the variable "pass Index" has the initial value "0" and selects the first password from the "pass List" array with the value "General Pass". Next, you can set the password index variable "pass Index" to the value "2" and the Boolean variable "fb IEDClient._b Abort" to the value "TRUE" in online mode, for example (see image below). The client will first close the old connection and then establish a new one with the password "Another Pass". In this way, you can try out the different passwords implemented in the sample. If the "pass Index" value is 1 or 5, for example, the server will reject the connection request. Please note that it may take a few seconds before a new connection can be established. By default, the minimum time for re-establishing a connection is set to 45 seconds in the configuration settings "fb IEDClient.fb Connection.settings.t Connect". 716 Version: 1.7.1 TF6510
## Page 717

Appendix 8 Appendix 8.1 Binary-Time LWORD format specification The Twin CAT Binary-Time components are coded in LWORD in the following way: Bit Compo- Type Value range Description nent 0..31 time Of Da TOD 0..16#05265BFF Number of milliseconds since midnight of the current day. y "16#05265BFF"=23:59:59 and 999 ms=86399999 ms. 32..47 day WORD 0..16#FFFF Number of days since January 1, 1984. 48..63 reserved WORD 0 These bits are not used. Default: Samples The table below contains some LWORD numerical values and the values after conversion to the formatted Binary-Time string and the structured type T_Binary Time [} 516]. LWORD STRING(26) T_Binary Time 16#000000000000 'BT#1984-01-01-00:00:00' STRUCT(time Of Day:=TOD#00:00:00, day:=0) 16#000000000001 'BT#1984-01-01-00:00:00. STRUCT(time Of Day:=TOD#00:00:00.001, day:=0) 001' 16#2F650270E660 'BT#2017-03-21-11:22:33. STRUCT(time Of Day:=TOD#11:22:33.440, 440‘ day:=16#2F65) 16#30E805265BFF 'BT#2018-04-12-23:59:59. STRUCT(time Of Day:=TOD#23:59:59.999, 999' day:=16#30E8) 8.2 Binary-Time string format specification A Twin CAT Binary-Time string has a max. length of 26 characters and the following structure: ‘BT#[YYYY- MM-DD-]hh:mm:ss[.n[n[n]]]‘. Using the conversion function String_To_Binary Time6 [} 310], the Binary-Time information, which is formatted as a string, can easily be converted into the components of the structured type T_Binary Time [} 516]. The date is converted into the "day" component (2 bytes) and the time into the "time Of Day" component (4 bytes). The date in the Binary-Time string is optional and need not be specified. If the date was not specified, then the string is a 4-byte Binary-Time format (only the "time Of Day" component). In this case the value 0 is implicitly assigned during the conversion of the "day" component (this corresponds to the date 1984-01-01). A string with date is a 6-byte Binary-Time format ("time Of Day" and "day" component). Variable Representation Value range Description Prefix BT# ‘BT#‘ Constant prefix. Year YYYY ‘1984‘..‘2106‘ Year (4 decimal places, optional). Month MM ‘01‘..‘12‘ Month (2 decimal places, optional). Day DD ‘01‘..‘31‘ Day (2 decimal places, optional). Hour hh ‘00‘..‘23‘ Hour (2 decimal places). Minute mm ‘00‘..‘59‘ Minute (2 decimal places). Second ss ‘00‘..‘59‘ Second (2 decimal places). Millisecond n[n[n]]] ‘‘,‘0‘..‘999‘ Millisecond (0 to 3 decimal places, optional). Samples The table below contains some strings and the values of the components after conversion to the structured type T_Binary Time [} 516]. TF6510 Version: 1.7.1 717
## Page 718

Appendix STRING(26) T_Binary Time ‘BT#1984-01-01-00:00:00‘ STRUCT(time Of Day:=TOD#00:00:00, day:=0) ‘BT#2018-03-04-11:12:55.6‘ STRUCT(time Of Day:=TOD#11:12:55.600, day:=16#30C1) ‘BT#2018-03-04-11:12:55.678‘ STRUCT(time Of Day:=TOD#11:12:55.678, day:=16#30C1) ‘BT#01:02:03‘ STRUCT(time Of Day:=TOD#01:02:03, day:=0) ‘BT#01:02:03.5‘ STRUCT(time Of Day:=TOD#01:02:03.500, day:=0) ‘BT#01:02:03.567‘ STRUCT(time Of Day:=TOD#01:02:03.567, day:=0) 8.3 UTC-Time LWORD format specification The Twin CAT UTC-Time components are coded in LWORD in the following way: Bit Component Type Value range Description 0..31 second Since Epoch DT 0..16#FFFFFFFF Number of whole seconds since January 1, 1970. 32..55 fraction Of Second T_UINT24 [} 519] 0..16#FFFFFF Seconds fraction encoded as 24-bit number. 56 Quality. Leap Seconds BIT 0..1 Quality of the leap second Known (0:=unknown, 1:=known). 57 Quality. Clock Failure BIT 0..1 Quality of the timer (0:=good, 1:=erroneous). 58 Quality. Clock Not Sync BIT 0..1 Quality of the time synchronization hronized (0:=synchronized, 1:=not synchronized). 59 Quality. Accuracy0 BIT 0..1 Accuracy of the time information (precision of the fraction of a 60 Quality. Accuracy1 BIT 0..1 second). The accuracy bits 61 Quality. Accuracy2 BIT 0..1 determine the number of significant 62 Quality. Accuracy3 BIT 0..1 bits of the T_Utc Time 63 Quality. Accuracy4 BIT 0..1 [} 519].fraction Of Second component. The UTC-Time.fraction Of Second component is coded in the 24 bits of the type T_UINT24 in the following way: Bit Component Value 0 fraction Of Second[0].0 0.5 s 1 fraction Of Second[0].1 0.25 s 2 fraction Of Second[0].2 0.125 s 3 fraction Of Second[0].3 0.0625 s 4 fraction Of Second[0].4 0.03125 s 5 fraction Of Second[0].5 0.015625 s 6 fraction Of Second[0].6 0.0078125 s 7 fraction Of Second[0].7 0.00390625 s 8 fraction Of Second[1].0 0.001953125 s 9..15 fraction Of Second[1].1..7 etc. 16..23 fraction Of Second[2].0..7 -/- Samples The table below contains some fraction-of-a-second values and the values of the fraction Of Second array elements after the conversion. 718 Version: 1.7.1 TF6510
## Page 719

Appendix Fraction of a second T_UINT24 Description 0 s [0,0,0] All bits have the value: 0. 0.75 s [3,0,0] Bits 0 and 1 are set. Value calculation: 0.5 s + 0.25 s = 0.75 s. 0.875 s [7,0,0] Bits 0, 1 and 2 are set. Value calculation: 0.5 s + 0.25 s + 0.125 s = 0.875 s. 0.5625 s [9,0,0] Bits 0 and 3 are set. Value calculation: 0.5 s + 0.0625 s = 0.5625 s. Coding of the precision in the UTC-Time. Quality. Accuracy0..4 bits. Precision Accuracy0 Accuracy1 Accuracy2 Accuracy3 Accuracy4 E_Utc Time Accuracy 0-bit 0 0 0 0 0 Zero 1-bit 0 0 0 0 1 _01 2-bit 0 0 0 1 0 _02 3-bit 0 0 0 1 1 _03 4-bit 0 0 1 0 0 _04 5-bit 0 0 1 0 1 _05 6-bit 0 0 1 1 0 _06 7-bit 0 0 1 1 1 _07 8-bit 0 1 0 0 0 _08 9-bit 0 1 0 0 1 _09 10-bit 0 1 0 1 0 _10 11-bit 0 1 0 1 1 _11 12-bit 0 1 1 0 0 _12 13-bit 0 1 1 0 1 _13 14-bit 0 1 1 1 0 _14 15-bit 0 1 1 1 1 _15 16-bit 1 0 0 0 0 _16 17-bit 1 0 0 0 1 _17 18-bit 1 0 0 1 0 _18 19-bit 1 0 0 1 1 _19 20-bit 1 0 1 0 0 _20 21-bit 1 0 1 0 1 _21 22-bit 1 0 1 1 0 _22 23-bit 1 0 1 1 1 _23 24-bit 1 1 0 0 0 _24 Impermissibl 1 1 n n n _25_invalid.._30_invalid e Not specified 1 1 1 1 1 Unspecified Samples The table below contains some LWORD values and the values after conversion to a formatted Binary-Time string and the structured type: T_Utc Time [} 519]. TF6510 Version: 1.7.1 719
## Page 720

Appendix LWO STRING(3 T_Utc Time Description RD 9) 16#00 'UT#1970- STRUCT(0) All components have the value 0. Date: 00000 01-01-00:0 January 1, 1970. Time: 00:00:00. Fraction of a 00000 0:00.0000 second: 0 ms. Precision: 0 bit. 0000 00000| 000|0' 16#C 'UT#2000- STRUCT(second Since Epoch:=DT#2000- Date: January 1, 2000. Time: 00:00:00. 40000 01-01-00:0 01-01-00:00:00, Fraction of a second: 0 ms. Timer is not 00386 0:00.0000 fraction Of Second:=[0,0,0], synchronized. Precision: 3-bit. D438 00000| quality:=(Clock Not Synchronized:=1, 0 001|3' Accuracy3:=1, Accuracy4:=1)) 16#A4 'UT#2000- STRUCT(second Since Epoch:=DT#2000- Date: January 1, 2000. Time: 00:00:00. 00000 01-01-00:0 01-01-00:00:00, Fraction of a second: 500 ms. Timer is not 1386 0:00.5000 fraction Of Second:=[1,0,0], synchronized. Precision: 5-bit. D438 00000| quality:=(Clock Not Synchronized:=1, 0 001|5' Accuracy2:=1, Accuracy4:=1)) 16#81 'UT#2106- STRUCT(second Since Epoch:=DT#2106- Date: February 7, 2106. Time: 06:28:15. 00000 02-07-06:2 02-07-06:28:15, Fraction of a second: 0 ms. Leap seconds are 0FFF 8:15.0000 fraction Of Second:=[0,0,0], unknown. Precision: 1-bit. FFFF 00000| quality:=(Leap Seconds Known:=1, F 100|1' Accuracy4:=1)) 16#C 'UT#2106- STRUCT(second Since Epoch:=DT#2106- Date: February 7, 2106. Time: 06:28:15. 20000 02-07-06:2 02-07-06:28:15, Fraction of a second: 875 ms. Timer signals 07FF 8:15.8750 fraction Of Second:=[7,0,0], an error. Precision: 3-bit. FFFF 00000| quality:=(Clock Failure:=1, Accuracy3:=1, FF 010|3' Accuracy4:=1)) 16#1 'UT#2106- STRUCT(second Since Epoch:=DT#2106- Date: February 7, 2106. Time: 06:28:15. C000 02-07-06:2 02-07-06:28:15, Fraction of a second: 875 ms. Timer is not 007FF 8:15.8750 fraction Of Second:=[7,0,0], synchronized. Precision: 24-bit. FFFF 00000| quality:=(Clock Not Synchronized:=1, FF 001|24' Accuracy0:=1, Accuracy1:=1)) 8.4 UTC-Time-Quality BYTE format specification The Twin CAT UTC-Time-Quality components are coded in BYTE in the following way: Bit Component Type Value range Description 0 Leap Seconds Known BIT 0..1 Quality of the leap second (0:=unknown, 1:=known). 1 Clock Failure BIT 0..1 Quality of the timer (0:=good, 1:=erroneous). 2 Clock Not Synchronized BIT 0..1 Quality of the time synchronization (0:=synchronized, 1:=not synchronized). 3 Accuracy0 BIT 0..1 (MSB) Accuracy of the time information (precision of the fraction of a second). Max. number of significant 4 Accuracy1 BIT 0..1 bits in the T_Utc Time [} 519].fraction Of Second 5 Accuracy2 BIT 0..1 component. 6 Accuracy3 BIT 0..1 In the precision, Accuracy0 is the most 7 Accuracy4 BIT 0..1 (LSB) significant bit and Accuracy4 the least significant bit. Coding of the precision in the UTC-Time. Quality. Accuracy0..4 bits. 720 Version: 1.7.1 TF6510
## Page 721

Appendix Precision Accuracy0 Accuracy1 Accuracy2 Accuracy3 Accuracy4 E_Utc Time Accuracy 0-bit 0 0 0 0 0 Zero 1-bit 0 0 0 0 1 _01 2-bit 0 0 0 1 0 _02 3-bit 0 0 0 1 1 _03 4-bit 0 0 1 0 0 _04 5-bit 0 0 1 0 1 _05 6-bit 0 0 1 1 0 _06 7-bit 0 0 1 1 1 _07 8-bit 0 1 0 0 0 _08 9-bit 0 1 0 0 1 _09 10-bit 0 1 0 1 0 _10 11-bit 0 1 0 1 1 _11 12-bit 0 1 1 0 0 _12 13-bit 0 1 1 0 1 _13 14-bit 0 1 1 1 0 _14 15-bit 0 1 1 1 1 _15 16-bit 1 0 0 0 0 _16 17-bit 1 0 0 0 1 _17 18-bit 1 0 0 1 0 _18 19-bit 1 0 0 1 1 _19 20-bit 1 0 1 0 0 _20 21-bit 1 0 1 0 1 _21 22-bit 1 0 1 1 0 _22 23-bit 1 0 1 1 1 _23 24-bit 1 1 0 0 0 _24 Impermissibl 1 1 n n n _25_invalid.._30_invalid e Not specified 1 1 1 1 1 Unspecified Samples The table below contains some BYTE numerical values and the values after conversion to the formatted UTC Time-Quality string and the structured type: T_Utc Time Quality [} 520]. BYTE STRING(9) T_Utc Time Quality Description 2#00000000 'UQ#000|0' STRUCT(0) All components have the value: 0. Precision: 0-bit. 2#11000000 'UQ#000|3' STRUCT(Accuracy3:=1, Accuracy4:=1) Precision: 3-bit. All other components have the value 0. 2#10100100 'UQ#001|5' STRUCT(Clock Not Synchronized:=1, Timer is not synchronized. Accuracy2:=1, Accuracy4:=1) Precision: 5-bit. All other components have the value 0. 2#11111010 'UQ#010|31' STRUCT(Clock Failure:=1, Accuracy0:=1, Timer signals an error. Precision: Accuracy1:=1, Accuracy2:=1, Not specified. All other components Accuracy3:=1, Accuracy4:=1) have the value 0. 8.5 UTC-Time-Quality string format specification A Twin CAT UTC-Time-Quality string has the following structure: 'UQ#LFC|A[A]'. TF6510 Version: 1.7.1 721
## Page 722

Appendix Variable Representa- Value range Description tion Prefix UQ# ‘UQ#‘ Constant prefix. Leap Seconds L ‘0‘..‘1‘ Quality of the leap second ('0':=unknown, '1':=known). Known Clock Failure F ‘0‘..‘1‘ Quality of the timer ('0':=good, '1':=erroneous). Clock Not Sync C ‘0‘..‘1‘ Quality of the time synchronization ('0':=synchronized, hronized '1':=not synchronized). Accuracy A[A] ‘0‘..‘31‘ Accuracy of the time information (precision of the fraction of a second). Max. number of significant bits in the T_Utc Time [} 519].fraction Of Second component (1 or 2 decimal places). Samples The table below contains some strings and the values of the components after conversion to the structured type T_Utc Time Quality [} 520]. STRING(9) T_Utc Time Quality Description 'UQ#000|0' STRUCT(0) All components have the value: 0. 'UQ#001|3' STRUCT(Clock Not Synchronized:=1, Timer not synchronized. Precision: 3-bit. Accuracy3:=1, Accuracy4:=1) All other components have the value: 0. 'UQ#000|24' STRUCT(Accuracy0:=1, Accuracy1:=1) Precision: 24-bit. All other components have the value: 0. 8.6 UTC-Time string format specification A Twin CAT UTC-Time string has the following structure: ‘UT#YYYY-MM-DD-hh:mm:ss.nnnnnnnnn|LFC| A[A]'. Variable Representation Value range Description Prefix UT# ‘UT#‘ Constant prefix. Year YYYY ‘1970‘..‘2106‘ Year (4 decimal places). Month MM ‘01‘..‘12‘ Month (2 decimal places). Day DD ‘01‘..‘31‘ Day (2 decimal places). Hour hh ‘00‘..‘23‘ Hour (2 decimal places). Minute mm ‘00‘..‘59‘ Minute (2 decimal places). Second ss ‘00‘..‘59‘ Second (2 decimal places). Nanosecond nnnnnnnnn ‘000000000‘..‘99 Nanoseconds: (9 decimal places). 9999999‘ Leap Seconds K L ‘0‘..‘1‘ Quality of the leap second ('0':=unknown, '1':=known). nown Clock Failure F ‘0‘..‘1‘ Quality of the timer ('0':=good, '1':=erroneous). Clock Not Sync C ‘0‘..‘1‘ Quality of the time synchronization ('0':=synchronized, hronized '1':=not synchronized). Accuracy A[A] ‘0‘..‘31‘ Accuracy of the time information (precision of the fraction of a second). Max. number of significant bits in the T_Utc Time [} 519].fraction Of Second component (1 or 2 decimal places). Samples The table below contains strings and the values of the components after conversion to the structured type: T_Utc Time [} 519]. 722 Version: 1.7.1 TF6510
## Page 723

Appendix STRING(39) T_Utc Time Description 'UT#1970-01 STRUCT(0) All components have the value: 0. Date: -01-00:00:00. January 1, 1970. Time: 00:00:00. Fraction 000000000| of a second: 0 ms. Precision: 0-bit. 000|0' 'UT#2018-01 STRUCT(second Since Epoch:=DT#2018-01-02-0 Date: January 2, 2018. Time: 03:04:05. -02-03:04:05. 3:04:05, fraction Of Second:=[4,0,0], Fraction of a second: 125000000 ns := 125000000| quality:=(Clock Failure:=1, Accuracy3:=1, 125 ms. Timer signals an error. Precision: 010|3' Accuracy4:=1)) 3-bit. All other components have the value: 0. 'UT#2018-01 STRUCT(second Since Epoch:=DT#2018-01-02-0 Date: January 2, 2018. Time: 03:04:05. -02-03:04:05. 3:04:05, fraction Of Second:=[3,0,0], Fraction of a second: 750000000 ns := 750000000| quality:=(Clock Not Synchronized:=1, 750 ms. Timer is not synchronized. 001|24' Accuracy0:=1, Accuracy1:=1)) Precision: 24-bit. All other components have the value: 0. 8.7 Quality-String format specification A Twin CAT Quality string has the following structure: 'Q#vv|ORBSFDCA|s|TB'. Variable Representation Value range Description Prefix Q# ‘Q#‘ Constant prefix. Validity [} 723] vv ‘00‘,‘01‘..‘11‘ Validity. Overflow O '0'..'1' Overflow. Out Of Range R '0'..'1' Not in permissible range. Bad Reference B '0'..'1' Incorrect reference. Oscilatory S '0'..'1' Oscillating. Failure F '0'..'1' Failure. Old Data D '0'..'1' Data not up to date. Inconsistent C '0'..'1' Inconsistent. Inaccurate A '0'..'1' Inaccurate. Source [} 723] s '0'..'1' Source (‘0‘:=process, ‘1‘:=replaced). Test T '0'..'1' Test. Operator Block B '0'..'1' Operator blocked. ed Coding of the Quality. Validity components: Value Validity0 Validity1 STRING(2) Description Good 0 0 ‘00‘ Good (default value). Invalid 0 1 ‘01‘ Invalid. Reserved 1 0 ‘10‘ Reserved. Questionable 1 1 ‘11‘ Questionable. Coding of the Quality. Source components: Value Source STRING(1) Description Process 0 ‘0‘ Value comes from the process (default value). Substituted 1 ‘1‘ Value was replaced. Samples The table below contains strings and the values of the components after conversion to the structured type: ST_Acsi Quality [} 503]. TF6510 Version: 1.7.1 723
## Page 724

Appendix STRING(18) ST_Acsi Quality Description 'Q#00|00000000|0|00' STRUCT(0) All components have the value: 0. 'Q#01|00000000|1|10' STRUCT(Validity0:=0, Validity: Invalid. Source: Replaced. Test is set. Validity1:=1, Source:=1, Test:=1) All other components have the value: 0. 'Q#11|11000001|0|01' STRUCT(Validity0:=1, Validity: Questionable. Overflow, Out Of Range, Validity1:=1, Overflow:=1, Inaccurate and Operator Blocked are set. All Out Of Range:=1, Inaccurate:=1, other components have the value: 0. Operator Blocked:=1) 8.8 Quality-WORD format specification The Twin CAT Quality components are coded in WORD in the following way: Bit Component Type Value range Description 0 Validity0 [} 724] BIT 0..1 Validity MSB. 1 Validity1 [} 724] BIT 0..1 Validity LSB. 2 Overflow BIT 0..1 Overflow. 3 Out Of Range BIT 0..1 Not in permissible range. 4 Bad Reference BIT 0..1 Incorrect reference. 5 Oscillatory BIT 0..1 Oscillating. 6 Failure BIT 0..1 Failure. 7 Old Data BIT 0..1 Data not up to date. 8 Inconsistent BIT 0..1 Inconsistent. 9 Inaccurate BIT 0..1 Inaccurate. 10 Source [} 724] BIT 0..1 Source (‘0‘:=process, ‘1‘:=replaced). 11 Test BIT 0..1 Test. 12 Operator Blocke BIT 0..1 Operator blocked. d 13..1 Reserved BIT 0 Are not used. 5 Coding of the Quality. Validity components: Value Validity0 Validity1 STRING(2) Description Good 0 0 ‘00‘ Good (default value). Invalid 0 1 ‘01‘ Invalid. Reserved 1 0 ‘10‘ Reserved. Questionable 1 1 ‘11‘ Questionable. Coding of the Quality. Source components: Value Source STRING(1) Description Process 0 ‘0‘ Value comes from the process (default value). Substituted 1 ‘1‘ Value was replaced. Samples The table below contains strings and the values of the components after conversion to the structured type: ST_Acsi Quality [} 503]. 724 Version: 1.7.1 TF6510
## Page 725

Appendix WORD STRING( ST_Acsi Quality Description 18) 2#00000 'Q#00| STRUCT(0) All components have the value: 0. 0000000 0000000 0000 0|0|00' 2#00010 'Q#01| STRUCT(Validity0:=0, Validity1:=1, Validity: Invalid. Source: Process. 0110011 0011001 Bad Reference:=1, Oscillatory:=1, Bad Reference, Oscillatory, Inconsistent, 0010 1|0|01' Inconsistent:=1, Inaccurate:=1, Source:=0, Inaccurate, Operator Blocked are set. All Operator Blocked:=1) other components have the value: 0. 2#00001 'Q#10| STRUCT(Validity0:=1, Validity1:=0, Validity: Reserved. Source: Replaced. 1001100 1100110 Overflow:=1, Out Of Range:=1, Failure:=1, Overflow, Out Of Range, Failure, Old Data, 1101 0|1|10' Old Data:=1, Source:=1, Test:=1) Test are set. All other components have the value: 8.9 FAQ - frequently asked questions and answers Frequently asked questions are answered in this section in order to make it easier for you to work with Twin CAT IEC 61850. If you have any further questions, contact please our Support. Can a connection be established with several server devices at the same time with the Twin CAT IEC 61850 client? [} 725] ? Can a connection be established with several server devices at the same time with the Twin CAT IEC 61850 client? ! Yes, this is possible. One instance of FB_IEC61850Client Class must be available per connection. TF6510 Version: 1.7.1 725
## Page 727

More Information: www.beckhoff.com/tf6510 Beckhoff Automation Gmb H & Co. KG Hülshorstweg 20 33415 Verl Germany Phone: +49 5246 9630 info@beckhoff.com www.beckhoff.com
